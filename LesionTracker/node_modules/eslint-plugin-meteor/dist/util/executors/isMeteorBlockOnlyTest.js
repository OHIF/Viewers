'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = isMeteorBlockOnlyTest;

var _ast = require('../ast');

/**
 * Verifies a test of an IfStatement contains only checks with
 * Meteor.isClient, Meteor.isServer and Meteor.isCordova.
 *
 * @param {node} test Test of an IfStatement (MemberExpression, LogicalExpression, UnaryExpression)
 * @return {Boolean} True if test contains only Meteor locus checks
 */
function isMeteorBlockOnlyTest(test) {
  switch (test.type) {
    case 'MemberExpression':
      return (0, _ast.isMeteorProp)(test, 'isClient') || (0, _ast.isMeteorProp)(test, 'isServer') || (0, _ast.isMeteorProp)(test, 'isCordova');
    case 'UnaryExpression':
      if (test.operator === '!') {
        return isMeteorBlockOnlyTest(test.argument);
      }
      return false;
    case 'LogicalExpression':
      return isMeteorBlockOnlyTest(test.left) && isMeteorBlockOnlyTest(test.right);
    default:
      return false;
  }
}