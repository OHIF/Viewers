'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.schema = undefined;

var _ast = require('../util/ast');

// -----------------------------------------------------------------------------
// Rule Definition
// -----------------------------------------------------------------------------

exports.default = function (context) {
  return {
    CallExpression: function CallExpression(node) {
      if ((0, _ast.isMeteorCall)(node, 'setTimeout')) {
        if (node.arguments.length === 1) {
          context.report(node, 'Implicit timeout of 0');
        } else if (node.arguments.length > 1 && node.arguments[1].type === 'Literal' && node.arguments[1].value === 0) {
          context.report(node, 'Timeout of 0. Use `Meteor.defer` instead');
        }
      }
    }
  };
}; /**
    * @fileoverview Prevent usage of Meteor.setTimeout with zero delay
    * @author Dominik Ferber
    */

var schema = exports.schema = [];