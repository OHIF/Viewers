!function(){var t,e,n;(function(){t=this}).call(this),function(){e=__meteor_runtime_config__.meteorEnv,n={isProduction:"production"===e.NODE_ENV,isDevelopment:"production"!==e.NODE_ENV,isClient:!0,isServer:!1,isCordova:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(n.settings={public:__meteor_runtime_config__.PUBLIC_SETTINGS})}.call(this),function(){function t(t){if(t)return n._debug("Exception in callback of async function",t.stack?t.stack:t)}if(n.isServer)var e=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(n.release=__meteor_runtime_config__.meteorRelease),n._get=function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return;t=t[arguments[e]]}return t},n._ensure=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];n in t||(t[n]={}),t=t[n]}return t},n._delete=function(t){for(var e=[t],n=!0,r=1;r<arguments.length-1;r++){if(!((o=arguments[r])in t)){n=!1;break}if("object"!=typeof(t=t[o]))break;e.push(t)}for(var r=e.length-1;r>=0;r--){var o=arguments[r+1];if(n)n=!1;else for(var i in e[r][o])return;delete e[r][o]}},n.wrapAsync=function(r,o){return function(){for(var i=o||this,a=Array.prototype.slice.call(arguments),s,u=a.length-1;u>=0;--u){var c=a[u],l=typeof c;if("undefined"!==l){"function"===l&&(s=c);break}}if(!s){if(n.isClient)s=t;else{var f=new e;s=f.resolver()}++u}a[u]=n.bindEnvironment(s);var p=r.apply(i,a);return f?f.wait():p}};var r=Object.prototype.hasOwnProperty;n._inherits=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);var o=function(){this.constructor=t};return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};var o=!1;n._wrapAsync=function(t,e){return o||(n._debug("Meteor._wrapAsync has been renamed to Meteor.wrapAsync"),o=!0),n.wrapAsync.apply(n,arguments)}}.call(this),function(){"use strict";function t(){if(o.setImmediate){var t=function(t){o.setImmediate(t)};return t.implementation="setImmediate",t}return null}function e(){function t(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function e(e){if(e.source===o&&t(e.data,s)){var n=e.data.substring(s.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!o.postMessage||o.importScripts)return null;var n=!0,r=o.onmessage;if(o.onmessage=function(){n=!1},o.postMessage("","*"),o.onmessage=r,!n)return null;var i=0,a={},s="Meteor._setImmediate."+Math.random()+".";o.addEventListener?o.addEventListener("message",e,!1):o.attachEvent("onmessage",e);var u=function(t){a[++i]=t,o.postMessage(s+i,"*")};return u.implementation="postMessage",u}function r(){var t=function(t){o.setTimeout(t,0)};return t.implementation="setTimeout",t}var o=this;n._setImmediate=t()||e()||r()}.call(this),function(){function t(t){if(Package.ddp){var e=Package.ddp.DDP,n=e._CurrentMethodInvocation||e._CurrentInvocation,r=n.get();if(r&&r.isSimulation)throw new Error("Can't set timers inside simulations");return function(){n.withValue(null,t)}}return t}function e(e,r){return n.bindEnvironment(t(r),e)}n.setTimeout=function(t,n){return setTimeout(e("setTimeout callback",t),n)},n.setInterval=function(t,n){return setInterval(e("setInterval callback",t),n)},n.clearInterval=function(t){return clearInterval(t)},n.clearTimeout=function(t){return clearTimeout(t)},n.defer=function(t){n._setImmediate(e("defer callback",t))}}.call(this),function(){n.makeErrorType=function(t,e){var r=function(){Error.captureStackTrace?Error.captureStackTrace(this,r):this.stack=(new Error).stack,e.apply(this,arguments),this.errorType=t};return n._inherits(r,Error),r},n.Error=n.makeErrorType("Meteor.Error",function(t,e,n){var r=this;r.isClientSafe=!0,r.error=t,r.reason=e,r.details=n,r.reason?r.message=r.reason+" ["+r.error+"]":r.message="["+r.error+"]"}),n.Error.prototype.clone=function(){var t=this;return new n.Error(t.error,t.reason,t.details)}}.call(this),function(){n._noYieldsAllowed=function(t){return t()},n._SynchronousQueue=function(){var t=this;t._tasks=[],t._running=!1,t._runTimeout=null};var t=n._SynchronousQueue.prototype;t.runTask=function(t){var e=this;if(!e.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");e._tasks.push(t);var r=e._tasks;e._tasks=[],e._running=!0,e._runTimeout&&(clearTimeout(e._runTimeout),e._runTimeout=null);try{for(;r.length>0;){var o=r.shift();try{o()}catch(t){if(0===r.length)throw t;n._debug("Exception in queued task: "+(t.stack||t))}}}finally{e._running=!1}},t.queueTask=function(t){var e=this;e._tasks.push(t),e._runTimeout||(e._runTimeout=setTimeout(function(){return e.flush.apply(e,arguments)},0))},t.flush=function(){this.runTask(function(){})},t.drain=function(){var t=this;if(t.safeToRunTask())for(;t._tasks.length>0;)t.flush()},t.safeToRunTask=function(){return!this._running}}.call(this),function(){var t=[],e=!1,r=!1,o=0,i=function(){o++},a=function(){o--,s()},s=function(){if(!(r||!e||o>0)){for(r=!0;t.length;)t.shift()();n.isCordova&&WebAppLocalServer.startupDidComplete()}},u=function(){e||(e=!0,s())};n.isCordova&&(i(),document.addEventListener("deviceready",a,!1)),"complete"===document.readyState||"loaded"===document.readyState?window.setTimeout(u):document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&u()}),window.attachEvent("load",u)),n.startup=function(e){var o=!document.addEventListener&&document.documentElement.doScroll;if(o&&window===top){try{o("left")}catch(t){return void setTimeout(function(){n.startup(e)},50)}e()}else r?e():t.push(e)}}.call(this),function(){var t=0;n._debug=function(){if(t)t--;else if("undefined"!=typeof console&&void 0!==console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var e=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(e=!1);e?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else"function"==typeof Function.prototype.bind?Function.prototype.bind.call(console.log,console).apply(console,arguments):Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},n._suppress_log=function(e){t+=e},n._suppressed_log_expected=function(){return 0!==t}}.call(this),function(){n._escapeRegExp=function(t){return String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}}.call(this),function(){var t;t=n.isClient?e.TEST_METADATA:process.env.TEST_METADATA;var r=JSON.parse(t||"{}"),o=r.driverPackage;n.isTest=!!r.isTest,n.isAppTest=!!r.isAppTest,n.isPackageTest=!!o&&!n.isTest&&!n.isAppTest,"string"==typeof o&&n.startup(function(){var t=Package[o];if(!t)throw new Error("Can't find test driver package: "+o);if(n.isClient){if("function"!=typeof t.runTests)throw new Error("Test driver package "+o+" missing `runTests` export");t.runTests()}else"function"==typeof t.start&&t.start()})}.call(this),function(){var t=0,e=[];n.EnvironmentVariable=function(){this.slot=t++};var r=n.EnvironmentVariable.prototype;r.get=function(){return e[this.slot]},r.getOrNullIfOutsideFiber=function(){return this.get()},r.withValue=function(t,n){var r=e[this.slot];try{e[this.slot]=t;var o=n()}finally{e[this.slot]=r}return o},n.bindEnvironment=function(t,r,o){var i=e.slice();if(!r||"string"==typeof r){var a=r||"callback of async function";r=function(t){n._debug("Exception in "+a+":",t&&t.stack||t)}}return function(){var n=e;try{e=i;var a=t.apply(o,arguments)}catch(t){r(t)}finally{e=n}return a}},n._nodeCodeMustBeInFiber=function(){}}.call(this),function(){n.absoluteUrl=function(t,e){e||"object"!=typeof t||(e=t,t=void 0);var r=(e=Object.assign({},n.absoluteUrl.defaultOptions,e||{})).rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(r)||(r="http://"+r),/\/$/.test(r)||(r+="/"),t&&(r+=t),e.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),e.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r},n.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(n.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),n._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Package.meteor={},{Meteor:n,global:t,meteorEnv:e})}();

"undefined"==typeof Package&&(Package={}),Package["meteor-base"]={};

"undefined"==typeof Package&&(Package={}),Package["mobile-experience"]={};

"undefined"==typeof Package&&(Package={}),Package["babel-compiler"]={};

"undefined"==typeof Package&&(Package={}),Package.ecmascript={};

!function(){var n,t;(function(){n={}}).call(this),function(){(function(){var t=this,r=t._,e={},i=Array.prototype,u=Object.prototype,a=Function.prototype,c=i.push,o=i.slice,l=i.concat,f=u.toString,s=u.hasOwnProperty,p=i.forEach,h=i.map,v=i.reduce,y=i.reduceRight,d=i.filter,g=i.every,m=i.some,b=i.indexOf,_=i.lastIndexOf,w=Array.isArray,x=Object.keys,j=a.bind,A=function(n){return n instanceof A?n:this instanceof A?void(this._wrapped=n):new A(n)};void 0!==n?("undefined"!=typeof module&&module.exports&&(n=module.exports=A),n._=A):t._=A,A.VERSION="1.5.2";var k=function(n){return"[object Arguments]"===f.call(n)};k(arguments)||(k=function(n){return!(!n||!s.call(n,"callee")||"function"!=typeof n.callee)});var O=function(n){return n.length===+n.length&&(k(n)||n.constructor!==Object)},E=A.each=A.forEach=function(n,t,r){if(null!=n)if(p&&n.forEach===p)n.forEach(t,r);else if(O(n)){for(var i=0,u=n.length;i<u;i++)if(t.call(r,n[i],i,n)===e)return}else for(var a=A.keys(n),i=0,u=a.length;i<u;i++)if(t.call(r,n[a[i]],a[i],n)===e)return};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:h&&n.map===h?n.map(t,r):(E(n,function(n,i,u){e.push(t.call(r,n,i,u))}),e)};var F="Reduce of empty array with no initial value";A.reduce=A.foldl=A.inject=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),v&&n.reduce===v)return e&&(t=A.bind(t,e)),i?n.reduce(t,r):n.reduce(t);if(E(n,function(n,u,a){i?r=t.call(e,r,n,u,a):(r=n,i=!0)}),!i)throw new TypeError(F);return r},A.reduceRight=A.foldr=function(n,t,r,e){var i=arguments.length>2;if(null==n&&(n=[]),y&&n.reduceRight===y)return e&&(t=A.bind(t,e)),i?n.reduceRight(t,r):n.reduceRight(t);var u=n.length;if(!O(n)){var a=A.keys(n);u=a.length}if(E(n,function(c,o,l){o=a?a[--u]:--u,i?r=t.call(e,r,n[o],o,l):(r=n[o],i=!0)}),!i)throw new TypeError(F);return r},A.find=A.detect=function(n,t,r){var e;return M(n,function(n,i,u){if(t.call(r,n,i,u))return e=n,!0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:d&&n.filter===d?n.filter(t,r):(E(n,function(n,i,u){t.call(r,n,i,u)&&e.push(n)}),e)},A.reject=function(n,t,r){return A.filter(n,function(n,e,i){return!t.call(r,n,e,i)},r)},A.every=A.all=function(n,t,r){t||(t=A.identity);var i=!0;return null==n?i:g&&n.every===g?n.every(t,r):(E(n,function(n,u,a){if(!(i=i&&t.call(r,n,u,a)))return e}),!!i)};var M=A.some=A.any=function(n,t,r){t||(t=A.identity);var i=!1;return null==n?i:m&&n.some===m?n.some(t,r):(E(n,function(n,u,a){if(i||(i=t.call(r,n,u,a)))return e}),!!i)};A.contains=A.include=function(n,t){return null!=n&&(b&&n.indexOf===b?-1!=n.indexOf(t):M(n,function(n){return n===t}))},A.invoke=function(n,t){var r=o.call(arguments,2),e=A.isFunction(t);return A.map(n,function(n){return(e?t:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,function(n){return n[t]})},A.where=function(n,t,r){return A.isEmpty(t)?r?void 0:[]:A[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},A.findWhere=function(n,t){return A.where(n,t,!0)},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&A.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return E(n,function(n,i,u){var a=t?t.call(r,n,i,u):n;a>e.computed&&(e={value:n,computed:a})}),e.value},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&A.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return E(n,function(n,i,u){var a=t?t.call(r,n,i,u):n;a<e.computed&&(e={value:n,computed:a})}),e.value},A.shuffle=function(n){var t,r=0,e=[];return E(n,function(n){t=A.random(r++),e[r-1]=e[t],e[t]=n}),e},A.sample=function(n,t,r){return arguments.length<2||r?n[A.random(n.length-1)]:A.shuffle(n).slice(0,Math.max(0,t))};var R=function(n){return A.isFunction(n)?n:function(t){return t[n]}};A.sortBy=function(n,t,r){var e=R(t);return A.pluck(A.map(n,function(n,t,i){return{value:n,index:t,criteria:e.call(r,n,t,i)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var S=function(n){return function(t,r,e){var i={},u=null==r?A.identity:R(r);return E(t,function(r,a){var c=u.call(e,r,a,t);n(i,c,r)}),i}};A.groupBy=S(function(n,t,r){(A.has(n,t)?n[t]:n[t]=[]).push(r)}),A.indexBy=S(function(n,t,r){n[t]=r}),A.countBy=S(function(n,t){A.has(n,t)?n[t]++:n[t]=1}),A.sortedIndex=function(n,t,r,e){for(var i=(r=null==r?A.identity:R(r)).call(e,t),u=0,a=n.length;u<a;){var c=u+a>>>1;r.call(e,n[c])<i?u=c+1:a=c}return u},A.toArray=function(n){return n?A.isArray(n)?o.call(n):O(n)?A.map(n,A.identity):A.values(n):[]},A.size=function(n){return null==n?0:O(n)?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:o.call(n,0,t)},A.initial=function(n,t,r){return o.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:o.call(n,Math.max(n.length-t,0))},A.rest=A.tail=A.drop=function(n,t,r){return o.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,A.identity)};var I=function(n,t,r){return t&&A.every(n,A.isArray)?l.apply(r,n):(E(n,function(n){A.isArray(n)||A.isArguments(n)?t?c.apply(r,n):I(n,t,r):r.push(n)}),r)};A.flatten=function(n,t){return I(n,t,[])},A.without=function(n){return A.difference(n,o.call(arguments,1))},A.uniq=A.unique=function(n,t,r,e){A.isFunction(t)&&(e=r,r=t,t=!1);var i=r?A.map(n,r,e):n,u=[],a=[];return E(i,function(r,e){(t?e&&a[a.length-1]===r:A.contains(a,r))||(a.push(r),u.push(n[e]))}),u},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=function(n){var t=o.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.indexOf(t,n)>=0})})},A.difference=function(n){var t=l.apply(i,o.call(arguments,1));return A.filter(n,function(n){return!A.contains(t,n)})},A.zip=function(){for(var n=A.max(A.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;r<n;r++)t[r]=A.pluck(arguments,""+r);return t},A.object=function(n,t){if(null==n)return{};for(var r={},e=0,i=n.length;e<i;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e=0,i=n.length;if(r){if("number"!=typeof r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;e=r<0?Math.max(0,i+r):r}if(b&&n.indexOf===b)return n.indexOf(t,r);for(;e<i;e++)if(n[e]===t)return e;return-1},A.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(_&&n.lastIndexOf===_)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var i=e?r:n.length;i--;)if(n[i]===t)return i;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),i=0,u=new Array(e);i<e;)u[i++]=n,n+=r;return u};var T=function(){};A.bind=function(n,t){var r,e;if(j&&n.bind===j)return j.apply(n,o.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return r=o.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(o.call(arguments)));T.prototype=n.prototype;var i=new T;T.prototype=null;var u=n.apply(i,r.concat(o.call(arguments)));return Object(u)===u?u:i}},A.partial=function(n){var t=o.call(arguments,1);return function(){return n.apply(this,t.concat(o.call(arguments)))}},A.bindAll=function(n){var t=o.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return E(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=o.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(o.call(arguments,1)))},A.throttle=function(n,t,r){var e,i,u,a=null,c=0;r||(r={});var o=function(){c=!1===r.leading?0:new Date,a=null,u=n.apply(e,i)};return function(){var l=new Date;c||!1!==r.leading||(c=l);var f=t-(l-c);return e=this,i=arguments,f<=0?(clearTimeout(a),a=null,c=l,u=n.apply(e,i)):a||!1===r.trailing||(a=setTimeout(o,f)),u}},A.debounce=function(n,t,r){var e,i,u,a,c;return function(){u=this,i=arguments,a=new Date;var o=function(){var l=new Date-a;l<t?e=setTimeout(o,t-l):(e=null,r||(c=n.apply(u,i)))},l=r&&!e;return e||(e=setTimeout(o,t)),l&&(c=n.apply(u,i)),c}},A.once=function(n){var t=!1,r;return function(){return t?r:(t=!0,r=n.apply(this,arguments),n=null,r)}},A.wrap=function(n,t){return function(){var r=[n];return c.apply(r,arguments),t.apply(this,r)}},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},A.keys=x||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)A.has(n,r)&&t.push(r);return t},A.values=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),i=0;i<r;i++)e[i]=n[t[i]];return e},A.pairs=function(n){for(var t=A.keys(n),r=t.length,e=new Array(r),i=0;i<r;i++)e[i]=[t[i],n[t[i]]];return e},A.invert=function(n){for(var t={},r=A.keys(n),e=0,i=r.length;e<i;e++)t[n[r[e]]]=r[e];return t},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return E(o.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={},r=l.apply(i,o.call(arguments,1));return E(r,function(r){r in n&&(t[r]=n[r])}),t},A.omit=function(n){var t={},r=l.apply(i,o.call(arguments,1));for(var e in n)A.contains(r,e)||(t[e]=n[e]);return t},A.defaults=function(n){return E(o.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof A&&(n=n._wrapped),t instanceof A&&(t=t._wrapped);var i=f.call(n);if(i!=f.call(t))return!1;switch(i){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var u=r.length;u--;)if(r[u]==n)return e[u]==t;var a=n.constructor,c=t.constructor;if(a!==c&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(c)&&c instanceof c))return!1;r.push(n),e.push(t);var o=0,l=!0;if("[object Array]"==i){if(o=n.length,l=o==t.length)for(;o--&&(l=N(n[o],t[o],r,e)););}else{for(var s in n)if(A.has(n,s)&&(o++,!(l=A.has(t,s)&&N(n[s],t[s],r,e))))break;if(l){for(s in t)if(A.has(t,s)&&!o--)break;l=!o}}return r.pop(),e.pop(),l};A.isEqual=function(n,t){return N(n,t,[],[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!==n.nodeType)},A.isArray=w||function(n){return"[object Array]"==f.call(n)},A.isObject=function(n){return n===Object(n)},E(["Arguments","Function","String","Number","Date","RegExp"],function(n){A["is"+n]=function(t){return f.call(t)=="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),"function"!=typeof/./&&(A.isFunction=function(n){return"function"==typeof n}),A.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},A.isNaN=function(n){return A.isNumber(n)&&n!=+n},A.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"==f.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return s.call(n,t)},A.noConflict=function(){return t._=r,this},A.identity=function(n){return n},A.times=function(n,t,r){for(var e=Array(Math.max(0,n)),i=0;i<n;i++)e[i]=t.call(r,i);return e},A.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var q={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};q.unescape=A.invert(q.escape);var B={escape:new RegExp("["+A.keys(q.escape).join("")+"]","g"),unescape:new RegExp("("+A.keys(q.unescape).join("|")+")","g")};A.each(["escape","unescape"],function(n){A[n]=function(t){return null==t?"":(""+t).replace(B[n],function(t){return q[n][t]})}}),A.result=function(n,t){if(null!=n){var r=n[t];return A.isFunction(r)?r.call(n):r}},A.mixin=function(n){E(A.functions(n),function(t){var r=A[t]=n[t];A.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),U.call(this,r.apply(A,n))}})};var D=0;A.uniqueId=function(n){var t=++D+"";return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;A.template=function(n,t,r){var e;r=A.defaults({},r,A.templateSettings);var i=new RegExp([(r.escape||P).source,(r.interpolate||P).source,(r.evaluate||P).source].join("|")+"|$","g"),u=0,a="__p+='";n.replace(i,function(t,r,e,i,c){return a+=n.slice(u,c).replace(C,function(n){return"\\"+z[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),i&&(a+="';\n"+i+"\n__p+='"),u=c+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(n){throw n.source=a,n}if(t)return e(t,A);var c=function(n){return e.call(this,n,A)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},A.chain=function(n){return A(n).chain()};var U=function(n){return this._chain?A(n).chain():n};A.mixin(A),E(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];A.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],U.call(this,r)}}),E(["concat","join","slice"],function(n){var t=i[n];A.prototype[n]=function(){return U.call(this,t.apply(this._wrapped,arguments))}}),A.extend(A.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){t=n._}.call(this),"undefined"==typeof Package&&(Package={}),function(n,t){for(var r in t)r in n||(n[r]=t[r])}(Package.underscore={},{_:t})}();

!function(){var r=Package.meteor.Meteor,n=Package.meteor.global,e=Package.meteor.meteorEnv,a;(function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={},e=0;e<r.length;e++)n[r.charAt(e)]=e;(a={}).encode=function(r){if("string"==typeof r){var n=r;r=a.newBinary(n.length);for(var e=0;e<n.length;e++){var l=n.charCodeAt(e);if(l>255)throw new Error("Not ascii. Base64.encode can only take ascii strings.");r[e]=l}}for(var u=[],i=null,o=null,c=null,f=null,e=0;e<r.length;e++)switch(e%3){case 0:i=r[e]>>2&63,o=(3&r[e])<<4;break;case 1:o|=r[e]>>4&15,c=(15&r[e])<<2;break;case 2:c|=r[e]>>6&3,f=63&r[e],u.push(t(i)),u.push(t(o)),u.push(t(c)),u.push(t(f)),i=null,o=null,c=null,f=null;break}return null!=i&&(u.push(t(i)),u.push(t(o)),null==c?u.push("="):u.push(t(c)),null==f&&u.push("=")),u.join("")};var t=function(n){return r.charAt(n)},l=function(r){return"="===r?-1:n[r]};a.newBinary=function(r){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var n=[],e=0;e<r;e++)n.push(0);return n.$Uint8ArrayPolyfill=!0,n}return new Uint8Array(new ArrayBuffer(r))},a.decode=function(r){var n=Math.floor(3*r.length/4);"="==r.charAt(r.length-1)&&(n--,"="==r.charAt(r.length-2)&&n--);for(var e=a.newBinary(n),t=null,u=null,i=null,o=0,c=0;c<r.length;c++){var f=r.charAt(c),s=l(f);switch(c%4){case 0:if(s<0)throw new Error("invalid base64 string");t=s<<2;break;case 1:if(s<0)throw new Error("invalid base64 string");t|=s>>4,e[o++]=t,u=(15&s)<<4;break;case 2:s>=0&&(u|=s>>2,e[o++]=u,i=(3&s)<<6);break;case 3:s>=0&&(e[o++]=i|s);break}}return e}}).call(this),"undefined"==typeof Package&&(Package={}),function(r,n){for(var e in n)e in r||(r[e]=n[e])}(Package.base64={},{Base64:a})}();

!function(){var n=Package.meteor.Meteor,e=Package.meteor.global,r=Package.meteor.meteorEnv,t,o,i;t=function(n){"use strict";function e(n,e){return o(n)&&(p(A,n,e),i(k)&&k(B)),B}function r(n){this.id=n,this.children=[],this.childrenById={}}function t(n,e){return O.call(n,e)&&n[e]}function o(n){return"object"==typeof n&&null!==n}function i(n){return"function"==typeof n}function u(n){return"string"==typeof n}function c(n){return new Error("Cannot find module '"+n+"'")}function s(n){function e(e){var r=w(n,e);if(r)return l(r,n.module);var t=c(e);if(i(E))return E(e,n.module.id,t);throw t}return i(x)&&(e=x(e,n.module)),e.extensions=h(n).slice(0),e.resolve=function(e){var r=w(n,e);if(r)return r.module.id;var t=c(e);if(E&&i(E.resolve))return E.resolve(e,n.module.id,t);throw t},e}function f(n,e){var t=this;t.parent=e=e||null,t.module=new r(n),q[n]=t,t.contents=null,t.deps={}}function l(n,e){var r=n.module;if(!O.call(r,"exports")){var t=n.contents;if(!t){if(n.stub)return n.stub;throw c(r.id)}if(e){r.parent=e;var o=e.children;Array.isArray(o)&&o.push(r)}i(r.useNode)&&r.useNode()||t(r.require=r.require||s(n),r.exports=n.stub||{},r,n.module.id,n.parent.module.id),r.loaded=!0}var u=r.runSetters||r.runModuleSetters;return i(u)&&u.call(r),r.exports}function a(n){return n&&o(n.contents)}function d(n){return n&&null===n.contents}function p(n,e,r){Array.isArray(e)?(e.forEach(function(r){u(r)?n.deps[r]=n.module.id:i(r)?e=r:o(r)&&(n.stub=n.stub||{},v(r,function(e,r){n.stub[r]=e}))}),i(e)||(e=null)):i(e)||u(e)||o(e)||(e=null),e&&(n.contents=n.contents||(o(e)?{}:e),o(e)&&a(n)&&v(e,function(e,o){if(".."===o)i=n.parent;else{var i=t(n.contents,o);i||((i=n.contents[o]=new f(n.module.id.replace(/\/*$/,"/")+o,n)).options=r)}p(i,e,r)}))}function v(n,e,r){Object.keys(n).forEach(function(r){e.call(this,n[r],r)},r)}function h(n){return n.options&&n.options.extensions||P}function m(n,e,r){for(;n&&!a(n);)n=n.parent;if(!n||!e||"."===e)return n;if(".."===e)return n.parent;var o=t(n.contents,e);if(r&&(!o||a(o)))for(var i=0;i<r.length;++i){var u=t(n.contents,e+r[i]);if(u&&!a(u))return u}return o}function y(n,e,r){var t=e.split("/");return t.every(function(e,o){return n=o<t.length-1?m(n,e):m(n,e,r)}),n}function b(n,e){var r=e&&e.module;n&&r&&(n.childrenById[r.id]=r)}function w(n,e,r,t){var r=r||n.module,o=h(n);for(n="/"===e.charAt(0)?y(A,e,o):"."===e.charAt(0)?y(n,e,o):g(n,e,o);a(n);){if((t=t||[]).indexOf(n)<0){t.push(n);var i=m(n,"package.json"),c,s=i&&l(i,r);if(s&&I.some(function(n){return u(c=s[n])})&&(b(r,i),n=y(n,c,o)||w(n,c,r,t)))continue}n=m(n,"index.js")}return n&&u(n.contents)&&(n=w(n,n.contents,r,t)),b(r,n),n}function g(n,e,r){if(i(j)&&(e=j(e,n.module.id)),u(e)){for(var t;n&&!t;n=n.parent)t=a(n)&&y(n,"node_modules/"+e,r);return t}}var P=(n=n||{}).extensions||[".js",".json"],k=n.onInstall,x=n.wrapRequire,j=n.override,E=n.fallback,I=n.mainFields||(n.browser?["browser","main"]:["main"]),O={}.hasOwnProperty,q={},A=new f("/",new f("/..")),B=s(A);e.fetch=function(n){throw new Error("fetch not implemented")},r.prototype.resolve=function(n){return this.require.resolve(n)};var M,R;return r.prototype.prefetch=function(n){function r(n){var e=t(q,n.id);d(e)&&!e.pending&&(e.pending=!0,(u=u||{})[n.id]={module:e.module,deps:Object.keys(e.deps),options:e.options,stub:e.stub},v(e.deps,function(n,r){w(e,r)}),v(n.childrenById,r))}var o=this,i=t(q,o.id),u;M=M||Promise.resolve();var c=R=R||M;return R=M.then(function(){var t=o.resolve(n);return v(o.childrenById,r),Promise.resolve(u&&e.fetch(u)).then(function(n){function r(){return n&&e(n),t}return c.then(r,r)})})},e.Module=r,e},"object"==typeof exports&&(exports.makeInstaller=t),function(){o={},"function"==typeof Profile&&process.env.METEOR_PROFILE&&(o.wrapRequire=function(n){return Profile(function(n){return"require("+JSON.stringify(n)+")"},n)})}.call(this),function(){o.browser=!0,i=t(o)}.call(this),"undefined"==typeof Package&&(Package={}),function(n,e){for(var r in e)r in n||(n[r]=e[r])}(Package["modules-runtime"]={},{meteorInstall:i})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,r=Package.meteor.meteorEnv,n=Package["modules-runtime"].meteorInstall,o=n({node_modules:{meteor:{modules:{"client.js":function(e,t){e("./install-packages.js"),e("./stubs.js"),e("./process.js"),e("./reify.js"),t.addStyles=e("./css").addStyles},"css.js":function(e,t){var r=document,n=r.getElementsByTagName("head").item(0);t.addStyles=function(e){var t=r.createElement("style");t.setAttribute("type","text/css");var o=t.sheet||t.styleSheet;return o?o.cssText=e:t.appendChild(r.createTextNode(e)),n.appendChild(t)}},"install-packages.js":function(e,t,r){function o(e,t){var r={};r[e+".js"]="string"==typeof t?t:function(t,r,n){n.exports=Package[e]},n({node_modules:{meteor:r}})}o("meteor"),o("meteor-base"),o("mobile-experience"),o("babel-compiler"),o("ecmascript"),o("underscore"),o("base64"),o("modules-runtime"),o("modules","meteor/modules/client.js"),o("ecmascript-runtime"),o("promise","meteor/promise/client.js"),o("babel-runtime","meteor/babel-runtime/babel-runtime.js"),o("ecmascript-runtime-client","meteor/ecmascript-runtime-client/runtime.js"),o("ejson","meteor/ejson/ejson.js"),o("diff-sequence"),o("geojson-utils","meteor/geojson-utils/main.js"),o("id-map"),o("random"),o("mongo-id"),o("ordered-dict"),o("tracker"),o("minimongo","meteor/minimongo/minimongo_client.js"),o("check","meteor/check/match.js"),o("retry"),o("callback-hook"),o("ddp-common"),o("reload"),o("ddp-client","meteor/ddp-client/namespace.js"),o("ddp"),o("ddp-server"),o("allow-deny"),o("mongo"),o("blaze-html-templates"),o("reactive-var"),o("jquery","meteor/jquery/main.js"),o("standard-minifier-css"),o("standard-minifier-js"),o("shell-server"),o("ohif:polyfill"),o("standard-app-packages"),o("stylus"),o("observe-sequence"),o("deps"),o("htmljs"),o("blaze"),o("spacebars"),o("templating-compiler"),o("templating-runtime"),o("templating"),o("ui"),o("iron:core"),o("iron:dynamic-template"),o("iron:layout"),o("iron:url"),o("iron:middleware-stack"),o("iron:location"),o("reactive-dict"),o("iron:controller"),o("iron:router"),o("natestrauser:select2"),o("aldeed:simple-schema"),o("autoupdate"),o("meteor-platform"),o("webapp","meteor/webapp/webapp_client.js"),o("logging"),o("session"),o("livedata"),o("launch-screen"),o("ohif:core","meteor/ohif:core/main.js"),o("ohif:header","meteor/ohif:header/main.js"),o("ohif:themes-common"),o("ohif:themes"),o("ohif:design"),o("ohif:cornerstone","meteor/ohif:cornerstone/main.js"),o("url"),o("http"),o("momentjs:moment"),o("validatejs"),o("amplify"),o("ddp-rate-limiter"),o("localstorage"),o("accounts-base","meteor/accounts-base/client_main.js"),o("u2622:persistent-session"),o("icr:xnat-roi-scaling","meteor/icr:xnat-roi-scaling/main.js"),o("ohif:cornerstone-settings","meteor/ohif:cornerstone-settings/client/main.js"),o("ohif:log"),o("ohif:commands","meteor/ohif:commands/main.js"),o("ohif:hotkeys","meteor/ohif:hotkeys/main.js"),o("ohif:viewerbase","meteor/ohif:viewerbase/main.js"),o("ohif:metadata","meteor/ohif:metadata/main.js"),o("silentcicero:jszip"),o("raix:eventemitter"),o("aldeed:collection2-core"),o("aldeed:schema-index"),o("aldeed:schema-deny"),o("aldeed:collection2"),o("twbs:bootstrap"),o("dangrossman:bootstrap-daterangepicker"),o("ohif:servers"),o("ohif:dicom-services"),o("ohif:wadoproxy"),o("ohif:studies"),o("ohif:study-list"),o("ohif:hanging-protocols"),o("aldeed:template-extension"),o("fortawesome:fontawesome"),o("mrt:moment"),o("icr:xnat-roi-namespace","meteor/icr:xnat-roi-namespace/main.js"),o("icr:xnat-roi","meteor/icr:xnat-roi/main.js"),o("dynamic-import","meteor/dynamic-import/client.js"),o("hot-code-push"),o("mdg:validation-error"),o("service-configuration")},"process.js":function(o,i,a){if(!t.process)try{t.process=o("process")}catch(e){t.process={}}var s=t.process;e.isServer?n({node_modules:{"process.js":function(e,t,r){r.exports=s}}}):(s.platform="browser",s.nextTick=s.nextTick||e._setImmediate),"object"!=typeof s.env&&(s.env={});var u=Object.prototype.hasOwnProperty;for(var c in r)u.call(r,c)&&(s.env[c]=r[c])},"reify.js":function(e,t,r){var n=r.constructor.prototype;e("reify/lib/runtime").enable(n),n.importSync=n.importSync||n.import,n.import=n.import||n.importSync},"stubs.js":function(e){var t=!1;try{e.resolve("meteor-node-stubs"),t=!0}catch(e){}t&&e("meteor-node-stubs")},node_modules:{reify:{lib:{runtime:{"index.js":function(e,t,r){"use strict";function n(e,t,r){c.setESModule(this.exports),l.getOrCreate(this.exports,this),c.isObject(t)&&l.getOrCreate(e).addSetters(this,t,r)}function o(e,t,r){return this.watch(this.require(e),t,r)}function i(e,t){c.setESModule(this.exports);var r=l.getOrCreate(this.exports,this);r.addGetters(e,t),this.loaded&&r.runSetters()}function a(e){return this.export({default:function(){return e}},!0)}function s(e){var t=l.get(this.exports);return null!==t&&t.runSetters(),this.loaded&&l.getOrCreate(this.exports,this),e}function u(){var e=this;return function(t){Object.keys(t).forEach(function(r){"default"!==r&&c.copyKey(r,e.exports,t)})}}var c=e("./utils.js"),l=e("./entry.js");t.enable=function(e){return("function"!=typeof e.export||"function"!=typeof e.importSync)&&(e.export=i,e.exportDefault=a,e.runSetters=s,e.watch=n,e.makeNsSetter=u,e.runModuleSetters=s,e.importSync=o,!0)}},"utils.js":function(e,t,r){"use strict";function n(e,t,r){if(m){var n=Object.getOwnPropertyDescriptor(r,e);n.configurable=!0,Object.defineProperty(t,e,n)}else t[e]=r[e]}function o(e){if(s(e)){if(f&&g.call(e,h))return!!e[h];if(g.call(e,d))return!!e[d]}return!1}function i(e){s(e)&&(f?e[h]=!0:e[d]||Object.defineProperty(e,d,{configurable:!0,enumerable:!1,value:!0,writable:!1}))}function a(e){return"object"==typeof e&&null!==e}function s(e){var t=typeof e;return"function"===t||"object"===t&&null!==e}function u(){var e=Object.create(null);return p&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module",configurable:!1,enumerable:!1,writable:!1}),i(e),e}function c(e,t){return l?Object.setPrototypeOf(e,t):e.__proto__=t,e}var l="function"==typeof Object.setPrototypeOf,f="function"==typeof Symbol,d="__esModule",h=f?Symbol.for(d):null,p=f&&"symbol"==typeof Symbol.toStringTag,m="function"==typeof Object.getOwnPropertyDescriptor,g=Object.prototype.hasOwnProperty;t.copyKey=n,t.valueOrGetter=function(e,t){if(m&&g.call(e,t)){var r=Object.getOwnPropertyDescriptor(e,t);if("function"==typeof r.get)return r.get}return e[t]},t.getESModule=o,t.setESModule=i,t.isObject=a,t.isObjectLike=s,t.createNamespace=u,t.setPrototypeOf=c},"entry.js":function(e,t,r){"use strict";function n(e){this.exports=e,this.getters=Object.create(null),this.setters=Object.create(null),this.namespace=d.createNamespace(),this.ownerModules=Object.create(null),this._loaded=!1}function o(e){if(!d.isObjectLike(e))return new n(e);if(void 0!==(t=b.get(e)))return t;var t=new n(e);return b.set(e,t),t}function i(e){var t=Object.keys(e),r=t.indexOf("__esModule");return r>=0&&t.splice(r,1),t}function a(e,t){var r=!1;d.getESModule(e.exports)||(e.namespace.default=e.exports,r=!0),d.isObjectLike(e.exports)&&((void 0===t||t.indexOf("*")>=0)&&(t=Object.keys(e.exports)),t.forEach(function(t){g.call(e.getters,t)||r&&"default"===t||!g.call(e.exports,t)||d.copyKey(t,e.namespace,e.exports)}))}function s(e,t,r,n){function o(t,r){var n=r;return n!==n?n=p:void 0===n&&(n=m),e.last[t]!==n&&(e.last[t]=n,!0)}if("__esModule"!==t){var a=!1;if(void 0===e.last&&(e.last=Object.create(null),a=!0),"*"===t)for(var s=i(r),u=s.length,c=0;c<u;++c){var l=s[c];o(l,d.valueOrGetter(r,l))&&(a=!0)}else o(t,r)&&(a=!0);return a?n(e,t,r):void 0}}function u(e,t,r){var n=!0;void 0===t&&(t=Object.keys(e.setters),n=!1);for(var o=t.length,i=0;i<o;++i){var a=t[i];if(!n||g.call(e.setters,a))for(var u=e.setters[a],l=Object.keys(u),f=l.length,d=0;d<f;++d){var h=l[d],p=c(e,a);s(u[h],a,p,r);var m=e.getters[a];"function"==typeof m&&m.runCount>0&&m.constant&&delete u[h]}}}function c(e,t){if("*"===t)return e.namespace;if(g.call(e.namespace,t))return e.namespace[t];var r=e.exports;if("default"===t&&!(d.getESModule(r)&&"default"in r))return r;if(null!=r)return r[t]}function l(){return Math.random().toString(36).replace("0.",++v+"$")}function f(e,t){var r=e.getters[t];try{var n=r();return++r.runCount,n}catch(e){}return h}var d=e("./utils.js"),h={},p={},m={},g=Object.prototype.hasOwnProperty,v=0,_=d.setPrototypeOf(n.prototype,null),b="function"==typeof WeakMap?new WeakMap:new function e(){var t=[],r=[];this.get=function(e){var n=t.indexOf(e);if(n>=0)return r[n]},this.set=function(e,n){var o=t.indexOf(e);o>=0?r[o]=n:(t.push(e),r.push(n))}};n.get=function(e){if(d.isObjectLike(e)){var t=b.get(e);if(void 0!==t)return t}return null},n.getOrCreate=function(e,t){var r=o(e);return d.isObject(t)&&(r.ownerModules[t.id]=t),r},_.addGetters=function(e,t){var r=i(e),n=r.length;t=!!t;for(var o=0;o<n;++o){var a=r[o],s=e[a];"function"!=typeof s||a in this.getters||(this.getters[a]=s,s.constant=t,s.runCount=0)}},_.addSetters=function(e,t,r){var n=i(t),o=n.length;if(o){r=void 0===r?l():e.id+":"+r;for(var a=0;a<o;++a){var s=n[a],u=t[s];"function"==typeof u&&(u.parent=e,s in this.setters||(this.setters[s]=Object.create(null)),this.setters[s][r]=u)}this.runSetters(n)}},_.runGetters=function(e){a(this,e),(void 0===e||e.indexOf("*")>=0)&&(e=Object.keys(this.getters));for(var t=e.length,r=0;r<t;++r){var n=e[r],o=f(this,n);o!==h&&(this.namespace[n]=o,this.exports[n]=o)}},_.hasLoaded=function(){if(this._loaded)return!0;for(var e=Object.keys(this.ownerModules),t=e.length,r=0;r<t;++r){var n=this.ownerModules[e[r]];if(!n.loaded&&n.exports===this.exports)return!1}return this._loaded=!0},_.runSetters=function(e){this.runGetters(e);var t;if(u(this,e,function(e,r,n){void 0===t&&(t=Object.create(null)),t[e.parent.id]=e.parent,e(n,r)}),t)for(var r=Object.keys(t),o=r.length,i=0;i<o;++i){var a=t[r[i]],s=n.get(a.exports);s&&s.runSetters()}},r.exports=n}}}}}}},"cornerstone-core":{"package.json":function(e,t){t.name="cornerstone-core",t.version="2.1.0",t.main="./dist/cornerstone.min.js"},dist:{"cornerstone.min.js":function(e,t,r){!function(e,n){"object"==typeof t&&"object"==typeof r?r.exports=n():"function"==typeof define&&define.amd?define("cornerstone-core",[],n):"object"==typeof t?t["cornerstone-core"]=n():e.cornerstone=n()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=42)}([function(e,t,r){"use strict";function n(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<s.length;t++)if(s[t].element===e)return s[t];throw new Error("element not enabled")}function o(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");s.push(e)}function i(e){var t=[];return s.forEach(function(r){r.image&&r.image.imageId===e&&t.push(r)}),t}function a(){return s}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnabledElement=n,t.addEnabledElement=o,t.getEnabledElementsByImageId=i,t.getEnabledElements=a;var s=[]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.performance?performance.now():Date.now()}},function(e,t,r){"use strict";function n(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=void 0;return"function"==typeof window.CustomEvent?n=new CustomEvent(t,{detail:r,cancelable:!0}):(n=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,r),e.dispatchEvent(n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");if(void 0===t)return{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1};var r=e.height/t.rows,n=e.width/t.columns;return{scale:Math.min(n,r),translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var o=(0,n.default)(e,r);t.setTransform(o.m[0],o.m[1],o.m[2],o.m[3],o.m[4],o.m[5])};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,n.getEnabledElement)(e);if(void 0===r.image&&!r.layers.length)throw new Error("updateImage: image has not been loaded yet");(0,o.default)(r,t)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),o=function(e){return e&&e.__esModule?e:{default:e}}(r(29));t.default={getColormap:n.getColormap,getColormapsList:n.getColormapsList,LookupTable:o.default}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&e.cachedLut.invert===t.invert?e.cachedLut.lutArray:((0,c.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.lutArray)}function i(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas;if(255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas())return t.getCanvas();if(!1===(0,p.default)(e,t)&&!0!==r)return n;n.width===t.width&&n.height===t.height||(0,m.default)(e,t);var i=(0,u.default)(),a=o(t,e.viewport);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,u.default)()-i;var s=e.renderingTools.renderCanvasData,c=e.renderingTools.renderCanvasContext;return t.rgba?(0,f.default)(t,a,s.data):(0,l.default)(t,a,s.data),i=(0,u.default)(),c.putImageData(s,0,0),t.stats.lastPutImageDataTime=(0,u.default)()-i,n}function a(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderColorImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,d.default)(e,n);var o=void 0;o=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?h.default.renderer.render(e):i(e,r,t),n.drawImage(o,0,0,r.width,r.height,0,0,r.width,r.height),e.renderingTools=(0,g.default)(e)}function s(e,t){if(void 0===e)throw new Error("addColorLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addColorLayer: image must be loaded before it can be drawn");r.rgba=!0,e.canvas=i(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,g.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderColorImage=a,t.addColorLayer=s;var u=n(r(1)),c=n(r(45)),l=n(r(21)),f=n(r(46)),d=n(r(4)),h=n(r(15)),p=n(r(13)),m=n(r(11)),g=n(r(12))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.default)(e)};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(24))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas,o=e.viewport.colormap||e.options.colormap;if(o&&"string"==typeof o&&(o=h.default.getColormap(o)),!o)throw new Error("renderLabelMapImage: colormap not found.");var i=o.getId();if(!1===(0,f.default)(e,t)&&!0!==r&&e.renderingTools.colormapId===i)return n;n.width===t.width&&n.height===t.height||(0,c.default)(e,t);var a=(0,u.default)();e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===i||(e.renderingTools.colorLut=o.createLookupTable(),e.renderingTools.colormapId=i),t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,u.default)()-a;var s=e.renderingTools.colorLut,l=e.renderingTools.renderCanvasData,p=e.renderingTools.renderCanvasContext;return(0,d.default)(t,s,l.data),a=(0,u.default)(),p.putImageData(l,0,0),t.stats.lastPutImageDataTime=(0,u.default)()-a,n}function i(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,s.default)(e,n);var i=o(e,r,t),a=r.width,u=r.height;n.drawImage(i,0,0,a,u,0,0,a,u),e.renderingTools=(0,l.default)(e)}function a(e,t){if(void 0===e)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");e.canvas=o(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,l.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderLabelMapImage=i,t.addLabelMapLayer=a;var s=n(r(4)),u=n(r(1)),c=n(r(11)),l=n(r(12)),f=n(r(13)),d=n(r(22)),h=n(r(7))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.renderingTools.renderCanvas;r.width=t.width,r.height=t.height;var n=r.getContext("2d");n.fillStyle="white",n.fillRect(0,0,r.width,r.height);var o=n.getImageData(0,0,t.width,t.height);e.renderingTools.renderCanvasContext=n,e.renderingTools.renderCanvasData=o}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.image.imageId,r=e.viewport;return e.renderingTools.lastRenderedImageId=t,e.renderingTools.lastRenderedViewport={windowCenter:r.voi.windowCenter,windowWidth:r.voi.windowWidth,invert:r.invert,rotation:r.rotation,hflip:r.hflip,vflip:r.vflip,modalityLUT:r.modalityLUT,voiLUT:r.voiLUT,colormap:r.colormap},e.renderingTools}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.renderingTools.lastRenderedImageId,n=e.renderingTools.lastRenderedViewport;return t.imageId!==r||!n||n.windowCenter!==e.viewport.voi.windowCenter||n.windowWidth!==e.viewport.voi.windowWidth||n.invert!==e.viewport.invert||n.rotation!==e.viewport.rotation||n.hflip!==e.viewport.hflip||n.vflip!==e.viewport.vflip||n.modalityLUT!==e.viewport.modalityLUT||n.voiLUT!==e.viewport.voiLUT||n.colormap!==e.viewport.colormap}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var n=e.renderingTools.renderCanvas,o=e.viewport.colormap||e.options.colormap;if(o&&"string"==typeof o&&(o=p.default.getColormap(o)),!o)throw new Error("renderPseudoColorImage: colormap not found.");var i=o.getId();if(!1===(0,d.default)(e,t)&&!0!==r&&e.renderingTools.colormapId===i)return n;n.width===t.width&&n.height===t.height||(0,c.default)(e,t);var a=(0,u.default)();e.renderingTools.colorLut&&!r&&e.renderingTools.colormapId===i||(o.setNumberOfColors(256),e.renderingTools.colorLut=o.createLookupTable(),e.renderingTools.colormapId=i);var s=(0,l.default)(t,e.viewport,r);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,u.default)()-a;var f=e.renderingTools.colorLut,m=e.renderingTools.renderCanvasData,g=e.renderingTools.renderCanvasContext;return(0,h.default)(t,s,f,m.data),a=(0,u.default)(),g.putImageData(m,0,0),t.stats.lastPutImageDataTime=(0,u.default)()-a,n}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,s.default)(e,n);var i=o(e,r,t),a=r.width,u=r.height;n.drawImage(i,0,0,a,u,0,0,a,u),e.renderingTools=(0,f.default)(e)}function a(e,t){if(void 0===e)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");e.canvas=o(e,r,t);var n=e.canvas.getContext("2d");n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,e.renderingTools=(0,f.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderPseudoColorImage=i,t.addPseudoColorLayer=a;var s=n(r(4)),u=n(r(1)),c=n(r(11)),l=n(r(32)),f=n(r(12)),d=n(r(13)),h=n(r(23)),p=n(r(7))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(47),i=n(r(34)),a=n(r(33)),s={createProgramFromString:i.default,renderer:{render:o.render,initRenderer:o.initRenderer,getRenderCanvas:o.getRenderCanvas,isWebGLAvailable:o.isWebGLAvailable},textureCache:a.default};Object.defineProperty(s,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function(){return o.isWebGLInitialized}}),t.default=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=new(function(){function e(){n(this,e),this.listeners={},this.namespaces={}}return o(e,[{key:"addEventNamespaceListener",value:function(e,t){e.indexOf(".")<=0||(this.namespaces[e]=t,this.addEventListener(e.split(".")[0],t))}},{key:"removeEventNamespaceListener",value:function(e){e.indexOf(".")<=0||!this.namespaces[e]||(this.removeEventListener(e.split(".")[0],this.namespaces[e]),delete this.namespaces[e])}},{key:"addEventListener",value:function(e,t){e.indexOf(".")>0?this.addEventNamespaceListener(e,t):(e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t))}},{key:"removeEventListener",value:function(e,t){if(e.indexOf(".")>0)this.removeEventNamespaceListener(e);else if(e in this.listeners)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t)return void r.splice(n,1)}},{key:"dispatchEvent",value:function(e){if(!(e.type in this.listeners))return!0;for(var t=this.listeners[e.type],r=0,n=t.length;r<n;r++)t[r].call(this,e);return!e.defaultPrevented}}]),e}());t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var o=e.renderingTools.renderCanvas;if(!1===(0,h.default)(e,t)&&!0!==r)return o;o.width===t.width&&o.height===t.height||(0,p.default)(e,t);var i=(0,l.default)(),a=(0,d.default)(t,e.viewport,r);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,l.default)()-i;var c=e.renderingTools.renderCanvasData,f=e.renderingTools.renderCanvasContext;return n?(0,s.default)(t,a,c.data):(0,u.default)(t,a,c.data),i=(0,l.default)(),f.putImageData(c,0,0),t.stats.lastPutImageDataTime=(0,l.default)()-i,o}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("drawImage: image must be loaded before it can be drawn");var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,c.default)(e,n);var i=void 0;i=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?f.default.renderer.render(e):o(e,r,t),n.drawImage(i,0,0,r.width,r.height,0,0,r.width,r.height),e.renderingTools=(0,m.default)(e)}function a(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=o(e,n,t,r);var i=e.canvas.getContext("2d");i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,e.renderingTools=(0,m.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderGrayscaleImage=i,t.addGrayscaleLayer=a;var s=n(r(20)),u=n(r(30)),c=n(r(4)),l=n(r(1)),f=n(r(15)),d=n(r(32)),h=n(r(13)),p=n(r(11)),m=n(r(12))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,a,s){var u=e.maxPixelValue,c=e.minPixelValue,l=Math.min(c,0);if(void 0===e.cachedLut){var f=u-l+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(f)}var d=e.cachedLut.lutArray,h=(0,o.default)(e.slope,e.intercept,a),p=(0,i.default)(t,r,s);if(!0===n)for(var m=c;m<=u;m++)d[m+-l]=255-p(h(m));else for(var g=c;g<=u;g++)d[g+-l]=p(h(g));return d};var o=n(r(26)),i=n(r(27))},function(e,t,r){"use strict";function n(e){window.setTimeout(e,1e3/60)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||n(e)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=(0,n.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,n.default)()-o;var a=i.length,s=e.minPixelValue,u=3,c=0;if(o=(0,n.default)(),i instanceof Int16Array)if(s<0)for(;c<a;)r[u]=t[i[c++]+-s],u+=4;else for(;c<a;)r[u]=t[i[c++]],u+=4;else if(i instanceof Uint16Array)for(;c<a;)r[u]=t[i[c++]],u+=4;else if(s<0)for(;c<a;)r[u]=t[i[c++]+-s],u+=4;else for(;c<a;)r[u]=t[i[c++]],u+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,n.default)()-o};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=(0,n.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,n.default)()-o;var a=e.minPixelValue,s=0,u=0,c=i.length;if(o=(0,n.default)(),a<0)for(;u<c;)r[s++]=t[i[u++]+-a],r[s++]=t[i[u++]+-a],r[s]=t[i[u]+-a],u+=2,s+=2;else for(;u<c;)r[s++]=t[i[u++]],r[s++]=t[i[u++]],r[s]=t[i[u]],u+=2,s+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,n.default)()-o};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=(0,a.default)(),o=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-n;var s=o.length,u=e.minPixelValue,c=0,l=0,f=void 0,d=void 0;if(n=(0,a.default)(),d=t instanceof i.default.LookupTable?t.Table:t,u<0)for(;l<s;)f=d[o[l++]+-u],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];else for(;l<s;)f=d[o[l++]],r[c++]=f[0],r[c++]=f[1],r[c++]=f[2],r[c++]=f[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-n}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(7)),a=n(r(1));t.default=o},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r,n){var o=(0,a.default)(),s=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-o;var u=s.length,c=e.minPixelValue,l=0,f=0,d=void 0,h=void 0,p=void 0;if(o=(0,a.default)(),p=r instanceof i.default.LookupTable?r.Table:r,c<0)for(;f<u;)d=t[s[f++]+-c],h=p[d],n[l++]=h[0],n[l++]=h[1],n[l++]=h[2],n[l++]=h[3];else for(;f<u;)d=t[s[f++]],h=p[d],n[l++]=h[0],n[l++]=h[1],n[l++]=h[2],n[l++]=h[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-o}Object.defineProperty(t,"__esModule",{value:!0});var i=n(r(7)),a=n(r(1));t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=new n.Transform;r.translate(e.canvas.width/2,e.canvas.height/2);var o=e.viewport.rotation;0!==o&&r.rotate(o*Math.PI/180);var i=e.viewport.scale,a=e.viewport.scale;return e.image.rowPixelSpacing<e.image.columnPixelSpacing?i*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(a*=e.image.rowPixelSpacing/e.image.columnPixelSpacing),r.scale(i,a),0!==o&&r.rotate(-o*Math.PI/180),r.translate(e.viewport.translation.x,e.viewport.translation.y),0!==o&&r.rotate(o*Math.PI/180),void 0!==t&&r.scale(t,t),e.viewport.hflip&&r.scale(-1,1),e.viewport.vflip&&r.scale(1,-1),r.translate(-e.image.width/2,-e.image.height/2),r};var n=r(31)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){var n=t.element,o={viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:r};(0,_.default)(n,e,o)}function i(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var r=e.image,n=t.image;if(r.imageId&&n.imageId){var o=n.columnPixelSpacing*n.width/(r.columnPixelSpacing*r.width),i=t.viewport.scale/e.viewport.scale*o;t.viewport.scale=e.viewport.scale*i}}function a(e,t,r){var n=(0,p.default)(),a=(0,m.getEnabledElement)(e),s=a.layers,u=void 0;t&&(u=(0,g.default)(a.canvas,t),r&&r.viewport&&(u=Object.assign(u,r.viewport))),!1!==a.syncViewports&&(a.syncViewports=!0);var c={image:t,layerId:n,viewport:u,options:r||{},renderingTools:{}};return s.length&&t&&i(s[0],c),s.push(c),o("cornerstonelayeradded",a,n),1===s.length&&t&&f(e,n),n}function s(e,t){var r=(0,m.getEnabledElement)(e),n=r.layers,i=r.layers.findIndex(function(e){return e.layerId===t});-1!==i&&(n.splice(i,1),t===r.activeLayerId&&n.length&&f(e,n[0].layerId),o("cornerstonelayerremoved",r,t))}function u(e,t){return(0,m.getEnabledElement)(e).layers.find(function(e){return e.layerId===t})}function c(e){return(0,m.getEnabledElement)(e).layers}function l(e){return(0,m.getEnabledElement)(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function f(e,t){var r=(0,m.getEnabledElement)(e);if(r.activeLayerId!==t){var n=r.layers.findIndex(function(e){return e.layerId===t});if(-1===n)throw new Error("setActiveLayer: layer not found in layers array");var i=r.layers[n];if(!i.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");r.activeLayerId=t,r.image=i.image,r.viewport=i.viewport,(0,v.default)(e),o("cornerstoneactivelayerchanged",r,t)}}function d(e,t,r){var n=(0,m.getEnabledElement)(e),o=n.layers[0],a=void 0;if(!(a=r?u(e,r):h(e)))throw new Error("setLayerImage: Layer not found");if(a.image=t,t){if(!a.viewport){var s=(0,g.default)(n.canvas,t);a.options&&a.options.viewport&&(a.viewport=Object.assign(s,a.options.viewport)),o.layerId!==r&&i(o,a)}}else a.viewport=void 0}function h(e){var t=(0,m.getEnabledElement)(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}Object.defineProperty(t,"__esModule",{value:!0}),t.rescaleImage=i,t.addLayer=a,t.removeLayer=s,t.getLayer=u,t.getLayers=c,t.getVisibleLayers=l,t.setActiveLayer=f,t.setLayerImage=d,t.getActiveLayer=h;var p=n(r(58)),m=r(0),g=n(r(3)),v=n(r(5)),_=n(r(2))},function(e,t,r){"use strict";function n(e,t){return function(r){return r*e+t}}function o(e){var t=e.lut[0],r=e.lut[e.lut.length-1],n=e.firstValueMapped+e.lut.length;return function(o){return o<e.firstValueMapped?t:o>=n?r:e.lut[o]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return r?o(r):n(e,t)}},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){return function(r){return 255*((r-t)/e+.5)}}function i(e){var t=Math.max.apply(Math,n(e.lut)).toString(2).length-8,r=e.lut[0]>>t,o=e.lut[e.lut.length-1]>>t,i=e.firstValueMapped+e.lut.length-1;return function(n){return n<e.firstValueMapped?r:n>=i?o:e.lut[n-e.firstValueMapped]>>t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return r?i(r):o(e,t)}},function(e,t,r){"use strict";function n(e,t,r){for(var n=(t-e)/((r=null===r?100:r)-1),o=[];r-- >0;)o.push(e),e+=n;return o[o.length-1]=t,o}function o(e,t){for(var r=0,n=e.length-1;r<=n;){var o=r+Math.floor((n-r)/2),i=e[o];if(i===t)return o;t<i?n=o-1:r=o+1}return r}function i(e,t){var r=void 0,n=[],i=t.length;for(e.sort(function(e,t){return e-t}),r=0;r<i;r++)n[r]=o(e,t[r]);return n}function a(e,t,r){var o=void 0,a=[],s=[],u=[],c=[];for(r=null===r?1:r,o=0;o<t.length;o++){var l=t[o];a.push((e-1)*l[0]),s.push(l[1]),u.push(l[1])}var f=n(0,1,e);for(o=0;o<e;o++)f[o]=(e-1)*Math.pow(f[o],r);var d=i(a,f);for(o=1;o<e-1;o++){var h=d[o],p=(f[o]-a[h-1])/(a[h]-a[h-1]),m=s[h]-u[h-1];c[o]=p*m+u[h-1]}return c[0]=u[0],c[e-1]=s[t.length-1],c}function s(e,t,r){var n=void 0,o=[];t=null===t?256:t,r=null===r?1:r;var i=a(t,e.red,r),s=a(t,e.green,r),u=a(t,e.blue,r);for(n=0;n<t;n++){var c=[Math.round(255*i[n]),Math.round(255*s[n]),Math.round(255*u[n]),255];o.push(c)}return o}function u(){var e=[];return Object.keys(d).forEach(function(t){if(d.hasOwnProperty(t)){var r=d[t];e.push({id:t,name:r.name})}}),e.sort(function(e,t){var r=e.name.toLowerCase(),n=t.name.toLowerCase();return r===n?0:r<n?-1:1}),e}function c(e,t){var r=d[e];return r||(r=d[e]=t||{name:"",colors:[]}),!r.colors&&r.segmentedData&&(r.colors=s(r.segmentedData,r.numColors,r.gamma)),{getId:function(){return e},getColorSchemeName:function(){return r.name},setColorSchemeName:function(e){r.name=e},getNumberOfColors:function(){return r.colors.length},setNumberOfColors:function(e){for(;r.colors.length<e;)r.colors.push(f);r.colors.length=e},getColor:function(e){return this.isValidIndex(e)?r.colors[e]:f},getColorRepeating:function(e){var t=r.colors.length;return e=t?e%t:0,this.getColor(e)},setColor:function(e,t){this.isValidIndex(e)&&(r.colors[e]=t)},addColor:function(e){r.colors.push(e)},insertColor:function(e,t){this.isValidIndex(e)&&r.colors.splice(e,1,t)},removeColor:function(e){this.isValidIndex(e)&&r.colors.splice(e,1)},clearColors:function(){r.colors=[]},buildLookupTable:function(e){if(e){var t=r.colors.length;e.setNumberOfTableValues(t);for(var n=0;n<t;n++)e.setTableValue(n,r.colors[n])}},createLookupTable:function(){var e=new l.default;return this.buildLookupTable(e),e},isValidIndex:function(e){return e>=0&&e<r.colors.length}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getColormapsList=u,t.getColormap=c;var l=function(e){return e&&e.__esModule?e:{default:e}}(r(29)),f=[0,0,0,0],d={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){if(e>1)throw new Error("HSVToRGB expects hue < 1");var n=[];if(0===t)return n[0]=r,n[1]=r,n[2]=r,n;var o=Math.floor(6*e),i=6*e-o,a=r*(1-t),s=r*(1-t*i),u=r*(1-t*(1-i));switch(o){case 0:case 6:n[0]=r,n[1]=u,n[2]=a;break;case 1:n[0]=s,n[1]=r,n[2]=a;break;case 2:n[0]=a,n[1]=r,n[2]=u;break;case 3:n[0]=a,n[1]=s,n[2]=r;break;case 4:n[0]=u,n[1]=a,n[2]=r;break;case 5:n[0]=r,n[1]=a,n[2]=s}return n}function i(e,t){var r=void 0;return r=e<t.Range[0]?t.MaxIndex+s+1.5:e>t.Range[1]?t.MaxIndex+u+1.5:(e+t.Shift)*t.Scale,Math.floor(r)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=0,u=1,c=function(){function e(){n(this,e),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}return a(e,[{key:"setNumberOfTableValues",value:function(e){this.NumberOfColors=e}},{key:"setRamp",value:function(e){this.Ramp=e}},{key:"setTableRange",value:function(e,t){this.TableRange[0]=e,this.TableRange[1]=t}},{key:"setHueRange",value:function(e,t){this.HueRange[0]=e,this.HueRange[1]=t}},{key:"setSaturationRange",value:function(e,t){this.SaturationRange[0]=e,this.SaturationRange[1]=t}},{key:"setValueRange",value:function(e,t){this.ValueRange[0]=e,this.ValueRange[1]=t}},{key:"setRange",value:function(e,t){this.InputRange[0]=e,this.InputRange[1]=t}},{key:"setAlphaRange",value:function(e,t){this.AlphaRange[0]=e,this.AlphaRange[1]=t}},{key:"getColor",value:function(e){return this.mapValue(e)}},{key:"build",value:function(e){if(!(this.Table.length>1)||e){this.Table=[];var t=this.NumberOfColors-1,r=void 0,n=void 0,i=void 0,a=void 0;t?(r=(this.HueRange[1]-this.HueRange[0])/t,n=(this.SaturationRange[1]-this.SaturationRange[0])/t,i=(this.ValueRange[1]-this.ValueRange[0])/t,a=(this.AlphaRange[1]-this.AlphaRange[0])/t):r=n=i=a=0;for(var s=0;s<=t;s++){var u=this.HueRange[0]+s*r,c=this.SaturationRange[0]+s*n,l=this.ValueRange[0]+s*i,f=this.AlphaRange[0]+s*a,d=o(u,c,l),h=[];switch(this.Ramp){case"scurve":h[0]=Math.floor(127.5*(1+Math.cos((1-d[0])*Math.PI))),h[1]=Math.floor(127.5*(1+Math.cos((1-d[1])*Math.PI))),h[2]=Math.floor(127.5*(1+Math.cos((1-d[2])*Math.PI))),h[3]=Math.floor(255*f);break;case"linear":h[0]=Math.floor(255*d[0]+.5),h[1]=Math.floor(255*d[1]+.5),h[2]=Math.floor(255*d[2]+.5),h[3]=Math.floor(255*f+.5);break;case"sqrt":h[0]=Math.floor(255*Math.sqrt(d[0])+.5),h[1]=Math.floor(255*Math.sqrt(d[1])+.5),h[2]=Math.floor(255*Math.sqrt(d[2])+.5),h[3]=Math.floor(255*Math.sqrt(f)+.5);break;default:throw new Error("Invalid Ramp value ("+this.Ramp+")")}this.Table.push(h)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function(){var e=this.NumberOfColors,t=e+s,r=e+u,n=e+2;this.UseBelowRangeColor||0===e?this.Table[t]=this.BelowRangeColor:this.Table[t]=this.Table[0],this.UseAboveRangeColor||0===e?this.Table[r]=this.AboveRangeColor:this.Table[r]=this.Table[e-1],this.Table[n]=this.NaNColor}},{key:"mapValue",value:function(e){var t=this.getIndex(e);if(t<0)return this.NaNColor;if(0===t){if(this.UseBelowRangeColor&&e<this.TableRange[0])return this.BelowRangeColor}else if(t===this.NumberOfColors-1&&this.UseAboveRangeColor&&e>this.TableRange[1])return this.AboveRangeColor;return this.Table[t]}},{key:"getIndex",value:function(e){var t={};if(t.Range=[],t.MaxIndex=this.NumberOfColors-1,t.Shift=-this.TableRange[0],this.TableRange[1]<=this.TableRange[0]?t.Scale=Number.MAX_VALUE:t.Scale=t.MaxIndex/(this.TableRange[1]-this.TableRange[0]),t.Range[0]=this.TableRange[0],t.Range[1]=this.TableRange[1],isNaN(e))return-1;var r=i(e,t);return r===this.NumberOfColors+s?r=0:r===this.NumberOfColors+u&&(r=this.NumberOfColors-1),r}},{key:"setTableValue",value:function(e,t){if(5===arguments.length&&(t=Array.prototype.slice.call(arguments,1)),e<0)throw new Error("Can't set the table value for negative index ("+e+")");e>=this.NumberOfColors&&new Error("Index "+e+" is greater than the number of colors "+this.NumberOfColors),this.Table[e]=t,0!==e&&e!==this.NumberOfColors-1||this.buildSpecialColors()}}]),e}();t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=(0,n.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,n.default)()-o;var a=i.length,s=e.minPixelValue,u=0,c=0,l=void 0;if(o=(0,n.default)(),i instanceof Int16Array)if(s<0)for(;c<a;)l=t[i[c++]+-s],r[u++]=l,r[u++]=l,r[u++]=l,r[u++]=255;else for(;c<a;)l=t[i[c++]],r[u++]=l,r[u++]=l,r[u++]=l,r[u++]=255;else if(i instanceof Uint16Array)for(;c<a;)l=t[i[c++]],r[u++]=l,r[u++]=l,r[u++]=l,r[u++]=255;else if(s<0)for(;c<a;)l=t[i[c++]+-s],r[u++]=l,r[u++]=l,r[u++]=l,r[u++]=255;else for(;c<a;)l=t[i[c++]],r[u++]=l,r[u++]=l,r[u++]=l,r[u++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,n.default)()-o};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1))},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Transform=function(){function e(){n(this,e),this.reset()}return o(e,[{key:"reset",value:function(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function(){var t=new e;return t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5],t}},{key:"multiply",value:function(e){var t=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],n=this.m[0]*e.m[2]+this.m[2]*e.m[3],o=this.m[1]*e.m[2]+this.m[3]*e.m[3],i=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=o,this.m[4]=i,this.m[5]=a}},{key:"invert",value:function(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,r=-this.m[1]*e,n=-this.m[2]*e,o=this.m[0]*e,i=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=t,this.m[1]=r,this.m[2]=n,this.m[3]=o,this.m[4]=i,this.m[5]=a}},{key:"rotate",value:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.m[0]*t+this.m[2]*r,o=this.m[1]*t+this.m[3]*r,i=this.m[0]*-r+this.m[2]*t,a=this.m[1]*-r+this.m[3]*t;this.m[0]=n,this.m[1]=o,this.m[2]=i,this.m[3]=a}},{key:"translate",value:function(e,t){this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t}},{key:"scale",value:function(e,t){this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t}},{key:"transformPoint",value:function(e,t){var r=e,n=t;return e=r*this.m[0]+n*this.m[2]+this.m[4],t=r*this.m[1]+n*this.m[3]+this.m[5],{x:e,y:t}}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&(0,o.default)(e.cachedLut.modalityLUT,t.modalityLUT)&&(0,o.default)(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==r?e.cachedLut.lutArray:((0,i.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT,e.cachedLut.lutArray)};var o=n(r(44)),i=n(r(18))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return{maximumSizeInBytes:m,cacheSizeInBytes:g,numberOfImagesCached:p.length}}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(g<=m)){for(p.sort(e);g>m;){var t=p[p.length-1];g-=t.sizeInBytes,delete h[t.imageId],p.pop(),(0,d.default)(f.default,"cornerstonewebgltextureremoved",{imageId:t.imageId})}var r=o();(0,d.default)(f.default,"cornerstonewebgltexturecachefull",r)}}function a(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");m=e,i()}function s(e,t){var r=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===r)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(h,r))throw new Error("putImageTexture: imageId already in cache");var n={imageId:r,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes};if(h[r]=n,p.push(n),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");g+=n.sizeInBytes,i()}function u(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");var t=h[e];if(void 0!==t)return t.timeStamp=new Date,t.imageTexture}function c(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=h[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return p.splice(p.indexOf(t),1),g-=t.sizeInBytes,delete h[e],t.imageTexture}function l(){for(;p.length>0;){var e=p.pop();delete h[e.imageId]}g=0}Object.defineProperty(t,"__esModule",{value:!0});var f=n(r(16)),d=n(r(2)),h={},p=[],m=268435456,g=0;t.default={purgeCache:l,getImageTexture:u,putImageTexture:s,removeImageTexture:c,setMaximumSizeBytes:a}},function(e,t,r){"use strict";function n(e,t,r){var n=e.createShader(r);if(e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)&&!e.isContextLost()){var o=e.getShaderInfoLog(n);console.error("Could not compile shader:\n"+o)}return n}function o(e,t,r){var n=e.createProgram();if(e.attachShader(n,t),e.attachShader(n,r),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)&&!e.isContextLost()){var o=e.getProgramInfoLog(n);console.error("WebGL program filed to link:\n"+o)}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return o(e,n(e,t,e.VERTEX_SHADER),n(e,r,e.FRAGMENT_SHADER))}},function(e,t,r){"use strict";function n(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert){var n=e.canvas.getContext("2d");n.setTransform(1,0,0,1,0,0),n.fillStyle="black",n.fillRect(0,0,e.canvas.width,e.canvas.height),n.imageSmoothingEnabled=!e.viewport.pixelReplication,n.mozImageSmoothingEnabled=n.imageSmoothingEnabled,(0,o.default)(e,n),n.drawImage(r.getImage(),0,0,r.width,r.height,0,0,r.width,r.height)}else(0,i.renderColorImage)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderWebImage=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(r(4)),i=r(8)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){t.width!==e.clientWidth&&(t.width=e.clientWidth,t.style.width=e.clientWidth+"px"),t.height!==e.clientHeight&&(t.height=e.clientHeight,t.style.height=e.clientHeight+"px")}function i(e,t,r){var n=e.viewport.scale,o=(0,f.default)(e),i=Math.round(o.width*n),a=Math.round(o.height*n),s=e.viewport.translation.x,u=e.viewport.translation.y;return i===t&&a<=r||i<=t&&a===r&&0===s&&0===u}function a(e,t,r){var n=e.viewport.scale,o=e.canvas.width/t,i=e.canvas.height/r,a=Math.sqrt(o*i);e.viewport.scale=a*n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,s.getEnabledElement)(e),n=r.canvas.width,f=r.canvas.height;o(e,r.canvas);var d={element:e};if((0,l.default)(e,"cornerstoneelementresized",d),void 0!==r.image)return!0===t?void(0,u.default)(e):void(i(r,n,f)?(0,u.default)(e):(a(r,n,f),(0,c.default)(e)))};var s=r(0),u=n(r(37)),c=n(r(5)),l=n(r(2)),f=n(r(38))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.getEnabledElement)(e),r=(0,a.default)(t),n=t.canvas.height/r.height,s=t.canvas.width/r.width;t.viewport.scale=Math.min(s,n),t.viewport.translation.x=0,t.viewport.translation.y=0,(0,i.default)(e)};var o=r(0),i=n(r(5)),a=n(r(38))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return 0===e.viewport.rotation||180===e.viewport.rotation?{width:e.image.width,height:e.image.height}:{width:e.image.height,height:e.image.width}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,i){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),r=Math.round(r);for(var a=(0,n.getEnabledElement)(e),s=[],u=0,c=a.image.getPixelData(),l=0;l<i;l++)for(var f=0;f<o;f++){var d=(l+r)*a.image.columns+(f+t);s[u++]=c[d]}return s};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");m=e,(0,p.default)(h.default,"cornerstoneimagecachemaximumsizechanged"),i()}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(g<=m)){for(_.sort(e);g>m;){var t=_[_.length-1].imageId;u(t),(0,p.default)(h.default,"cornerstoneimagecachepromiseremoved",{imageId:t})}var r=c();(0,p.default)(h.default,"cornerstoneimagecachefull",r)}}function a(e,t){if(void 0===e)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===t.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===v.hasOwnProperty(e))throw new Error("putImageLoadObject: imageId already in cache");if(t.cancelFn&&"function"!=typeof t.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var r={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:t,timeStamp:Date.now(),sizeInBytes:0};v[e]=r,_.push(r),t.promise.then(function(e){if(-1!==_.indexOf(r)){if(r.loaded=!0,r.image=e,void 0===e.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");r.sizeInBytes=e.sizeInBytes,g+=r.sizeInBytes;var t={action:"addImage",image:r};(0,p.default)(h.default,"cornerstoneimagecachechanged",t),r.sharedCacheKey=e.sharedCacheKey,i()}},function(){var t=v[e];_.splice(_.indexOf(t),1),delete v[e]})}function s(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");var t=v[e];if(void 0!==t)return t.timeStamp=Date.now(),t.imageLoadObject}function u(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t=v[e];if(void 0===t)throw new Error("removeImageLoadObject: imageId was not present in imageCache");_.splice(_.indexOf(t),1),g-=t.sizeInBytes;var r={action:"deleteImage",image:t};(0,p.default)(h.default,"cornerstoneimagecachechanged",r),l(t.imageLoadObject),delete v[e]}function c(){return{maximumSizeInBytes:m,cacheSizeInBytes:g,numberOfImagesCached:_.length}}function l(e){e.promise.then(function(){e.decache&&e.decache()},function(){e.decache&&e.decache()})}function f(){for(;_.length>0;)u(_[0].imageId)}function d(e,t){var r=v[e];r&&r.imageLoadObject.promise.then(function(e){var n=t-e.sizeInBytes;e.sizeInBytes=t,r.sizeInBytes=t,g+=n;var o={action:"changeImageSize",image:e};(0,p.default)(h.default,"cornerstoneimagecachechanged",o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.cachedImages=void 0,t.setMaximumSizeBytes=o,t.putImageLoadObject=a,t.getImageLoadObject=s,t.removeImageLoadObject=u,t.getCacheInfo=c,t.purgeCache=f,t.changeImageIdCacheSize=d;var h=n(r(16)),p=n(r(2)),m=1073741824,g=0,v={},_=t.cachedImages=[];t.default={imageCache:v,cachedImages:_,setMaximumSizeBytes:o,putImageLoadObject:a,getImageLoadObject:s,removeImageLoadObject:u,getCacheInfo:c,purgeCache:f,changeImageIdCacheSize:d}},function(e,t,r){"use strict";function n(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var r=e.minPixelValue,n=0,i=0,a=e.width*e.height,s=e.origPixelData||e.getPixelData(),u=new Uint8Array(4*a),c=void 0,l=void 0;if(e.color=!0,e.falseColor=!0,e.origPixelData=s,t instanceof o.default.LookupTable)for(t.build();i<a;)c=s[i++],l=t.mapValue(c),u[n++]=l[0],u[n++]=l[1],u[n++]=l[2],u[n++]=l[3];else if(r<0)for(;i<a;)c=s[i++],u[n++]=t[c+-r][0],u[n++]=t[c+-r][1],u[n++]=t[c+-r][2],u[n++]=t[c+-r][3];else for(;i<a;)c=s[i++],u[n++]=t[c][0],u[n++]=t[c][1],u[n++]=t[c][2],u[n++]=t[c][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return u}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var o=function(e){return e&&e.__esModule?e:{default:e}}(r(7))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(6);Object.defineProperty(t,"drawImage",{enumerable:!0,get:function(){return n(o).default}});var i=r(18);Object.defineProperty(t,"generateLut",{enumerable:!0,get:function(){return n(i).default}});var a=r(3);Object.defineProperty(t,"getDefaultViewport",{enumerable:!0,get:function(){return n(a).default}});var s=r(19);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return n(s).default}});var u=r(20);Object.defineProperty(t,"storedPixelDataToCanvasImageData",{enumerable:!0,get:function(){return n(u).default}});var c=r(21);Object.defineProperty(t,"storedColorPixelDataToCanvasImageData",{enumerable:!0,get:function(){return n(c).default}});var l=r(22);Object.defineProperty(t,"storedPixelDataToCanvasImageDataColorLUT",{enumerable:!0,get:function(){return n(l).default}});var f=r(23);Object.defineProperty(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",{enumerable:!0,get:function(){return n(f).default}});var d=r(43);Object.defineProperty(t,"internal",{enumerable:!0,get:function(){return n(d).default}});var h=r(10);Object.defineProperty(t,"renderLabelMapImage",{enumerable:!0,get:function(){return h.renderLabelMapImage}});var p=r(14);Object.defineProperty(t,"renderPseudoColorImage",{enumerable:!0,get:function(){return p.renderPseudoColorImage}});var m=r(8);Object.defineProperty(t,"renderColorImage",{enumerable:!0,get:function(){return m.renderColorImage}});var g=r(17);Object.defineProperty(t,"renderGrayscaleImage",{enumerable:!0,get:function(){return g.renderGrayscaleImage}});var v=r(35);Object.defineProperty(t,"renderWebImage",{enumerable:!0,get:function(){return v.renderWebImage}});var _=r(55);Object.defineProperty(t,"canvasToPixel",{enumerable:!0,get:function(){return n(_).default}});var b=r(56);Object.defineProperty(t,"disable",{enumerable:!0,get:function(){return n(b).default}});var y=r(57);Object.defineProperty(t,"displayImage",{enumerable:!0,get:function(){return n(y).default}});var j=r(59);Object.defineProperty(t,"draw",{enumerable:!0,get:function(){return n(j).default}});var w=r(60);Object.defineProperty(t,"drawInvalidated",{enumerable:!0,get:function(){return n(w).default}});var x=r(61);Object.defineProperty(t,"enable",{enumerable:!0,get:function(){return n(x).default}});var E=r(65);Object.defineProperty(t,"getElementData",{enumerable:!0,get:function(){return E.getElementData}}),Object.defineProperty(t,"removeElementData",{enumerable:!0,get:function(){return E.removeElementData}});var P=r(0);Object.defineProperty(t,"getEnabledElement",{enumerable:!0,get:function(){return P.getEnabledElement}}),Object.defineProperty(t,"addEnabledElement",{enumerable:!0,get:function(){return P.addEnabledElement}}),Object.defineProperty(t,"getEnabledElementsByImageId",{enumerable:!0,get:function(){return P.getEnabledElementsByImageId}}),Object.defineProperty(t,"getEnabledElements",{enumerable:!0,get:function(){return P.getEnabledElements}});var O=r(25);Object.defineProperty(t,"addLayer",{enumerable:!0,get:function(){return O.addLayer}}),Object.defineProperty(t,"removeLayer",{enumerable:!0,get:function(){return O.removeLayer}}),Object.defineProperty(t,"getLayer",{enumerable:!0,get:function(){return O.getLayer}}),Object.defineProperty(t,"getLayers",{enumerable:!0,get:function(){return O.getLayers}}),Object.defineProperty(t,"getVisibleLayers",{enumerable:!0,get:function(){return O.getVisibleLayers}}),Object.defineProperty(t,"setActiveLayer",{enumerable:!0,get:function(){return O.setActiveLayer}}),Object.defineProperty(t,"getActiveLayer",{enumerable:!0,get:function(){return O.getActiveLayer}}),Object.defineProperty(t,"setLayerImage",{enumerable:!0,get:function(){return O.setLayerImage}});var S=r(37);Object.defineProperty(t,"fitToWindow",{enumerable:!0,get:function(){return n(S).default}});var I=r(66);Object.defineProperty(t,"getDefaultViewportForImage",{enumerable:!0,get:function(){return n(I).default}});var T=r(67);Object.defineProperty(t,"getImage",{enumerable:!0,get:function(){return n(T).default}});var M=r(68);Object.defineProperty(t,"getPixels",{enumerable:!0,get:function(){return n(M).default}});var C=r(39);Object.defineProperty(t,"getStoredPixels",{enumerable:!0,get:function(){return n(C).default}});var L=r(69);Object.defineProperty(t,"getViewport",{enumerable:!0,get:function(){return n(L).default}});var k=r(70);Object.defineProperty(t,"loadImage",{enumerable:!0,get:function(){return k.loadImage}}),Object.defineProperty(t,"loadAndCacheImage",{enumerable:!0,get:function(){return k.loadAndCacheImage}}),Object.defineProperty(t,"registerImageLoader",{enumerable:!0,get:function(){return k.registerImageLoader}}),Object.defineProperty(t,"registerUnknownImageLoader",{enumerable:!0,get:function(){return k.registerUnknownImageLoader}});var A=r(71);Object.defineProperty(t,"invalidate",{enumerable:!0,get:function(){return n(A).default}});var R=r(72);Object.defineProperty(t,"invalidateImageId",{enumerable:!0,get:function(){return n(R).default}});var D=r(73);Object.defineProperty(t,"pageToPixel",{enumerable:!0,get:function(){return n(D).default}});var F=r(74);Object.defineProperty(t,"pixelToCanvas",{enumerable:!0,get:function(){return n(F).default}});var N=r(75);Object.defineProperty(t,"reset",{enumerable:!0,get:function(){return n(N).default}});var U=r(36);Object.defineProperty(t,"resize",{enumerable:!0,get:function(){return n(U).default}});var V=r(4);Object.defineProperty(t,"setToPixelCoordinateSystem",{enumerable:!0,get:function(){return n(V).default}});var W=r(76);Object.defineProperty(t,"setViewport",{enumerable:!0,get:function(){return n(W).default}});var B=r(5);Object.defineProperty(t,"updateImage",{enumerable:!0,get:function(){return n(B).default}});var z=r(41);Object.defineProperty(t,"pixelDataToFalseColorData",{enumerable:!0,get:function(){return n(z).default}});var G=r(77);Object.defineProperty(t,"rendering",{enumerable:!0,get:function(){return n(G).default}});var q=r(40);Object.defineProperty(t,"imageCache",{enumerable:!0,get:function(){return n(q).default}});var H=r(78);Object.defineProperty(t,"metaData",{enumerable:!0,get:function(){return n(H).default}});var Y=r(15);Object.defineProperty(t,"webGL",{enumerable:!0,get:function(){return n(Y).default}});var X=r(7);Object.defineProperty(t,"colors",{enumerable:!0,get:function(){return n(X).default}});var K=r(79);Object.defineProperty(t,"convertImageToFalseColorImage",{enumerable:!0,get:function(){return K.convertImageToFalseColorImage}}),Object.defineProperty(t,"convertToFalseColorImage",{enumerable:!0,get:function(){return K.convertToFalseColorImage}}),Object.defineProperty(t,"restoreImage",{enumerable:!0,get:function(){return K.restoreImage}});var J=r(16);Object.defineProperty(t,"events",{enumerable:!0,get:function(){return n(J).default}});var $=r(2);Object.defineProperty(t,"triggerEvent",{enumerable:!0,get:function(){return n($).default}})},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(6)),i=n(r(18)),a=n(r(3)),s=n(r(19)),u=n(r(20)),c=n(r(30)),l=n(r(21)),f=n(r(22)),d=n(r(23)),h=n(r(9)),p=n(r(24)),m=r(31);t.default={drawImage:o.default,generateLut:i.default,getDefaultViewport:a.default,requestAnimationFrame:s.default,storedPixelDataToCanvasImageData:u.default,storedPixelDataToCanvasImageDataRGBA:c.default,storedPixelDataToCanvasImageDataColorLUT:f.default,storedPixelDataToCanvasImageDataPseudocolorLUT:d.default,storedColorPixelDataToCanvasImageData:l.default,getTransform:h.default,calculateTransform:p.default,Transform:m.Transform}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,o,i){var a=e.maxPixelValue,s=e.minPixelValue,u=Math.min(s,0);if(void 0===e.cachedLut){var c=a-u+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(c)}var l=e.cachedLut.lutArray,f=(0,n.default)(t,r,i);if(!0===o)for(var d=s;d<=a;d++)l[d+-u]=255-f(d);else for(var h=s;h<=a;h++)l[h+-u]=f(h);return l};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(27))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var o=(0,n.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,n.default)()-o;var a=e.minPixelValue,s=0,u=0,c=i.length;if(o=(0,n.default)(),a<0)for(;u<c;)r[s++]=t[i[u++]+-a],r[s++]=t[i[u++]+-a],r[s++]=t[i[u++]+-a],r[s++]=i[u++];else for(;u<c;)r[s++]=t[i[u++]],r[s++]=t[i[u++]],r[s++]=t[i[u++]],r[s++]=i[u++];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,n.default)()-o};var n=function(e){return e&&e.__esModule?e:{default:e}}(r(1))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return x}function i(){for(var e in b.shaders){var t=b.shaders[e];t.attributes={},t.uniforms={},t.vert=y.vertexShader,t.program=(0,w.default)(E,t.vert,t.frag),t.attributes.texCoordLocation=E.getAttribLocation(t.program,"a_texCoord"),E.enableVertexAttribArray(t.attributes.texCoordLocation),t.attributes.positionLocation=E.getAttribLocation(t.program,"a_position"),E.enableVertexAttribArray(t.attributes.positionLocation),t.uniforms.resolutionLocation=E.getUniformLocation(t.program,"u_resolution")}}function a(){!0!==S&&l(x)&&(m(),i(),t.isWebGLInitialized=S=!0)}function s(e,t,r){e.bufferData(e.ARRAY_BUFFER,new Float32Array([t,r,0,r,t,0,0,0]),e.STATIC_DRAW)}function u(e){e.preventDefault(),console.warn("WebGL Context Lost!")}function c(e){e.preventDefault(),t.isWebGLInitialized=S=!1,j.default.purgeCache(),a()}function l(e){E=null;try{var t={preserveDrawingBuffer:!0};E=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",u,!1),e.addEventListener("webglcontextlost",u,!1),e.removeEventListener("webglcontextrestored",c,!1),e.addEventListener("webglcontextrestored",c,!1)}catch(e){throw new Error("Error creating WebGL context")}return E||(console.error("Unable to initialize WebGL. Your browser may not support it."),E=null),E}function f(e){if(e.color)return"rgb";var t="int";return e.minPixelValue>=0&&(t="u"+t),e.maxPixelValue>255?t+="16":t+="8",t}function d(e){var t=f(e);return b.shaders.hasOwnProperty(t)?b.shaders[t]:b.shaders.rgb}function h(e){var t={uint8:E.LUMINANCE,int8:E.LUMINANCE_ALPHA,uint16:E.LUMINANCE_ALPHA,int16:E.RGB,rgb:E.RGB},r={int8:1,uint16:2,int16:3,rgb:3},n=f(e),o=t[n],i=E.createTexture();E.bindTexture(E.TEXTURE_2D,i),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE),E.pixelStorei(E.UNPACK_ALIGNMENT,1);var a=b.dataUtilities[n].storedPixelDataToImageData(e,e.width,e.height);return E.texImage2D(E.TEXTURE_2D,0,o,e.width,e.height,0,o,E.UNSIGNED_BYTE,a),{texture:i,sizeInBytes:e.width*e.height*r[n]}}function p(e){var t=j.default.getImageTexture(e.imageId);return t||(t=h(e),j.default.putImageTexture(e,t)),t.texture}function m(){O=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,O),E.bufferData(E.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),E.STATIC_DRAW),P=E.createBuffer(),E.bindBuffer(E.ARRAY_BUFFER,P),E.bufferData(E.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),E.STATIC_DRAW)}function g(e,t,r,n,o){E.clearColor(1,0,0,1),E.viewport(0,0,n,o),E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT),E.useProgram(e.program),E.bindBuffer(E.ARRAY_BUFFER,P),E.vertexAttribPointer(e.attributes.texCoordLocation,2,E.FLOAT,!1,0,0),E.bindBuffer(E.ARRAY_BUFFER,O),E.vertexAttribPointer(e.attributes.positionLocation,2,E.FLOAT,!1,0,0);for(var i in t){var a=E.getUniformLocation(e.program,i);if(a){var u=t[i],c=u.type,l=u.value;"i"===c?E.uniform1i(a,l):"f"===c?E.uniform1f(a,l):"2f"===c&&E.uniform2f(a,l[0],l[1])}}s(E,n,o),E.activeTexture(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,r),E.drawArrays(E.TRIANGLE_STRIP,0,4)}function v(e){var t=e.image;x.width=t.width,x.height=t.height;var r=e.viewport,n=d(t),o=p(t);return g(n,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:r.voi.windowCenter},ww:{type:"f",value:r.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:r.invert?1:0}},o,t.width,t.height),x}function _(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWebGLInitialized=void 0,t.getRenderCanvas=o,t.initRenderer=a,t.render=v,t.isWebGLAvailable=_;var b=r(48),y=r(54),j=n(r(33)),w=n(r(34)),x=document.createElement("canvas"),E=void 0,P=void 0,O=void 0,S=!1;t.isWebGLInitialized=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUtilities=t.shaders=void 0;var n=r(49),o=r(50),i=r(51),a=r(52),s=r(53),u={int16:n.int16Shader,int8:o.int8Shader,rgb:i.rgbShader,uint16:a.uint16Shader,uint8:s.uint8Shader},c={int16:n.int16DataUtilities,int8:o.int8DataUtilities,rgb:i.rgbDataUtilities,uint16:a.uint16DataUtilities,uint8:s.uint8DataUtilities};t.shaders=u,t.dataUtilities=c},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*3),n=0,o=0;o<t.length;o++){var i=Math.abs(t[o]);r[n++]=255&i,r[n++]=i>>8,r[n++]=t[o]<0?0:1}return r}Object.defineProperty(t,"__esModule",{value:!0});var o={};t.int16DataUtilities={storedPixelDataToImageData:n},o.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int16Shader=o},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,o=0;o<t.length;o++)r[n++]=t[o],r[n++]=t[o]<0?0:1;return r}Object.defineProperty(t,"__esModule",{value:!0});var o={};t.int8DataUtilities={storedPixelDataToImageData:n},o.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int8Shader=o},function(e,t,r){"use strict";function n(e){var t=e.minPixelValue,r=0,n=0,o=e.width*e.height*4,i=e.width*e.height*3,a=e.getPixelData(),s=new Uint8Array(i);if(t<0)for(;n<o;)s[r++]=a[n++]+-t,s[r++]=a[n++]+-t,s[r++]=a[n++]+-t,n+=1;else for(;n<o;)s[r++]=a[n++],s[r++]=a[n++],s[r++]=a[n++],n+=1;return s}Object.defineProperty(t,"__esModule",{value:!0});var o={};t.rgbDataUtilities={storedPixelDataToImageData:n},o.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}",t.rgbShader=o},function(e,t,r){"use strict";function n(e){for(var t=e.getPixelData(),r=new Uint8Array(e.width*e.height*2),n=0,o=0;o<t.length;o++){var i=t[o];r[n++]=255&i,r[n++]=i>>8}return r}Object.defineProperty(t,"__esModule",{value:!0});var o={};t.uint16DataUtilities={storedPixelDataToImageData:n},o.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint16Shader=o},function(e,t,r){"use strict";function n(e){return e.getPixelData()}Object.defineProperty(t,"__esModule",{value:!0});var o={};t.uint8DataUtilities={storedPixelDataToImageData:n},o.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint8Shader=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vertexShader="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e),i=(0,o.default)(r);return i.invert(),i.transformPoint(t.x,t.y)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(9))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=(0,n.getEnabledElements)(),r=0;r<t.length;r++)if(t[r].element===e){var i={element:e};(0,o.default)(e,"cornerstoneelementdisabled",i),t[r].element.removeChild(t[r].canvas),t[r].canvas=void 0,t.splice(r,1);break}};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(2))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var n=(0,o.getEnabledElement)(e),l=n.image;if(n.image=t,n.layers&&n.layers.length&&(0,u.setLayerImage)(e,t),void 0===n.viewport&&(n.viewport=(0,i.default)(n.canvas,t)),r)for(var f in r)null!==r[f]&&(n.viewport[f]=r[f]);var d=void 0;void 0!==n.lastImageTimeStamp&&(d=(1e3/((0,s.default)()-n.lastImageTimeStamp)).toFixed()),n.lastImageTimeStamp=(0,s.default)();var h={viewport:n.viewport,element:n.element,image:n.image,oldImage:l,enabledElement:n,frameRate:d};(0,c.default)(n.element,"cornerstonenewimage",h),(0,a.default)(e)};var o=r(0),i=n(r(3)),a=n(r(5)),s=n(r(1)),u=r(25),c=n(r(2))},function(e,t,r){"use strict";function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e);if(void 0===t.image)throw new Error("draw: image has not been loaded yet");(0,o.default)(t)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=(0,n.getEnabledElements)(),t=0;t<e.length;t++){var r=e[t];!0===r.invalid&&(0,o.default)(r,!0)}};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(6))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){return void 0!==e.image||e.layers.length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function r(e){if(void 0!==n.canvas){var t={enabledElement:n,timestamp:e};(0,l.default)(n.element,"cornerstoneprerender",t),n.needsRedraw&&o(n)&&(0,s.default)(n,n.invalid),(0,u.default)(r)}}if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&(c.default.renderer.isWebGLAvailable()?(c.default.renderer.initRenderer(),t.renderer="webgl"):(console.error("WebGL not available, falling back to Canvas renderer"),delete t.renderer));var n={element:e,canvas:(0,f.default)(e),image:void 0,invalid:!1,needsRedraw:!0,options:t,layers:[],data:{},renderingTools:{}};(0,i.addEnabledElement)(n),(0,a.default)(e,!0),r()};var i=r(0),a=n(r(36)),s=n(r(62)),u=n(r(19)),c=n(r(15)),l=n(r(2)),f=n(r(64))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.image,n=e.element,f=e.layers||[];if(e.canvas&&(e.image||f.length)){var d=(0,o.default)();if(r.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},f&&f.length)(0,i.default)(e,t);else if(r){var h=r.render;h||(h=e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?c.renderLabelMapImage:e.viewport.colormap&&""!==e.viewport.colormap?u.renderPseudoColorImage:r.color?a.renderColorImage:s.renderGrayscaleImage),h(e,t)}var p=(0,o.default)()-d,m={viewport:e.viewport,element:n,image:r,enabledElement:e,canvasContext:e.canvas.getContext("2d"),renderTimeInMs:p};r.stats.lastRenderTime=p,e.invalid=!1,e.needsRedraw=!1,(0,l.default)(n,"cornerstoneimagerendered",m)}};var o=n(r(1)),i=n(r(63)),a=r(8),s=r(17),u=r(14),c=r(10),l=n(r(2))},function(e,t,r){"use strict";function n(e,t){return d[t]/d[e]}function o(e,t){e.forEach(function(e){if(e!==t&&e.viewport&&t.viewport){d[e.layerId]||(d[e.layerId]=e.viewport.scale);var r=n(t.layerId,e.layerId);e.viewport.scale=t.viewport.scale*r,e.viewport.rotation=t.viewport.rotation,e.viewport.translation={x:t.viewport.translation.x/r,y:t.viewport.translation.y/r},e.viewport.hflip=t.viewport.hflip,e.viewport.vflip=t.viewport.vflip}})}function i(e,t,r){t.forEach(function(t,n){if(t.image){e.save(),t.canvas=e.canvas,(0,f.default)(t,e);var o=t.viewport.colormap||t.options.colormap,i=t.viewport.labelmap,a=t.invalid||r;if(o&&""!==o&&!0===i)(0,l.addLabelMapLayer)(t,a);else if(o&&""!==o)(0,c.addPseudoColorLayer)(t,a);else if(!0===t.image.color)(0,u.addColorLayer)(t,a);else{var d=0===n;(0,s.addGrayscaleLayer)(t,a,d)}t.options&&t.options.opacity?e.globalAlpha=t.options.opacity:e.globalAlpha=1,t.options&&t.options.fillStyle&&(e.fillStyle=t.options.fillStyle),e.imageSmoothingEnabled=!t.viewport.pixelReplication,e.mozImageSmoothingEnabled=e.imageSmoothingEnabled;var h=t.image,p=h.width,m=h.height;e.drawImage(t.canvas,0,0,p,m,0,0,p,m),e.restore(),t.invalid=!1}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=e.element,n=(0,a.getLayers)(r),s=(0,a.getActiveLayer)(r),u=(0,a.getVisibleLayers)(r),c=!e.lastSyncViewportsState&&e.syncViewports;e.lastSyncViewportsState=e.syncViewports,c&&n.forEach(function(e){e.viewport&&(d[e.layerId]=e.viewport.scale)}),!0===e.syncViewports&&o(u,s);var l=e.canvas.getContext("2d");l.setTransform(1,0,0,1,0,0),l.fillStyle="black",l.fillRect(0,0,e.canvas.width,e.canvas.height),i(l,u,t)};var a=r(25),s=r(17),u=r(8),c=r(14),l=r(10),f=function(e){return e&&e.__esModule?e:{default:e}}(r(4)),d={}},function(e,t,r){"use strict";function n(e){var t=document.createElement("canvas");return t.style.display="block",t.classList.add(i),e.appendChild(t),t}function o(e){var t="canvas."+i;return e.querySelector(t)||n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var i="cornerstone-canvas"},function(e,t,r){"use strict";function n(e,t){var r=(0,i.getEnabledElement)(e);return!1===r.data.hasOwnProperty(t)&&(r.data[t]={}),r.data[t]}function o(e,t){delete(0,i.getEnabledElement)(e).data[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementData=n,t.removeElementData=o;var i=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e);return(0,o.default)(r.canvas,t)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(3))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,n.getEnabledElement)(e).image};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r,n,s){var u=(0,i.default)(e,t,r,n,s),c=(0,o.getEnabledElement)(e),l=(0,a.default)(c.image.slope,c.image.intercept,c.viewport.modalityLUT);return u.map(l)};var o=r(0),i=n(r(39)),a=n(r(26))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e).viewport;if(void 0!==t)return Object.assign({},t)};var n=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=e.indexOf(":"),n=e.substring(0,r),o=d[n];if(void 0===o||null===o){if(void 0!==h)return h(e);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var i=o(e,t);return i.promise.then(function(e){(0,f.default)(l.default,"cornerstoneimageloaded",{image:e})},function(t){var r={imageId:e,error:t};(0,f.default)(l.default,"cornerstoneimageloadfailed",r)}),i}function i(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var r=(0,c.getImageLoadObject)(e);return void 0!==r?r.promise:o(e,t).promise}function a(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var r=(0,c.getImageLoadObject)(e);return void 0!==r?r.promise:(r=o(e,t),(0,c.putImageLoadObject)(e,r),r.promise)}function s(e,t){d[e]=t}function u(e){var t=h;return h=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=i,t.loadAndCacheImage=a,t.registerImageLoader=s,t.registerUnknownImageLoader=u;var c=r(40),l=n(r(16)),f=n(r(2)),d={},h=void 0},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.getEnabledElement)(e);t.invalid=!0,t.needsRedraw=!0;var r={element:e};(0,o.default)(e,"cornerstoneinvalidated",r)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(2))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.getEnabledElementsByImageId)(e).forEach(function(e){(0,o.default)(e,!0)})};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(6))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var i=(0,n.getEnabledElement)(e);if(void 0===i.image)throw new Error("image has not been loaded yet");var a=e.getBoundingClientRect(),s={x:t-a.left-window.pageXOffset,y:r-a.top-window.pageYOffset},u=(0,o.default)(i);return u.invert(),u.transformPoint(s.x,s.y)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(9))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,n.getEnabledElement)(e);return(0,o.default)(r).transformPoint(t.x,t.y)};var n=r(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r(9))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,o.getEnabledElement)(e);t.viewport=(0,i.default)(t.canvas,t.image),(0,a.default)(e)};var o=r(0),i=n(r(3)),a=n(r(5))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=(0,i.getEnabledElement)(e);if(void 0===r.viewport&&(r.viewport=(0,o.default)(r.canvas)),t)for(var n in t)null!==t[n]&&(r.viewport[n]=t[n]);r.viewport.voi.windowWidth&&(r.viewport.voi.windowWidth=Math.max(t.voi.windowWidth,s)),r.viewport.scale&&(r.viewport.scale=Math.max(t.scale,u)),r.viewport.rotation%=360,r.viewport.rotation<0&&(r.viewport.rotation+=360),r.image&&(0,a.default)(e)};var o=n(r(3)),i=r(0),a=n(r(5)),s=1e-6,u=1e-4},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),o=r(17),i=r(35),a=r(14),s=r(10);t.default={colorImage:n.renderColorImage,grayscaleImage:o.renderGrayscaleImage,webImage:i.renderWebImage,pseudoColorImage:a.renderPseudoColorImage,labelMapImage:s.renderLabelMapImage}},function(e,t,r){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=void 0;for(r=0;r<a.length&&!(a[r].priority<=t);r++);a.splice(r,0,{priority:t,provider:e})}function o(e){for(var t=0;t<a.length;t++)if(a[t].provider===e){a.splice(t,1);break}}function i(e,t){for(var r=0;r<a.length;r++){var n=a[r].provider(e,t);if(void 0!==n)return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.addProvider=n,t.removeProvider=o;var a=[];t.default={addProvider:n,removeProvider:o,get:i}},function(e,t,r){"use strict";function n(e){for(var t=Number.MAX_VALUE,r=Number.MIN_VALUE,n=e.length,o=void 0,i=0;i<n;i++)o=e[i],t=t<o?t:o,r=r>o?r:o;return{minPixelValue:t,maxPixelValue:r}}function o(e){if(e.restore)return e.restore;var t=e.color,r=e.rgba,n=e.cachedLut,o=e.slope,i=e.windowWidth,a=e.windowCenter,s=e.minPixelValue,u=e.maxPixelValue;return function(){if(e.color=t,e.rgba=r,e.cachedLut=n,e.slope=o,e.windowWidth=i,e.windowCenter=a,e.minPixelValue=s,e.maxPixelValue=u,e.origPixelData){var c=e.origPixelData;e.getPixelData=function(){return c}}e.origPixelData=void 0,e.colormapId=void 0,e.falseColor=void 0}}function i(e){return e&&"string"==typeof e&&(e=(0,f.getColormap)(e)),e}function a(e){return!(!e.restore||"function"!=typeof e.restore||(e.restore(),0))}function s(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var r=(t=i(t)).getId();if(e.colormapId===r)return!1;if(a(e),r){var s=e.minPixelValue||0,u=e.maxPixelValue||255;e.restore=o(e);var c=t.createLookupTable();c.setTableRange(s,u),(0,l.default)(e,c);var f=n(e.getPixelData());e.minPixelValue=f.minPixelValue,e.maxPixelValue=f.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=r}return!0}function u(e,t){return s((0,c.getEnabledElement)(e).image,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreImage=t.convertToFalseColorImage=t.convertImageToFalseColorImage=void 0;var c=r(0),l=function(e){return e&&e.__esModule?e:{default:e}}(r(41)),f=r(28);t.convertImageToFalseColorImage=s,t.convertToFalseColorImage=u,t.restoreImage=a}])})}}},"babel-runtime":{regenerator:{"index.js":function(e,t,r){r.exports=e("regenerator-runtime")}},helpers:{"typeof.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/symbol/iterator")),o=r(e("../core-js/symbol")),i="function"==typeof o.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":typeof e};t.default="function"==typeof o.default&&"symbol"===i(n.default)?function(e){return void 0===e?"undefined":i(e)}:function(e){return e&&"function"==typeof o.default&&e.constructor===o.default&&e!==o.default.prototype?"symbol":void 0===e?"undefined":i(e)}},"toConsumableArray.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/array/from"));t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,n.default)(e)}},"possibleConstructorReturn.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../helpers/typeof"));t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,n.default)(t))&&"function"!=typeof t?e:t}},"inherits.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/object/set-prototype-of")),o=r(e("../core-js/object/create")),i=r(e("../helpers/typeof"));t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,i.default)(t)));e.prototype=(0,o.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},"classCallCheck.js":function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"slicedToArray.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/is-iterable")),o=r(e("../core-js/get-iterator"));t.default=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s=(0,o.default)(e),u;!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},"createClass.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/object/define-property"));t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},"extends.js":function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=r(e("../core-js/object/assign"));t.default=n.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}}},"core-js":{symbol:{"iterator.js":function(e,t,r){r.exports={default:e("core-js/library/fn/symbol/iterator"),__esModule:!0}}},"symbol.js":function(e,t,r){r.exports={default:e("core-js/library/fn/symbol"),__esModule:!0}},array:{"from.js":function(e,t,r){r.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}}},object:{"set-prototype-of.js":function(e,t,r){r.exports={default:e("core-js/library/fn/object/set-prototype-of"),__esModule:!0}},"create.js":function(e,t,r){r.exports={default:e("core-js/library/fn/object/create"),__esModule:!0}},"define-property.js":function(e,t,r){r.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},"assign.js":function(e,t,r){r.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}}},"is-iterable.js":function(e,t,r){r.exports={default:e("core-js/library/fn/is-iterable"),__esModule:!0}},"get-iterator.js":function(e,t,r){r.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}}}},"regenerator-runtime":{"package.json":function(e,t,r){t.name="regenerator-runtime",t.version="0.11.1",t.main="runtime-module.js"},"runtime-module.js":function(e,t,r){var n=function(){return this}()||Function("return this")(),o=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,i=o&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,r.exports=e("./runtime"),o)n.regeneratorRuntime=i;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}},"runtime.js":function(e,t,r){!function(e){"use strict";function t(e,t,r,n){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new h(n||[]);return a._invoke=c(e,r,s),a}function n(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function i(){}function a(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function u(e){function t(r,o,i,a){var s=n(e[r],e,o);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&v.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,i,a)},function(e){t("throw",e,i,a)}):Promise.resolve(c).then(function(e){u.value=e,i(u)},a)}a(s.arg)}function r(e,r){function n(){return new Promise(function(n,o){t(e,r,n,o)})}return o=o?o.then(n,n):n()}var o;this._invoke=r}function c(e,t,r){var o=P;return function i(a,s){if(o===S)throw new Error("Generator is already running");if(o===I){if("throw"===a)throw s;return m()}for(r.method=a,r.arg=s;;){var u=r.delegate;if(u){var c=l(u,r);if(c){if(c===T)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===P)throw o=I,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=S;var f=n(e,t,r);if("normal"===f.type){if(o=r.done?I:O,f.arg===T)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(o=I,r.method="throw",r.arg=f.arg)}}}function l(e,t){var r=e.iterator[t.method];if(r===_){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=_,l(e,t),"throw"===t.method))return T;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return T}var o=n(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,T;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=_),t.delegate=null,T):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,T)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function p(e){if(e){var t=e[y];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(v.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=_,t.done=!0,t};return n.next=n}}return{next:m}}function m(){return{value:_,done:!0}}var g=Object.prototype,v=g.hasOwnProperty,_,b="function"==typeof Symbol?Symbol:{},y=b.iterator||"@@iterator",j=b.asyncIterator||"@@asyncIterator",w=b.toStringTag||"@@toStringTag",x="object"==typeof r,E=e.regeneratorRuntime;if(E)x&&(r.exports=E);else{(E=e.regeneratorRuntime=x?r.exports:{}).wrap=t;var P="suspendedStart",O="suspendedYield",S="executing",I="completed",T={},M={};M[y]=function(){return this};var C=Object.getPrototypeOf,L=C&&C(C(p([])));L&&L!==g&&v.call(L,y)&&(M=L);var k=a.prototype=o.prototype=Object.create(M);i.prototype=k.constructor=a,a.constructor=i,a[w]=i.displayName="GeneratorFunction",E.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},E.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,a):(e.__proto__=a,w in e||(e[w]="GeneratorFunction")),e.prototype=Object.create(k),e},E.awrap=function(e){return{__await:e}},s(u.prototype),u.prototype[j]=function(){return this},E.AsyncIterator=u,E.async=function(e,r,n,o){var i=new u(t(e,r,n,o));return E.isGeneratorFunction(r)?i:i.next().then(function(e){return e.done?e.value:i.next()})},s(k),k[w]="Generator",k[y]=function(){return this},k.toString=function(){return"[object Generator]"},E.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=p,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&v.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,n){return i.type="throw",i.arg=e,r.next=t,n&&(r.method="next",r.arg=_),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],i=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var a=v.call(o,"catchLoc"),s=v.call(o,"finallyLoc");if(a&&s){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&v.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,T):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),T},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),d(r),T}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;d(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:p(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=_),T}}}}(function(){return this}()||Function("return this")())}},"core-js":{modules:{"es6.symbol.js":function(e){"use strict";var t=e("./_global"),r=e("./_has"),n=e("./_descriptors"),o=e("./_export"),i=e("./_redefine"),a=e("./_meta").KEY,s=e("./_fails"),u=e("./_shared"),c=e("./_set-to-string-tag"),l=e("./_uid"),f=e("./_wks"),d=e("./_wks-ext"),h=e("./_wks-define"),p=e("./_enum-keys"),m=e("./_is-array"),g=e("./_an-object"),v=e("./_is-object"),_=e("./_to-iobject"),b=e("./_to-primitive"),y=e("./_property-desc"),j=e("./_object-create"),w=e("./_object-gopn-ext"),x=e("./_object-gopd"),E=e("./_object-dp"),P=e("./_object-keys"),O=x.f,S=E.f,I=w.f,T=t.Symbol,M=t.JSON,C=M&&M.stringify,L="prototype",k=f("_hidden"),A=f("toPrimitive"),R={}.propertyIsEnumerable,D=u("symbol-registry"),F=u("symbols"),N=u("op-symbols"),U=Object[L],V="function"==typeof T,W=t.QObject,B=!W||!W[L]||!W[L].findChild,z=n&&s(function(){return 7!=j(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=O(U,t);n&&delete U[t],S(e,t,r),n&&e!==U&&S(U,t,n)}:S,G=function(e){var t=F[e]=j(T[L]);return t._k=e,t},q=V&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},H=function e(t,n,o){return t===U&&H(N,n,o),g(t),n=b(n,!0),g(o),r(F,n)?(o.enumerable?(r(t,k)&&t[k][n]&&(t[k][n]=!1),o=j(o,{enumerable:y(0,!1)})):(r(t,k)||S(t,k,y(1,{})),t[k][n]=!0),z(t,n,o)):S(t,n,o)},Y=function e(t,r){g(t);for(var n=p(r=_(r)),o=0,i=n.length,a;i>o;)H(t,a=n[o++],r[a]);return t},X=function e(t,r){return void 0===r?j(t):Y(j(t),r)},K=function e(t){var n=R.call(this,t=b(t,!0));return!(this===U&&r(F,t)&&!r(N,t))&&(!(n||!r(this,t)||!r(F,t)||r(this,k)&&this[k][t])||n)},J=function e(t,n){if(t=_(t),n=b(n,!0),t!==U||!r(F,n)||r(N,n)){var o=O(t,n);return!o||!r(F,n)||r(t,k)&&t[k][n]||(o.enumerable=!0),o}},$=function e(t){for(var n=I(_(t)),o=[],i=0,s;n.length>i;)r(F,s=n[i++])||s==k||s==a||o.push(s);return o},Q=function e(t){for(var n=t===U,o=I(n?N:_(t)),i=[],a=0,s;o.length>a;)!r(F,s=o[a++])||n&&!r(U,s)||i.push(F[s]);return i};V||(i((T=function e(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),o=function(e){this===U&&o.call(N,e),r(this,k)&&r(this[k],t)&&(this[k][t]=!1),z(this,t,y(1,e))};return n&&B&&z(U,t,{configurable:!0,set:o}),G(t)})[L],"toString",function e(){return this._k}),x.f=J,E.f=H,e("./_object-gopn").f=w.f=$,e("./_object-pie").f=K,e("./_object-gops").f=Q,n&&!e("./_library")&&i(U,"propertyIsEnumerable",K,!0),d.f=function(e){return G(f(e))}),o(o.G+o.W+o.F*!V,{Symbol:T});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)f(Z[ee++]);for(var te=P(f.store),re=0;te.length>re;)h(te[re++]);o(o.S+o.F*!V,"Symbol",{for:function(e){return r(D,e+="")?D[e]:D[e]=T(e)},keyFor:function e(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var r in D)if(D[r]===t)return r},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!V,"Object",{create:X,defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),M&&o(o.S+o.F*(!V||s(function(){var e=T();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function e(t){for(var r=[t],n=1,o,i;arguments.length>n;)r.push(arguments[n++]);if(i=o=r[1],(v(o)||void 0!==t)&&!q(t))return m(o)||(o=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),r[1]=o,C.apply(M,r)}}),T[L][A]||e("./_hide")(T[L],A,T[L].valueOf),c(T,"Symbol"),c(Math,"Math",!0),c(t.JSON,"JSON",!0)},"_global.js":function(e,t,r){var n=r.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"_has.js":function(e,t,r){var n={}.hasOwnProperty;r.exports=function(e,t){return n.call(e,t)}},"_descriptors.js":function(e,t,r){r.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"_fails.js":function(e,t,r){r.exports=function(e){try{return!!e()}catch(e){return!0}}},"_export.js":function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_hide"),a=e("./_redefine"),s=e("./_ctx"),u="prototype",c=function(e,t,r){var l=e&c.F,f=e&c.G,d=e&c.S,h=e&c.P,p=e&c.B,m=f?n:d?n[t]||(n[t]={}):(n[t]||{})[u],g=f?o:o[t]||(o[t]={}),v=g[u]||(g[u]={}),_,b,y,j;f&&(r=t);for(_ in r)y=((b=!l&&m&&void 0!==m[_])?m:r)[_],j=p&&b?s(y,n):h&&"function"==typeof y?s(Function.call,y):y,m&&a(m,_,y,e&c.U),g[_]!=y&&i(g,_,j),h&&v[_]!=y&&(v[_]=y)};n.core=o,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,r.exports=c},"_core.js":function(e,t,r){var n=r.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},"_hide.js":function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");r.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},"_object-dp.js":function(e,t){var r=e("./_an-object"),n=e("./_ie8-dom-define"),o=e("./_to-primitive"),i=Object.defineProperty;t.f=e("./_descriptors")?Object.defineProperty:function e(t,a,s){if(r(t),a=o(a,!0),r(s),n)try{return i(t,a,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[a]=s.value),t}},"_an-object.js":function(e,t,r){var n=e("./_is-object");r.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"_is-object.js":function(e,t,r){r.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"_ie8-dom-define.js":function(e,t,r){r.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},"_dom-create.js":function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);r.exports=function(e){return i?o.createElement(e):{}}},"_to-primitive.js":function(e,t,r){var n=e("./_is-object");r.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},"_property-desc.js":function(e,t,r){r.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"_redefine.js":function(e,t,r){var n=e("./_global"),o=e("./_hide"),i=e("./_has"),a=e("./_uid")("src"),s="toString",u=Function[s],c=(""+u).split(s);e("./_core").inspectSource=function(e){return u.call(e)},(r.exports=function(e,t,r,s){var u="function"==typeof r;u&&(i(r,"name")||o(r,"name",t)),e[t]!==r&&(u&&(i(r,a)||o(r,a,e[t]?""+e[t]:c.join(String(t)))),e===n?e[t]=r:s?e[t]?e[t]=r:o(e,t,r):(delete e[t],o(e,t,r)))})(Function.prototype,s,function e(){return"function"==typeof this&&this[a]||u.call(this)})},"_uid.js":function(e,t,r){var n=0,o=Math.random();r.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},"_ctx.js":function(e,t,r){var n=e("./_a-function");r.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},"_a-function.js":function(e,t,r){r.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"_meta.js":function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},d=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return c&&p.NEED&&u(e)&&!i(e,n)&&l(e),e},p=r.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},"_shared.js":function(e,t,r){var n=e("./_global"),o="__core-js_shared__",i=n[o]||(n[o]={});r.exports=function(e){return i[e]||(i[e]={})}},"_set-to-string-tag.js":function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");r.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},"_wks.js":function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(r.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},"_wks-ext.js":function(e,t){t.f=e("./_wks")},"_wks-define.js":function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;r.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"_library.js":function(e,t,r){r.exports=!1},"_enum-keys.js":function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");r.exports=function(e){var t=n(e),r=o.f;if(r)for(var a=r(e),s=i.f,u=0,c;a.length>u;)s.call(e,c=a[u++])&&t.push(c);return t}},"_object-keys.js":function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");r.exports=Object.keys||function e(t){return n(t,o)}},"_object-keys-internal.js":function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");r.exports=function(e,t){var r=o(e),s=0,u=[],c;for(c in r)c!=a&&n(r,c)&&u.push(c);for(;t.length>s;)n(r,c=t[s++])&&(~i(u,c)||u.push(c));return u}},"_to-iobject.js":function(e,t,r){var n=e("./_iobject"),o=e("./_defined");r.exports=function(e){return n(o(e))}},"_iobject.js":function(e,t,r){var n=e("./_cof");r.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"_cof.js":function(e,t,r){var n={}.toString;r.exports=function(e){return n.call(e).slice(8,-1)}},"_defined.js":function(e,t,r){r.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"_array-includes.js":function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");r.exports=function(e){return function(t,r,a){var s=n(t),u=o(s.length),c=i(a,u),l;if(e&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((e||c in s)&&s[c]===r)return e||c||0;return!e&&-1}}},"_to-length.js":function(e,t,r){var n=e("./_to-integer"),o=Math.min;r.exports=function(e){return e>0?o(n(e),9007199254740991):0}},"_to-integer.js":function(e,t,r){var n=Math.ceil,o=Math.floor;r.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},"_to-absolute-index.js":function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;r.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},"_shared-key.js":function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");r.exports=function(e){return n[e]||(n[e]=o(e))}},"_enum-bug-keys.js":function(e,t,r){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"_is-array.js":function(e,t,r){var n=e("./_cof");r.exports=Array.isArray||function e(t){return"Array"==n(t)}},"_object-create.js":function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var t=e("./_dom-create")("iframe"),r=i.length,n="<",o=">",a;for(t.style.display="none",e("./_html").appendChild(t),t.src="javascript:",(a=t.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),c=a.F;r--;)delete c[u][i[r]];return c()};r.exports=Object.create||function e(t,r){var i;return null!==t?(s[u]=n(t),i=new s,s[u]=null,i[a]=t):i=c(),void 0===r?i:o(i,r)}},"_object-dps.js":function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");r.exports=e("./_descriptors")?Object.defineProperties:function e(t,r){o(t);for(var a=i(r),s=a.length,u=0,c;s>u;)n.f(t,c=a[u++],r[c]);return t}},"_html.js":function(e,t,r){var n=e("./_global").document;r.exports=n&&n.documentElement},"_object-gopn-ext.js":function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};r.exports.f=function e(t){return a&&"[object Window]"==i.call(t)?s(t):o(n(t))}},"_object-gopn.js":function(e,t){var r=e("./_object-keys-internal"),n=e("./_enum-bug-keys").concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return r(t,n)}},"_object-gopd.js":function(e,t){var r=e("./_object-pie"),n=e("./_property-desc"),o=e("./_to-iobject"),i=e("./_to-primitive"),a=e("./_has"),s=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;t.f=e("./_descriptors")?u:function e(t,c){if(t=o(t),c=i(c,!0),s)try{return u(t,c)}catch(e){}if(a(t,c))return n(!r.f.call(t,c),t[c])}},"es6.map.js":function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection"),i="Map";r.exports=e("./_collection")(i,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function e(t){var r=n.getEntry(o(this,i),t);return r&&r.v},set:function e(t,r){return n.def(o(this,i),0===t?0:t,r)}},n,!0)},"_collection-strong.js":function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),u=e("./_for-of"),c=e("./_iter-define"),l=e("./_iter-step"),f=e("./_set-species"),d=e("./_descriptors"),h=e("./_meta").fastKey,p=e("./_validate-collection"),m=d?"_s":"size",g=function(e,t){var r=h(t),n;if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};r.exports={getConstructor:function(e,t,r,c){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&u(n,r,e[c],e)});return i(l.prototype,{clear:function e(){for(var r=p(this,t),n=r._i,o=r._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete n[o.i];r._f=r._l=void 0,r[m]=0},delete:function(e){var r=p(this,t),n=g(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[m]--}return!!n},forEach:function e(r){p(this,t);for(var n=a(r,arguments.length>1?arguments[1]:void 0,3),o;o=o?o.n:this._f;)for(n(o.v,o.k,this);o&&o.r;)o=o.p},has:function e(r){return!!g(p(this,t),r)}}),d&&n(l.prototype,"size",{get:function(){return p(this,t)[m]}}),l},def:function(e,t,r){var n=g(e,t),o,i;return n?n.v=r:(e._l=n={i:i=h(t,!0),k:t,v:r,p:o=e._l,n:void 0,r:!1},e._f||(e._f=n),o&&(o.n=n),e[m]++,"F"!==i&&(e._i[i]=n)),e},getEntry:g,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=p(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),f(t)}}},"_redefine-all.js":function(e,t,r){var n=e("./_redefine");r.exports=function(e,t,r){for(var o in t)n(e,o,t[o],r);return e}},"_an-instance.js":function(e,t,r){r.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},"_for-of.js":function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),u=e("./core.get-iterator-method"),c={},l={};(t=r.exports=function(e,t,r,f,d){var h=d?function(){return e}:u(e),p=n(r,f,t?2:1),m=0,g,v,_,b;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(i(h)){for(g=s(e.length);g>m;m++)if((b=t?p(a(v=e[m])[0],v[1]):p(e[m]))===c||b===l)return b}else for(_=h.call(e);!(v=_.next()).done;)if((b=o(_,p,v.value,t))===c||b===l)return b}).BREAK=c,t.RETURN=l},"_iter-call.js":function(e,t,r){var n=e("./_an-object");r.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},"_is-array-iter.js":function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;r.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},"_iterators.js":function(e,t,r){r.exports={}},"core.get-iterator-method.js":function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");r.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},"_classof.js":function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};r.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},"_iter-define.js":function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",m="keys",g="values",v=function(){return this};r.exports=function(e,t,r,_,b,y,j){c(r,t,_);var w=function(e){if(!h&&e in O)return O[e];switch(e){case m:return function t(){return new r(this,e)};case g:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}},x=t+" Iterator",E=b==g,P=!1,O=e.prototype,S=O[d]||O[p]||b&&O[b],I=!h&&S||w(b),T=b?E?w("entries"):I:void 0,M="Array"==t?O.entries||S:S,C,L,k;if(M&&(k=f(M.call(new e)))!==Object.prototype&&k.next&&(l(k,x,!0),n||s(k,d)||a(k,d,v)),E&&S&&S.name!==g&&(P=!0,I=function e(){return S.call(this)}),n&&!j||!h&&!P&&O[d]||a(O,d,I),u[t]=I,u[x]=v,b)if(C={values:E?I:w(g),keys:y?I:w(m),entries:T},j)for(L in C)L in O||i(O,L,C[L]);else o(o.P+o.F*(h||P),t,C);return C}},"_iter-create.js":function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),r.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},"_object-gpo.js":function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;r.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"_to-object.js":function(e,t,r){var n=e("./_defined");r.exports=function(e){return Object(n(e))}},"_iter-step.js":function(e,t,r){r.exports=function(e,t){return{value:t,done:!!e}}},"_set-species.js":function(e,t,r){"use strict";var n=e("./_global"),o=e("./_object-dp"),i=e("./_descriptors"),a=e("./_wks")("species");r.exports=function(e){var t=n[e];i&&t&&!t[a]&&o.f(t,a,{configurable:!0,get:function(){return this}})}},"_validate-collection.js":function(e,t,r){var n=e("./_is-object");r.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"_collection.js":function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_redefine"),a=e("./_redefine-all"),s=e("./_meta"),u=e("./_for-of"),c=e("./_an-instance"),l=e("./_is-object"),f=e("./_fails"),d=e("./_iter-detect"),h=e("./_set-to-string-tag"),p=e("./_inherit-if-required");r.exports=function(e,t,r,m,g,v){var _=n[e],b=_,y=g?"set":"add",j=b&&b.prototype,w={},x=function(e){var t=j[e];i(j,e,"delete"==e?function(e){return!(v&&!l(e))&&t.call(this,0===e?0:e)}:"has"==e?function e(r){return!(v&&!l(r))&&t.call(this,0===r?0:r)}:"get"==e?function e(r){return v&&!l(r)?void 0:t.call(this,0===r?0:r)}:"add"==e?function e(r){return t.call(this,0===r?0:r),this}:function e(r,n){return t.call(this,0===r?0:r,n),this})};if("function"==typeof b&&(v||j.forEach&&!f(function(){(new b).entries().next()}))){var E=new b,P=E[y](v?{}:-0,1)!=E,O=f(function(){E.has(1)}),S=d(function(e){new b(e)}),I=!v&&f(function(){for(var e=new b,t=5;t--;)e[y](t,t);return!e.has(-0)});S||((b=t(function(t,r){c(t,b,e);var n=p(new _,t,b);return void 0!=r&&u(r,g,n[y],n),n})).prototype=j,j.constructor=b),(O||I)&&(x("delete"),x("has"),g&&x("get")),(I||P)&&x(y),v&&j.clear&&delete j.clear}else b=m.getConstructor(t,e,g,y),a(b.prototype,r),s.NEED=!0;return h(b,e),w[e]=b,o(o.G+o.W+o.F*(b!=_),w),v||m.setStrong(b,e,g),b}},"_iter-detect.js":function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}r.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},"_inherit-if-required.js":function(e,t,r){var n=e("./_is-object"),o=e("./_set-proto").set;r.exports=function(e,t,r){var i=t.constructor,a;return i!==r&&"function"==typeof i&&(a=i.prototype)!==r.prototype&&n(a)&&o&&o(e,a),e}},"_set-proto.js":function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function e(t,o){return i(t,o),r?t.__proto__=o:n(t,o),t}}({},!1):void 0),check:i}},"es6.set.js":function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection"),i="Set";r.exports=e("./_collection")(i,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function e(t){return n.def(o(this,i),t=0===t?0:t,t)}},n)},"es6.string.iterator.js":function(e){"use strict";var t=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,r=this._i,n;return r>=e.length?{value:void 0,done:!0}:(n=t(e,r),this._i+=n.length,{value:n,done:!1})})},"_string-at.js":function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");r.exports=function(e){return function(t,r){var i=String(o(t)),a=n(r),s=i.length,u,c;return a<0||a>=s?e?"":void 0:(u=i.charCodeAt(a))<55296||u>56319||a+1===s||(c=i.charCodeAt(a+1))<56320||c>57343?e?i.charAt(a):u:e?i.slice(a,a+2):c-56320+(u-55296<<10)+65536}}},"es6.array.is-array.js":function(e){var t=e("./_export");t(t.S,"Array",{isArray:e("./_is-array")})},"es6.array.from.js":function(e){"use strict";var t=e("./_ctx"),r=e("./_export"),n=e("./_to-object"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_to-length"),s=e("./_create-property"),u=e("./core.get-iterator-method");r(r.S+r.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function e(r){var c=n(r),l="function"==typeof this?this:Array,f=arguments.length,d=f>1?arguments[1]:void 0,h=void 0!==d,p=0,m=u(c),g,v,_,b;if(h&&(d=t(d,f>2?arguments[2]:void 0,2)),void 0==m||l==Array&&i(m))for(v=new l(g=a(c.length));g>p;p++)s(v,p,h?d(c[p],p):c[p]);else for(b=m.call(c),v=new l;!(_=b.next()).done;p++)s(v,p,h?o(b,d,[_.value,p],!0):_.value);return v.length=p,v}})},"_create-property.js":function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");r.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},"es6.array.of.js":function(e){"use strict";var t=e("./_export"),r=e("./_create-property");t(t.S+t.F*e("./_fails")(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function e(){for(var t=0,n=arguments.length,o=new("function"==typeof this?this:Array)(n);n>t;)r(o,t,arguments[t++]);return o.length=n,o}})},"es6.array.join.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-iobject"),n=[].join;t(t.P+t.F*(e("./_iobject")!=Object||!e("./_strict-method")(n)),"Array",{join:function e(t){return n.call(r(this),void 0===t?",":t)}})},"_strict-method.js":function(e,t,r){"use strict";var n=e("./_fails");r.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},"es6.array.slice.js":function(e){"use strict";var t=e("./_export"),r=e("./_html"),n=e("./_cof"),o=e("./_to-absolute-index"),i=e("./_to-length"),a=[].slice;t(t.P+t.F*e("./_fails")(function(){r&&a.call(r)}),"Array",{slice:function e(t,r){var s=i(this.length),u=n(this);if(r=void 0===r?s:r,"Array"==u)return a.call(this,t,r);for(var c=o(t,s),l=o(r,s),f=i(l-c),d=new Array(f),h=0;h<f;h++)d[h]="String"==u?this.charAt(c+h):this[c+h];return d}})},"es6.array.sort.js":function(e){"use strict";var t=e("./_export"),r=e("./_a-function"),n=e("./_to-object"),o=e("./_fails"),i=[].sort,a=[1,2,3];t(t.P+t.F*(o(function(){a.sort(void 0)})||!o(function(){a.sort(null)})||!e("./_strict-method")(i)),"Array",{sort:function e(t){return void 0===t?i.call(n(this)):i.call(n(this),r(t))}})},"es6.array.for-each.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(0),n=e("./_strict-method")([].forEach,!0);t(t.P+t.F*!n,"Array",{forEach:function e(t){return r(this,t,arguments[1])}})},"_array-methods.js":function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");r.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var m=i(t),g=o(m),v=n(s,p,3),_=a(g.length),b=0,y=r?h(t,_):u?h(t,0):void 0,j,w;_>b;b++)if((d||b in g)&&(j=g[b],w=v(j,b,m),e))if(r)y[b]=w;else if(w)switch(e){case 3:return!0;case 5:return j;case 6:return b;case 2:y.push(j)}else if(l)return!1;return f?-1:c||l?l:y}}},"_array-species-create.js":function(e,t,r){var n=e("./_array-species-constructor");r.exports=function(e,t){return new(n(e))(t)}},"_array-species-constructor.js":function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");r.exports=function(e){var t;return o(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},"es6.array.map.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(1);t(t.P+t.F*!e("./_strict-method")([].map,!0),"Array",{map:function e(t){return r(this,t,arguments[1])}})},"es6.array.filter.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(2);t(t.P+t.F*!e("./_strict-method")([].filter,!0),"Array",{filter:function e(t){return r(this,t,arguments[1])}})},"es6.array.some.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(3);t(t.P+t.F*!e("./_strict-method")([].some,!0),"Array",{some:function e(t){return r(this,t,arguments[1])}})},"es6.array.every.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(4);t(t.P+t.F*!e("./_strict-method")([].every,!0),"Array",{every:function e(t){return r(this,t,arguments[1])}})},"es6.array.reduce.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-reduce");t(t.P+t.F*!e("./_strict-method")([].reduce,!0),"Array",{reduce:function e(t){return r(this,t,arguments.length,arguments[1],!1)}})},"_array-reduce.js":function(e,t,r){var n=e("./_a-function"),o=e("./_to-object"),i=e("./_iobject"),a=e("./_to-length");r.exports=function(e,t,r,s,u){n(t);var c=o(e),l=i(c),f=a(c.length),d=u?f-1:0,h=u?-1:1;if(r<2)for(;;){if(d in l){s=l[d],d+=h;break}if(d+=h,u?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;u?d>=0:f>d;d+=h)d in l&&(s=t(s,l[d],d,c));return s}},"es6.array.reduce-right.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-reduce");t(t.P+t.F*!e("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function e(t){return r(this,t,arguments.length,arguments[1],!0)}})},"es6.array.index-of.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-includes")(!1),n=[].indexOf,o=!!n&&1/[1].indexOf(1,-0)<0;t(t.P+t.F*(o||!e("./_strict-method")(n)),"Array",{indexOf:function e(t){return o?n.apply(this,arguments)||0:r(this,t,arguments[1])}})},"es6.array.last-index-of.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-iobject"),n=e("./_to-integer"),o=e("./_to-length"),i=[].lastIndexOf,a=!!i&&1/[1].lastIndexOf(1,-0)<0;t(t.P+t.F*(a||!e("./_strict-method")(i)),"Array",{lastIndexOf:function e(t){if(a)return i.apply(this,arguments)||0;var s=r(this),u=o(s.length),c=u-1;for(arguments.length>1&&(c=Math.min(c,n(arguments[1]))),c<0&&(c=u+c);c>=0;c--)if(c in s&&s[c]===t)return c||0;return-1}})},"es6.array.copy-within.js":function(e){var t=e("./_export");t(t.P,"Array",{copyWithin:e("./_array-copy-within")}),e("./_add-to-unscopables")("copyWithin")},"_array-copy-within.js":function(e,t,r){"use strict";var n=e("./_to-object"),o=e("./_to-absolute-index"),i=e("./_to-length");r.exports=[].copyWithin||function e(t,r){var a=n(this),s=i(a.length),u=o(t,s),c=o(r,s),l=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===l?s:o(l,s))-c,s-u),d=1;for(c<u&&u<c+f&&(d=-1,c+=f-1,u+=f-1);f-- >0;)c in a?a[u]=a[c]:delete a[u],u+=d,c+=d;return a}},"_add-to-unscopables.js":function(e,t,r){var n=e("./_wks")("unscopables"),o=Array.prototype;void 0==o[n]&&e("./_hide")(o,n,{}),r.exports=function(e){o[n][e]=!0}},"es6.array.fill.js":function(e){var t=e("./_export");t(t.P,"Array",{fill:e("./_array-fill")}),e("./_add-to-unscopables")("fill")},"_array-fill.js":function(e,t,r){"use strict";var n=e("./_to-object"),o=e("./_to-absolute-index"),i=e("./_to-length");r.exports=function e(t){for(var r=n(this),a=i(r.length),s=arguments.length,u=o(s>1?arguments[1]:void 0,a),c=s>2?arguments[2]:void 0,l=void 0===c?a:o(c,a);l>u;)r[u++]=t;return r}},"es6.array.find.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(5),n="find",o=!0;n in[]&&Array(1)[n](function(){o=!1}),t(t.P+t.F*o,"Array",{find:function e(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(n)},"es6.array.find-index.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-methods")(6),n="findIndex",o=!0;n in[]&&Array(1)[n](function(){o=!1}),t(t.P+t.F*o,"Array",{findIndex:function e(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")(n)},"es6.array.species.js":function(e){e("./_set-species")("Array")},"es6.array.iterator.js":function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");r.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},"es6.function.bind.js":function(e){var t=e("./_export");t(t.P,"Function",{bind:e("./_bind")})},"_bind.js":function(e,t,r){"use strict";var n=e("./_a-function"),o=e("./_is-object"),i=e("./_invoke"),a=[].slice,s={},u=function(e,t,r){if(!(t in s)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";s[t]=Function("F,a","return new F("+n.join(",")+")")}return s[t](e,r)};r.exports=Function.bind||function e(t){var r=n(this),s=a.call(arguments,1),c=function(){var e=s.concat(a.call(arguments));return this instanceof c?u(r,e.length,e):i(r,e,t)};return o(r.prototype)&&(c.prototype=r.prototype),c}},"_invoke.js":function(e,t,r){r.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},"es6.function.name.js":function(e){var t=e("./_object-dp").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in r||e("./_descriptors")&&t(r,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},"es6.function.has-instance.js":function(e){"use strict";var t=e("./_is-object"),r=e("./_object-gpo"),n=e("./_wks")("hasInstance"),o=Function.prototype;n in o||e("./_object-dp").f(o,n,{value:function(e){if("function"!=typeof this||!t(e))return!1;if(!t(this.prototype))return e instanceof this;for(;e=r(e);)if(this.prototype===e)return!0;return!1}})},"es6.math.acosh.js":function(e){var t=e("./_export"),r=e("./_math-log1p"),n=Math.sqrt,o=Math.acosh;t(t.S+t.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function e(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:r(t-1+n(t-1)*n(t+1))}})},"_math-log1p.js":function(e,t,r){r.exports=Math.log1p||function e(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},"es6.math.asinh.js":function(e){function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}var r=e("./_export"),n=Math.asinh;r(r.S+r.F*!(n&&1/n(0)>0),"Math",{asinh:t})},"es6.math.atanh.js":function(e){var t=e("./_export"),r=Math.atanh;t(t.S+t.F*!(r&&1/r(-0)<0),"Math",{atanh:function e(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},"es6.math.cbrt.js":function(e){var t=e("./_export"),r=e("./_math-sign");t(t.S,"Math",{cbrt:function e(t){return r(t=+t)*Math.pow(Math.abs(t),1/3)}})},"_math-sign.js":function(e,t,r){r.exports=Math.sign||function e(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},"es6.math.clz32.js":function(e){var t=e("./_export");t(t.S,"Math",{clz32:function e(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},"es6.math.cosh.js":function(e){var t=e("./_export"),r=Math.exp;t(t.S,"Math",{cosh:function e(t){return(r(t=+t)+r(-t))/2}})},"es6.math.expm1.js":function(e){var t=e("./_export"),r=e("./_math-expm1");t(t.S+t.F*(r!=Math.expm1),"Math",{expm1:r})},"_math-expm1.js":function(e,t,r){var n=Math.expm1;r.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||-2e-17!=n(-2e-17)?function e(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},"es6.math.fround.js":function(e){var t=e("./_export");t(t.S,"Math",{fround:e("./_math-fround")})},"_math-fround.js":function(e,t,r){var n=e("./_math-sign"),o=Math.pow,i=o(2,-52),a=o(2,-23),s=o(2,127)*(2-a),u=o(2,-126),c=function(e){return e+1/i-1/i};r.exports=Math.fround||function e(t){var r=Math.abs(t),o=n(t),l,f;return r<u?o*c(r/u/a)*u*a:(l=(1+a/i)*r,(f=l-(l-r))>s||f!=f?o*(1/0):o*f)}},"es6.math.hypot.js":function(e){var t=e("./_export"),r=Math.abs;t(t.S,"Math",{hypot:function e(t,n){for(var o=0,i=0,a=arguments.length,s=0,u,c;i<a;)s<(u=r(arguments[i++]))?(o=o*(c=s/u)*c+1,s=u):o+=u>0?(c=u/s)*c:u;return s===1/0?1/0:s*Math.sqrt(o)}})},"es6.math.imul.js":function(e){var t=e("./_export"),r=Math.imul;t(t.S+t.F*e("./_fails")(function(){return-5!=r(4294967295,5)||2!=r.length}),"Math",{imul:function e(t,r){var n=65535,o=+t,i=+r,a=65535&o,s=65535&i;return 0|a*s+((65535&o>>>16)*s+a*(65535&i>>>16)<<16>>>0)}})},"es6.math.log10.js":function(e){var t=e("./_export");t(t.S,"Math",{log10:function e(t){return Math.log(t)*Math.LOG10E}})},"es6.math.log1p.js":function(e){var t=e("./_export");t(t.S,"Math",{log1p:e("./_math-log1p")})},"es6.math.log2.js":function(e){var t=e("./_export");t(t.S,"Math",{log2:function e(t){return Math.log(t)/Math.LN2}})},"es6.math.sign.js":function(e){var t=e("./_export");t(t.S,"Math",{sign:e("./_math-sign")})},"es6.math.sinh.js":function(e){var t=e("./_export"),r=e("./_math-expm1"),n=Math.exp;t(t.S+t.F*e("./_fails")(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function e(t){return Math.abs(t=+t)<1?(r(t)-r(-t))/2:(n(t-1)-n(-t-1))*(Math.E/2)}})},"es6.math.tanh.js":function(e){var t=e("./_export"),r=e("./_math-expm1"),n=Math.exp;t(t.S,"Math",{tanh:function e(t){var o=r(t=+t),i=r(-t);return o==1/0?1:i==1/0?-1:(o-i)/(n(t)+n(-t))}})},"es6.math.trunc.js":function(e){var t=e("./_export");t(t.S,"Math",{trunc:function e(t){return(t>0?Math.floor:Math.ceil)(t)}})},"es6.object.create.js":function(e){var t=e("./_export");t(t.S,"Object",{create:e("./_object-create")})},"es6.object.define-property.js":function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},"es6.object.define-properties.js":function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperties:e("./_object-dps")})},"es6.object.get-own-property-descriptor.js":function(e){var t=e("./_to-iobject"),r=e("./_object-gopd").f;e("./_object-sap")("getOwnPropertyDescriptor",function(){return function e(n,o){return r(t(n),o)}})},"_object-sap.js":function(e,t,r){var n=e("./_export"),o=e("./_core"),i=e("./_fails");r.exports=function(e,t){var r=(o.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",a)}},"es6.object.get-prototype-of.js":function(e){var t=e("./_to-object"),r=e("./_object-gpo");e("./_object-sap")("getPrototypeOf",function(){return function e(n){return r(t(n))}})},"es6.object.keys.js":function(e){var t=e("./_to-object"),r=e("./_object-keys");e("./_object-sap")("keys",function(){return function e(n){return r(t(n))}})},"es6.object.get-own-property-names.js":function(e){e("./_object-sap")("getOwnPropertyNames",function(){return e("./_object-gopn-ext").f})},"es6.object.freeze.js":function(e){var t=e("./_is-object"),r=e("./_meta").onFreeze;e("./_object-sap")("freeze",function(e){return function n(o){return e&&t(o)?e(r(o)):o}})},"es6.object.seal.js":function(e){var t=e("./_is-object"),r=e("./_meta").onFreeze;e("./_object-sap")("seal",function(e){return function n(o){return e&&t(o)?e(r(o)):o}})},"es6.object.prevent-extensions.js":function(e){var t=e("./_is-object"),r=e("./_meta").onFreeze;e("./_object-sap")("preventExtensions",function(e){return function n(o){return e&&t(o)?e(r(o)):o}})},"es6.object.is-frozen.js":function(e){var t=e("./_is-object");e("./_object-sap")("isFrozen",function(e){return function r(n){return!t(n)||!!e&&e(n)}})},"es6.object.is-sealed.js":function(e){var t=e("./_is-object");e("./_object-sap")("isSealed",function(e){return function r(n){return!t(n)||!!e&&e(n)}})},"es6.object.is-extensible.js":function(e){var t=e("./_is-object");e("./_object-sap")("isExtensible",function(e){return function r(n){return!!t(n)&&(!e||e(n))}})},"es6.object.assign.js":function(e){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},"_object-assign.js":function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),u=Object.assign;r.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function e(t,r){for(var u=a(t),c=arguments.length,l=1,f=o.f,d=i.f;c>l;)for(var h=s(arguments[l++]),p=f?n(h).concat(f(h)):n(h),m=p.length,g=0,v;m>g;)d.call(h,v=p[g++])&&(u[v]=h[v]);return u}:u},"es6.object.is.js":function(e){var t=e("./_export");t(t.S,"Object",{is:e("./_same-value")})},"_same-value.js":function(e,t,r){r.exports=Object.is||function e(t,r){return t===r?0!==t||1/t==1/r:t!=t&&r!=r}},"es6.object.set-prototype-of.js":function(e){var t=e("./_export");t(t.S,"Object",{setPrototypeOf:e("./_set-proto").set})},"es6.object.to-string.js":function(e){"use strict";var t=e("./_classof"),r={};r[e("./_wks")("toStringTag")]="z",r+""!="[object z]"&&e("./_redefine")(Object.prototype,"toString",function e(){return"[object "+t(this)+"]"},!0)},"es6.regexp.constructor.js":function(e){var t=e("./_global"),r=e("./_inherit-if-required"),n=e("./_object-dp").f,o=e("./_object-gopn").f,i=e("./_is-regexp"),a=e("./_flags"),s=t.RegExp,u=s,c=s.prototype,l=/a/g,f=/a/g,d=new s(l)!==l;if(e("./_descriptors")&&(!d||e("./_fails")(function(){return f[e("./_wks")("match")]=!1,s(l)!=l||s(f)==f||"/a/i"!=s(l,"i")}))){s=function e(t,n){var o=this instanceof s,l=i(t),f=void 0===n;return!o&&l&&t.constructor===s&&f?t:r(d?new u(l&&!f?t.source:t,n):u((l=t instanceof s)?t.source:t,l&&f?a.call(t):n),o?this:c,s)};for(var h=function(e){e in s||n(s,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},p=o(u),m=0;p.length>m;)h(p[m++]);c.constructor=s,s.prototype=c,e("./_redefine")(t,"RegExp",s)}e("./_set-species")("RegExp")},"_is-regexp.js":function(e,t,r){var n=e("./_is-object"),o=e("./_cof"),i=e("./_wks")("match");r.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},"_flags.js":function(e,t,r){"use strict";var n=e("./_an-object");r.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"es6.regexp.to-string.js":function(e){"use strict";e("./es6.regexp.flags");var t=e("./_an-object"),r=e("./_flags"),n=e("./_descriptors"),o="toString",i=/./[o],a=function(t){e("./_redefine")(RegExp.prototype,o,t,!0)};e("./_fails")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?a(function e(){var o=t(this);return"/".concat(o.source,"/","flags"in o?o.flags:!n&&o instanceof RegExp?r.call(o):void 0)}):i.name!=o&&a(function e(){return i.call(this)})},"es6.regexp.flags.js":function(e){e("./_descriptors")&&"g"!=/./g.flags&&e("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:e("./_flags")})},"es6.regexp.match.js":function(e){e("./_fix-re-wks")("match",1,function(e,t,r){return[function r(n){"use strict";var o=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},r]})},"_fix-re-wks.js":function(e,t,r){"use strict";var n=e("./_hide"),o=e("./_redefine"),i=e("./_fails"),a=e("./_defined"),s=e("./_wks");r.exports=function(e,t,r){var u=s(e),c=r(a,u,""[e]),l=c[0],f=c[1];i(function(){var t={};return t[u]=function(){return 7},7!=""[e](t)})&&(o(String.prototype,e,l),n(RegExp.prototype,u,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},"es6.regexp.replace.js":function(e){e("./_fix-re-wks")("replace",2,function(e,t,r){return[function n(o,i){"use strict";var a=e(this),s=void 0==o?void 0:o[t];return void 0!==s?s.call(o,a,i):r.call(String(a),o,i)},r]})},"es6.regexp.search.js":function(e){e("./_fix-re-wks")("search",1,function(e,t,r){return[function r(n){"use strict";var o=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,o):new RegExp(n)[t](String(o))},r]})},"es6.regexp.split.js":function(e){e("./_fix-re-wks")("split",2,function(t,r,n){"use strict";var o=e("./_is-regexp"),i=n,a=[].push,s="split",u="length",c="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[u]||2!="ab"[s](/(?:ab)*/)[u]||4!="."[s](/(.?)(.?)/)[u]||"."[s](/()()/)[u]>1||""[s](/.?/)[u]){var l=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!o(e))return i.call(r,e,t);var n=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,d=void 0===t?4294967295:t>>>0,h=new RegExp(e.source,s+"g"),p,m,g,v,_;for(l||(p=new RegExp("^"+h.source+"$(?!\\s)",s));(m=h.exec(r))&&!((g=m.index+m[0][u])>f&&(n.push(r.slice(f,m.index)),!l&&m[u]>1&&m[0].replace(p,function(){for(_=1;_<arguments[u]-2;_++)void 0===arguments[_]&&(m[_]=void 0)}),m[u]>1&&m.index<r[u]&&a.apply(n,m.slice(1)),v=m[0][u],f=g,n[u]>=d));)h[c]===m.index&&h[c]++;return f===r[u]?!v&&h.test("")||n.push(""):n.push(r.slice(f)),n[u]>d?n.slice(0,d):n}}else"0"[s](void 0,0)[u]&&(n=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function e(o,i){var a=t(this),s=void 0==o?void 0:o[r];return void 0!==s?s.call(o,a,i):n.call(String(a),o,i)},n]})},"es6.string.from-code-point.js":function(e){var t=e("./_export"),r=e("./_to-absolute-index"),n=String.fromCharCode,o=String.fromCodePoint;t(t.S+t.F*(!!o&&1!=o.length),"String",{fromCodePoint:function e(t){for(var o=[],i=arguments.length,a=0,s;i>a;){if(s=+arguments[a++],r(s,1114111)!==s)throw RangeError(s+" is not a valid code point");o.push(s<65536?n(s):n(55296+((s-=65536)>>10),s%1024+56320))}return o.join("")}})},"es6.string.raw.js":function(e){var t=e("./_export"),r=e("./_to-iobject"),n=e("./_to-length");t(t.S,"String",{raw:function e(t){for(var o=r(t.raw),i=n(o.length),a=arguments.length,s=[],u=0;i>u;)s.push(String(o[u++])),u<a&&s.push(String(arguments[u]));return s.join("")}})},"es6.string.trim.js":function(e){"use strict";e("./_string-trim")("trim",function(e){return function t(){return e(this,3)}})},"_string-trim.js":function(e,t,r){var n=e("./_export"),o=e("./_defined"),i=e("./_fails"),a=e("./_string-ws"),s="["+a+"]",u="",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(e,t,r){var o={},s=i(function(){return!!a[e]()||u[e]()!=u}),c=o[e]=s?t(d):a[e];r&&(o[r]=c),n(n.P+n.F*s,"String",o)},d=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(l,"")),e};r.exports=f},"_string-ws.js":function(e,t,r){r.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"es6.string.code-point-at.js":function(e){"use strict";var t=e("./_export"),r=e("./_string-at")(!1);t(t.P,"String",{codePointAt:function e(t){return r(this,t)}})},"es6.string.ends-with.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-length"),n=e("./_string-context"),o="endsWith",i=""[o];t(t.P+t.F*e("./_fails-is-regexp")(o),"String",{endsWith:function e(t){var a=n(this,t,o),s=arguments.length>1?arguments[1]:void 0,u=r(a.length),c=void 0===s?u:Math.min(r(s),u),l=String(t);return i?i.call(a,l,c):a.slice(c-l.length,c)===l}})},"_string-context.js":function(e,t,r){var n=e("./_is-regexp"),o=e("./_defined");r.exports=function(e,t,r){if(n(t))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(e))}},"_fails-is-regexp.js":function(e,t,r){var n=e("./_wks")("match");r.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,!"/./"[e](t)}catch(e){}}return!0}},"es6.string.includes.js":function(e){"use strict";var t=e("./_export"),r=e("./_string-context"),n="includes";t(t.P+t.F*e("./_fails-is-regexp")(n),"String",{includes:function e(t){return!!~r(this,t,n).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"es6.string.repeat.js":function(e){var t=e("./_export");t(t.P,"String",{repeat:e("./_string-repeat")})},"_string-repeat.js":function(e,t,r){"use strict";var n=e("./_to-integer"),o=e("./_defined");r.exports=function e(t){var r=String(o(this)),i="",a=n(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(r+=r))1&a&&(i+=r);return i}},"es6.string.starts-with.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-length"),n=e("./_string-context"),o="startsWith",i=""[o];t(t.P+t.F*e("./_fails-is-regexp")(o),"String",{startsWith:function e(t){var a=n(this,t,o),s=r(Math.min(arguments.length>1?arguments[1]:void 0,a.length)),u=String(t);return i?i.call(a,u,s):a.slice(s,s+u.length)===u}})},"es6.string.anchor.js":function(e){"use strict";e("./_string-html")("anchor",function(e){return function t(r){return e(this,"a","name",r)}})},"_string-html.js":function(e,t,r){var n=e("./_export"),o=e("./_fails"),i=e("./_defined"),a=/"/g,s=function(e,t,r,n){var o=String(i(e)),s="<"+t;return""!==r&&(s+=" "+r+'="'+String(n).replace(a,"&quot;")+'"'),s+">"+o+"</"+t+">"};r.exports=function(e,t){var r={};r[e]=t(s),n(n.P+n.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",r)}},"es6.string.big.js":function(e){"use strict";e("./_string-html")("big",function(e){return function t(){return e(this,"big","","")}})},"es6.string.blink.js":function(e){"use strict";e("./_string-html")("blink",function(e){return function t(){return e(this,"blink","","")}})},"es6.string.bold.js":function(e){"use strict";e("./_string-html")("bold",function(e){return function t(){return e(this,"b","","")}})},"es6.string.fixed.js":function(e){"use strict";e("./_string-html")("fixed",function(e){return function t(){return e(this,"tt","","")}})},"es6.string.fontcolor.js":function(e){"use strict";e("./_string-html")("fontcolor",function(e){return function t(r){return e(this,"font","color",r)}})},"es6.string.fontsize.js":function(e){"use strict";e("./_string-html")("fontsize",function(e){return function t(r){return e(this,"font","size",r)}})},"es6.string.italics.js":function(e){"use strict";e("./_string-html")("italics",function(e){return function t(){return e(this,"i","","")}})},"es6.string.link.js":function(e){"use strict";e("./_string-html")("link",function(e){return function t(r){return e(this,"a","href",r)}})},"es6.string.small.js":function(e){"use strict";e("./_string-html")("small",function(e){return function t(){return e(this,"small","","")}})},"es6.string.strike.js":function(e){"use strict";e("./_string-html")("strike",function(e){return function t(){return e(this,"strike","","")}})},"es6.string.sub.js":function(e){"use strict";e("./_string-html")("sub",function(e){return function t(){return e(this,"sub","","")}})},"es6.string.sup.js":function(e){"use strict";e("./_string-html")("sup",function(e){return function t(){return e(this,"sup","","")}})},"es6.weak-map.js":function(e,t,r){"use strict";var n=e("./_array-methods")(0),o=e("./_redefine"),i=e("./_meta"),a=e("./_object-assign"),s=e("./_collection-weak"),u=e("./_is-object"),c=e("./_fails"),l=e("./_validate-collection"),f="WeakMap",d=i.getWeak,h=Object.isExtensible,p=s.ufstore,m={},g,v=function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},_={get:function e(t){if(u(t)){var r=d(t);return!0===r?p(l(this,f)).get(t):r?r[this._i]:void 0}},set:function e(t,r){return s.def(l(this,f),t,r)}},b=r.exports=e("./_collection")(f,v,_,s,!0,!0);c(function(){return 7!=(new b).set((Object.freeze||Object)(m),7).get(m)})&&(a((g=s.getConstructor(v,f)).prototype,_),i.NEED=!0,n(["delete","has","get","set"],function(e){var t=b.prototype,r=t[e];o(t,e,function(t,n){if(u(t)&&!h(t)){this._f||(this._f=new g);var o=this._f[e](t,n);return"set"==e?this:o}return r.call(this,t,n)})}))},"_collection-weak.js":function(e,t,r){"use strict";var n=e("./_redefine-all"),o=e("./_meta").getWeak,i=e("./_an-object"),a=e("./_is-object"),s=e("./_an-instance"),u=e("./_for-of"),c=e("./_array-methods"),l=e("./_has"),f=e("./_validate-collection"),d=c(5),h=c(6),p=0,m=function(e){return e._l||(e._l=new g)},g=function(){this.a=[]},v=function(e,t){return d(e.a,function(e){return e[0]===t})};g.prototype={get:function(e){var t=v(this,e);if(t)return t[1]},has:function(e){return!!v(this,e)},set:function(e,t){var r=v(this,e);r?r[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},r.exports={getConstructor:function(e,t,r,i){var c=e(function(e,n){s(e,c,t,"_i"),e._t=t,e._i=p++,e._l=void 0,void 0!=n&&u(n,r,e[i],e)});return n(c.prototype,{delete:function(e){if(!a(e))return!1;var r=o(e);return!0===r?m(f(this,t)).delete(e):r&&l(r,this._i)&&delete r[this._i]},has:function e(r){if(!a(r))return!1;var n=o(r);return!0===n?m(f(this,t)).has(r):n&&l(n,this._i)}}),c},def:function(e,t,r){var n=o(i(t),!0);return!0===n?m(e).set(t,r):n[e._i]=r,e},ufstore:m}},"web.dom.iterable.js":function(e){for(var t=e("./es6.array.iterator"),r=e("./_object-keys"),n=e("./_redefine"),o=e("./_global"),i=e("./_hide"),a=e("./_iterators"),s=e("./_wks"),u=s("iterator"),c=s("toStringTag"),l=a.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(f),h=0;h<d.length;h++){var p=d[h],m=f[p],g=o[p],v=g&&g.prototype,_;if(v&&(v[u]||i(v,u,l),v[c]||i(v,c,p),a[p]=l,m))for(_ in t)v[_]||n(v,_,t[_],!0)}},"es6.weak-set.js":function(e){"use strict";var t=e("./_collection-weak"),r=e("./_validate-collection"),n="WeakSet";e("./_collection")(n,function(e){return function t(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function e(o){return t.def(r(this,n),o,!0)}},t,!1,!0)},"es7.array.includes.js":function(e){"use strict";var t=e("./_export"),r=e("./_array-includes")(!0);t(t.P,"Array",{includes:function e(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),e("./_add-to-unscopables")("includes")},"es7.array.flat-map.js":function(e){"use strict";var t=e("./_export"),r=e("./_flatten-into-array"),n=e("./_to-object"),o=e("./_to-length"),i=e("./_a-function"),a=e("./_array-species-create");t(t.P,"Array",{flatMap:function e(t){var s=n(this),u,c;return i(t),u=o(s.length),c=a(s,0),r(c,s,s,u,0,1,t,arguments[1]),c}}),e("./_add-to-unscopables")("flatMap")},"_flatten-into-array.js":function(e,t,r){"use strict";function n(e,t,r,c,l,f,d,h){for(var p=l,m=0,g=!!d&&s(d,h,3),v,_;m<c;){if(m in r){if(v=g?g(r[m],m,t):r[m],_=!1,i(v)&&(_=void 0!==(_=v[u])?!!_:o(v)),_&&f>0)p=n(e,t,v,a(v.length),p,f-1)-1;else{if(p>=9007199254740991)throw TypeError();e[p]=v}p++}m++}return p}var o=e("./_is-array"),i=e("./_is-object"),a=e("./_to-length"),s=e("./_ctx"),u=e("./_wks")("isConcatSpreadable");r.exports=n},"es7.array.flatten.js":function(e){"use strict";var t=e("./_export"),r=e("./_flatten-into-array"),n=e("./_to-object"),o=e("./_to-length"),i=e("./_to-integer"),a=e("./_array-species-create");t(t.P,"Array",{flatten:function e(){var t=arguments[0],s=n(this),u=o(s.length),c=a(s,0);return r(c,s,s,u,0,void 0===t?1:i(t)),c}}),e("./_add-to-unscopables")("flatten")},"es7.object.get-own-property-descriptors.js":function(e){var t=e("./_export"),r=e("./_own-keys"),n=e("./_to-iobject"),o=e("./_object-gopd"),i=e("./_create-property");t(t.S,"Object",{getOwnPropertyDescriptors:function e(t){for(var a=n(t),s=o.f,u=r(a),c={},l=0,f,d;u.length>l;)void 0!==(d=s(a,f=u[l++]))&&i(c,f,d);return c}})},"_own-keys.js":function(e,t,r){var n=e("./_object-gopn"),o=e("./_object-gops"),i=e("./_an-object"),a=e("./_global").Reflect;r.exports=a&&a.ownKeys||function e(t){var r=n.f(i(t)),a=o.f;return a?r.concat(a(t)):r}},"es7.object.values.js":function(e){var t=e("./_export"),r=e("./_object-to-array")(!1);t(t.S,"Object",{values:function e(t){return r(t)}})},"_object-to-array.js":function(e,t,r){var n=e("./_object-keys"),o=e("./_to-iobject"),i=e("./_object-pie").f;r.exports=function(e){return function(t){for(var r=o(t),a=n(r),s=a.length,u=0,c=[],l;s>u;)i.call(r,l=a[u++])&&c.push(e?[l,r[l]]:r[l]);return c}}},"es7.object.entries.js":function(e){var t=e("./_export"),r=e("./_object-to-array")(!0);t(t.S,"Object",{entries:function e(t){return r(t)}})},"es7.object.define-getter.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-object"),n=e("./_a-function"),o=e("./_object-dp");e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__defineGetter__:function e(t,i){o.f(r(this),t,{get:n(i),enumerable:!0,configurable:!0})}})},"_object-forced-pam.js":function(e,t,r){"use strict";r.exports=e("./_library")||!e("./_fails")(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete e("./_global")[t]})},"es7.object.define-setter.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-object"),n=e("./_a-function"),o=e("./_object-dp");e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__defineSetter__:function e(t,i){o.f(r(this),t,{set:n(i),enumerable:!0,configurable:!0})}})},"es7.object.lookup-getter.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-object"),n=e("./_to-primitive"),o=e("./_object-gpo"),i=e("./_object-gopd").f;e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__lookupGetter__:function e(t){var a=r(this),s=n(t,!0),u;do{if(u=i(a,s))return u.get}while(a=o(a))}})},"es7.object.lookup-setter.js":function(e){"use strict";var t=e("./_export"),r=e("./_to-object"),n=e("./_to-primitive"),o=e("./_object-gpo"),i=e("./_object-gopd").f;e("./_descriptors")&&t(t.P+e("./_object-forced-pam"),"Object",{__lookupSetter__:function e(t){var a=r(this),s=n(t,!0),u;do{if(u=i(a,s))return u.set}while(a=o(a))}})},"es6.number.epsilon.js":function(e){var t=e("./_export");t(t.S,"Number",{EPSILON:Math.pow(2,-52)})},"es6.number.is-finite.js":function(e){var t=e("./_export"),r=e("./_global").isFinite;t(t.S,"Number",{isFinite:function e(t){return"number"==typeof t&&r(t)}})},"es6.number.is-integer.js":function(e){var t=e("./_export");t(t.S,"Number",{isInteger:e("./_is-integer")})},"_is-integer.js":function(e,t,r){var n=e("./_is-object"),o=Math.floor;r.exports=function e(t){return!n(t)&&isFinite(t)&&o(t)===t}},"es6.number.is-nan.js":function(e){var t=e("./_export");t(t.S,"Number",{isNaN:function e(t){return t!=t}})},"es6.number.is-safe-integer.js":function(e){var t=e("./_export"),r=e("./_is-integer"),n=Math.abs;t(t.S,"Number",{isSafeInteger:function e(t){return r(t)&&n(t)<=9007199254740991}})},"es6.number.max-safe-integer.js":function(e){var t=e("./_export");t(t.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},"es6.number.min-safe-integer.js":function(e){var t=e("./_export");t(t.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},"es6.number.parse-float.js":function(e){var t=e("./_export"),r=e("./_parse-float");t(t.S+t.F*(Number.parseFloat!=r),"Number",{parseFloat:r})},"_parse-float.js":function(e,t,r){var n=e("./_global").parseFloat,o=e("./_string-trim").trim;r.exports=1/n(e("./_string-ws")+"-0")!=-1/0?function e(t){var r=o(String(t),3),i=n(r);return 0===i&&"-"==r.charAt(0)?-0:i}:n},"es6.number.parse-int.js":function(e){var t=e("./_export"),r=e("./_parse-int");t(t.S+t.F*(Number.parseInt!=r),"Number",{parseInt:r})},"_parse-int.js":function(e,t,r){var n=e("./_global").parseInt,o=e("./_string-trim").trim,i=e("./_string-ws"),a=/^[-+]?0[xX]/;r.exports=8!==n(i+"08")||22!==n(i+"0x16")?function e(t,r){var i=o(String(t),3);return n(i,r>>>0||(a.test(i)?16:10))}:n},"es6.typed.uint8-array.js":function(e){e("./_typed-array")("Uint8",1,function(e){return function t(r,n,o){return e(this,r,n,o)}})},"_typed-array.js":function(e,t,r){"use strict";if(e("./_descriptors")){var n=e("./_library"),o=e("./_global"),i=e("./_fails"),a=e("./_export"),s=e("./_typed"),u=e("./_typed-buffer"),c=e("./_ctx"),l=e("./_an-instance"),f=e("./_property-desc"),d=e("./_hide"),h=e("./_redefine-all"),p=e("./_to-integer"),m=e("./_to-length"),g=e("./_to-index"),v=e("./_to-absolute-index"),_=e("./_to-primitive"),b=e("./_has"),y=e("./_classof"),j=e("./_is-object"),w=e("./_to-object"),x=e("./_is-array-iter"),E=e("./_object-create"),P=e("./_object-gpo"),O=e("./_object-gopn").f,S=e("./core.get-iterator-method"),I=e("./_uid"),T=e("./_wks"),M=e("./_array-methods"),C=e("./_array-includes"),L=e("./_species-constructor"),k=e("./es6.array.iterator"),A=e("./_iterators"),R=e("./_iter-detect"),D=e("./_set-species"),F=e("./_array-fill"),N=e("./_array-copy-within"),U=e("./_object-dp"),V=e("./_object-gopd"),W=U.f,B=V.f,z=o.RangeError,G=o.TypeError,q=o.Uint8Array,H="ArrayBuffer",Y="SharedArrayBuffer",X="BYTES_PER_ELEMENT",K="prototype",J=Array[K],$=u.ArrayBuffer,Q=u.DataView,Z=M(0),ee=M(2),te=M(3),re=M(4),ne=M(5),oe=M(6),ie=C(!0),ae=C(!1),se=k.values,ue=k.keys,ce=k.entries,le=J.lastIndexOf,fe=J.reduce,de=J.reduceRight,he=J.join,pe=J.sort,me=J.slice,ge=J.toString,ve=J.toLocaleString,_e=T("iterator"),be=T("toStringTag"),ye=I("typed_constructor"),je=I("def_constructor"),we=s.CONSTR,xe=s.TYPED,Ee=s.VIEW,Pe="Wrong length!",Oe=M(1,function(e,t){return Ce(L(e,e[je]),t)}),Se=i(function(){return 1===new q(new Uint16Array([1]).buffer)[0]}),Ie=!!q&&!!q[K].set&&i(function(){new q(1).set({})}),Te=function(e,t){var r=p(e);if(r<0||r%t)throw z("Wrong offset!");return r},Me=function(e){if(j(e)&&xe in e)return e;throw G(e+" is not a typed array!")},Ce=function(e,t){if(!(j(e)&&ye in e))throw G("It is not a typed array constructor!");return new e(t)},Le=function(e,t){return ke(L(e,e[je]),t)},ke=function(e,t){for(var r=0,n=t.length,o=Ce(e,n);n>r;)o[r]=t[r++];return o},Ae=function(e,t,r){W(e,t,{get:function(){return this._d[r]}})},Re=function e(t){var r=w(t),n=arguments.length,o=n>1?arguments[1]:void 0,i=void 0!==o,a=S(r),s,u,l,f,d,h;if(void 0!=a&&!x(a)){for(h=a.call(r),l=[],s=0;!(d=h.next()).done;s++)l.push(d.value);r=l}for(i&&n>2&&(o=c(o,arguments[2],2)),s=0,u=m(r.length),f=Ce(this,u);u>s;s++)f[s]=i?o(r[s],s):r[s];return f},De=function e(){for(var t=0,r=arguments.length,n=Ce(this,r);r>t;)n[t]=arguments[t++];return n},Fe=!!q&&i(function(){ve.call(new q(1))}),Ne=function e(){return ve.apply(Fe?me.call(Me(this)):Me(this),arguments)},Ue={copyWithin:function e(t,r){return N.call(Me(this),t,r,arguments.length>2?arguments[2]:void 0)},every:function e(t){return re(Me(this),t,arguments.length>1?arguments[1]:void 0)},fill:function e(t){return F.apply(Me(this),arguments)},filter:function e(t){return Le(this,ee(Me(this),t,arguments.length>1?arguments[1]:void 0))},find:function e(t){return ne(Me(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function e(t){return oe(Me(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function e(t){Z(Me(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function e(t){return ae(Me(this),t,arguments.length>1?arguments[1]:void 0)},includes:function e(t){return ie(Me(this),t,arguments.length>1?arguments[1]:void 0)},join:function e(t){return he.apply(Me(this),arguments)},lastIndexOf:function e(t){return le.apply(Me(this),arguments)},map:function e(t){return Oe(Me(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function e(t){return fe.apply(Me(this),arguments)},reduceRight:function e(t){return de.apply(Me(this),arguments)},reverse:function e(){for(var t=this,r=Me(t).length,n=Math.floor(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t},some:function e(t){return te(Me(this),t,arguments.length>1?arguments[1]:void 0)},sort:function e(t){return pe.call(Me(this),t)},subarray:function e(t,r){var n=Me(this),o=n.length,i=v(t,o);return new(L(n,n[je]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,m((void 0===r?o:v(r,o))-i))}},Ve=function e(t,r){return Le(this,me.call(Me(this),t,r))},We=function e(t){Me(this);var r=Te(arguments[1],1),n=this.length,o=w(t),i=m(o.length),a=0;if(i+r>n)throw z(Pe);for(;a<i;)this[r+a]=o[a++]},Be={entries:function e(){return ce.call(Me(this))},keys:function e(){return ue.call(Me(this))},values:function e(){return se.call(Me(this))}},ze=function(e,t){return j(e)&&e[xe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},Ge=function e(t,r){return ze(t,r=_(r,!0))?f(2,t[r]):B(t,r)},qe=function e(t,r,n){return!(ze(t,r=_(r,!0))&&j(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?W(t,r,n):(t[r]=n.value,t)};we||(V.f=Ge,U.f=qe),a(a.S+a.F*!we,"Object",{getOwnPropertyDescriptor:Ge,defineProperty:qe}),i(function(){ge.call({})})&&(ge=ve=function e(){return he.call(this)});var He=h({},Ue);h(He,Be),d(He,_e,Be.values),h(He,{slice:Ve,set:We,constructor:function(){},toString:ge,toLocaleString:Ne}),Ae(He,"buffer","b"),Ae(He,"byteOffset","o"),Ae(He,"byteLength","l"),Ae(He,"length","e"),W(He,be,{get:function(){return this[xe]}}),r.exports=function(e,t,r,u){var c=e+((u=!!u)?"Clamped":"")+"Array",f="get"+e,h="set"+e,p=o[c],v=p||{},_=p&&P(p),b=!p||!s.ABV,w={},x=p&&p[K],S=function(e,r){var n=e._d;return n.v[f](r*t+n.o,Se)},I=function(e,r,n){var o=e._d;u&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),o.v[h](r*t+o.o,n,Se)},T=function(e,t){W(e,t,{get:function(){return S(this,t)},set:function(e){return I(this,t,e)},enumerable:!0})};b?(p=r(function(e,r,n,o){l(e,p,c,"_d");var i=0,a=0,s,u,f,h;if(j(r)){if(!(r instanceof $||(h=y(r))==H||h==Y))return xe in r?ke(p,r):Re.call(p,r);s=r,a=Te(n,t);var v=r.byteLength;if(void 0===o){if(v%t)throw z(Pe);if((u=v-a)<0)throw z(Pe)}else if((u=m(o)*t)+a>v)throw z(Pe);f=u/t}else f=g(r),s=new $(u=f*t);for(d(e,"_d",{b:s,o:a,l:u,e:f,v:new Q(s)});i<f;)T(e,i++)}),x=p[K]=E(He),d(x,"constructor",p)):i(function(){p(1)})&&i(function(){new p(-1)})&&R(function(e){new p,new p(null),new p(1.5),new p(e)},!0)||(p=r(function(e,r,n,o){l(e,p,c);var i;return j(r)?r instanceof $||(i=y(r))==H||i==Y?void 0!==o?new v(r,Te(n,t),o):void 0!==n?new v(r,Te(n,t)):new v(r):xe in r?ke(p,r):Re.call(p,r):new v(g(r))}),Z(_!==Function.prototype?O(v).concat(O(_)):O(v),function(e){e in p||d(p,e,v[e])}),p[K]=x,n||(x.constructor=p));var M=x[_e],C=!!M&&("values"==M.name||void 0==M.name),L=Be.values;d(p,ye,!0),d(x,xe,c),d(x,Ee,!0),d(x,je,p),(u?new p(1)[be]==c:be in x)||W(x,be,{get:function(){return c}}),w[c]=p,a(a.G+a.W+a.F*(p!=v),w),a(a.S,c,{BYTES_PER_ELEMENT:t}),a(a.S+a.F*i(function(){v.of.call(p,1)}),c,{from:Re,of:De}),X in x||d(x,X,t),a(a.P,c,Ue),D(c),a(a.P+a.F*Ie,c,{set:We}),a(a.P+a.F*!C,c,Be),n||x.toString==ge||(x.toString=ge),a(a.P+a.F*i(function(){new p(1).slice()}),c,{slice:Ve}),a(a.P+a.F*(i(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!i(function(){x.toLocaleString.call([1,2])})),c,{toLocaleString:Ne}),A[c]=C?M:L,n||C||d(x,_e,L)}}else r.exports=function(){}},"_typed.js":function(e,t,r){for(var n=e("./_global"),o=e("./_hide"),i=e("./_uid"),a=i("typed_array"),s=i("view"),u=!(!n.ArrayBuffer||!n.DataView),c=u,l=0,f=9,d,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<9;)(d=n[h[l++]])?(o(d.prototype,a,!0),o(d.prototype,s,!0)):c=!1;r.exports={ABV:u,CONSTR:c,TYPED:a,VIEW:s}},"_typed-buffer.js":function(e,t){"use strict";function r(e,t,r){var n=new Array(r),o=8*r-t-1,i=(1<<o)-1,a=i>>1,s=23===t?V(2,-24)-V(2,-77):0,u=0,c=e<0||0===e&&1/e<0?1:0,l,f,d;for((e=U(e))!=e||e===F?(f=e!=e?1:0,l=i):(l=W(B(e)/z),e*(d=V(2,-l))<1&&(l--,d*=2),(e+=l+a>=1?s/d:s*V(2,1-a))*d>=2&&(l++,d/=2),l+a>=i?(f=0,l=i):l+a>=1?(f=(e*d-1)*V(2,t),l+=a):(f=e*V(2,a-1)*V(2,t),l=0));t>=8;n[u++]=255&f,f/=256,t-=8);for(l=l<<t|f,o+=t;o>0;n[u++]=255&l,l/=256,o-=8);return n[--u]|=128*c,n}function n(e,t,r){var n=8*r-t-1,o=(1<<n)-1,i=o>>1,a=n-7,s=r-1,u=e[s--],c=127&u,l;for(u>>=7;a>0;c=256*c+e[s],s--,a-=8);for(l=c&(1<<-a)-1,c>>=-a,a+=t;a>0;l=256*l+e[s],s--,a-=8);if(0===c)c=1-i;else{if(c===o)return l?NaN:u?-F:F;l+=V(2,t),c-=i}return(u?-1:1)*l*V(2,c-t)}function o(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]}function i(e){return[255&e]}function a(e){return[255&e,e>>8&255]}function s(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]}function u(e){return r(e,52,8)}function c(e){return r(e,23,4)}function l(e,t,r){P(e[M],t,{get:function(){return this[r]}})}function f(e,t,r,n){var o=x(+r);if(o+t>e[X])throw D(L);var i=e[Y]._b,a=o+e[K],s=i.slice(a,a+t);return n?s:s.reverse()}function d(e,t,r,n,o,i){var a=x(+r);if(a+t>e[X])throw D(L);for(var s=e[Y]._b,u=a+e[K],c=n(+o),l=0;l<t;l++)s[u+l]=c[i?l:t-l-1]}var h=e("./_global"),p=e("./_descriptors"),m=e("./_library"),g=e("./_typed"),v=e("./_hide"),_=e("./_redefine-all"),b=e("./_fails"),y=e("./_an-instance"),j=e("./_to-integer"),w=e("./_to-length"),x=e("./_to-index"),E=e("./_object-gopn").f,P=e("./_object-dp").f,O=e("./_array-fill"),S=e("./_set-to-string-tag"),I="ArrayBuffer",T="DataView",M="prototype",C="Wrong length!",L="Wrong index!",k=h[I],A=h[T],R=h.Math,D=h.RangeError,F=h.Infinity,N=k,U=R.abs,V=R.pow,W=R.floor,B=R.log,z=R.LN2,G="buffer",q="byteLength",H="byteOffset",Y=p?"_b":G,X=p?"_l":q,K=p?"_o":H;if(g.ABV){if(!b(function(){k(1)})||!b(function(){new k(-1)})||b(function(){return new k,new k(1.5),new k(NaN),k.name!=I})){for(var J=(k=function e(t){return y(this,k),new N(x(t))})[M]=N[M],$=E(N),Q=0,Z;$.length>Q;)(Z=$[Q++])in k||v(k,Z,N[Z]);m||(J.constructor=k)}var ee=new A(new k(2)),te=A[M].setInt8;ee.setInt8(0,2147483648),ee.setInt8(1,2147483649),!ee.getInt8(0)&&ee.getInt8(1)||_(A[M],{setInt8:function e(t,r){te.call(this,t,r<<24>>24)},setUint8:function e(t,r){te.call(this,t,r<<24>>24)}},!0)}else k=function e(t){y(this,k,I);var r=x(t);this._b=O.call(new Array(r),0),this[X]=r},A=function e(t,r,n){y(this,A,T),y(t,k,T);var o=t[X],i=j(r);if(i<0||i>o)throw D("Wrong offset!");if(n=void 0===n?o-i:w(n),i+n>o)throw D(C);this[Y]=t,this[K]=i,this[X]=n},p&&(l(k,q,"_l"),l(A,G,"_b"),l(A,q,"_l"),l(A,H,"_o")),_(A[M],{getInt8:function e(t){return f(this,1,t)[0]<<24>>24},getUint8:function e(t){return f(this,1,t)[0]},getInt16:function e(t){var r=f(this,2,t,arguments[1]);return(r[1]<<8|r[0])<<16>>16},getUint16:function e(t){var r=f(this,2,t,arguments[1]);return r[1]<<8|r[0]},getInt32:function e(t){return o(f(this,4,t,arguments[1]))},getUint32:function e(t){return o(f(this,4,t,arguments[1]))>>>0},getFloat32:function e(t){return n(f(this,4,t,arguments[1]),23,4)},getFloat64:function e(t){return n(f(this,8,t,arguments[1]),52,8)},setInt8:function e(t,r){d(this,1,t,i,r)},setUint8:function e(t,r){d(this,1,t,i,r)},setInt16:function e(t,r){d(this,2,t,a,r,arguments[2])},setUint16:function e(t,r){d(this,2,t,a,r,arguments[2])},setInt32:function e(t,r){d(this,4,t,s,r,arguments[2])},setUint32:function e(t,r){d(this,4,t,s,r,arguments[2])},setFloat32:function e(t,r){d(this,4,t,c,r,arguments[2])},setFloat64:function e(t,r){d(this,8,t,u,r,arguments[2])}});S(k,I),S(A,T),v(A[M],g.VIEW,!0),t[I]=k,t[T]=A},"_to-index.js":function(e,t,r){var n=e("./_to-integer"),o=e("./_to-length");r.exports=function(e){if(void 0===e)return 0;var t=n(e),r=o(t);if(t!==r)throw RangeError("Wrong length!");return r}},"_species-constructor.js":function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");r.exports=function(e,t){var r=n(e).constructor,a;return void 0===r||void 0==(a=n(r)[i])?t:o(a)}},"es6.typed.uint32-array.js":function(e){e("./_typed-array")("Uint32",4,function(e){return function t(r,n,o){return e(this,r,n,o)}})}},es6:{"array.js":function(e,t,r){e("../modules/es6.string.iterator"),e("../modules/es6.array.is-array"),e("../modules/es6.array.from"),e("../modules/es6.array.of"),e("../modules/es6.array.join"),e("../modules/es6.array.slice"),e("../modules/es6.array.sort"),e("../modules/es6.array.for-each"),e("../modules/es6.array.map"),e("../modules/es6.array.filter"),e("../modules/es6.array.some"),e("../modules/es6.array.every"),e("../modules/es6.array.reduce"),e("../modules/es6.array.reduce-right"),e("../modules/es6.array.index-of"),e("../modules/es6.array.last-index-of"),e("../modules/es6.array.copy-within"),e("../modules/es6.array.fill"),e("../modules/es6.array.find"),e("../modules/es6.array.find-index"),e("../modules/es6.array.species"),e("../modules/es6.array.iterator"),r.exports=e("../modules/_core").Array},"function.js":function(e,t,r){e("../modules/es6.function.bind"),e("../modules/es6.function.name"),e("../modules/es6.function.has-instance"),r.exports=e("../modules/_core").Function},"math.js":function(e,t,r){e("../modules/es6.math.acosh"),e("../modules/es6.math.asinh"),e("../modules/es6.math.atanh"),e("../modules/es6.math.cbrt"),e("../modules/es6.math.clz32"),e("../modules/es6.math.cosh"),e("../modules/es6.math.expm1"),e("../modules/es6.math.fround"),e("../modules/es6.math.hypot"),e("../modules/es6.math.imul"),e("../modules/es6.math.log10"),e("../modules/es6.math.log1p"),e("../modules/es6.math.log2"),e("../modules/es6.math.sign"),e("../modules/es6.math.sinh"),e("../modules/es6.math.tanh"),e("../modules/es6.math.trunc"),r.exports=e("../modules/_core").Math},"object.js":function(e,t,r){e("../modules/es6.symbol"),e("../modules/es6.object.create"),e("../modules/es6.object.define-property"),e("../modules/es6.object.define-properties"),e("../modules/es6.object.get-own-property-descriptor"),e("../modules/es6.object.get-prototype-of"),e("../modules/es6.object.keys"),e("../modules/es6.object.get-own-property-names"),e("../modules/es6.object.freeze"),e("../modules/es6.object.seal"),e("../modules/es6.object.prevent-extensions"),e("../modules/es6.object.is-frozen"),e("../modules/es6.object.is-sealed"),e("../modules/es6.object.is-extensible"),e("../modules/es6.object.assign"),e("../modules/es6.object.is"),e("../modules/es6.object.set-prototype-of"),e("../modules/es6.object.to-string"),r.exports=e("../modules/_core").Object},"regexp.js":function(e,t,r){e("../modules/es6.regexp.constructor"),e("../modules/es6.regexp.to-string"),e("../modules/es6.regexp.flags"),e("../modules/es6.regexp.match"),e("../modules/es6.regexp.replace"),e("../modules/es6.regexp.search"),e("../modules/es6.regexp.split"),r.exports=e("../modules/_core").RegExp},"string.js":function(e,t,r){e("../modules/es6.string.from-code-point"),e("../modules/es6.string.raw"),e("../modules/es6.string.trim"),e("../modules/es6.string.iterator"),e("../modules/es6.string.code-point-at"),e("../modules/es6.string.ends-with"),e("../modules/es6.string.includes"),e("../modules/es6.string.repeat"),e("../modules/es6.string.starts-with"),e("../modules/es6.string.anchor"),e("../modules/es6.string.big"),e("../modules/es6.string.blink"),e("../modules/es6.string.bold"),e("../modules/es6.string.fixed"),e("../modules/es6.string.fontcolor"),e("../modules/es6.string.fontsize"),e("../modules/es6.string.italics"),e("../modules/es6.string.link"),e("../modules/es6.string.small"),e("../modules/es6.string.strike"),e("../modules/es6.string.sub"),e("../modules/es6.string.sup"),e("../modules/es6.regexp.match"),e("../modules/es6.regexp.replace"),e("../modules/es6.regexp.search"),e("../modules/es6.regexp.split"),r.exports=e("../modules/_core").String},"weak-map.js":function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.array.iterator"),e("../modules/es6.weak-map"),r.exports=e("../modules/_core").WeakMap},"weak-set.js":function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/web.dom.iterable"),e("../modules/es6.weak-set"),r.exports=e("../modules/_core").WeakSet}},es7:{"array.js":function(e,t,r){e("../modules/es7.array.includes"),e("../modules/es7.array.flat-map"),e("../modules/es7.array.flatten"),r.exports=e("../modules/_core").Array},"object.js":function(e,t,r){e("../modules/es7.object.get-own-property-descriptors"),e("../modules/es7.object.values"),e("../modules/es7.object.entries"),e("../modules/es7.object.define-getter"),e("../modules/es7.object.define-setter"),e("../modules/es7.object.lookup-getter"),e("../modules/es7.object.lookup-setter"),r.exports=e("../modules/_core").Object}},library:{fn:{symbol:{"iterator.js":function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/web.dom.iterable"),r.exports=e("../../modules/_wks-ext").f("iterator")},"index.js":function(e,t,r){e("../../modules/es6.symbol"),e("../../modules/es6.object.to-string"),e("../../modules/es7.symbol.async-iterator"),e("../../modules/es7.symbol.observable"),r.exports=e("../../modules/_core").Symbol}},array:{"from.js":function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),r.exports=e("../../modules/_core").Array.from}},object:{"set-prototype-of.js":function(e,t,r){e("../../modules/es6.object.set-prototype-of"),r.exports=e("../../modules/_core").Object.setPrototypeOf},"create.js":function(e,t,r){e("../../modules/es6.object.create");var n=e("../../modules/_core").Object;r.exports=function e(t,r){return n.create(t,r)}},"define-property.js":function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;r.exports=function e(t,r,o){return n.defineProperty(t,r,o)}},"assign.js":function(e,t,r){e("../../modules/es6.object.assign"),r.exports=e("../../modules/_core").Object.assign}},"is-iterable.js":function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),r.exports=e("../modules/core.is-iterable")},"get-iterator.js":function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),r.exports=e("../modules/core.get-iterator")}},modules:{"es6.string.iterator.js":function(e){"use strict";var t=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,r=this._i,n;return r>=e.length?{value:void 0,done:!0}:(n=t(e,r),this._i+=n.length,{value:n,done:!1})})},"_string-at.js":function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");r.exports=function(e){return function(t,r){var i=String(o(t)),a=n(r),s=i.length,u,c;return a<0||a>=s?e?"":void 0:(u=i.charCodeAt(a))<55296||u>56319||a+1===s||(c=i.charCodeAt(a+1))<56320||c>57343?e?i.charAt(a):u:e?i.slice(a,a+2):c-56320+(u-55296<<10)+65536}}},"_to-integer.js":function(e,t,r){var n=Math.ceil,o=Math.floor;r.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},"_defined.js":function(e,t,r){r.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"_iter-define.js":function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),u=e("./_iterators"),c=e("./_iter-create"),l=e("./_set-to-string-tag"),f=e("./_object-gpo"),d=e("./_wks")("iterator"),h=!([].keys&&"next"in[].keys()),p="@@iterator",m="keys",g="values",v=function(){return this};r.exports=function(e,t,r,_,b,y,j){c(r,t,_);var w=function(e){if(!h&&e in O)return O[e];switch(e){case m:return function t(){return new r(this,e)};case g:return function t(){return new r(this,e)}}return function t(){return new r(this,e)}},x=t+" Iterator",E=b==g,P=!1,O=e.prototype,S=O[d]||O[p]||b&&O[b],I=!h&&S||w(b),T=b?E?w("entries"):I:void 0,M="Array"==t?O.entries||S:S,C,L,k;if(M&&(k=f(M.call(new e)))!==Object.prototype&&k.next&&(l(k,x,!0),n||s(k,d)||a(k,d,v)),E&&S&&S.name!==g&&(P=!0,I=function e(){return S.call(this)}),n&&!j||!h&&!P&&O[d]||a(O,d,I),u[t]=I,u[x]=v,b)if(C={values:E?I:w(g),keys:y?I:w(m),entries:T},j)for(L in C)L in O||i(O,L,C[L]);else o(o.P+o.F*(h||P),t,C);return C}},"_library.js":function(e,t,r){r.exports=!0},"_export.js":function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s="prototype",u=function(e,t,r){var c=e&u.F,l=e&u.G,f=e&u.S,d=e&u.P,h=e&u.B,p=e&u.W,m=l?o:o[t]||(o[t]={}),g=m[s],v=l?n:f?n[t]:(n[t]||{})[s],_,b,y;l&&(r=t);for(_ in r)(b=!c&&v&&void 0!==v[_])&&_ in m||(y=b?v[_]:r[_],m[_]=l&&"function"!=typeof v[_]?r[_]:h&&b?i(y,n):p&&v[_]==y?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(y):d&&"function"==typeof y?i(Function.call,y):y,d&&((m.virtual||(m.virtual={}))[_]=y,e&u.R&&g&&!g[_]&&a(g,_,y)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,r.exports=u},"_global.js":function(e,t,r){var n=r.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"_core.js":function(e,t,r){var n=r.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},"_ctx.js":function(e,t,r){var n=e("./_a-function");r.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},"_a-function.js":function(e,t,r){r.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"_hide.js":function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");r.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},"_object-dp.js":function(e,t){var r=e("./_an-object"),n=e("./_ie8-dom-define"),o=e("./_to-primitive"),i=Object.defineProperty;t.f=e("./_descriptors")?Object.defineProperty:function e(t,a,s){if(r(t),a=o(a,!0),r(s),n)try{return i(t,a,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[a]=s.value),t}},"_an-object.js":function(e,t,r){var n=e("./_is-object");r.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"_is-object.js":function(e,t,r){r.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"_ie8-dom-define.js":function(e,t,r){r.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},"_descriptors.js":function(e,t,r){r.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"_fails.js":function(e,t,r){r.exports=function(e){try{return!!e()}catch(e){return!0}}},"_dom-create.js":function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);r.exports=function(e){return i?o.createElement(e):{}}},"_to-primitive.js":function(e,t,r){var n=e("./_is-object");r.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},"_property-desc.js":function(e,t,r){r.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"_redefine.js":function(e,t,r){r.exports=e("./_hide")},"_has.js":function(e,t,r){var n={}.hasOwnProperty;r.exports=function(e,t){return n.call(e,t)}},"_iterators.js":function(e,t,r){r.exports={}},"_iter-create.js":function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),r.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},"_object-create.js":function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},u="prototype",c=function(){var t=e("./_dom-create")("iframe"),r=i.length,n="<",o=">",a;for(t.style.display="none",e("./_html").appendChild(t),t.src="javascript:",(a=t.contentWindow.document).open(),a.write("<script>document.F=Object<\/script>"),a.close(),c=a.F;r--;)delete c[u][i[r]];return c()};r.exports=Object.create||function e(t,r){var i;return null!==t?(s[u]=n(t),i=new s,s[u]=null,i[a]=t):i=c(),void 0===r?i:o(i,r)}},"_object-dps.js":function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");r.exports=e("./_descriptors")?Object.defineProperties:function e(t,r){o(t);for(var a=i(r),s=a.length,u=0,c;s>u;)n.f(t,c=a[u++],r[c]);return t}},"_object-keys.js":function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");r.exports=Object.keys||function e(t){return n(t,o)}},"_object-keys-internal.js":function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");r.exports=function(e,t){var r=o(e),s=0,u=[],c;for(c in r)c!=a&&n(r,c)&&u.push(c);for(;t.length>s;)n(r,c=t[s++])&&(~i(u,c)||u.push(c));return u}},"_to-iobject.js":function(e,t,r){var n=e("./_iobject"),o=e("./_defined");r.exports=function(e){return n(o(e))}},"_iobject.js":function(e,t,r){var n=e("./_cof");r.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"_cof.js":function(e,t,r){var n={}.toString;r.exports=function(e){return n.call(e).slice(8,-1)}},"_array-includes.js":function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");r.exports=function(e){return function(t,r,a){var s=n(t),u=o(s.length),c=i(a,u),l;if(e&&r!=r){for(;u>c;)if((l=s[c++])!=l)return!0}else for(;u>c;c++)if((e||c in s)&&s[c]===r)return e||c||0;return!e&&-1}}},"_to-length.js":function(e,t,r){var n=e("./_to-integer"),o=Math.min;r.exports=function(e){return e>0?o(n(e),9007199254740991):0}},"_to-absolute-index.js":function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;r.exports=function(e,t){return(e=n(e))<0?o(e+t,0):i(e,t)}},"_shared-key.js":function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");r.exports=function(e){return n[e]||(n[e]=o(e))}},"_shared.js":function(e,t,r){var n=e("./_global"),o="__core-js_shared__",i=n[o]||(n[o]={});r.exports=function(e){return i[e]||(i[e]={})}},"_uid.js":function(e,t,r){var n=0,o=Math.random();r.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},"_enum-bug-keys.js":function(e,t,r){r.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"_html.js":function(e,t,r){var n=e("./_global").document;r.exports=n&&n.documentElement},"_set-to-string-tag.js":function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");r.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},"_wks.js":function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(r.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},"_object-gpo.js":function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;r.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"_to-object.js":function(e,t,r){var n=e("./_defined");r.exports=function(e){return Object(n(e))}},"web.dom.iterable.js":function(e){e("./es6.array.iterator");for(var t=e("./_global"),r=e("./_hide"),n=e("./_iterators"),o=e("./_wks")("toStringTag"),i="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),a=0;a<i.length;a++){var s=i[a],u=t[s],c=u&&u.prototype;c&&!c[o]&&r(c,o,s),n[s]=n.Array}},"es6.array.iterator.js":function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");r.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},"_add-to-unscopables.js":function(e,t,r){r.exports=function(){}},"_iter-step.js":function(e,t,r){r.exports=function(e,t){return{value:t,done:!!e}}},"_wks-ext.js":function(e,t){t.f=e("./_wks")},"es6.symbol.js":function(e){"use strict";var t=e("./_global"),r=e("./_has"),n=e("./_descriptors"),o=e("./_export"),i=e("./_redefine"),a=e("./_meta").KEY,s=e("./_fails"),u=e("./_shared"),c=e("./_set-to-string-tag"),l=e("./_uid"),f=e("./_wks"),d=e("./_wks-ext"),h=e("./_wks-define"),p=e("./_enum-keys"),m=e("./_is-array"),g=e("./_an-object"),v=e("./_is-object"),_=e("./_to-iobject"),b=e("./_to-primitive"),y=e("./_property-desc"),j=e("./_object-create"),w=e("./_object-gopn-ext"),x=e("./_object-gopd"),E=e("./_object-dp"),P=e("./_object-keys"),O=x.f,S=E.f,I=w.f,T=t.Symbol,M=t.JSON,C=M&&M.stringify,L="prototype",k=f("_hidden"),A=f("toPrimitive"),R={}.propertyIsEnumerable,D=u("symbol-registry"),F=u("symbols"),N=u("op-symbols"),U=Object[L],V="function"==typeof T,W=t.QObject,B=!W||!W[L]||!W[L].findChild,z=n&&s(function(){return 7!=j(S({},"a",{get:function(){return S(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=O(U,t);n&&delete U[t],S(e,t,r),n&&e!==U&&S(U,t,n)}:S,G=function(e){var t=F[e]=j(T[L]);return t._k=e,t},q=V&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},H=function e(t,n,o){return t===U&&H(N,n,o),g(t),n=b(n,!0),g(o),r(F,n)?(o.enumerable?(r(t,k)&&t[k][n]&&(t[k][n]=!1),o=j(o,{enumerable:y(0,!1)})):(r(t,k)||S(t,k,y(1,{})),t[k][n]=!0),z(t,n,o)):S(t,n,o)},Y=function e(t,r){g(t);for(var n=p(r=_(r)),o=0,i=n.length,a;i>o;)H(t,a=n[o++],r[a]);return t},X=function e(t,r){return void 0===r?j(t):Y(j(t),r)},K=function e(t){var n=R.call(this,t=b(t,!0));return!(this===U&&r(F,t)&&!r(N,t))&&(!(n||!r(this,t)||!r(F,t)||r(this,k)&&this[k][t])||n)},J=function e(t,n){if(t=_(t),n=b(n,!0),t!==U||!r(F,n)||r(N,n)){var o=O(t,n);return!o||!r(F,n)||r(t,k)&&t[k][n]||(o.enumerable=!0),o}},$=function e(t){for(var n=I(_(t)),o=[],i=0,s;n.length>i;)r(F,s=n[i++])||s==k||s==a||o.push(s);return o},Q=function e(t){for(var n=t===U,o=I(n?N:_(t)),i=[],a=0,s;o.length>a;)!r(F,s=o[a++])||n&&!r(U,s)||i.push(F[s]);return i};V||(i((T=function e(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=l(arguments.length>0?arguments[0]:void 0),o=function(e){this===U&&o.call(N,e),r(this,k)&&r(this[k],t)&&(this[k][t]=!1),z(this,t,y(1,e))};return n&&B&&z(U,t,{configurable:!0,set:o}),G(t)})[L],"toString",function e(){return this._k}),x.f=J,E.f=H,e("./_object-gopn").f=w.f=$,e("./_object-pie").f=K,e("./_object-gops").f=Q,n&&!e("./_library")&&i(U,"propertyIsEnumerable",K,!0),d.f=function(e){return G(f(e))}),o(o.G+o.W+o.F*!V,{Symbol:T});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)f(Z[ee++]);for(var te=P(f.store),re=0;te.length>re;)h(te[re++]);o(o.S+o.F*!V,"Symbol",{for:function(e){return r(D,e+="")?D[e]:D[e]=T(e)},keyFor:function e(t){if(!q(t))throw TypeError(t+" is not a symbol!");for(var r in D)if(D[r]===t)return r},useSetter:function(){B=!0},useSimple:function(){B=!1}}),o(o.S+o.F*!V,"Object",{create:X,defineProperty:H,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:$,getOwnPropertySymbols:Q}),M&&o(o.S+o.F*(!V||s(function(){var e=T();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function e(t){for(var r=[t],n=1,o,i;arguments.length>n;)r.push(arguments[n++]);if(i=o=r[1],(v(o)||void 0!==t)&&!q(t))return m(o)||(o=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!q(t))return t}),r[1]=o,C.apply(M,r)}}),T[L][A]||e("./_hide")(T[L],A,T[L].valueOf),c(T,"Symbol"),c(Math,"Math",!0),c(t.JSON,"JSON",!0)},"_meta.js":function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!e("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},d=function(e,t){if(!i(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return c&&p.NEED&&u(e)&&!i(e,n)&&l(e),e},p=r.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},"_wks-define.js":function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_library"),a=e("./_wks-ext"),s=e("./_object-dp").f;r.exports=function(e){var t=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"_enum-keys.js":function(e,t,r){var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie");r.exports=function(e){var t=n(e),r=o.f;if(r)for(var a=r(e),s=i.f,u=0,c;a.length>u;)s.call(e,c=a[u++])&&t.push(c);return t}},"_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"_is-array.js":function(e,t,r){var n=e("./_cof");r.exports=Array.isArray||function e(t){return"Array"==n(t)}},"_object-gopn-ext.js":function(e,t,r){var n=e("./_to-iobject"),o=e("./_object-gopn").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return a.slice()}};r.exports.f=function e(t){return a&&"[object Window]"==i.call(t)?s(t):o(n(t))}},"_object-gopn.js":function(e,t){var r=e("./_object-keys-internal"),n=e("./_enum-bug-keys").concat("length","prototype");t.f=Object.getOwnPropertyNames||function e(t){return r(t,n)}},"_object-gopd.js":function(e,t){var r=e("./_object-pie"),n=e("./_property-desc"),o=e("./_to-iobject"),i=e("./_to-primitive"),a=e("./_has"),s=e("./_ie8-dom-define"),u=Object.getOwnPropertyDescriptor;t.f=e("./_descriptors")?u:function e(t,c){if(t=o(t),c=i(c,!0),s)try{return u(t,c)}catch(e){}if(a(t,c))return n(!r.f.call(t,c),t[c])}},"es6.object.to-string.js":function(){},"es7.symbol.async-iterator.js":function(e){e("./_wks-define")("asyncIterator")},"es7.symbol.observable.js":function(e){e("./_wks-define")("observable")},"es6.array.from.js":function(e){"use strict";var t=e("./_ctx"),r=e("./_export"),n=e("./_to-object"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_to-length"),s=e("./_create-property"),u=e("./core.get-iterator-method");r(r.S+r.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function e(r){var c=n(r),l="function"==typeof this?this:Array,f=arguments.length,d=f>1?arguments[1]:void 0,h=void 0!==d,p=0,m=u(c),g,v,_,b;if(h&&(d=t(d,f>2?arguments[2]:void 0,2)),void 0==m||l==Array&&i(m))for(v=new l(g=a(c.length));g>p;p++)s(v,p,h?d(c[p],p):c[p]);else for(b=m.call(c),v=new l;!(_=b.next()).done;p++)s(v,p,h?o(b,d,[_.value,p],!0):_.value);return v.length=p,v}})},"_iter-call.js":function(e,t,r){var n=e("./_an-object");r.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},"_is-array-iter.js":function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;r.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},"_create-property.js":function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");r.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},"core.get-iterator-method.js":function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");r.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},"_classof.js":function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};r.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},"_iter-detect.js":function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}r.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},"es6.object.set-prototype-of.js":function(e){var t=e("./_export");t(t.S,"Object",{setPrototypeOf:e("./_set-proto").set})},"_set-proto.js":function(e,t,r){var n=e("./_is-object"),o=e("./_an-object"),i=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};r.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,r,n){try{(n=e("./_ctx")(Function.call,e("./_object-gopd").f(Object.prototype,"__proto__").set,2))(t,[]),r=!(t instanceof Array)}catch(e){r=!0}return function e(t,o){return i(t,o),r?t.__proto__=o:n(t,o),t}}({},!1):void 0),check:i}},"es6.object.create.js":function(e){var t=e("./_export");t(t.S,"Object",{create:e("./_object-create")})},"core.is-iterable.js":function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");r.exports=e("./_core").isIterable=function(e){var t=Object(e);return void 0!==t[o]||"@@iterator"in t||i.hasOwnProperty(n(t))}},"core.get-iterator.js":function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");r.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},"es6.object.define-property.js":function(e){var t=e("./_export");t(t.S+t.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},"es6.object.assign.js":function(e){var t=e("./_export");t(t.S+t.F,"Object",{assign:e("./_object-assign")})},"_object-assign.js":function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),u=Object.assign;r.exports=!u||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function e(t,r){for(var u=a(t),c=arguments.length,l=1,f=o.f,d=i.f;c>l;)for(var h=s(arguments[l++]),p=f?n(h).concat(f(h)):n(h),m=p.length,g=0,v;m>g;)d.call(h,v=p[g++])&&(u[v]=h[v]);return u}:u}}}},"xml-writer":{"package.json":function(e,t){t.name="xml-writer",t.version="1.7.0",t.main="./index.js"},"index.js":function(e,t,r){r.exports=e("./lib/xml-writer.js")},lib:{"xml-writer.js":function(e,t,r){function n(e){return"number"!=typeof e&&!e}function o(e){if("string"==typeof e)return e;if("number"==typeof e)return e+"";if("function"==typeof e)return e();if(e instanceof i)return e.toString();throw Error("Bad Parameter")}function i(e,t){if(!(this instanceof i))return new i;this.name_regex=/[_:A-Za-z][-._:A-Za-z0-9]*/,this.indent=!!e,this.indentString=this.indent&&"string"==typeof e?e:"    ",this.output="",this.stack=[],this.tags=0,this.attributes=0,this.attribute=0,this.texts=0,this.comment=0,this.dtd=0,this.root="",this.pi=0,this.cdata=0,this.started_write=!1,this.writer,this.writer_encoding="UTF-8",this.writer="function"==typeof t?t:function(e,t){this.output+=e}}i.prototype={toString:function(){return this.flush(),this.output},indenter:function(){if(this.indent){this.write("\n");for(var e=1;e<this.tags;e++)this.write(this.indentString)}},write:function(){for(var e=0;e<arguments.length;e++)this.writer(arguments[e],this.writer_encoding)},flush:function(){for(var e=this.tags;e>0;e--)this.endElement();this.tags=0},startDocument:function(e,t,r){return this.tags||this.attributes?this:(this.startPI("xml"),this.startAttribute("version"),this.text("string"==typeof e?e:"1.0"),this.endAttribute(),"string"==typeof t&&(this.startAttribute("encoding"),this.text(t),this.endAttribute(),this.writer_encoding=t),r&&(this.startAttribute("standalone"),this.text("yes"),this.endAttribute()),this.endPI(),this.indent||this.write("\n"),this)},endDocument:function(){return this.attributes&&this.endAttributes(),this},writeElement:function(e,t){return this.startElement(e).text(t).endElement()},writeElementNS:function(e,t,r,n){return n||(n=r),this.startElementNS(e,t,r).text(n).endElement()},startElement:function(e){if(!(e=o(e)).match(this.name_regex))throw Error("Invalid Parameter");if(0===this.tags&&this.root&&this.root!==e)throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:e,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",e),this.startAttributes(),this.started_write=!0,this},startElementNS:function(e,t,r){if(e=o(e),t=o(t),!e.match(this.name_regex))throw Error("Invalid Parameter");if(!t.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes&&this.endAttributes(),++this.tags,this.texts=0,this.stack.length>0&&(this.stack[this.stack.length-1].containsTag=!0),this.stack.push({name:e+":"+t,tags:this.tags}),this.started_write&&this.indenter(),this.write("<",e+":"+t),this.startAttributes(),this.started_write=!0,this},endElement:function(){if(!this.tags)return this;var e=this.stack.pop();return this.attributes>0?(this.attribute&&(this.texts&&this.endAttribute(),this.endAttribute()),this.write("/"),this.endAttributes()):(e.containsTag&&this.indenter(),this.write("</",e.name,">")),--this.tags,this.texts=0,this},writeAttribute:function(e,t){return"function"==typeof t&&(t=t()),n(t)?this:this.startAttribute(e).text(t).endAttribute()},writeAttributeNS:function(e,t,r,o){return o||(o=r),"function"==typeof o&&(o=o()),n(o)?this:this.startAttributeNS(e,t,r).text(o).endAttribute()},startAttributes:function(){return this.attributes=1,this},endAttributes:function(){return this.attributes?(this.attribute&&this.endAttribute(),this.attributes=0,this.attribute=0,this.texts=0,this.write(">"),this):this},startAttribute:function(e){if(!(e=o(e)).match(this.name_regex))throw Error("Invalid Parameter");return this.attributes||this.pi?this.attribute?this:(this.attribute=1,this.write(" ",e,'="'),this):this},startAttributeNS:function(e,t,r){if(e=o(e),t=o(t),!e.match(this.name_regex))throw Error("Invalid Parameter");if(!t.match(this.name_regex))throw Error("Invalid Parameter");return this.attributes||this.pi?this.attribute?this:(this.attribute=1,this.write(" ",e+":"+t,'="'),this):this},endAttribute:function(){return this.attribute?(this.attribute=0,this.texts=0,this.write('"'),this):this},text:function(e){return e=o(e),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),this.comment||this.cdata?this.write(e):this.write(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),++this.texts,this.started_write=!0,this):this},writeComment:function(e){return this.startComment().text(e).endComment()},startComment:function(){return this.comment?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("\x3c!--"),this.comment=1,this.started_write=!0,this)},endComment:function(){return this.comment?(this.write("--\x3e"),this.comment=0,this):this},writeDocType:function(e,t,r,n){return this.startDocType(e,t,r,n).endDocType()},startDocType:function(e,t,r,n){if(this.dtd||this.tags)return this;if(e=o(e),t=t?o(t):t,r=r?o(r):r,n=n?o(n):n,!e.match(this.name_regex))throw Error("Invalid Parameter");if(t&&!t.match(/^[\w\-][\w\s\-\/\+\:\.]*/))throw Error("Invalid Parameter");if(r&&!r.match(/^[\w\.][\w\-\/\\\:\.]*/))throw Error("Invalid Parameter");if(n&&!n.match(/[\w\s\<\>\+\.\!\#\-\?\*\,\(\)\|]*/))throw Error("Invalid Parameter");return t=t?' PUBLIC "'+t+'"':r?" SYSTEM":"",r=r?' "'+r+'"':"",n=n?" ["+n+"]":"",this.started_write&&this.indenter(),this.write("<!DOCTYPE ",e,t,r,n),this.root=e,this.dtd=1,this.started_write=!0,this},endDocType:function(){return this.dtd?(this.write(">"),this):this},writePI:function(e,t){return this.startPI(e).text(t).endPI()},startPI:function(e){if(!(e=o(e)).match(this.name_regex))throw Error("Invalid Parameter");return this.pi?this:(this.attributes&&this.endAttributes(),this.started_write&&this.indenter(),this.write("<?",e),this.pi=1,this.started_write=!0,this)},endPI:function(){return this.pi?(this.write("?>"),this.pi=0,this):this},writeCData:function(e){return this.startCData().text(e).endCData()},startCData:function(){return this.cdata?this:(this.attributes&&this.endAttributes(),this.indenter(),this.write("<![CDATA["),this.cdata=1,this.started_write=!0,this)},endCData:function(){return this.cdata?(this.write("]]>"),this.cdata=0,this):this},writeRaw:function(e){return e=o(e),this.tags||this.comment||this.pi||this.cdata?this.attributes&&this.attribute?(++this.texts,this.write(e.replace("&","&amp;").replace('"',"&quot;")),this):(this.attributes&&!this.attribute&&this.endAttributes(),++this.texts,this.write(e),this.started_write=!0,this):this}},r.exports=i}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/modules/client.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var r in t)r in e||(e[r]=t[r])}(Package.modules=o,{meteorInstall:n})}();

"undefined"==typeof Package&&(Package={}),Package["ecmascript-runtime"]={};

!function(){var n=Package.meteor.Meteor,t=Package.meteor.global,e=Package.meteor.meteorEnv,o,r=(0,Package.modules.meteorInstall)({node_modules:{meteor:{promise:{"client.js":function(n,t){n("meteor-promise").makeCompatible(t.Promise=n("./common.js").Promise)},"common.js":function(t,e){var o=this;"function"==typeof o.Promise?e.Promise=o.Promise:e.Promise=t("promise/lib/es6-extensions"),e.Promise.prototype.done=function(t,e){var o=this;arguments.length>0&&(o=this.then.apply(this,arguments)),o.then(null,function(t){n._setImmediate(function(){throw t})})}},node_modules:{"meteor-promise":{"package.json":function(n,t){t.name="meteor-promise",t.version="0.8.5",t.browser="promise_client.js",t.main="promise_server.js"},"promise_client.js":function(t,e){function o(n){throw n}e.makeCompatible=function(t){var e=t.prototype.then;t.prototype.then=function(t,r){return"object"==typeof n&&"function"==typeof n.bindEnvironment?e.call(this,t&&n.bindEnvironment(t,o),r&&n.bindEnvironment(r,o)):e.call(this,t,r)}}}},promise:{lib:{"es6-extensions.js":function(n,t,e){"use strict";function o(n){var t=new r(r._44);return t._83=1,t._18=n,t}var r=n("./core.js");e.exports=r;var i=o(!0),u=o(!1),c=o(null),f=o(void 0),s=o(0),a=o("");r.resolve=function(n){if(n instanceof r)return n;if(null===n)return c;if(void 0===n)return f;if(!0===n)return i;if(!1===n)return u;if(0===n)return s;if(""===n)return a;if("object"==typeof n||"function"==typeof n)try{var t=n.then;if("function"==typeof t)return new r(t.bind(n))}catch(n){return new r(function(t,e){e(n)})}return o(n)},r.all=function(n){var t=Array.prototype.slice.call(n);return new r(function(n,e){function o(u,c){if(c&&("object"==typeof c||"function"==typeof c)){if(c instanceof r&&c.then===r.prototype.then){for(;3===c._83;)c=c._18;return 1===c._83?o(u,c._18):(2===c._83&&e(c._18),void c.then(function(n){o(u,n)},e))}var f=c.then;if("function"==typeof f)return void new r(f.bind(c)).then(function(n){o(u,n)},e)}t[u]=c,0==--i&&n(t)}if(0===t.length)return n([]);for(var i=t.length,u=0;u<t.length;u++)o(u,t[u])})},r.reject=function(n){return new r(function(t,e){e(n)})},r.race=function(n){return new r(function(t,e){n.forEach(function(n){r.resolve(n).then(t,e)})})},r.prototype.catch=function(n){return this.then(null,n)}},"core.js":function(n,t,e){"use strict";function o(){}function r(n){try{return n.then}catch(n){return d=n,y}}function i(n,t){try{return n(t)}catch(n){return d=n,y}}function u(n,t,e){try{n(t,e)}catch(n){return d=n,y}}function c(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof n)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,n!==o&&_(n,this)}function f(n,t,e){return new n.constructor(function(r,i){var u=new c(o);u.then(r,i),s(n,new h(t,e,u))})}function s(n,t){for(;3===n._83;)n=n._18;if(c._47&&c._47(n),0===n._83)return 0===n._75?(n._75=1,void(n._38=t)):1===n._75?(n._75=2,void(n._38=[n._38,t])):void n._38.push(t);a(n,t)}function a(n,t){v(function(){var e=1===n._83?t.onFulfilled:t.onRejected;if(null!==e){var o=i(e,n._18);o===y?p(t.promise,d):l(t.promise,o)}else 1===n._83?l(t.promise,n._18):p(t.promise,n._18)})}function l(n,t){if(t===n)return p(n,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var e=r(t);if(e===y)return p(n,d);if(e===n.then&&t instanceof c)return n._83=3,n._18=t,void m(n);if("function"==typeof e)return void _(e.bind(t),n)}n._83=1,n._18=t,m(n)}function p(n,t){n._83=2,n._18=t,c._71&&c._71(n,t),m(n)}function m(n){if(1===n._75&&(s(n,n._38),n._38=null),2===n._75){for(var t=0;t<n._38.length;t++)s(n,n._38[t]);n._38=null}}function h(n,t,e){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof t?t:null,this.promise=e}function _(n,t){var e=!1,o=u(n,function(n){e||(e=!0,l(t,n))},function(n){e||(e=!0,p(t,n))});e||o!==y||(e=!0,p(t,d))}var v=n("asap/raw"),d=null,y={};e.exports=c,c._47=null,c._71=null,c._44=o,c.prototype.then=function(n,t){if(this.constructor!==c)return f(this,n,t);var e=new c(o);return s(this,new h(n,t,e)),e}}}},asap:{"raw.js":function(n,t,e){"use strict";function o(n){f.length||(i(),s=!0),f[f.length]=n}function r(){for(;a<f.length;){var n=a;if(a+=1,f[n].call(),a>l){for(var t=0,e=f.length-a;t<e;t++)f[t]=f[t+a];f.length-=a,a=0}}f.length=0,a=0,s=!1}function i(){var t=process.domain;t&&(u||(u=n("domain")),u.active=process.domain=null),s&&c?setImmediate(r):process.nextTick(r),t&&(u.active=process.domain=t)}var u,c="function"==typeof setImmediate;e.exports=o;var f=[],s=!1,a=0,l=1024;o.requestFlush=i}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/promise/client.js");"undefined"==typeof Package&&(Package={}),function(n,t){for(var e in t)e in n||(n[e]=t[e])}(Package.promise=r,{Promise:void 0})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,r=Package.meteor.meteorEnv,t=Package.modules.meteorInstall,o=Package.promise.Promise,a,i=t({node_modules:{meteor:{"babel-runtime":{"babel-runtime.js":function(e,n){n.meteorBabelHelpers=e("meteor-babel-helpers"),n.checkHelper=function e(n){return!1};try{var r=e("babel-runtime/regenerator")}catch(e){throw new Error(["The babel-runtime npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save babel-runtime",""].join("\n"))}if(r&&"function"==typeof o&&"function"==typeof o.asyncApply){var t=r.async;r.async=function(){return o.asyncApply(t,r,arguments)}}},node_modules:{"meteor-babel-helpers":{"package.json":function(e,n){n.name="meteor-babel-helpers",n.version="0.0.3",n.main="index.js"},"index.js":function(e,n,r){function t(){var e={},n="t";try{Object.defineProperty(e,"t",{enumerable:!1,value:e});for(var r in e)if("t"===r)return!1}catch(e){return!1}return e.t===e}function o(e){return e}function i(e){if(Array.isArray(e)){for(var n={},r=Object.keys(e),t=r.length,o=0;o<t;++o){var a=r[o];n[a]=e[a]}return n}return e}a=r.exports={sanitizeForInObject:t()?o:i,_sanitizeForInObjectHard:i}}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/babel-runtime/babel-runtime.js");"undefined"==typeof Package&&(Package={}),function(e,n){for(var r in n)r in e||(e[r]=n[r])}(Package["babel-runtime"]=i,{meteorBabelHelpers:a})}();

!function(){var e=Package.meteor.Meteor,s=Package.meteor.global,o=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,n=Package.promise.Promise,c,t,m,a=r({node_modules:{meteor:{"ecmascript-runtime-client":{"runtime.js":function(e,s,o){try{e("core-js/modules/es6.symbol"),e("core-js/modules/es6.map"),e("core-js/modules/es6.set");var r=function(){try{return e("core-js/modules/_core")}catch(s){return e("core-js/modules/$.core")}}()}catch(e){throw new Error(["The core-js npm package could not be found in your node_modules ","directory. Please run the following command to install it:","","  meteor npm install --save core-js",""].join("\n"))}c=s.Symbol=r.Symbol,t=s.Map=r.Map,m=s.Set=r.Set,e("core-js/es6/array"),e("core-js/es6/function"),e("core-js/es6/math"),e("core-js/es6/object"),e("core-js/es6/regexp"),e("core-js/es6/string"),e("core-js/es6/weak-map"),e("core-js/es6/weak-set"),e("core-js/es7/array"),e("core-js/es7/object"),e("core-js/modules/es6.number.epsilon"),e("core-js/modules/es6.number.is-finite"),e("core-js/modules/es6.number.is-integer"),e("core-js/modules/es6.number.is-nan"),e("core-js/modules/es6.number.is-safe-integer"),e("core-js/modules/es6.number.max-safe-integer"),e("core-js/modules/es6.number.min-safe-integer"),e("core-js/modules/es6.number.parse-float"),e("core-js/modules/es6.number.parse-int"),e("core-js/modules/es6.typed.uint8-array"),e("core-js/modules/es6.typed.uint32-array")}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ecmascript-runtime-client/runtime.js");"undefined"==typeof Package&&(Package={}),function(e,s){for(var o in s)o in e||(e[o]=s[o])}(Package["ecmascript-runtime-client"]=a,{Symbol:c,Map:t,Set:m})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,r=Package.base64.Base64,u=Package.modules.meteorInstall,a=Package["babel-runtime"].meteorBabelHelpers,i=Package.promise.Promise,o=Package["ecmascript-runtime-client"].Symbol,f=Package["ecmascript-runtime-client"].Map,c=Package["ecmascript-runtime-client"].Set,l,s,d=u({node_modules:{meteor:{ejson:{"ejson.js":function(n,t,u){function a(e){return e&&e.__esModule?e:{default:e}}var i=a(n("babel-runtime/helpers/typeof"));u.export({EJSON:function(){return o}});var o={},f={},c=function(e,n){return{}.hasOwnProperty.call(e,n)},l=function(e){return null!=e&&c(e,"callee")},s=function(e){return Number.isNaN(e)||e===1/0||e===-1/0};o.addType=function(e,n){if(c(f,e))throw new Error("Type "+e+" already present");f[e]=n};var d=[{matchJSONValue:function(e){return c(e,"$date")&&1===Object.keys(e).length},matchObject:function(e){return e instanceof Date},toJSONValue:function(e){return{$date:e.getTime()}},fromJSONValue:function(e){return new Date(e.$date)}},{matchJSONValue:function(e){return c(e,"$regexp")&&c(e,"$flags")&&2===Object.keys(e).length},matchObject:function(e){return e instanceof RegExp},toJSONValue:function(e){return{$regexp:e.source,$flags:e.flags}},fromJSONValue:function(e){return new RegExp(e.$regexp,e.$flags.slice(0,50).replace(/[^gimuy]/g,"").replace(/(.)(?=.*\1)/g,""))}},{matchJSONValue:function(e){return c(e,"$InfNaN")&&1===Object.keys(e).length},matchObject:s,toJSONValue:function(e){var n=void 0;return n=Number.isNaN(e)?0:e===1/0?1:-1,{$InfNaN:n}},fromJSONValue:function(e){return e.$InfNaN/0}},{matchJSONValue:function(e){return c(e,"$binary")&&1===Object.keys(e).length},matchObject:function(e){return"undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&c(e,"$Uint8ArrayPolyfill")},toJSONValue:function(e){return{$binary:r.encode(e)}},fromJSONValue:function(e){return r.decode(e.$binary)}},{matchJSONValue:function(e){return c(e,"$escape")&&1===Object.keys(e).length},matchObject:function(e){var n=!1;if(e){var t=Object.keys(e).length;1!==t&&2!==t||(n=d.some(function(n){return n.matchJSONValue(e)}))}return n},toJSONValue:function(e){var n={};return Object.keys(e).forEach(function(t){n[t]=o.toJSONValue(e[t])}),{$escape:n}},fromJSONValue:function(e){var n={};return Object.keys(e.$escape).forEach(function(t){n[t]=o.fromJSONValue(e.$escape[t])}),n}},{matchJSONValue:function(e){return c(e,"$type")&&c(e,"$value")&&2===Object.keys(e).length},matchObject:function(e){return o._isCustomType(e)},toJSONValue:function(n){var t=e._noYieldsAllowed(function(){return n.toJSONValue()});return{$type:n.typeName(),$value:t}},fromJSONValue:function(n){var t=n.$type;if(!c(f,t))throw new Error("Custom EJSON type "+t+" is not defined");var r=f[t];return e._noYieldsAllowed(function(){return r(n.$value)})}}];o._isCustomType=function(e){return e&&"function"==typeof e.toJSONValue&&"function"==typeof e.typeName&&c(f,e.typeName())},o._getTypes=function(){return f},o._getConverters=function(){return d};var y=function(e){for(var n=0;n<d.length;n++){var t=d[n];if(t.matchObject(e))return t.toJSONValue(e)}},v=function(e){if(null===e)return null;var n=y(e);return void 0!==n?n:"object"!==(void 0===e?"undefined":(0,i.default)(e))?e:(Object.keys(e).forEach(function(n){var t=e[n];if("object"===(void 0===t?"undefined":(0,i.default)(t))||void 0===t||s(t)){var r=y(t);r?e[n]=r:v(t)}}),e)};o._adjustTypesToJSONValue=v,o.toJSONValue=function(e){var n=y(e);if(void 0!==n)return n;var t=e;return"object"===(void 0===e?"undefined":(0,i.default)(e))&&(t=o.clone(e),v(t)),t};var m=function(e){if("object"===(void 0===e?"undefined":(0,i.default)(e))&&null!==e){var n=Object.keys(e);if(n.length<=2&&n.every(function(e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var t=0;t<d.length;t++){var r=d[t];if(r.matchJSONValue(e))return r.fromJSONValue(e)}}return e},O=function(e){if(null===e)return null;var n=m(e);return n!==e?n:"object"!==(void 0===e?"undefined":(0,i.default)(e))?e:(Object.keys(e).forEach(function(n){var t=e[n];if("object"===(void 0===t?"undefined":(0,i.default)(t))){var r=m(t);if(t!==r)return void(e[n]=r);O(t)}}),e)};o._adjustTypesFromJSONValue=O,o.fromJSONValue=function(e){var n=m(e);return n===e&&"object"===(void 0===e?"undefined":(0,i.default)(e))&&(n=o.clone(e),O(n)),n},o.stringify=function(e,t){var r=void 0,a=o.toJSONValue(e);if(t&&(t.canonical||t.indent)){var i=void 0;u.watch(n("./stringify"),{default:function(e){i=e}},0),r=i(a,t)}else r=JSON.stringify(a);return r},o.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return o.fromJSONValue(JSON.parse(e))},o.isBinary=function(e){return!!("undefined"!=typeof Uint8Array&&e instanceof Uint8Array||e&&e.$Uint8ArrayPolyfill)},o.equals=function(e,n,t){var r=void 0,u=!(!t||!t.keyOrderSensitive);if(e===n)return!0;if(Number.isNaN(e)&&Number.isNaN(n))return!0;if(!e||!n)return!1;if("object"!==(void 0===e?"undefined":(0,i.default)(e))||"object"!==(void 0===n?"undefined":(0,i.default)(n)))return!1;if(e instanceof Date&&n instanceof Date)return e.valueOf()===n.valueOf();if(o.isBinary(e)&&o.isBinary(n)){if(e.length!==n.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}if("function"==typeof e.equals)return e.equals(n,t);if("function"==typeof n.equals)return n.equals(e,t);if(e instanceof Array){if(!(n instanceof Array))return!1;if(e.length!==n.length)return!1;for(r=0;r<e.length;r++)if(!o.equals(e[r],n[r],t))return!1;return!0}switch(o._isCustomType(e)+o._isCustomType(n)){case 1:return!1;case 2:return o.equals(o.toJSONValue(e),o.toJSONValue(n));default:}var a=void 0,f=Object.keys(e),l=Object.keys(n);return u?(r=0,a=f.every(function(u){return!(r>=l.length)&&(u===l[r]&&(!!o.equals(e[u],n[l[r]],t)&&(r++,!0)))})):(r=0,a=f.every(function(u){return!!c(n,u)&&(!!o.equals(e[u],n[u],t)&&(r++,!0))})),a&&r===l.length},o.clone=function(e){var n=void 0;if("object"!==(void 0===e?"undefined":(0,i.default)(e)))return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(o.isBinary(e)){n=o.newBinary(e.length);for(var t=0;t<e.length;t++)n[t]=e[t];return n}return Array.isArray(e)?e.map(function(e){return o.clone(e)}):l(e)?Array.from(e).map(function(e){return o.clone(e)}):"function"==typeof e.clone?e.clone():o._isCustomType(e)?o.fromJSONValue(o.clone(o.toJSONValue(e)),!0):(n={},Object.keys(e).forEach(function(t){n[t]=o.clone(e[t])}),n)},o.newBinary=r.newBinary},"stringify.js":function(e,n,t){function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return JSON.stringify(e)}var a=r(e("babel-runtime/helpers/typeof")),i=function(e,n,t,r,o){var f=n[e];switch(void 0===f?"undefined":(0,a.default)(f)){case"string":return u(f);case"number":return isFinite(f)?String(f):"null";case"boolean":return String(f);case"object":if(!f)return"null";var c=r+t,s=[];if(Array.isArray(f)||{}.hasOwnProperty.call(f,"callee")){for(var d=f.length,y=0;y<d;y+=1)s[y]=i(y,f,t,c,o)||"null";var v=void 0;return v=0===s.length?"[]":c?"[\n"+c+s.join(",\n"+c)+"\n"+r+"]":"["+s.join(",")+"]"}var m=Object.keys(f);return o&&(m=m.sort()),m.forEach(function(e){(l=i(e,f,t,c,o))&&s.push(u(e)+(c?": ":":")+l)}),l=0===s.length?"{}":c?"{\n"+c+s.join(",\n"+c)+"\n"+r+"}":"{"+s.join(",")+"}";default:}},o=function(e,n){var t=Object.assign({indent:"",canonical:!1},n);if(!0===t.indent)t.indent="  ";else if("number"==typeof t.indent){for(var r="",u=0;u<t.indent;u++)r+=" ";t.indent=r}return i("",{"":e},t.indent,"",t.canonical)};t.exportDefault(o)}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ejson/ejson.js");"undefined"==typeof Package&&(Package={}),function(e,n){for(var t in n)t in e||(e[t]=n[t])}(Package.ejson=d,{EJSON:s})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,d=Package.meteor.meteorEnv,i=Package.underscore._,a=Package.ejson.EJSON,r;(function(){(r={}).diffQueryChanges=function(e,n,d,i,a){e?r.diffQueryOrderedChanges(n,d,i,a):r.diffQueryUnorderedChanges(n,d,i,a)},r.diffQueryUnorderedChanges=function(e,n,d,o){var f=(o=o||{}).projectionFn||a.clone;if(d.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");n.forEach(function(n,o){var t=e.get(o);if(t){if(d.changed&&!a.equals(t,n)){var c=f(n),u=f(t),h=r.makeChangedFields(c,u);i.isEmpty(h)||d.changed(o,h)}}else if(d.added){var l=f(n);delete l._id,d.added(n._id,l)}}),d.removed&&e.forEach(function(e,i){n.has(i)||d.removed(i)})},r.diffQueryOrderedChanges=function(n,d,o,f){var t=(f=f||{}).projectionFn||a.clone,c={};i.each(d,function(n){c[n._id]&&e._debug("Duplicate _id in new_results"),c[n._id]=!0});var u={};i.each(n,function(n,d){n._id in u&&e._debug("Duplicate _id in old_results"),u[n._id]=d});for(var h=[],l=0,s=d.length,g=new Array(s),v=new Array(s),_=function(e){return u[d[e]._id]},m=0;m<s;m++)if(void 0!==u[d[m]._id]){for(var y=l;y>0&&!(_(g[y-1])<_(m));)y--;v[m]=0===y?-1:g[y-1],g[y]=m,y+1>l&&(l=y+1)}for(var k=0===l?-1:g[l-1];k>=0;)h.push(k),k=v[k];h.reverse(),h.push(d.length),i.each(n,function(e){c[e._id]||o.removed&&o.removed(e._id)});var p=0;i.each(h,function(e){for(var a=d[e]?d[e]._id:null,f,c,h,l,s,g=p;g<e;g++)c=d[g],i.has(u,c._id)?(f=n[u[c._id]],l=t(c),s=t(f),h=r.makeChangedFields(l,s),i.isEmpty(h)||o.changed&&o.changed(c._id,h),o.movedBefore&&o.movedBefore(c._id,a)):(delete(h=t(c))._id,o.addedBefore&&o.addedBefore(c._id,h,a),o.added&&o.added(c._id,h));a&&(c=d[e],f=n[u[c._id]],l=t(c),s=t(f),h=r.makeChangedFields(l,s),i.isEmpty(h)||o.changed&&o.changed(c._id,h)),p=e+1})},r.diffObjects=function(e,n,d){i.each(e,function(e,a){i.has(n,a)?d.both&&d.both(a,e,n[a]):d.leftOnly&&d.leftOnly(a,e)}),d.rightOnly&&i.each(n,function(n,a){i.has(e,a)||d.rightOnly(a,n)})},r.makeChangedFields=function(e,n){var d={};return r.diffObjects(n,e,{leftOnly:function(e,n){d[e]=void 0},rightOnly:function(e,n){d[e]=n},both:function(e,n,i){a.equals(n,i)||(d[e]=i)}}),d},r.applyChanges=function(e,n){i.each(n,function(n,d){void 0===n?delete e[d]:e[d]=n})}}).call(this),"undefined"==typeof Package&&(Package={}),function(e,n){for(var d in n)d in e||(e[d]=n[d])}(Package["diff-sequence"]={},{DiffSequence:r})}();

!function(){var t=Package.meteor.Meteor,n=Package.meteor.global,o=Package.meteor.meteorEnv,a,e=(0,Package.modules.meteorInstall)({node_modules:{meteor:{"geojson-utils":{"main.js":function(t,n){n.GeoJSON=t("./geojson-utils.js")},"geojson-utils.js":function(t,n,o){!function(){function t(t){for(var n=[],o=[],a=0;a<t[0].length;a++)n.push(t[0][a][1]),o.push(t[0][a][0]);return n=n.sort(function(t,n){return t-n}),o=o.sort(function(t,n){return t-n}),[[n[0],o[0]],[n[n.length-1],o[o.length-1]]]}function n(t,n,o){for(var a=[[0,0]],e=0;e<o.length;e++){for(var r=0;r<o[e].length;r++)a.push(o[e][r]);a.push([0,0])}for(var i=!1,e=0,r=a.length-1;e<a.length;r=e++)a[e][0]>n!=a[r][0]>n&&t<(a[r][1]-a[e][1])*(n-a[e][0])/(a[r][0]-a[e][0])+a[e][1]&&(i=!i);return i}var a={};void 0!==o&&o.exports&&(o.exports=a),a.lineStringsIntersect=function(t,n){for(var o=[],a=0;a<=t.coordinates.length-2;++a)for(var e=0;e<=n.coordinates.length-2;++e){var r={x:t.coordinates[a][1],y:t.coordinates[a][0]},i={x:t.coordinates[a+1][1],y:t.coordinates[a+1][0]},s={x:n.coordinates[e][1],y:n.coordinates[e][0]},c={x:n.coordinates[e+1][1],y:n.coordinates[e+1][0]},u=(c.x-s.x)*(r.y-s.y)-(c.y-s.y)*(r.x-s.x),h=(i.x-r.x)*(r.y-s.y)-(i.y-r.y)*(r.x-s.x),d=(c.y-s.y)*(i.x-r.x)-(c.x-s.x)*(i.y-r.y);if(0!=d){var l=u/d,g=h/d;0<=l&&l<=1&&0<=g&&g<=1&&o.push({type:"Point",coordinates:[r.x+l*(i.x-r.x),r.y+l*(i.y-r.y)]})}}return 0==o.length&&(o=!1),o},a.pointInBoundingBox=function(t,n){return!(t.coordinates[1]<n[0][0]||t.coordinates[1]>n[1][0]||t.coordinates[0]<n[0][1]||t.coordinates[0]>n[1][1])},a.pointInPolygon=function(o,e){for(var r="Polygon"==e.type?[e.coordinates]:e.coordinates,i=!1,s=0;s<r.length;s++)a.pointInBoundingBox(o,t(r[s]))&&(i=!0);if(!i)return!1;for(var c=!1,s=0;s<r.length;s++)n(o.coordinates[1],o.coordinates[0],r[s])&&(c=!0);return c},a.numberToRadius=function(t){return t*Math.PI/180},a.numberToDegree=function(t){return 180*t/Math.PI},a.drawCircle=function(t,n,o){for(var e=[n.coordinates[1],n.coordinates[0]],r=t/1e3/6371,i=[a.numberToRadius(e[0]),a.numberToRadius(e[1])],o=o||15,s=[[e[0],e[1]]],c=0;c<o;c++){var u=2*Math.PI*c/o,h=Math.asin(Math.sin(i[0])*Math.cos(r)+Math.cos(i[0])*Math.sin(r)*Math.cos(u)),d=i[1]+Math.atan2(Math.sin(u)*Math.sin(r)*Math.cos(i[0]),Math.cos(r)-Math.sin(i[0])*Math.sin(h));s[c]=[],s[c][1]=a.numberToDegree(h),s[c][0]=a.numberToDegree(d)}return{type:"Polygon",coordinates:[s]}},a.rectangleCentroid=function(t){var n=t.coordinates[0],o=n[0][0],a=n[0][1];return{type:"Point",coordinates:[o+(n[2][0]-o)/2,a+(n[2][1]-a)/2]}},a.pointDistance=function(t,n){var o=t.coordinates[0],e=t.coordinates[1],r=n.coordinates[0],i=n.coordinates[1],s=a.numberToRadius(i-e),c=a.numberToRadius(r-o),u=Math.pow(Math.sin(s/2),2)+Math.cos(a.numberToRadius(e))*Math.cos(a.numberToRadius(i))*Math.pow(Math.sin(c/2),2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))*1e3},a.geometryWithinRadius=function(t,n,o){if("Point"==t.type)return a.pointDistance(t,n)<=o;if("LineString"==t.type||"Polygon"==t.type){var e={},r;r="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var i in r)if(e.coordinates=r[i],a.pointDistance(e,n)>o)return!1}return!0},a.area=function(t){for(var n=0,o=t.coordinates[0],a=o.length-1,e,r,i=0;i<o.length;a=i++){var e={x:o[i][1],y:o[i][0]},r={x:o[a][1],y:o[a][0]};n+=e.x*r.y,n-=e.y*r.x}return n/=2},a.centroid=function(t){for(var n,o=0,e=0,r=t.coordinates[0],i=r.length-1,s,c,u=0;u<r.length;i=u++){var s={x:r[u][1],y:r[u][0]},c={x:r[i][1],y:r[i][0]};n=s.x*c.y-c.x*s.y,o+=(s.x+c.x)*n,e+=(s.y+c.y)*n}return n=6*a.area(t),{type:"Point",coordinates:[e/n,o/n]}},a.simplify=function(t,n){n=n||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var o,a,e,r,i,s,c,u,h,d,l,g,M,y,f,x,m,p,v,P=Math.PI/180*.5,b=new Array,T=new Array,I=new Array;if(t.length<3)return t;for(o=t.length,d=360*n/(2*Math.PI*6378137),d*=d,e=0,T[0]=0,I[0]=o-1,a=1;a>0;)if(r=T[a-1],i=I[a-1],a--,i-r>1){for(l=t[i].lng()-t[r].lng(),g=t[i].lat()-t[r].lat(),Math.abs(l)>180&&(l=360-Math.abs(l)),M=(l*=Math.cos(P*(t[i].lat()+t[r].lat())))*l+g*g,s=r+1,c=r,h=-1;s<i;s++)y=t[s].lng()-t[r].lng(),f=t[s].lat()-t[r].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),x=(y*=Math.cos(P*(t[s].lat()+t[r].lat())))*y+f*f,m=t[s].lng()-t[i].lng(),p=t[s].lat()-t[i].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),(u=x>=M+(v=(m*=Math.cos(P*(t[s].lat()+t[i].lat())))*m+p*p)?v:v>=M+x?x:(y*g-f*l)*(y*g-f*l)/M)>h&&(c=s,h=u);h<d?(b[e]=r,e++):(T[++a-1]=c,I[a-1]=i,T[++a-1]=r,I[a-1]=c)}else b[e]=r,e++;b[e]=o-1,e++;for(var j=new Array,s=0;s<e;s++)j.push(t[b[s]]);return j.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},a.destinationPoint=function(t,n,o){o/=6371,n=a.numberToRadius(n);var e=a.numberToRadius(t.coordinates[0]),r=a.numberToRadius(t.coordinates[1]),i=Math.asin(Math.sin(e)*Math.cos(o)+Math.cos(e)*Math.sin(o)*Math.cos(n)),s=r+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(e),Math.cos(o)-Math.sin(e)*Math.sin(i));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[a.numberToDegree(i),a.numberToDegree(s)]}}}()}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/geojson-utils/main.js");"undefined"==typeof Package&&(Package={}),function(t,n){for(var o in n)o in t||(t[o]=n[o])}(Package["geojson-utils"]=e,{GeoJSON:void 0})}();

!function(){var i=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,e=Package.ejson.EJSON,r;(function(){r=function(i,t){var n=this;n._map={},n._idStringify=i||JSON.stringify,n._idParse=t||JSON.parse},a.extend(r.prototype,{get:function(i){var t=this,n=t._idStringify(i);return t._map[n]},set:function(i,t){var n=this,a=n._idStringify(i);n._map[a]=t},remove:function(i){var t=this,n=t._idStringify(i);delete t._map[n]},has:function(i){var t=this,n=t._idStringify(i);return a.has(t._map,n)},empty:function(){var i=this;return a.isEmpty(i._map)},clear:function(){this._map={}},forEach:function(i){for(var t=this,n=a.keys(t._map),e=0;e<n.length;e++)if(!1===i.call(null,t._map[n[e]],t._idParse(n[e])))return},size:function(){var i=this;return a.size(i._map)},setDefault:function(i,t){var n=this,e=n._idStringify(i);return a.has(n._map,e)?n._map[e]:(n._map[e]=t,t)},clone:function(){var i=this,t=new r(i._idStringify,i._idParse);return i.forEach(function(i,n){t.set(n,e.clone(i))}),t}})}).call(this),"undefined"==typeof Package&&(Package={}),function(i,t){for(var n in t)n in i||(i[n]=t[n])}(Package["id-map"]={},{IdMap:r})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,r=Package.underscore._,o=Package.modules.meteorInstall,i=Package["babel-runtime"].meteorBabelHelpers,a=Package.promise.Promise,d=Package["ecmascript-runtime-client"].Symbol,c=Package["ecmascript-runtime-client"].Map,u=Package["ecmascript-runtime-client"].Set,s,p=o({node_modules:{meteor:{random:{"random.js":function(n){function t(){return new d(d.Type.ALEA,{seeds:[new Date,c,u,p,Math.random()]})}if(e.isServer)var r=Npm.require("crypto");var o=function(){function e(){var e=4022871197,n=function(n){n=n.toString();for(var t=0;t<n.length;t++){var r=.02519603282416938*(e+=n.charCodeAt(t));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return n.version="Mash 0.9",n}return function(n){var t=0,r=0,o=0,i=1;0==n.length&&(n=[+new Date]);var a=e();t=a(" "),r=a(" "),o=a(" ");for(var d=0;d<n.length;d++)(t-=a(n[d]))<0&&(t+=1),(r-=a(n[d]))<0&&(r+=1),(o-=a(n[d]))<0&&(o+=1);a=null;var c=function(){var e=2091639*t+2.3283064365386963e-10*i;return t=r,r=o,o=e-(i=0|e)};return c.uint32=function(){return 4294967296*c()},c.fract53=function(){return c()+1.1102230246251565e-16*(2097152*c()|0)},c.version="Alea 0.9",c.args=n,c}(Array.prototype.slice.call(arguments))},i="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_",d=function(e,n){var t=this;if(t.type=e,!d.Type[e])throw new Error("Unknown random generator type: "+e);if(e===d.Type.ALEA){if(!n.seeds)throw new Error("No seeds were provided for Alea PRNG");t.alea=o.apply(null,n.seeds)}};d.Type={NODE_CRYPTO:"NODE_CRYPTO",BROWSER_CRYPTO:"BROWSER_CRYPTO",ALEA:"ALEA"},d.prototype.fraction=function(){var e=this;if(e.type===d.Type.ALEA)return e.alea();if(e.type===d.Type.NODE_CRYPTO)return 2.3283064365386963e-10*parseInt(e.hexString(8),16);if(e.type===d.Type.BROWSER_CRYPTO){var n=new Uint32Array(1);return window.crypto.getRandomValues(n),2.3283064365386963e-10*n[0]}throw new Error("Unknown random generator type: "+e.type)},d.prototype.hexString=function(e){if(this.type===d.Type.NODE_CRYPTO){var n=Math.ceil(e/2),t;try{t=r.randomBytes(n)}catch(e){t=r.pseudoRandomBytes(n)}return t.toString("hex").substring(0,e)}return this._randomString(e,"0123456789abcdef")},d.prototype._randomString=function(e,n){for(var t=this,r=[],o=0;o<e;o++)r[o]=t.choice(n);return r.join("")},d.prototype.id=function(e){var n=this;return void 0===e&&(e=17),n._randomString(e,i)},d.prototype.secret=function(e){var n=this;return void 0===e&&(e=43),n._randomString(e,a)},d.prototype.choice=function(e){var n=Math.floor(this.fraction()*e.length);return"string"==typeof e?e.substr(n,1):e[n]};var c="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,u="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,p="undefined"!=typeof navigator&&navigator.userAgent||"";(s=e.isServer?new d(d.Type.NODE_CRYPTO):"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new d(d.Type.BROWSER_CRYPTO):t()).createWithSeeds=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];if(0===n.length)throw new Error("No seeds were provided");return new d(d.Type.ALEA,{seeds:n})},s.insecure=t()},"deprecated.js":function(){e.uuid=function(){for(var e="0123456789abcdef",n=[],t=0;t<36;t++)n[t]=s.choice(e);return n[14]="4",n[19]=e.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-",n.join("")}}}}}},{extensions:[".js",".json"]});p("./node_modules/meteor/random/random.js"),p("./node_modules/meteor/random/deprecated.js"),"undefined"==typeof Package&&(Package={}),function(e,n){for(var t in n)t in e||(e[t]=n[t])}(Package.random={},{Random:s})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,r=Package.meteor.meteorEnv,o=Package.ejson.EJSON,n=Package["id-map"].IdMap,i=Package.random.Random,a;(function(){(a={})._looksLikeObjectID=function(t){return 24===t.length&&t.match(/^[0-9a-f]*$/)},a.ObjectID=function(t){var e=this;if(t){if(t=t.toLowerCase(),!a._looksLikeObjectID(t))throw new Error("Invalid hexadecimal string for creating an ObjectID");e._str=t}else e._str=i.hexString(24)},a.ObjectID.prototype.toString=function(){return'ObjectID("'+this._str+'")'},a.ObjectID.prototype.equals=function(t){var e=this;return t instanceof a.ObjectID&&e.valueOf()===t.valueOf()},a.ObjectID.prototype.clone=function(){var t=this;return new a.ObjectID(t._str)},a.ObjectID.prototype.typeName=function(){return"oid"},a.ObjectID.prototype.getTimestamp=function(){var t=this;return parseInt(t._str.substr(0,8),16)},a.ObjectID.prototype.valueOf=a.ObjectID.prototype.toJSONValue=a.ObjectID.prototype.toHexString=function(){return this._str},o.addType("oid",function(t){return new a.ObjectID(t)}),a.idStringify=function(t){if(t instanceof a.ObjectID)return t.valueOf();if("string"==typeof t)return""===t?t:"-"===t.substr(0,1)||"~"===t.substr(0,1)||a._looksLikeObjectID(t)||"{"===t.substr(0,1)?"-"+t:t;if(void 0===t)return"-";if("object"==typeof t&&null!==t)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+JSON.stringify(t)},a.idParse=function(t){return""===t?t:"-"===t?void 0:"-"===t.substr(0,1)?t.substr(1):"~"===t.substr(0,1)?JSON.parse(t.substr(1)):a._looksLikeObjectID(t)?new a.ObjectID(t):t}}).call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var r in e)r in t||(t[r]=e[r])}(Package["mongo-id"]={},{MongoID:a})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,r=Package.meteor.meteorEnv,n=Package.underscore._,i;(function(){var t=function(t,e,r,n){return{key:t,value:e,next:r,prev:n}};i=function(){var t=this;t._dict={},t._first=null,t._last=null,t._size=0;var e=n.toArray(arguments);t._stringify=function(t){return t},"function"==typeof e[0]&&(t._stringify=e.shift()),n.each(e,function(e){t.putBefore(e[0],e[1],null)})},n.extend(i.prototype,{_k:function(t){return" "+this._stringify(t)},empty:function(){return!this._first},size:function(){return this._size},_linkEltIn:function(t){var e=this;t.next?(t.prev=t.next.prev,t.next.prev=t,t.prev&&(t.prev.next=t)):(t.prev=e._last,e._last&&(e._last.next=t),e._last=t),null!==e._first&&e._first!==t.next||(e._first=t)},_linkEltOut:function(t){var e=this;t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===e._last&&(e._last=t.prev),t===e._first&&(e._first=t.next)},putBefore:function(e,r,n){var i=this;if(i._dict[i._k(e)])throw new Error("Item "+e+" already present in OrderedDict");var o=n?t(e,r,i._dict[i._k(n)]):t(e,r,null);if(void 0===o.next)throw new Error("could not find item to put this one before");i._linkEltIn(o),i._dict[i._k(e)]=o,i._size++},append:function(t,e){this.putBefore(t,e,null)},remove:function(t){var e=this,r=e._dict[e._k(t)];if(void 0===r)throw new Error("Item "+t+" not present in OrderedDict");return e._linkEltOut(r),e._size--,delete e._dict[e._k(t)],r.value},get:function(t){var e=this;if(e.has(t))return e._dict[e._k(t)].value},has:function(t){var e=this;return n.has(e._dict,e._k(t))},forEach:function(t){for(var e=0,r=this._first;null!==r;){if(t(r.value,r.key,e)===i.BREAK)return;r=r.next,e++}},first:function(){var t=this;if(!t.empty())return t._first.key},firstValue:function(){var t=this;if(!t.empty())return t._first.value},last:function(){var t=this;if(!t.empty())return t._last.key},lastValue:function(){var t=this;if(!t.empty())return t._last.value},prev:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.prev)return r.prev.key}return null},next:function(t){var e=this;if(e.has(t)){var r=e._dict[e._k(t)];if(r.next)return r.next.key}return null},moveBefore:function(t,e){var r=this,n=r._dict[r._k(t)],i=e?r._dict[r._k(e)]:null;if(void 0===n)throw new Error("Item to move is not present");if(void 0===i)throw new Error("Could not find element to move this one before");i!==n.next&&(r._linkEltOut(n),n.next=i,r._linkEltIn(n))},indexOf:function(t){var e=this,r=null;return e.forEach(function(n,o,f){if(e._k(o)===e._k(t))return r=f,i.BREAK}),r},_checkRep:function(){var t=this;n.each(t._dict,function(t,e){if(e.next===e)throw new Error("Next is a loop");if(e.prev===e)throw new Error("Prev is a loop")})}}),i.BREAK={break:!0}}).call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var r in e)r in t||(t[r]=e[r])}(Package["ordered-dict"]={},{OrderedDict:i})}();

!function(){var n=Package.meteor.Meteor,t=Package.meteor.global,o=Package.meteor.meteorEnv,e,r;(function(){(e={}).active=!1,e.currentComputation=null;var t=function(n){e.currentComputation=n,e.active=!!n},o=function(){return void 0!==n?n._debug:"undefined"!=typeof console&&console.error?function(){console.error.apply(console,arguments)}:function(){}},r=function(t){void 0!==n&&n._suppressed_log_expected()&&n._suppress_log(t-1)},i=function(n,t){if(l)throw t;var e=["Exception from Tracker "+n+" function:"];if(t.stack&&t.message&&t.name){var i=t.stack.indexOf(t.message);if(i<0||i>t.name.length+2){var a=t.name+": "+t.message;e.push(a)}}e.push(t.stack),r(e.length);for(var u=0;u<e.length;u++)o()(e[u])},a=function(t){return void 0===n||n.isClient?t:function(){var o=arguments;n._noYieldsAllowed(function(){t.apply(null,o)})}},u=1,c=[],s=!1,p=!1,f=!1,l=!1,d=[],h=function(){s||(void 0!==n?n._setImmediate(e._runFlush):setTimeout(e._runFlush,0),s=!0)},v=!1;e.Computation=function(n,t,o){if(!v)throw new Error("Tracker.Computation constructor is private; use Tracker.autorun");v=!1;var e=this;e.stopped=!1,e.invalidated=!1,e.firstRun=!0,e._id=u++,e._onInvalidateCallbacks=[],e._onStopCallbacks=[],e._parent=t,e._func=n,e._onError=o,e._recomputing=!1;var r=!0;try{e._compute(),r=!1}finally{e.firstRun=!1,r&&e.stop()}},e.Computation.prototype.onInvalidate=function(n){var t=this;if("function"!=typeof n)throw new Error("onInvalidate requires a function");t.invalidated?e.nonreactive(function(){a(n)(t)}):t._onInvalidateCallbacks.push(n)},e.Computation.prototype.onStop=function(n){var t=this;if("function"!=typeof n)throw new Error("onStop requires a function");t.stopped?e.nonreactive(function(){a(n)(t)}):t._onStopCallbacks.push(n)},e.Computation.prototype.invalidate=function(){var n=this;if(!n.invalidated){n._recomputing||n.stopped||(h(),c.push(this)),n.invalidated=!0;for(var t=0,o;o=n._onInvalidateCallbacks[t];t++)e.nonreactive(function(){a(o)(n)});n._onInvalidateCallbacks=[]}},e.Computation.prototype.stop=function(){var n=this;if(!n.stopped){n.stopped=!0,n.invalidate();for(var t=0,o;o=n._onStopCallbacks[t];t++)e.nonreactive(function(){a(o)(n)});n._onStopCallbacks=[]}},e.Computation.prototype._compute=function(){var n=this;n.invalidated=!1;var o=e.currentComputation;t(n);var r=f;f=!0;try{a(n._func)(n)}finally{t(o),f=r}},e.Computation.prototype._needsRecompute=function(){var n=this;return n.invalidated&&!n.stopped},e.Computation.prototype._recompute=function(){var n=this;n._recomputing=!0;try{if(n._needsRecompute())try{n._compute()}catch(t){n._onError?n._onError(t):i("recompute",t)}}finally{n._recomputing=!1}},e.Computation.prototype.flush=function(){var n=this;n._recomputing||n._recompute()},e.Computation.prototype.run=function(){var n=this;n.invalidate(),n.flush()},e.Dependency=function(){this._dependentsById={}},e.Dependency.prototype.depend=function(n){if(!n){if(!e.active)return!1;n=e.currentComputation}var t=this,o=n._id;return!(o in t._dependentsById)&&(t._dependentsById[o]=n,n.onInvalidate(function(){delete t._dependentsById[o]}),!0)},e.Dependency.prototype.changed=function(){var n=this;for(var t in n._dependentsById)n._dependentsById[t].invalidate()},e.Dependency.prototype.hasDependents=function(){var n=this;for(var t in n._dependentsById)return!0;return!1},e.flush=function(n){e._runFlush({finishSynchronously:!0,throwFirstError:n&&n._throwFirstError})},e.inFlush=function(){return p},e._runFlush=function(n){if(e.inFlush())throw new Error("Can't call Tracker.flush while flushing");if(f)throw new Error("Can't flush inside Tracker.autorun");p=!0,s=!0,l=!!(n=n||{}).throwFirstError;var t=0,o=!1;try{for(;c.length||d.length;){for(;c.length;){var r=c.shift();if(r._recompute(),r._needsRecompute()&&c.unshift(r),!n.finishSynchronously&&++t>1e3)return void(o=!0)}if(d.length){var a=d.shift();try{a()}catch(n){i("afterFlush",n)}}}o=!0}finally{if(o||(p=!1,e._runFlush({finishSynchronously:n.finishSynchronously,throwFirstError:!1})),s=!1,p=!1,c.length||d.length){if(n.finishSynchronously)throw new Error("still have more to do?");setTimeout(h,10)}}},e.autorun=function(n,t){if("function"!=typeof n)throw new Error("Tracker.autorun requires a function argument");t=t||{},v=!0;var o=new e.Computation(n,e.currentComputation,t.onError);return e.active&&e.onInvalidate(function(){o.stop()}),o},e.nonreactive=function(n){var o=e.currentComputation;t(null);try{return n()}finally{t(o)}},e.onInvalidate=function(n){if(!e.active)throw new Error("Tracker.onInvalidate requires a currentComputation");e.currentComputation.onInvalidate(n)},e.afterFlush=function(n){d.push(n),h()}}).call(this),function(){n.flush=e.flush,n.autorun=e.autorun,n.autosubscribe=e.autorun,e.depend=function(n){return n.depend()},r=e}.call(this),"undefined"==typeof Package&&(Package={}),function(n,t){for(var o in t)o in n||(n[o]=t[o])}(Package.tracker={},{Tracker:e,Deps:r})}();

!function(){var e=Package.meteor.Meteor,r=Package.meteor.global,t=Package.meteor.meteorEnv,n=Package["diff-sequence"].DiffSequence,i=Package.ejson.EJSON,o=Package["geojson-utils"].GeoJSON,a=Package["id-map"].IdMap,s=Package["mongo-id"].MongoID,c=Package["ordered-dict"].OrderedDict,u=Package.random.Random,f=Package.tracker.Tracker,d=Package.tracker.Deps,l=Package.modules.meteorInstall,h=Package["babel-runtime"].meteorBabelHelpers,p=Package.promise.Promise,v=Package["ecmascript-runtime-client"].Symbol,m=Package["ecmascript-runtime-client"].Map,y=Package["ecmascript-runtime-client"].Set,_,g,b,w,E=l({node_modules:{meteor:{minimongo:{"minimongo_client.js":function(e,r,t){t.watch(e("./minimongo_common.js"))},"common.js":function(e,r,t){function n(e){return e&&e.__esModule?e:{default:e}}function a(e){return 0===e.length?h:1===e.length?e[0]:function(r){var t={};return t.result=e.every(function(e){var n=e(r);return n.result&&void 0!==n.distance&&void 0===t.distance&&(t.distance=n.distance),n.result&&n.arrayIndices&&(t.arrayIndices=n.arrayIndices),n.result}),t.result||(delete t.distance,delete t.arrayIndices),t}}function s(e,r,t){if(!Array.isArray(e)||0===e.length)throw Error("$and/$or/$nor must be nonempty array");return e.map(function(e){if(!T._isPlainObject(e))throw Error("$or/$and/$nor entries need to be full objects");return c(e,r,{inElemMatch:t})})}function c(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.keys(e).map(function(n){var i=e[n];if("$"===n.substr(0,1)){if(!U.call(N,n))throw new Error("Unrecognized logical operator: "+n);return r._isSimple=!1,N[n](i,r,t.inElemMatch)}if(t.inElemMatch||r._recordPathUsed(n),"function"!=typeof i){var o=j(n),a=u(i,r,t.isRoot);return function(e){return a(o(e))}}}).filter(Boolean);return K(n)}function u(e,r,t){return e instanceof RegExp?(r._isSimple=!1,f(q(e))):$(e)?k(e,r,t):f(l(e))}function f(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t){var n=r.dontExpandLeafArrays?t:p(t,r.dontIncludeLeafArrays),i={};return i.result=n.some(function(r){var t=e(r.value);return"number"==typeof t&&(r.arrayIndices||(r.arrayIndices=[t]),t=!0),t&&r.arrayIndices&&(i.arrayIndices=r.arrayIndices),t}),i}}function d(e,r){var t=S(e),n=S(r);return Math.hypot(t[0]-n[0],t[1]-n[1])}function l(e){if($(e))throw Error("Can't create equalityValueSelector for operator object");return null==e?function(e){return null==e}:function(r){return T._f._equal(e,r)}}function h(e){return{result:!0}}function p(e,r){var t=[];return e.forEach(function(e){var n=Array.isArray(e.value);r&&n&&!e.dontIterate||t.push({arrayIndices:e.arrayIndices,value:e.value}),n&&!e.dontIterate&&e.value.forEach(function(r,n){t.push({arrayIndices:(e.arrayIndices||[]).concat(n),value:r})})}),t}function v(e,r){if(Number.isInteger(e)&&e>=0)return new Uint8Array(new Int32Array([e]).buffer);if(i.isBinary(e))return new Uint8Array(e.buffer);if(Array.isArray(e)&&e.every(function(e){return Number.isInteger(e)&&e>=0})){var t=new ArrayBuffer(1+(Math.max.apply(Math,(0,R.default)(e))>>3)),n=new Uint8Array(t);return e.forEach(function(e){n[e>>3]|=1<<(7&e)}),n}throw Error("operand to "+r+" must be a numeric bitmask (representable as a non-negative 32-bit signed integer), a bindata bitmask or an array with bit positions (non-negative integers)")}function m(e,r){if(Number.isSafeInteger(e)){var t=new ArrayBuffer(Math.max(r,2*Uint32Array.BYTES_PER_ELEMENT)),n=new Uint32Array(t,0,2);return n[0]=e%4294967296|0,n[1]=e/4294967296|0,e<0&&(n=new Uint8Array(t,2)).forEach(function(e,r){n[r]=255}),new Uint8Array(t)}return!!i.isBinary(e)&&new Uint8Array(e.buffer)}function y(e,r,t){Object.keys(e).forEach(function(e){if(e.length>r.length&&0===e.indexOf(r+".")||r.length>e.length&&0===r.indexOf(e+"."))throw new Error("cannot infer query fields to set, both paths '"+e+"' and '"+r+"' are matched");if(e===r)throw new Error("cannot infer query fields to set, path '"+r+"' is matched twice")}),e[r]=t}function b(e){return function(r){return{result:!e(r).result}}}function w(e){return Array.isArray(e)||T._isPlainObject(e)}function E(e){return/^[0-9]+$/.test(e)}function $(e,r){if(!T._isPlainObject(e))return!1;var t=void 0;return Object.keys(e).forEach(function(n){var i="$"===n.substr(0,1);if(void 0===t)t=i;else if(t!==i){if(!r)throw new Error("Inconsistent operator: "+JSON.stringify(e));t=!1}}),!!t}function O(e){return{compileElementSelector:function(r){if(Array.isArray(r))return function(){return!1};void 0===r&&(r=null);var t=T._f._type(r);return function(n){return void 0===n&&(n=null),T._f._type(n)===t&&e(T._f._cmp(n,r))}}}}function j(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.split("."),n=t.length?t[0]:"",i=t.length>1&&j(t.slice(1).join(".")),o=function(e){return e.dontIterate||delete e.dontIterate,e.arrayIndices&&!e.arrayIndices.length&&delete e.arrayIndices,e};return function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(Array.isArray(e)){if(!(E(n)&&n<e.length))return[];a=a.concat(+n,"x")}var s=e[n];if(!i)return[o({arrayIndices:a,dontIterate:Array.isArray(e)&&Array.isArray(s),value:s})];if(!w(s))return Array.isArray(e)?[]:[o({arrayIndices:a,value:void 0})];var c=[],u=function(e){c.push.apply(c,(0,R.default)(e))};return u(i(s,a)),!Array.isArray(s)||E(t[1])&&r.forSort||s.forEach(function(e,r){T._isPlainObject(e)&&u(i(e,a.concat(r)))}),c}}function A(e){return{result:!1}}function k(e,r,t){var n=Object.keys(e).map(function(n){var i=e[n],o=["$lt","$lte","$gt","$gte"].includes(n)&&"number"==typeof i,a=["$ne","$eq"].includes(n)&&i!==Object(i),s=["$in","$nin"].includes(n)&&Array.isArray(i)&&!i.some(function(e){return e===Object(e)});if(o||s||a||(r._isSimple=!1),U.call(L,n))return L[n](i,e,r,t);if(U.call(Q,n)){var c=Q[n];return f(c.compileElementSelector(i,e,r),c)}throw new Error("Unrecognized operator: "+n)});return W(n)}function I(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.forEach(function(e){var i=e.split("."),o=n;if(i.slice(0,-1).every(function(r,n){if(U.call(o,r)){if(o[r]!==Object(o[r])&&(o[r]=t(o[r],i.slice(0,n+1).join("."),e),o[r]!==Object(o[r])))return!1}else o[r]={};return o=o[r],!0})){var a=i[i.length-1];U.call(o,a)?o[a]=t(o[a],e,e):o[a]=r(e)}}),n}function S(e){return Array.isArray(e)?e.slice():[e.x,e.y]}function C(e,r,t){t&&Object.getPrototypeOf(t)===Object.prototype?M(e,r,t):t instanceof RegExp||y(e,r,t)}function M(e,r,t){var n=Object.keys(t),i=n.filter(function(e){return"$"!==e[0]});if(i.length>0||!n.length){if(n.length!==i.length)throw new Error("unknown operator: "+i[0]);F(t,r),y(e,r,t)}else Object.keys(t).forEach(function(n){var i=t[n];"$eq"===n?C(e,r,i):"$all"===n&&i.forEach(function(t){return C(e,r,t)})})}function P(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.getPrototypeOf(e)===Object.prototype?Object.keys(e).forEach(function(t){var n=e[t];"$and"===t?n.forEach(function(e){return P(e,r)}):"$or"===t?1===n.length&&P(n[0],r):"$"!==t[0]&&C(r,t,n)}):T._selectorIsId(e)&&y(r,"_id",e),r}function x(e){var r=Object.keys(e).sort();1===r.length&&"_id"===r[0]||r.includes("_id")&&e._id||(r=r.filter(function(e){return"_id"!==e}));var t=null;r.forEach(function(r){var n=!!e[r];if(null===t&&(t=n),t!==n)throw g("You cannot currently mix including and excluding fields.")});var n=I(r,function(e){return t},function(e,r,t){throw g("both "+t+" and "+r+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{including:t,tree:n}}function q(e){return function(r){return r instanceof RegExp?r.toString()===e.toString():"string"==typeof r&&(e.lastIndex=0,e.test(r))}}function B(e,r){if(e.includes("."))throw new Error("The dotted field '"+e+"' in '"+r+"."+e+" is not valid for storage.");if("$"===e[0])throw new Error("The dollar ($) prefixed field  '"+r+"."+e+" is not valid for storage.")}function F(e,r){e&&Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).forEach(function(t){B(t,r),F(e[t],r+"."+t)})}var R=n(e("babel-runtime/helpers/toConsumableArray")),D=n(e("babel-runtime/helpers/typeof"));t.export({hasOwn:function(){return U},ELEMENT_OPERATORS:function(){return Q},compileDocumentSelector:function(){return c},equalityElementMatcher:function(){return l},expandArraysInBranches:function(){return p},isIndexable:function(){return w},isNumericKey:function(){return E},isOperatorObject:function(){return $},makeLookupFunction:function(){return j},nothingMatcher:function(){return A},pathsToTree:function(){return I},populateDocumentWithQueryFields:function(){return P},projectionDetails:function(){return x},regexpElementMatcher:function(){return q}});var T=void 0;t.watch(e("./local_collection.js"),{default:function(e){T=e}},0);var U=Object.prototype.hasOwnProperty,Q={$lt:O(function(e){return e<0}),$gt:O(function(e){return e>0}),$lte:O(function(e){return e<=0}),$gte:O(function(e){return e>=0}),$mod:{compileElementSelector:function(e){if(!Array.isArray(e)||2!==e.length||"number"!=typeof e[0]||"number"!=typeof e[1])throw Error("argument to $mod must be an array of two numbers");var r=e[0],t=e[1];return function(e){return"number"==typeof e&&e%r===t}}},$in:{compileElementSelector:function(e){if(!Array.isArray(e))throw Error("$in needs an array");var r=e.map(function(e){if(e instanceof RegExp)return q(e);if($(e))throw Error("cannot nest $ under $in");return l(e)});return function(e){return void 0===e&&(e=null),r.some(function(r){return r(e)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(e){if("string"==typeof e)e=0;else if("number"!=typeof e)throw Error("$size needs a number");return function(r){return Array.isArray(r)&&r.length===e}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(e){if("number"!=typeof e)throw Error("$type needs a number");return function(r){return void 0!==r&&T._f._type(r)===e}}},$bitsAllSet:{compileElementSelector:function(e){var r=v(e,"$bitsAllSet");return function(e){var t=m(e,r.length);return t&&r.every(function(e,r){return(t[r]&e)===e})}}},$bitsAnySet:{compileElementSelector:function(e){var r=v(e,"$bitsAnySet");return function(e){var t=m(e,r.length);return t&&r.some(function(e,r){return(~t[r]&e)!==e})}}},$bitsAllClear:{compileElementSelector:function(e){var r=v(e,"$bitsAllClear");return function(e){var t=m(e,r.length);return t&&r.every(function(e,r){return!(t[r]&e)})}}},$bitsAnyClear:{compileElementSelector:function(e){var r=v(e,"$bitsAnyClear");return function(e){var t=m(e,r.length);return t&&r.some(function(e,r){return(t[r]&e)!==e})}}},$regex:{compileElementSelector:function(e,r){if(!("string"==typeof e||e instanceof RegExp))throw Error("$regex has to be a string or RegExp");var t=void 0;if(void 0!==r.$options){if(/[^gim]/.test(r.$options))throw new Error("Only the i, m, and g regexp options are supported");var n=e instanceof RegExp?e.source:e;t=new RegExp(n,r.$options)}else t=e instanceof RegExp?e:new RegExp(e);return q(t)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(e,r,t){if(!T._isPlainObject(e))throw Error("$elemMatch need an object");var n=!$(Object.keys(e).filter(function(e){return!U.call(N,e)}).reduce(function(r,t){var n;return Object.assign(r,(n={},n[t]=e[t],n))},{}),!0),i=void 0;return i=n?c(e,t,{inElemMatch:!0}):u(e,t),function(e){if(!Array.isArray(e))return!1;for(var r=0;r<e.length;++r){var t=e[r],o=void 0;if(n){if(!w(t))return!1;o=t}else o=[{value:t,dontIterate:!0}];if(i(o).result)return r}return!1}}}},N={$and:function(e,r,t){return K(s(e,r,t))},$or:function(e,r,t){var n=s(e,r,t);return 1===n.length?n[0]:function(e){return{result:n.some(function(r){return r(e).result})}}},$nor:function(e,r,t){var n=s(e,r,t);return function(e){return{result:n.every(function(r){return!r(e).result})}}},$where:function(e,r){return r._recordPathUsed(""),r._hasWhere=!0,e instanceof Function||(e=Function("obj","return "+e)),function(r){return{result:e.call(r,r)}}},$comment:function(){return function(){return{result:!0}}}},L={$eq:function(e){return f(l(e))},$not:function(e,r,t){return b(u(e,t))},$ne:function(e){return b(f(l(e)))},$nin:function(e){return b(f(Q.$in.compileElementSelector(e)))},$exists:function(e){var r=f(function(e){return void 0!==e});return e?r:b(r)},$options:function(e,r){if(!U.call(r,"$regex"))throw Error("$options needs a $regex");return h},$maxDistance:function(e,r){if(!r.$near)throw Error("$maxDistance needs a $near");return h},$all:function(e,r,t){if(!Array.isArray(e))throw Error("$all requires array");if(0===e.length)return A;var n=e.map(function(e){if($(e))throw Error("no $ expressions in $all");return u(e,t)});return W(n)},$near:function(e,r,t,n){if(!n)throw Error("$near can't be inside another $ operator");t._hasGeoQuery=!0;var i=void 0,a=void 0,s=void 0;if(T._isPlainObject(e)&&U.call(e,"$geometry"))i=e.$maxDistance,a=e.$geometry,s=function(e){return e?e.type?"Point"===e.type?o.pointDistance(a,e):o.geometryWithinRadius(e,a,i)?0:i+1:o.pointDistance(a,{type:"Point",coordinates:S(e)}):null};else{if(i=r.$maxDistance,!w(e))throw Error("$near argument must be coordinate pair or GeoJSON");a=S(e),s=function(e){return w(e)?d(a,e):null}}return function(e){var r={result:!1};return p(e).every(function(e){var n=void 0;if(!t._isUpdate){if("object"!==(0,D.default)(e.value))return!0;if(null===(n=s(e.value))||n>i)return!0;if(void 0!==r.distance&&r.distance<=n)return!0}return r.result=!0,r.distance=n,e.arrayIndices?r.arrayIndices=e.arrayIndices:delete r.arrayIndices,!t._isUpdate}),r}}},K=a,W=a;_={makeLookupFunction:j},g=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&r.field&&(e+=" for field '"+r.field+"'");var t=new Error(e);return t.name="MinimongoError",t}},"cursor.js":function(e,r,t){function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("babel-runtime/helpers/classCallCheck"));t.export({default:function(){return c}});var a=void 0;t.watch(e("./local_collection.js"),{default:function(e){a=e}},0);var s=void 0;t.watch(e("./common.js"),{hasOwn:function(e){s=e}},1);var c=function(){function e(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,o.default)(this,e),this.collection=r,this.sorter=null,this.matcher=new w.Matcher(t),a._selectorIsIdPerhapsAsObject(t)?this._selectorId=s.call(t,"_id")?t._id:t:(this._selectorId=void 0,(this.matcher.hasGeoQuery()||n.sort)&&(this.sorter=new w.Sorter(n.sort||[],{matcher:this.matcher}))),this.skip=n.skip||0,this.limit=n.limit,this.fields=n.fields,this._projectionFn=a._compileProjection(this.fields||{}),this._transform=a.wrapTransform(n.transform),void 0!==f&&(this.reactive=void 0===n.reactive||n.reactive)}return e.prototype.count=function(){function e(){return this.reactive&&this._depend({added:!0,removed:!0},!0),this._getRawObjects({ordered:!0}).length}return e}(),e.prototype.fetch=function(){function e(){var e=[];return this.forEach(function(r){e.push(r)}),e}return e}(),e.prototype[v.iterator]=function(){var e=this;this.reactive&&this._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0});var r=0,t=this._getRawObjects({ordered:!0});return{next:function(){if(r<t.length){var n=e._projectionFn(t[r++]);return e._transform&&(n=e._transform(n)),{value:n}}return{done:!0}}}},e.prototype.forEach=function(){function e(e,r){var t=this;this.reactive&&this._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0}),this._getRawObjects({ordered:!0}).forEach(function(n,i){n=t._projectionFn(n),t._transform&&(n=t._transform(n)),e.call(r,n,i,t)})}return e}(),e.prototype.getTransform=function(){function e(){return this._transform}return e}(),e.prototype.map=function(){function e(e,r){var t=this,n=[];return this.forEach(function(i,o){n.push(e.call(r,i,o,t))}),n}return e}(),e.prototype.observe=function(){function e(e){return a._observeFromObserveChanges(this,e)}return e}(),e.prototype.observeChanges=function(){function e(e){var r=this,t=a._observeChangesCallbacksAreOrdered(e);if(!e._allow_unordered&&!t&&(this.skip||this.limit))throw new Error("must use ordered observe (ie, 'addedBefore' instead of 'added') with skip or limit");if(this.fields&&(0===this.fields._id||!1===this.fields._id))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var n={cursor:this,dirty:!1,distances:this.matcher.hasGeoQuery()&&t&&new a._IdMap,matcher:this.matcher,ordered:t,projectionFn:this._projectionFn,resultsSnapshot:null,sorter:t&&this.sorter},o=void 0;this.reactive&&(o=this.collection.next_qid++,this.collection.queries[o]=n),n.results=this._getRawObjects({ordered:t,distances:n.distances}),this.collection.paused&&(n.resultsSnapshot=t?[]:new a._IdMap);var s=function(e){if(!e)return function(){};var t=r;return function(){var r=this;if(!t.collection.paused){var n=arguments;t.collection._observeQueue.queueTask(function(){e.apply(r,n)})}}};if(n.added=s(e.added),n.changed=s(e.changed),n.removed=s(e.removed),t&&(n.addedBefore=s(e.addedBefore),n.movedBefore=s(e.movedBefore)),!e._suppress_initial&&!this.collection.paused){var c=t?n.results:n.results._map;Object.keys(c).forEach(function(e){var o=c[e],a=i.clone(o);delete a._id,t&&n.addedBefore(o._id,r._projectionFn(a),null),n.added(o._id,r._projectionFn(a))})}var u=Object.assign(new a.ObserveHandle,{collection:this.collection,stop:function(){r.reactive&&delete r.collection.queries[o]}});return this.reactive&&f.active&&f.onInvalidate(function(){u.stop()}),this.collection._observeQueue.drain(),u}return e}(),e.prototype.rewind=function(){function e(){}return e}(),e.prototype._depend=function(){function e(e,r){if(f.active){var t=new f.Dependency,n=t.changed.bind(t);t.depend();var i={_allow_unordered:r,_suppress_initial:!0};["added","addedBefore","changed","movedBefore","removed"].forEach(function(r){e[r]&&(i[r]=n)}),this.observeChanges(i)}}return e}(),e.prototype._getCollectionName=function(){function e(){return this.collection.name}return e}(),e.prototype._getRawObjects=function(){function e(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.ordered?[]:new a._IdMap;if(void 0!==this._selectorId){if(this.skip)return t;var n=this.collection._docs.get(this._selectorId);return n&&(r.ordered?t.push(n):t.set(this._selectorId,n)),t}var i=void 0;return this.matcher.hasGeoQuery()&&r.ordered&&(r.distances?(i=r.distances).clear():i=new a._IdMap),this.collection._docs.forEach(function(n,o){var a=e.matcher.documentMatches(n);return a.result&&(r.ordered?(t.push(n),i&&void 0!==a.distance&&i.set(o,a.distance)):t.set(o,n)),!e.limit||e.skip||e.sorter||t.length!==e.limit}),r.ordered?(this.sorter&&t.sort(this.sorter.getComparator({distances:i})),this.limit||this.skip?t.slice(this.skip,this.limit?this.limit+this.skip:t.length):t):t}return e}(),e.prototype._publishCursor=function(){function e(e){if(!Package.mongo)throw new Error("Can't publish from Minimongo without the `mongo` package.");if(!this.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");return Package.mongo.Mongo.Collection._publishCursor(this,e,this.collection.name)}return e}(),e}()},"local_collection.js":function(r,t,o){function d(e){return e&&e.__esModule?e:{default:e}}function l(e){e&&"object"===(void 0===e?"undefined":(0,m.default)(e))&&JSON.stringify(e,function(e,r){return h(e),r})}function h(e){var r=void 0;if("string"==typeof e&&(r=e.match(/^\$|\.|\0/)))throw g("Key "+e+" must not "+x[r[0]])}function p(e,r){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=!1,i=0;i<r.length;i++){var o=i===r.length-1,a=r[i];if(!j(e)){if(t.noCreate)return;var s=g("cannot use the part '"+a+"' to traverse "+e);throw s.setPropertyError=!0,s}if(e instanceof Array){if(t.forbidArray)return null;if("$"===a){if(n)throw g("Too many positional (i.e. '$') elements");if(!t.arrayIndices||!t.arrayIndices.length)throw g("The positional operator did not find the match needed from the query");a=t.arrayIndices[0],n=!0}else{if(!A(a)){if(t.noCreate)return;throw g("can't append to array using string field name ["+a+"]")}a=parseInt(a)}if(o&&(r[i]=a),t.noCreate&&a>=e.length)return;for(;e.length<a;)e.push(null);if(!o)if(e.length===a)e.push({});else if("object"!==(0,m.default)(e[a]))throw g("can't modify field '"+r[i+1]+"' of list value "+JSON.stringify(e[a]))}else if(h(a),!(a in e)){if(t.noCreate)return;o||(e[a]={})}if(o)return e;e=e[a]}}var v=d(r("babel-runtime/helpers/toConsumableArray")),m=d(r("babel-runtime/helpers/typeof")),y=d(r("babel-runtime/helpers/possibleConstructorReturn")),_=d(r("babel-runtime/helpers/inherits")),b=d(r("babel-runtime/helpers/classCallCheck"));o.export({default:function(){return C}});var E=void 0;o.watch(r("./cursor.js"),{default:function(e){E=e}},0);var $=void 0;o.watch(r("./observe_handle.js"),{default:function(e){$=e}},1);var O=void 0,j=void 0,A=void 0,k=void 0,I=void 0,S=void 0;o.watch(r("./common.js"),{hasOwn:function(e){O=e},isIndexable:function(e){j=e},isNumericKey:function(e){A=e},isOperatorObject:function(e){k=e},populateDocumentWithQueryFields:function(e){I=e},projectionDetails:function(e){S=e}},2);var C=function(){function r(t){(0,b.default)(this,r),this.name=t,this._docs=new r._IdMap,this._observeQueue=new e._SynchronousQueue,this.next_qid=1,this.queries=Object.create(null),this._savedOriginals=null,this.paused=!1}return r.prototype.find=function(){function e(e,t){return 0===arguments.length&&(e={}),new r.Cursor(this,e,t)}return e}(),r.prototype.findOne=function(){function e(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return 0===arguments.length&&(e={}),r.limit=1,this.find(e,r).fetch()[0]}return e}(),r.prototype.insert=function(){function t(t,n){var o=this;l(t=i.clone(t)),O.call(t,"_id")||(t._id=r._useOID?new s.ObjectID:u.id());var a=t._id;if(this._docs.has(a))throw g("Duplicate _id '"+a+"'");this._saveOriginal(a,void 0),this._docs.set(a,t);var c=[];return Object.keys(this.queries).forEach(function(e){var n=o.queries[e];if(!n.dirty){var i=n.matcher.documentMatches(t);i.result&&(n.distances&&void 0!==i.distance&&n.distances.set(a,i.distance),n.cursor.skip||n.cursor.limit?c.push(e):r._insertInResults(n,t))}}),c.forEach(function(e){o.queries[e]&&o._recomputeResults(o.queries[e])}),this._observeQueue.drain(),n&&e.defer(function(){n(null,a)}),a}return t}(),r.prototype.pauseObservers=function(){function e(){var e=this;this.paused||(this.paused=!0,Object.keys(this.queries).forEach(function(r){var t=e.queries[r];t.resultsSnapshot=i.clone(t.results)}))}return e}(),r.prototype.remove=function(){function t(t,n){var o=this;if(this.paused&&!this._savedOriginals&&i.equals(t,{})){var a=this._docs.size();return this._docs.clear(),Object.keys(this.queries).forEach(function(e){var r=o.queries[e];r.ordered?r.results=[]:r.results.clear()}),n&&e.defer(function(){n(null,a)}),a}var s=new w.Matcher(t),c=[];this._eachPossiblyMatchingDoc(t,function(e,r){s.documentMatches(e).result&&c.push(r)});for(var u=[],f=[],d=function(e){var r=c[e],t=o._docs.get(r);Object.keys(o.queries).forEach(function(e){var r=o.queries[e];r.dirty||r.matcher.documentMatches(t).result&&(r.cursor.skip||r.cursor.limit?u.push(e):f.push({qid:e,doc:t}))}),o._saveOriginal(r,t),o._docs.remove(r)},l=0;l<c.length;l++)d(l);f.forEach(function(e){var t=o.queries[e.qid];t&&(t.distances&&t.distances.remove(e.doc._id),r._removeFromResults(t,e.doc))}),u.forEach(function(e){var r=o.queries[e];r&&o._recomputeResults(r)}),this._observeQueue.drain();var h=c.length;return n&&e.defer(function(){n(null,h)}),h}return t}(),r.prototype.resumeObservers=function(){function e(){var e=this;this.paused&&(this.paused=!1,Object.keys(this.queries).forEach(function(t){var n=e.queries[t];n.dirty?(n.dirty=!1,e._recomputeResults(n,n.resultsSnapshot)):r._diffQueryChanges(n.ordered,n.resultsSnapshot,n.results,n,{projectionFn:n.projectionFn}),n.resultsSnapshot=null}),this._observeQueue.drain())}return e}(),r.prototype.retrieveOriginals=function(){function e(){if(!this._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var e=this._savedOriginals;return this._savedOriginals=null,e}return e}(),r.prototype.saveOriginals=function(){function e(){if(this._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");this._savedOriginals=new r._IdMap}return e}(),r.prototype.update=function(){function t(t,n,o,a){var s=this;!a&&o instanceof Function&&(a=o,o=null),o||(o={});var c=new w.Matcher(t,!0),u={},f=new r._IdMap,d=r._idsMatchedBySelector(t);Object.keys(this.queries).forEach(function(e){var t=s.queries[e];if((t.cursor.skip||t.cursor.limit)&&!s.paused){if(t.results instanceof r._IdMap)return void(u[e]=t.results.clone());if(!(t.results instanceof Array))throw new Error("Assertion failed: query.results not an array");var n=function(e){if(f.has(e._id))return f.get(e._id);var r=d&&!d.some(function(r){return i.equals(r,e._id)})?e:i.clone(e);return f.set(e._id,r),r};u[e]=t.results.map(n)}});var l={},h=0;this._eachPossiblyMatchingDoc(t,function(e,r){var t=c.documentMatches(e);return!(t.result&&(s._saveOriginal(r,e),s._modifyAndNotify(e,n,l,t.arrayIndices),++h,!o.multi))}),Object.keys(l).forEach(function(e){var r=s.queries[e];r&&s._recomputeResults(r,u[e])}),this._observeQueue.drain();var p=void 0;if(0===h&&o.upsert){var v=r._createUpsertDocument(t,n);!v._id&&o.insertedId&&(v._id=o.insertedId),p=this.insert(v),h=1}var m=void 0;return o._returnObject?(m={numberAffected:h},void 0!==p&&(m.insertedId=p)):m=h,a&&e.defer(function(){a(null,m)}),m}return t}(),r.prototype.upsert=function(){function e(e,r,t,n){return n||"function"!=typeof t||(n=t,t={}),this.update(e,r,Object.assign({},t,{upsert:!0,_returnObject:!0}),n)}return e}(),r.prototype._eachPossiblyMatchingDoc=function(){function e(e,t){var n=this,i=r._idsMatchedBySelector(e);i?i.some(function(e){var r=n._docs.get(e);if(r)return!1===t(r,e)}):this._docs.forEach(t)}return e}(),r.prototype._modifyAndNotify=function(){function e(e,t,n,o){var a=this,s={};Object.keys(this.queries).forEach(function(r){var t=a.queries[r];t.dirty||(t.ordered?s[r]=t.matcher.documentMatches(e).result:s[r]=t.results.has(e._id))});var c=i.clone(e);r._modify(e,t,{arrayIndices:o}),Object.keys(this.queries).forEach(function(t){var i=a.queries[t];if(!i.dirty){var o=i.matcher.documentMatches(e),u=o.result,f=s[t];u&&i.distances&&void 0!==o.distance&&i.distances.set(e._id,o.distance),i.cursor.skip||i.cursor.limit?(f||u)&&(n[t]=!0):f&&!u?r._removeFromResults(i,e):!f&&u?r._insertInResults(i,e):f&&u&&r._updateInResults(i,e,c)}})}return e}(),r.prototype._recomputeResults=function(){function e(e,t){this.paused?e.dirty=!0:(this.paused||t||(t=e.results),e.distances&&e.distances.clear(),e.results=e.cursor._getRawObjects({distances:e.distances,ordered:e.ordered}),this.paused||r._diffQueryChanges(e.ordered,t,e.results,e,{projectionFn:e.projectionFn}))}return e}(),r.prototype._saveOriginal=function(){function e(e,r){this._savedOriginals&&(this._savedOriginals.has(e)||this._savedOriginals.set(e,i.clone(r)))}return e}(),r}();C.Cursor=E,C.ObserveHandle=$,C._CachingChangeObserver=function(){function e(){var r=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,b.default)(this,e);var o=t.callbacks&&C._observeChangesCallbacksAreOrdered(t.callbacks);if(O.call(t,"ordered")){if(this.ordered=t.ordered,t.callbacks&&t.ordered!==o)throw Error("ordered option doesn't match callbacks")}else{if(!t.callbacks)throw Error("must provide ordered or callbacks");this.ordered=o}var a=t.callbacks||{};this.ordered?(this.docs=new c(s.idStringify),this.applyChange={addedBefore:function(e,t,n){var o=i.clone(t);o._id=e,a.addedBefore&&a.addedBefore.call(r,e,t,n),a.added&&a.added.call(r,e,t),r.docs.putBefore(e,o,n||null)},movedBefore:function(e,t){var n=r.docs.get(e);a.movedBefore&&a.movedBefore.call(r,e,t),r.docs.moveBefore(e,t||null)}}):(this.docs=new C._IdMap,this.applyChange={added:function(e,t){var n=i.clone(t);a.added&&a.added.call(r,e,t),n._id=e,r.docs.set(e,n)}}),this.applyChange.changed=function(e,t){var o=r.docs.get(e);if(!o)throw new Error("Unknown id for changed: "+e);a.changed&&a.changed.call(r,e,i.clone(t)),n.applyChanges(o,t)},this.applyChange.removed=function(e){a.removed&&a.removed.call(r,e),r.docs.remove(e)}}return e}(),C._IdMap=function(e){function r(){return(0,b.default)(this,r),(0,y.default)(this,e.call(this,s.idStringify,s.idParse))}return(0,_.default)(r,e),r}(a),C.wrapTransform=function(e){if(!e)return null;if(e.__wrappedTransform__)return e;var r=function(r){if(!O.call(r,"_id"))throw new Error("can only transform documents with _id");var t=r._id,n=f.nonreactive(function(){return e(r)});if(!C._isPlainObject(n))throw new Error("transform must return object");if(O.call(n,"_id")){if(!i.equals(n._id,t))throw new Error("transformed document can't have different _id")}else n._id=t;return n};return r.__wrappedTransform__=!0,r},C._binarySearch=function(e,r,t){for(var n=0,i=r.length;i>0;){var o=Math.floor(i/2);e(t,r[n+o])>=0?(n+=o+1,i-=o+1):i=o}return n},C._checkSupportedProjection=function(e){if(e!==Object(e)||Array.isArray(e))throw g("fields option must be an object");Object.keys(e).forEach(function(r){if(r.split(".").includes("$"))throw g("Minimongo doesn't support $ operator in projections yet.");var t=e[r];if("object"===(void 0===t?"undefined":(0,m.default)(t))&&["$elemMatch","$meta","$slice"].some(function(e){return O.call(t,e)}))throw g("Minimongo doesn't support operators in projections yet.");if(![1,0,!0,!1].includes(t))throw g("Projection values should be one of 1, 0, true, or false")})},C._compileProjection=function(e){C._checkSupportedProjection(e);var r=void 0===e._id||e._id,t=S(e),n=function(e,r){if(Array.isArray(e))return e.map(function(e){return n(e,r)});var o=t.including?{}:i.clone(e);return Object.keys(r).forEach(function(a){if(O.call(e,a)){var s=r[a];s===Object(s)?e[a]===Object(e[a])&&(o[a]=n(e[a],s)):t.including?o[a]=i.clone(e[a]):delete o[a]}}),o};return function(e){var i=n(e,t.tree);return r&&O.call(e,"_id")&&(i._id=e._id),!r&&O.call(i,"_id")&&delete i._id,i}},C._createUpsertDocument=function(e,r){var t=I(e),n=C._isModificationMod(r),i={};if(t._id&&(i._id=t._id,delete t._id),C._modify(i,{$set:t}),C._modify(i,r,{isInsert:!0}),n)return i;var o=Object.assign({},r);return i._id&&(o._id=i._id),o},C._diffObjects=function(e,r,t){return n.diffObjects(e,r,t)},C._diffQueryChanges=function(e,r,t,i,o){return n.diffQueryChanges(e,r,t,i,o)},C._diffQueryOrderedChanges=function(e,r,t,i){return n.diffQueryOrderedChanges(e,r,t,i)},C._diffQueryUnorderedChanges=function(e,r,t,i){return n.diffQueryUnorderedChanges(e,r,t,i)},C._findInOrderedResults=function(e,r){if(!e.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var t=0;t<e.results.length;t++)if(e.results[t]===r)return t;throw Error("object missing from query")},C._idsMatchedBySelector=function(e){if(C._selectorIsId(e))return[e];if(!e)return null;if(O.call(e,"_id"))return C._selectorIsId(e._id)?[e._id]:e._id&&Array.isArray(e._id.$in)&&e._id.$in.length&&e._id.$in.every(C._selectorIsId)?e._id.$in:null;if(Array.isArray(e.$and))for(var r=0;r<e.$and.length;++r){var t=C._idsMatchedBySelector(e.$and[r]);if(t)return t}return null},C._insertInResults=function(e,r){var t=i.clone(r);if(delete t._id,e.ordered){if(e.sorter){var n=C._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,r),o=e.results[n+1];o=o?o._id:null,e.addedBefore(r._id,e.projectionFn(t),o)}else e.addedBefore(r._id,e.projectionFn(t),null),e.results.push(r);e.added(r._id,e.projectionFn(t))}else e.added(r._id,e.projectionFn(t)),e.results.set(r._id,r)},C._insertInSortedList=function(e,r,t){if(0===r.length)return r.push(t),0;var n=C._binarySearch(e,r,t);return r.splice(n,0,t),n},C._isModificationMod=function(e){var r=!1,t=!1;if(Object.keys(e).forEach(function(e){"$"===e.substr(0,1)?r=!0:t=!0}),r&&t)throw new Error("Update parameter cannot have both modifier and non-modifier fields.");return r},C._isPlainObject=function(e){return e&&3===C._f._type(e)},C._modify=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!C._isPlainObject(r))throw g("Modifier must be an object");r=i.clone(r);var n=k(r),o=n?i.clone(e):r;if(n){if(Object.keys(r).forEach(function(e){var n=t.isInsert&&"$setOnInsert"===e,i=M[n?"$set":e],a=r[e];if(!i)throw g("Invalid modifier specified "+e);Object.keys(a).forEach(function(r){var n=a[r];if(""===r)throw g("An empty update path is not valid.");var s=r.split(".");if(!s.every(Boolean))throw g("The update path '"+r+"' contains an empty field name, which is not allowed.");var c=p(o,s,{arrayIndices:t.arrayIndices,forbidArray:"$rename"===e,noCreate:P[e]});i(c,s.pop(),n,r,o)})}),e._id&&!i.equals(e._id,o._id))throw g('After applying the update to the document {_id: "'+e._id+"\", ...}, the (immutable) field '_id' was found to have been altered to _id: \""+o._id+'"')}else{if(e._id&&r._id&&!i.equals(e._id,r._id))throw g('The _id field cannot be changed from {_id: "'+e._id+'"} to {_id: "'+r._id+'"}');l(r)}Object.keys(e).forEach(function(r){"_id"!==r&&delete e[r]}),Object.keys(o).forEach(function(r){e[r]=o[r]})},C._observeFromObserveChanges=function(e,r){var t=e.getTransform()||function(e){return e},o=!!r._suppress_initial,a=void 0;if(C._observeCallbacksAreOrdered(r)){var s=!r._no_indices;a={addedBefore:function(e,n,i){if(!o&&(r.addedAt||r.added)){var a=t(Object.assign(n,{_id:e}));r.addedAt?r.addedAt(a,s?i?this.docs.indexOf(i):this.docs.size():-1,i):r.added(a)}},changed:function(e,o){if(r.changedAt||r.changed){var a=i.clone(this.docs.get(e));if(!a)throw new Error("Unknown id for changed: "+e);var c=t(i.clone(a));n.applyChanges(a,o),r.changedAt?r.changedAt(t(a),c,s?this.docs.indexOf(e):-1):r.changed(t(a),c)}},movedBefore:function(e,n){if(r.movedTo){var o=s?this.docs.indexOf(e):-1,a=s?n?this.docs.indexOf(n):this.docs.size():-1;a>o&&--a,r.movedTo(t(i.clone(this.docs.get(e))),o,a,n||null)}},removed:function(e){if(r.removedAt||r.removed){var n=t(this.docs.get(e));r.removedAt?r.removedAt(n,s?this.docs.indexOf(e):-1):r.removed(n)}}}}else a={added:function(e,n){!o&&r.added&&r.added(t(Object.assign(n,{_id:e})))},changed:function(e,o){if(r.changed){var a=this.docs.get(e),s=i.clone(a);n.applyChanges(s,o),r.changed(t(s),t(i.clone(a)))}},removed:function(e){r.removed&&r.removed(t(this.docs.get(e)))}};var c=new C._CachingChangeObserver({callbacks:a}),u=e.observeChanges(c.applyChange);return o=!1,u},C._observeCallbacksAreOrdered=function(e){if(e.added&&e.addedAt)throw new Error("Please specify only one of added() and addedAt()");if(e.changed&&e.changedAt)throw new Error("Please specify only one of changed() and changedAt()");if(e.removed&&e.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(e.addedAt||e.changedAt||e.movedTo||e.removedAt)},C._observeChangesCallbacksAreOrdered=function(e){if(e.added&&e.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!e.addedBefore&&!e.movedBefore)},C._removeFromResults=function(e,r){if(e.ordered){var t=C._findInOrderedResults(e,r);e.removed(r._id),e.results.splice(t,1)}else{var n=r._id;e.removed(r._id),e.results.remove(n)}},C._selectorIsId=function(e){return"number"==typeof e||"string"==typeof e||e instanceof s.ObjectID},C._selectorIsIdPerhapsAsObject=function(e){return C._selectorIsId(e)||C._selectorIsId(e&&e._id)&&1===Object.keys(e).length},C._updateInResults=function(e,r,t){if(!i.equals(r._id,t._id))throw new Error("Can't change a doc's _id while updating");var o=e.projectionFn,a=n.makeChangedFields(o(r),o(t));if(e.ordered){var s=C._findInOrderedResults(e,r);if(Object.keys(a).length&&e.changed(r._id,a),e.sorter){e.results.splice(s,1);var c=C._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,r);if(s!==c){var u=e.results[c+1];u=u?u._id:null,e.movedBefore&&e.movedBefore(r._id,u)}}}else Object.keys(a).length&&(e.changed(r._id,a),e.results.set(r._id,r))};var M={$currentDate:function(e,r,t){if("object"===(void 0===t?"undefined":(0,m.default)(t))&&O.call(t,"$type")){if("date"!==t.$type)throw g("Minimongo does currently only support the date type in $currentDate modifiers",{field:r})}else if(!0!==t)throw g("Invalid $currentDate modifier",{field:r});e[r]=new Date},$min:function(e,r,t){if("number"!=typeof t)throw g("Modifier $min allowed for numbers only",{field:r});if(r in e){if("number"!=typeof e[r])throw g("Cannot apply $min modifier to non-number",{field:r});e[r]>t&&(e[r]=t)}else e[r]=t},$max:function(e,r,t){if("number"!=typeof t)throw g("Modifier $max allowed for numbers only",{field:r});if(r in e){if("number"!=typeof e[r])throw g("Cannot apply $max modifier to non-number",{field:r});e[r]<t&&(e[r]=t)}else e[r]=t},$inc:function(e,r,t){if("number"!=typeof t)throw g("Modifier $inc allowed for numbers only",{field:r});if(r in e){if("number"!=typeof e[r])throw g("Cannot apply $inc modifier to non-number",{field:r});e[r]+=t}else e[r]=t},$set:function(e,r,t){if(e!==Object(e)){var n=g("Cannot set property on non-object field",{field:r});throw n.setPropertyError=!0,n}if(null===e){var i=g("Cannot set property on null",{field:r});throw i.setPropertyError=!0,i}l(t),e[r]=t},$setOnInsert:function(e,r,t){},$unset:function(e,r,t){void 0!==e&&(e instanceof Array?r in e&&(e[r]=null):delete e[r])},$push:function(e,r,t){if(void 0===e[r]&&(e[r]=[]),!(e[r]instanceof Array))throw g("Cannot apply $push modifier to non-array",{field:r});if(!t||!t.$each)return l(t),void e[r].push(t);var n=t.$each;if(!(n instanceof Array))throw g("$each must be an array",{field:r});l(n);var i=void 0;if("$position"in t){if("number"!=typeof t.$position)throw g("$position must be a numeric value",{field:r});if(t.$position<0)throw g("$position in $push must be zero or positive",{field:r});i=t.$position}var o=void 0;if("$slice"in t){if("number"!=typeof t.$slice)throw g("$slice must be a numeric value",{field:r});o=t.$slice}var a=void 0;if(t.$sort){if(void 0===o)throw g("$sort requires $slice to be present",{field:r});a=new w.Sorter(t.$sort).getComparator(),n.forEach(function(e){if(3!==C._f._type(e))throw g("$push like modifiers using $sort require all elements to be objects",{field:r})})}if(void 0===i)n.forEach(function(t){e[r].push(t)});else{var s,c=[i,0];n.forEach(function(e){c.push(e)}),(s=e[r]).splice.apply(s,c)}a&&e[r].sort(a),void 0!==o&&(e[r]=0===o?[]:o<0?e[r].slice(o):e[r].slice(0,o))},$pushAll:function(e,r,t){if(!("object"===(void 0===t?"undefined":(0,m.default)(t))&&t instanceof Array))throw g("Modifier $pushAll/pullAll allowed for arrays only");l(t);var n=e[r];if(void 0===n)e[r]=t;else{if(!(n instanceof Array))throw g("Cannot apply $pushAll modifier to non-array",{field:r});n.push.apply(n,(0,v.default)(t))}},$addToSet:function(e,r,t){var n=!1;"object"===(void 0===t?"undefined":(0,m.default)(t))&&"$each"===Object.keys(t)[0]&&(n=!0);var i=n?t.$each:[t];l(i);var o=e[r];if(void 0===o)e[r]=i;else{if(!(o instanceof Array))throw g("Cannot apply $addToSet modifier to non-array",{field:r});i.forEach(function(e){o.some(function(r){return C._f._equal(e,r)})||o.push(e)})}},$pop:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw g("Cannot apply $pop modifier to non-array",{field:r});"number"==typeof t&&t<0?n.splice(0,1):n.pop()}}},$pull:function(e,r,t){if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw g("Cannot apply $pull/pullAll modifier to non-array",{field:r});var i=void 0;if(null==t||"object"!==(void 0===t?"undefined":(0,m.default)(t))||t instanceof Array)i=n.filter(function(e){return!C._f._equal(e,t)});else{var o=new w.Matcher(t);i=n.filter(function(e){return!o.documentMatches(e).result})}e[r]=i}}},$pullAll:function(e,r,t){if(!("object"===(void 0===t?"undefined":(0,m.default)(t))&&t instanceof Array))throw g("Modifier $pushAll/pullAll allowed for arrays only",{field:r});if(void 0!==e){var n=e[r];if(void 0!==n){if(!(n instanceof Array))throw g("Cannot apply $pull/pullAll modifier to non-array",{field:r});e[r]=n.filter(function(e){return!t.some(function(r){return C._f._equal(e,r)})})}}},$rename:function(e,r,t,n,i){if(n===t)throw g("$rename source must differ from target",{field:r});if(null===e)throw g("$rename source field invalid",{field:r});if("string"!=typeof t)throw g("$rename target must be a string",{field:r});if(t.includes("\0"))throw g("The 'to' field for $rename cannot contain an embedded null byte",{field:r});if(void 0!==e){var o=e[r];delete e[r];var a=t.split("."),s=p(i,a,{forbidArray:!0});if(null===s)throw g("$rename target field invalid",{field:r});s[a.pop()]=o}},$bit:function(e,r,t){throw g("$bit is not supported",{field:r})}},P={$pop:!0,$pull:!0,$pullAll:!0,$rename:!0,$unset:!0},x={$:"start with '$'",".":"contain '.'","\0":"contain null bytes"}},"matcher.js":function(e,r,t){function n(e){return e&&e.__esModule?e:{default:e}}var o=n(e("babel-runtime/helpers/classCallCheck"));t.export({default:function(){return d}});var a=void 0;t.watch(e("./local_collection.js"),{default:function(e){a=e}},0);var c=void 0,u=void 0,f=void 0;t.watch(e("./common.js"),{compileDocumentSelector:function(e){c=e},hasOwn:function(e){u=e},nothingMatcher:function(e){f=e}},1);var d=function(){function e(r,t){(0,o.default)(this,e),this._paths={},this._hasGeoQuery=!1,this._hasWhere=!1,this._isSimple=!0,this._matchingDocument=void 0,this._selector=null,this._docMatcher=this._compileSelector(r),this._isUpdate=t}return e.prototype.documentMatches=function(){function e(e){if(e!==Object(e))throw Error("documentMatches needs a document");return this._docMatcher(e)}return e}(),e.prototype.hasGeoQuery=function(){function e(){return this._hasGeoQuery}return e}(),e.prototype.hasWhere=function(){function e(){return this._hasWhere}return e}(),e.prototype.isSimple=function(){function e(){return this._isSimple}return e}(),e.prototype._compileSelector=function(){function e(e){if(e instanceof Function)return this._isSimple=!1,this._selector=e,this._recordPathUsed(""),function(r){return{result:!!e.call(r)}};if(a._selectorIsId(e))return this._selector={_id:e},this._recordPathUsed("_id"),function(r){return{result:i.equals(r._id,e)}};if(!e||u.call(e,"_id")&&!e._id)return this._isSimple=!1,f;if(Array.isArray(e)||i.isBinary(e)||"boolean"==typeof e)throw new Error("Invalid selector: "+e);return this._selector=i.clone(e),c(e,this,{isRoot:!0})}return e}(),e.prototype._getPaths=function(){function e(){return Object.keys(this._paths)}return e}(),e.prototype._recordPathUsed=function(){function e(e){this._paths[e]=!0}return e}(),e}();a._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:Array.isArray(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:i.isBinary(e)?5:e instanceof s.ObjectID?7:3},_equal:function(e,r){return i.equals(e,r,{keyOrderSensitive:!0})},_typeorder:function(e){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][e]},_cmp:function(e,r){if(void 0===e)return void 0===r?0:-1;if(void 0===r)return 1;var t=a._f._type(e),n=a._f._type(r),i=a._f._typeorder(t),o=a._f._typeorder(n);if(i!==o)return i<o?-1:1;if(t!==n)throw Error("Missing type coercion logic in _cmp");if(7===t&&(t=n=2,e=e.toHexString(),r=r.toHexString()),9===t&&(t=n=1,e=e.getTime(),r=r.getTime()),1===t)return e-r;if(2===n)return e<r?-1:e===r?0:1;if(3===t){var s=function(e){var r=[];return Object.keys(e).forEach(function(t){r.push(t,e[t])}),r};return a._f._cmp(s(e),s(r))}if(4===t)for(var c=0;;c++){if(c===e.length)return c===r.length?0:-1;if(c===r.length)return 1;var u=a._f._cmp(e[c],r[c]);if(0!==u)return u}if(5===t){if(e.length!==r.length)return e.length-r.length;for(var f=0;f<e.length;f++){if(e[f]<r[f])return-1;if(e[f]>r[f])return 1}return 0}if(8===t)return e?r?0:1:r?-1:0;if(10===t)return 0;if(11===t)throw Error("Sorting not supported on regular expression");if(13===t)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}}},"minimongo_common.js":function(e,r,t){var n=void 0;t.watch(e("./local_collection.js"),{default:function(e){n=e}},0);var i=void 0;t.watch(e("./matcher.js"),{default:function(e){i=e}},1);var o=void 0;t.watch(e("./sorter.js"),{default:function(e){o=e}},2),b=n,w={LocalCollection:n,Matcher:i,Sorter:o}},"observe_handle.js":function(e,r,t){function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e("babel-runtime/helpers/classCallCheck"));t.export({default:function(){return o}});var o=function(){function e(){(0,i.default)(this,e)}return e}()},"sorter.js":function(e,r,t){function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(r,t){for(var n=0;n<e.length;++n){var i=e[n](r,t);if(0!==i)return i}return 0}}var o=n(e("babel-runtime/helpers/typeof")),a=n(e("babel-runtime/helpers/classCallCheck"));t.export({default:function(){return p}});var s=void 0,c=void 0,u=void 0,f=void 0,d=void 0,l=void 0,h=void 0;t.watch(e("./common.js"),{ELEMENT_OPERATORS:function(e){s=e},equalityElementMatcher:function(e){c=e},expandArraysInBranches:function(e){u=e},hasOwn:function(e){f=e},isOperatorObject:function(e){d=e},makeLookupFunction:function(e){l=e},regexpElementMatcher:function(e){h=e}},0);var p=function(){function e(r){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this._sortSpecParts=[],this._sortFunction=null;var s=function(e,r){if(!e)throw Error("sort keys must be non-empty");if("$"===e.charAt(0))throw Error("unsupported sort key: "+e);t._sortSpecParts.push({ascending:r,lookup:l(e,{forSort:!0}),path:e})};if(r instanceof Array)r.forEach(function(e){"string"==typeof e?s(e,!0):s(e[0],"desc"!==e[1])});else if("object"===(void 0===r?"undefined":(0,o.default)(r)))Object.keys(r).forEach(function(e){s(e,r[e]>=0)});else{if("function"!=typeof r)throw Error("Bad sort specification: "+JSON.stringify(r));this._sortFunction=r}if(!this._sortFunction){if(this.affectedByModifier){var c={};this._sortSpecParts.forEach(function(e){c[e.path]=1}),this._selectorForAffectedByModifier=new w.Matcher(c)}this._keyComparator=i(this._sortSpecParts.map(function(e,r){return t._keyFieldComparator(r)})),this._keyFilter=null,n.matcher&&this._useWithMatcher(n.matcher)}}return e.prototype.getComparator=function(){function e(e){if(this._sortSpecParts.length||!e||!e.distances)return this._getBaseComparator();var r=e.distances;return function(e,t){if(!r.has(e._id))throw Error("Missing distance for "+e._id);if(!r.has(t._id))throw Error("Missing distance for "+t._id);return r.get(e._id)-r.get(t._id)}}return e}(),e.prototype._compareKeys=function(){function e(e,r){if(e.length!==this._sortSpecParts.length||r.length!==this._sortSpecParts.length)throw Error("Key has wrong length");return this._keyComparator(e,r)}return e}(),e.prototype._generateKeysFromDoc=function(){function e(e,r){if(0===this._sortSpecParts.length)throw new Error("can't generate keys without a spec");var t=function(e){return e.join(",")+","},n=null,i=this._sortSpecParts.map(function(r){var i=u(r.lookup(e),!0);i.length||(i=[{value:null}]);var o=Object.create(null),a=!1;if(i.forEach(function(e){if(e.arrayIndices){a=!0;var r=t(e.arrayIndices);if(f.call(o,r))throw Error("duplicate path: "+r);if(o[r]=e.value,n&&!f.call(n,r))throw Error("cannot index parallel arrays")}else{if(i.length>1)throw Error("multiple branches but no array used?");o[""]=e.value}}),n){if(!f.call(o,"")&&Object.keys(n).length!==Object.keys(o).length)throw Error("cannot index parallel arrays!")}else a&&(n={},Object.keys(o).forEach(function(e){n[e]=!0}));return o});if(n)Object.keys(n).forEach(function(e){var t=i.map(function(r){if(f.call(r,""))return r[""];if(!f.call(r,e))throw Error("missing path?");return r[e]});r(t)});else{var o=i.map(function(e){if(!f.call(e,""))throw Error("no value in sole key case?");return e[""]});r(o)}}return e}(),e.prototype._getBaseComparator=function(){function e(){var e=this;return this._sortFunction?this._sortFunction:this._sortSpecParts.length?function(r,t){var n=e._getMinKeyFromDoc(r),i=e._getMinKeyFromDoc(t);return e._compareKeys(n,i)}:function(e,r){return 0}}return e}(),e.prototype._getMinKeyFromDoc=function(){function e(e){var r=this,t=null;if(this._generateKeysFromDoc(e,function(e){r._keyCompatibleWithSelector(e)&&(null!==t?r._compareKeys(e,t)<0&&(t=e):t=e)}),null===t)throw Error("sort selector found no keys in doc?");return t}return e}(),e.prototype._getPaths=function(){function e(){return this._sortSpecParts.map(function(e){return e.path})}return e}(),e.prototype._keyCompatibleWithSelector=function(){function e(e){return!this._keyFilter||this._keyFilter(e)}return e}(),e.prototype._keyFieldComparator=function(){function e(e){var r=!this._sortSpecParts[e].ascending;return function(t,n){var i=b._f._cmp(t[e],n[e]);return r?-i:i}}return e}(),e.prototype._useWithMatcher=function(){function e(e){var r=this;if(this._keyFilter)throw Error("called _useWithMatcher twice?");if(this._sortSpecParts.length){var t=e._selector;if(!(t instanceof Function)){var n={};this._sortSpecParts.forEach(function(e){n[e.path]=[]}),Object.keys(t).forEach(function(e){var r=t[e],i=n[e];if(i)if(r instanceof RegExp){if(r.ignoreCase||r.multiline)return;i.push(h(r))}else d(r)?Object.keys(r).forEach(function(e){var t=r[e];["$lt","$lte","$gt","$gte"].includes(e)&&i.push(s[e].compileElementSelector(t)),"$regex"!==e||r.$options||i.push(s.$regex.compileElementSelector(t,r))}):i.push(c(r))}),n[this._sortSpecParts[0].path].length&&(this._keyFilter=function(e){return r._sortSpecParts.every(function(r,t){return n[r.path].every(function(r){return r(e[t])})})})}}}return e}(),e}()}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/minimongo/minimongo_client.js");"undefined"==typeof Package&&(Package={}),function(e,r){for(var t in r)t in e||(e[t]=r[t])}(Package.minimongo=E,{LocalCollection:b,Minimongo:w,MinimongoTest:_,MinimongoError:g})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,a=Package.underscore._,i=Package.ejson.EJSON,o,c,s=r({node_modules:{meteor:{check:{"match.js":function(t,n){var r=new e.EnvironmentVariable,o=t("./isPlainObject.js").isPlainObject,c=n.check=function(e,t){var n=r.getOrNullIfOutsideFiber();n&&n.checking(e);var a=y(e,t);if(a){var i=new s.Error(a.message);throw a.path&&(i.message+=" in field "+a.path,i.path=a.path),i}},s=n.Match={Optional:function(e){return new u(e)},Maybe:function(e){return new f(e)},OneOf:function(){return new h(a.toArray(arguments))},Any:["__any__"],Where:function(e){return new l(e)},ObjectIncluding:function(e){return new p(e)},ObjectWithValues:function(e){return new g(e)},Integer:["__integer__"],Error:e.makeErrorType("Match.Error",function(t){this.message="Match error: "+t,this.path="",this.sanitizedError=new e.Error(400,"Match failed")}),test:function(e,t){return!y(e,t)},_failIfArgumentsAreNotAllChecked:function(e,t,n,a){var i=new v(n,a),o=r.withValue(i,function(){return e.apply(t,n)});return i.throwUnlessAllArgumentsHaveBeenChecked(),o}},u=function(e){this.pattern=e},f=function(e){this.pattern=e},h=function(e){if(a.isEmpty(e))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=e},l=function(e){this.condition=e},p=function(e){this.pattern=e},g=function(e){this.pattern=e},m=function(e,t){if(t=t||{},null===e)return"null";if(t.onlyShowType)return typeof e;if("object"!=typeof e)return i.stringify(e);try{JSON.stringify(e)}catch(t){if("TypeError"===t.name)return typeof e}return i.stringify(e)},d=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[Function,"function"],[void 0,"undefined"]],y=function(e,t){if(t===s.Any)return!1;for(var n=0;n<d.length;++n)if(t===d[n][0])return typeof e!==d[n][1]&&{message:"Expected "+d[n][1]+", got "+m(e,{onlyShowType:!0}),path:""};if(null===t)return null!==e&&{message:"Expected null, got "+m(e),path:""};if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return e!==t&&{message:"Expected "+t+", got "+m(e),path:""};if(t===s.Integer)return("number"!=typeof e||(0|e)!==e)&&{message:"Expected Integer, got "+m(e),path:""};if(t===Object&&(t=s.ObjectIncluding({})),t instanceof Array){if(1!==t.length)return{message:"Bad pattern: arrays must have one type element"+m(t),path:""};if(!a.isArray(e)&&!a.isArguments(e))return{message:"Expected array, got "+m(e),path:""};for(var n=0,r=e.length;n<r;n++)if(i=y(e[n],t[0]))return i.path=O(n,i.path),i;return!1}if(t instanceof l){var i;try{i=t.condition(e)}catch(e){if(!(e instanceof s.Error))throw e;return{message:e.message,path:e.path}}return!i&&{message:"Failed Match.Where validation",path:""}}if(t instanceof f?t=s.OneOf(void 0,null,t.pattern):t instanceof u&&(t=s.OneOf(void 0,t.pattern)),t instanceof h){for(var n=0;n<t.choices.length;++n)if(!(i=y(e,t.choices[n])))return!1;return{message:"Failed Match.OneOf, Match.Maybe or Match.Optional validation",path:""}}if(t instanceof Function)return!(e instanceof t)&&{message:"Expected "+(t.name||"particular constructor"),path:""};var c=!1,v;if(t instanceof p&&(c=!0,t=t.pattern),t instanceof g&&(c=!0,v=[t.pattern],t={}),"object"!=typeof t)return{message:"Bad pattern: unknown pattern type",path:""};if("object"!=typeof e)return{message:"Expected object, got "+typeof e,path:""};if(null===e)return{message:"Expected object, got null",path:""};if(!o(e))return{message:"Expected plain object",path:""};var b={},k={};a.each(t,function(e,t){e instanceof u||e instanceof f?k[t]=e.pattern:b[t]=e});for(var w=function(e){var t=[];if(a.isObject(e))for(var n in e)t.push(n);return t}(e),n=0,r=w.length;n<r;n++){var j=w[n],E=e[j];if(a.has(b,j)){if(i=y(E,b[j]))return i.path=O(j,i.path),i;delete b[j]}else if(a.has(k,j)){if(i=y(E,k[j]))return i.path=O(j,i.path),i}else{if(!c)return{message:"Unknown key",path:j};if(v&&(i=y(E,v[0])))return i.path=O(j,i.path),i}}return(w=a.keys(b)).length?{message:"Missing key '"+w[0]+"'",path:""}:void 0},v=function(e,t){var n=this;n.args=a.clone(e),n.args.reverse(),n.description=t};a.extend(v.prototype,{checking:function(e){var t=this;t._checkingOneValue(e)||(a.isArray(e)||a.isArguments(e))&&a.each(e,a.bind(t._checkingOneValue,t))},_checkingOneValue:function(e){for(var t=this,n=0;n<t.args.length;++n)if(e===t.args[n]||a.isNaN(e)&&a.isNaN(t.args[n]))return t.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var e=this;if(!a.isEmpty(e.args))throw new Error("Did not check() all arguments during "+e.description)}});var b=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],O=function(e,t){return"number"==typeof e||e.match(/^[0-9]+$/)?e="["+e+"]":e.match(/^[a-z_$][0-9a-z_$]*$/i)&&!a.contains(b,e)||(e=JSON.stringify([e])),t&&"["!==t[0]?e+"."+t:e+t}},"isPlainObject.js":function(e,t){var n={},r=n.toString,a=n.hasOwnProperty,i=a.toString,o=i.call(Object),c=Object.getPrototypeOf;t.isPlainObject=function(e){var t,n;return!(!e||"[object Object]"!==r.call(e))&&(!(t=c(e))||"function"==typeof(n=a.call(t,"constructor")&&t.constructor)&&i.call(n)===o)}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/check/match.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.check=s,{check:o,Match:c})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,r=Package.meteor.meteorEnv,n=Package.underscore._,i=Package.random.Random,a;(function(){a=function(e){var t=this;n.extend(t,n.defaults(n.clone(e||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),t.retryTimer=null},n.extend(a.prototype,{clear:function(){var e=this;e.retryTimer&&clearTimeout(e.retryTimer),e.retryTimer=null},_timeout:function(e){var t=this;if(e<t.minCount)return t.minTimeout;var r=Math.min(t.maxTimeout,t.baseTimeout*Math.pow(t.exponent,e));return r*=i.fraction()*t.fuzz+(1-t.fuzz/2)},retryLater:function(t,r){var n=this,i=n._timeout(t);return n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=e.setTimeout(r,i),i}})}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var r in t)r in e||(e[r]=t[r])}(Package.retry={},{Retry:a})}();

!function(){var n=Package.meteor.Meteor,e=Package.meteor.global,t=Package.meteor.meteorEnv,a=Package.underscore._,r;(function(){r=function(n){var e=this;if(n=n||{},e.nextCallbackId=0,e.callbacks={},e.bindEnvironment=!0,!1===n.bindEnvironment&&(e.bindEnvironment=!1),n.exceptionHandler)e.exceptionHandler=n.exceptionHandler;else if(n.debugPrintExceptions){if(!a.isString(n.debugPrintExceptions))throw new Error("Hook option debugPrintExceptions should be a string");e.exceptionHandler=n.debugPrintExceptions}},a.extend(r.prototype,{register:function(t){var a=this,r=a.exceptionHandler||function(n){throw n};t=a.bindEnvironment?n.bindEnvironment(t,r):e(t,r);var o=a.nextCallbackId++;return a.callbacks[o]=t,{stop:function(){delete a.callbacks[o]}}},each:function(e){var t=this;n._nodeCodeMustBeInFiber();for(var r=a.keys(t.callbacks),o=0;o<r.length;++o){var i=r[o];if(a.has(t.callbacks,i)&&!e(t.callbacks[i]))break}}});var e=function(e,t,r){if(!t||"string"==typeof t){var o=t||"callback of async function";t=function(e){n._debug("Exception in "+o+":",e&&e.stack||e)}}return function(){var n=a.toArray(arguments);return function(){try{var a=e.apply(r,n)}catch(n){t(n)}return a}()}}}).call(this),"undefined"==typeof Package&&(Package={}),function(n,e){for(var t in e)t in n||(n[t]=e[t])}(Package["callback-hook"]={},{Hook:r})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,a=Package.meteor.meteorEnv,n=Package.check.check,r=Package.check.Match,i=Package.random.Random,o=Package.ejson.EJSON,c=Package.underscore._,s=Package.tracker.Tracker,l=Package.tracker.Deps,u=Package.retry.Retry,d;(function(){d={}}).call(this),function(){d.Heartbeat=function(e){var t=this;t.heartbeatInterval=e.heartbeatInterval,t.heartbeatTimeout=e.heartbeatTimeout,t._sendPing=e.sendPing,t._onTimeout=e.onTimeout,t._seenPacket=!1,t._heartbeatIntervalHandle=null,t._heartbeatTimeoutHandle=null},c.extend(d.Heartbeat.prototype,{stop:function(){var e=this;e._clearHeartbeatIntervalTimer(),e._clearHeartbeatTimeoutTimer()},start:function(){var e=this;e.stop(),e._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle=e.setInterval(c.bind(t._heartbeatIntervalFired,t),t.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle=e.setTimeout(c.bind(t._heartbeatTimeoutFired,t),t.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle&&(e.clearInterval(t._heartbeatIntervalHandle),t._heartbeatIntervalHandle=null)},_clearHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle&&(e.clearTimeout(t._heartbeatTimeoutHandle),t._heartbeatTimeoutHandle=null)},_heartbeatIntervalFired:function(){var e=this;e._seenPacket||e._heartbeatTimeoutHandle||(e._sendPing(),e._startHeartbeatTimeoutTimer()),e._seenPacket=!1},_heartbeatTimeoutFired:function(){var e=this;e._heartbeatTimeoutHandle=null,e._onTimeout()},messageReceived:function(){var e=this;e._seenPacket=!0,e._heartbeatTimeoutHandle&&e._clearHeartbeatTimeoutTimer()}})}.call(this),function(){d.SUPPORTED_DDP_VERSIONS=["1","pre2","pre1"],d.parseDDP=function(t){try{var a=JSON.parse(t)}catch(a){return e._debug("Discarding message with invalid JSON",t),null}return null===a||"object"!=typeof a?(e._debug("Discarding non-object DDP message",t),null):(c.has(a,"cleared")&&(c.has(a,"fields")||(a.fields={}),c.each(a.cleared,function(e){a.fields[e]=void 0}),delete a.cleared),c.each(["fields","params","result"],function(e){c.has(a,e)&&(a[e]=o._adjustTypesFromJSONValue(a[e]))}),a)},d.stringifyDDP=function(e){var t=o.clone(e);if(c.has(e,"fields")){var a=[];c.each(e.fields,function(e,n){void 0===e&&(a.push(n),delete t.fields[n])}),c.isEmpty(a)||(t.cleared=a),c.isEmpty(t.fields)&&delete t.fields}if(c.each(["fields","params","result"],function(e){c.has(t,e)&&(t[e]=o._adjustTypesToJSONValue(t[e]))}),e.id&&"string"!=typeof e.id)throw new Error("Message id is not a string");return JSON.stringify(t)}}.call(this),function(){d.MethodInvocation=function(e){var t=this;this.isSimulation=e.isSimulation,this._unblock=e.unblock||function(){},this._calledUnblock=!1,this.userId=e.userId,this._setUserId=e.setUserId||function(){},this.connection=e.connection,this.randomSeed=e.randomSeed,this.randomStream=null},c.extend(d.MethodInvocation.prototype,{unblock:function(){var e=this;e._calledUnblock=!0,e._unblock()},setUserId:function(e){var t=this;if(t._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");t.userId=e,t._setUserId(e)}})}.call(this),function(){function e(){return i.hexString(20)}d.RandomStream=function(t){var a=this;this.seed=[].concat(t.seed||e()),this.sequences={}},d.RandomStream.get=function(e,t){if(t||(t="default"),!e)return i.insecure;var a=e.randomStream;return a||(e.randomStream=a=new d.RandomStream({seed:e.randomSeed})),a._sequence(t)},d.makeRpcSeed=function(e,t){return d.RandomStream.get(e,"/rpc/"+t).hexString(20)},c.extend(d.RandomStream.prototype,{_sequence:function(e){var t=this,a=t.sequences[e]||null;if(null===a){for(var n=t.seed.concat(e),r=0;r<n.length;r++)c.isFunction(n[r])&&(n[r]=n[r]());t.sequences[e]=a=i.createWithSeeds.apply(null,n)}return a}})}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var a in t)a in e||(e[a]=t[a])}(Package["ddp-common"]={},{DDPCommon:d})}();

!function(){var a=Package.meteor.Meteor,e=Package.meteor.global,t=Package.meteor.meteorEnv,o=Package.underscore._,n=Package["ecmascript-runtime-client"].Symbol,r=Package["ecmascript-runtime-client"].Map,i=Package["ecmascript-runtime-client"].Set,c;(function(){c={};var e="Meteor_Reload",t={},n,r=null;try{(r=window.sessionStorage)?(r.setItem("__dummy__","1"),r.removeItem("__dummy__")):r=null}catch(a){r=null}c._getData=function(){return r&&r.getItem(e)},r&&(n=c._getData(),r.removeItem(e)),n||(n="{}");var i={};try{"object"!=typeof(i=JSON.parse(n))&&(a._debug("Got bad data on reload. Ignoring."),i={})}catch(e){a._debug("Got invalid JSON on reload. Ignoring.")}i.reload&&"object"==typeof i.data&&(t=i.data);var l=[];c._onMigrate=function(a,e){e||(e=a,a=void 0),l.push({name:a,callback:e})},c._migrationData=function(a){return t[a]};var d=function(a,e){a=a||function(){},e=e||{};for(var t={},n=o.clone(l),r=!0;n.length;){var i=n.shift(),c=i.callback(a,e);c[0]||(r=!1),c.length>1&&i.name&&(t[i.name]=c[1])}return r||e.immediateMigration?t:null};c._migrate=function(t,o){var n=d(t,o);if(null===n)return!1;try{var i=JSON.stringify({data:n,reload:!0})}catch(e){throw a._debug("Couldn't serialize data for migration",n),e}if(r)try{r.setItem(e,i)}catch(e){a._debug("Couldn't save data for migration to sessionStorage",e)}else a._debug("Browser does not support sessionStorage. Not saving migration state.");return!0},c._withFreshProvidersForTest=function(a){var e=o.clone(l);l=[];try{a()}finally{l=e}};var g=!1;c._reload=function(a){if(a=a||{},!g){g=!0;var e=function(){o.defer(function(){c._migrate(e,a)&&(window.location.hash||window.location.href.endsWith("#")?window.location.reload():window.location.replace(window.location.href))})};e()}}}).call(this),function(){a._reload={onMigrate:c._onMigrate,migrationData:c._migrationData,reload:c._reload}}.call(this),"undefined"==typeof Package&&(Package={}),function(a,e){for(var t in e)t in a||(a[t]=e[t])}(Package.reload={},{Reload:c})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package.check.check,r=Package.check.Match,i=Package.random.Random,s=Package.ejson.EJSON,a=Package.underscore._,u=Package.tracker.Tracker,c=Package.tracker.Deps,d=Package.retry.Retry,l=Package["id-map"].IdMap,f=Package["callback-hook"].Hook,_=Package["ddp-common"].DDPCommon,p=Package["diff-sequence"].DiffSequence,h=Package["mongo-id"].MongoID,v=Package.modules.meteorInstall,m=Package["babel-runtime"].meteorBabelHelpers,g=Package.promise.Promise,b=Package["ecmascript-runtime-client"].Symbol,y=Package["ecmascript-runtime-client"].Map,w=Package["ecmascript-runtime-client"].Set,k,S,C,E,O,D=v({node_modules:{meteor:{"ddp-client":{"sockjs-0.3.4.js":function(e){function t(e){return e&&e.__esModule?e:{default:e}}var n=t(e("babel-runtime/helpers/typeof"));k=function(){var e=document,t=window,o={},r=function(){};r.prototype.addEventListener=function(e,t){this._listeners||(this._listeners={}),e in this._listeners||(this._listeners[e]=[]);var n=this._listeners[e];-1===o.arrIndexOf(n,t)&&n.push(t)},r.prototype.removeEventListener=function(e,t){if(this._listeners&&e in this._listeners){var n=this._listeners[e],r=o.arrIndexOf(n,t);-1===r||(n.length>1?this._listeners[e]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[e])}},r.prototype.dispatchEvent=function(e){var t=e.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,n),this._listeners&&t in this._listeners)for(var o=0;o<this._listeners[t].length;o++)this._listeners[t][o].apply(this,n)};var i=function(e,t){if(this.type=e,void 0!==t)for(var n in m.sanitizeForInObject(t))t.hasOwnProperty(n)&&(this[n]=t[n])};i.prototype.toString=function(){var e=[];for(var t in m.sanitizeForInObject(this))if(this.hasOwnProperty(t)){var n=this[t];"function"==typeof n&&(n="[function]"),e.push(t+"="+n)}return"SimpleEvent("+e.join(", ")+")"};var s=function(e){var t=this;t._events=e||[],t._listeners={}};s.prototype.emit=function(e){var t=this;if(t._verifyType(e),!t._nuked){var n=Array.prototype.slice.call(arguments,1);if(t["on"+e]&&t["on"+e].apply(t,n),e in t._listeners)for(var o=0;o<t._listeners[e].length;o++)t._listeners[e][o].apply(t,n)}},s.prototype.on=function(e,t){var n=this;n._verifyType(e),n._nuked||(e in n._listeners||(n._listeners[e]=[]),n._listeners[e].push(t))},s.prototype._verifyType=function(e){var t=this;-1===o.arrIndexOf(t._events,e)&&o.log("Event "+JSON.stringify(e)+" not listed "+JSON.stringify(t._events)+" in "+t)},s.prototype.nuke=function(){var e=this;e._nuked=!0;for(var t=0;t<e._events.length;t++)delete e[e._events[t]];e._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";o.random_string=function(e,t){t=t||a.length;var n,o=[];for(n=0;n<e;n++)o.push(a.substr(Math.floor(Math.random()*t),1));return o.join("")},o.random_number=function(e){return Math.floor(Math.random()*e)},o.random_number_string=function(e){var t=(""+(e-1)).length;return(Array(t+1).join("0")+o.random_number(e)).slice(-t)},o.getOrigin=function(e){return(e+="/").split("/").slice(0,3).join("/")},o.isSameOriginUrl=function(e,n){return n||(n=t.location.href),e.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},o.isSameOriginScheme=function(e,n){return n||(n=t.location.href),e.split(":")[0]===n.split(":")[0]},o.getParentDomain=function(e){return/^[0-9.]*$/.test(e)?e:/^\[/.test(e)?e:/[.]/.test(e)?e.split(".").slice(1).join("."):e},o.objectExtend=function(e,t){for(var n in m.sanitizeForInObject(t))t.hasOwnProperty(n)&&(e[n]=t[n]);return e};var u="_jp";o.polluteGlobalNamespace=function(){"_jp"in t||(t._jp={})},o.closeFrame=function(e,t){return"c"+JSON.stringify([e,t])},o.userSetCode=function(e){return 1e3===e||e>=3e3&&e<=4999},o.countRTO=function(e){var t;return t=e>100?3*e:e+200},o.log=function(){t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},o.bind=function(e,t){return e.bind?e.bind(t):function(){return e.apply(t,arguments)}},o.flatUrl=function(e){return-1===e.indexOf("?")&&-1===e.indexOf("#")},o.amendUrl=function(t,n){var r;if(void 0===n)r=e.location;else{var i=/^([a-z0-9.+-]+:)/i.exec(n);if(i){var s=i[0].toLowerCase(),a=n.substring(s.length),u=/[a-z0-9\.-]+(:[0-9]+)?/.exec(a);if(u)var c=u[0]}if(!s||!c)throw new Error("relativeTo must be an absolute url");r={protocol:s,host:c}}if(!t)throw new Error("Wrong url for SockJS");if(!o.flatUrl(t))throw new Error("Only basic urls are supported in SockJS");0===t.indexOf("//")&&(t=r.protocol+t),0===t.indexOf("/")&&(t=r.protocol+"//"+r.host+t);var d=(t=t.replace(/[/]+$/,"")).split("/");return("http:"===d[0]&&/:80$/.test(d[2])||"https:"===d[0]&&/:443$/.test(d[2]))&&(d[2]=d[2].replace(/:(80|443)$/,"")),t=d.join("/")},o.arrIndexOf=function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},o.arrSkip=function(e,t){var n=o.arrIndexOf(e,t);return-1===n?e.slice():e.slice(0,n).concat(e.slice(n+1))},o.isArray=Array.isArray||function(e){return{}.toString.call(e).indexOf("Array")>=0},o.delay=function(e,t){return"function"==typeof e&&(t=e,e=0),setTimeout(t,e)};var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\0":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","\t":"\\t","\n":"\\n","\v":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","\ufeff":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},l=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,f,_=JSON&&JSON.stringify||function(e){return c.lastIndex=0,c.test(e)&&(e=e.replace(c,function(e){return d[e]})),'"'+e+'"'},p=function(e){var t,n={},o=[];for(t=0;t<65536;t++)o.push(String.fromCharCode(t));return e.lastIndex=0,o.join("").replace(e,function(e){return n[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""}),e.lastIndex=0,n};o.quote=function(e){var t=_(e);return l.lastIndex=0,l.test(t)?(f||(f=p(l)),t.replace(l,function(e){return f[e]})):t};var h=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];o.probeProtocols=function(){for(var e={},t=0;t<h.length;t++){var n=h[t];e[n]=C[n]&&C[n].enabled()}return e},o.detectProtocols=function(e,t,n){var o={},r=[];t||(t=h);for(var i=0;i<t.length;i++){var s=t[i];o[s]=e[s]}var a=function(e){var t=e.shift();o[t]?r.push(t):e.length>0&&a(e)};return!1!==n.websocket&&a(["websocket"]),o["xhr-streaming"]&&!n.null_origin?r.push("xhr-streaming"):!o["xdr-streaming"]||n.cookie_needed||n.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):r.push("xdr-streaming"),o["xhr-polling"]&&!n.null_origin?r.push("xhr-polling"):!o["xdr-polling"]||n.cookie_needed||n.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):r.push("xdr-polling"),r};var v="_sockjs_global";o.createHook=function(){var e="a"+o.random_string(8);if(!(v in t)){var n={};t[v]=function(e){return e in n||(n[e]={id:e,del:function(){delete n[e]}}),n[e]}}return t[v](e)},o.attachMessage=function(e){o.attachEvent("message",e)},o.attachEvent=function(n,o){void 0!==t.addEventListener?t.addEventListener(n,o,!1):(e.attachEvent("on"+n,o),t.attachEvent("on"+n,o))},o.detachMessage=function(e){o.detachEvent("message",e)},o.detachEvent=function(n,o){void 0!==t.addEventListener?t.removeEventListener(n,o,!1):(e.detachEvent("on"+n,o),t.detachEvent("on"+n,o))};var g={},b=!1,y=function(){for(var e in m.sanitizeForInObject(g))g[e](),delete g[e]},w=function(){b||(b=!0,y())};o.attachEvent("unload",w),o.unload_add=function(e){var t=o.random_string(8);return g[t]=e,b&&o.delay(y),t},o.unload_del=function(e){e in g&&delete g[e]},o.createIframe=function(t,n){var r=e.createElement("iframe"),i,s,a=function(){clearTimeout(i);try{r.onload=null}catch(e){}r.onerror=null},u=function(){r&&(a(),setTimeout(function(){r&&r.parentNode.removeChild(r),r=null},0),o.unload_del(s))},c=function(e){r&&(u(),n(e))},d=function(e,t){try{r&&r.contentWindow&&r.contentWindow.postMessage(e,t)}catch(e){}};return r.src=t,r.style.display="none",r.style.position="absolute",r.onerror=function(){c("onerror")},r.onload=function(){clearTimeout(i),i=setTimeout(function(){c("onload timeout")},2e3)},e.body.appendChild(r),i=setTimeout(function(){c("timeout")},15e3),s=o.unload_add(u),{post:d,cleanup:u,loaded:a}},o.createHtmlfile=function(e,n){var r=new ActiveXObject("htmlfile"),i,s,a,u=function(){clearTimeout(i)},c=function(){r&&(u(),o.unload_del(s),a.parentNode.removeChild(a),a=r=null,CollectGarbage())},d=function(e){r&&(c(),n(e))},l=function(e,t){try{a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}catch(e){}};r.open(),r.write('<html><script>document.domain="'+document.domain+'";<\/script></html>'),r.close(),r.parentWindow._jp=t._jp;var f=r.createElement("div");return r.body.appendChild(f),a=r.createElement("iframe"),f.appendChild(a),a.src=e,i=setTimeout(function(){d("timeout")},15e3),s=o.unload_add(c),{post:l,cleanup:c,loaded:u}};var k=function(){};(k.prototype=new s(["chunk","finish"]))._start=function(e,n,r,i){var s=this;try{s.xhr=new XMLHttpRequest}catch(e){}if(!s.xhr)try{s.xhr=new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}(t.ActiveXObject||t.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),s.unload_ref=o.unload_add(function(){s._cleanup(!0)});try{s.xhr.open(e,n,!0)}catch(e){return s.emit("finish",0,""),void s._cleanup()}if(i&&i.no_credentials||(s.xhr.withCredentials="true"),i&&i.headers)for(var a in m.sanitizeForInObject(i.headers))s.xhr.setRequestHeader(a,i.headers[a]);s.xhr.onreadystatechange=function(){if(s.xhr){var e=s.xhr;switch(e.readyState){case 3:try{var t=e.status,n=e.responseText}catch(e){}1223===t&&(t=204),n&&n.length>0&&s.emit("chunk",t,n);break;case 4:1223===(t=e.status)&&(t=204),s.emit("finish",t,e.responseText),s._cleanup(!1);break}}},s.xhr.send(r)},k.prototype._cleanup=function(e){var t=this;if(t.xhr){if(o.unload_del(t.unload_ref),t.xhr.onreadystatechange=function(){},e)try{t.xhr.abort()}catch(e){}t.unload_ref=t.xhr=null}},k.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},(o.XHRCorsObject=function(){var e=this,t=arguments;o.delay(function(){e._start.apply(e,t)})}).prototype=new k,(o.XHRLocalObject=function(e,t,n){var r=this;o.delay(function(){r._start(e,t,n,{no_credentials:!0})})}).prototype=new k;var S=o.XDRObject=function(e,t,n){var r=this;o.delay(function(){r._start(e,t,n)})};S.prototype=new s(["chunk","finish"]),S.prototype._start=function(e,t,n){var r=this,i=new XDomainRequest;t+=(-1===t.indexOf("?")?"?":"&")+"t="+ +new Date;var s=i.ontimeout=i.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};i.onprogress=function(){r.emit("chunk",200,i.responseText)},i.onload=function(){r.emit("finish",200,i.responseText),r._cleanup(!1)},r.xdr=i,r.unload_ref=o.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(e,t),r.xdr.send(n)}catch(e){s()}},S.prototype._cleanup=function(e){var t=this;if(t.xdr){if(o.unload_del(t.unload_ref),t.xdr.ontimeout=t.xdr.onerror=t.xdr.onprogress=t.xdr.onload=null,e)try{t.xdr.abort()}catch(e){}t.unload_ref=t.xdr=null}},S.prototype.close=function(){var e=this;e.nuke(),e._cleanup(!0)},o.isXHRCorsCapable=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:t.XDomainRequest&&e.domain?2:A.enabled()?3:4};var C=function(e,t,n){if(!(this instanceof C))return new C(e,t,n);var r=this,i;r._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},n&&o.objectExtend(r._options,n),r._base_url=o.amendUrl(e),r._server=r._options.server||o.random_number_string(1e3),r._options.protocols_whitelist&&r._options.protocols_whitelist.length?i=r._options.protocols_whitelist:(i="string"==typeof t&&t.length>0?[t]:o.isArray(t)?t:null)&&r._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.'),r._protocols=[],r.protocol=null,r.readyState=C.CONNECTING,r._ir=V(r._base_url),r._ir.onfinish=function(e,t){r._ir=null,e?(r._options.info&&(e=o.objectExtend(e,r._options.info)),r._options.rtt&&(t=r._options.rtt),r._applyInfo(e,t,i),r._didClose()):r._didClose(1002,"Can't connect to server",!0)}};C.prototype=new r,C.version="0.3.4",C.CONNECTING=0,C.OPEN=1,C.CLOSING=2,C.CLOSED=3,C.prototype._debug=function(){this._options.debug&&o.log.apply(o,arguments)},C.prototype._dispatchOpen=function(){var e=this;e.readyState===C.CONNECTING?(e._transport_tref&&(clearTimeout(e._transport_tref),e._transport_tref=null),e.readyState=C.OPEN,e.dispatchEvent(new i("open"))):e._didClose(1006,"Server lost session")},C.prototype._dispatchMessage=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new i("message",{data:e}))},C.prototype._dispatchHeartbeat=function(e){var t=this;t.readyState===C.OPEN&&t.dispatchEvent(new i("heartbeat",{}))},C.prototype._didClose=function(e,t,n){var r=this;if(r.readyState!==C.CONNECTING&&r.readyState!==C.OPEN&&r.readyState!==C.CLOSING)throw new Error("INVALID_STATE_ERR");r._ir&&(r._ir.nuke(),r._ir=null),r._transport&&(r._transport.doCleanup(),r._transport=null);var s=new i("close",{code:e,reason:t,wasClean:o.userSetCode(e)});if(!o.userSetCode(e)&&r.readyState===C.CONNECTING&&!n){if(r._try_next_protocol(s))return;s=new i("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:s})}r.readyState=C.CLOSED,o.delay(function(){r.dispatchEvent(s)})},C.prototype._didMessage=function(e){var t=this;switch(e.slice(0,1)){case"o":t._dispatchOpen();break;case"a":for(var n=JSON.parse(e.slice(1)||"[]"),o=0;o<n.length;o++)t._dispatchMessage(n[o]);break;case"m":var n=JSON.parse(e.slice(1)||"null");t._dispatchMessage(n);break;case"c":var n=JSON.parse(e.slice(1)||"[]");t._didClose(n[0],n[1]);break;case"h":t._dispatchHeartbeat();break}},C.prototype._try_next_protocol=function(t){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+t),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var r=n.protocol=n._protocols.shift();if(!r)return!1;if(C[r]&&!0===C[r].need_body&&(!e.body||void 0!==e.readyState&&"complete"!==e.readyState))return n._protocols.unshift(r),n.protocol="waiting-for-load",o.attachEvent("load",function(){n._try_next_protocol()}),!0;if(C[r]&&C[r].enabled(n._options)){var i=C[r].roundTrips||1,s=(n._options.rto||0)*i||5e3;n._transport_tref=o.delay(s,function(){n.readyState===C.CONNECTING&&n._didClose(2007,"Transport timeouted")});var a=o.random_string(8),u=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",r," url:"+u," RTO:"+n._options.rto),n._transport=new C[r](n,u,n._base_url),!0}n._debug("Skipping transport:",r)}},C.prototype.close=function(e,t){var n=this;if(e&&!o.userSetCode(e))throw new Error("INVALID_ACCESS_ERR");return(n.readyState===C.CONNECTING||n.readyState===C.OPEN)&&(n.readyState=C.CLOSING,n._didClose(e||1e3,t||"Normal closure"),!0)},C.prototype.send=function(e){var t=this;if(t.readyState===C.CONNECTING)throw new Error("INVALID_STATE_ERR");return t.readyState===C.OPEN&&t._transport.doSend(o.quote(""+e)),!0},C.prototype._applyInfo=function(t,n,r){var i=this;i._options.info=t,i._options.rtt=n,i._options.rto=o.countRTO(n),i._options.info.null_origin=!e.domain,t.base_url&&(i._base_url=o.amendUrl(t.base_url,i._base_url));var s=o.probeProtocols();i._protocols=o.detectProtocols(s,r,t),o.isSameOriginScheme(i._base_url)||2!==o.isXHRCorsCapable()||(i._protocols=["jsonp-polling"])};var E=C.websocket=function(e,n){var r=this,i=n+"/websocket";i="https"===i.slice(0,5)?"wss"+i.slice(5):"ws"+i.slice(4),r.ri=e,r.url=i;var s=t.WebSocket||t.MozWebSocket;r.ws=new s(r.url),r.ws.onmessage=function(e){r.ri._didMessage(e.data)},r.unload_ref=o.unload_add(function(){r.ws.close()}),r.ws.onclose=function(){r.ri._didMessage(o.closeFrame(1006,"WebSocket connection broken"))}};E.prototype.doSend=function(e){this.ws.send("["+e+"]")},E.prototype.doCleanup=function(){var e=this,t=e.ws;t&&(t.onmessage=t.onclose=null,t.close(),o.unload_del(e.unload_ref),e.unload_ref=e.ri=e.ws=null)},E.enabled=function(){return!(!t.WebSocket&&!t.MozWebSocket)},E.roundTrips=2;var O=function(){};O.prototype.send_constructor=function(e){var t=this;t.send_buffer=[],t.sender=e},O.prototype.doSend=function(e){var t=this;t.send_buffer.push(e),t.send_stop||t.send_schedule()},O.prototype.send_schedule_wait=function(){var e=this,t;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=o.delay(25,function(){e.send_stop=null,e.send_schedule()})},O.prototype.send_schedule=function(){var e=this;if(e.send_buffer.length>0){var t="["+e.send_buffer.join(",")+"]";e.send_stop=e.sender(e.trans_url,t,function(t,n){e.send_stop=null,!1===t?e.ri._didClose(1006,"Sending error "+n):e.send_schedule_wait()}),e.send_buffer=[]}},O.prototype.send_destructor=function(){var e=this;e._send_stop&&e._send_stop(),e._send_stop=null};var D=function(t,n,r){var i=this;if(!("_send_form"in i)){var s=i._send_form=e.createElement("form");(a=i._send_area=e.createElement("textarea")).name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),e.body.appendChild(s)}var s=i._send_form,a=i._send_area,u="a"+o.random_string(8);s.target=u,s.action=t+"/jsonp_send?i="+u;var c;try{c=e.createElement('<iframe name="'+u+'">')}catch(t){(c=e.createElement("iframe")).name=u}c.id=u,s.appendChild(c),c.style.display="none";try{a.value=n}catch(e){o.log("Your browser is seriously broken. Go home! "+e.message)}s.submit();var d=function(e){c.onerror&&(c.onreadystatechange=c.onerror=c.onload=null,o.delay(500,function(){c.parentNode.removeChild(c),c=null}),a.value="",r(!0))};return c.onerror=c.onload=d,c.onreadystatechange=function(e){"complete"==c.readyState&&d()},d},M=function(e){return function(t,n,o){return new e("POST",t+"/xhr_send",n).onfinish=function(e,t){o(200===e||204===e,"http status "+e)},function(e){o(!1,e)}}},T=function(t,n){var r,i=e.createElement("script"),s,a=function(e){s&&(s.parentNode.removeChild(s),s=null),i&&(clearTimeout(r),i.parentNode.removeChild(i),i.onreadystatechange=i.onerror=i.onload=i.onclick=null,i=null,n(e),n=null)},u=!1,c=null;if(i.id="a"+o.random_string(8),i.src=t,i.type="text/javascript",i.charset="UTF-8",i.onerror=function(e){c||(c=setTimeout(function(){u||a(o.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},i.onload=function(e){a(o.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},i.onreadystatechange=function(e){if(/loaded|closed/.test(i.readyState)){if(i&&i.htmlFor&&i.onclick){u=!0;try{i.onclick()}catch(e){}}i&&a(o.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},void 0===i.async&&e.attachEvent)if(/opera/i.test(navigator.userAgent))(s=e.createElement("script")).text="try{var a = document.getElementById('"+i.id+"'); if(a)a.onerror();}catch(x){};",i.async=s.async=!1;else{try{i.htmlFor=i.id,i.event="onclick"}catch(e){}i.async=!0}void 0!==i.async&&(i.async=!0),r=setTimeout(function(){a(o.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var d=e.getElementsByTagName("head")[0];return d.insertBefore(i,d.firstChild),s&&d.insertBefore(s,d.firstChild),a},x=C["jsonp-polling"]=function(e,t){o.polluteGlobalNamespace();var n=this;n.ri=e,n.trans_url=t,n.send_constructor(D),n._schedule_recv()};x.prototype=new O,x.prototype._schedule_recv=function(){var e=this,t=function(t){e._recv_stop=null,t&&(e._is_closing||e.ri._didMessage(t)),e._is_closing||e._schedule_recv()};e._recv_stop=j(e.trans_url+"/jsonp",T,t)},x.enabled=function(){return!0},x.need_body=!0,x.prototype.doCleanup=function(){var e=this;e._is_closing=!0,e._recv_stop&&e._recv_stop(),e.ri=e._recv_stop=null,e.send_destructor()};var j=function(e,n,r){var i="a"+o.random_string(6),s=0,a=n(e+"?c="+escape("_jp."+i),function(e){switch(s){case 0:delete t._jp[i],r(e);break;case 1:r(e),s=2;break;case 2:delete t._jp[i];break}});return t._jp[i]=a,function(){t._jp[i]&&(s=1,t._jp[i](o.closeFrame(1e3,"JSONP user aborted read")))}},R=function(){};(R.prototype=new O).run=function(e,t,n,o,r){var i=this;i.ri=e,i.trans_url=t,i.send_constructor(M(r)),i.poll=new Q(e,o,t+n,r)},R.prototype.doCleanup=function(){var e=this;e.poll&&(e.poll.abort(),e.poll=null)};var I=C["xhr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",Z,o.XHRCorsObject)};I.prototype=new R,I.enabled=function(){return t.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},I.roundTrips=2,I.need_body=!0;var P=C["xdr-streaming"]=function(e,t){this.run(e,t,"/xhr_streaming",Z,o.XDRObject)};P.prototype=new R,P.enabled=function(){return!!t.XDomainRequest},P.roundTrips=2;var N=C["xhr-polling"]=function(e,t){this.run(e,t,"/xhr",Z,o.XHRCorsObject)};N.prototype=new R,N.enabled=I.enabled,N.roundTrips=2;var B=C["xdr-polling"]=function(e,t){this.run(e,t,"/xhr",Z,o.XDRObject)};B.prototype=new R,B.enabled=P.enabled,B.roundTrips=2;var A=function(){};A.prototype.i_constructor=function(e,t,n){var r=this;r.ri=e,r.origin=o.getOrigin(n),r.base_url=n,r.trans_url=t;var i=n+"/iframe.html";r.ri._options.devel&&(i+="?t="+ +new Date),r.window_id=o.random_string(8),i+="#"+r.window_id,r.iframeObj=o.createIframe(i,function(e){r.ri._didClose(1006,"Unable to load an iframe ("+e+")")}),r.onmessage_cb=o.bind(r.onmessage,r),o.attachMessage(r.onmessage_cb)},A.prototype.doCleanup=function(){var e=this;if(e.iframeObj){o.detachMessage(e.onmessage_cb);try{e.iframeObj.iframe.contentWindow&&e.postMessage("c")}catch(e){}e.iframeObj.cleanup(),e.iframeObj=null,e.onmessage_cb=e.iframeObj=null}},A.prototype.onmessage=function(e){var t=this;if(e.origin===t.origin){var n=e.data.slice(0,8),o=e.data.slice(8,9),r=e.data.slice(9);if(n===t.window_id)switch(o){case"s":t.iframeObj.loaded(),t.postMessage("s",JSON.stringify([C.version,t.protocol,t.trans_url,t.base_url]));break;case"t":t.ri._didMessage(r);break}}},A.prototype.postMessage=function(e,t){var n=this;n.iframeObj.post(n.window_id+e+(t||""),n.origin)},A.prototype.doSend=function(e){this.postMessage("m",e)},A.enabled=function(){var e=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof t.postMessage||"object"===(0,n.default)(t.postMessage))&&!e};var U,F=function(e,n){parent!==t?parent.postMessage(U+e+(n||""),"*"):o.log("Can't postMessage, no parent window.",e,n)},W=function(){};W.prototype._didClose=function(e,t){F("t",o.closeFrame(e,t))},W.prototype._didMessage=function(e){F("t",e)},W.prototype._doSend=function(e){this._transport.doSend(e)},W.prototype._doCleanup=function(){this._transport.doCleanup()},o.parent_origin=void 0,C.bootstrap_iframe=function(){var n;U=e.location.hash.slice(1);var r=function(e){if(e.source===parent&&(void 0===o.parent_origin&&(o.parent_origin=e.origin),e.origin===o.parent_origin)){var r=e.data.slice(0,8),i=e.data.slice(8,9),s=e.data.slice(9);if(r===U)switch(i){case"s":var a=JSON.parse(s),u=a[0],c=a[1],d=a[2],l=a[3];if(u!==C.version&&o.log('Incompatibile SockJS! Main site uses: "'+u+'", the iframe: "'+C.version+'".'),!o.flatUrl(d)||!o.flatUrl(l))return void o.log("Only basic urls are supported in SockJS");if(!o.isSameOriginUrl(d)||!o.isSameOriginUrl(l))return void o.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([t.location.href,d,l])+")");(n=new W)._transport=new W[c](n,d,l);break;case"m":n._doSend(s);break;case"c":n&&n._doCleanup(),n=null;break}}};o.attachMessage(r),F("s")};var L=function(e,t){var n=this;o.delay(function(){n.doXhr(e,t)})};(L.prototype=new s(["finish"])).doXhr=function(e,t){var r=this,i=(new Date).getTime(),s=new t("GET",e+"/info?cb="+o.random_string(10)),a=o.delay(8e3,function(){s.ontimeout()});s.onfinish=function(e,t){if(clearTimeout(a),a=null,200===e){var o=(new Date).getTime()-i,s=JSON.parse(t);"object"!==(void 0===s?"undefined":(0,n.default)(s))&&(s={}),r.emit("finish",s,o)}else r.emit("finish")},s.ontimeout=function(){s.close(),r.emit("finish")}};var H=function(t){var n=this,r=function(){var e=new A;e.protocol="w-iframe-info-receiver";var o=function(t){if("string"==typeof t&&"m"===t.substr(0,1)){var o=JSON.parse(t.substr(1)),r=o[0],i=o[1];n.emit("finish",r,i)}else n.emit("finish");e.doCleanup(),e=null},r={_options:{},_didClose:o,_didMessage:o};e.i_constructor(r,t,t)};e.body?r():o.attachEvent("load",r)};H.prototype=new s(["finish"]);var X=function(){var e=this;o.delay(function(){e.emit("finish",{},2e3)})};X.prototype=new s(["finish"]);var V=function(e){if(o.isSameOriginUrl(e))return new L(e,o.XHRLocalObject);switch(o.isXHRCorsCapable()){case 1:return new L(e,o.XHRLocalObject);case 2:return o.isSameOriginScheme(e)?new L(e,o.XDRObject):new X;case 3:return new H(e);default:return new X}};(W["w-iframe-info-receiver"]=function(e,t,n){new L(n,o.XHRLocalObject).onfinish=function(t,n){e._didMessage("m"+JSON.stringify([t,n])),e._didClose()}}).prototype.doCleanup=function(){};var J=C["iframe-eventsource"]=function(){var e=this;e.protocol="w-iframe-eventsource",e.i_constructor.apply(e,arguments)};J.prototype=new A,J.enabled=function(){return"EventSource"in t&&A.enabled()},J.need_body=!0,J.roundTrips=3,(W["w-iframe-eventsource"]=function(e,t){this.run(e,t,"/eventsource",z,o.XHRLocalObject)}).prototype=new R;var q=C["iframe-xhr-polling"]=function(){var e=this;e.protocol="w-iframe-xhr-polling",e.i_constructor.apply(e,arguments)};q.prototype=new A,q.enabled=function(){return t.XMLHttpRequest&&A.enabled()},q.need_body=!0,q.roundTrips=3,(W["w-iframe-xhr-polling"]=function(e,t){this.run(e,t,"/xhr",Z,o.XHRLocalObject)}).prototype=new R;var G=C["iframe-htmlfile"]=function(){var e=this;e.protocol="w-iframe-htmlfile",e.i_constructor.apply(e,arguments)};G.prototype=new A,G.enabled=function(){return A.enabled()},G.need_body=!0,G.roundTrips=3,(W["w-iframe-htmlfile"]=function(e,t){this.run(e,t,"/htmlfile",K,o.XHRLocalObject)}).prototype=new R;var Q=function(e,t,n,o){var r=this;r.ri=e,r.Receiver=t,r.recv_url=n,r.AjaxObject=o,r._scheduleRecv()};Q.prototype._scheduleRecv=function(){var e=this,t=e.poll=new e.Receiver(e.recv_url,e.AjaxObject),n=0;t.onmessage=function(t){n+=1,e.ri._didMessage(t.data)},t.onclose=function(n){e.poll=t=t.onmessage=t.onclose=null,e.poll_is_closing||("permanent"===n.reason?e.ri._didClose(1006,"Polling error ("+n.reason+")"):e._scheduleRecv())}},Q.prototype.abort=function(){var e=this;e.poll_is_closing=!0,e.poll&&e.poll.abort()};var z=function(e){var t=this,n=new EventSource(e);n.onmessage=function(e){t.dispatchEvent(new i("message",{data:unescape(e.data)}))},t.es_close=n.onerror=function(e,r){var s=r?"user":2!==n.readyState?"network":"permanent";t.es_close=n.onmessage=n.onerror=null,n.close(),n=null,o.delay(200,function(){t.dispatchEvent(new i("close",{reason:s}))})}};z.prototype=new r,z.prototype.abort=function(){var e=this;e.es_close&&e.es_close({},!0)};var $,Y=function(){if(void 0===$)if("ActiveXObject"in t)try{$=!!new ActiveXObject("htmlfile")}catch(e){}else $=!1;return $},K=function(e){var n=this;o.polluteGlobalNamespace(),n.id="a"+o.random_string(6,26),e+=(-1===e.indexOf("?")?"?":"&")+"c="+escape("_jp."+n.id);var r=Y()?o.createHtmlfile:o.createIframe,s;t._jp[n.id]={start:function(){s.loaded()},message:function(e){n.dispatchEvent(new i("message",{data:e}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(e,o){s.cleanup(),n.iframe_close=s=null,delete t._jp[n.id],n.dispatchEvent(new i("close",{reason:o}))},s=r(e,function(e){n.iframe_close({},"permanent")})};K.prototype=new r,K.prototype.abort=function(){var e=this;e.iframe_close&&e.iframe_close({},"user")};var Z=function(e,t){var n=this,o=0;n.xo=new t("POST",e,null),n.xo.onchunk=function(e,t){if(200===e)for(;;){var r=t.slice(o),s=r.indexOf("\n");if(-1===s)break;o+=s+1;var a=r.slice(0,s);n.dispatchEvent(new i("message",{data:a}))}},n.xo.onfinish=function(e,t){n.xo.onchunk(e,t),n.xo=null;var o=200===e?"network":"permanent";n.dispatchEvent(new i("close",{reason:o}))}};return Z.prototype=new r,Z.prototype.abort=function(){var e=this;e.xo&&(e.xo.close(),e.dispatchEvent(new i("close",{reason:"user"})),e.xo=null)},C.getUtils=function(){return o},C.getIframeTransport=function(){return A},C}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return k})},"stream_client_sockjs.js":function(t,n,o){var r=void 0,i=void 0;o.watch(t("./namespace.js"),{DDP:function(e){r=e},LivedataTest:function(e){i=e}},0),i.ClientStream=function(e,t){var n=this;n.options=a.extend({retry:!0},t),n._initCommon(n.options),n.HEARTBEAT_TIMEOUT=1e5,n.rawUrl=e,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",a.bind(n._online,n),!1),n._launchConnection()},a.extend(i.ClientStream.prototype,{send:function(e){var t=this;t.currentStatus.connected&&t.socket.send(e)},_changeUrl:function(e){this.rawUrl=e},_connected:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.currentStatus.connected||(e.currentStatus.status="connected",e.currentStatus.connected=!0,e.currentStatus.retryCount=0,e.statusChanged(),a.each(e.eventCallbacks.reset,function(e){e()}))},_cleanup:function(e){var t=this;t._clearConnectionAndHeartbeatTimers(),t.socket&&(t.socket.onmessage=t.socket.onclose=t.socket.onerror=t.socket.onheartbeat=function(){},t.socket.close(),t.socket=null),a.each(t.eventCallbacks.disconnect,function(t){t(e)})},_clearConnectionAndHeartbeatTimers:function(){var e=this;e.connectionTimer&&(clearTimeout(e.connectionTimer),e.connectionTimer=null),e.heartbeatTimer&&(clearTimeout(e.heartbeatTimer),e.heartbeatTimer=null)},_heartbeat_timeout:function(){var t=this;e._debug("Connection timeout. No sockjs heartbeat received."),t._lostConnection(new r.ConnectionError("Heartbeat timed out"))},_heartbeat_received:function(){var e=this;e._forcedToDisconnect||(e.heartbeatTimer&&clearTimeout(e.heartbeatTimer),e.heartbeatTimer=setTimeout(a.bind(e._heartbeat_timeout,e),e.HEARTBEAT_TIMEOUT))},_sockjsProtocolsWhitelist:function(){var e=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];return navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent)||(e=["websocket"].concat(e)),e},_launchConnection:function(){var t=this;t._cleanup();var n=a.extend({protocols_whitelist:t._sockjsProtocolsWhitelist()},t.options._sockjsOptions);t.socket=new k(S(t.rawUrl),void 0,n),t.socket.onopen=function(e){t._connected()},t.socket.onmessage=function(e){t._heartbeat_received(),t.currentStatus.connected&&a.each(t.eventCallbacks.message,function(t){t(e.data)})},t.socket.onclose=function(){t._lostConnection()},t.socket.onerror=function(){e._debug("stream error",a.toArray(arguments),(new Date).toDateString())},t.socket.onheartbeat=function(){t._heartbeat_received()},t.connectionTimer&&clearTimeout(t.connectionTimer),t.connectionTimer=setTimeout(function(){t._lostConnection(new r.ConnectionError("DDP connection timed out"))},t.CONNECT_TIMEOUT)}})},"stream_client_common.js":function(t,n,o){var r=void 0,s=void 0;o.watch(t("./namespace.js"),{DDP:function(e){r=e},LivedataTest:function(e){s=e}},0);var c=function(e,t){return e.length>=t.length&&e.substring(0,t.length)===t},l=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t},f=function(t,n,o){n||(n="http");var r=t.match(/^ddp(i?)\+sockjs:\/\//),s=t.match(/^http(s?):\/\//),a;if(r){var u=t.substr(r[0].length);a="i"===r[1]?n:n+"s";var d=u.indexOf("/"),f=-1===d?u:u.substr(0,d),_=-1===d?"":u.substr(d);return f=f.replace(/\*/g,function(){return Math.floor(10*i.fraction())}),a+"://"+f+_}return s&&(t=(a=s[1]?n+"s":n)+"://"+t.substr(s[0].length)),-1!==t.indexOf("://")||c(t,"/")||(t=n+"://"+t),t=e._relativeToSiteRootUrl(t),l(t,"/")?t+o:t+"/"+o};S=function(e){return f(e,"http","sockjs")},C=function(e){return f(e,"ws","websocket")},s.toSockjsUrl=S,a.extend(s.ClientStream.prototype,{on:function(e,t){var n=this;if("message"!==e&&"reset"!==e&&"disconnect"!==e)throw new Error("unknown event type: "+e);n.eventCallbacks[e]||(n.eventCallbacks[e]=[]),n.eventCallbacks[e].push(t)},_initCommon:function(e){var t=this;e=e||{},t.CONNECT_TIMEOUT=e.connectTimeoutMs||1e4,t.eventCallbacks={},t._forcedToDisconnect=!1,t.currentStatus={status:"connecting",connected:!1,retryCount:0},t.statusListeners=void 0!==u&&new u.Dependency,t.statusChanged=function(){t.statusListeners&&t.statusListeners.changed()},t._retry=new d,t.connectionTimer=null},reconnect:function(e){var t=this;(e=e||{}).url&&t._changeUrl(e.url),e._sockjsOptions&&(t.options._sockjsOptions=e._sockjsOptions),t.currentStatus.connected?(e._force||e.url)&&t._lostConnection(new r.ForcedReconnectError):("connecting"===t.currentStatus.status&&t._lostConnection(),t._retry.clear(),t.currentStatus.retryCount-=1,t._retryNow())},disconnect:function(e){var t=this;e=e||{},t._forcedToDisconnect||(e._permanent&&(t._forcedToDisconnect=!0),t._cleanup(),t._retry.clear(),t.currentStatus={status:e._permanent?"failed":"offline",connected:!1,retryCount:0},e._permanent&&e._error&&(t.currentStatus.reason=e._error),t.statusChanged())},_lostConnection:function(e){var t=this;t._cleanup(e),t._retryLater(e)},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(e){var t=this,n=0;t.options.retry||e&&"DDP.ForcedReconnectError"===e.errorType?(n=t._retry.retryLater(t.currentStatus.retryCount,a.bind(t._retryNow,t)),t.currentStatus.status="waiting",t.currentStatus.retryTime=(new Date).getTime()+n):(t.currentStatus.status="failed",delete t.currentStatus.retryTime),t.currentStatus.connected=!1,t.statusChanged()},_retryNow:function(){var e=this;e._forcedToDisconnect||(e.currentStatus.retryCount+=1,e.currentStatus.status="connecting",e.currentStatus.connected=!1,delete e.currentStatus.retryTime,e.statusChanged(),e._launchConnection())},status:function(){var e=this;return e.statusListeners&&e.statusListeners.depend(),e.currentStatus}}),r.ConnectionError=e.makeErrorType("DDP.ConnectionError",function(e){this.message=e}),r.ForcedReconnectError=e.makeErrorType("DDP.ForcedReconnectError",function(){})},"livedata_common.js":function(t,n,o){var r=void 0,i=void 0;o.watch(t("./namespace.js"),{DDP:function(e){r=e},LivedataTest:function(e){i=e}},0),i.SUPPORTED_DDP_VERSIONS=_.SUPPORTED_DDP_VERSIONS,r._CurrentMethodInvocation=new e.EnvironmentVariable,r._CurrentPublicationInvocation=new e.EnvironmentVariable,r._CurrentInvocation=r._CurrentMethodInvocation},"random_stream.js":function(e,t,n){var o=void 0;n.watch(e("./namespace.js"),{DDP:function(e){o=e}},0),o.randomStream=function(e){var t=o._CurrentMethodInvocation.get();return _.RandomStream.get(t,e)}},"livedata_connection.js":function(t,n,o){function r(e){return e&&e.__esModule?e:{default:e}}var c=r(t("babel-runtime/helpers/typeof")),d=void 0,l=void 0;o.watch(t("./namespace.js"),{DDP:function(e){d=e},LivedataTest:function(e){l=e}},0);var v=void 0;if(o.watch(t("./id_map.js"),{MongoIDMap:function(e){v=e}},1),e.isServer)var m=Npm.require("fibers"),g=Npm.require("fibers/future");var b=function(t,n){var o=this;n=a.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(t){e._debug(t)},heartbeatInterval:17500,heartbeatTimeout:15e3,npmFayeOptions:{},reloadWithOutstanding:!1,supportedDDPVersions:_.SUPPORTED_DDP_VERSIONS,retry:!0,respondToPings:!0,bufferedWritesInterval:5,bufferedWritesMaxAge:500},n),o.onReconnect=null,"object"===(void 0===t?"undefined":(0,c.default)(t))?o._stream=t:o._stream=new l.ClientStream(t,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions,_dontPrintErrors:n._dontPrintErrors,connectTimeoutMs:n.connectTimeoutMs,npmFayeOptions:n.npmFayeOptions}),o._lastSessionId=null,o._versionSuggestion=null,o._version=null,o._stores={},o._methodHandlers={},o._nextMethodId=1,o._supportedDDPVersions=n.supportedDDPVersions,o._heartbeatInterval=n.heartbeatInterval,o._heartbeatTimeout=n.heartbeatTimeout,o._methodInvokers={},o._outstandingMethodBlocks=[],o._documentsWrittenByStub={},o._serverDocuments={},o._afterUpdateCallbacks=[],o._messagesBufferedUntilQuiescence=[],o._methodsBlockingQuiescence={},o._subsBeingRevived={},o._resetStores=!1,o._updatesForUnknownStores={},o._retryMigrate=null,o.__flushBufferedWrites=e.bindEnvironment(o._flushBufferedWrites,"flushing DDP buffered writes",o),o._bufferedWrites={},o._bufferedWritesFlushAt=null,o._bufferedWritesFlushHandle=null,o._bufferedWritesInterval=n.bufferedWritesInterval,o._bufferedWritesMaxAge=n.bufferedWritesMaxAge,o._subscriptions={},o._userId=null,o._userIdDeps=new u.Dependency,e.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(e){if(o._readyToMigrate())return[!0];if(o._retryMigrate)throw new Error("Two migrations in progress?");return o._retryMigrate=e,!1});var r=function(t){try{var r=_.parseDDP(t)}catch(t){return void e._debug("Exception while parsing DDP",t)}if(o._heartbeat&&o._heartbeat.messageReceived(),null!==r&&r.msg)if("connected"===r.msg)o._version=o._versionSuggestion,o._livedata_connected(r),n.onConnected();else if("failed"===r.msg)if(a.contains(o._supportedDDPVersions,r.version))o._versionSuggestion=r.version,o._stream.reconnect({_force:!0});else{var i="DDP version negotiation failed; server requested version "+r.version;o._stream.disconnect({_permanent:!0,_error:i}),n.onDDPVersionNegotiationFailure(i)}else"ping"===r.msg&&n.respondToPings?o._send({msg:"pong",id:r.id}):"pong"===r.msg||(a.include(["added","changed","removed","ready","updated"],r.msg)?o._livedata_data(r):"nosub"===r.msg?o._livedata_nosub(r):"result"===r.msg?o._livedata_result(r):"error"===r.msg?o._livedata_error(r):e._debug("discarding unknown livedata message type",r));else r&&r.server_id||e._debug("discarding invalid livedata message",r)},i=function(){var t={msg:"connect"};if(o._lastSessionId&&(t.session=o._lastSessionId),t.version=o._versionSuggestion||o._supportedDDPVersions[0],o._versionSuggestion=t.version,t.support=o._supportedDDPVersions,o._send(t),o._outstandingMethodBlocks.length>0){var n=o._outstandingMethodBlocks[0].methods;o._outstandingMethodBlocks[0].methods=n.filter(function(t){return t.sentMessage&&t.noRetry&&t.receiveResult(new e.Error("invocation-failed","Method invocation might have failed due to dropped connection. Failing because `noRetry` option was passed to Meteor.apply.")),!(t.sentMessage&&t.noRetry)})}!a.isEmpty(o._outstandingMethodBlocks)&&a.isEmpty(o._outstandingMethodBlocks[0].methods)&&o._outstandingMethodBlocks.shift(),a.each(o._methodInvokers,function(e){e.sentMessage=!1}),o._callOnReconnectAndSendAppropriateOutstandingMethods(),a.each(o._subscriptions,function(e,t){o._send({msg:"sub",id:t,name:e.name,params:e.params})})},s=function(){o._heartbeat&&(o._heartbeat.stop(),o._heartbeat=null)};e.isServer?(o._stream.on("message",e.bindEnvironment(r,"handling DDP message")),o._stream.on("reset",e.bindEnvironment(i,"handling DDP reset")),o._stream.on("disconnect",e.bindEnvironment(s,"handling DDP disconnect"))):(o._stream.on("message",r),o._stream.on("reset",i),o._stream.on("disconnect",s))},y=function(e){var t=this;t.methodId=e.methodId,t.sentMessage=!1,t._callback=e.callback,t._connection=e.connection,t._message=e.message,t._onResultReceived=e.onResultReceived||function(){},t._wait=e.wait,t.noRetry=e.noRetry,t._methodResult=null,t._dataVisible=!1,t._connection._methodInvokers[t.methodId]=t};a.extend(y.prototype,{sendMessage:function(){var e=this;if(e.gotResult())throw new Error("sendingMethod is called on method with result");e._dataVisible=!1,e.sentMessage=!0,e._wait&&(e._connection._methodsBlockingQuiescence[e.methodId]=!0),e._connection._send(e._message)},_maybeInvokeCallback:function(){var e=this;e._methodResult&&e._dataVisible&&(e._callback(e._methodResult[0],e._methodResult[1]),delete e._connection._methodInvokers[e.methodId],e._connection._outstandingMethodFinished())},receiveResult:function(e,t){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[e,t],n._onResultReceived(e,t),n._maybeInvokeCallback()},dataVisible:function(){var e=this;e._dataVisible=!0,e._maybeInvokeCallback()},gotResult:function(){return!!this._methodResult}}),a.extend(b.prototype,{registerStore:function(e,t){var n=this;if(e in n._stores)return!1;var o={};a.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals","getDoc","_getCollection"],function(e){o[e]=function(){return t[e]?t[e].apply(t,arguments):void 0}}),n._stores[e]=o;var r=n._updatesForUnknownStores[e];return r&&(o.beginUpdate(r.length,!1),a.each(r,function(e){o.update(e)}),o.endUpdate(),delete n._updatesForUnknownStores[e]),!0},subscribe:function(e){var t=this,n=Array.prototype.slice.call(arguments,1),o={};if(n.length){var r=n[n.length-1];a.isFunction(r)?o.onReady=n.pop():r&&a.any([r.onReady,r.onError,r.onStop],a.isFunction)&&(o=n.pop())}var c=a.find(t._subscriptions,function(t){return t.inactive&&t.name===e&&s.equals(t.params,n)}),d;c?(d=c.id,c.inactive=!1,o.onReady&&(c.ready?o.onReady():c.readyCallback=o.onReady),o.onError&&(c.errorCallback=o.onError),o.onStop&&(c.stopCallback=o.onStop)):(d=i.id(),t._subscriptions[d]={id:d,name:e,params:s.clone(n),inactive:!1,ready:!1,readyDeps:new u.Dependency,readyCallback:o.onReady,errorCallback:o.onError,stopCallback:o.onStop,connection:t,remove:function(){delete this.connection._subscriptions[this.id],this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:d}),this.remove(),o.onStop&&o.onStop()}},t._send({msg:"sub",id:d,name:e,params:n}));var l={stop:function(){a.has(t._subscriptions,d)&&t._subscriptions[d].stop()},ready:function(){if(!a.has(t._subscriptions,d))return!1;var e=t._subscriptions[d];return e.readyDeps.depend(),e.ready},subscriptionId:d};return u.active&&u.onInvalidate(function(e){a.has(t._subscriptions,d)&&(t._subscriptions[d].inactive=!0),u.afterFlush(function(){a.has(t._subscriptions,d)&&t._subscriptions[d].inactive&&l.stop()})}),l},_subscribeAndWait:function(e,t,n){var o=this,r=new g,i=!1,s;return(t=t||[]).push({onReady:function(){i=!0,r.return()},onError:function(e){i?n&&n.onLateError&&n.onLateError(e):r.throw(e)}}),s=o.subscribe.apply(o,[e].concat(t)),r.wait(),s},methods:function(e){var t=this;a.each(e,function(e,n){if("function"!=typeof e)throw new Error("Method '"+n+"' must be a function");if(t._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");t._methodHandlers[n]=e})},call:function(e){var t=Array.prototype.slice.call(arguments,1);if(t.length&&"function"==typeof t[t.length-1])var n=t.pop();return this.apply(e,t,n)},apply:function(t,n,o,r){var i=this;r||"function"!=typeof o||(r=o,o={}),o=o||{},r&&(r=e.bindEnvironment(r,"delivering result of invoking '"+t+"'")),n=s.clone(n);var u=function(){var e;return function(){return void 0===e&&(e=""+i._nextMethodId++),e}}(),c=d._CurrentMethodInvocation.get(),l=c&&c.isSimulation,f=null,p=function(){return null===f&&(f=_.makeRpcSeed(c,t)),f},h=i._methodHandlers[t];if(h){var v=function(e){i.setUserId(e)},m=new _.MethodInvocation({isSimulation:!0,userId:i.userId(),setUserId:v,randomSeed:function(){return p()}});l||i._saveOriginals();try{var b=d._CurrentMethodInvocation.withValue(m,function(){return e.isServer?e._noYieldsAllowed(function(){return h.apply(m,s.clone(n))}):h.apply(m,s.clone(n))})}catch(e){var w=e}l||i._retrieveAndStoreOriginals(u())}if(l){if(r)return void r(w,b);if(w)throw w;return b}if(w){if(o.throwStubExceptions)throw w;w.expected||e._debug("Exception while simulating the effect of invoking '"+t+"'",w,w.stack)}if(!r)if(e.isClient)r=function(n){n&&e._debug("Error invoking Method '"+t+"':",n.message)};else{var k=new g;r=k.resolver()}var S={msg:"method",method:t,params:n,id:u()};null!==f&&(S.randomSeed=f);var C=new y({methodId:u(),callback:r,connection:i,onResultReceived:o.onResultReceived,wait:!!o.wait,message:S,noRetry:!!o.noRetry});return o.wait?i._outstandingMethodBlocks.push({wait:!0,methods:[C]}):((a.isEmpty(i._outstandingMethodBlocks)||a.last(i._outstandingMethodBlocks).wait)&&i._outstandingMethodBlocks.push({wait:!1,methods:[]}),a.last(i._outstandingMethodBlocks).methods.push(C)),1===i._outstandingMethodBlocks.length&&C.sendMessage(),k?k.wait():o.returnStubValue?b:void 0},_saveOriginals:function(){var e=this;e._waitingForQuiescence()||e._flushBufferedWrites(),a.each(e._stores,function(e){e.saveOriginals()})},_retrieveAndStoreOriginals:function(e){var t=this;if(t._documentsWrittenByStub[e])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];a.each(t._stores,function(o,r){var i=o.retrieveOriginals();i&&i.forEach(function(o,i){n.push({collection:r,id:i}),a.has(t._serverDocuments,r)||(t._serverDocuments[r]=new v);var s=t._serverDocuments[r].setDefault(i,{});s.writtenByStubs?s.writtenByStubs[e]=!0:(s.document=o,s.flushCallbacks=[],s.writtenByStubs={},s.writtenByStubs[e]=!0)})}),a.isEmpty(n)||(t._documentsWrittenByStub[e]=n)},_unsubscribeAll:function(){var e=this;a.each(a.clone(e._subscriptions),function(t,n){"meteor_autoupdate_clientVersions"!==t.name&&e._subscriptions[n].stop()})},_send:function(e){this._stream.send(_.stringifyDDP(e))},_lostConnection:function(e){this._stream._lostConnection(e)},status:function(){var e=this;return e._stream.status.apply(e._stream,arguments)},reconnect:function(){var e=this;return e._stream.reconnect.apply(e._stream,arguments)},disconnect:function(){var e=this;return e._stream.disconnect.apply(e._stream,arguments)},close:function(){return this._stream.disconnect({_permanent:!0})},userId:function(){var e=this;return e._userIdDeps&&e._userIdDeps.depend(),e._userId},setUserId:function(e){var t=this;t._userId!==e&&(t._userId=e,t._userIdDeps&&t._userIdDeps.changed())},_waitingForQuiescence:function(){var e=this;return!a.isEmpty(e._subsBeingRevived)||!a.isEmpty(e._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var e=this;return a.any(a.pluck(e._methodInvokers,"sentMessage"))},_livedata_connected:function(e){var t=this;if("pre1"!==t._version&&0!==t._heartbeatInterval&&(t._heartbeat=new _.Heartbeat({heartbeatInterval:t._heartbeatInterval,heartbeatTimeout:t._heartbeatTimeout,onTimeout:function(){t._lostConnection(new d.ConnectionError("DDP heartbeat timed out"))},sendPing:function(){t._send({msg:"ping"})}}),t._heartbeat.start()),t._lastSessionId&&(t._resetStores=!0),"string"==typeof e.session){var n=t._lastSessionId===e.session;t._lastSessionId=e.session}n||(t._updatesForUnknownStores={},t._resetStores&&(t._documentsWrittenByStub={},t._serverDocuments={}),t._afterUpdateCallbacks=[],t._subsBeingRevived={},a.each(t._subscriptions,function(e,n){e.ready&&(t._subsBeingRevived[n]=!0)}),t._methodsBlockingQuiescence={},t._resetStores&&a.each(t._methodInvokers,function(e){e.gotResult()?t._afterUpdateCallbacks.push(a.bind(e.dataVisible,e)):e.sentMessage&&(t._methodsBlockingQuiescence[e.methodId]=!0)}),t._messagesBufferedUntilQuiescence=[],t._waitingForQuiescence()||(t._resetStores&&(a.each(t._stores,function(e){e.beginUpdate(0,!0),e.endUpdate()}),t._resetStores=!1),t._runAfterUpdateCallbacks()))},_processOneDataMessage:function(e,t){this["_process_"+e.msg](e,t)},_livedata_data:function(e){var t=this;if(t._waitingForQuiescence()){if(t._messagesBufferedUntilQuiescence.push(e),"nosub"===e.msg&&delete t._subsBeingRevived[e.id],a.each(e.subs||[],function(e){delete t._subsBeingRevived[e]}),a.each(e.methods||[],function(e){delete t._methodsBlockingQuiescence[e]}),t._waitingForQuiescence())return;a.each(t._messagesBufferedUntilQuiescence,function(e){t._processOneDataMessage(e,t._bufferedWrites)}),t._messagesBufferedUntilQuiescence=[]}else t._processOneDataMessage(e,t._bufferedWrites);var n=a.include(["added","changed","removed"],e.msg);if(0!==t._bufferedWritesInterval&&n){if(null===t._bufferedWritesFlushAt)t._bufferedWritesFlushAt=(new Date).valueOf()+t._bufferedWritesMaxAge;else if(t._bufferedWritesFlushAt<(new Date).valueOf())return void t._flushBufferedWrites();t._bufferedWritesFlushHandle&&clearTimeout(t._bufferedWritesFlushHandle),t._bufferedWritesFlushHandle=setTimeout(t.__flushBufferedWrites,t._bufferedWritesInterval)}else t._flushBufferedWrites()},_flushBufferedWrites:function(){var e=this;e._bufferedWritesFlushHandle&&(clearTimeout(e._bufferedWritesFlushHandle),e._bufferedWritesFlushHandle=null),e._bufferedWritesFlushAt=null;var t=e._bufferedWrites;e._bufferedWrites={},e._performWrites(t)},_performWrites:function(e){var t=this;!t._resetStores&&a.isEmpty(e)||(a.each(t._stores,function(n,o){n.beginUpdate(a.has(e,o)?e[o].length:0,t._resetStores)}),t._resetStores=!1,a.each(e,function(e,n){var o=t._stores[n];o?a.each(e,function(e){o.update(e)}):(a.has(t._updatesForUnknownStores,n)||(t._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(t._updatesForUnknownStores[n],e))}),a.each(t._stores,function(e){e.endUpdate()})),t._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var e=this,t=e._afterUpdateCallbacks;e._afterUpdateCallbacks=[],a.each(t,function(e){e()})},_pushUpdate:function(e,t,n){var o=this;a.has(e,t)||(e[t]=[]),e[t].push(n)},_getServerDoc:function(e,t){var n=this;return a.has(n._serverDocuments,e)?n._serverDocuments[e].get(t)||null:null},_process_added:function(e,t){var n=this,o=h.idParse(e.id),r=n._getServerDoc(e.collection,o);if(r){var i=void 0!==r.document;if(r.document=e.fields||{},r.document._id=o,n._resetStores){var s=n._stores[e.collection].getDoc(e.id);void 0!==s&&(e.fields=s),n._pushUpdate(t,e.collection,e)}else if(i)throw new Error("Server sent add for existing id: "+e.id)}else n._pushUpdate(t,e.collection,e)},_process_changed:function(e,t){var n=this,o=n._getServerDoc(e.collection,h.idParse(e.id));if(o){if(void 0===o.document)throw new Error("Server sent changed for nonexisting id: "+e.id);p.applyChanges(o.document,e.fields)}else n._pushUpdate(t,e.collection,e)},_process_removed:function(e,t){var n=this,o=n._getServerDoc(e.collection,h.idParse(e.id));if(o){if(void 0===o.document)throw new Error("Server sent removed for nonexisting id:"+e.id);o.document=void 0}else n._pushUpdate(t,e.collection,{msg:"removed",collection:e.collection,id:e.id})},_process_updated:function(e,t){var n=this;a.each(e.methods,function(e){a.each(n._documentsWrittenByStub[e],function(o){var r=n._getServerDoc(o.collection,o.id);if(!r)throw new Error("Lost serverDoc for "+JSON.stringify(o));if(!r.writtenByStubs[e])throw new Error("Doc "+JSON.stringify(o)+" not written by  method "+e);delete r.writtenByStubs[e],a.isEmpty(r.writtenByStubs)&&(n._pushUpdate(t,o.collection,{msg:"replace",id:h.idStringify(o.id),replace:r.document}),a.each(r.flushCallbacks,function(e){e()}),n._serverDocuments[o.collection].remove(o.id))}),delete n._documentsWrittenByStub[e];var o=n._methodInvokers[e];if(!o)throw new Error("No callback invoker for method "+e);n._runWhenAllServerDocsAreFlushed(a.bind(o.dataVisible,o))})},_process_ready:function(e,t){var n=this;a.each(e.subs,function(e){n._runWhenAllServerDocsAreFlushed(function(){var t=n._subscriptions[e];t&&(t.ready||(t.ready=!0,t.readyCallback&&t.readyCallback(),t.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(e){var t=this,n=function(){t._afterUpdateCallbacks.push(e)},o=0,r=function(){0===--o&&n()};a.each(t._serverDocuments,function(e){e.forEach(function(e){a.any(e.writtenByStubs,function(e,n){var o=t._methodInvokers[n];return o&&o.sentMessage})&&(++o,e.flushCallbacks.push(r))})}),0===o&&n()},_livedata_nosub:function(t){var n=this;if(n._livedata_data(t),a.has(n._subscriptions,t.id)){var o=n._subscriptions[t.id].errorCallback,r=n._subscriptions[t.id].stopCallback;n._subscriptions[t.id].remove();var i=function(t){return t&&t.error&&new e.Error(t.error.error,t.error.reason,t.error.details)};o&&t.error&&o(i(t)),r&&r(i(t))}},_process_nosub:function(){},_livedata_result:function(t){var n=this;if(a.isEmpty(n._bufferedWrites)||n._flushBufferedWrites(),a.isEmpty(n._outstandingMethodBlocks))e._debug("Received method result but no methods outstanding");else{for(var o=n._outstandingMethodBlocks[0].methods,r,i=0;i<o.length&&(r=o[i]).methodId!==t.id;i++);r?(o.splice(i,1),a.has(t,"error")?r.receiveResult(new e.Error(t.error.error,t.error.reason,t.error.details)):r.receiveResult(void 0,t.result)):e._debug("Can't match method response to original method call",t)}},_outstandingMethodFinished:function(){var e=this;if(!e._anyMethodsAreOutstanding()){if(!a.isEmpty(e._outstandingMethodBlocks)){var t=e._outstandingMethodBlocks.shift();if(!a.isEmpty(t.methods))throw new Error("No methods outstanding but nonempty block: "+JSON.stringify(t));a.isEmpty(e._outstandingMethodBlocks)||e._sendOutstandingMethods()}e._maybeMigrate()}},_sendOutstandingMethods:function(){var e=this;a.isEmpty(e._outstandingMethodBlocks)||a.each(e._outstandingMethodBlocks[0].methods,function(e){e.sendMessage()})},_livedata_error:function(t){e._debug("Received error from server: ",t.reason),t.offendingMessage&&e._debug("For: ",t.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var e=this,t=e._outstandingMethodBlocks;if(e._outstandingMethodBlocks=[],e.onReconnect&&e.onReconnect(),d._reconnectHook.each(function(t){return t(e),!0}),!a.isEmpty(t)){if(a.isEmpty(e._outstandingMethodBlocks))return e._outstandingMethodBlocks=t,void e._sendOutstandingMethods();a.last(e._outstandingMethodBlocks).wait||t[0].wait||(a.each(t[0].methods,function(t){a.last(e._outstandingMethodBlocks).methods.push(t),1===e._outstandingMethodBlocks.length&&t.sendMessage()}),t.shift()),a.each(t,function(t){e._outstandingMethodBlocks.push(t)})}},_readyToMigrate:function(){var e=this;return a.isEmpty(e._methodInvokers)},_maybeMigrate:function(){var e=this;e._retryMigrate&&e._readyToMigrate()&&(e._retryMigrate(),e._retryMigrate=null)}}),l.Connection=b,d.connect=function(e,t){var n=new b(e,t);return E.push(n),n},d._reconnectHook=new f({bindEnvironment:!1}),d.onReconnect=function(e){return d._reconnectHook.register(e)},E=[],d._allSubscriptionsReady=function(){return a.all(E,function(e){return a.all(e._subscriptions,function(e){return e.ready})})}},"client_convenience.js":function(t,n,o){var r=void 0;if(o.watch(t("./namespace.js"),{DDP:function(e){r=e}},0),e.refresh=function(e){},e.isClient){var i="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(i=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var s=new d,u=function(t){if(e._debug(t),Package.reload){var n=(Package.reload.Reload._migrationData("livedata")||{}).DDPVersionNegotiationFailures||0;++n,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:n}]}),s.retryLater(n,function(){Package.reload.Reload._reload()})}};e.connection=r.connect(i,{onDDPVersionNegotiationFailure:u}),a.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(t){e[t]=a.bind(e.connection[t],e.connection)})}else e.connection=null;e.default_connection=e.connection,e.connect=r.connect},"namespace.js":function(e,t,n){n.export({DDP:function(){return o},LivedataTest:function(){return r}});var o={},r={}},"id_map.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var r=o(e("babel-runtime/helpers/classCallCheck")),i=o(e("babel-runtime/helpers/possibleConstructorReturn")),s=o(e("babel-runtime/helpers/inherits"));n.export({MongoIDMap:function(){return a}});var a=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,e.call(this,h.idStringify,h.idParse))}return(0,s.default)(t,e),t}(l)}}}}},{extensions:[".js",".json"]});D("./node_modules/meteor/ddp-client/sockjs-0.3.4.js"),D("./node_modules/meteor/ddp-client/stream_client_sockjs.js"),D("./node_modules/meteor/ddp-client/stream_client_common.js"),D("./node_modules/meteor/ddp-client/livedata_common.js"),D("./node_modules/meteor/ddp-client/random_stream.js"),D("./node_modules/meteor/ddp-client/livedata_connection.js"),D("./node_modules/meteor/ddp-client/client_convenience.js");var M=D("./node_modules/meteor/ddp-client/namespace.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["ddp-client"]=M,{DDP:O})}();

!function(){var a=Package["ddp-client"].DDP;"undefined"==typeof Package&&(Package={}),function(a,n){for(var e in n)e in a||(a[e]=n[e])}(Package.ddp={},{DDP:a})}();

"undefined"==typeof Package&&(Package={}),Package["ddp-server"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,r=Package.meteor.meteorEnv,n=Package.minimongo.LocalCollection,o=Package.minimongo.Minimongo,i=Package.check.check,a=Package.check.Match,c=Package.ejson.EJSON,l=Package["ddp-client"].DDP,s=Package.modules.meteorInstall,d=Package["babel-runtime"].meteorBabelHelpers,u=Package.promise.Promise,f=Package["ecmascript-runtime-client"].Symbol,h=Package["ecmascript-runtime-client"].Map,_=Package["ecmascript-runtime-client"].Set,v;s({node_modules:{meteor:{"allow-deny":{"allow-deny.js":function(){function t(e,t){return e.transform?e.transform(t):t}function r(e,t,r){var n=t;return e.transform&&(n=c.clone(t),null!==r&&(n._id=r),n=e.transform(n)),n}function o(e,t,r){var o=/^(?:insert|update|remove|fetch|transform)$/;if(Object.keys(r).forEach(function(e){if(!o.test(e))throw new Error(t+": Invalid key: "+e)}),e._restricted=!0,["insert","update","remove"].forEach(function(o){if(u.call(r,o)){if(!(r[o]instanceof Function))throw new Error(t+": Value for `"+o+"` must be a function");void 0===r.transform?r[o].transform=e._transform:r[o].transform=n.wrapTransform(r.transform),e._validators[o][t].push(r[o])}}),r.update||r.remove||r.fetch){if(r.fetch&&!(r.fetch instanceof Array))throw new Error(t+": Value for `fetch` must be an array");e._updateFetch(r.fetch)}}function s(t,r){if(!n._selectorIsIdPerhapsAsObject(t))throw new e.Error(403,"Not permitted. Untrusted code may only "+r+" documents by ID.")}function d(){var e=(l._CurrentMethodInvocation||l._CurrentInvocation).get();return e&&e.isSimulation}var u=Object.prototype.hasOwnProperty,f=(v={CollectionPrototype:{}}).CollectionPrototype;f.allow=function(e){o(this,"allow",e)},f.deny=function(e){o(this,"deny",e)},f._defineMutationMethods=function(t){var r=this;if(t=t||{},r._restricted=!1,r._insecure=void 0,r._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},r._name&&(r._prefix="/"+r._name+"/",r._connection&&(r._connection===e.server||e.isClient))){var n={};["insert","update","remove"].forEach(function(o){var c=r._prefix+o;if(t.useExisting){var l=e.isClient?"_methodHandlers":"method_handlers";if(r._connection[l]&&"function"==typeof r._connection[l][c])return}n[c]=function(){i(arguments,[a.Any]);var t=Array.from(arguments);try{var n=null;if("insert"!==o||u.call(t[0],"_id")||(n=r._makeNewID()),this.isSimulation)return null!==n&&(t[0]._id=n),r._collection[o].apply(r._collection,t);if("insert"!==o&&s(t[0],o),r._restricted){if(0===r._validators[o].allow.length)throw new e.Error(403,"Access denied. No allow validators set on restricted collection for method '"+o+"'.");var c="_validated"+o.charAt(0).toUpperCase()+o.slice(1);return t.unshift(this.userId),"insert"===o&&t.push(n),r[c].apply(r,t)}if(r._isInsecure())return null!==n&&(t[0]._id=n),r._collection[o].apply(r._collection,t);throw new e.Error(403,"Access denied")}catch(t){throw"MongoError"===t.name||"MinimongoError"===t.name?new e.Error(409,t.toString()):t}}}),r._connection.methods(n)}},f._updateFetch=function(e){var t=this;if(!t._validators.fetchAllFields)if(e){var r=Object.create(null),n=function(e){return e&&e.forEach(function(e){return r[e]=1})};n(t._validators.fetch),n(e),t._validators.fetch=Object.keys(r)}else t._validators.fetchAllFields=!0,t._validators.fetch=null},f._isInsecure=function(){var e=this;return void 0===e._insecure?!!Package.insecure:e._insecure},f._validatedInsert=function(t,n,o){var i=this;if(i._validators.insert.deny.some(function(e){return e(t,r(e,n,o))}))throw new e.Error(403,"Access denied");if(i._validators.insert.allow.every(function(e){return!e(t,r(e,n,o))}))throw new e.Error(403,"Access denied");null!==o&&(n._id=o),i._collection.insert.call(i._collection,n)},f._validatedUpdate=function(r,o,a,c){var l=this;if(i(a,Object),c=Object.assign(Object.create(null),c),!n._selectorIsIdPerhapsAsObject(o))throw new Error("validated update should be of a single ID");if(c.upsert)throw new e.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var s="Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.",d=Object.keys(a),f={};if(0===d.length)throw new e.Error(403,s);d.forEach(function(t){var r=a[t];if("$"!==t.charAt(0))throw new e.Error(403,s);if(!u.call(h,t))throw new e.Error(403,"Access denied. Operator "+t+" not allowed in a restricted collection.");Object.keys(r).forEach(function(e){-1!==e.indexOf(".")&&(e=e.substring(0,e.indexOf("."))),f[e]=!0})});var _=Object.keys(f),v={transform:null};l._validators.fetchAllFields||(v.fields={},l._validators.fetch.forEach(function(e){v.fields[e]=1}));var m=l._collection.findOne(o,v);if(!m)return 0;if(l._validators.update.deny.some(function(e){var n=t(e,m);return e(r,n,_,a)}))throw new e.Error(403,"Access denied");if(l._validators.update.allow.every(function(e){var n=t(e,m);return!e(r,n,_,a)}))throw new e.Error(403,"Access denied");return c._forbidReplace=!0,l._collection.update.call(l._collection,o,a,c)};var h={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};f._validatedRemove=function(r,n){var o=this,i={transform:null};o._validators.fetchAllFields||(i.fields={},o._validators.fetch.forEach(function(e){i.fields[e]=1}));var a=o._collection.findOne(n,i);if(!a)return 0;if(o._validators.remove.deny.some(function(e){return e(r,t(e,a))}))throw new e.Error(403,"Access denied");if(o._validators.remove.allow.every(function(e){return!e(r,t(e,a))}))throw new e.Error(403,"Access denied");return o._collection.remove.call(o._collection,n)},f._callMutatorMethod=function(){function t(t,r,n){!e.isClient||n||d()||(n=function(r){r&&e._debug(t+" failed: "+(r.reason||r.stack))}),("update"===t||"remove"===t)&&!d()&&s(r[0],t);var o=this._prefix+t;return this._connection.apply(o,r,{returnStubValue:!0},n)}return t}()}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/allow-deny/allow-deny.js"),"undefined"==typeof Package&&(Package={}),function(e,t){for(var r in t)r in e||(e[r]=t[r])}(Package["allow-deny"]={},{AllowDeny:v})}();

!function(){var e=Package.meteor.Meteor,o=Package.meteor.global,n=Package.meteor.meteorEnv,t=Package["allow-deny"].AllowDeny,r=Package.random.Random,i=Package.ejson.EJSON,c=Package.underscore._,l=Package.minimongo.LocalCollection,a=Package.minimongo.Minimongo,s=Package["ddp-client"].DDP,d=Package.tracker.Tracker,u=Package.tracker.Deps,f=Package["diff-sequence"].DiffSequence,_=Package["mongo-id"].MongoID,p=Package.check.check,m=Package.check.Match,g=Package.modules.meteorInstall,h=Package["babel-runtime"].meteorBabelHelpers,v=Package.promise.Promise,w=Package["ecmascript-runtime-client"].Symbol,C=Package["ecmascript-runtime-client"].Map,y=Package["ecmascript-runtime-client"].Set,b,k,I=g({node_modules:{meteor:{mongo:{"local_collection_driver.js":function(){b=function(){this.noConnCollections={}};var e=function(e,o){return e in o||(o[e]=new l(e)),o[e]};c.extend(b.prototype,{open:function(o,n){var t=this;return o?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),e(o,n._mongo_livedata_collections)):e(o,t.noConnCollections):new l}}),b=new b},"collection.js":function(o,n,i){function a(e,o){if(e)return o=o||c.identity,function(n,t){e(n,!n&&o(t))}}function d(e){if(e.length&&(void 0===e[e.length-1]||e[e.length-1]instanceof Function))return e.pop()}(k={}).Collection=function(o,n){var t=this;if(!(t instanceof k.Collection))throw new Error('use "new" to construct a Mongo.Collection');if(o||null===o||(e._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),o=null),null!==o&&"string"!=typeof o)throw new Error("First argument to new Mongo.Collection must be a string or null");switch(n&&n.methods&&(n={connection:n}),n&&n.manager&&!n.connection&&(n.connection=n.manager),(n=c.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},n)).idGeneration){case"MONGO":t._makeNewID=function(){var e=o?s.randomStream("/collection/"+o):r.insecure;return new k.ObjectID(e.hexString(24))};break;case"STRING":default:t._makeNewID=function(){return(o?s.randomStream("/collection/"+o):r.insecure).id()};break}if(t._transform=l.wrapTransform(n.transform),o&&null!==n.connection?n.connection?t._connection=n.connection:e.isClient?t._connection=e.connection:t._connection=e.server:t._connection=null,n._driver||(o&&t._connection===e.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?n._driver=MongoInternals.defaultRemoteCollectionDriver():n._driver=b),t._collection=n._driver.open(o,t._connection),t._name=o,t._driver=n._driver,t._connection&&t._connection.registerStore&&!t._connection.registerStore(o,{beginUpdate:function(e,o){(e>1||o)&&t._collection.pauseObservers(),o&&t._collection.remove({})},update:function(e){var o=_.idParse(e.id),n=t._collection.findOne(o);if("replace"!==e.msg)if("added"===e.msg){if(n)throw new Error("Expected not to find a document already present for an add");t._collection.insert(c.extend({_id:o},e.fields))}else if("removed"===e.msg){if(!n)throw new Error("Expected to find a document already present for removed");t._collection.remove(o)}else{if("changed"!==e.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!c.isEmpty(e.fields)){var r={};c.each(e.fields,function(e,o){void 0===e?(r.$unset||(r.$unset={}),r.$unset[o]=1):(r.$set||(r.$set={}),r.$set[o]=e)}),t._collection.update(o,r)}}else{var i=e.replace;i?n?t._collection.update(o,i):t._collection.insert(i):n&&t._collection.remove(o)}},endUpdate:function(){t._collection.resumeObservers()},saveOriginals:function(){t._collection.saveOriginals()},retrieveOriginals:function(){return t._collection.retrieveOriginals()},getDoc:function(e){return t.findOne(e)},_getCollection:function(){return t}})){var i='There is already a collection named "'+o+'"';if(!0!==n._suppressSameNameError)throw new Error(i);console.warn?console.warn(i):console.log(i)}if(!1!==n.defineMutationMethods)try{t._defineMutationMethods({useExisting:!0===n._suppressSameNameError})}catch(e){if(e.message==="A method named '/"+o+"/insert' is already defined")throw new Error('There is already a collection named "'+o+'"');throw e}Package.autopublish&&!n._preventAutopublish&&t._connection&&t._connection.publish&&t._connection.publish(null,function(){return t.find()},{is_auto:!0})},c.extend(k.Collection.prototype,{_getFindSelector:function(e){return 0==e.length?{}:e[0]},_getFindOptions:function(e){var o=this;return e.length<2?{transform:o._transform}:(p(e[1],m.Optional(m.ObjectIncluding({fields:m.Optional(m.OneOf(Object,void 0)),sort:m.Optional(m.OneOf(Object,Array,Function,void 0)),limit:m.Optional(m.OneOf(Number,void 0)),skip:m.Optional(m.OneOf(Number,void 0))}))),c.extend({transform:o._transform},e[1]))},find:function(){var e=this,o=c.toArray(arguments);return e._collection.find(e._getFindSelector(o),e._getFindOptions(o))},findOne:function(){var e=this,o=c.toArray(arguments);return e._collection.findOne(e._getFindSelector(o),e._getFindOptions(o))}}),k.Collection._publishCursor=function(e,o,n){var t=e.observeChanges({added:function(e,t){o.added(n,e,t)},changed:function(e,t){o.changed(n,e,t)},removed:function(e){o.removed(n,e)}});return o.onStop(function(){t.stop()}),t},k.Collection._rewriteSelector=function(e){var o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).fallbackId;if(l._selectorIsId(e)&&(e={_id:e}),c.isArray(e))throw new Error("Mongo selector can't be an array.");return!e||"_id"in e&&!e._id?{_id:o||r.id()}:e},k.Collection.prototype.insert=function(){function e(e,o){if(!e)throw new Error("insert requires an argument");if("_id"in(e=c.extend({},e))){if(!e._id||!("string"==typeof e._id||e._id instanceof k.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else{var n=!0;this._isRemoteCollection()&&(s._CurrentMethodInvocation.get()||(n=!1)),n&&(e._id=this._makeNewID())}var t=function(o){return e._id?e._id:(e._id=o,o)},r=a(o,t);if(this._isRemoteCollection())return t(this._callMutatorMethod("insert",[e],r));try{return t(this._collection.insert(e,r))}catch(e){if(o)return o(e),null;throw e}}return e}(),k.Collection.prototype.update=function(){function e(e,o){for(var n=arguments.length,t=Array(n>2?n-2:0),r=2;r<n;r++)t[r-2]=arguments[r];var i=d(t),l=c.clone(t[0])||{},s=void 0;if(l&&l.upsert)if(l.insertedId){if(!("string"==typeof l.insertedId||l.insertedId instanceof k.ObjectID))throw new Error("insertedId must be string or ObjectID");s=l.insertedId}else e&&e._id||(s=this._makeNewID(),l.generatedId=!0,l.insertedId=s);e=k.Collection._rewriteSelector(e,{fallbackId:s});var u=a(i);if(this._isRemoteCollection()){var f=[e,o,l];return this._callMutatorMethod("update",f,u)}try{return this._collection.update(e,o,l,u)}catch(e){if(i)return i(e),null;throw e}}return e}(),k.Collection.prototype.remove=function(){function e(e,o){e=k.Collection._rewriteSelector(e);var n=a(o);if(this._isRemoteCollection())return this._callMutatorMethod("remove",[e],n);try{return this._collection.remove(e,n)}catch(e){if(o)return o(e),null;throw e}}return e}(),k.Collection.prototype._isRemoteCollection=function(){function o(){return this._connection&&this._connection!==e.server}return o}(),k.Collection.prototype.upsert=function(){function e(e,o,n,t){t||"function"!=typeof n||(t=n,n={});var r=c.extend({},n,{_returnObject:!0,upsert:!0});return this.update(e,o,r,t)}return e}(),k.Collection.prototype._ensureIndex=function(e,o){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");n._collection._ensureIndex(e,o)},k.Collection.prototype._dropIndex=function(e){var o=this;if(!o._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");o._collection._dropIndex(e)},k.Collection.prototype._dropCollection=function(){var e=this;if(!e._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");e._collection.dropCollection()},k.Collection.prototype._createCappedCollection=function(e,o){var n=this;if(!n._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");n._collection._createCappedCollection(e,o)},k.Collection.prototype.rawCollection=function(){var e=this;if(!e._collection.rawCollection)throw new Error("Can only call rawCollection on server collections");return e._collection.rawCollection()},k.Collection.prototype.rawDatabase=function(){var e=this;if(!e._driver.mongo||!e._driver.mongo.db)throw new Error("Can only call rawDatabase on server collections");return e._driver.mongo.db},k.ObjectID=_.ObjectID,k.Cursor=l.Cursor,k.Collection.Cursor=k.Cursor,k.Collection.ObjectID=k.ObjectID,e.Collection=k.Collection,c.extend(e.Collection.prototype,t.CollectionPrototype)}}}}},{extensions:[".js",".json"]});I("./node_modules/meteor/mongo/local_collection_driver.js"),I("./node_modules/meteor/mongo/collection.js"),"undefined"==typeof Package&&(Package={}),function(e,o){for(var n in o)n in e||(e[n]=o[n])}(Package.mongo={},{Mongo:k})}();

"undefined"==typeof Package&&(Package={}),Package["blaze-html-templates"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.tracker.Tracker,r=Package.tracker.Deps,i;(function(){(i=function(e,t){if(!(this instanceof i))return new i(e,t);this.curValue=e,this.equalsFunc=t,this.dep=new a.Dependency})._isEqual=function(e,t){var n=e;return n===t&&(!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n)},i.prototype.get=function(){return a.active&&this.dep.depend(),this.curValue},i.prototype.set=function(e){var t=this.curValue;(this.equalsFunc||i._isEqual)(t,e)||(this.curValue=e,this.dep.changed())},i.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"},i.prototype._numListeners=function(){var e=0;for(var t in this.dep._dependentsById)e++;return e}}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["reactive-var"]={},{ReactiveVar:i})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r,i,o=(0,Package.modules.meteorInstall)({node_modules:{meteor:{jquery:{"main.js":function(e,t){var n=this;try{var r=e("jquery")}catch(t){r=e("./jquery.js")}t.$=t.jQuery=r,n.$=n.$||r,n.jQuery=n.jQuery||r},"jquery.js":function(e,t,n){!function(e,t){"object"==typeof n&&"object"==typeof n.exports?n.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(de.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return ie.inArray(e,t)>=0!==n})}function i(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function o(e){var t=be[e]={};return ie.each(e.match(ve)||[],function(e,n){t[n]=!0}),t}function a(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(he.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(a(),ie.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Ne,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ce.test(n)?ie.parseJSON(n):n)}catch(e){}ie.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!ie.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,r){if(ie.acceptData(e)){var i,o,a=ie.expando,s=e.nodeType,l=s?ie.cache:e,u=s?e[a]:e[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[a]=Q.pop()||ie.guid++:a),l[u]||(l[u]=s?{}:{toJSON:ie.noop}),"object"!=typeof t&&"function"!=typeof t||(r?l[u]=ie.extend(l[u],t):l[u].data=ie.extend(l[u].data,t)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[ie.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[ie.camelCase(t)]):i=o,i}}function f(e,t,n){if(ie.acceptData(e)){var r,i,o=e.nodeType,a=o?ie.cache:e,s=o?e[ie.expando]:ie.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){i=(t=ie.isArray(t)?t.concat(ie.map(t,ie.camelCase)):t in r?[t]:(t=ie.camelCase(t))in r?[t]:t.split(" ")).length;for(;i--;)delete r[t[i]];if(n?!u(r):!ie.isEmptyObject(r))return}(n||(delete a[s].data,u(a[s])))&&(o?ie.cleanData([e],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function p(){return!1}function h(){try{return he.activeElement}catch(e){}}function m(e){var t=Me.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==we?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==we?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ie.nodeName(r,t)?o.push(r):ie.merge(o,g(r,t));return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],o):o}function y(e){Ae.test(e.type)&&(e.defaultChecked=e.checked)}function v(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ie.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)ie._data(n,"globalEval",!t||ie._data(t[r],"globalEval"))}function T(e,t){if(1===t.nodeType&&ie.hasData(e)){var n,r,i,o=ie._data(e),a=ie._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;r<i;r++)ie.event.add(t,n,s[n][r])}a.data&&(a.data=ie.extend({},a.data))}}function C(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[ie.expando]){i=ie._data(t);for(r in i.events)ie.removeEvent(t,r,i.handle);t.removeAttribute(ie.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!ie.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ae.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}}function N(t,n){var r,i=ie(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:ie.css(i[0],"display");return i.detach(),o}function E(e){var t=he,n=Ge[e];return n||("none"!==(n=N(e,t))&&n||((t=((Ye=(Ye||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentWindow||Ye[0].contentDocument).document).write(),t.close(),n=N(e,t),Ye.detach()),Ge[e]=n),n}function k(e,t){return{get:function(){var n=e();if(null!=n){if(!n)return(this.get=t).apply(this,arguments);delete this.get}}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ct.length;i--;)if((t=ct[i]+n)in e)return t;return r}function j(e,t){for(var n,r,i,o=[],a=0,s=e.length;a<s;a++)(r=e[a]).style&&(o[a]=ie._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Se(r)&&(o[a]=ie._data(r,"olddisplay",E(r.nodeName)))):(i=Se(r),(n&&"none"!==n||!i)&&ie._data(r,"olddisplay",i?n:ie.css(r,"display"))));for(a=0;a<s;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function A(e,t,n){var r=at.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function D(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;o<4;o+=2)"margin"===n&&(a+=ie.css(e,n+ke[o],!0,i)),r?("content"===n&&(a-=ie.css(e,"padding"+ke[o],!0,i)),"margin"!==n&&(a-=ie.css(e,"border"+ke[o]+"Width",!0,i))):(a+=ie.css(e,"padding"+ke[o],!0,i),"padding"!==n&&(a+=ie.css(e,"border"+ke[o]+"Width",!0,i)));return a}function L(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=et(e),a=ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=tt(e,t,o))<0||null==i)&&(i=e.style[t]),Ze.test(i))return i;r=a&&(ne.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+D(e,t,n||(a?"border":"content"),r,o)+"px"}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function q(){return setTimeout(function(){ft=void 0}),ft=ie.now()}function _(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ke[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function M(e,t,n){for(var r,i=(yt[t]||[]).concat(yt["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o,a,s,l,u,c,f=this,d={},p=e.style,h=e.nodeType&&Se(e),m=ie._data(e,"fxshow");n.queue||(null==(s=ie._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===(c="none"===(u=ie.css(e,"display"))?ie._data(e,"olddisplay")||E(e.nodeName):u)&&"none"===ie.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==E(e.nodeName)?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],pt.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(h?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;h=!0}d[r]=m&&m[r]||ie.style(e,r)}else u=void 0;if(ie.isEmptyObject(d))"inline"===("none"===u?E(e.nodeName):u)&&(p.display=u);else{m?"hidden"in m&&(h=m.hidden):m=ie._data(e,"fxshow",{}),o&&(m.hidden=!h),h?ie(e).show():f.done(function(){ie(e).hide()}),f.done(function(){var t;ie._removeData(e,"fxshow");for(t in d)ie.style(e,t,d[t])});for(r in d)a=M(h?m[r]:0,r,f),r in m||(m[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,i,o,a;for(n in e)if(r=ie.camelCase(n),i=t[r],o=e[n],ie.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ie.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function P(e,t,n){var r,i,o=0,a=gt.length,s=ie.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=ft||q(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),r<1&&a?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ft||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);o<a;o++)if(r=gt[o].call(u,e,c,u.opts))return r;return ie.map(c,M,u),ie.isFunction(u.opts.start)&&u.opts.start.call(e,u),ie.fx.timer(ie.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function B(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(ve)||[];if(ie.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function i(s){var l;return o[s]=!0,ie.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===Wt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function W(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ie.extend(!0,e,n),e}function $(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),n[o]}function z(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function I(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||It.test(e)?r(e,i):I(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)I(e+"["+i+"]",t[i],n,r)}function X(){try{return new e.XMLHttpRequest}catch(e){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(e){return ie.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var Q=[],J=Q.slice,Y=Q.concat,G=Q.push,K=Q.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},re="1.11.2",ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:re,constructor:ie,selector:"",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ie.each(this,e,t)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:G,sort:Q.sort,splice:Q.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ie.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],a!==(n=i[r])&&(u&&n&&(ie.isPlainObject(n)||(t=ie.isArray(n)))?(t?(t=!1,o=e&&ie.isArray(e)?e:[]):o=e&&ie.isPlainObject(e)?e:{},a[r]=ie.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},ie.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray||function(e){return"array"===ie.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ie.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ie.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,o=0,a=e.length,s=n(e);if(r){if(s)for(;o<a&&!1!==(i=t.apply(e[o],r));o++);else for(o in e)if(!1===(i=t.apply(e[o],r)))break}else if(s)for(;o<a&&!1!==(i=t.call(e[o],o,e[o]));o++);else for(o in e)if(!1===(i=t.call(e[o],o,e[o])))break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):G.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)(r=!t(e[o],o))!==s&&i.push(e[o]);return i},map:function(e,t,r){var i,o=0,a=e.length,s=[];if(n(e))for(;o<a;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return Y.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(i=e[t],t=e,e=i),ie.isFunction(e))return n=J.call(arguments,2),r=function(){return e.apply(t||this,n.concat(J.call(arguments)))},r.guid=e.guid=e.guid||ie.guid++,r},now:function(){return+new Date},support:ne}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,r){var i,o,a,s,l,u,f,p,h,m;if((t?t.ownerDocument||t:R)!==H&&L(t),t=t||H,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&_){if(11!==s&&(i=ve.exec(e)))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&P(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(p=f=B,h=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=E(e),(f=t.getAttribute("id"))?p=f.replace(xe,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);h=be.test(e)&&c(t.parentNode)||t,m=u.join(",")}if(m)try{return K.apply(n,h.querySelectorAll(m)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return S(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[B]=!0,e}function i(e){var t=H.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&void 0!==e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[W,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[B]||(t[B]={}),(s=l[r])&&s[0]===W&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;i<o;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function y(e,t,n,i,o,a){return i&&!i[B]&&(i=y(i)),o&&!o[B]&&(o=y(o,a)),r(function(r,a,s,l){var u,c,f,d=[],p=[],h=a.length,y=r||m(t||"*",s.nodeType?[s]:s,[]),v=!e||!r&&t?y:g(y,d,e,s,l),b=n?o||(r?e:h||i)?[]:a:v;if(n&&n(v,b,s,l),i)for(u=g(b,p),i(u,[],s,l),c=u.length;c--;)(f=u[c])&&(b[p[c]]=!(v[p[c]]=f));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(f=b[c])&&u.push(v[c]=f);o(null,b=[],u,l)}for(c=b.length;c--;)(f=b[c])&&(u=o?ee(r,f):d[c])>-1&&(r[u]=!(a[u]=f))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):K.apply(a,b)})}function v(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==j)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];s<i;s++)if(n=T.relative[e[s].type])c=[p(h(c),n)];else{if((n=T.filter[e[s].type].apply(null,e[s].matches))[B]){for(r=++s;r<i&&!T.relative[e[r].type];r++);return y(s>1&&h(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,s<r&&v(e.slice(s,r)),r<i&&v(e=e.slice(r)),r<i&&d(e))}c.push(n)}return h(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,f,d,p=0,h="0",m=r&&[],y=[],v=j,b=r||o&&T.find.TAG("*",u),x=W+=null==v?1:Math.random()||.1,w=b.length;for(u&&(j=a!==H&&a);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(f=0;d=e[f++];)if(d(c,a,s)){l.push(c);break}u&&(W=x)}i&&((c=!d&&c)&&p--,r&&m.push(c))}if(p+=h,i&&h!==p){for(f=0;d=n[f++];)d(m,y,a,s);if(r){if(p>0)for(;h--;)m[h]||y[h]||(y[h]=Y.call(l));y=g(y)}K.apply(l,y),u&&!r&&y.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(W=x,j=v),m};return i?r(a):a}var x,w,T,C,N,E,k,S,j,A,D,L,H,q,_,M,F,O,P,B="sizzle"+1*new Date,R=e.document,W=0,$=0,z=n(),I=n(),X=n(),U=function(e,t){return e===t&&(D=!0),0},V=1<<31,Q={}.hasOwnProperty,J=[],Y=J.pop,G=J.push,K=J.push,Z=J.slice,ee=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{K.apply(J=Z.call(R.childNodes),R.childNodes),J[R.childNodes.length].nodeType}catch(e){K={apply:J.length?function(e,t){G.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:R;return r!==H&&9===r.nodeType&&r.documentElement?(H=r,q=r.documentElement,(n=r.defaultView)&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),_=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ye.test(r.getElementsByClassName),w.getById=i(function(e){return q.appendChild(e).id=B,!r.getElementsByName||!r.getElementsByName(B).length}),w.getById?(T.find.ID=function(e,t){if(void 0!==t.getElementById&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){if(_)return t.getElementsByClassName(e)},F=[],M=[],(w.qsa=ye.test(r.querySelectorAll))&&(i(function(e){q.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||M.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=ye.test(O=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&i(function(e){w.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),F.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),t=ye.test(q.compareDocumentPosition),P=t||ye.test(q.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return D=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===R&&P(R,e)?-1:t===r||t.ownerDocument===R&&P(R,t)?1:A?ee(A,e)-ee(A,t):0:4&n?-1:1)}:function(e,t){if(e===t)return D=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:A?ee(A,e)-ee(A,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===R?-1:u[i]===R?1:0},r):H},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==H&&L(e),n=n.replace(fe,"='$1']"),w.matchesSelector&&_&&(!F||!F.test(n))&&(!M||!M.test(n)))try{var r=O.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&Q.call(T.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==r?r:w.attributes||!_?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(D=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(U),D){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return A=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},(T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!l&&!s;if(g){if(o){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&v){for(p=(u=(c=g[B]||(g[B]={}))[e]||[])[0]===W&&u[1],d=u[0]===W&&u[2],f=p&&g.childNodes[p];f=++p&&f&&f[m]||(d=p=0)||h.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[W,p,d];break}}else if(v&&(u=(t[B]||(t[B]={}))[e])&&u[0]===W)d=u[1];else for(;(f=++p&&f&&f[m]||(d=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++d||(v&&((f[B]||(f[B]={}))[e]=[W,d]),f!==t)););return(d-=i)===r||d%r==0&&d/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)e[r=ee(e,i[a])]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(le,"$1"));return i[B]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do{if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[n<0?n+t:n]}),even:u(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=n<0?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=l(x);return f.prototype=T.filters=T.pseudos,T.setFilters=new f,E=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=I[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=T.preFilter;s;){r&&!(i=ue.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(a in T.filter)!(i=he[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):I(e,l).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)(o=v(t[n]))[B]?r.push(o):i.push(o);(o=X(e,b(i,r))).selector=e}return o},S=t.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,f=!r&&E(e=u.selector||e);if(n=n||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&_&&T.relative[o[1].type]){if(!(t=(T.find.ID(a.matches[0].replace(we,Te),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],!T.relative[s=a.type]);)if((l=T.find[s])&&(r=l(a.matches[0].replace(we,Te),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&d(o)))return K.apply(n,r),n;break}}return(u||k(e,f))(r,t,!_,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=B.split("").sort(U).join("")===B,w.detectDuplicates=!!D,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=ue,ie.expr=ue.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=ue.uniqueSort,ie.text=ue.getText,ie.isXMLDoc=ue.isXML,ie.contains=ue.contains;var ce=ie.expr.match.needsContext,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,de=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;t<i;t++)if(ie.contains(r[t],this))return!0}));for(t=0;t<i;t++)ie.find(e,r[t],n);return n=this.pushStack(i>1?ie.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ce.test(e)?ie(e):e||[],!1).length}});var pe,he=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ie.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e))||!n[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),fe.test(n[1])&&ie.isPlainObject(t))for(n in t)ie.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=he.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return pe.find(e);this.length=1,this[0]=r}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?void 0!==pe.ready?pe.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))}).prototype=ie.fn,pe=ie(he);var ge=/^(?:parents|prev(?:Until|All))/,ye={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ie(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ie.fn.extend({has:function(e){var t,n=ie(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ie.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ce.test(e)||"string"!=typeof e?ie(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ie.unique(o):o)},index:function(e){return e?"string"==typeof e?ie.inArray(this[0],ie(e)):ie.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.unique(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ie.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ie.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ie.dir(e,"nextSibling")},prevAll:function(e){return ie.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ie.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ie.dir(e,"previousSibling",n)},siblings:function(e){return ie.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ie.sibling(e.firstChild)},contents:function(e){return ie.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ye[e]||(i=ie.unique(i)),ge.test(e)&&(i=i.reverse())),this.pushStack(i)}});var ve=/\S+/g,be={};ie.Callbacks=function(e){var t,n,r,i,a,s,l=[],u=!(e="string"==typeof e?be[e]||o(e):ie.extend({},e)).once&&[],c=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=l.length,t=!0;l&&a<i;a++)if(!1===l[a].apply(o[0],o[1])&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:f.disable())},f={add:function(){if(l){var r=l.length;!function t(n){ie.each(n,function(n,r){var i=ie.type(r);"function"===i?e.unique&&f.has(r)||l.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?i=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&ie.each(arguments,function(e,n){for(var r;(r=ie.inArray(n,l,r))>-1;)l.splice(r,1),t&&(r<=i&&i--,r<=a&&a--)}),this},has:function(e){return e?ie.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||f.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||r&&!u||(n=[e,(n=n||[]).slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,o){var a=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=J.call(arguments),r=n.length,i=1!==r||e&&ie.isFunction(e.promise)?r:0,o=1===i?e:ie.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?J.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}},s,l,u;if(r>1)for(s=new Array(r),l=new Array(r),u=new Array(r);t<r;t++)n[t]&&ie.isFunction(n[t].promise)?n[t].promise().done(a(t,u,n)).fail(o.reject).progress(a(t,l,s)):--i;return i||o.resolveWith(u,n),o.promise()}});var xe;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){if(!0===e?!--ie.readyWait:!ie.isReady){if(!he.body)return setTimeout(ie.ready);ie.isReady=!0,!0!==e&&--ie.readyWait>0||(xe.resolveWith(he,[ie]),ie.fn.triggerHandler&&(ie(he).triggerHandler("ready"),ie(he).off("ready")))}}}),ie.ready.promise=function(t){if(!xe)if(xe=ie.Deferred(),"complete"===he.readyState)setTimeout(ie.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{he.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!ie.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}a(),ie.ready()}}()}return xe.promise(t)};var we="undefined",Te;for(Te in ie(ne))break;ne.ownLast="0"!==Te,ne.inlineBlockNeedsLayout=!1,ie(function(){var e,t,n,r;(n=he.getElementsByTagName("body")[0])&&n.style&&(t=he.createElement("div"),(r=he.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==we&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(e){ne.deleteExpando=!1}}e=null}(),ie.acceptData=function(e){var t=ie.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ie.cache[e[ie.expando]]:e[ie.expando])&&!u(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return f(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return f(e,t,!0)}}),ie.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ie.data(o),1===o.nodeType&&!ie._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&l(o,r=ie.camelCase(r.slice(5)),i[r]);ie._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ie.data(this,e)}):arguments.length>1?this.each(function(){ie.data(this,e,t)}):o?l(o,e,ie.data(o,e)):void 0},removeData:function(e){return this.each(function(){ie.removeData(this,e)})}}),ie.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ie._data(e,t),n&&(!r||ie.isArray(n)?r=ie._data(e,t,ie.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),o=ie._queueHooks(e,t),a=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie._data(e,n)||ie._data(e,n,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(e,t+"queue"),ie._removeData(e,n)})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=ie._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},je=ie.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===ie.type(n)){i=!0;for(s in n)ie.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ie(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},Ae=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}}(),function(){var t,n,r=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),ne[t+"Bubbles"]=!1===r.attributes[n].expando);r=null}();var De=/^(?:input|select|textarea)$/i,Le=/^key/,He=/^(?:mouse|pointer|contextmenu)|click/,qe=/^(?:focusinfocus|focusoutblur)$/,_e=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,p,h,m,g=ie._data(e);if(g){for(n.handler&&(n=(l=n).handler,i=l.selector),n.guid||(n.guid=ie.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||((c=g.handle=function(e){return typeof ie===we||e&&ie.event.triggered===e.type?void 0:ie.event.dispatch.apply(c.elem,arguments)}).elem=e),s=(t=(t||"").match(ve)||[""]).length;s--;)p=m=(o=_e.exec(t[s])||[])[1],h=(o[2]||"").split(".").sort(),p&&(u=ie.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=ie.event.special[p]||{},f=ie.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:h.join(".")},l),(d=a[p])||((d=a[p]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(e,r,h,c)||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,f),f.handler.guid||(f.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,f):d.push(f),ie.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,f,d,p,h,m,g=ie.hasData(e)&&ie._data(e);if(g&&(c=g.events)){for(u=(t=(t||"").match(ve)||[""]).length;u--;)if(s=_e.exec(t[u])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(f=ie.event.special[p]||{},d=c[p=(r?f.delegateType:f.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,f.remove&&f.remove.call(e,a));l&&!d.length&&(f.teardown&&!1!==f.teardown.call(e,h,g.handle)||ie.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ie.event.remove(e,p+t[u],n,r,!0);ie.isEmptyObject(c)&&(delete g.handle,ie._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,u,c,f,d=[r||he],p=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=c=r=r||he,3!==r.nodeType&&8!==r.nodeType&&!qe.test(p+ie.event.triggered)&&(p.indexOf(".")>=0&&(p=(h=p.split(".")).shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[ie.expando]?t:new ie.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),u=ie.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(r,n))){if(!i&&!u.noBubble&&!ie.isWindow(r)){for(l=u.delegateType||p,qe.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),c=s;c===(r.ownerDocument||he)&&d.push(c.defaultView||c.parentWindow||e)}for(f=0;(s=d[f++])&&!t.isPropagationStopped();)t.type=f>1?l:u.bindType||p,(o=(ie._data(s,"events")||{})[t.type]&&ie._data(s,"handle"))&&o.apply(s,n),(o=a&&s[a])&&o.apply&&ie.acceptData(s)&&(t.result=o.apply(s,n),!1===t.result&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(d.pop(),n))&&ie.acceptData(r)&&a&&r[p]&&!ie.isWindow(r)){(c=r[a])&&(r[a]=null),ie.event.triggered=p;try{r[p]()}catch(e){}ie.event.triggered=void 0,c&&(r[a]=c)}return t.result}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,o,a=[],s=J.call(arguments),l=(ie._data(this,"events")||{})[e.type]||[],u=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=ie.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,void 0!==(n=((ie.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],o=0;o<s;o++)void 0===i[n=(r=t[o]).selector+" "]&&(i[n]=r.needsContext?ie(n,this).index(l)>=0:ie.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=He.test(i)?this.mouseHooks:Le.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ie.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=o.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(i=(r=e.target.ownerDocument||he).documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===h()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ie.extend(new ie.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ie.event.trigger(i,null,t):ie.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ie.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===we&&(e[r]=null),e.detachEvent(r,n))},ie.Event=function(e,t){if(!(this instanceof ie.Event))return new ie.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?d:p):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),this[ie.expando]=!0},ie.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=d,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=d,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=d,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||ie.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(ie.event.special.submit={setup:function(){if(ie.nodeName(this,"form"))return!1;ie.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ie.nodeName(t,"input")||ie.nodeName(t,"button")?t.form:void 0;n&&!ie._data(n,"submitBubbles")&&(ie.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ie._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ie.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ie.nodeName(this,"form"))return!1;ie.event.remove(this,"._submit")}}),ne.changeBubbles||(ie.event.special.change={setup:function(){if(De.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ie.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,e,!0)})),!1;ie.event.add(this,"beforeactivate._change",function(e){var t=e.target;De.test(t.nodeName)&&!ie._data(t,"changeBubbles")&&(ie.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ie.event.simulate("change",this.parentNode,e,!0)}),ie._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ie.event.remove(this,"._change"),!De.test(this.nodeName)}}),ne.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e),!0)};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ie._data(r,t);i||r.addEventListener(e,n,!0),ie._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ie._data(r,t)-1;i?ie._data(r,t,i):(r.removeEventListener(e,n,!0),ie._removeData(r,t))}}}),ie.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=p;else if(!r)return this;return 1===i&&(a=r,(r=function(e){return ie().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=ie.guid++)),this.each(function(){ie.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=p),this.each(function(){ie.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return ie.event.trigger(e,t,n,!0)}});var Me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,Oe=new RegExp("<(?:"+Me+")[\\s/>]","i"),Pe=/^\s+/,Be=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Re=/<([\w:]+)/,We=/<tbody/i,$e=/<|&#?\w+;/,ze=/<(?:script|style|link)/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^$|\/(?:java|ecma)script/i,Ue=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Qe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=m(he).appendChild(he.createElement("div"));Qe.optgroup=Qe.option,Qe.tbody=Qe.tfoot=Qe.colgroup=Qe.caption=Qe.thead,Qe.th=Qe.td,ie.extend({clone:function(e,t,n){var r,i,o,a,s,l=ie.contains(e.ownerDocument,e);if(ne.html5Clone||ie.isXMLDoc(e)||!Oe.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Je.innerHTML=e.outerHTML,Je.removeChild(o=Je.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&C(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)T(i,r[a]);else T(e,o);return(r=g(o,"script")).length>0&&w(r,!l&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,f=e.length,d=m(t),p=[],h=0;h<f;h++)if((o=e[h])||0===o)if("object"===ie.type(o))ie.merge(p,o.nodeType?[o]:o);else if($e.test(o)){for(s=s||d.appendChild(t.createElement("div")),l=(Re.exec(o)||["",""])[1].toLowerCase(),c=Qe[l]||Qe._default,s.innerHTML=c[1]+o.replace(Be,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ne.leadingWhitespace&&Pe.test(o)&&p.push(t.createTextNode(Pe.exec(o)[0])),!ne.tbody)for(i=(o="table"!==l||We.test(o)?"<table>"!==c[1]||We.test(o)?0:s:s.firstChild)&&o.childNodes.length;i--;)ie.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(ie.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(t.createTextNode(o));for(s&&d.removeChild(s),ne.appendChecked||ie.grep(g(p,"input"),y),h=0;o=p[h++];)if((!r||-1===ie.inArray(o,r))&&(a=ie.contains(o.ownerDocument,o),s=g(d.appendChild(o),"script"),a&&w(s),n))for(i=0;o=s[i++];)Xe.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ie.expando,l=ie.cache,u=ne.deleteExpando,c=ie.event.special;null!=(n=e[a]);a++)if((t||ie.acceptData(n))&&(i=n[s],o=i&&l[i])){if(o.events)for(r in o.events)c[r]?ie.event.remove(n,r):ie.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u?delete n[s]:typeof n.removeAttribute!==we?n.removeAttribute(s):n[s]=null,Q.push(i))}}}),ie.fn.extend({text:function(e){return je(this,function(e){return void 0===e?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||v(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=v(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ie.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ie.cleanData(g(n)),n.parentNode&&(t&&ie.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ie.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ie.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return je(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Fe,""):void 0;if("string"==typeof e&&!ze.test(e)&&(ne.htmlSerialize||!Oe.test(e))&&(ne.leadingWhitespace||!Pe.test(e))&&!Qe[(Re.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Be,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ie.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ie.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=Y.apply([],e);var n,r,i,o,a,s,l=0,u=this.length,c=this,f=u-1,d=e[0],p=ie.isFunction(d);if(p||u>1&&"string"==typeof d&&!ne.checkClone&&Ie.test(d))return this.each(function(n){var r=c.eq(n);p&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(u&&(s=ie.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(i=(o=ie.map(g(s,"script"),b)).length;l<u;l++)r=s,l!==f&&(r=ie.clone(r,!0,!0),i&&ie.merge(o,g(r,"script"))),t.call(this[l],r,l);if(i)for(a=o[o.length-1].ownerDocument,ie.map(o,x),l=0;l<i;l++)r=o[l],Xe.test(r.type||"")&&!ie._data(r,"globalEval")&&ie.contains(a,r)&&(r.src?ie._evalUrl&&ie._evalUrl(r.src):ie.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ve,"")));s=n=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=0,i=[],o=ie(e),a=o.length-1;r<=a;r++)n=r===a?this:this.clone(!0),ie(o[r])[t](n),G.apply(i,n.get());return this.pushStack(i)}});var Ye,Ge={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return(n=he.getElementsByTagName("body")[0])&&n.style?(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==we&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Ke=/^margin/,Ze=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),et,tt,nt=/^(top|right|bottom|left)$/;e.getComputedStyle?(et=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},tt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||et(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||ie.contains(e.ownerDocument,e)||(a=ie.style(e,t)),Ze.test(a)&&Ke.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):he.documentElement.currentStyle&&(et=function(e){return e.currentStyle},tt=function(e,t,n){var r,i,o,a,s=e.style;return n=n||et(e),null==(a=n?n[t]:void 0)&&s&&s[t]&&(a=s[t]),Ze.test(a)&&!nt.test(t)&&(r=s.left,(o=(i=e.runtimeStyle)&&i.left)&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),function(){function t(){var t,n,r,i;(n=he.getElementsByTagName("body")[0])&&n.style&&(t=he.createElement("div"),(r=he.createElement("div")).style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,(i=t.appendChild(he.createElement("div"))).style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(i)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(i=t.getElementsByTagName("td"))[0].style.cssText="margin:0;border:0;padding:0;display:none",(s=0===i[0].offsetHeight)&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,o,a,s,l;(n=he.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",(r=(i=n.getElementsByTagName("a")[0])&&i.style)&&(r.cssText="float:left;opacity:.5",ne.opacity="0.5"===r.opacity,ne.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,ie.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ie.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var rt=/alpha\([^)]*\)/i,it=/opacity\s*=\s*([^)]*)/,ot=/^(none|table(?!-c[ea]).+)/,at=new RegExp("^("+Ee+")(.*)$","i"),st=new RegExp("^([+-])=("+Ee+")","i"),lt={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:"0",fontWeight:"400"},ct=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ie.camelCase(t),l=e.style;if(t=ie.cssProps[s]||(ie.cssProps[s]=S(l,s)),a=ie.cssHooks[t]||ie.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if("string"==(o=typeof n)&&(i=st.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ie.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||ie.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=S(e.style,s)),(a=ie.cssHooks[t]||ie.cssHooks[s])&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=tt(e,t,r)),"normal"===o&&t in ut&&(o=ut[t]),""===n||n?(i=parseFloat(o),!0===n||ie.isNumeric(i)?i||0:o):o}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){if(n)return ot.test(ie.css(e,"display"))&&0===e.offsetWidth?ie.swap(e,lt,function(){return L(e,t,r)}):L(e,t,r)},set:function(e,n,r){var i=r&&et(e);return A(e,n,r?D(e,t,r,ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,i),i):0)}}}),ne.opacity||(ie.cssHooks.opacity={get:function(e,t){return it.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ie.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ie.trim(o.replace(rt,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=rt.test(o)?o.replace(rt,i):o+" "+i)}}),ie.cssHooks.marginRight=k(ne.reliableMarginRight,function(e,t){if(t)return ie.swap(e,{display:"inline-block"},tt,[e,"marginRight"])}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ke[r]+t]=o[r]||o[r-2]||o[0];return i}},Ke.test(e)||(ie.cssHooks[e+t].set=A)}),ie.fn.extend({css:function(e,t){return je(this,function(e,t,n){var r,i,o={},a=0;if(ie.isArray(t)){for(r=et(e),i=t.length;a<i;a++)o[t[a]]=ie.css(e,t[a],!1,r);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return j(this,!0)},hide:function(){return j(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Se(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ie.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.options.duration?this.pos=t=ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ie.css(e.elem,e.prop,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ie.cssProps[e.prop]]||ie.cssHooks[e.prop])?ie.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ie.fx=H.prototype.init,ie.fx.step={};var ft,dt,pt=/^(?:toggle|show|hide)$/,ht=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),mt=/queueHooks$/,gt=[F],yt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=ht.exec(t),o=i&&i[3]||(ie.cssNumber[e]?"":"px"),a=(ie.cssNumber[e]||"px"!==o&&+r)&&ht.exec(ie.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{a/=s=s||".5",ie.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ie.Animation=ie.extend(P,{tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;r<i;r++)n=e[r],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?gt.unshift(e):gt.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),o=ie.speed(t,n,r),a=function(){var t=P(this,ie.extend({},e),o);(i||ie._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,a=ie._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&mt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||ie.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ie._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ie.timers,a=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_(t,!0),e,r,i)}}),ie.each({slideDown:_("show"),slideUp:_("hide"),slideToggle:_("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=ie.timers,n=0;for(ft=ie.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ie.fx.stop(),ft=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){dt||(dt=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(dt),dt=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,t){return e=ie.fx?ie.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;(t=he.createElement("div")).setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],i=(n=he.createElement("select")).appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(r.getAttribute("style")),ne.hrefNormalized="/a"===r.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=i.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!i.disabled,(e=he.createElement("input")).setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var vt=/\r/g;ie.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,ie(this).val()):e)?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))});if(i)return(t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(vt,""):null==n?"":n}}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(ne.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ie.makeArray(t),a=i.length;a--;)if(r=i[a],ie.inArray(ie.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){if(ie.isArray(t))return e.checked=ie.inArray(ie(e).val(),t)>=0}},ne.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var bt,xt,wt=ie.expr.attrHandle,Tt=/^(?:checked|selected)$/i,Ct=ne.getSetAttribute,Nt=ne.input;ie.fn.extend({attr:function(e,t){return je(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===we?ie.prop(e,t,n):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),r=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?xt:bt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=ie.find.attr(e,t))?void 0:i:null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void ie.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(ve);if(o&&1===e.nodeType)for(;n=o[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)?Nt&&Ct||!Tt.test(n)?e[r]=!1:e[ie.camelCase("default-"+n)]=e[r]=!1:ie.attr(e,n,""),e.removeAttribute(Ct?n:r)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),xt={set:function(e,t,n){return!1===t?ie.removeAttr(e,n):Nt&&Ct||!Tt.test(n)?e.setAttribute(!Ct&&ie.propFix[n]||n,n):e[ie.camelCase("default-"+n)]=e[n]=!0,n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=wt[t]||ie.find.attr;wt[t]=Nt&&Ct||!Tt.test(t)?function(e,t,r){var i,o;return r||(o=wt[t],wt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,wt[t]=o),i}:function(e,t,n){if(!n)return e[ie.camelCase("default-"+t)]?t.toLowerCase():null}}),Nt&&Ct||(ie.attrHooks.value={set:function(e,t,n){if(!ie.nodeName(e,"input"))return bt&&bt.set(e,t,n);e.defaultValue=t}}),Ct||(bt={set:function(e,t,n){var r=e.getAttributeNode(n);if(r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n))return t}},wt.id=wt.name=wt.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ie.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:bt.set},ie.attrHooks.contenteditable={set:function(e,t,n){bt.set(e,""!==t&&t,n)}},ie.each(["width","height"],function(e,t){ie.attrHooks[t]={set:function(e,n){if(""===n)return e.setAttribute(t,"auto"),n}}})),ne.style||(ie.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var Et=/^(?:input|select|textarea|button|object)$/i,kt=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return je(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ie.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ie.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return(o=1!==a||!ie.isXMLDoc(e))&&(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):Et.test(e.nodeName)||kt.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||ie.each(["href","src"],function(e,t){ie.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ne.enctype||(ie.propFix.enctype="encoding");var St=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u="string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ve)||[];s<l;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(St," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=ie.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ve)||[];s<l;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(St," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?ie.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):ie.isFunction(e)?this.each(function(n){ie(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if("string"===n)for(var t,r=0,i=ie(this),o=e.match(ve)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else n!==we&&"boolean"!==n||(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ie._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(St," ").indexOf(t)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var jt=ie.now(),At=/\?/,Dt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=ie.trim(t+"");return i&&!ie.trim(i.replace(Dt,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+t)},ie.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):((n=new ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var Lt,Ht,qt=/#.*$/,_t=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ft=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ot=/^(?:GET|HEAD)$/,Pt=/^\/\//,Bt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Rt={},Wt={},$t="*/".concat("*");try{Ht=location.href}catch(e){(Ht=he.createElement("a")).href="",Ht=Ht.href}Lt=Bt.exec(Ht.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ht,type:"GET",isLocal:Ft.test(Lt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ie.ajaxSettings),t):W(ie.ajaxSettings,e)},ajaxPrefilter:B(Rt),ajaxTransport:B(Wt),ajax:function(e,t){function n(e,t,n,r){var i,c,y,v,x,T=t;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,a=r||"",w.readyState=e>0?4:0,i=e>=200&&e<300||304===e,n&&(v=$(f,w,n)),v=z(f,v,w,i),i?(f.ifModified&&((x=w.getResponseHeader("Last-Modified"))&&(ie.lastModified[o]=x),(x=w.getResponseHeader("etag"))&&(ie.etag[o]=x)),204===e||"HEAD"===f.type?T="nocontent":304===e?T="notmodified":(T=v.state,c=v.data,i=!(y=v.error))):(y=T,!e&&T||(T="error",e<0&&(e=0))),w.status=e,w.statusText=(t||T)+"",i?h.resolveWith(d,[c,T,w]):h.rejectWith(d,[w,T,y]),w.statusCode(g),g=void 0,l&&p.trigger(i?"ajaxSuccess":"ajaxError",[w,f,i?c:y]),m.fireWith(d,[w,T]),l&&(p.trigger("ajaxComplete",[w,f]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,u,c,f=ie.ajaxSetup({},t),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?ie(d):ie.event,h=ie.Deferred(),m=ie.Callbacks("once memory"),g=f.statusCode||{},y={},v={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Mt.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return b||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return u&&u.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||Ht)+"").replace(qt,"").replace(Pt,Lt[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=ie.trim(f.dataType||"*").toLowerCase().match(ve)||[""],null==f.crossDomain&&(r=Bt.exec(f.url.toLowerCase()),f.crossDomain=!(!r||r[1]===Lt[1]&&r[2]===Lt[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Lt[3]||("http:"===Lt[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=ie.param(f.data,f.traditional)),R(Rt,f,t,w),2===b)return w;(l=ie.event&&f.global)&&0==ie.active++&&ie.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ot.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(At.test(o)?"&":"?")+f.data,delete f.data),!1===f.cache&&(f.url=_t.test(o)?o.replace(_t,"$1_="+jt++):o+(At.test(o)?"&":"?")+"_="+jt++)),f.ifModified&&(ie.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&w.setRequestHeader("If-None-Match",ie.etag[o])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+$t+"; q=0.01":""):f.accepts["*"]);for(i in f.headers)w.setRequestHeader(i,f.headers[i]);if(f.beforeSend&&(!1===f.beforeSend.call(d,w,f)||2===b))return w.abort();x="abort";for(i in{success:1,error:1,complete:1})w[i](f[i]);if(u=R(Wt,f,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{b=1,u.send(y,n)}catch(e){if(!(b<2))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(e){if(ie.isFunction(e))return this.each(function(t){ie(this).wrapAll(e.call(this,t))});if(this[0]){var t=ie(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ie.isFunction(e)?this.each(function(t){ie(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ie.css(e,"display"))},ie.expr.filters.visible=function(e){return!ie.expr.filters.hidden(e)};var zt=/%20/g,It=/\[\]$/,Xt=/\r?\n/g,Ut=/^(?:submit|button|image|reset|file)$/i,Vt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)I(n,e[n],t,i);return r.join("&").replace(zt,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&Vt.test(this.nodeName)&&!Ut.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Xt,"\r\n")}}):{name:t.name,value:n.replace(Xt,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()||U()}:X;var Qt=0,Jt={},Yt=ie.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Jt)Jt[e](void 0,!0)}),ne.cors=!!Yt&&"withCredentials"in Yt,(Yt=ne.ajax=!!Yt)&&ie.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Qt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,u;if(t&&(i||4===o.readyState))if(delete Jt[a],t=void 0,o.onreadystatechange=ie.noop,i)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(e){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&r(s,l,u,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Jt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||ie("head")[0]||he.documentElement;return{send:function(r,i){(t=he.createElement("script")).async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Gt=[],Kt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||ie.expando+"_"+jt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Kt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Kt,"$1"+i):!1!==t.jsonp&&(t.url+=(At.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ie.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Gt.push(i)),a&&ie.isFunction(o)&&o(a[0]),a=o=void 0}),"script"}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var r=fe.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ie.buildFragment([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var Zt=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&Zt)return Zt.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=ie.trim(e.slice(s,e.length)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ie.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length};var en=e.document.documentElement;ie.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=ie.css(e,"position"),f=ie(e),d={};"static"===c&&(e.style.position="relative"),s=f.offset(),o=ie.css(e,"top"),l=ie.css(e,"left"),(u=("absolute"===c||"fixed"===c)&&ie.inArray("auto",[o,l])>-1)?(a=(r=f.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):f.css(d)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;if(o)return t=o.documentElement,ie.contains(t,i)?(typeof i.getBoundingClientRect!==we&&(r=i.getBoundingClientRect()),n=V(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ie.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(n=e.offset()),n.top+=ie.css(e[0],"borderTopWidth",!0),n.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ie.css(r,"marginTop",!0),left:t.left-n.left-ie.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||en;e&&!ie.nodeName(e,"html")&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||en})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ie.fn[e]=function(r){return je(this,function(e,r,i){var o=V(e);if(void 0===i)return o?t in o?o[t]:o.document.documentElement[r]:e[r];o?o.scrollTo(n?ie(o).scrollLeft():i,n?i:ie(o).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=k(ne.pixelPosition,function(e,n){if(n)return n=tt(e,t),Ze.test(n)?ie(e).position()[t]+"px":n})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return je(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,a):ie.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var tn=e.jQuery,nn=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=nn),t&&e.jQuery===ie&&(e.jQuery=tn),ie},typeof t===we&&(e.jQuery=e.$=ie),ie})}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/jquery/main.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.jquery=o,{$:r,jQuery:void 0})}();

"undefined"==typeof Package&&(Package={}),Package["standard-minifier-css"]={};

"undefined"==typeof Package&&(Package={}),Package["standard-minifier-js"]={};

"undefined"==typeof Package&&(Package={}),Package["shell-server"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,o=Package.meteor.meteorEnv,a=Package.jquery.$,n=Package.jquery.jQuery,i=Package.modules.meteorInstall,r=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,u=Package["ecmascript-runtime-client"].Map,s=Package["ecmascript-runtime-client"].Set;i({node_modules:{meteor:{"ohif:polyfill":{client:{"index.js":function(e,t,o){o.watch(e("./ie.js"))},"ie.js":function(e,t,o){var a=void 0;o.watch(e("meteor/meteor"),{Meteor:function(e){a=e}},0);var n=void 0;o.watch(e("meteor/jquery"),{$:function(e){n=e}},1);var i=void 0;o.watch(e("./lib/writeScript"),{default:function(e){i=e}},2),navigator&&/MSIE \d|Trident.*rv:/.test(navigator.userAgent)&&a.startup(function(){n(window).on("load",function(){i("svgxuse.min.js")})})},lib:{"absoluteUrl.js":function(e,t,o){var a=void 0;o.watch(e("meteor/meteor"),{Meteor:function(e){a=e}},0),o.exportDefault(function(e){return e&&(e=e.replace(/^\//,"")),a.absoluteUrl(e)})},"writeScript.js":function(e,t,o){var a=void 0;o.watch(e("./absoluteUrl"),{default:function(e){a=e}},0),o.exportDefault(function(e,t){var o=document.createElement("script");o.src=a("/packages/ohif_polyfill/public/js/"+e),o.onload=function(){"function"==typeof t&&t(o)},document.body.appendChild(o)})}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:polyfill/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:polyfill"]={}}();

"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={};

"undefined"==typeof Package&&(Package={}),Package.stylus={};

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,r=Package.meteor.meteorEnv,t=Package.tracker.Tracker,i=Package.tracker.Deps,o=Package["mongo-id"].MongoID,a=Package["diff-sequence"].DiffSequence,c=Package.underscore._,f=Package.random.Random,u,d,s,l;(function(){function e(e){return e instanceof Array||c.isArray(e)}var n=function(){u._suppressWarnings?u._suppressWarnings--:("undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments),u._loggedWarnings++)},r=o.idStringify,i=o.idParse;u={_suppressWarnings:0,_loggedWarnings:0,observe:function(n,r){var i=null,o=null,f=[],u=t.autorun(function(){var u=n();t.nonreactive(function(){var n;if(o&&(f=c.map(i.fetch(),function(e){return{_id:e._id,item:e}}),o.stop(),o=null),u)if(e(u))n=s(f,u,r);else{if(!v(u))throw a();var t=l(f,u,r);n=t[0],o=t[1]}else n=d(f,r);p(f,n,r),i=u,f=n})});return{stop:function(){u.stop(),o&&o.stop()}}},fetch:function(n){if(n){if(e(n))return n;if(v(n))return n.fetch();throw a()}return[]}};var a=function(){return new Error("{{#each}} currently only accepts arrays, cursors or falsey values.")},v=function(e){return e&&c.isObject(e)&&c.isFunction(e.observe)&&c.isFunction(e.fetch)},p=function(e,n,t){var o=Package["diff-sequence"].DiffSequence.diffQueryOrderedChanges,a=[],f=[],u={},d={},s={},l=e.length;c.each(n,function(e,n){f.push({_id:e._id}),d[r(e._id)]=n}),c.each(e,function(e,n){a.push({_id:e._id}),u[r(e._id)]=n,s[r(e._id)]=n}),o(a,f,{addedBefore:function(e,i,o){var a=o?s[r(o)]:l;o&&c.each(s,function(e,n){e>=a&&s[n]++}),l++,s[r(e)]=a,t.addedAt(e,n[d[r(e)]].item,a,o)},movedBefore:function(e,i){if(e!==i){var o=s[r(e)],a=i?s[r(i)]:l;a>o&&a--,c.each(s,function(e,n){o<e&&e<a?s[n]--:a<=e&&e<o&&s[n]++}),s[r(e)]=a,t.movedTo(e,n[d[r(e)]].item,o,a,i)}},removed:function(n){var i=s[r(n)];c.each(s,function(e,n){e>=i&&s[n]--}),delete s[r(n)],l--,t.removedAt(n,e[u[r(n)]].item,i)}}),c.each(d,function(r,o){var a=i(o);if(c.has(u,o)){var f=n[r].item,d=e[u[o]].item;"object"!=typeof f&&f===d||t.changedAt(a,f,d,r)}})};d=function(e,n){return[]},s=function(e,t,i){var o={};return c.map(t,function(e,i){var a;if("string"==typeof e)a="-"+e;else if("number"==typeof e||"boolean"==typeof e||void 0===e||null===e)a=e;else{if("object"!=typeof e)throw new Error("{{#each}} doesn't support arrays with elements of type "+typeof e);a=e&&"_id"in e?e._id:i}var c=r(a);return o[c]?(e&&"object"==typeof e&&"_id"in e&&n("duplicate id "+a+" in",t),a=f.id()):o[c]=!0,{_id:a,item:e}})},l=function(e,n,r){var t=!0,i=[],o=n.observe({addedAt:function(e,n,o){if(t){if(null!==o)throw new Error("Expected initial data from observe in order");i.push({_id:e._id,item:e})}else r.addedAt(e._id,e,n,o)},changedAt:function(e,n,t){r.changedAt(e._id,e,n,t)},removedAt:function(e,n){r.removedAt(e._id,e,n)},movedTo:function(e,n,t,i){r.movedTo(e._id,e,n,t,i)}});return t=!1,[i,o]}}).call(this),"undefined"==typeof Package&&(Package={}),function(e,n){for(var r in n)r in e||(e[r]=n[r])}(Package["observe-sequence"]={},{ObserveSequence:u})}();

!function(){var a=Package.tracker.Tracker,e=Package.tracker.Deps;"undefined"==typeof Package&&(Package={}),function(a,e){for(var c in e)c in a||(a[c]=e[c])}(Package.deps={},{Tracker:a,Deps:e})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,i=Package.meteor.meteorEnv,r=Package.tracker.Tracker,n=Package.tracker.Deps,o,a,s;(function(){o={},a=function(t){return t},s=Array.prototype.slice}).call(this),function(){var t=Object.prototype.hasOwnProperty,e=function(e,i){for(var r in i)t.call(i,r)&&(e[r]=i[r]);return e};o.Visitor=function(t){e(this,t)},o.Visitor.def=function(t){e(this.prototype,t)},o.Visitor.extend=function(t){var i=this,r=function t(){o.Visitor.apply(this,arguments)};return r.prototype=new i,r.extend=i.extend,r.def=i.def,t&&e(r.prototype,t),r},o.Visitor.def({visit:function(t){if(null==t)return this.visitNull.apply(this,arguments);if("object"==typeof t){if(t.htmljsType)switch(t.htmljsType){case o.Tag.htmljsType:return this.visitTag.apply(this,arguments);case o.CharRef.htmljsType:return this.visitCharRef.apply(this,arguments);case o.Comment.htmljsType:return this.visitComment.apply(this,arguments);case o.Raw.htmljsType:return this.visitRaw.apply(this,arguments);default:throw new Error("Unknown htmljs type: "+t.htmljsType)}return o.isArray(t)?this.visitArray.apply(this,arguments):this.visitObject.apply(this,arguments)}if("string"==typeof t||"boolean"==typeof t||"number"==typeof t)return this.visitPrimitive.apply(this,arguments);if("function"==typeof t)return this.visitFunction.apply(this,arguments);throw new Error("Unexpected object in htmljs: "+t)},visitNull:function(t){},visitPrimitive:function(t){},visitArray:function(t){},visitComment:function(t){},visitCharRef:function(t){},visitRaw:function(t){},visitTag:function(t){},visitObject:function(t){throw new Error("Unexpected object in htmljs: "+t)},visitFunction:function(t){throw new Error("Unexpected function in htmljs: "+t)}}),o.TransformingVisitor=o.Visitor.extend(),o.TransformingVisitor.def({visitNull:a,visitPrimitive:a,visitArray:function(t){for(var e=s.call(arguments),i=t,r=0;r<t.length;r++){var n=t[r];e[0]=n;var o=this.visit.apply(this,e);o!==n&&(i===t&&(i=t.slice()),i[r]=o)}return i},visitComment:a,visitCharRef:a,visitRaw:a,visitObject:a,visitFunction:a,visitTag:function(t){var e=t.children,i=s.call(arguments);i[0]=e;var r=this.visitChildren.apply(this,i),n=t.attrs;i[0]=n;var a=this.visitAttributes.apply(this,i);if(a===n&&r===e)return t;var l=o.getTag(t.tagName).apply(null,r);return l.attrs=a,l},visitChildren:function(t){return this.visitArray.apply(this,arguments)},visitAttributes:function(t){if(o.isArray(t)){for(var i=s.call(arguments),r=t,n=0;n<t.length;n++){var a=t[n];i[0]=a;var l=this.visitAttributes.apply(this,i);l!==a&&(r===t&&(r=t.slice()),r[n]=l)}return r}if(t&&o.isConstructedObject(t))throw new Error("The basic HTML.TransformingVisitor does not support foreign objects in attributes.  Define a custom visitAttributes for this case.");var u=t,f=u;if(u){var c=[null,null];c.push.apply(c,arguments);for(var h in u){var p=u[h];c[0]=h,c[1]=p;var m=this.visitAttribute.apply(this,c);m!==p&&(f===u&&(f=e({},u)),f[h]=m)}}return f},visitAttribute:function(t,e,i){var r=s.call(arguments,2);return r[0]=e,this.visit.apply(this,r)}}),o.ToTextVisitor=o.Visitor.extend(),o.ToTextVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){var e=String(t);return this.textMode===o.TEXTMODE.RCDATA?e.replace(/&/g,"&amp;").replace(/</g,"&lt;"):this.textMode===o.TEXTMODE.ATTRIBUTE?e.replace(/&/g,"&amp;").replace(/"/g,"&quot;"):e},visitArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.visit(t[i]));return e.join("")},visitComment:function(t){throw new Error("Can't have a comment here")},visitCharRef:function(t){return this.textMode===o.TEXTMODE.RCDATA||this.textMode===o.TEXTMODE.ATTRIBUTE?t.html:t.str},visitRaw:function(t){return t.value},visitTag:function(t){return this.visit(this.toHTML(t))},visitObject:function(t){throw new Error("Unexpected object in htmljs in toText: "+t)},toHTML:function(t){return o.toHTML(t)}}),o.ToHTMLVisitor=o.Visitor.extend(),o.ToHTMLVisitor.def({visitNull:function(t){return""},visitPrimitive:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},visitArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.visit(t[i]));return e.join("")},visitComment:function(t){return"\x3c!--"+t.sanitizedValue+"--\x3e"},visitCharRef:function(t){return t.html},visitRaw:function(t){return t.value},visitTag:function(t){var e=[],i=t.tagName,r=t.children,n=t.attrs;if(n){n=o.flattenAttributes(n);for(var a in n)if("value"===a&&"textarea"===i)r=[n[a],r];else{var s=this.toText(n[a],o.TEXTMODE.ATTRIBUTE);e.push(" "+a+'="'+s+'"')}}var l="<"+i+e.join("")+">",u=[],f;if("textarea"===i){for(var c=0;c<r.length;c++)u.push(this.toText(r[c],o.TEXTMODE.RCDATA));"\n"===(f=u.join("")).slice(0,1)&&(f="\n"+f)}else{for(var c=0;c<r.length;c++)u.push(this.visit(r[c]));f=u.join("")}var h=l+f;return!r.length&&o.isVoidElement(i)||(h+="</"+i+">"),h},visitObject:function(t){throw new Error("Unexpected object in htmljs in toHTML: "+t)},toText:function(t,e){return o.toText(t,e)}})}.call(this),function(){o.Tag=function(){},o.Tag.prototype.tagName="",o.Tag.prototype.attrs=null,o.Tag.prototype.children=Object.freeze?Object.freeze([]):[],o.Tag.prototype.htmljsType=o.Tag.htmljsType=["Tag"];var t=function(t){var e=function(){var t=this instanceof o.Tag?this:new e,i=0,r=arguments.length&&arguments[0];if(r&&"object"==typeof r)if(o.isConstructedObject(r)){if(r instanceof o.Attrs){var n=r.value;1===n.length?t.attrs=n[0]:n.length>1&&(t.attrs=n),i++}}else t.attrs=r,i++;return i<arguments.length&&(t.children=s.call(arguments,i)),t};return e.prototype=new o.Tag,e.prototype.constructor=e,e.prototype.tagName=t,e},e=o.Attrs=function(){var t=this instanceof e?this:new e;return t.value=s.call(arguments),t};o.getTag=function(e){var i=o.getSymbolName(e);if(i===e)throw new Error("Use the lowercase or camelCase form of '"+e+"' here");return o[i]||(o[i]=t(e)),o[i]},o.ensureTag=function(t){o.getTag(t)},o.isTagEnsured=function(t){return o.isKnownElement(t)},o.getSymbolName=function(t){return t.toUpperCase().replace(/-/g,"_")},o.knownElementNames="a abbr acronym address applet area article aside audio b base basefont bdi bdo big blockquote body br button canvas caption center cite code col colgroup command data datagrid datalist dd del details dfn dir div dl dt em embed eventsource fieldset figcaption figure font footer form frame frameset h1 h2 h3 h4 h5 h6 head header hgroup hr html i iframe img input ins isindex kbd keygen label legend li link main map mark menu meta meter nav noframes noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strike strong style sub summary sup table tbody td textarea tfoot th thead time title tr track tt u ul var video wbr".split(" "),o.knownSVGElementNames="altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" "),o.knownElementNames=o.knownElementNames.concat(o.knownSVGElementNames),o.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");var i={yes:!0},r=function(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=i;return e},n=r(o.voidElementNames),a=r(o.knownElementNames),l=r(o.knownSVGElementNames);o.isKnownElement=function(t){return a[t]===i},o.isKnownSVGElement=function(t){return l[t]===i},o.isVoidElement=function(t){return n[t]===i};for(var u=0;u<o.knownElementNames.length;u++)o.ensureTag(o.knownElementNames[u]);var f=o.CharRef=function(t){if(!(this instanceof f))return new f(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str};f.prototype.htmljsType=f.htmljsType=["CharRef"];var c=o.Comment=function(t){if(!(this instanceof c))return new c(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")};c.prototype.htmljsType=c.htmljsType=["Comment"];var h=o.Raw=function(t){if(!(this instanceof h))return new h(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t};h.prototype.htmljsType=h.htmljsType=["Raw"],o.isArray=function(t){return t instanceof Array},o.isConstructedObject=function(t){return t&&"object"==typeof t&&t.constructor!==Object&&"function"==typeof t.constructor&&t instanceof t.constructor},o.isNully=function(t){if(null==t)return!0;if(o.isArray(t)){for(var e=0;e<t.length;e++)if(!o.isNully(t[e]))return!1;return!0}return!1},o.isValidAttributeName=function(t){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(t)},o.flattenAttributes=function(t){if(!t)return t;var e=o.isArray(t);if(e&&0===t.length)return null;for(var i={},r=0,n=e?t.length:1;r<n;r++){var a=e?t[r]:t;if("object"!=typeof a||o.isConstructedObject(a))throw new Error("Expected plain JS object as attrs, found: "+a);for(var s in a){if(!o.isValidAttributeName(s))throw new Error("Illegal HTML attribute name: "+s);var l=a[s];o.isNully(l)||(i[s]=l)}}return i},o.toHTML=function(t){return(new o.ToHTMLVisitor).visit(t)},o.TEXTMODE={STRING:1,RCDATA:2,ATTRIBUTE:3},o.toText=function(t,e){if(!e)throw new Error("textMode required for HTML.toText");if(e!==o.TEXTMODE.STRING&&e!==o.TEXTMODE.RCDATA&&e!==o.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+e);return new o.ToTextVisitor({textMode:e}).visit(t)}}.call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var i in e)i in t||(t[i]=e[i])}(Package.htmljs={},{HTML:o})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.jquery.$,i=Package.jquery.jQuery,a=Package.tracker.Tracker,o=Package.tracker.Deps,s=Package.check.check,l=Package.check.Match,c=Package.underscore._,u=Package["observe-sequence"].ObserveSequence,d=Package["reactive-var"].ReactiveVar,p=Package["ordered-dict"].OrderedDict,h=Package.htmljs.HTML,f,m,w,_,v;(function(){(f={})._escape=function(){var e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;","&":"&amp;"},t=function(t){return e[t]};return function(e){return e.replace(/[&<>"'`]/g,t)}}(),f._warn=function(e){e="Warning: "+e,"undefined"!=typeof console&&console.warn&&console.warn(e)};var e=Function.prototype.bind;f._bind=e?function(t,n){if(2===arguments.length)return e.call(t,n);for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];return e.apply(t,r.slice(1))}:c.bind}).call(this),function(){var e={};f._DOMBackend=e;var t=void 0!==i?i:"undefined"!=typeof Package?Package.jquery&&Package.jquery.jQuery:null;if(!t)throw new Error("jQuery not found");e._$jq=t,e.parseHTML=function(e){return t.parseHTML(e)||[]},e.Events={delegateEvents:function(e,n,r,i){t(e).on(n,r,i)},undelegateEvents:function(e,n,r){t(e).off(n,"**",r)},bindEventCapturer:function(n,r,i,a){var o=t(n),s=function(e){(e=t.event.fix(e)).currentTarget=e.target,t(e.currentTarget).is(o.find(i))&&a.call(n,e)};a._meteorui_wrapper=s,r=e.Events.parseEventType(r),n.addEventListener(r,s,!0)},unbindEventCapturer:function(t,n,r){n=e.Events.parseEventType(n),t.removeEventListener(n,r._meteorui_wrapper,!0)},parseEventType:function(e){var t=e.indexOf(".");return t>=0?e.slice(0,t):e}};var n=function(){},r=function(e){this.next=this,this.prev=this,this.func=e};r.prototype.linkBefore=function(e){this.prev=e.prev,this.next=e,e.prev.next=this,e.prev=this},r.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},r.prototype.go=function(){var e=this.func;e&&e()},r.prototype.stop=r.prototype.unlink,e.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(i,a){var o=new r(a),s=e.Teardown._CB_PROP;return i[s]||(i[s]=new r,t(i).on(e.Teardown._JQUERY_EVENT_NAME,n)),o.linkBefore(i[s]),o},tearDownElement:function(e){for(var n=[],r=e.getElementsByTagName("*"),i=0;i<r.length;i++)n.push(r[i]);n.push(e),t.cleanData(n)}},t.event.special[e.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var t=this,n=t[e.Teardown._CB_PROP];if(n){for(var r=n.next;r!==n;)r.go(),r=r.next;n.go(),t[e.Teardown._CB_PROP]=null}}},e.findBySelector=function(e,n){return t(e,n)}}.call(this),function(){var e=Object.freeze?Object.freeze([]):[];f._DOMRange=function(n){if(!(this instanceof t))return new t(n);var r=n||e;if(!r||"number"!=typeof r.length)throw new Error("Expected array");for(var i=0;i<r.length;i++)this._memberIn(r[i]);this.members=r,this.emptyRangePlaceholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null,this.attachedCallbacks=e};var t=f._DOMRange;t._USE_COMMENT_PLACEHOLDERS=function(){var e=!1,t=document.createTextNode("");try{t.someProp=!0}catch(t){e=!0}return e}(),t._insert=function(e,n,r,i){var a=e;a instanceof t?a.attach(n,r,i):i?t._moveNodeWithHooks(a,n,r):t._insertNodeWithHooks(a,n,r)},t._remove=function(e){var n=e;n instanceof t?n.detach():t._removeNodeWithHooks(n)},t._removeNodeWithHooks=function(e){e.parentNode&&(1===e.nodeType&&e.parentNode._uihooks&&e.parentNode._uihooks.removeElement?e.parentNode._uihooks.removeElement(e):e.parentNode.removeChild(e))},t._insertNodeWithHooks=function(e,t,n){n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.insertElement?t._uihooks.insertElement(e,n):t.insertBefore(e,n)},t._moveNodeWithHooks=function(e,t,n){e.parentNode===t&&(n=n||null,1===e.nodeType&&t._uihooks&&t._uihooks.moveElement?t._uihooks.moveElement(e,n):t.insertBefore(e,n))},t.forElement=function(e){if(1!==e.nodeType)throw new Error("Expected element, found: "+e);for(var t=null;e&&!t;)(t=e.$blaze_range||null)||(e=e.parentNode);return t},t.prototype.attach=function(e,n,r,i){if((r||i)&&(this.parentElement!==e||!this.attached))throw new Error("Can only move or replace an attached DOMRange, and only under the same parent element");var a=this.members;if(a.length){this.emptyRangePlaceholder=null;for(var o=0;o<a.length;o++)t._insert(a[o],e,n,r)}else{var s=t._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=s,e.insertBefore(s,n||null)}if(this.attached=!0,this.parentElement=e,!r&&!i)for(var o=0;o<this.attachedCallbacks.length;o++){var l=this.attachedCallbacks[o];l.attached&&l.attached(this,e)}},t.prototype.setMembers=function(e){var t=e;if(!t||"number"!=typeof t.length)throw new Error("Expected array");for(var n=this.members,r=0;r<n.length;r++)this._memberOut(n[r]);for(var r=0;r<t.length;r++)this._memberIn(t[r]);if(this.attached){if(t.length||n.length){var i=this.lastNode().nextSibling,a=this.parentElement;this.detach(!0),this.members=t,this.attach(a,i,!1,!0)}}else this.members=t},t.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[0];return e instanceof t?e.firstNode():e},t.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var e=this.members[this.members.length-1];return e instanceof t?e.lastNode():e},t.prototype.detach=function(e){if(!this.attached)throw new Error("Must be attached");var n=this.parentElement,r=this.members;if(r.length)for(var i=0;i<r.length;i++)t._remove(r[i]);else{var a=this.emptyRangePlaceholder;this.parentElement.removeChild(a),this.emptyRangePlaceholder=null}if(!e){this.attached=!1,this.parentElement=null;for(var i=0;i<this.attachedCallbacks.length;i++){var o=this.attachedCallbacks[i];o.detached&&o.detached(this,n)}}},t.prototype.addMember=function(e,n,r){var i=this.members;if(!(n>=0&&n<=i.length))throw new Error("Bad index in range.addMember: "+n);if(r||this._memberIn(e),this.attached)if(0===i.length)this.setMembers([e]);else{var a;if(n===i.length)a=this.lastNode().nextSibling;else{var o=i[n];a=o instanceof t?o.firstNode():o}i.splice(n,0,e),t._insert(e,this.parentElement,a,r)}else i.splice(n,0,e)},t.prototype.removeMember=function(n,r){var i=this.members;if(!(n>=0&&n<i.length))throw new Error("Bad index in range.removeMember: "+n);if(r)i.splice(n,1);else{var a=i[n];this._memberOut(a),1===i.length?this.setMembers(e):(i.splice(n,1),this.attached&&t._remove(a))}},t.prototype.moveMember=function(e,t){var n=this.members[e];this.removeMember(e,!0),this.addMember(n,t,!0)},t.prototype.getMember=function(e){var t=this.members;if(!(e>=0&&e<t.length))throw new Error("Bad index in range.getMember: "+e);return this.members[e]},t.prototype._memberIn=function(e){e instanceof t?e.parentRange=this:1===e.nodeType&&(e.$blaze_range=this)},t._destroy=function(e,n){e instanceof t?e.view&&f._destroyView(e.view,n):n||1!==e.nodeType||e.$blaze_range&&(f._destroyNode(e),e.$blaze_range=null)},t.prototype._memberOut=t._destroy,t.prototype.destroyMembers=function(e){for(var t=this.members,n=0;n<t.length;n++)this._memberOut(t[n],e)},t.prototype.destroy=function(e){t._destroy(this,e)},t.prototype.containsElement=function(e){if(!this.attached)throw new Error("Must be attached");if(!f._elementContains(this.parentElement,e))return!1;for(;e.parentNode!==this.parentElement;)e=e.parentNode;for(var t=e.$blaze_range;t&&t!==this;)t=t.parentRange;return t===this},t.prototype.containsRange=function(e){if(!this.attached)throw new Error("Must be attached");if(!e.attached)return!1;if(e.parentElement!==this.parentElement)return this.containsElement(e.parentElement);if(e===this)return!1;for(;e&&e!==this;)e=e.parentRange;return e===this},t.prototype.onAttached=function(e){this.onAttachedDetached({attached:e})},t.prototype.onAttachedDetached=function(t){this.attachedCallbacks===e&&(this.attachedCallbacks=[]),this.attachedCallbacks.push(t)},t.prototype.$=function(e){var t=this,n=this.parentElement;if(!n)throw new Error("Can't select in removed DomRange");if(11===n.nodeType)throw new Error("Can't use $ on an offscreen range");var r=f._DOMBackend.findBySelector(e,n),i=function(e){return"number"==typeof e&&(e=this),t.containsElement(e)};if(r.filter)r=r.filter(i);else{for(var a=[],o=0;o<r.length;o++){var s=r[o];i(s)&&a.push(s)}r=a}return r},f._elementContains=function(e,t){return 1===e.nodeType&&(e!==t&&(e.compareDocumentPosition?16&e.compareDocumentPosition(t):!(!(t=t.parentNode)||1!==t.nodeType)&&(e===t||e.contains(t))))}}.call(this),function(){var e=f._EventSupport={},t=f._DOMBackend,n=e.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},r=e.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2},i=1,a=function(e,a,o,s,l){this.elem=e,this.type=a,this.selector=o,this.handler=s,this.recipient=l,this.id=i++,this.mode=r.TBD,this.delegatedHandler=function(e){return function(t){if(e.selector||t.currentTarget===t.target)return e.handler.apply(e.recipient,arguments)}}(this),e.addEventListener&&!c.has(n,t.Events.parseEventType(a))?this.capturingHandler=function(e){return function(n){if(e.mode===r.TBD){if(n.bubbles)return e.mode=r.BUBBLING,void t.Events.unbindEventCapturer(e.elem,e.type,e.capturingHandler);e.mode=r.CAPTURING,t.Events.undelegateEvents(e.elem,e.type,e.delegatedHandler)}e.delegatedHandler(n)}}(this):this.mode=r.BUBBLING};e.HandlerRec=a,a.prototype.bind=function(){this.mode!==r.BUBBLING&&t.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},a.prototype.unbind=function(){this.mode!==r.BUBBLING&&t.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==r.CAPTURING&&t.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)},e.listen=function(e,t,n,r,i,o){try{e=e}finally{}var s=[];t.replace(/[^ /]+/g,function(e){s.push(e)});for(var l=[],c=0,u=s.length;c<u;c++){var d=s[c],p=e.$blaze_events;p||(p=e.$blaze_events={});var h=p[d];h||((h=p[d]={}).handlers=[]);var f=h.handlers,m=new a(e,d,n,r,i);if(l.push(m),m.bind(),f.push(m),o)for(var w=o(i);w;w=o(w))for(var _=0,v=f.length;_<v;_++){var g=f[_];g.recipient===w&&(g.unbind(),g.bind(),f.splice(_,1),f.push(g),_--,v--)}}return{stop:function(){var t=e.$blaze_events;if(t){for(var n=0;n<l.length;n++){var r=l[n],i=t[r.type];if(i)for(var a=i.handlers,o=a.length-1;o>=0;o--)a[o]===r&&(r.unbind(),a.splice(o,1))}l.length=0}}}}}.call(this),function(){var t=!1;f._allowJavascriptUrls=function(){t=!0},f._javascriptUrlsAllowed=function(){return t},m=function(e,t){this.name=e,this.value=t},f._AttributeHandler=m,m.prototype.update=function(e,t,n){null===n?null!==t&&e.removeAttribute(this.name):e.setAttribute(this.name,n)},m.extend=function(e){var t=this,n=function e(){m.apply(this,arguments)};return n.prototype=new t,n.extend=t.extend,e&&c.extend(n.prototype,e),n},f._DiffingAttributeHandler=m.extend({update:function(e,t,n){if(!(this.getCurrentValue&&this.setValue&&this.parseValue&&this.joinValues))throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var r=t?this.parseValue(t):new p,i=n?this.parseValue(n):new p,a=this.getCurrentValue(e);(a?this.parseValue(a):new p).forEach(function(e,t,n){i.has(t)||r.has(t)||i.append(t,e)});var o=[];i.forEach(function(e,t,n){o.push(e)}),this.setValue(e,this.joinValues(o))}});var n=f._DiffingAttributeHandler.extend({getCurrentValue:function(e){return e.className},setValue:function(e,t){e.className=t},parseValue:function(e){var t=new p;return c.each(e.split(" "),function(e){e&&(t.has(e)||t.append(e,e))}),t},joinValues:function(e){return e.join(" ")}}),i=n.extend({getCurrentValue:function(e){return e.className.baseVal},setValue:function(e,t){e.setAttribute("class",t)}}),a=f._DiffingAttributeHandler.extend({getCurrentValue:function(e){return e.getAttribute("style")},setValue:function(e,t){""===t?e.removeAttribute("style"):e.setAttribute("style",t)},parseValue:function(e){for(var t=new p,n=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g,i=n.exec(e);i;)t.has(i[1])&&t.remove(i[1]),t.append(i[1],i[0].trim?i[0].trim():r.trim(i[0])),i=n.exec(e);return t},joinValues:function(e){return e.join(" ")}}),o=m.extend({update:function(e,t,n){var r=this.name;null==n?null!=t&&(e[r]=!1):e[r]=!0}}),s=m.extend({update:function(e,t,n){var r=this.name;n!==e[r]&&(e[r]=n)}}),l=m.extend({update:function(e,t,n){var r="http://www.w3.org/1999/xlink";null===n?null!==t&&e.removeAttributeNS(r,this.name):e.setAttributeNS(r,this.name,this.value)}}),u=function(e){return"ownerSVGElement"in e},d=function(e,t){var n={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};if("itemid"===t)return!0;var r=n[e]||[];return c.contains(r,t)};if(e.isClient)var h=document.createElement("A");var _=function(t){if(e.isClient)return h.href=t,(h.protocol||"").toLowerCase();throw new Error("getUrlProtocol not implemented on the server")},v=m.prototype.update,g=m.extend({update:function(e,t,n){var r=this,i=arguments;if(f._javascriptUrlsAllowed())v.apply(r,i);else{var a="javascript:"===_(n),o="vbscript:"===_(n);a||o?(f._warn("URLs that use the 'javascript:' or 'vbscript:' protocol are not allowed in URL attribute values. Call Blaze._allowJavascriptUrls() to enable them."),v.apply(r,[e,t,null])):v.apply(r,i)}}});f._makeAttributeHandler=function(e,t,r){return"class"===t?u(e)?new i(t,r):new n(t,r):"style"===t?new a(t,r):"OPTION"===e.tagName&&"selected"===t||"INPUT"===e.tagName&&"checked"===t||"VIDEO"===e.tagName&&"muted"===t?new o(t,r):"TEXTAREA"!==e.tagName&&"INPUT"!==e.tagName||"value"!==t?"xlink:"===t.substring(0,6)?new l(t.substring(6),r):d(e.tagName,t)?new g(t,r):new m(t,r):new s(t,r)},(w=function(e){this.elem=e,this.handlers={}}).prototype.update=function(e){var t=this.elem,n=this.handlers;for(var r in n)if(!c.has(e,r)){var i=(a=n[r]).value;a.value=null,a.update(t,i,null),delete n[r]}for(var r in e){var a=null,i=null,o=e[r];c.has(n,r)?i=(a=n[r]).value:null!==o&&(a=f._makeAttributeHandler(t,r,o),n[r]=a),i!==o&&(a.value=o,a.update(t,i,o),null===o&&delete n[r])}}}.call(this),function(){f._materializeDOM=function(t,n,r,i){var a=i||[];if(e(t,n,r,a),!i)for(;a.length;)a.pop()();return n};var e=function(e,n,r,i){if(null!=e){switch(typeof e){case"string":case"boolean":case"number":return void n.push(document.createTextNode(String(e)));case"object":if(e.htmljsType)switch(e.htmljsType){case h.Tag.htmljsType:return void n.push(t(e,r,i));case h.CharRef.htmljsType:return void n.push(document.createTextNode(e.str));case h.Comment.htmljsType:return void n.push(document.createComment(e.sanitizedValue));case h.Raw.htmljsType:for(var a=f._DOMBackend.parseHTML(e.value),o=0;o<a.length;o++)n.push(a[o]);return}else{if(h.isArray(e)){for(var o=e.length-1;o>=0;o--)i.push(f._bind(f._materializeDOM,null,e[o],n,r,i));return}if(e instanceof f.Template&&(e=e.constructView()),e instanceof f.View)return void f._materializeView(e,r,i,n)}}throw new Error("Unexpected object in htmljs: "+e)}},t=function(e,t,r){var i=e.tagName,o;o=(h.isKnownSVGElement(i)||n(e))&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",i):document.createElement(i);var s=e.attrs,l=e.children;if("textarea"===i&&e.children.length&&!(s&&"value"in s)){if("function"==typeof s||h.isArray(s))throw new Error("Can't have reactive children of TEXTAREA node; use the 'value' attribute instead.");(s=c.extend({},s||null)).value=f._expand(l,t),l=[]}if(s){var u=new w(o),d=function(){var e=f._expandAttributes(s,t),n=h.flattenAttributes(e),r={};for(var i in n)null==n[i]||!1===n[i]?r[i]=null:r[i]=f._toText(n[i],t,h.TEXTMODE.STRING);u.update(r)},p;p=t?t.autorun(d,void 0,"updater"):a.nonreactive(function(){return a.autorun(function(){a._withCurrentView(t,d)})}),f._DOMBackend.Teardown.onElementTeardown(o,function e(){p.stop()})}if(l.length){var m=[];r.push(function(){for(var e=0;e<m.length;e++){var t=m[e];t instanceof f._DOMRange?t.attach(o):o.appendChild(t)}}),r.push(f._bind(f._materializeDOM,null,l,m,t,r))}return o},n=function(e){return"a"===e.tagName&&e.attrs&&void 0!==e.attrs["xlink:href"]}}.call(this),function(){var t;f._throwNextException=!1,f._reportException=function(n,r){if(f._throwNextException)throw f._throwNextException=!1,n;t||(t=function(){return void 0!==e?e._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),t()(r||"Exception caught in template:",n.stack||n.message||n)},f._wrapCatchingExceptions=function(e,t){return"function"!=typeof e?e:function(){try{return e.apply(this,arguments)}catch(e){f._reportException(e,"Exception in "+t+":")}}}}.call(this),function(){f.View=function(e,t){if(!(this instanceof f.View))return new f.View(e,t);"function"==typeof e&&(t=e,e=""),this.name=e,this._render=t,this._callbacks={created:null,rendered:null,destroyed:null},this.isCreated=!1,this._isCreatedForExpansion=!1,this.isRendered=!1,this._isAttached=!1,this.isDestroyed=!1,this._isInRender=!1,this.parentView=null,this._domrange=null,this._hasGeneratedParent=!1,this._scopeBindings={},this.renderCount=0},f.View.prototype._render=function(){return null},f.View.prototype.onViewCreated=function(e){this._callbacks.created=this._callbacks.created||[],this._callbacks.created.push(e)},f.View.prototype._onViewRendered=function(e){this._callbacks.rendered=this._callbacks.rendered||[],this._callbacks.rendered.push(e)},f.View.prototype.onViewReady=function(e){var t=this,n=function(){a.afterFlush(function(){t.isDestroyed||f._withCurrentView(t,function(){e.call(t)})})};t._onViewRendered(function e(){t.isDestroyed||(t._domrange.attached?n():t._domrange.onAttached(n))})},f.View.prototype.onViewDestroyed=function(e){this._callbacks.destroyed=this._callbacks.destroyed||[],this._callbacks.destroyed.push(e)},f.View.prototype.removeViewDestroyedListener=function(e){var t=this._callbacks.destroyed;if(t){var n=c.lastIndexOf(t,e);-1!==n&&(t[n]=null)}},f.View.prototype.autorun=function(e,t,n){var r=this;if(!r.isCreated)throw new Error("View#autorun must be called from the created callback at the earliest");if(this._isInRender)throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback");var i=f.Template._currentTemplateInstanceFunc,o=function n(a){return f._withCurrentView(t||r,function(){return f.Template._withTemplateInstanceFunc(i,function(){return e.call(r,a)})})};o.displayName=(r.name||"anonymous")+":"+(n||"anonymous");var s=a.autorun(o),l=function(){s.stop()};return r.onViewDestroyed(l),s.onStop(function(){r.removeViewDestroyedListener(l)}),s},f.View.prototype._errorIfShouldntCallSubscribe=function(){var e=this;if(!e.isCreated)throw new Error("View#subscribe must be called from the created callback at the earliest");if(e._isInRender)throw new Error("Can't call View#subscribe from inside render(); try calling it from the created or rendered callback");if(e.isDestroyed)throw new Error("Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.")},f.View.prototype.subscribe=function(t,n){var r=this;n=n||{},r._errorIfShouldntCallSubscribe();var i;return i=n.connection?n.connection.subscribe.apply(n.connection,t):e.subscribe.apply(e,t),r.onViewDestroyed(function(){i.stop()}),i},f.View.prototype.firstNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.firstNode()},f.View.prototype.lastNode=function(){if(!this._isAttached)throw new Error("View must be attached before accessing its DOM");return this._domrange.lastNode()},f._fireCallbacks=function(e,t){f._withCurrentView(e,function(){a.nonreactive(function n(){for(var r=e._callbacks[t],i=0,a=r&&r.length;i<a;i++)r[i]&&r[i].call(e)})})},f._createView=function(e,t,n){if(e.isCreated)throw new Error("Can't render the same View twice");e.parentView=t||null,e.isCreated=!0,n&&(e._isCreatedForExpansion=!0),f._fireCallbacks(e,"created")};var t=function(e,t){var n=new f._DOMRange(t);e._domrange=n,n.view=e,e.isRendered=!0,f._fireCallbacks(e,"rendered");var r=null;return n.onAttached(function t(n,i){e._isAttached=!0,r=f._DOMBackend.Teardown.onElementTeardown(i,function t(){f._destroyView(e,!0)})}),e.onViewDestroyed(function(){r&&r.stop(),r=null}),n};f._materializeView=function(e,n,r,i){f._createView(e,n);var o,s;return a.nonreactive(function(){e.autorun(function t(n){e.renderCount++,e._isInRender=!0;var r=e._render();e._isInRender=!1,n.firstRun||f._isContentEqual(s,r)||a.nonreactive(function t(){var n=f._materializeDOM(r,[],e);o.setMembers(n),f._fireCallbacks(e,"rendered")}),s=r,a.onInvalidate(function(){o&&o.destroyMembers()})},void 0,"materialize");var n;r?(n=[],r.push(function(){o=t(e,n),n=null,i.push(o)}),r.push(f._bind(f._materializeDOM,null,s,n,e,r))):(n=f._materializeDOM(s,[],e),o=t(e,n),n=null)}),r?null:o},f._expandView=function(e,t){f._createView(e,t,!0),e._isInRender=!0;var n=f._withCurrentView(e,function(){return e._render()});e._isInRender=!1;var r=f._expand(n,e);return a.active?a.onInvalidate(function(){f._destroyView(e)}):f._destroyView(e),r},f._HTMLJSExpander=h.TransformingVisitor.extend(),f._HTMLJSExpander.def({visitObject:function(e){return e instanceof f.Template&&(e=e.constructView()),e instanceof f.View?f._expandView(e,this.parentView):h.TransformingVisitor.prototype.visitObject.call(this,e)},visitAttributes:function(e){return"function"==typeof e&&(e=f._withCurrentView(this.parentView,e)),h.TransformingVisitor.prototype.visitAttributes.call(this,e)},visitAttribute:function(e,t,n){return"function"==typeof t&&(t=f._withCurrentView(this.parentView,t)),h.TransformingVisitor.prototype.visitAttribute.call(this,e,t,n)}});var n=function(){var e=f.currentView;return e&&e._isInRender?e:null};f._expand=function(e,t){return t=t||n(),new f._HTMLJSExpander({parentView:t}).visit(e)},f._expandAttributes=function(e,t){return t=t||n(),new f._HTMLJSExpander({parentView:t}).visitAttributes(e)},f._destroyView=function(e,t){e.isDestroyed||(e.isDestroyed=!0,f._fireCallbacks(e,"destroyed"),e._domrange&&e._domrange.destroyMembers(t))},f._destroyNode=function(e){1===e.nodeType&&f._DOMBackend.Teardown.tearDownElement(e)},f._isContentEqual=function(e,t){return e instanceof h.Raw?t instanceof h.Raw&&e.value===t.value:null==e?null==t:e===t&&("number"==typeof e||"boolean"==typeof e||"string"==typeof e)},f.currentView=null,f._withCurrentView=function(e,t){var n=f.currentView;try{return f.currentView=e,t()}finally{f.currentView=n}};var r=function(e){if(null===e)throw new Error("Can't render null");if(void 0===e)throw new Error("Can't render undefined");if(!(e instanceof f.View||e instanceof f.Template||"function"==typeof e))try{(new h.Visitor).visit(e)}catch(e){throw new Error("Expected Template or View")}},i=function(e){if(r(e),e instanceof f.Template)return e.constructView();if(e instanceof f.View)return e;var t=e;return"function"!=typeof t&&(t=function(){return e}),f.View("render",t)},o=function(e){return r(e),"function"!=typeof e?function(){return e}:e};f.render=function(e,t,r,a){if(t||f._warn("Blaze.render without a parent element is deprecated. You must specify where to insert the rendered content."),r instanceof f.View&&(a=r,r=null),t&&"number"!=typeof t.nodeType)throw new Error("'parentElement' must be a DOM node");if(r&&"number"!=typeof r.nodeType)throw new Error("'nextNode' must be a DOM node");a=a||n();var o=i(e);return f._materializeView(o,a),t&&o._domrange.attach(t,r),o},f.insert=function(e,t,n){if(f._warn("Blaze.insert has been deprecated.  Specify where to insert the rendered content in the call to Blaze.render."),!(e&&e._domrange instanceof f._DOMRange))throw new Error("Expected template rendered with Blaze.render");e._domrange.attach(t,n)},f.renderWithData=function(e,t,n,r,i){return f.render(f._TemplateWith(t,o(e)),n,r,i)},f.remove=function(e){if(!(e&&e._domrange instanceof f._DOMRange))throw new Error("Expected template rendered with Blaze.render");for(;e;){if(!e.isDestroyed){var t=e._domrange;t.attached&&!t.parentRange&&t.detach(),t.destroy()}e=e._hasGeneratedParent&&e.parentView}},f.toHTML=function(e,t){return t=t||n(),h.toHTML(f._expandView(i(e),t))},f.toHTMLWithData=function(e,t,r){return r=r||n(),h.toHTML(f._expandView(f._TemplateWith(t,o(e)),r))},f._toText=function(e,t,r){if("function"==typeof e)throw new Error("Blaze._toText doesn't take a function, just HTMLjs");if(null==t||t instanceof f.View||(r=t,t=null),t=t||n(),!r)throw new Error("textMode required");if(r!==h.TEXTMODE.STRING&&r!==h.TEXTMODE.RCDATA&&r!==h.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+r);return h.toText(f._expand(e,t),r)},f.getData=function(e){var t;if(e)if(e instanceof f.View){var n=e;t="with"===n.name?n:f.getView(n,"with")}else{if("number"!=typeof e.nodeType)throw new Error("Expected DOM element or View");if(1!==e.nodeType)throw new Error("Expected DOM element");t=f.getView(e,"with")}else t=f.getView("with");return t?t.dataVar.get():null},f.getElementData=function(e){if(f._warn("Blaze.getElementData has been deprecated.  Use Blaze.getData(element) instead."),1!==e.nodeType)throw new Error("Expected DOM element");return f.getData(e)},f.getView=function(e,t){var n=t;if("string"==typeof e&&(n=e,e=null),e){if(e instanceof f.View)return f._getParentView(e,n);if("number"==typeof e.nodeType)return f._getElementView(e,n);throw new Error("Expected DOM element or View")}return f._getCurrentView(n)},f._getCurrentView=function(e){var t=f.currentView;if(!t)throw new Error("There is no current view");if(e){for(;t&&t.name!==e;)t=t.parentView;return t||null}return t},f._getParentView=function(e,t){var n=e.parentView;if(t)for(;n&&n.name!==t;)n=n.parentView;return n||null},f._getElementView=function(e,t){for(var n=f._DOMRange.forElement(e),r=null;n&&!r;)(r=n.view||null)||(n=n.parentRange?n.parentRange:f._DOMRange.forElement(n.parentElement));if(t){for(;r&&r.name!==t;)r=r.parentView;return r||null}return r},f._addEventMap=function(e,t,n){n=n||null;var r=[];if(!e._domrange)throw new Error("View must have a DOMRange");e._domrange.onAttached(function i(a,o){c.each(t,function(t,i){var s=i.split(/,\s+/);c.each(s,function(i){var s=i.split(/\s+/);if(0!==s.length){var l=s.shift(),c=s.join(" ");r.push(f._EventSupport.listen(o,l,c,function(r){if(!a.containsElement(r.currentTarget))return null;var i=n||this,o=arguments;return f._withCurrentView(e,function(){return t.apply(i,o)})},a,function(e){return e.parentRange}))}})})}),e.onViewDestroyed(function(){c.each(r,function(e){e.stop()}),r.length=0})}}.call(this),function(){f._calculateCondition=function(e){return e instanceof Array&&0===e.length&&(e=!1),!!e},f.With=function(e,t){var n=f.View("with",t);return n.dataVar=new d,n.onViewCreated(function(){"function"==typeof e?n.autorun(function(){n.dataVar.set(e())},n.parentView,"setData"):n.dataVar.set(e)}),n},f._attachBindingsToView=function(e,t){t.onViewCreated(function(){c.each(e,function(e,n){t._scopeBindings[n]=new d,"function"==typeof e?t.autorun(function(){t._scopeBindings[n].set(e())},t.parentView):t._scopeBindings[n].set(e)})})},f.Let=function(e,t){var n=f.View("let",t);return f._attachBindingsToView(e,n),n},f.If=function(e,t,n,r){var i=new d,a=f.View(r?"unless":"if",function(){return i.get()?t():n?n():null});return a.__conditionVar=i,a.onViewCreated(function(){this.autorun(function(){var t=f._calculateCondition(e());i.set(r?!t:t)},this.parentView,"condition")}),a},f.Unless=function(e,t,n){return f.If(e,t,n,!0)},f.Each=function(e,t,n){var r=f.View("each",function(){var e=this.initialSubviews;return this.initialSubviews=null,this._isCreatedForExpansion&&(this.expandedValueDep=new a.Dependency,this.expandedValueDep.depend()),e});r.initialSubviews=[],r.numItems=0,r.inElseMode=!1,r.stopHandle=null,r.contentFunc=t,r.elseFunc=n,r.argVar=new d,r.variableName=null;var i=function(e,t){void 0===t&&(t=r.numItems-1);for(var n=e;n<=t;n++)r._domrange.members[n].view._scopeBindings["@index"].set(n)};return r.onViewCreated(function(){r.autorun(function(){var t=e();c.isObject(t)&&c.has(t,"_sequence")&&(r.variableName=t._variable||null,t=t._sequence),r.argVar.set(t)},r.parentView,"collection"),r.stopHandle=u.observe(function(){return r.argVar.get()},{addedAt:function(e,t,n){a.nonreactive(function(){var e;e=r.variableName?f.View("item",r.contentFunc):f.With(t,r.contentFunc),r.numItems++;var a={};if(a["@index"]=n,r.variableName&&(a[r.variableName]=t),f._attachBindingsToView(a,e),r.expandedValueDep)r.expandedValueDep.changed();else if(r._domrange){r.inElseMode&&(r._domrange.removeMember(0),r.inElseMode=!1);var o=f._materializeView(e,r);r._domrange.addMember(o,n),i(n)}else r.initialSubviews.splice(n,0,e)})},removedAt:function(e,t,n){a.nonreactive(function(){r.numItems--,r.expandedValueDep?r.expandedValueDep.changed():r._domrange?(r._domrange.removeMember(n),i(n),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r._domrange.addMember(f._materializeView(f.View("each_else",r.elseFunc),r),0))):r.initialSubviews.splice(n,1)})},changedAt:function(e,t,n,i){a.nonreactive(function(){if(r.expandedValueDep)r.expandedValueDep.changed();else{var e;e=r._domrange?r._domrange.getMember(i).view:r.initialSubviews[i],r.variableName?e._scopeBindings[r.variableName].set(t):e.dataVar.set(t)}})},movedTo:function(e,t,n,o){a.nonreactive(function(){if(r.expandedValueDep)r.expandedValueDep.changed();else if(r._domrange)r._domrange.moveMember(n,o),i(Math.min(n,o),Math.max(n,o));else{var e=r.initialSubviews,t=e[n];e.splice(n,1),e.splice(o,0,t)}})}}),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r.initialSubviews[0]=f.View("each_else",r.elseFunc))}),r.onViewDestroyed(function(){r.stopHandle&&r.stopHandle.stop()}),r},f._TemplateWith=function(e,t){var n,r=e;"function"!=typeof e&&(r=function(){return e});var i=function(){var e=null;return n.parentView&&"InOuterTemplateScope"===n.parentView.name&&(e=n.parentView.originalParentView),e?f._withCurrentView(e,r):r()},a=function(){var e=t.call(this);return e instanceof f.Template&&(e=e.constructView()),e instanceof f.View&&(e._hasGeneratedParent=!0),e};return n=f.With(i,a),n.__isTemplateWith=!0,n},f._InOuterTemplateScope=function(e,t){var n=f.View("InOuterTemplateScope",t),r=e.parentView;return r.__isTemplateWith&&(r=r.parentView),n.onViewCreated(function(){this.originalParentView=this.parentView,this.parentView=r,this.__childDoesntStartNewLexicalScope=!0}),n},f.InOuterTemplateScope=f._InOuterTemplateScope}.call(this),function(){f._globalHelpers={},f.registerHelper=function(e,t){f._globalHelpers[e]=t},f.deregisterHelper=function(e){delete f._globalHelpers[e]};var e=function(e,t){return"function"!=typeof e?e:f._bind(e,t)},t=function(e){return"function"==typeof e?function(){var t=f.getData();return null==t&&(t={}),e.apply(t,arguments)}:e};f._OLDSTYLE_HELPER={},f._getTemplateHelper=function(e,r,i){var a=!1;if(e.__helpers.has(r)){var o=e.__helpers.get(r);if(o!==f._OLDSTYLE_HELPER)return null!=o?n(t(o),i):null;a=!0}return r in e&&(a||(e.__helpers.set(r,f._OLDSTYLE_HELPER),e._NOWARN_OLDSTYLE_HELPERS||f._warn("Assigning helper with `"+e.viewName+"."+r+" = ...` is deprecated.  Use `"+e.viewName+".helpers(...)` instead.")),null!=e[r])?n(t(e[r]),i):null};var n=function(e,t){return"function"!=typeof e?e:function(){var n=this,r=arguments;return f.Template._withTemplateInstanceFunc(t,function(){return f._wrapCatchingExceptions(e,"template helper").apply(n,r)})}};f._lexicalBindingLookup=function(e,t){var n=e,r=[];do{if(c.has(n._scopeBindings,t)){var i=n._scopeBindings[t];return function(){return i.get()}}}while((!n.__startsNewLexicalScope||n.parentView&&n.parentView.__childDoesntStartNewLexicalScope)&&(n=n.parentView));return null},f._getTemplate=function(e,t){return e in f.Template&&f.Template[e]instanceof f.Template?f.Template[e]:null},f._getGlobalHelper=function(e,r){return null!=f._globalHelpers[e]?n(t(f._globalHelpers[e]),r):null},f.View.prototype.lookup=function(e,t){var n=this.template,r=t&&t.template,i,a,o,s;if(this.templateInstance&&(o=f._bind(this.templateInstance,this)),/^\./.test(e)){if(!/^(\.)+$/.test(e))throw new Error("id starting with dot must be a series of dots");return f._parentData(e.length-1,!0)}return n&&null!=(i=f._getTemplateHelper(n,e,o))?i:n&&null!=(a=f._lexicalBindingLookup(f.currentView,e))?a:r&&null!=(s=f._getTemplate(e,o))?s:null!=(i=f._getGlobalHelper(e,o))?i:function(){var t=arguments.length>0,n=f.getData(),i=n&&n[e];if(!i){if(r)throw new Error("No such template: "+e);if(t)throw new Error("No such function: "+e);if("@"===e.charAt(0)&&(null===i||void 0===i))throw new Error("Unsupported directive: "+e)}if(!n)return null;if("function"!=typeof i){if(t)throw new Error("Can't call non-function: "+i);return i}return i.apply(n,arguments)}},f._parentData=function(e,t){null==e&&(e=1);for(var n=f.getView("with"),r=0;r<e&&n;r++)n=f.getView(n,"with");return n?t?function(){return n.dataVar.get()}:n.dataVar.get():null},f.View.prototype.lookupTemplate=function(e){return this.lookup(e,{template:!0})}}.call(this),function(){f.Template=function(e,n){if(!(this instanceof f.Template))return new f.Template(e,n);if("function"==typeof e&&(n=e,e=""),"string"!=typeof e)throw new Error("viewName must be a String (or omitted)");if("function"!=typeof n)throw new Error("renderFunction must be a function");this.viewName=e,this.renderFunction=n,this.__helpers=new t,this.__eventMaps=[],this._callbacks={created:[],rendered:[],destroyed:[]}};var e=f.Template,t=function(){};t.prototype.get=function(e){return this[" "+e]},t.prototype.set=function(e,t){this[" "+e]=t},t.prototype.has=function(e){return" "+e in this},f.isTemplate=function(e){return e instanceof f.Template},e.prototype.onCreated=function(e){this._callbacks.created.push(e)},e.prototype.onRendered=function(e){this._callbacks.rendered.push(e)},e.prototype.onDestroyed=function(e){this._callbacks.destroyed.push(e)},e.prototype._getCallbacks=function(e){var t=this,n=t[e]?[t[e]]:[];return n=n.concat(t._callbacks[e])};var n=function(t,n){e._withTemplateInstanceFunc(function(){return n},function(){for(var e=0,r=t.length;e<r;e++)t[e].call(n)})};e.prototype.constructView=function(t,r){var i=this,a=f.View(i.viewName,i.renderFunction);a.template=i,a.templateContentBlock=t?new e("(contentBlock)",t):null,a.templateElseBlock=r?new e("(elseBlock)",r):null,(i.__eventMaps||"object"==typeof i.events)&&a._onViewRendered(function(){1===a.renderCount&&(i.__eventMaps.length||"object"!=typeof i.events||e.prototype.events.call(i,i.events),c.each(i.__eventMaps,function(e){f._addEventMap(a,e,a)}))}),a._templateInstance=new f.TemplateInstance(a),a.templateInstance=function(){var e=a._templateInstance;return e.data=f.getData(a),a._domrange&&!a.isDestroyed?(e.firstNode=a._domrange.firstNode(),e.lastNode=a._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e};var o=i._getCallbacks("created");a.onViewCreated(function(){n(o,a.templateInstance())});var s=i._getCallbacks("rendered");a.onViewReady(function(){n(s,a.templateInstance())});var l=i._getCallbacks("destroyed");return a.onViewDestroyed(function(){n(l,a.templateInstance())}),a},f.TemplateInstance=function(e){if(!(this instanceof f.TemplateInstance))return new f.TemplateInstance(e);if(!(e instanceof f.View))throw new Error("View required");e._templateInstance=this,this.view=e,this.data=null,this.firstNode=null,this.lastNode=null,this._allSubsReadyDep=new a.Dependency,this._allSubsReady=!1,this._subscriptionHandles={}},f.TemplateInstance.prototype.$=function(e){var t=this.view;if(!t._domrange)throw new Error("Can't use $ on template instance with no DOM");return t._domrange.$(e)},f.TemplateInstance.prototype.findAll=function(e){return Array.prototype.slice.call(this.$(e))},f.TemplateInstance.prototype.find=function(e){return this.$(e)[0]||null},f.TemplateInstance.prototype.autorun=function(e){return this.view.autorun(e)},f.TemplateInstance.prototype.subscribe=function(){var e=this,t=e._subscriptionHandles,n=c.toArray(arguments),r={};if(n.length){var i=c.last(n),a={onReady:l.Optional(Function),onError:l.Optional(Function),onStop:l.Optional(Function),connection:l.Optional(l.Any)};c.isFunction(i)?r.onReady=n.pop():i&&!c.isEmpty(i)&&l.test(i,a)&&(r=n.pop())}var o,s=r.onStop;r.onStop=function(n){delete t[o.subscriptionId],e._allSubsReady||e._allSubsReadyDep.changed(),s&&s(n)};var u=r.connection,d=c.pick(r,["onReady","onError","onStop"]);return n.push(d),o=e.view.subscribe.call(e.view,n,{connection:u}),c.has(t,o.subscriptionId)||(t[o.subscriptionId]=o,e._allSubsReady&&e._allSubsReadyDep.changed()),o},f.TemplateInstance.prototype.subscriptionsReady=function(){return this._allSubsReadyDep.depend(),this._allSubsReady=c.all(this._subscriptionHandles,function(e){return e.ready()}),this._allSubsReady},e.prototype.helpers=function(e){if(!c.isObject(e))throw new Error("Helpers dictionary has to be an object");for(var t in e)this.__helpers.set(t,e[t])},e._currentTemplateInstanceFunc=null,e._withTemplateInstanceFunc=function(t,n){if("function"!=typeof n)throw new Error("Expected function, got: "+n);var r=e._currentTemplateInstanceFunc;try{return e._currentTemplateInstanceFunc=t,n()}finally{e._currentTemplateInstanceFunc=r}},e.prototype.events=function(t){if(!c.isObject(t))throw new Error("Event map has to be an object");var n=this,r={};for(var i in t)r[i]=function(t,n){return function(t){var r=this,i=f.getData(t.currentTarget);null==i&&(i={});var a=Array.prototype.slice.call(arguments),o=f._bind(r.templateInstance,r);return a.splice(1,0,o()),e._withTemplateInstanceFunc(o,function(){return n.apply(i,a)})}}(i,t[i]);n.__eventMaps.push(r)},e.instance=function(){return e._currentTemplateInstanceFunc&&e._currentTemplateInstanceFunc()},e.currentData=f.getData,e.parentData=f._parentData,e.registerHelper=f.registerHelper,e.deregisterHelper=f.deregisterHelper}.call(this),function(){_=f,f.ReactiveVar=d,_._templateInstance=f.Template.instance,(v={}).registerHelper=f.registerHelper,v._escape=f._escape,v.SafeString=function(e){this.string=e},v.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.blaze={},{Blaze:f,UI:_,Handlebars:v})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package["observe-sequence"].ObserveSequence,a=Package.underscore._,u=Package.tracker.Tracker,i=Package.tracker.Deps,c=Package.htmljs.HTML,l=Package.blaze.Blaze,o=Package.blaze.UI,f=Package.blaze.Handlebars,p;(function(){var e=function(e,t){return e===t};(p={}).include=function(t,n,r){if(!t)return null;if("function"!=typeof t){var a=t;if(!l.isTemplate(a))throw new Error("Expected template or null, found: "+a);return(i=t.constructView(n,r)).__startsNewLexicalScope=!0,i}var u=l.ReactiveVar(null,e),i=l.View("Spacebars.include",function(){var e=u.get();if(null===e)return null;if(!l.isTemplate(e))throw new Error("Expected template or null, found: "+e);return e.constructView(n,r)});return i.__templateVar=u,i.onViewCreated(function(){this.autorun(function(){u.set(t())})}),i.__startsNewLexicalScope=!0,i},p.mustacheImpl=function(e){var t=arguments;if(t.length>1){var n=t[t.length-1];if(n instanceof p.kw){var r={};for(var a in n.hash){var u=n.hash[a];r[a]="function"==typeof u?u():u}t[t.length-1]=p.kw(r)}else n=p.kw(),(t=Array.prototype.slice.call(arguments)).push(n)}return p.call.apply(null,t)},p.mustache=function(e){var t=p.mustacheImpl.apply(null,arguments);return t instanceof p.SafeString?c.Raw(t.toString()):null==t||!1===t?null:String(t)},p.attrMustache=function(e){var t=p.mustacheImpl.apply(null,arguments);if(null==t||""===t)return null;if("object"==typeof t)return t;if("string"==typeof t&&c.isValidAttributeName(t)){var n={};return n[t]="",n}throw new Error("Expected valid attribute name, '', null, or object")},p.dataMustache=function(e){return p.mustacheImpl.apply(null,arguments)},p.makeRaw=function(e){return null==e?null:e instanceof c.Raw?e:c.Raw(e)},p.call=function(e){if("function"==typeof e){for(var t=[],n=1;n<arguments.length;n++){var r=arguments[n];t[n-1]="function"==typeof r?r():r}return e.apply(null,t)}if(null!=e&&arguments.length>1)throw new Error("Can't call non-function: "+e);return e},p.kw=function(e){if(!(this instanceof p.kw))return new p.kw(e);this.hash=e||{}},p.SafeString=function(e){return this instanceof p.SafeString?new f.SafeString(e):new p.SafeString(e)},p.SafeString.prototype=f.SafeString.prototype,p.dot=function(e,t){if(arguments.length>2){var n=[];return n.push(p.dot(e,t)),n.push.apply(n,Array.prototype.slice.call(arguments,2)),p.dot.apply(null,n)}if("function"==typeof e&&(e=e()),!e)return e;var r=e[t];return"function"!=typeof r?r:function(){return r.apply(e,arguments)}},p.With=function(e,t,n){var r=new l.ReactiveVar,a=l.View("Spacebars_with",function(){return l.If(function(){return r.get()},function(){return l.With(function(){return r.get()},t)},n)});return a.onViewCreated(function(){this.autorun(function(){r.set(e()),u.onInvalidate(function(){r.dep.changed()})})}),a},p.TemplateWith=l._TemplateWith}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.spacebars={},{Spacebars:p})}();

"undefined"==typeof Package&&(Package={}),Package["templating-compiler"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,o=Package.blaze.Blaze,c=Package.blaze.UI,r=Package.blaze.Handlebars,i=Package.spacebars.Spacebars,u=Package.htmljs.HTML,l;(function(){l=o.Template;var e="__proto__ name".split(" ");l.__checkName=function(t){if(t in l||a.contains(e,t)){if(l[t]instanceof l&&"body"!==t)throw new Error("There are multiple templates named '"+t+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+t)}},l.__define__=function(e,t){l.__checkName(e),l[e]=new l("Template."+e,t),l[e]._NOWARN_OLDSTYLE_HELPERS=!0},l.body=new l("body",function(){var e=this;return a.map(l.body.contentRenderFuncs,function(t){return t.apply(e)})}),l.body.contentRenderFuncs=[],l.body.view=null,l.body.addContent=function(e){l.body.contentRenderFuncs.push(e)},l.body.renderToDocument=function(){if(!l.body.view){var e=o.render(l.body,document.body);l.body.view=e}},c.body=l.body,l.__body__=l.body,l.__body__.__contentParts=l.body.contentViews,l.__body__.__instantiate=l.body.renderToDocument}).call(this),function(){l.__checkName("__dynamic"),l.__dynamic=new l("Template.__dynamic",function(){var e=this;return[o.View("lookup:checkContext",function(){return i.mustache(e.lookup("checkContext"))}),"\n  ",o.If(function(){return i.call(e.lookup("dataContextPresent"))},function(){return["\n    ",i.include(e.lookupTemplate("__dynamicWithDataContext"),function(){return o._InOuterTemplateScope(e,function(){return i.include(function(){return i.call(e.templateContentBlock)})})}),"\n  "]},function(){return["\n    \n    ",o._TemplateWith(function(){return{template:i.call(e.lookup("template")),data:i.call(e.lookup(".."))}},function(){return i.include(e.lookupTemplate("__dynamicWithDataContext"),function(){return o._InOuterTemplateScope(e,function(){return i.include(function(){return i.call(e.templateContentBlock)})})})}),"\n  "]})]}),l.__checkName("__dynamicWithDataContext"),l.__dynamicWithDataContext=new l("Template.__dynamicWithDataContext",function(){var e=this;return i.With(function(){return i.dataMustache(e.lookup("chooseTemplate"),e.lookup("template"))},function(){return["\n    \n    ",o._TemplateWith(function(){return i.call(i.dot(e.lookup(".."),"data"))},function(){return i.include(e.lookupTemplate(".."),function(){return o._InOuterTemplateScope(e,function(){return i.include(function(){return i.call(e.templateContentBlock)})})})}),"\n  "]})})}.call(this),function(){var e=o.Template;e.__dynamicWithDataContext.helpers({chooseTemplate:function(t){return o._getTemplate(t,function(){return e.instance()})}}),e.__dynamic.helpers({dataContextPresent:function(){return a.has(this,"data")},checkContext:function(){if(!a.has(this,"template"))throw new Error("Must specify name in the 'template' argument to {{> Template.dynamic}}.");a.each(this,function(e,t){if("template"!==t&&"data"!==t)throw new Error("Invalid argument to {{> Template.dynamic}}: "+t)})}})}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["templating-runtime"]={},{Template:l})}();

!function(){var a=Package["templating-runtime"].Template;"undefined"==typeof Package&&(Package={}),function(a,e){for(var n in e)n in a||(a[n]=e[n])}(Package.templating={},{Template:a})}();

!function(){var a=Package.blaze.Blaze,e=Package.blaze.UI,n=Package.blaze.Handlebars;"undefined"==typeof Package&&(Package={}),function(a,e){for(var n in e)n in a||(a[n]=e[n])}(Package.ui={},{Blaze:a,UI:e,Handlebars:n})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.underscore._,o=Package.ejson.EJSON,i;(function(){if(Package["cmather:iron-core"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){(i={}).utils={},i.utils.assert=function(e,t){if(!e)throw new Error(t)},i.utils.warn=function(e,t){e||console&&console.warn&&console.warn(t)},i.utils.defaultValue=function(e,t,n){return void 0===e[t]?(e[t]=n,n):e[t]},i.utils.inherits=function(e,t,n){i.utils.assert(void 0!==e,"Child is undefined in inherits function"),i.utils.assert(void 0!==t,"Parent is undefined in inherits function");for(var a in t)r.has(t,a)&&(e[a]=o.clone(t[a]));var s=function(){this.constructor=e};return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,r.isObject(n)&&r.extend(e.prototype,n),e},i.utils.extend=function(e,t){t=t||{};var n=function(){var e;(e=r.has(t,"constructor")?t.constructor:n.__super__.constructor).apply(this,arguments)};return i.utils.inherits(n,e,t)},i.utils.global=e.isClient?window:t,i.utils.namespace=function(e,t){var n=i.utils.global,r,o,a,s;i.utils.assert("string"==typeof e,"namespace must be a string"),a=(r=e.split(".")).pop(),s=n;for(var c=0;c<r.length;c++)s=s[o=r[c]]=s[o]||{};return 2===arguments.length?(s[a]=t,t):s[a]},i.utils.resolve=function(e){var t=i.utils.global,n,r;if("string"==typeof e){n=e.split("."),r=t;for(var o=0;o<n.length;o++)if(!(r=r[n[o]]))return}else r=e;return r},i.utils.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1,e.length)},i.utils.classCase=function(e){var t=/_|-|\.|\//;return e?r.map(e.split(t),function(e){return i.utils.capitalize(e)}).join(""):""},i.utils.camelCase=function(e){var t=i.utils.classCase(e);return t=t.charAt(0).toLowerCase()+t.slice(1,t.length)},i.utils.notifyDeprecated=function(e){var t,n,o,i,a="[:where] ':name' is deprecated. Please use ':instead' instead.";r.isObject(e)?(t=e.name,n=e.instead,o=e.message||a,i=e.where||"IronRouter"):(o=e,t="",n="",i=""),"undefined"!=typeof console&&console.warn&&console.warn("<deprecated> "+o.replace(":name",t).replace(":instead",n).replace(":where",i)+" "+(new Error).stack)},i.utils.withDeprecatedNotice=function(e,t,n){return function(){return Utils.notifyDeprecated(e),t&&t.apply(n||this,arguments)}},Function.prototype.deprecate=function(e){var t=this;return i.utils.withDeprecatedNotice(e,t)},i.utils.debug=function(e){return i.utils.assert("string"==typeof e,"debug requires a package name"),function t(){if(console&&console.log&&!0===i.debug){var n=r.toArray(arguments).join(" ");console.log("%c<"+e+"> %c"+n,"color: #999;","color: #000;")}}},i.utils.get=function(e){for(var t=1;t<arguments.length;t++){if(!(e&&arguments[t]in e))return;e=e[arguments[t]]}return e},i.utils.global.Iron=i}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["iron:core"]={},{Iron:i})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.ui.Blaze,r=Package.ui.UI,i=Package.ui.Handlebars,o=Package.underscore._,s=Package.jquery.$,u=Package.jquery.jQuery,c=Package.tracker.Tracker,l=Package.tracker.Deps,p=Package["reactive-var"].ReactiveVar,h=Package["templating-runtime"].Template,d=Package.random.Random,m=Package["iron:core"].Iron,_=Package.htmljs.HTML,f=Package.spacebars.Spacebars,v;(function(){if(Package["cmather:iron-dynamic-template"])throw new Error("\n\n    Sorry! The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  ")}).call(this),function(){h.__checkName("__DynamicTemplateError__"),h.__DynamicTemplateError__=new h("Template.__DynamicTemplateError__",function(){var e=this;return _.DIV({style:"margin: 0 auto; color: red;"},"\n    ",a.View("lookup:msg",function(){return f.mustache(e.lookup("msg"))}),"\n  ")})}.call(this),function(){var e=m.utils.debug("iron:dynamic-template"),t=m.utils.assert,n=m.utils.get,i=m.utils.camelCase,u=function(e){return Object.prototype.toString.call(e)};(v=function(e){this._id=d.id(),this.options=e=e||{},this._template=e.template,this._defaultTemplate=e.defaultTemplate,this._content=e.content,this._data=e.data,this._templateDep=new c.Dependency,this._dataDep=new c.Dependency,this._lookupHostDep=new c.Dependency,this._lookupHostValue=null,this._hooks={},this._eventMap=null,this._eventHandles=null,this._eventThisArg=null,this.name=e.name||this.constructor.prototype.name||"DynamicTemplate",this.isCreated=!1,this.isDestroyed=!1}).prototype.template=function(e){if(1===arguments.length&&e!==this._template)return this._template=e,void this._templateDep.changed();if(!(arguments.length>0))return this._templateDep.depend(),this._template?"function"==typeof this._template?this._template():this._template:this._defaultTemplate?"function"==typeof this._defaultTemplate?this._defaultTemplate():this._defaultTemplate:void 0},v.prototype.defaultTemplate=function(e){if(1!==arguments.length)return this._defaultTemplate;this._defaultTemplate=e},v.prototype.clear=function(){this._template=void 0,this._data=void 0,this._templateDep.changed()},v.prototype.data=function(e){return 1===arguments.length&&e!==this._data?(this._data=e,void this._dataDep.changed()):(this._dataDep.depend(),"function"==typeof this._data?this._data():this._data)},v.prototype.create=function(e){var t=this;if(this.isCreated)throw new Error("DynamicTemplate view is already created");this.isCreated=!0,this.isDestroyed=!1;var n=p(null),r=a.View("DynamicTemplate",function(){var e=this,r=n.get();return a.With(function(){var n=t.data();return void 0!==n?n:v.getParentDataContext(e)},function(){return t.renderView(r)})});return r.onViewCreated(function(){this.autorun(function(){n.set(t.template())})}),o.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){r[e](function(){t._runHooks(e,this)})}),r._onViewRendered(function(){t.isInserted=!0,1===r.renderCount&&t._attachEvents()}),r.onViewDestroyed(function(){t._detachEvents()}),r._templateInstance=new a.TemplateInstance(r),r.templateInstance=function(){var e=r._templateInstance;return e.data=a.getData(r),r._domrange&&!r.isDestroyed?(e.firstNode=r._domrange.firstNode(),e.lastNode=r._domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},this.view=r,r.__dynamicTemplate__=this,r.name=this.name,r},v.prototype.renderView=function(e){var t=this,n=null;return"string"==typeof e?((n=h[e])||(n=h[i(e)]),n||(n=a.With({msg:"Couldn't find a template named "+JSON.stringify(e)+" or "+JSON.stringify(i(e))+". Are you sure you defined it?"},function(){return h.__DynamicTemplateError__}))):"[object Object]"===u(e)?n=e:void 0!==t._content&&(n=t._content),n},v.prototype.destroy=function(){this.isCreated&&(a.remove(this.view),this.view=null,this.isDestroyed=!0,this.isCreated=!1)},o.each(["onViewCreated","onViewReady","_onViewRendered","onViewDestroyed"],function(e){v.prototype[e]=function(t){return(this._hooks[e]=this._hooks[e]||[]).push(t),this}}),v.prototype._runHooks=function(e,t){for(var n=this._hooks[e]||[],a,r=0;r<n.length;r++)(a=n[r]).call(t,this)},v.prototype.events=function(e,t){var n=this;this._detachEvents(),this._eventThisArg=t;var r=this._eventMap={};for(var i in e)r[i]=function(e,r){return function(e){var i=a.getData(e.currentTarget);null==i&&(i={});var o=n.view.templateInstance();return r.call(t||this,e,o,i)}}(i,e[i]);this._attachEvents()},v.prototype._attachEvents=function(){var e=this,t=e._eventThisArg,n=e._eventMap,r=e.view,i=e._eventHandles;if(r){var s=r._domrange;if(!s)throw new Error("no domrange");var u=function(t,s){o.each(n,function(n,u){var c=u.split(/,\s+/);o.each(c,function(o){var u=o.split(/\s+/);if(0!==u.length){var c=u.shift(),l=u.join(" ");i.push(a._EventSupport.listen(s,c,l,function(i){if(!t.containsElement(i.currentTarget))return null;var o=e._eventThisArg||this,s=arguments;return a._withCurrentView(r,function(){return n.apply(o,s)})},t,function(e){return e.parentRange}))}})})};s.attached?u(s,s.parentElement):s.onAttached(u)}},v.prototype._detachEvents=function(){o.each(this._eventHandles,function(e){e.stop()}),this._eventHandles=[]};var _=function(e,t,n,r){o.each(n,function(n,i){var s=i.split(/,\s+/);o.each(s,function(i){var o=i.split(/\s+/);if(0!==o.length){var s=o.shift(),u=o.join(" ");handles.push(a._EventSupport.listen(t,s,u,function(t){if(!e.containsElement(t.currentTarget))return null;var i=r||this,o=arguments;return a._withCurrentView(view,function(){return n.apply(i,o)})},e,function(e){return e.parentRange}))}})})};v.prototype.insert=function(e){if(e=e||{},!this.isInserted){this.isInserted=!0;var t=e.el||document.body,n=s(t);if(0===n.length)throw new Error("No element to insert layout into. Is your element defined? Try a Meteor.startup callback.");return this.view||this.create(e),a.render(this.view,n[0],e.nextNode,e.parentView),this}},v.prototype._getLookupHost=function(){return this._lookupHostValue},v.prototype._setLookupHost=function(e){var t=this;return t._lookupHostValue!==e&&(t._lookupHostValue=e,l.afterFlush(function(){t._lookupHostDep.changed()})),this},v.getParentDataContext=function(e){return v.getDataContext(e&&e.parentView)},v.getDataContext=function(e){for(;e;){if("with"===e.name&&!e.__isTemplateWith)return e.dataVar.get();e=e.parentView}return null},v.getInclusionArguments=function(e){var t=e&&e.parentView;return t&&t.__isTemplateWith?t.dataVar.get():null},v.args=function(e){return function(t){var n=v.getInclusionArguments(e);return n?t?n[t]:n:null}},v.extend=function(e){return m.utils.extend(this,e)},v.findFirstLookupHost=function(e){var n,r;for(t(e instanceof a.View,"view must be a Blaze.View");e;)if(e.__dynamicTemplate__){if(n=e.__dynamicTemplate__._getLookupHost())return n}else e=e.parentView},v.findLookupHostWithProperty=function(e,r){var i,o;for(t(e instanceof a.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__&&(i=e.__dynamicTemplate__._getLookupHost())&&n(i,r))return i;e=e.parentView}},v.findLookupHostWithHelper=function(e,r){var i,o;for(t(e instanceof a.View,"view must be a Blaze.View");e;){if(e.__dynamicTemplate__&&(i=e.__dynamicTemplate__._getLookupHost())&&n(i,"constructor","_helpers",r))return i;e=e.parentView}},void 0!==h&&r.registerHelper("DynamicTemplate",new h("DynamicTemplateHelper",function(){var e=v.args(this);return new v({data:function(){return e("data")},template:function(){return e("template")},content:this.templateContentBlock}).create()})),m.DynamicTemplate=v}.call(this),function(){var e=m.utils.assert,t=m.utils.get,n=a.View.prototype.lookup;a.View.prototype.lookup=function(e){var r;return(r=v.findLookupHostWithHelper(a.getView(),e))?function n(){var a=t(r,"constructor","_helpers",e),i=[].slice.call(arguments);return"function"==typeof a?a.apply(r,i):a}:n.apply(this,arguments)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:dynamic-template"]={}}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,r=Package["templating-runtime"].Template,o=Package.blaze.Blaze,i=Package.blaze.UI,a=Package.blaze.Handlebars,s=Package.underscore._,c=Package.tracker.Tracker,u=Package.tracker.Deps,h=Package["iron:core"].Iron,l=Package.htmljs.HTML,g=Package.spacebars.Spacebars,d,p,m;(function(){var e=[];if(Package["cmather:iron-layout"]&&e.push("\n\n    The cmather:iron-{x} packages were migrated to the new package system with the wrong name, and you have duplicate copies.\n    You can see which cmather:iron-{x} packages have been installed by using this command:\n\n    > meteor list\n\n    Can you remove any installed cmather:iron-{x} packages like this:    \n\n    > meteor remove cmather:iron-core\n    > meteor remove cmather:iron-router\n    > meteor remove cmather:iron-dynamic-template\n    > meteor remove cmather:iron-dynamic-layout\n    \n    The new packages are named iron:{x}. For example:\n\n    > meteor add iron:router\n\n    Sorry for the hassle, but thank you!    \n\n  "),Package["cmather:blaze-layout"]&&e.push("The blaze-layout package has been replaced by iron-layout. Please remove the package like this:\n> meteor remove cmather:blaze-layout\n"),e.length>0)throw new Error("Sorry! Looks like there's a few errors related to iron:layout\n\n"+e.join("\n\n"))}).call(this),function(){r.__checkName("__IronDefaultLayout__"),r.__IronDefaultLayout__=new r("Template.__IronDefaultLayout__",function(){var e=this;return g.include(e.lookupTemplate("yield"))})}.call(this),function(){var e=h.DynamicTemplate,n=h.utils.inherits;d=function(e){for(;e;){if("Iron.Layout"===e.name)return e.__dynamicTemplate__;e=e.parentView}return null},m=(p=function(e){var n=this;p.__super__.constructor.apply(this,arguments),e=e||{},this.name="Iron.Layout",this._regions={},this._regionHooks={},this.defaultTemplate("__IronDefaultLayout__"),e.content&&this.render(e.content)}).DEFAULT_REGION="main",n(p,h.DynamicTemplate),p.prototype.region=function(e,n){return this._ensureRegion(e,n)},p.prototype.destroyRegions=function(){s.each(this._regions,function(e){e.destroy()}),this._regions={}},p.prototype.render=function(e,n){var t=(n=n||{}).to||n.region||m,r=this.region(t);this._trackRenderedRegion(t),r.template(e),r.data(n.data)},p.prototype.has=function(e){return e=e||p.DEFAULT_REGION,!!this._regions[e]},p.prototype.regionKeys=function(){return s.keys(this._regions)},p.prototype.clear=function(e){return e=e||p.DEFAULT_REGION,this.has(e)&&this.region(e).template(null),this},p.prototype.clearAll=function(){return s.each(this._regions,function(e){e.template(null)}),this},p.prototype.beginRendering=function(e){var n=this;if(this._finishRenderingTransaction&&this._finishRenderingTransaction(),this._finishRenderingTransaction=s.once(function(){var t=n._endRendering({flush:!1});e&&e(t)}),u.afterFlush(this._finishRenderingTransaction),this._renderedRegions)throw new Error("You called beginRendering again before calling endRendering");this._renderedRegions={}},p.prototype._trackRenderedRegion=function(e){this._renderedRegions&&(this._renderedRegions[e]=!0)},p.prototype._endRendering=function(e){!1!==(e=e||{}).flush&&u.flush();var n=this._renderedRegions||{};return this._renderedRegions=null,s.keys(n)},s.each(["onRegionCreated","onRegionRendered","onRegionDestroyed"],function(e){p.prototype[e]=function(n){return(this._regionHooks[e]=this._regionHooks[e]||[]).push(n),this}}),p.prototype._ensureRegion=function(e,n){return this._regions[e]=this._regions[e]||this._createDynamicTemplate(e,n)},p.prototype._createDynamicTemplate=function(e,n){var t=this,r=new h.DynamicTemplate(n),o=h.utils.capitalize;return r._region=e,s.each(["viewCreated","viewReady","viewDestroyed"],function(e){e=o(e),r["on"+e](function(n){var r=this,o={viewCreated:"regionCreated",viewReady:"regionRendered",viewDestroyed:"regionDestroyed"}[e];t._runRegionHooks("on"+o,r,n)})}),r},p.prototype._runRegionHooks=function(e,n,t){for(var r=this,o=this._regionHooks[e]||[],i,a=0;a<o.length;a++)(i=o[a]).call(n,t.region,t,this)},void 0!==r&&(i.registerHelper("yield",new r("yield",function(){var n=d(this);if(!n)throw new Error("No Iron.Layout found so you can't use yield!");var t=e.getInclusionArguments(this),r,o;return s.isString(t)?r=t:s.isObject(t)&&(r=t.region),r=r||m,(o=n.region(r)).isCreated&&o.destroy(),o.create()})),i.registerHelper("contentFor",new r("contentFor",function(){var n=d(this);if(!n)throw new Error("No Iron.Layout found so you can't use contentFor!");var t=e.getInclusionArguments(this)||{},r=this.templateContentBlock,o=t.template,i=t.data,a;if(s.isString(t))a=t;else{if(!s.isObject(t))throw new Error("Which region is this contentFor block supposed to be for?");a=t.region}return n.region(a).template(o||r),n._trackRenderedRegion(a),i&&n.region(a).data(i),null})),i.registerHelper("hasRegion",function(e){var n=d(o.getView());if(!n)throw new Error("No Iron.Layout found so you can't use hasRegion!");if(!s.isString(e))throw new Error("You need to provide an region argument to hasRegion");return!!n.region(e).template()}),i.registerHelper("Layout",new r("layout",function(){var e=h.DynamicTemplate.args(this);return new p({template:function(){return e("template")},data:function(){return e("data")},content:this.templateContentBlock}).create()}))),h.Layout=p}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:layout"]={}}();

!function(){var e=Package.meteor.Meteor,r=Package.meteor.global,t=Package.meteor.meteorEnv,n=Package.underscore._,i=Package["iron:core"].Iron,o,a;(function(){function e(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function r(o,a,s){a&&"[object Array]"!==t(a)&&(s=a,a=null),a=a||[];var c=(s=s||{}).strict,u=!1!==s.end,p=s.sensitive?"":"i",l=0;if(o instanceof RegExp){var h=o.source.match(/\((?!\?)/g)||[];return a.push.apply(a,h.map(function(e,r){return{name:r,delimiter:null,optional:!1,repeat:!1}})),i(o,a)}if("[object Array]"===t(o))return o=o.map(function(e){return r(e,a,s).source}),i(new RegExp("(?:"+o.join("|")+")",p),a);var f="/"===(o=o.replace(n,function(r,t,n,i,o,s,c,u){if(t)return t;if(u)return"\\"+u;var p="+"===c||"*"===c,h="?"===c||"*"===c;return a.push({name:i||l++,delimiter:n||"/",optional:h,repeat:p}),n=n?"\\"+n:"",o=e(o||s||"[^"+(n||"\\/")+"]+?"),p&&(o=o+"(?:"+n+o+")*"),h?"(?:"+n+"("+o+"))?":n+"("+o+")"}))[o.length-1];return c||(o=(f?o.slice(0,-2):o)+"(?:\\/(?=$))?"),u||(o+=c&&f?"":"(?=\\/|$)"),i(new RegExp("^"+o+(u?"$":""),p),a)}var t=function(e){return Object.prototype.toString.call(e)},n=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),i=function(e,r){return e.keys=r,e};o=r}).call(this),function(){function e(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(r){return void(r.constructor==URIError&&t("Tried to decode an invalid URI component: "+JSON.stringify(e)+" "+r.stack))}}function r(e){try{return decodeURI(e.replace(/\+/g," "))}catch(r){return void(r.constructor==URIError&&t("Tried to decode an invalid URI: "+JSON.stringify(e)+" "+r.stack))}}var t=i.utils.warn;(a=function(e,r){r=r||{},this.options=r,this.keys=[],this.regexp=o(e,this.keys,r),this._originalPath=e,n.extend(this,a.parse(e))}).normalize=function(e){if(e instanceof RegExp)return e;if("string"!=typeof e)return"/";var r=a.parse(e).pathname;return"/"!==r.charAt(0)&&(r="/"+r),r.length>1&&"/"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1)),r},a.isSameOrigin=function(e,r){var t=a.parse(e),n=a.parse(r);return t.origin===n.origin},a.fromQueryString=function(r){if(!r)return{};if("string"!=typeof r)throw new Error("expected string");"?"===r.charAt(0)&&(r=r.slice(1));var t=r.split("&"),i={},o;return n.each(t,function(r){var t=r.split("="),n=e(t[0]),o=e(t[1]);void 0!==n&&void 0!==o&&"[]"===n.slice(-2)?(n=n.slice(0,-2),i[n]=i[n]||[],i[n].push(o)):i[n]=o}),i},a.toQueryString=function(e){var r=[];return"string"==typeof e?"?"!==e.charAt(0)?"?"+e:e:(n.each(e,function(e,t){n.isArray(e)?n.each(e,function(e){r.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e))}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}),r.length>0?"?"+r.join("&"):"")},a.parse=function(e){if("string"!=typeof e)return{};var r=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=e.match(r),n=t[1]?t[1].toLowerCase():void 0,i=!!t[3],o=t[4]?t[4].toLowerCase():void 0,s=o?o.split("@"):[],c,u;2==s.length?(u=s[0],c=s[1]):1==s.length?(c=s[0],u=void 0):(c=void 0,u=void 0);var p=c&&c.split(":")||[],l=p[0],h=p[1],f=n&&c?n+"//"+c:void 0,g=t[5],d=t[8],m=e,v=t[6],y,w=d&&d.indexOf("?")||-1;~w&&!v?(v=d.slice(w),d=d.substr(0,w),y=v.slice(1)):y=t[7];var R=g+(v||""),x=a.fromQueryString(y),U=[n||"",i?"//":"",o||""].join(""),S=[n||"",i?"//":"",o||"",g||"",v||"",d||""].join("");return{rootUrl:U||"",originalUrl:e||"",href:S||"",protocol:n||"",auth:u||"",host:c||"",hostname:l||"",port:h||"",origin:f||"",path:R||"",pathname:g||"",search:v||"",query:y||"",queryObject:x||"",hash:d||"",slashes:i}},a.prototype.test=function(e){return this.regexp.test(a.normalize(e))},a.prototype.exec=function(e){return this.regexp.exec(a.normalize(e))},a.prototype.params=function(t){if(!t)return[];var n=[],i=this.exec(t),o,s=this.keys,c,u;if(!i)throw new Error('The route named "'+this.name+'" does not match the path "'+t+'"');for(var p=1,l=i.length;p<l;++p)c=s[p-1],u="string"==typeof i[p]?e(i[p]):i[p],c?n[c.name]=void 0!==n[c.name]?n[c.name]:u:n.push(u);return void 0!==r(t)&&((o=t.split("?")[1])&&(o=o.split("#")[0]),n.hash=t.split("#")[1]||null,n.query=a.fromQueryString(o)),n},a.prototype.resolve=function(e,r){var t,i,o,s=0,c=this._originalPath,u,p,l=[],h=e;if(r=r||{},e=e||[],p=r.query,u=r.hash&&r.hash.toString(),c instanceof RegExp)throw new Error("Cannot currently resolve a regular expression path");if(c=c.replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(r,o,a,s,c,u,p){if(o=o||"",a=a||"",t=e[s],i=void 0!==t,u&&!i)t="";else if(!i)return void l.push(s);return t=n.isFunction(t)?t.call(e):t,o+a+n.map(String(t).split("/"),function(e){return encodeURIComponent(e)}).join("/")}).replace(/\*/g,function(r){if(void 0===e[s])throw new Error("You are trying to access a wild card parameter at index "+s+" but the value of params at that index is undefined");var t=String(e[s++]);return n.map(t.split("/"),function(e){return encodeURIComponent(e)}).join("/")}),c+=p=a.toQueryString(p),u&&(c=c+"#"+(u=encodeURI(u.replace("#","")))),c=c.replace(/\/+/g,"/"),c=c.replace(/^(.+)\/$/g,"$1"),0==l.length)return c;if(!0===r.throwOnMissingParams)throw new Error("Missing required parameters on path "+JSON.stringify(this._originalPath)+". The missing params are: "+JSON.stringify(l)+". The params object passed in was: "+JSON.stringify(h)+".");return null},i.Url=a}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:url"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.underscore._,i=Package.ejson.EJSON,o=Package["iron:core"].Iron,a,s;(function(){var t=o.Url;(a=function(e,n,i){r.isFunction(e)&&(i=i||n||{},n=e,e="/",this.middleware=!0,void 0===i.mount&&(i.mount=!0)),"object"==typeof n&&(n=(i=n).action||"action"),i=i||{},this.options=i,this.mount=i.mount,this.method=i.method&&i.method.toLowerCase()||!1,this.where=i.where||"client",this.mount&&(i.end=!1),i.name?this.name=i.name:"string"==typeof e&&"/"!==e.charAt(0)?this.name=e:"string"==typeof e&&"/"!==e&&(this.name=e.split("/").slice(1).join(".")),"string"==typeof(e=i.path||e)&&"/"!==e.charAt(0)&&(e="/"+e),this.path=e,this.compiledUrl=new t(e,i),r.isString(n)?this.handle=function t(){var e=this[n];if("function"!=typeof e)throw new Error("No method named "+JSON.stringify(n)+" found on handler.");return e.apply(this,arguments)}:r.isFunction(n)&&(this.handle=n)}).prototype.test=function(t,e){e=e||{};var n=this.compiledUrl.test(t),r=!0,i=!0;return this.method&&e.method&&(r=this.method==e.method.toLowerCase()),e.where&&(i=this.where==e.where),n&&r&&i},a.prototype.params=function(t){return this.compiledUrl.params(t)},a.prototype.resolve=function(t,e){return this.compiledUrl.resolve(t,e)},a.prototype.clone=function(){var t=new a(this.path,this.handle,this.options);return t.name=this.name,t}}).call(this),function(){var e=o.Url,n=o.utils.assert,h=o.utils.defaultValue;(s=function(){this._stack=[],this.length=0}).prototype._create=function(t,e,n){var i=new a(t,e,n),o=i.name;if(o){if(r.has(this._stack,o))throw new Error("Handler with name '"+o+"' already exists.");this._stack[o]=i}return i},s.prototype.findByName=function(t){return this._stack[t]},s.prototype.push=function(t,e,n){var r=this._create(t,e,n);return this._stack.push(r),this.length++,r},s.prototype.append=function(){var t=this,e=r.toArray(arguments),n={};return"object"==typeof e[e.length-1]&&(n=e.pop()),r.each(e,function(e){if(void 0!==e)if("function"==typeof e)t.push(e,n);else{if(!r.isArray(e))throw new Error("Can only append functions or arrays to the MiddlewareStack");t.append.apply(t,e.concat([n]))}}),this},s.prototype.insertAt=function(t,e,n,r){var i=this._create(e,n,r);return this._stack.splice(t,0,i),this.length=this._stack.length,this},s.prototype.insertBefore=function(t,e,n,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=r.indexOf(this._stack,o),this.insertAt(a,e,n,i),this},s.prototype.insertAfter=function(t,e,n,i){var o,a;if(!(o=this._stack[t]))throw new Error("Couldn't find a handler named '"+t+"' on the path stack");return a=r.indexOf(this._stack,o),this.insertAt(a+1,e,n,i),this},s.prototype.concat=function(){var t=new s,e=Array.prototype.concat,n=i.clone(this._stack),o=r.map(r.toArray(arguments),function(t){return i.clone(t._stack)});return t._stack=e.apply(n,o),t.length=t._stack.length,t},s.prototype.dispatch=function r(i,o,a){var s=this,l=i;n("string"==typeof i,"Requires url"),n("object"==typeof o,"Requires context object"),i=e.normalize(i||"/"),h(o,"request",{}),h(o,"response",{}),h(o,"originalUrl",i),h(o,"_method",o.method),h(o,"_handlersForEnv",{client:!1,server:!1}),h(o,"_handled",!1),h(o,"isHandled",function(){return o._handled}),h(o,"willBeHandledOnClient",function(){return o._handlersForEnv.client}),h(o,"willBeHandledOnServer",function(){return o._handlersForEnv.server});var c=function(){if(a)try{a.apply(this,arguments)}catch(t){throw t._punt=!0,t}},u=0,p=t.bindEnvironment(function n(r){var a=s._stack[u++];if(o.url=o.request.url=o.originalUrl,!a)return c.call(o,r);if(!a.test(i,{method:o._method}))return p(r);var h=t.isClient?"client":"server";if(a.middleware||(o._handlersForEnv[a.where]=!0),a.where!==h)return p(r);if(o.next=p,a.mount){var l=e.normalize(a.compiledUrl.pathname),d=i.substr(l.length,i.length);d=e.normalize(d),o.url=o.request.url=d}try{var f=a.handle.length,m=o.request,y=o.response;return r&&4===f?a.handle.call(o,r,m,y,p):!r&&f<4?a.handle.call(o,m,y,p):p(r)}catch(r){if(r._punt)throw r;p(r)}finally{o._handled=!0,o.next=null}});return p(),o.next=null,o},(o=o||{}).MiddlewareStack=s}.call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Package["iron:middleware-stack"]={},{Handler:a})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,r=Package.tracker.Tracker,o=Package.tracker.Deps,i=Package.jquery.$,c=Package.jquery.jQuery,s=Package["iron:core"].Iron,h,u,l,f,p;(function(){var t=s.Url,e="__hash__";h=function(e){var n=t.parse(e),a=n.hash&&n.hash.replace("#",""),r=n.search,o=n.pathname,i=n.rootUrl;if(a&&"!"!==a.charAt(0)){var c="__hash__="+a;r=r?r+"&":"?",r+=c,a=""}return!a&&o?a="#!"+o.substring(1):a&&(a="#"+a),[i,a,r].join("")},u=function(e){var n=t.parse(e),r=n.hash&&n.hash.replace("#!","/"),o=n.search,i=n.rootUrl,c;return a.has(n.queryObject,"__hash__")?(c="#"+n.queryObject.__hash__,delete n.queryObject.__hash__):c="",[i,r,t.toQueryString(n.queryObject),c].join("")},l=function(e){var n=t.parse(e),a=n.queryObject;return n.hash&&(a.__hash__=n.hash.replace("#","")),["!",n.pathname.substring(1),t.toQueryString(a)].join("")}}).call(this),function(){var t=s.Url;(f=function(e,n){a.extend(this,t.parse(e),{options:n||{}})}).prototype.equals=function(t){return!!t&&(t instanceof f&&(t.pathname==this.pathname&&t.search==this.search&&t.hash==this.hash&&t.options.historyState===this.options.historyState))},f.prototype.isCancelled=function(){return!!this._isCancelled},f.prototype.cancelUrlChange=function(){this._isCancelled=!0}}.call(this),function(){var e=s.Url,n=null,r=new o.Dependency,c={go:[],popState:[]},g=function(){return/MSIE 9/.test(navigator.appVersion)},y=function(){return/MSIE 8/.test(navigator.appVersion)},_=function(){return!!Package.appcache},d=function(){return"undefined"==typeof history||"function"!=typeof history.pushState},S=function(){return p.options.useHashPaths||y()||g()||_()||d()},v=function(){return!!p.options.useHashPaths},k=function(t,e){a.each(c[t],function(t){t.call(e)})},w=function(t){if(!(t instanceof f))throw new Error("Expected a State instance");return!t.equals(n)&&(n=t,r.changed(),!0)},P=function(){var t=location.href,e;e=v()?new f(u(t)):new f(t,{historyState:history.state}),k("popState",e),w(e)},m=function(t){var e=q;e&&e(t)},j=function(t,e){var n=new f(t,e=e||{});k("go",n),w(n)&&o.afterFlush(function(){n.isCancelled()||(v()?location.hash=l(t):!0===e.replaceState?history.replaceState(e.historyState,null,t):history.pushState(e.historyState,null,t))})},q=function(t){try{var n=t.currentTarget,a=n.href,r=n.pathname+n.search+n.hash;if(r=r.replace(/(^\/?)/,"/"),t.isDefaultPrevented())return void t.preventDefault();if(t.metaKey||t.ctrlKey||t.shiftKey)return;if(n.target)return;if(!e.isSameOrigin(a,location.href))return;t.preventDefault(),j(r)}catch(e){throw t.preventDefault(),e}};(p={}).options={linkSelector:"a[href]",useHashPaths:!1},p.configure=function(t){a.extend(this.options,t||{})},p.get=function(){return r.depend(),n},p.start=function(){if(!this._isStarted){var n=e.parse(location.href);if(S()){if(n.pathname.length>1){var a=h(location.href);window.location=a}this.configure({useHashPaths:!0})}var r=location.href;if(v()){var o=new f(u(r));w(o)}else{if("!"===n.hash.replace("#","")[0])var r=u(r);var c={initial:!0};history.replaceState(c,null,r);var o=new f(r,{historyState:c});w(o)}i(window).on("popstate.iron-location",P),i(window).on("hashchange.iron-location",P),t.startup(function(){i(document).on("click.iron-location",p.options.linkSelector,m)}),this._isStarted=!0}},p.stop=function(){this._isStarted&&(i(window).on("popstate.iron-location"),i(window).on("hashchange.iron-location"),i(document).off("click.iron-location"),this._isStarted=!1)},p.onClick=function(t){q=t},p.go=function(t,e){return j(t,e)},p.onGo=function(t){c.go.push(t)},p.onPopState=function(t){c.popState.push(t)},p.start(),s.Location=p}.call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Package["iron:location"]={},{urlToHashStyle:h,urlFromHashStyle:u})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,a=Package.meteor.meteorEnv,i=Package.underscore._,n=Package.tracker.Tracker,r=Package.tracker.Deps,s=Package.ejson.EJSON,c=Package.modules.meteorInstall,o=Package["babel-runtime"].meteorBabelHelpers,u=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,d=Package["ecmascript-runtime-client"].Map,f=Package["ecmascript-runtime-client"].Set,k,y=c({node_modules:{meteor:{"reactive-dict":{"reactive-dict.js":function(e){function t(e){return e&&e.__esModule?e:{default:e}}var a=t(e("babel-runtime/helpers/slicedToArray")),r=t(e("babel-runtime/helpers/typeof")),c=function(e){return void 0===e?"undefined":s.stringify(e)},o=function(e){if(void 0!==e&&"undefined"!==e)return s.parse(e)},u=function(e){e&&e.changed()};k=function(e){if(e)if("string"==typeof e)k._registerDictForMigrate(e,this),this.keys=k._loadMigratedDict(e)||{},this.name=e;else{if("object"!==(void 0===e?"undefined":(0,r.default)(e)))throw new Error("Invalid ReactiveDict argument: "+e);this.keys={};for(var t=Object.entries(e),i=Array.isArray(t),s=0,t=i?t:t[l.iterator]();;){var o;if(i){if(s>=t.length)break;o=t[s++]}else{if((s=t.next()).done)break;o=s.value}var u=o,d=(0,a.default)(u,2),f=d[0],y=d[1];this.keys[f]=c(y)}}else this.keys={};this.allDeps=new n.Dependency,this.keyDeps={},this.keyValueDeps={}},i.extend(k.prototype,{set:function(e,t){var a=this;if("object"!==(void 0===e?"undefined":(0,r.default)(e))||void 0!==t){var n=e;t=c(t);var s=i.has(a.keys,n),o=s?a.keys[n]:"undefined",l=t!==o;a.keys[n]=t,!l&&s||a.allDeps.changed(),l&&(u(a.keyDeps[n]),a.keyValueDeps[n]&&(u(a.keyValueDeps[n][o]),u(a.keyValueDeps[n][t])))}else a._setObject(e)},setDefault:function(e,t){var a=this;if("object"!==(void 0===e?"undefined":(0,r.default)(e))||void 0!==t){var n=e;i.has(a.keys,n)||a.set(n,t)}else a._setDefaultObject(e)},get:function(e){var t=this;return t._ensureKey(e),t.keyDeps[e].depend(),o(t.keys[e])},equals:function(e,t){var a=this,r=null;if(Package.mongo&&(r=Package.mongo.Mongo.ObjectID),!("string"==typeof t||"number"==typeof t||"boolean"==typeof t||void 0===t||t instanceof Date||r&&t instanceof r||null===t))throw new Error("ReactiveDict.equals: value must be scalar");var u=c(t);n.active&&(a._ensureKey(e),i.has(a.keyValueDeps[e],u)||(a.keyValueDeps[e][u]=new n.Dependency),a.keyValueDeps[e][u].depend()&&n.onInvalidate(function(){a.keyValueDeps[e][u].hasDependents()||delete a.keyValueDeps[e][u]}));var l=void 0;return i.has(a.keys,e)&&(l=o(a.keys[e])),s.equals(l,t)},all:function(){this.allDeps.depend();var e={};return i.each(this.keys,function(t,a){e[a]=o(t)}),e},clear:function(){var e=this,t=e.keys;e.keys={},e.allDeps.changed(),i.each(t,function(t,a){u(e.keyDeps[a]),e.keyValueDeps[a]&&(u(e.keyValueDeps[a][t]),u(e.keyValueDeps[a].undefined))})},delete:function(e){var t=this,a=!1;if(i.has(t.keys,e)){var n=t.keys[e];delete t.keys[e],u(t.keyDeps[e]),t.keyValueDeps[e]&&(u(t.keyValueDeps[e][n]),u(t.keyValueDeps[e].undefined)),t.allDeps.changed(),a=!0}return a},_setObject:function(e){var t=this;i.each(e,function(e,a){t.set(a,e)})},_setDefaultObject:function(e){var t=this;i.each(e,function(e,a){t.setDefault(a,e)})},_ensureKey:function(e){var t=this;e in t.keyDeps||(t.keyDeps[e]=new n.Dependency,t.keyValueDeps[e]={})},_getMigrationData:function(){return this.keys}})},"migration.js":function(){if(k._migratedDictData={},k._dictsToMigrate={},k._loadMigratedDict=function(e){return i.has(k._migratedDictData,e)?k._migratedDictData[e]:null},k._registerDictForMigrate=function(e,t){if(i.has(k._dictsToMigrate,e))throw new Error("Duplicate ReactiveDict name: "+e);k._dictsToMigrate[e]=t},e.isClient&&Package.reload){var t=Package.reload.Reload._migrationData("reactive-dict");t&&t.dicts&&(k._migratedDictData=t.dicts),Package.reload.Reload._onMigrate("reactive-dict",function(){var e=k._dictsToMigrate,t={};for(var a in o.sanitizeForInObject(e))t[a]=e[a]._getMigrationData();return[!0,{dicts:t}]})}}}}}},{extensions:[".js",".json"]});y("./node_modules/meteor/reactive-dict/reactive-dict.js"),y("./node_modules/meteor/reactive-dict/migration.js"),"undefined"==typeof Package&&(Package={}),function(e,t){for(var a in t)a in e||(e[a]=t[a])}(Package["reactive-dict"]={},{ReactiveDict:k})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,o=Package.tracker.Tracker,i=Package.tracker.Deps,r=Package["reactive-dict"].ReactiveDict,u=Package["templating-runtime"].Template,s=Package["iron:core"].Iron,c=Package.blaze.Blaze,l=Package.blaze.UI,p=Package.blaze.Handlebars,d=Package.spacebars.Spacebars,h=Package.htmljs.HTML,y,f;(function(){var t=s.utils.assert,e=function(){for(var t={},e=i.currentComputation;e;)t[String(e._id)]=!0,e=e._parent;return t},n=function(n){var o=e(),i=a.keys(n._dependentsById);a.each(i,function(e){t(!o[e],"\n\nYou called wait() after calling ready() inside the same computation tree.\n\nYou can fix this problem in two possible ways:\n\n1) Put all of your wait() calls before any ready() calls.\n2) Put your ready() call in its own computation with Deps.autorun.")})};(y=function(){this._readyDep=new i.Dependency,this._comps=[],this._notReadyCount=0}).prototype.wait=function(t){var e=this,o=i.currentComputation;n(e._readyDep),i.nonreactive(function(){var n=null,r=i.autorun(function(a){var o=!!t(),i=e._notReadyCount;a.firstRun&&!o?e._notReadyCount++:null!==n&&o!==n&&!0===o?e._notReadyCount--:null!==n&&o!==n&&!1===o&&e._notReadyCount++,n=o,0===i&&e._notReadyCount>0?e._readyDep.changed():i>0&&0===e._notReadyCount&&e._readyDep.changed()});e._comps.push(r),o&&o.onInvalidate(function(){i.afterFlush(function(){r.stop(),e._comps.splice(a.indexOf(e._comps,r),1),!1===n&&(e._notReadyCount--,0===e._notReadyCount&&e._readyDep.changed())})})})},y.prototype.ready=function(){return this._readyDep.depend(),0===this._notReadyCount},y.prototype.stop=function(){a.each(this._comps,function(t){t.stop()}),this._comps=[]},s.WaitList=y}).call(this),function(){var t=s.utils.debug("iron:controller"),e=s.Layout,n=s.DynamicTemplate,o=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};(f=function(t){var n=this;this.options=t||{},this._layout=this.options.layout||new e(this.options),this._isController=!0,this._layout._setLookupHost(this);var a=f._collectEventMaps.call(this.constructor);this._layout.events(a,this),this.init(t)}).prototype.layout=function(t,e){var n=this;return this._layout.template(t),e&&a.has(e,"data")&&this._layout.data(o(e.data,this)),{data:function(t){return n._layout.data(o(t,n))}}},f.prototype.render=function(t,e){var n=this;e&&void 0!==e.data&&(e.data=o(e.data,this));var a=this._layout.render(t,e);return{data:function(t){return a.data(o(t,n))}}},f.prototype.beginRendering=function(t){return this._layout.beginRendering(t)},f.extend=function(t){return s.utils.extend(this,t)},f.events=function(t){return this._eventMap=t,this};var i=function(t,e){var n={};return t.__super__&&a.extend(n,i(t.__super__.constructor,e)),a.has(t,e)?a.extend(n,t[e]):n};f._collectEventMaps=function(){return i(this,"_eventMap")},f._helpers={},f.helpers=function(t){return a.extend(this._helpers,t),this},void 0!==u&&(s.controller=function(){return n.findLookupHostWithProperty(c.getView(),"_isController")},u.registerHelper("get",function(t){var e=s.controller();if(e&&e.state)return e.state.get(t)})),s.Controller=f}.call(this),function(){var t=s.Layout,e=s.utils.debug("iron:controller"),n=s.utils.defaultValue,o=function(t,e){return function(){return"function"==typeof t?t.apply(e,arguments):t}};f.prototype.init=function(t){this._waitlist=new y,this.state=new r},f.prototype.insert=function(t){return this._layout.insert.apply(this._layout,arguments)},f.prototype.wait=function(t){var e=this;if(t)return a.isArray(t)?a.each(t,function t(n){e.wait(n)}):t.ready?this._waitlist.wait(function(){return t.ready()}):this._waitlist.wait(t),this},f.prototype.ready=function(){return this._waitlist.ready()},f.prototype.stop=function(){this._waitlist.stop()}}.call(this),"undefined"==typeof Package&&(Package={}),Package["iron:controller"]={}}();

!function(){var t=Package.underscore._,o=Package.tracker.Tracker,e=Package.tracker.Deps,r=Package.blaze.Blaze,n=Package.blaze.UI,i=Package.blaze.Handlebars,a=Package["templating-runtime"].Template,s=Package.ejson.EJSON,u=Package.meteor.Meteor,l=Package.meteor.global,c=Package.meteor.meteorEnv,p=Package["iron:core"].Iron,h=Package.htmljs.HTML,f=Package.spacebars.Spacebars,d,_,y,m,g;(function(){d=new u.EnvironmentVariable}).call(this),function(){_=["get","post","put","delete","patch","head"]}.call(this),function(){var o=p.Controller,e=p.Url,r=p.MiddlewareStack,n=p.utils.assert;(y=o.extend({constructor:function(o){y.__super__.constructor.apply(this,arguments),o=o||{},this.options=o,this._onStopCallbacks=[],this.route=o.route,this.params=[];var e=this.lookupOption("data");"function"==typeof e?this.data=t.bind(e,this):void 0!==e&&(this.data=function(){return e}),this.init(o)}})).prototype.lookupOption=function(o){if(this.route&&this.route.options&&t.has(this.route.options,o))return this.route.options[o];if(t.has(this.options,o))return this.options[o];if(void 0!==this[o])return this[o];var e=d.get();return e&&t.has(e,o)?e[o]:this.router&&this.router.options&&t.has(this.router.options,o)?this.router.options[o]:void 0},y.prototype.configureFromUrl=function(t,o,e){n("string"==typeof t,"url must be a string"),o=o||{},this.request=o.request||{},this.response=o.response||{},this.url=o.url||t,this.originalUrl=o.originalUrl||t,this.method=this.request.method,this.route&&this.setParams(this.route.params(t),e)},y.prototype._collectHooks=function(){var o=this,e=t.toArray(arguments),r=function(e){if(!e)return[];var r=o.router.lookupHook,n=t.isArray(e)?e:[e];return t.map(n,function(t){return r(t)})},n=function(o,e){var i=[];return o.__super__&&(i=i.concat(n(o.__super__.constructor,e))),t.has(o.prototype,e)?i.concat(r(o.prototype[e])):i},i=function(t){for(var o=0;o<e.length;o++)t(e[o])},a=[];i(function(t){var e=o.route&&o.route.getName(),r=o.router.getHooks(t,e);a=a.concat(r)});var s=[];i(function(t){var e=n(o.constructor,t);s=s.concat(e)});var u=[];i(function(e){if(t.has(o,e)){var n=r(o[e]);u=u.concat(n)}});var l=[];return o.route&&i(function(t){var e=r(o.route.options[t]);l=l.concat(e)}),a.concat(l).concat(s).concat(u)},y.prototype.runHooks=function(){for(var t=this._collectHooks.apply(this,arguments),o=0,e=t.length;o<e;o++)t[o].call(this);return t.length},y.prototype.getParams=function(){return this.params},y.prototype.setParams=function(t){return this.params=t,this},p.RouteController=y}.call(this),function(){var r=p.Controller,n=p.Url,i=p.MiddlewareStack,a=p.utils.debug("iron-router:RouteController");if(y.prototype.init=function(t){y.__super__.init.apply(this,arguments),this._computation=null,this._paramsDep=new o.Dependency,this.location=p.Location},y.prototype.getParams=function(){return this._paramsDep.depend(),this.params},y.prototype.setParams=function(o,e){if(!function(o,r){if(!(o instanceof Array))throw new Error("you called equals with a non array value in setParams");if(!(r instanceof Array))return!1;if(o.length!==r.length)return!1;for(var n=0;n<o.length;n++)if(!s.equals(o[n],r[n],e))return!1;var i=t.keys(o),a=t.keys(r),u;if(i.length!==a.length)return!1;for(var n=0;n<i.length;n++){if(u=i[n],!t.has(r,u))return!1;if(!s.equals(o[u],r[u]))return!1}return!0}(this.params,o))return this.params=o,!1!==(e=e||{}).reactive&&this._paramsDep.changed(),this},y.prototype.dispatch=function(t,o,r){if(this._computation&&!this._computation.stopped)throw new Error("RouteController computation is already running. Stop it first.");var n=this;return e.nonreactive(function(){e.autorun(function(e){n._computation=e,t.dispatch(o,n,r)})}),n},y.prototype._runRoute=function(o,r,n){var a=this,s=this._collectHooks("subscriptions");t.each(s,function(t){a.wait(t.call(a))});var u=this._collectHooks("waitOn");t.each(u,function(t){a.wait(t.call(a))});var l=u.length>0,c,h,f=function(){return e.nonreactive(function(){return a._layout.template()})},d=function(){return e.nonreactive(function(){var t=a._layout._regions.main;return t&&t.template()})},_=f(),m=d();this.beginRendering(function o(e){if(!a.isStopped){var r=f(),n=d();if(_!==r||m!=n){var i=a._layout.regionKeys(),s=t.difference(i,e);t.each(s,function(t){a._layout.clear(t)})}}}),this.layout(this.lookupOption("layoutTemplate"),{data:this.lookupOption("data")});var g=new i,v=new i,k=new i;v.append(this._collectHooks("onRun","load"),{where:"client"}),k.append(this._collectHooks("onRerun"),{where:"client"}),g.append(function t(o,e,r){this._computation.firstRun&&!y._hasJustReloaded&&v.length>0?v.dispatch(o.url,this,r):r(),y._hasJustReloaded=!1},function t(o,e,r){this._computation.firstRun?r():k.length>0?k.dispatch(o.url,this,r):r()},{where:"client"}),l&&g.push(t.bind(p.Router.hooks.loading,a));var R=this._collectHooks("onBeforeAction","before");g.append(R,{where:"client"}),0===o._actionStack.length&&o._actionStack.push(o._path,"action",o.options),g=g.concat(o._actionStack),this._rendered=!1,g.dispatch(r,this,n),e.afterFlush(function(){p.utils.warn(a._rendered||a.isStopped,"Route dispatch never rendered. Did you forget to call this.next() in an onBeforeAction?")}),this.runHooks("onAfterAction","after")},y.prototype.action=function(){this.render()},y.prototype.lookupTemplate=function(){return this.lookupOption("template")||this.router&&this.router.toTemplateName(this.route.getName())},y.prototype.lookupRegionTemplates=function(){return this.lookupOption("yieldRegions")||this.lookupOption("regionTemplates")||this.lookupOption("yieldTemplates")||{}},y.prototype.render=function(t,o){if(this._rendered=!0,0===arguments.length){var t=this.lookupTemplate(),e=y.__super__.render.call(this,t);return this.renderRegions(),e}return y.__super__.render.call(this,t,o)},y.prototype.renderRegions=function(){var o=this,e=this.lookupRegionTemplates();a("regionTemplates: "+JSON.stringify(e)),t.each(e,function(t,e){o.render(e,t)})},y.prototype.stop=function(){y.__super__.stop.call(this),this._computation&&this._computation.stop(),this.runHooks("onStop","unload"),this.isStopped=!0},y.prototype.redirect=function(){return this.router.go.apply(this.router,arguments)},y.prototype.subscribe=function(){var o=this,e=u.subscribe.apply(this,arguments);return t.extend(e,{wait:function(){o.wait(this)}})},Package.reload){Package.reload.Reload._onMigrate("iron-router",function(){return[!0,!0]});var l=Package.reload.Reload._migrationData("iron-router");y._hasJustReloaded=l}}.call(this),function(){var o=p.Url,e=p.MiddlewareStack,r=p.utils.assert;(m=function(o,r,n){var i=function(t,o,e){var r=this;r.request=t,r.response=o,i.dispatch(t.url,r,e)};return"object"==typeof r&&(r=(n=r).action),n=n||{},"string"==typeof o&&"/"!==o.charAt(0)&&(o=n.path?n.path:"/"+o),t.extend(i,this.constructor.prototype),n=i.options=n||{},i._actionStack=new e,i._beforeStack=new e,i._beforeStack.append(i.options.onBeforeAction),i._beforeStack.append(i.options.before),i._afterStack=new e,i._afterStack.append(i.options.onAfterAction),i._afterStack.append(i.options.after),i._methods={},"string"==typeof r?i._actionStack.push(o,t.extend(n,{template:r})):"function"!=typeof r&&"object"!=typeof r||i._actionStack.push(o,r,n),i._path=o,i}).prototype.getName=function(){return this.handler&&this.handler.name},m.prototype.findControllerConstructor=function(){var t=this,o=function(t,o){o=o||{};var e=p.utils.resolve(t);if(e&&y.prototype.isPrototypeOf(e.prototype))return e;if(!0!==o.supressErrors)throw new Error("RouteController '"+t+"' is not defined.")},e=function(o){return t.router.toControllerName(o)},r,n=this.getName();return"function"==typeof this.options.controller?this.options.controller:"string"==typeof this.options.controller?o(this.options.controller):this.router&&this.router.options.controller?"function"==typeof this.router.options.controller?this.router.options.controller:"string"==typeof this.router.options.controller?o(this.router.options.controller):void 0:n&&(r=o(e(n),{supressErrors:!0}))?r:y},m.prototype.createController=function(t){t=t||{};var o=this.findControllerConstructor();return t.route=this,new o(t)},m.prototype.setControllerParams=function(t,o){},m.prototype.dispatch=function(t,o,e){return r(o._runRoute,"context doesn't have a _runRoute method"),o._runRoute(this,t,e)},m.prototype.path=function(t,o){return this.handler.resolve(t,o)},m.prototype.url=function(t,o){var e=this.path(t,o),r=o&&o.host||u.absoluteUrl();return"/"===r.charAt(r.length-1)&&(r=r.slice(0,r.length-1)),r+e},m.prototype.params=function(t){return this.handler.params(t)},t.each(_,function(t){m.prototype[t]=function(o){return this._methods[t]=!0,this._actionStack.push(this._path,o,{name:this.getName()+"_"+t.toLowerCase(),method:t,where:this.handler.where,mount:!1}),this}}),p.Route=m}.call(this),function(){var o=p.MiddlewareStack,e=p.Url,r=p.Layout,n=p.utils.warn,i=p.utils.assert;(g=function(e){function r(t,o,e){r.dispatch(t.url,{request:t,response:o},e)}return r._stack=new o,r._globalHooks={},r.routes=[],r.routes._byPath={},this.configure.call(r,e),t.extend(r,this.constructor.prototype),this.init.call(r,e),u.startup(function(){u.defer(function(){!1!==r.options.autoStart&&r.start()})}),r}).prototype.init=function(t){},g.prototype.configure=function(o){var e=this;o=o||{};var r=function(o){return o?t.isArray(o)?o:[o]:[]};return t.each(p.Router.HOOK_TYPES,function n(i){o[i]&&(t.each(r(o[i]),function t(o){e.addHook(i,o)}),delete o[i])}),this.options=this.options||{},t.extend(this.options,o),this},g.prototype.map=function(t){return t.call(this)},g.prototype.route=function(t,o,e){var r=function(t){return Object.prototype.toString.call(t)};i("[object String]"===r(t)||"[object RegExp]"===r(t),"Router.route requires a path that is a string or regular expression."),"object"==typeof o&&(o=(e=o).action);var n=new m(t,o,e);(e=e||{}).mount=!1;var a=this._stack.push(t,n,e);return a.route=n,n.handler=a,n.router=this,i(!this.routes._byPath[a.path],"A route for the path "+JSON.stringify(a.path)+" already exists by the name of "+JSON.stringify(a.name)+"."),this.routes._byPath[a.path]=n,this.routes.push(n),"string"==typeof a.name&&(this.routes[a.name]=n),n},g.prototype.findFirstRoute=function(t){for(var o,e,r=0;r<this.routes.length;r++)if(e=this.routes[r],o=e.handler.test(t,{where:u.isServer?"server":"client"}))return e;return null},g.prototype.path=function(t,o,e){var r=this.routes[t];return n(r,"You called Router.path for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.path(o,e)},g.prototype.url=function(t,o,e){var r=this.routes[t];return n(r,"You called Router.url for a route named "+JSON.stringify(t)+" but that route doesn't seem to exist. Are you sure you created it?"),r&&r.url(o,e)},g.prototype.createController=function(t,o){var e=this.findFirstRoute(t),r;return o=o||{},r=e?e.createController({layout:this._layout}):new y({layout:this._layout}),r.router=this,r.configureFromUrl(t,o,{reactive:!1}),r},g.prototype.setTemplateNameConverter=function(t){return this._templateNameConverter=t,this},g.prototype.setControllerNameConverter=function(t){return this._controllerNameConverter=t,this},g.prototype.toTemplateName=function(t){return this._templateNameConverter?this._templateNameConverter(t):p.utils.classCase(t)},g.prototype.toControllerName=function(t){return this._controllerNameConverter?this._controllerNameConverter(t):p.utils.classCase(t)+"Controller"},g.prototype.addHook=function(o,e,r){var n=this,i=function(o){return o?t.isArray(o)?o:[o]:[]};(r=r||{}).only&&(r.only=i(r.only)),r.except&&(r.except=i(r.except));var a=function(){var t=this,o=arguments;return d.withValue(r,function(){return n.lookupHook(e).apply(t,o)})};return(this._globalHooks[o]=this._globalHooks[o]||[]).push({options:r,hook:a}),this},g.prototype.lookupHook=function(o){var e=o;if(t.isFunction(e))return e;if(t.isString(e)&&t.isFunction(p.Router.hooks[e]))return p.Router.hooks[e];throw new Error("No hook found named: "+o)},g.prototype.getHooks=function(o,e){var r=this,n=[];return t.each(this._globalHooks[o],function(o){var r=o.options;return r.except&&t.include(r.except,e)?[]:r.only&&!t.include(r.only,e)?[]:void n.push(o.hook)}),n},g.HOOK_TYPES=["onRun","onRerun","onBeforeAction","onAfterAction","onStop","waitOn","subscriptions","load","before","after","unload"],g.hooks={},g.plugins={},t.each(g.HOOK_TYPES,function(t){g.prototype[t]=function(o,e){this.addHook(t,o,e)}}),g.prototype.plugin=function(t,o){var e;if("function"==typeof t?e=t:"string"==typeof t&&(e=p.Router.plugins[t]),!e)throw new Error("No plugin found named "+JSON.stringify(t));return e.call(this,this,o),this},p.Router=g}.call(this),function(){if(void 0!==a)var t=new a("DefaultLoadingTemplate",function(){return"Loading..."}),o=new a("DefaultDataNotFoundTemplate",function(){return"Data not found..."});g.hooks.loading=function(){if(this.ready())this.next();else{var o=this.lookupOption("loadingTemplate");this.render(o||t),this.renderRegions()}},g.hooks.dataNotFound=function(){if(this.ready()){var t=this.lookupOption("data"),e,r=this.lookupOption("notFoundTemplate");if("function"==typeof t&&!(e=t.call(this)))return this.render(r||o),void this.renderRegions();this.next()}else this.next()}}.call(this),function(){var o=p.utils.warn,e=p.DynamicTemplate,i=p.utils.debug("iron:router <helpers>");n.registerHelper("Router",new r.Template("Router",function(){return g.createView()})),n.registerHelper("pathFor",function(e){var r;arguments.length>1&&(r=arguments[0],e=arguments[1]||{});var n=e&&e.hash,i="",a=(n=n||{}).query,u=n.hash,r=r||n.route,l=t.extend({},n.data||this),c=g.routes[r];return o(c,"pathFor couldn't find a route named "+JSON.stringify(r)),c&&(t.each(c.handler.compiledUrl.keys,function(o){var e=o.name;t.has(n,e)&&(l[e]=s.clone(n[e]),delete n[e])}),i=c.path(l,{query:a,hash:u})),i}),n.registerHelper("urlFor",function(e){var r;arguments.length>1&&(r=arguments[0],e=arguments[1]||{});var n=e&&e.hash,i="",a=(n=n||{}).query,u=n.hash,r=r||n.route,l=t.extend({},n.data||this),c=g.routes[r];return o(c,"urlFor couldn't find a route named "+JSON.stringify(r)),c&&(t.each(c.handler.compiledUrl.keys,function(o){var e=o.name;t.has(n,e)&&(l[e]=s.clone(n[e]),delete n[e])}),i=c.url(l,{query:a,hash:u})),i}),n.registerHelper("linkTo",new r.Template("linkTo",function(){var n=this,i=e.getInclusionArguments(this);if("object"!=typeof i)throw new Error("linkTo options must be key value pairs such as {{#linkTo route='my.route.name'}}. You passed: "+JSON.stringify(i));var a="",u=(i=i||{}).query,l=i.hash,c=i.route,p=t.extend({},i.data||e.getParentDataContext(this)),f=g.routes[c],d;o(f,"linkTo couldn't find a route named "+JSON.stringify(c)),f&&(t.each(f.handler.compiledUrl.keys,function(o){var e=o.name;t.has(i,e)&&(p[e]=s.clone(i[e]),delete i[e])}),a=f.path(p,{query:u,hash:l}));var _=t.omit(i,"route","query","hash","data");return _.href=a,r.With(function(){return e.getParentDataContext(n)},function(){return h.A(_,n.templateContentBlock)})}))}.call(this),function(){var o=p.MiddlewareStack,r=p.Url,n=p.Layout,i=p.utils.assert,a="__IronRouterNotFound__",s="__IronRouterNoRoutes__";g.prototype.init=function(t){var o=this;o._currentController=null,o._currentRoute=null,o._currentDep=new e.Dependency,o._locationComputation=null,o._layout=new n({template:o.options.layoutTemplate}),u.startup(function(){setTimeout(function t(){!1!==o.options.autoRender&&o.insert({el:document.body})})})},g.prototype.insert=function(t){return this._layout.insert(t),this},g.prototype.createView=function(){return this._layout.create()},g.prototype.lookupNotFoundTemplate=function(){return this.options.notFoundTemplate?this.options.notFoundTemplate:0===this.routes.length?s:"__IronRouterNotFound__"},g.prototype.lookupLayoutTemplate=function(){return this.options.layoutTemplate},g.prototype.dispatch=function(t,o,r){var n=this;i("string"==typeof t,"expected url string in router dispatch");var a=this._currentController,u=this.findFirstRoute(t),l=this._currentRoute;return this._currentRoute=u,this._currentController&&this._currentController.stop(),a&&u&&l===u?a.configureFromUrl(t,o):a=this.createController(t,o),this._currentController=a,a.dispatch(n._stack,t,function t(o){if(o)throw o;if(!a.isHandled()){var i=e.nonreactive(function(){return a.location.get().options.historyState});if(i&&!0===i.initial){this.layout(this.lookupOption("layoutTemplate"),{data:{url:this.url}});var u;u=0===n.routes.length?this.lookupOption("noRoutesTemplate")||s:this.lookupOption("notFoundTemplate")||"__IronRouterNotFound__",this.render(u,{data:{url:this.url}}),this.renderRegions(),a.isHandled=function(){return!0}}return r&&r.call(a)}}),this._currentController==a&&this._currentDep.changed(),a},g.prototype.current=function(){return this._currentDep.depend(),this._currentController},g.prototype._scrollToHash=function(t){try{var o=$(t);$("html, body").scrollTop(o.offset().top)}catch(t){}},g.prototype.start=function(){var t=this,o;t._locationComputation=e.autorun(function e(r){var n,i=p.Location.get(),a,s,u,l=t._currentController;!l||o&&o.path!==i.path?n=t.dispatch(i.href,null,function t(o){this.isHandled()||(i.cancelUrlChange(),window.location=i.path)}):(t._scrollToHash(i.hash),l.configureFromUrl(i.href)),o=i})},g.prototype.stop=function(){this._isStarted&&(this._locationComputation&&this._locationComputation.stop(),this._currentController&&this._currentController.stop(),this._isStarted=!1)},g.prototype.go=function(o,e,r){var n=this,a=/^\/|http/,s;if(r=r||{},a.test(o))s=o;else{var u=n.routes[o];i(u,"No route found named "+JSON.stringify(o)),s=u.path(e,t.extend(r,{throwOnMissingParams:!0}))}p.Location.go(s,r)}}.call(this),function(){g.plugins.loading=function(t,o){t.onBeforeAction("loading",o)},g.plugins.dataNotFound=function(t,o){t.onBeforeAction("dataNotFound",o)}}.call(this),function(){g=new p.Router}.call(this),function(){a.__checkName("__IronRouterNotFound__"),a.__IronRouterNotFound__=new a("Template.__IronRouterNotFound__",function(){var t=this;return h.DIV({style:"width: 600px; margin: 0 auto; padding: 20px;"},"\n    ",h.DIV({style:"font-size: 18pt; color: #999;"},"\n      Oops, looks like there's no route on the client or the server for url: \"",r.View("lookup:url",function(){return f.mustache(t.lookup("url"))}),'."\n    '),"\n  ")}),a.__checkName("__IronRouterNoRoutes__"),a.__IronRouterNoRoutes__=new a("Template.__IronRouterNoRoutes__",function(){var t=this;return h.Raw('<div style="font-family: helvetica; color: #777; max-width: 600px; margin: 20px auto;">\n      <h1 style="text-align: center; margin: 0; font-size: 48pt;">\n        iron:router\n      </h1>\n      <p style="text-align: center; font-size: 1.3em; color: red;">\n        No route definitions found.\n      </p>\n      <div style="margin: 50px 0px;">\n        <p>To create a route:</p>\n        <pre style="background: #f2f2f2; margin: 0; padding: 10px;">\nRouter.route(\'/\', function () {\n  this.render(\'Home\', {\n    data: function () { return Items.findOne({_id: this.params._id}); }\n  });\n});\n        </pre>\n        <p style="text-align:center"><small>To hide this page, set \'noRoutesTemplate\' in <a href="http://iron-meteor.github.io/iron-router/#global-default-options" target="_blank">Router.configure()</a></small></p>\n      </div>\n      <div style="margin: 50px 0px; text-align: center;">\n        Check it out on Github:<br>\n        <a href="https://github.com/iron-meteor/iron-router/" target="_blank">https://github.com/iron-meteor/iron-router/</a>\n        <br>\n        <br>\n        And check out the new Guide:<br>\n        <a href="https://iron-meteor.github.io/iron-router" target="_blank">\n          https://iron-meteor.github.io/iron-router\n        </a>\n      </div>\n    </div>')})}.call(this),"undefined"==typeof Package&&(Package={}),function(t,o){for(var e in o)e in t||(t[e]=o[e])}(Package["iron:router"]={},{Router:g,RouteController:y})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package.jquery.$,r=Package.jquery.jQuery;!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):r)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};var e,n,i;!function(t){function r(e,t){return $.call(e,t)}function o(e,t){var n,i,r,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),e=h.slice(0,h.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(u=(n=e.split("/")).length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if((r=f[h.slice(0,d).join("/")])&&(r=r[i])){o=r,a=u;break}if(o)break;!l&&g&&g[i]&&(l=g[i],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,n){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(r(v,e)){var n=v[e];delete v[e],_[e]=!0,p.apply(t,n)}if(!r(m,e)&&!r(_,e))throw new Error("No "+e);return m[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,h,f,g,m={},v={},y={},_={},$=Object.prototype.hasOwnProperty,w=[].slice,b=/\.js$/;f=function(e,t){var n,i=u(e),r=i[0];return e=i[1],r&&(n=c(r=o(r,t))),r?e=n&&n.normalize?n.normalize(e,a(t)):o(e,t):(r=(i=u(e=o(e,t)))[0],e=i[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},p=function(e,n,i,o){var a,u,d,p,h,y=[],$=typeof i,w;if(o=o||e,"undefined"===$||"function"===$){for(n=!n.length&&i.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(p=f(n[h],o),"require"===(u=p.f))y[h]=g.require(e);else if("exports"===u)y[h]=g.exports(e),w=!0;else if("module"===u)a=y[h]=g.module(e);else if(r(m,u)||r(v,u)||r(_,u))y[h]=c(u);else{if(!p.p)throw new Error(e+" missing "+u);p.p.load(p.n,s(o,!0),l(u),{}),y[h]=m[u]}d=i?i.apply(m[e],y):void 0,e&&(a&&a.exports!==t&&a.exports!==m[e]?m[e]=a.exports:d===t&&w||(m[e]=d))}else e&&(m[e]=i)},e=n=h=function(e,n,i,r,o){if("string"==typeof e)return g[e]?g[e](n):c(f(e,n).f);if(!e.splice){if((y=e).deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?p(t,e,n,i):setTimeout(function(){p(t,e,n,i)},4),h},h.config=function(e){return h(e)},e._defined=m,(i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||i;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t)"function"==typeof t[i]&&"constructor"!==i&&n.push(i);return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,r=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=i}var o=t(n),s=t(e);n.displayName=e.displayName,i.prototype=new r;for(var a=0;a<s.length;a++){var l=s[a];i.prototype[l]=e.prototype[l]}for(var c=function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var r=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),r.apply(this,arguments)}},u=0;u<o.length;u++){var d=o[u];i.prototype[d]=c(d)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;n<e;n++)t+=Math.floor(36*Math.random()).toString(36);return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];(o=o.substring(0,1).toLowerCase()+o.substring(1))in i||(i[o]={}),r==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(t.message);i.append(n(r(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var t=e(this),n=e.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(r,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var r in i){var o=i[r];n.setAttribute(r,o)}if(t.children){var s=e(n),a=document.createElement("strong");a.className="select2-results__group";var l=e(a);this.template(t,a);for(var c=[],u=0;u<t.children.length;u++){var d=t.children[u],p=this.option(d);c.push(p)}var h=e("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});h.append(c),s.append(a),s.append(h)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t,n){var i=this,r=t.id+"-results";this.$results.attr("id",r),t.on("results:all",function(e){i.clear(),i.append(e.data),t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("results:append",function(e){i.append(e.data),t.isOpen()&&i.setClasses()}),t.on("query",function(e){i.hideMessages(),i.showLoading(e)}),t.on("select",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(i.setClasses(),i.highlightFirstItem())}),t.on("open",function(){i.$results.attr("aria-expanded","true"),i.$results.attr("aria-hidden","false"),i.setClasses(),i.ensureHighlightVisible()}),t.on("close",function(){i.$results.attr("aria-expanded","false"),i.$results.attr("aria-hidden","true"),i.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=i.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=i.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?i.trigger("close",{}):i.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e);if(0!==n){var r=n-1;0===e.length&&(r=0);var o=t.eq(r);o.trigger("mouseenter");var s=i.$results.offset().top,a=o.offset().top,l=i.$results.scrollTop()+(a-s);0===r?i.$results.scrollTop(0):a-s<0&&i.$results.scrollTop(l)}}),t.on("results:next",function(){var e=i.getHighlightedResults(),t=i.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var r=t.eq(n);r.trigger("mouseenter");var o=i.$results.offset().top+i.$results.outerHeight(!1),s=r.offset().top+r.outerHeight(!1),a=i.$results.scrollTop()+s-o;0===n?i.$results.scrollTop(0):s>o&&i.$results.scrollTop(a)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){i.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=i.$results.scrollTop(),n=i.$results.get(0).scrollHeight-t+e.deltaY,r=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&n<=i.$results.height();r?(i.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(i.$results.scrollTop(i.$results.get(0).scrollHeight-i.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var n=e(this),r=n.data("data");"true"!==n.attr("aria-selected")?i.trigger("select",{originalEvent:t,data:r}):i.options.get("multiple")?i.trigger("unselect",{originalEvent:t,data:r}):i.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(t){var n=e(this).data("data");i.getHighlightedResults().removeClass("select2-results__option--highlighted"),i.trigger("results:focus",{data:n,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,r=this.$results.scrollTop()+(i-n),o=i-n;r-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(r)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(t,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):e(n).append(o)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e,t){var i=this,r=e.id+"-container",o=e.id+"-results";this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",o),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){var n=this;e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target).closest(".select2");e(".select2.select2-container--open").each(function(){var t=e(this);this!=n[0]&&t.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function r(){r.__super__.constructor.apply(this,arguments)}return n.Extend(r,t),r.prototype.render=function(){var e=r.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},r.prototype.bind=function(e,t){var n=this;r.__super__.bind.apply(this,arguments);var i=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),e.on("focus",function(t){e.isOpen()||n.$selection.focus()}),e.on("selection:update",function(e){n.update(e.data)})},r.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},r.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},r.prototype.selectionContainer=function(){return e("<span></span>")},r.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)}else this.clear()},r}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(e,t){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(t,n){var r=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){r.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(t){if(!r.options.get("disabled")){var n=e(this).parent().data("data");r.trigger("unselect",{originalEvent:t,data:n})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var r=e[i],o=this.selectionContainer(),s=this.display(r,o);o.append(s),o.prop("title",r.title||r.text),o.data("data",r),t.push(o)}var a=this.$selection.find(".select2-selection__rendered");n.appendMany(a,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("open",function(){r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(e){r.$search.trigger("focus")}),t.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(t.length>0){var i=t.data("data");r.searchRemoveChoice(i),e.preventDefault()}}});var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){s?r.$selection.off("input.search input.searchcheck"):r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)r.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)}})},i.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";e=""!==this.$search.attr("placeholder")?this.$selection.find(".select2-selection__rendered").innerWidth():.75*(this.$search.val().length+1)+"em",this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,o)){n=n||{};var i=e.Event("select2:"+t,{params:n});r.$element.trigger(i),-1!==e.inArray(t,s)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}}),t.define("select2/data/base",["../utils"],function(e){function t(e,n){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(e,t){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),r=i.item(e);t.push(r)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];(e=[e]).push.apply(e,i);for(var o=0;o<e.length;o++){var s=e[o].id;-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var r=[],o=0;o<i.length;o++){var s=i[o].id;s!==e.id&&-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")})}},i.prototype.bind=function(e,t){var n=this;this.container=e,e.on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],r=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var o=r.item(t),s=r.matches(e,o);null!==s&&i.push(s)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),r=this._normalizeItem(e);return r.element=t,n.data(t,"data",r),i},i.prototype.item=function(e){var t={};if(null!=(t=n.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],o=0;o<i.length;o++){var s=n(i[o]),a=this.item(s);r.push(a)}t.children=r}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e});var t={selected:!1,disabled:!1};return null!=(e=n.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){function i(e){return function(){return n(this).val()==e.id}}for(var r=this,o=this.$element.find("option"),s=o.map(function(){return r.item(n(this)).id}).get(),a=[],l=0;l<e.length;l++){var c=this._normalizeItem(e[l]);if(n.inArray(c.id,s)>=0){var u=o.filter(i(c)),d=this.item(u),p=n.extend(!0,{},c,d),h=this.option(p);u.replaceWith(h)}else{var f=this.option(c);if(c.children){var g=this.convertToOptions(c.children);t.appendMany(f,g)}a.push(f)}}return a},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var r=n.ajax(e);return r.then(t),r.fail(i),r}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=s.transport(s,function(i){var r=o.processResults(i,e);o.options.get("debug")&&window.console&&console.error&&(r&&r.results&&n.isArray(r.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(r)},function(){i.status&&"0"===i.status||o.trigger("results:message",{message:"errorLoading"})});o._request=i}var r=[],o=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var s=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof s.url&&(s.url=s.url.call(this.$element,e)),"function"==typeof s.data&&(s.data=s.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var r=i.get("tags"),o=i.get("createTag");void 0!==o&&(this.createTag=o);var s=i.get("insertTag");if(void 0!==s&&(this.insertTag=s),t.call(this,n,i),e.isArray(r))for(var a=0;a<r.length;a++){var l=r[a],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return t.prototype.query=function(e,t,n){function i(e,o){for(var s=e.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!i({results:l.children},!0);if(l.text===t.term||c)return!o&&(e.data=s,void n(e))}if(o)return!0;var u=r.createTag(t);if(null!=u){var d=r.option(u);d.attr("data-select2-tag",!0),r.addOptions([d]),r.insertTag(s,u)}e.results=s,n(e)}var r=this;this._removeOldTags(),null!=t.term&&null==t.page?e.call(this,t,i):e.call(this,t,n)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(t){var n=this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function r(t){var n=s._normalizeItem(t);if(!s.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=s.option(n);i.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([i])}o(n)}function o(e){s.trigger("select",{data:e})}var s=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,r);a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),n.term=a.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,r){for(var o=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};a<s.length;){var c=s[a];if(-1!==e.inArray(c,o)){var u=s.substr(0,a),d=l(e.extend({},n,{term:u}));null!=d?(r(d),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(r){var o=null!=r?r.length:0;i.maximumSelectionLength>0&&o>=i.maximumSelectionLength?i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}}):e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e,t){function n(){}return n.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},n.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(t){e(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("focus",function(){n.isOpen()&&r.$search.focus()}),n.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide"))})},n.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},n.prototype.showSearch=function(e,t){return!0},n}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),n.on("query",function(e){r.lastParams=e,r.loading=!0}),n.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,r.$loadingMore[0]);!r.loading&&t&&r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,r=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),r||(r=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,o="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(t){var n=e(this).data("select2-scroll-position");e(this).scrollTop(n.y)}),e(window).on(o+" "+s+" "+a,function(e){r._positionDropdown(),r._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,o="resize.select2."+i.id,s="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(r),e(window).off(r+" "+o+" "+s)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<o.top-a.height,u=l.bottom>o.bottom+a.height,d={left:o.left,top:s.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,n||i||(r="below"),u||!c||n?!c&&u&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=s.top-h.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,r,o,s,a,l,c,u,d,p,h,f,g,m,v,y,_,$,w,b,A,x,E,C,O,S){function T(){this.reset()}return T.prototype.apply=function(d){if(null==(d=e.extend(!0,{},this.defaults,d)).dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,_)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null!=d.query){var S=t(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,S)}if(null!=d.initSelection){var T=t(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,T)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,A)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,b)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=$;else{var D=c.Decorate($,w);d.dropdownAdapter=D}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,E)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,O)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var q=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,q)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=r:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var L=t(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,L)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var P=d.language.split("-")[0];d.language=[d.language,P]}else d.language=[d.language];if(e.isArray(d.language)){var j=new u;d.language.push("en");for(var k=d.language,I=0;I<k.length;I++){var R=k[I],M={};try{M=u.loadPath(R)}catch(e){try{R=this.defaults.amdLanguageBase+R,M=u.loadPath(R)}catch(e){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+R+'" could not be automatically loaded. A fallback will be used instead.');continue}}j.extend(M)}d.translations=j}else{var U=u.loadPath(this.defaults.amdLanguageBase+"en"),H=new u(d.language);H.extend(U),d.translations=H}return d},T.prototype.reset=function(){function t(e){function t(e){return d[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,r){if(""===e.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=e.extend(!0,{},r),s=r.children.length-1;s>=0;s--)null==n(i,r.children[s])&&o.children.splice(s,1);return o.children.length>0?o:n(i,o)}var a=t(r.text).toUpperCase(),l=t(i.term).toUpperCase();return a.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:S,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},T.prototype.set=function(t,n){var i={};i[e.camelCase(t)]=n;var r=c._convertData(i);e.extend(this.defaults,r)},new T}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function r(t,r){if(this.options=t,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var r={};r=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},r);o=i._convertData(o);for(var s in o)t.inArray(s,n)>-1||(t.isPlainObject(this.options[s])?t.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(e){return this.options[e]},r.prototype.set=function(e,t){this.options[e]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var r=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),r.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var r=e.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,"").match(n);if(null!==c&&c.length>=1)return c[1]}return null}return t},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,r){-1===e.inArray(i,n)&&t.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var r=0;r<t.addedNodes.length;r++)t.addedNodes[r].selected&&(n=!0);else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in i){var o=i[e],s={prevented:!1,name:e,args:t};if(n.call(this,o,s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},r.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},r}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var i=e.extend(!0,{},t),r=new n(e(this),i)}),this;if("string"==typeof t){var i,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=n[t].apply(n,o)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n}),"undefined"==typeof Package&&(Package={}),Package["natestrauser:select2"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package.tracker.Tracker,r=Package.tracker.Deps,o=Package.underscore._,a=Package.check.check,s=Package.check.Match,u=Package.random.Random,l,c,f,d,p,m,v;(function(){String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})}).call(this),function(){function e(e){return e=e||"",(e=e.trim())[0]&&(e=e[0].toUpperCase()+e.substr(1).toLowerCase()),e}function t(e){return e=e||"",e=e.toString(),e=e.trim(),e=e.replace(/([a-z\d])([A-Z]+)/g,"$1_$2"),e=e.replace(/[-\s]+/g,"_").toLowerCase()}function n(e){var t=e.lastIndexOf("."),n=e.substring(t,e.length);return-1===t?"":n}l=function i(r){return r=r||"",r=r.toString(),r=r.trim(),r=r.replace(n(r),""),r=t(r),r=r.replace(/[\W_]+/g," "),e(r)}}.call(this),function(){var e=function(e){return e===Object(e)};"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype});var t=function(t){return e(t)&&Object.getPrototypeOf(t)===Object.prototype},n=function e(t){return"string"!=typeof t?null:t.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+$/g,".$")},i=function e(t,n){return"$each"===n?t:t?t+"."+n:n},r=function e(t){var n=t.slice(0,t.indexOf("["));return"$"===n.substring(0,1)?n:null};(c=function(e,a){function s(e,r,u,c,f,d){!c&&u&&"$"===u.substring(0,1)&&(c=u,u=null);var p=!1,m,v=!1;u&&(f||("$push"===c||"$addToSet"===c||"$pop"===c?(t(e)&&"$each"in e?(e=e.$each,r+="[$each]"):u+=".0",f=!0):"$pull"===c&&(u+=".0",t(e)&&(v=!0),f=!0)),m=n(u),p=o.contains(a,m),r&&(l._affectedKeys[r]=u,l._genericAffectedKeys[r]=m,d&&l._positionsInsideArrays.push(r))),v||(o.isArray(e)&&!o.isEmpty(e)?(r&&l._parentPositions.push(r),o.each(e,function(e,t){s(e,r?r+"["+t+"]":t,u+"."+t,c,f,!0)})):(t(e)&&!p||!r)&&(r&&!o.isEmpty(e)&&(l._parentPositions.push(r),l._objectPositions.push(r)),o.each(e,function(t,n){void 0===t?delete e[n]:"$slice"!==n&&s(t,r?r+"["+n+"]":n,i(u,n),c,f,d)})))}function u(){l._affectedKeys={},l._genericAffectedKeys={},l._parentPositions=[],l._positionsInsideArrays=[],l._objectPositions=[],s(l._obj)}var l=this;l._obj=e,l._affectedKeys={},l._genericAffectedKeys={},l._parentPositions=[],l._positionsInsideArrays=[],l._objectPositions=[],s(l._obj),l.forEachNode=function(e,t){if("function"!=typeof e)throw new Error("filter requires a loop function");t=o.extend({endPointsOnly:!0},t);var n={};o.each(l._affectedKeys,function(i,a){t.endPointsOnly&&o.contains(l._parentPositions,a)||e.call({value:l.getValueForPosition(a),operator:r(a),position:a,key:i,genericKey:l._genericAffectedKeys[a],updateValue:function(e){n[a]=e},remove:function(){n[a]=void 0}})}),o.each(n,function(e,t){l.setValueForPosition(t,e)})},l.getValueForPosition=function(e){for(var n,i=e.split("["),r=l._obj,a=0,s=i.length;a<s;a++)if("]"===(n=i[a]).slice(-1)&&(n=n.slice(0,-1)),r=r[n],!o.isArray(r)&&!t(r)&&a<s-1)return;return r},l.setValueForPosition=function(e,n){for(var i,r,a=e.split("["),s=l._obj,c=0,f=a.length;c<f;c++)if("]"===(r=a[c]).slice(-1)&&(r=r.slice(0,-1)),c===f-1)s[r]=n,void 0===n&&delete s[r];else if(void 0===s[r]&&void 0!==n&&(i=a[c+1],i=parseInt(i,10),s[r]=isNaN(i)?{}:[]),s=s[r],!o.isArray(s)&&!t(s)&&c<f-1)return;u()},l.removeValueForPosition=function(e){l.setValueForPosition(e,void 0)},l.getKeyForPosition=function(e){return l._affectedKeys[e]},l.getGenericKeyForPosition=function(e){return l._genericAffectedKeys[e]},l.getInfoForKey=function(e){var t=l.getPositionForKey(e);if(t)return{value:l.getValueForPosition(t),operator:r(t)};for(var n=l.getPositionsForGenericKey(e+".$"),i,o,a=0,s=n.length;a<s;a++)if(i=n[a],o=l.getValueForPosition(i)||l.getValueForPosition(i.slice(0,i.lastIndexOf("["))))return{value:o,operator:r(i)}},l.getPositionForKey=function(e){for(var t in l._affectedKeys)if(l._affectedKeys.hasOwnProperty(t)&&l._affectedKeys[t]===e)return t},l.getPositionsForGenericKey=function(e){var t=[];for(var n in l._genericAffectedKeys)l._genericAffectedKeys.hasOwnProperty(n)&&l._genericAffectedKeys[n]===e&&t.push(n);return t},l.getValueForKey=function(e){var t=l.getPositionForKey(e);if(t)return l.getValueForPosition(t)},l.addKey=function(e,t,n){var i=n?n+"["+e+"]":c._keyToPosition(e);l.setValueForPosition(i,t)},l.removeGenericKeys=function(e){for(var t in l._genericAffectedKeys)l._genericAffectedKeys.hasOwnProperty(t)&&o.contains(e,l._genericAffectedKeys[t])&&l.removeValueForPosition(t)},l.removeGenericKey=function(e){for(var t in l._genericAffectedKeys)l._genericAffectedKeys.hasOwnProperty(t)&&l._genericAffectedKeys[t]===e&&l.removeValueForPosition(t)},l.removeKey=function(e){for(var t in l._affectedKeys)l._affectedKeys.hasOwnProperty(t)&&l._affectedKeys[t]===e&&l.removeValueForPosition(t)},l.removeKeys=function(e){for(var t=0,n=e.length;t<n;t++)l.removeKey(e[t])},l.filterGenericKeys=function(e){var t,n=[],i=[];for(var r in l._genericAffectedKeys)l._genericAffectedKeys.hasOwnProperty(r)&&(t=l._genericAffectedKeys[r],o.contains(n,t)||(n.push(t),t&&!e(t)&&i.push(t)));o.each(i,function(e){l.removeGenericKey(e)})},l.setValueForKey=function(e,t){for(var n in l._affectedKeys)l._affectedKeys.hasOwnProperty(n)&&l._affectedKeys[n]===e&&l.setValueForPosition(n,t)},l.setValueForGenericKey=function(e,t){for(var n in l._genericAffectedKeys)l._genericAffectedKeys.hasOwnProperty(n)&&l._genericAffectedKeys[n]===e&&l.setValueForPosition(n,t)},l.getObject=function(){return l._obj},l.getFlatObject=function(e){e=e||{};var t={};return o.each(l._affectedKeys,function(n,i){("string"!=typeof n||!0!==e.keepArrays||o.contains(l._positionsInsideArrays,i)||o.contains(l._objectPositions,i))&&(e.keepArrays||o.contains(l._parentPositions,i))||(t[n]=l.getValueForPosition(i))}),t},l.affectsKey=function(e){return!!l.getPositionForKey(e)},l.affectsGenericKey=function(e){for(var t in l._genericAffectedKeys)if(l._genericAffectedKeys.hasOwnProperty(t)&&l._genericAffectedKeys[t]===e)return!0;return!1},l.affectsGenericKeyImplicit=function(e){for(var t in l._genericAffectedKeys)if(l._genericAffectedKeys.hasOwnProperty(t)){var n=l._genericAffectedKeys[t];if(n===e)return!0;if(n.substring(0,e.length+1)===e+".")return!0;if(".$"===e.slice(-2)&&e.slice(0,-2)===n)return!0}return!1}}).expandKey=function(e,t,n){for(var i,r,o=t.split("["),a=n,s=0,u=o.length;s<u;s++)"]"===(r=o[s]).slice(-1)&&(r=r.slice(0,-1)),s===u-1?(a[r]=e,void 0===e&&delete a[r]):(i=o[s+1],i=parseInt(i,10),a[r]||(a[r]=isNaN(i)?{}:[])),a=a[r]},c._keyToPosition=function e(t,n){var i="";return o.each(t.split("."),function(e,t){i+=0!==t||n?"["+e+"]":e}),i},c._positionToKey=function e(t){var n=new c({});n.setValueForPosition(t,1);var i=n.getKeyForPosition(t);return n=null,i}}.call(this),function(){f={appendAffectedKey:function e(t,n){return"$each"===n?t:t?t+"."+n:n},shouldCheck:function e(t){if("$pushAll"===t)throw new Error("$pushAll is not supported; use $push + $each");return!o.contains(["$pull","$pullAll","$pop","$slice"],t)},errorObject:function e(t,n,i){return{name:n,type:t,value:i}},isBasicObject:function e(t){return o.isObject(t)&&Object.getPrototypeOf(t)===Object.prototype},safariBugFix:function e(t){return"undefined"!=typeof Uint8Array&&t===Uint8Array||"undefined"!=typeof Uint16Array&&t===Uint16Array||"undefined"!=typeof Uint32Array&&t===Uint32Array||"undefined"!=typeof Uint8ClampedArray&&t===Uint8ClampedArray},isNotNullOrUndefined:function e(t){return void 0!==t&&null!==t},extractOp:function e(t){var n=t.slice(0,t.indexOf("["));return"$"===n.substring(0,1)?n:null},deleteIfPresent:function e(t,n){n in t&&delete t[n]},looksLikeModifier:function e(t){for(var n in t)if(t.hasOwnProperty(n)&&"$"===n.substring(0,1))return!0;return!1},dateToDateString:function e(t){var n=t.getUTCMonth()+1;n<10&&(n="0"+n);var i=t.getUTCDate();return i<10&&(i="0"+i),t.getUTCFullYear()+"-"+n+"-"+i}}}.call(this),function(){function t(t,n,i){function r(e){var r=this.key;if(!o.contains(s,r)){var a=r.lastIndexOf("."),u=-1===a?"":r.slice(0,a+1),l=!1,c=e.call(o.extend({isSet:void 0!==this.value,unset:function(){l=!0},value:this.value,operator:this.operator,field:function(e){var n=t.getInfoForKey(e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}},siblingField:function(e){var n=t.getInfoForKey(u+e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}}},i||{}),t.getObject());if(s.push(r),void 0!==c){var f,d;if(o.isObject(c))for(var p in c)if(c.hasOwnProperty(p)&&"$"===p.substring(0,1)){f=p,d=c[p];break}!f&&n&&"$"!==this.position.slice(0,1)&&(f="$set",d=c),f?(t.removeValueForPosition(this.position),t.setValueForPosition(f+"["+r+"]",d)):t.setValueForPosition(this.position,c)}else l&&t.removeValueForPosition(this.position)}}var a=this,s=[];e.isClient&&void 0===i.userId&&(i.userId=e.userId&&e.userId()||null),o.each(a._autoValues,function(e,i){var a,s,u,l;if(-1!==i.indexOf("$")){var d=i.slice(0,i.lastIndexOf("$")+1);u=i.slice(d.length+1),a=c._keyToPosition(u,!0),u="."+u,l=t.getPositionsForGenericKey(d)}else(l=t.getPositionsForGenericKey(i)).length?(s=i,u="",a=""):(s=i,u="",a="",l=n?["$set["+i+"]"]:[c._keyToPosition(i)]);o.each(l,function(n){r.call({key:(s||c._positionToKey(n))+u,value:t.getValueForPosition(n+a),operator:f.extractOp(n),position:n+a},e)})})}function n(t,n){e.startup(function(){r.autorun(function(){t.isValid()||console.log('SimpleSchema invalid keys for "'+n+'" context:',t.invalidKeys())})})}var i={type:s.Any,label:s.Optional(s.OneOf(String,Function)),optional:s.Optional(s.OneOf(Boolean,Function)),min:s.Optional(s.OneOf(Number,Date,Function)),max:s.Optional(s.OneOf(Number,Date,Function)),minCount:s.Optional(s.OneOf(Number,Function)),maxCount:s.Optional(s.OneOf(Number,Function)),allowedValues:s.Optional(s.OneOf([s.Any],Function)),decimal:s.Optional(Boolean),exclusiveMax:s.Optional(Boolean),exclusiveMin:s.Optional(Boolean),regEx:s.Optional(s.OneOf(RegExp,[RegExp])),custom:s.Optional(Function),blackbox:s.Optional(Boolean),autoValue:s.Optional(Function),defaultValue:s.Optional(s.Any),trim:s.Optional(Boolean)},u=function(e,t){var n;if(o.isArray(e)||o.isObject(e)&&!(e instanceof Date))return e;if(t===String)return void 0!==e&&null!==e&&"string"!=typeof e?e.toString():e;if(t===Number){if("string"==typeof e&&!o.isEmpty(e)){var i=Number(e);return isNaN(i)?e:i}return e}if(t===Date){if("string"==typeof e&&(n=Date.parse(e),!1===isNaN(n)))return new Date(n);if("number"==typeof e)return new Date(e)}return e},p=function(e){return o.each(e,function(t,n){var i,r;if(t){if(s.test(t.type,d))i=".",r=t.type,t.type=Object;else{if(!s.test(t.type,[d]))return;i=".$.",r=t.type[0],t.type=[Object]}o.each(r._schema,function(t,r){var o=n+i+r;o in e||(e[o]=t)})}}),e},m=function(e){o.each(e,function(t,n){if(o.isArray(t.type)||t.type===Array){var i=n+".$";i in e||(e[i]={}),o.isArray(t.type)&&(e[i].type=t.type[0]),t.label&&(e[i].label=t.label),e[i].optional=!0,void 0!==t.min&&(e[i].min=t.min),void 0!==t.max&&(e[i].max=t.max),void 0!==t.allowedValues&&(e[i].allowedValues=t.allowedValues),void 0!==t.decimal&&(e[i].decimal=t.decimal),void 0!==t.exclusiveMax&&(e[i].exclusiveMax=t.exclusiveMax),void 0!==t.exclusiveMin&&(e[i].exclusiveMin=t.exclusiveMin),void 0!==t.regEx&&(e[i].regEx=t.regEx),void 0!==t.blackbox&&(e[i].blackbox=t.blackbox),t.type=Array,o.each(["min","max","allowedValues","decimal","exclusiveMax","exclusiveMin","regEx","blackbox"],function(e){f.deleteIfPresent(t,e)})}})},y=function(e){var t=[],n=[],i,r,a,s;for(o.each(e,function(e,r){for(var o=r.indexOf(".");-1!==o;)".$"===(i=r.substring(0,o)).substring(i.length-2)?o=-1:".$."===r.substring(o,o+3)?(t.push(i),o=r.indexOf(".",o+3)):(n.push(i),o=r.indexOf(".",o+1))}),a=0,s=t.length;a<s;a++)(r=t[a])in e||(e[r]={type:[Object],optional:!0});for(a=0,s=n.length;a<s;a++)(r=n[a])in e||(e[r]={type:Object,optional:!0});return m(e),e},h=function(e){var t={};return o.each(e,function(e){e=s.test(e,d)?e._schema:y(p(e)),o.each(e,function(e,n){t[n]=t[n]||{},o.extend(t[n],e)})}),e.length&&m(t),t},g=function(e,t){var n,i,r={},a;return o.each(e,function(e,s){e.type===Object&&(n=s+".",a=[],o.each(t,function(e){e.startsWith(n)&&-1===(i=e.substring(n.length)).indexOf(".")&&a.push(i)}),r[n]=a)}),r},x=function(e){var t=e,n=t.lastIndexOf(".");if(-1!==n&&"$"===(t=t.substring(n+1))){var i=e.split(".");t=i[i.length-2]}return"_id"===t?"ID":l(t)};(d=function(e,t){var n=this,a=[],u;t=t||{},e=e||{},o.isArray(e)||(e=[e]),n._schema=h(e),n._schemaKeys=[],n._autoValues={},n._blackboxKeys=[],n._validators=[],n._messages={},n._depsMessages=new r.Dependency,n._depsLabels={},o.each(n._schema,function(e,t){if(!s.test(e,i))throw new Error("Invalid definition for "+t+" field.");if(u=t.split(".")[0],n._schemaKeys.push(t),"defaultValue"in e)if("autoValue"in e)console.warn('SimpleSchema: Found both autoValue and defaultValue options for "'+t+'". Ignoring defaultValue.');else{if(".$"===t.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have defaultValue.');n._autoValues[t]=function e(t){return function(){if(null===this.operator&&!this.isSet)return t}}(e.defaultValue)}if("autoValue"in e){if(".$"===t.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have autoValue.');n._autoValues[t]=e.autoValue}n._depsLabels[t]=new r.Dependency,!0===e.blackbox&&n._blackboxKeys.push(t),o.contains(a,u)||a.push(u)}),n._firstLevelSchemaKeys=a,n._objectKeys=g(n._schema,n._schemaKeys),n._validationContexts={}}).extendOptions=function(e){o.extend(i,e)};var b="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z](?:[a-z-]*[a-z])?",_="(?:(?:[0-1]?\\d{1,2}|2[0-4]\\d|25[0-5])(?:\\.|$)){4}",K="(?:(?:[\\dA-Fa-f]{1,4}(?::|$)){8}|(?=(?:[^:\\s]|:[^:\\s])*::(?:[^:\\s]|:[^:\\s])*$)[\\dA-Fa-f]{0,4}(?:::?(?:[\\dA-Fa-f]{1,4}|$)){1,6})",O="(?:"+["(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\.|$))+",_,K].join("|")+")";d.RegEx={Email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Domain:new RegExp("^"+b+"$"),WeakDomain:new RegExp("^"+O+"$"),IP:new RegExp("^(?:"+_+"|"+K+")$"),IPv4:new RegExp("^"+_+"$"),IPv6:new RegExp("^"+K+"$"),Url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,Id:/^[23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz]{17}$/,ZipCode:/^\d{5}(?:[-\s]\d{4})?$/,Phone:/^[0-9---]{2}$|^[+]*(?:[-x-- ().\[\]/~*]*[0-9---]){3,}[-x-- ().\[\]/~0-9---]*(?:;ext=([0-9---]{1,7})|[ \t,]*(?:e?xt(?:ensi(?:o?|))?n?|??|[,x#~]|int|anexo|)[:\.]?[ \t,-]*([0-9---]{1,7})#?|[- ]+([0-9---]{1,5})#)?$/i},d._makeGeneric=function(e){return"string"!=typeof e?null:e.replace(/\.[0-9]+(?=\.|$)/g,".$")},d._depsGlobalMessages=new r.Dependency,d.prototype=new s.Where,d.prototype.condition=function(t){var n=this,i,r;if(o.each(t,function(e,t){"$"===t.substring(0,1)?i=!0:r=!0}),i&&r)throw new s.Error("Object cannot contain modifier operators alongside other keys");var a=n.newContext();if(!a.validate(t,{modifier:i,filter:!1,autoConvert:!1})){var u=a.getErrorObject(),l=new s.Error(u.message);throw l.invalidKeys=u.invalidKeys,e.isServer&&(l.sanitizedError=u.sanitizedError),l}return!0},d.prototype.namedContext=function(t){var i=this;return"string"!=typeof t&&(t="default"),i._validationContexts[t]||(i._validationContexts[t]=new v(i),d.debug&&e.isClient&&r.nonreactive(function(){n(i._validationContexts[t],t)})),i._validationContexts[t]},d._validators=[],d.addValidator=function(e){d._validators.push(e)},d.prototype.addValidator=function(e){this._validators.push(e)},d.prototype.pick=function(){var e=this,t=o.toArray(arguments);t.unshift(e._schema);var n=o.pick.apply(null,t);return new d(n)},d.prototype.omit=function(){var e=this,t=o.toArray(arguments);t.unshift(e._schema);var n=o.omit.apply(null,t);return new d(n)},d.prototype.clean=function(e,n){var i=this;if(n=o.extend({filter:!0,autoConvert:!0,removeEmptyStrings:!0,trimStrings:!0,getAutoValues:!0,isModifier:!1,extendAutoValueContext:{}},n||{}),"$pushAll"in e){console.warn("SimpleSchema.clean: $pushAll is deprecated; converting to $push with $each"),e.$push=e.$push||{};for(var r in e.$pushAll){e.$push[r]=e.$push[r]||{},e.$push[r].$each=e.$push[r].$each||[];for(var a=0,s=e.$pushAll[r].length;a<s;a++)e.$push[r].$each.push(e.$pushAll[r][a]);delete e.$pushAll}}var l=new c(e,i._blackboxKeys);if((n.filter||n.autoConvert||n.removeEmptyStrings||n.trimStrings)&&l.forEachNode(function(){var e=this.genericKey,t,r,o;if(e){if(r=i._schema[e],o=this.value,n.filter&&"$unset"!==this.operator&&!i.allowsKey(e))return"[$each]"===this.position.slice(-7)?l.removeValueForPosition(this.position.slice(0,-7)):this.remove(),void(d.debug&&console.info('SimpleSchema.clean: filtered out value that would have affected key "'+e+'", which is not allowed by the schema'));if(void 0!==o){var a=!1;if(n.autoConvert&&"$unset"!==this.operator&&r){var s=u(o,r.type);n.trimStrings&&"string"==typeof s&&(s=s.trim()),void 0!==s&&s!==o&&(!n.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof s||s.length||(s=void 0,"$set"===this.operator&&this.position.match(/\[.+?\]/g).length<2&&(t=this.position.replace("$set","$unset"),l.setValueForPosition(t,""))),d.debug&&console.info("SimpleSchema.clean: autoconverted value "+o+" from "+typeof o+" to "+typeof s+" for "+e),this.updateValue(s),a=!0)}a||(n.trimStrings&&"string"==typeof o&&(!r||r&&!1!==r.trim)&&this.updateValue(o.trim()),!n.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof o||o.length||(this.remove(),"$set"===this.operator&&this.position.match(/\[.+?\]/g).length<2&&(t=this.position.replace("$set","$unset"),l.setValueForPosition(t,""))))}}},{endPointsOnly:!1}),n.getAutoValues&&t.call(i,l,n.isModifier,n.extendAutoValueContext),n.isModifier)for(var f in e)e.hasOwnProperty(f)&&o.isEmpty(e[f])&&delete e[f];return e},d.prototype.schema=function(e){var t=this;return null!==e&&void 0!==e?t._schema[d._makeGeneric(e)]:t._schema},d.prototype.getDefinition=function(e,t,n){var i=this.schema(e);if(i)return i=o.isArray(t)?o.pick(i,t):o.clone(i),o.each(["min","max","minCount","maxCount","allowedValues","optional","label"],function(e){o.isFunction(i[e])&&(i[e]=i[e].call(n||{}))}),i.label=i.label||x(e),i},d.prototype.keyIsInBlackBox=function(e){var t=this,n=d._makeGeneric(e),i,r;do{-1!==(i=n.lastIndexOf("."))&&(n=n.slice(0,i),r=t.getDefinition(n))}while(-1!==i&&!r);return!(!r||!r.blackbox)},d.prototype.labels=function(e){var t=this;o.each(e,function(e,n){(o.isString(e)||o.isFunction(e))&&n in t._schema&&(t._schema[n].label=e,t._depsLabels[n]&&t._depsLabels[n].changed())})},d.prototype.label=function(e){var t=this;if(null===e||void 0===e){var n={};return o.each(t.schema(),function(e,i){n[i]=t.label(i)}),n}var i=t.getDefinition(e);if(i){var r=d._makeGeneric(e);return t._depsLabels[r]&&t._depsLabels[r].depend(),i.label}return null},d._globalMessages={required:"[label] is required",minString:"[label] must be at least [min] characters",maxString:"[label] cannot exceed [max] characters",minNumber:"[label] must be at least [min]",maxNumber:"[label] cannot exceed [max]",minNumberExclusive:"[label] must be greater than [min]",maxNumberExclusive:"[label] must be less than [max]",minDate:"[label] must be on or after [min]",maxDate:"[label] cannot be after [max]",badDate:"[label] is not a valid date",minCount:"You must specify at least [minCount] values",maxCount:"You cannot specify more than [maxCount] values",noDecimal:"[label] must be an integer",notAllowed:"[value] is not an allowed value",expectedString:"[label] must be a string",expectedNumber:"[label] must be a number",expectedBoolean:"[label] must be a boolean",expectedArray:"[label] must be an array",expectedObject:"[label] must be an object",expectedConstructor:"[label] must be a [type]",regEx:[{msg:"[label] failed regular expression validation"},{exp:d.RegEx.Email,msg:"[label] must be a valid e-mail address"},{exp:d.RegEx.WeakEmail,msg:"[label] must be a valid e-mail address"},{exp:d.RegEx.Domain,msg:"[label] must be a valid domain"},{exp:d.RegEx.WeakDomain,msg:"[label] must be a valid domain"},{exp:d.RegEx.IP,msg:"[label] must be a valid IPv4 or IPv6 address"},{exp:d.RegEx.IPv4,msg:"[label] must be a valid IPv4 address"},{exp:d.RegEx.IPv6,msg:"[label] must be a valid IPv6 address"},{exp:d.RegEx.Url,msg:"[label] must be a valid URL"},{exp:d.RegEx.Id,msg:"[label] must be a valid alphanumeric ID"}],keyNotInSchema:"[key] is not allowed by the schema"},d.messages=function(e){o.extend(d._globalMessages,e),d._depsGlobalMessages.changed()},d.prototype.messages=function(e){var t=this;o.extend(t._messages,e),t._depsMessages.changed()},d.prototype.messageForError=function(e,t,n,i){function r(t){if("regEx"!==e||!o.isArray(t))return t;var n;return l&&(n=o.find(t,function(e){return e.exp&&e.exp.toString()===l})),n||(n=o.findWhere(t,{exp:null}))||(n=o.findWhere(t,{exp:void 0})),n?n.msg:null}var a=this;n=n||a.getDefinition(t,["regEx","label","minCount","maxCount","min","max","type"])||{};var s=e.indexOf("."),u=null;-1!==s&&(u=e.substring(s+1),u=parseInt(u,10),e=e.substring(0,s));var l;"regEx"===e&&(l=null===u||void 0===u||isNaN(u)?n.regEx:n.regEx[u])&&(l=l.toString());var c=e+" "+t,p=d._makeGeneric(t),m=e+" "+p;d._depsGlobalMessages.depend(),a._depsMessages.depend();var v=a._messages[c]||a._messages[m]||a._messages[e];if((v=r(v))||(v=r(v=d._globalMessages[c]||d._globalMessages[m]||d._globalMessages[e])),!v)return"Unknown validation error";v=(v=v.replace("[key]",t)).replace("[label]",a.label(t)),void 0!==n.minCount&&(v=v.replace("[minCount]",n.minCount)),void 0!==n.maxCount&&(v=v.replace("[maxCount]",n.maxCount)),v=void 0!==i&&null!==i?v.replace("[value]",i.toString()):v.replace("[value]","null");var y=n.min,h=n.max;return n.type===Date||n.type===[Date]?(void 0!==y&&(v=v.replace("[min]",f.dateToDateString(y))),void 0!==h&&(v=v.replace("[max]",f.dateToDateString(h)))):(void 0!==y&&(v=v.replace("[min]",y)),void 0!==h&&(v=v.replace("[max]",h))),n.type instanceof Function&&(v=v.replace("[type]",n.type.name)),v},d.prototype.allowsKey=function(e){var t=this;return o.any(t._schemaKeys,function(n){if(n===e)return!0;if(!0===t.schema(n).blackbox){var i=n.length,r=e.slice(0,i+2),o=r.slice(0,-1);if(r===n+".$")return!1;if(o===n+".")return!0}return!1})},d.prototype.newContext=function(){return new v(this)},d.prototype.objectKeys=function(e){var t=this;return e?t._objectKeys[e+"."]||[]:t._firstLevelSchemaKeys},d.prototype.validate=function(e,t){if(Package.check&&Package["audit-argument-checks"])try{a(e)}catch(e){}var n=this.newContext();if(!n.validate(e,t)){var i=n.invalidKeys().map(function(e){return{name:e.name,type:e.type,details:{value:e.value}}}),r=n.keyErrorMessage(i[0].name);throw new Package["mdg:validation-error"].ValidationError(i,r)}},d.prototype.validator=function(e){var t=this;return e=e||{},function(n){!0===e.clean&&t.clean(n,e),t.validate(n)}}}.call(this),function(){function e(e,t,n){var i=e.type;if(i===String){if("string"!=typeof t)return"expectedString";if(null!==e.max&&e.max<t.length)return"maxString";if(null!==e.min&&e.min>t.length)return"minString";if(e.regEx instanceof RegExp&&!e.regEx.test(t))return"regEx";if(o.isArray(e.regEx)){var r;if(o.every(e.regEx,function(e,n){return!!e.test(t)||(r="regEx."+n,!1)}),r)return r}}else if(i===Number){if("number"!=typeof t||isNaN(t))return"expectedNumber";if("$inc"!==n&&null!==e.max&&(e.exclusiveMax?e.max<=t:e.max<t))return e.exclusiveMax?"maxNumberExclusive":"maxNumber";if("$inc"!==n&&null!==e.min&&(e.exclusiveMin?e.min>=t:e.min>t))return e.exclusiveMin?"minNumberExclusive":"minNumber";if(!e.decimal&&t.toString().indexOf(".")>-1)return"noDecimal"}else if(i===Boolean){if("boolean"!=typeof t)return"expectedBoolean"}else if(i===Object){if(!f.isBasicObject(t))return"expectedObject"}else if(i===Array){if(!o.isArray(t))return"expectedArray";if(null!==e.minCount&&t.length<e.minCount)return"minCount";if(null!==e.maxCount&&t.length>e.maxCount)return"maxCount"}else if(i instanceof Function||f.safariBugFix(i)){if(!(t instanceof i))return"expectedConstructor";if(i===Date){if(isNaN(t.getTime()))return"badDate";if(o.isDate(e.min)&&e.min.getTime()>t.getTime())return"minDate";if(o.isDate(e.max)&&e.max.getTime()<t.getTime())return"maxDate"}}}p=function t(n,i,r,a,s,u){function l(t,i,r,a,l,p,m,h){if(a)if(p||a.optional||null!==t&&"$unset"!==l&&"$rename"!==l&&(void 0!==t||!m&&!h&&l&&"$set"!==l))if("$rename"!==l||"string"!=typeof t||s.allowsKey(t)){if("$unset"!==l&&"$rename"!==l&&f.isNotNullOrUndefined(t)){var g=e(a,t,l);if(g)return void v.push(f.errorObject(g,i,t,a,s));if(a.allowedValues&&!o.contains(a.allowedValues,t))return void v.push(f.errorObject("notAllowed",i,t,a,s))}var x=i.lastIndexOf("."),b=-1===x?"":i.slice(0,x+1),_=a.custom?[a.custom]:[];_=_.concat(s._validators).concat(d._validators),o.every(_,function(e){var d=e.call(o.extend({key:i,genericKey:r,definition:a,isSet:void 0!==t,value:t,operator:l,field:function(e){var t=(y=y||new c(n,s._blackboxKeys)).getInfoForKey(e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}},siblingField:function(e){var t=(y=y||new c(n,s._blackboxKeys)).getInfoForKey(b+e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}}},u||{}));return"string"!=typeof d||(v.push(f.errorObject(d,i,t,a,s)),!1)})}else v.push(f.errorObject("keyNotInSchema",t,null,null,s));else v.push(f.errorObject("required",i,null,a,s));else v.push(f.errorObject("keyNotInSchema",i,t,a,s))}function p(e,t,n,i,r,u){var c,m;if(t){if(s.keyIsInBlackBox(t))return;if(c=d._makeGeneric(t),m=s.getDefinition(t),!a||a===t||a===c){var v=o.some(i,function(e){return e.slice(0,t.length+1)===t+"."});l(e,t,c,m,n,v,r,u)}}if(void 0!==e&&null!==e||m&&(m.type!==Object||m.optional)||(e={}),o.isArray(e))o.each(e,function(e,r){p(e,t+"."+r,n,i)});else if(f.isBasicObject(e)&&(!m||!m.blackbox)){var y=o.keys(e),h=o.union(y,s.objectKeys(c));r=c&&".$"===c.slice(-2),o.each(h,function(o){p(e[o],f.appendAffectedKey(t,o),n,i,r,!0)})}}function m(e){if(o.isEmpty(e))throw new Error("When the modifier option is true, validation object must have at least one operator");var t=o.keys(e.$set||{}).concat(o.keys(e.$setOnInsert||{}));"$setOnInsert"in e&&(r&&(e.$set=e.$set||{},e.$set=o.extend(e.$set,e.$setOnInsert)),delete e.$setOnInsert),o.each(e,function(e,n){if("$"!==n.slice(0,1))throw new Error("When the modifier option is true, all validation object keys must be operators. Did you forget `$set`?");if(f.shouldCheck(n)){if(r&&"$set"===n){var i=o.keys(e);o.each(s.objectKeys(),function(e){o.contains(i,e)||p(void 0,e,n,t)})}o.each(e,function(e,i){"$push"!==n&&"$addToSet"!==n||(f.isBasicObject(e)&&"$each"in e?e=e.$each:i+=".0"),p(e,i,n,t)})}})}if(!o.isObject(n))throw new Error("The first argument of validate() or validateOne() must be an object");if(!i&&f.looksLikeModifier(n))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");var v=[],y;i?m(n):p(n);var h=[];return v=o.filter(v,function(e){return!o.contains(h,e.name)&&(h.push(e.name),!0)})}}.call(this),function(){function t(e,t,n){var i=e.type;if(i===String){if("string"!=typeof t)return"expectedString";if(null!==e.max&&e.max<t.length)return"maxString";if(null!==e.min&&e.min>t.length)return"minString";if(e.regEx instanceof RegExp&&!e.regEx.test(t))return"regEx";if(o.isArray(e.regEx)){var r;if(o.every(e.regEx,function(e,n){return!!e.test(t)||(r="regEx."+n,!1)}),r)return r}}else if(i===Number){if("number"!=typeof t||isNaN(t))return"expectedNumber";if("$inc"!==n&&null!==e.max&&(e.exclusiveMax?e.max<=t:e.max<t))return e.exclusiveMax?"maxNumberExclusive":"maxNumber";if("$inc"!==n&&null!==e.min&&(e.exclusiveMin?e.min>=t:e.min>t))return e.exclusiveMin?"minNumberExclusive":"minNumber";if(!e.decimal&&t.toString().indexOf(".")>-1)return"noDecimal"}else if(i===Boolean){if("boolean"!=typeof t)return"expectedBoolean"}else if(i===Object){if(!f.isBasicObject(t))return"expectedObject"}else if(i===Array){if(!o.isArray(t))return"expectedArray";if(null!==e.minCount&&t.length<e.minCount)return"minCount";if(null!==e.maxCount&&t.length>e.maxCount)return"maxCount"}else if(i instanceof Function||f.safariBugFix(i)){if(!(t instanceof i))return"expectedConstructor";if(i===Date){if(isNaN(t.getTime()))return"badDate";if(o.isDate(e.min)&&e.min.getTime()>t.getTime())return"minDate";if(o.isDate(e.max)&&e.max.getTime()<t.getTime())return"maxDate"}}}function n(t,n,i){var r=new e.Collection(null),a;if(i)a=u.id(),r.upsert({_id:a},t);else{var s=new c(t),l=new c({});o.each(n,function(e,t){var n;if(e.type===Array&&s.affectsGenericKey(t)?n=[]:e.optional||(n=e.type===Boolean||(e.type===Number?e.min||0:e.type===Date?e.min||new Date:e.type===Array?[]:e.type===Object?{}:"0")),void 0!==n){var i=t.replace(/\.\$/g,".0"),r=c._keyToPosition(i,!1);l.setValueForPosition(r,n)}}),l=l.getObject(),a=r.insert(l),r.update(a,t)}var f=r.findOne(a);return r.remove(a),n._id||delete f._id,f}m=function e(i,r,a,s,u,l){function p(e,n,r,a,s,p,m){if(a)if(p||a.optional||null!==e&&void 0!==e){if(f.isNotNullOrUndefined(e)){var h=t(a,e,s);if(h)return void v.push(f.errorObject(h,n,e,a,u));if(a.allowedValues&&!o.contains(a.allowedValues,e))return void v.push(f.errorObject("notAllowed",n,e,a,u))}var g=n.lastIndexOf("."),x=-1===g?"":n.slice(0,g+1),b=a.custom?[a.custom]:[];b=b.concat(u._validators).concat(d._validators),o.every(b,function(t){var d=t.call(o.extend({key:n,genericKey:r,definition:a,isSet:void 0!==e,value:e,operator:s,field:function(e){var t=(y=y||new c(i,u._blackboxKeys)).getInfoForKey(e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}},siblingField:function(e){var t=(y=y||new c(i,u._blackboxKeys)).getInfoForKey(x+e)||{};return{isSet:void 0!==t.value,value:t.value,operator:t.operator}}},l||{}));return"string"!=typeof d||(v.push(f.errorObject(d,n,e,a,u)),!1)})}else v.push(f.errorObject("required",n,null,a,u));else v.push(f.errorObject("keyNotInSchema",n,e,a,u))}function m(e,t,n,i){var r,a;if(t){if(u.keyIsInBlackBox(t))return;r=d._makeGeneric(t),a=u.getDefinition(t),s&&s!==t&&s!==r||p(e,t,r,a,null,n,i)}if(void 0!==e&&null!==e||a&&(a.type!==Object||a.optional)||(e={}),o.isArray(e))o.each(e,function(e,n){m(e,t+"."+n)});else if(f.isBasicObject(e)&&(!a||!a.blackbox)){var l=o.keys(e),c=o.union(l,u._schemaKeys);i=r&&".$"===r.slice(-2),o.each(c,function(r){f.shouldCheck(r)&&m(e[r],f.appendAffectedKey(t,r),n,i)})}}if(!o.isObject(i))throw new Error("The first argument of validate() or validateOne() must be an object");if(r){if(o.isEmpty(i))throw new Error("When the modifier option is true, validation object must have at least one operator");if(!o.every(i,function(e,t){return"$"===t.substring(0,1)}))throw new Error("When the modifier option is true, all validation object keys must be operators");i=n(i,u.schema(),a)}else if(f.looksLikeModifier(i))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");var v=[],y;m(i);var h=[];return v=o.filter(v,function(e){return!o.contains(h,e.name)&&(h.push(e.name),!0)})}}.call(this),function(){function t(e,t,n,i,r,o){var a=!0;return p(e,t,n,i,r,o)}(v=function e(t){var n=this;n._simpleSchema=t,n._schema=t.schema(),n._schemaKeys=o.keys(n._schema),n._invalidKeys=[],n._deps={},n._depsAny=new r.Dependency,o.each(n._schemaKeys,function(e){n._deps[e]=new r.Dependency})}).prototype.validate=function n(i,r){var a=this;r=o.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},r||{}),e.isClient&&void 0===r.extendedCustomContext.userId&&(r.extendedCustomContext.userId=e.userId&&e.userId()||null);var s=t(i,r.modifier,r.upsert,null,a._simpleSchema,r.extendedCustomContext),u=o.pluck(a._invalidKeys,"name");a._invalidKeys=s;var l=o.pluck(a._invalidKeys,"name"),c=o.union(l,u);return a._markKeysChanged(c),0===a._invalidKeys.length},v.prototype.validateOne=function n(i,r,a){var s=this,u,l,c;a=o.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},a||{}),e.isClient&&void 0===a.extendedCustomContext.userId&&(a.extendedCustomContext.userId=e.userId&&e.userId()||null);var f=t(i,a.modifier,a.upsert,r,s._simpleSchema,a.extendedCustomContext),d=[];for(u=0,l=s._invalidKeys.length;u<l;u++)(c=s._invalidKeys[u]).name!==r&&d.push(c);for(s._invalidKeys=d,u=0,l=f.length;u<l;u++)c=f[u],s._invalidKeys.push(c);return s._markKeysChanged([r]),!s._keyIsInvalid(r)},v.prototype.resetValidation=function e(){var t=this,n=o.pluck(t._invalidKeys,"name");t._invalidKeys=[],t._markKeysChanged(n)},v.prototype.isValid=function e(){var t=this;return t._depsAny.depend(),!t._invalidKeys.length},v.prototype.invalidKeys=function e(){var t=this;return t._depsAny.depend(),t._invalidKeys},v.prototype.addInvalidKeys=function e(t){var n=this;if(t&&t.length){var i=[];o.each(t,function(e){i.push(e.name),n._invalidKeys.push(e)}),n._markKeysChanged(i)}},v.prototype._markKeysChanged=function e(t){var n=this;t&&t.length&&(o.each(t,function(e){var t=d._makeGeneric(e);t in n._deps&&n._deps[t].changed()}),n._depsAny.changed())},v.prototype._getInvalidKeyObject=function e(t,n){var i=this;n=n||d._makeGeneric(t);var r=o.findWhere(i._invalidKeys,{name:t});return r||(r=o.findWhere(i._invalidKeys,{name:n})),r},v.prototype._keyIsInvalid=function e(t,n){return!!this._getInvalidKeyObject(t,n)},v.prototype.keyIsInvalid=function e(t){var n=this,i=d._makeGeneric(t);return n._deps[i]&&n._deps[i].depend(),n._keyIsInvalid(t,i)},v.prototype.keyErrorMessage=function e(t){var n=this,i=d._makeGeneric(t);n._deps[i]&&n._deps[i].depend();var r=n._getInvalidKeyObject(t,i);return r?n._simpleSchema.messageForError(r.type,r.name,null,r.value):""},v.prototype.getErrorObject=function t(){var n=this,i,r=this._invalidKeys;r.length?(i=n.keyErrorMessage(r[0].name),r=o.map(r,function(e){return o.extend({message:n.keyErrorMessage(e.name)},e)})):i="Failed validation";var a=new Error(i);return a.invalidKeys=r,e.isServer&&(a.sanitizedError=new e.Error(400,i)),a}}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["aldeed:simple-schema"]={},{SimpleSchema:d,MongoObject:c,humanize:l})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.tracker.Tracker,r=Package.tracker.Deps,o=Package.retry.Retry,i=Package["ddp-client"].DDP,s=Package.mongo.Mongo,c=Package.underscore._,u,l;(function(){var t=__meteor_runtime_config__.autoupdateVersion||"unknown",n=__meteor_runtime_config__.autoupdateVersionRefreshable||"unknown";u=new s.Collection("meteor_autoupdate_clientVersions"),(l={}).newClientAvailable=function(){return!!u.findOne({_id:"version",version:{$ne:t}})||!!u.findOne({_id:"version-refreshable",version:{$ne:n}})},l._ClientVersions=u;var a=!1,r=new o({minCount:0,baseTimeout:3e4}),i=0;l._retrySubscription=function(){e.subscribe("meteor_autoupdate_clientVersions",{onError:function(t){e._debug("autoupdate subscription failed:",t),i++,r.retryLater(i,function(){l._retrySubscription()})},onReady:function(){if(Package.reload)var r=function(r){var i=this;if("version-refreshable"===r._id&&r.version!==n){n=r.version;var s=r.assets&&r.assets.allCss||[],u=[];c.each(document.getElementsByTagName("link"),function(e){"__meteor-css__"===e.className&&u.push(e)});var l=function(t,n){var r=c.once(n);if(t.onload=function(){a=!0,r()},!a)var o=e.setInterval(function(){t.sheet&&(r(),e.clearInterval(o))},50)},d=c.after(s.length,function(){c.each(u,function(e){e.parentNode.removeChild(e)})}),f=function(t){document.getElementsByTagName("head").item(0).appendChild(t),l(t,function(){e.setTimeout(d,200)})};0!==s.length?c.each(s,function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("class","__meteor-css__"),t.setAttribute("href",e.url),f(t)}):d()}else"version"===r._id&&r.version!==t&&(o&&o.stop(),Package.reload&&Package.reload.Reload._reload())},o=u.find().observe({added:r,changed:r})}})},l._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.autoupdate={},{Autoupdate:l})}();

"undefined"==typeof Package&&(Package={}),Package["meteor-platform"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,o=Package.modules.meteorInstall,r=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,s=Package["ecmascript-runtime-client"].Symbol,i=Package["ecmascript-runtime-client"].Map,m=Package["ecmascript-runtime-client"].Set,u,l=o({node_modules:{meteor:{webapp:{"webapp_client.js":function(e,t,n){n.export({WebApp:function(){return o}});var o={_isCssLoaded:function(){return 0===document.styleSheets.length||a.find(document.styleSheets,function(e){return e.cssText&&!e.cssRules?!e.cssText.match(/meteor-css-not-found-error/):!a.find(e.cssRules,function(e){return".meteor-css-not-found-error"===e.selectorText})})}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/webapp/webapp_client.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.webapp=l,{WebApp:void 0})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.underscore._,i=Package.ejson.EJSON,f,o;(0,Package.modules.meteorInstall)({node_modules:{meteor:{logging:{"logging.js":function(t){var n=0,o=[],a=0;(f=function(){return f.info.apply(this,arguments)})._intercept=function(e){n+=e},f._suppress=function(e){a+=e},f._intercepted=function(){var e=o;return o=[],n=0,e},f.outputFormat="json";var c={debug:"green",warn:"magenta",error:"red"},s="blue",l="object"==typeof process&&"win32"===process.platform,u=function(e){return l&&"string"==typeof e&&"Bright"!==e.slice(-6)?e+"Bright":e},p=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],d=p.concat(["app","message"]),h=function(t){var n=f.format(t),r=t.level;"undefined"!=typeof console&&console[r]?console[r](n):e._debug(n)};f._getCallerDetails=function(){var e=function(){return(new Error).stack}();if(!e)return{};for(var t=e.split("\n"),n,r=1;r<t.length;++r){if((n=t[r]).match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/(?:local-test[:_])?logging(?:\/|\.js)/))break}var i={},f=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return f?(i.line=f[2].split(":")[0],i.file=f[1].split("/").slice(-1)[0].split("?")[0],i):i},r.each(["debug","info","warn","error"],function(t){f[t]=function(c){if(a)a--;else{var s=!1;n&&(n--,s=!0);var l=!r.isObject(c)||r.isRegExp(c)||r.isDate(c)?{message:new String(c).toString()}:c;if(r.each(p,function(e){if(l[e])throw new Error("Can't set '"+e+"' in log message")}),r.has(l,"message")&&!r.isString(l.message))throw new Error("The 'message' field in log objects must be a string");if(l.omitCallerDetails||(l=r.extend(f._getCallerDetails(),l)),l.time=new Date,l.level=t,"debug"!==t)if(s)o.push(i.stringify(l));else if(e.isServer)if("colored-text"===f.outputFormat)console.log(f.format(l,{color:!0}));else{if("json"!==f.outputFormat)throw new Error("Unknown logging output format: "+f.outputFormat);console.log(i.stringify(l))}else h(l)}}}),f.parse=function(e){var t=null;if(e&&"{"===e.charAt(0))try{t=i.parse(e)}catch(e){}return t&&t.time&&t.time instanceof Date?t:null},f.format=function(n,f){n=i.clone(n),f=f||{};var o=n.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var a=n.timeInexact,s=n.level||"info",l=n.file,p=n.line,h=n.app||"",m=n.originApp,g=n.message||"",b=n.program||"",v=n.satellite,y=n.stderr||"";r.each(d,function(e){delete n[e]}),r.isEmpty(n)||(g&&(g+=" "),g+=i.stringify(n));var x=function(e){return e<10?"0"+e:e.toString()},j=function(e){return e<100?"0"+x(e):e.toString()},O=o.getFullYear().toString()+x(o.getMonth()+1)+x(o.getDate()),w=x(o.getHours())+":"+x(o.getMinutes())+":"+x(o.getSeconds())+"."+j(o.getMilliseconds()),_="("+-(new Date).getTimezoneOffset()/60+")",A="";h&&(A+=h),m&&m!==h&&(A+=" via "+m),A&&(A="["+A+"] ");var N=[];b&&N.push(b),l&&N.push(l),p&&N.push(p);var z=r.isEmpty(N)?"":"("+N.join(":")+") ";v&&(z+=["[",v,"]"].join(""));var P=y?"(STDERR) ":"",S=function(n,r){return f.color&&e.isServer&&r?t("cli-color")[r](n):n};return S([s.charAt(0).toUpperCase(),O,"-",w,_,a?"? ":" ",A,z,P].join(""),u(f.metaColor||"blue"))+S(g,u(c[s]))},f.objFromText=function(e,t){var n={message:e,level:"info",time:new Date,timeInexact:!0};return r.extend(n,t)}},node_modules:{"cli-color":{"package.json":function(e,t){t.name="cli-color",t.version="0.2.3",t.main="lib"},lib:{"index.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Object/descriptor"),i=e("es5-ext/lib/Object/extend"),f=e("es5-ext/lib/Object/map"),o=e("es5-ext/lib/Object/reduce"),a=e("es5-ext/lib/String/prototype/repeat"),c=e("memoizee"),s=e("tty"),l=Array.prototype.join,u=Object.defineProperty,p=Object.defineProperties,d=Math.abs,h=Math.floor,m=Math.max,g=Math.min,b,v,y,x,j,O,w,_,A,N,z;b=i({bold:{_bold:[1,22]},italic:{_italic:[3,23]},underline:{_underline:[4,24]},blink:{_blink:[5,25]},inverse:{_inverse:[7,27]},strike:{_strike:[9,29]}},["black","red","green","yellow","blue","magenta","cyan","white"].reduce(function(e,t,n){return e[t]={_fg:[30+n,39]},e[t+"Bright"]={_fg:[90+n,39]},e["bg"+t[0].toUpperCase()+t.slice(1)]={_bg:[40+n,49]},e["bg"+t[0].toUpperCase()+t.slice(1)+"Bright"]={_bg:[100+n,49]},e},{})),z=c(function(e,t){return u(y(),"_cliColorData",r(i({},e._cliColorData,t)))}),v=Object.create(Function.prototype,i(f(b,function(e){return r.gs(function(){return z(this,e)})}),{xterm:r(c(function(e){return e=isNaN(e)?255:g(m(e,0),255),u(y(),"_cliColorData",r(i({},this._cliColorData,{_fg:[j?j[e]:"38;5;"+e,39]})))},{method:"xterm"})),bgXterm:r(c(function(e){return e=isNaN(e)?255:g(m(e,0),255),u(y(),"_cliColorData",r(i({},this._cliColorData,{_bg:[j?j[e]+10:"48;5;"+e,49]})))},{method:"bgXterm"}))})),"win32"===process.platform&&(j=e("./_xterm-match")),y=function(){var e=function(){var t=e._cliColorData,n="";return o(t,function(e,t){return n="["+t[1]+"m"+n,e+"["+t[0]+"m"},"",!0)+l.call(arguments," ")+n};return e.__proto__=v,e},x=function(e){return function(t){return(t=isNaN(t)?0:m(h(t),0))?"["+t+e:""}},n.exports=p(y(),{width:r.gs(process.stdout.getWindowSize?function(){return process.stdout.getWindowSize()[0]}:function(){return s.getWindowSize?s.getWindowSize()[1]:0}),height:r.gs(N=process.stdout.getWindowSize?function(){return process.stdout.getWindowSize()[1]}:function(){return s.getWindowSize?s.getWindowSize()[0]:0}),reset:r.gs(function(){return a.call("\n",N()-1)+"c"}),up:r(O=x("A")),down:r(w=x("B")),right:r(_=x("C")),left:r(A=x("D")),move:r(function(e,t){return e=isNaN(e)?0:h(e),t=isNaN(t)?0:h(t),(e>0?_(e):A(-e))+(t>0?w(t):O(-t))}),moveTo:r(function(e,t){return e=isNaN(e)?1:m(h(e),0)+1,"["+(t=isNaN(t)?1:m(h(t),0)+1)+";"+e+"H"}),bol:r(function(e){var t;return e=isNaN(e)?0:Number(e),t=e>=0?"E":"F",e=h(d(e)),arguments[1]?(e&&"F"!==t?"":"[0EK")+a.call("[1"+t+"[K",e):"["+e+t}),beep:r(""),xtermSupported:r(!j),_cliColorData:r({})})},"_xterm-match.js":function(e,t,n){"use strict";var r=Array.prototype.push,i=Array.prototype.reduce,f=Math.abs,o,a,c,s;for(o=e("./_xterm-colors").map(function(e){return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4),16)}}),a=o.slice(0,16),n.exports=c=[],s=0;s<8;)c.push(30+s++);for(s=0;s<8;)c.push(90+s++);r.apply(c,o.slice(16).map(function(e){var t,n=1/0;return a.every(function(r,o){var a=i.call("rgb",function(t,n){return t+=f(r[n]-e[n])},0);return a<n&&(t=o,n=a),a}),c[t]}))},"_xterm-colors.js":function(e,t,n){"use strict";n.exports=["000000","800000","008000","808000","000080","800080","008080","c0c0c0","808080","ff0000","00ff00","ffff00","0000ff","ff00ff","00ffff","ffffff","000000","00005f","000087","0000af","0000d7","0000ff","005f00","005f5f","005f87","005faf","005fd7","005fff","008700","00875f","008787","0087af","0087d7","0087ff","00af00","00af5f","00af87","00afaf","00afd7","00afff","00d700","00d75f","00d787","00d7af","00d7d7","00d7ff","00ff00","00ff5f","00ff87","00ffaf","00ffd7","00ffff","5f0000","5f005f","5f0087","5f00af","5f00d7","5f00ff","5f5f00","5f5f5f","5f5f87","5f5faf","5f5fd7","5f5fff","5f8700","5f875f","5f8787","5f87af","5f87d7","5f87ff","5faf00","5faf5f","5faf87","5fafaf","5fafd7","5fafff","5fd700","5fd75f","5fd787","5fd7af","5fd7d7","5fd7ff","5fff00","5fff5f","5fff87","5fffaf","5fffd7","5fffff","870000","87005f","870087","8700af","8700d7","8700ff","875f00","875f5f","875f87","875faf","875fd7","875fff","878700","87875f","878787","8787af","8787d7","8787ff","87af00","87af5f","87af87","87afaf","87afd7","87afff","87d700","87d75f","87d787","87d7af","87d7d7","87d7ff","87ff00","87ff5f","87ff87","87ffaf","87ffd7","87ffff","af0000","af005f","af0087","af00af","af00d7","af00ff","af5f00","af5f5f","af5f87","af5faf","af5fd7","af5fff","af8700","af875f","af8787","af87af","af87d7","af87ff","afaf00","afaf5f","afaf87","afafaf","afafd7","afafff","afd700","afd75f","afd787","afd7af","afd7d7","afd7ff","afff00","afff5f","afff87","afffaf","afffd7","afffff","d70000","d7005f","d70087","d700af","d700d7","d700ff","d75f00","d75f5f","d75f87","d75faf","d75fd7","d75fff","d78700","d7875f","d78787","d787af","d787d7","d787ff","d7af00","d7af5f","d7af87","d7afaf","d7afd7","d7afff","d7d700","d7d75f","d7d787","d7d7af","d7d7d7","d7d7ff","d7ff00","d7ff5f","d7ff87","d7ffaf","d7ffd7","d7ffff","ff0000","ff005f","ff0087","ff00af","ff00d7","ff00ff","ff5f00","ff5f5f","ff5f87","ff5faf","ff5fd7","ff5fff","ff8700","ff875f","ff8787","ff87af","ff87d7","ff87ff","ffaf00","ffaf5f","ffaf87","ffafaf","ffafd7","ffafff","ffd700","ffd75f","ffd787","ffd7af","ffd7d7","ffd7ff","ffff00","ffff5f","ffff87","ffffaf","ffffd7","ffffff","080808","121212","1c1c1c","262626","303030","3a3a3a","444444","4e4e4e","585858","626262","6c6c6c","767676","808080","8a8a8a","949494","9e9e9e","a8a8a8","b2b2b2","bcbcbc","c6c6c6","d0d0d0","dadada","e4e4e4","eeeeee"]}},node_modules:{"es5-ext":{lib:{Object:{"descriptor.js":function(e,t,n){"use strict";var r=e("./is-callable"),i=e("./valid-callable"),f=e("./valid-value"),o=e("./copy"),a=e("./map"),c=e("../String/is-string"),s=e("../String/prototype/contains"),l=Function.prototype.bind,u=Object.defineProperty,p;(p=n.exports=function(e,t){var n,r,i;return arguments.length<2&&(t=e,e=null),null==e?(n=i=!0,r=!1):(n=s.call(e,"c"),r=s.call(e,"e"),i=s.call(e,"w")),{value:t,configurable:n,enumerable:r,writable:i}}).gs=function(e,t,n){var f,o;return r(e)?(n=null==t?void 0:i(t),t=e,e=null):(t=null==t?void 0:i(t),n=null==n?void 0:i(n)),null==e?(f=!0,o=!1):(f=s.call(e,"c"),o=s.call(e,"e")),{get:t,set:n,configurable:f,enumerable:o}},p.binder=function e(t,n){var r,s;return c(t)?(r=f(n)&&i(n.value),s=o(n),delete s.writable,delete s.value,s.get=function(){return n.value=l.call(r,this),u(this,t,n),this[t]},s):a(t,function(t,n){return e(n,t)})}},"is-callable.js":function(e,t,n){"use strict";var r=Array.prototype.forEach.bind([]);n.exports=function(e){var t;if(!e)return!1;if("function"==(t=typeof e))return!0;if("object"!==t)return!1;try{return r(e),!0}catch(e){if(e instanceof TypeError)return!1;throw e}}},"valid-callable.js":function(e,t,n){"use strict";var r=e("./is-callable");n.exports=function(e){if(!r(e))throw new TypeError(e+" is not a function");return e}},"valid-value.js":function(e,t,n){"use strict";n.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},"copy.js":function(e,t,n){"use strict";var r=e("./is-plain-object"),i=e("./for-each"),f=e("./extend"),o=e("./valid-value"),a;a=function(e,t,n){i(t,function(t,i){var o;r(t)&&(-1===(o=n[0].indexOf(t))?(n[0].push(t),n[1].push(e[i]=f({},t)),a(e[i],t,n)):e[i]=n[1][o])},t)},n.exports=function(e){var t;return(t=Object(o(e)))===e&&(t=f({},e),arguments[1]&&a(t,e,[[e],[t]])),t}},"is-plain-object.js":function(e,t,n){"use strict";var r=Object.getPrototypeOf,i=Object.prototype,f=i.toString,o={}.toString();n.exports=function(e){var t;return!(!e||"object"!=typeof e||f.call(e)!==o)&&((t=r(e))===i||null===r(t))}},"for-each.js":function(e,t,n){"use strict";n.exports=e("./_iterate")("forEach")},"_iterate.js":function(e,t,n){"use strict";var r=e("./is-callable"),i=e("./valid-callable"),f=e("./valid-value"),o=Function.prototype.call,a=Object.keys;n.exports=function(e){return function(t,n){var c,s=arguments[2],l=arguments[3];return t=Object(f(t)),i(n),c=a(t),l&&c.sort(r(l)?l.bind(t):void 0),c[e](function(e,r){return o.call(n,s,t[e],e,t,r)})}}},"extend.js":function(e,t,n){"use strict";var r=e("./valid-value"),i=Array.prototype.forEach,f=Array.prototype.slice,o=Object.keys,a;a=function(e){o(Object(e)).forEach(function(t){this[t]=e[t]},this)},n.exports=function(e){return i.call(arguments,r),f.call(arguments,1).forEach(a,e),e}},"map.js":function(e,t,n){"use strict";var r=e("./valid-callable"),i=e("./for-each"),f=Function.prototype.call;n.exports=function(e,t){var n={},o=arguments[2];return r(t),i(e,function(e,r,i,a){n[r]=f.call(t,o,e,r,i,a)}),n}},"reduce.js":function(e,t,n){"use strict";var r=e("./is-callable"),i=e("./valid-callable"),f=e("./valid-value"),o=Function.prototype.call,a=Object.keys;n.exports=t=function e(t,n){var c,s,l,u,p;return f(t)&&i(n),t=Object(t),l=arguments[2],u=arguments[3],c=a(t),u&&c.sort(r(u)?u.bind(t):void 0),s=function(e,r,i){return p?o.call(n,void 0,e,t[r],r,t,i):(p=!0,o.call(n,void 0,t[e],t[r],r,t,i,e))},arguments.length<3||l===e.NO_INITIAL?c.reduce(s):(p=!0,c.reduce(s,l))},t.NO_INITIAL={}},"is.js":function(e,t,n){"use strict";n.exports=function(e,t){return e===t?0!==e||1/e==1/t:e!==e&&t!==t}},"is-empty.js":function(e,t,n){"use strict";var r=e("./valid-value");n.exports=function(e){var t;r(e);for(t in e)if(e.propertyIsEnumerable(t))return!1;return!0}}},String:{"is-string.js":function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");n.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},prototype:{"contains.js":function(e,t,n){"use strict";var r=String.prototype.indexOf;n.exports=function(e){return r.call(this,e,arguments[1])>-1}},"repeat.js":function(e,t,n){"use strict";var r=e("../../Object/valid-value"),i=e("../../Number/to-uint");n.exports=function(e){return new Array((isNaN(e)?1:i(e))+1).join(String(r(this)))}}}},Number:{"to-uint.js":function(e,t,n){"use strict";var r=e("./to-int"),i=Math.max;n.exports=function(e){return i(0,r(e))}},"to-int.js":function(e,t,n){"use strict";var r=e("../Math/sign"),i=Math.abs,f=Math.floor;n.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?r(e)*f(i(e)):e}},"is-nan.js":function(e,t,n){"use strict";n.exports=function(e){return e!==e}},"is-number.js":function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(1);n.exports=function(e){return"number"==typeof e||e instanceof Number||"object"==typeof e&&r.call(e)===i}}},Math:{"sign.js":function(e,t,n){"use strict";n.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}}},Error:{"custom.js":function(e,t,n){"use strict";var r=e("../Object/descriptor"),i=e("../Object/extend"),f=Error.captureStackTrace,o;(o=n.exports=function e(t,n){var r=arguments[2];null!=r&&i(this,r),this.message=String(t),null!=n&&(this.code=String(n)),f&&f(this,e)}).prototype=Object.create(Error.prototype,{constructor:r(o),name:r("CustomError")})}},Array:{prototype:{"e-index-of.js":function(e,t,n){"use strict";var r=e("../../Number/is-nan"),i=e("../../Object/is"),f=e("../../Object/valid-value"),o=Array.prototype.indexOf;n.exports=function(e){var t;if(!r(e)&&0!==e)return o.apply(this,arguments);for(t=arguments[1]>>>0;t<f(this).length>>>0;++t)if(this.hasOwnProperty(t)&&i(e,this[t]))return t;return-1}},"last.js":function(e,t,n){"use strict";var r=e("./last-index");n.exports=function(){var e;if(null!==(e=r.call(this)))return this[e]}},"last-index.js":function(e,t,n){"use strict";var r=e("../../Object/valid-value");n.exports=function(){var e,t;if(!(t=r(this).length>>>0))return null;for(e=t-1;!this.hasOwnProperty(e);)if(-1==--e)return null;return e}}},"from.js":function(e,t,n){"use strict";var r=e("../Function/is-arguments"),i=Array.isArray,f=Array.prototype.slice;n.exports=function(e){return i(e)?e:r(e)?1===e.length?[e[0]]:Array.apply(null,e):f.call(e)}}},Function:{"is-arguments.js":function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());n.exports=function(e){return r.call(e)===i}}},"global.js":function(e,t,n){"use strict";n.exports=new Function("return this")()}}},memoizee:{"package.json":function(e,t){t.name="memoizee",t.version="0.2.5",t.main="lib"},lib:{"index.js":function(e,t,n){"use strict";var r=e("./regular"),i=e("./primitive"),f=Function.prototype.call;e("./ext/dispose"),e("./ext/resolvers"),e("./ext/async"),e("./ext/ref-counter"),e("./ext/method"),e("./ext/max-age"),e("./ext/max"),n.exports=function(e){var t=Object(arguments[1]);return f.call(t.primitive?i:r,this,e,t)}},"regular.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Error/custom"),i=e("es5-ext/lib/Array/prototype/e-index-of"),f=e("event-emitter/lib/has-listeners"),o=Function.prototype.apply;n.exports=e("./_base")(function(e,t){var n,a,c,s,l,u,p,d,h,m,g,b=e.cache={},v;0===t?(n=null,s=e.get=function(){return n},l=function(){return n=1},u=function(){n=null},e.clearAll=function(){n=null,b=e.cache={}}):(p=0,1===t?(a=[],c=[],s=e.get=function(e){var t=i.call(a,e[0]);return-1===t?null:c[t]},l=function(e){return a.push(e[0]),c.push(++p),p},u=function(e){var t=i.call(c,e);-1!==t&&(a.splice(t,1),c.splice(t,1))},e.clearAll=function(){a=[],c=[],b=e.cache={}}):!1===t?(n=[],v={},s=e.get=function(e){var t=0,r=n,f,o=e.length;if(0===o)return r[o]||null;if(r=r[o]){for(;t<o-1;){if(-1===(f=i.call(r[0],e[t])))return null;r=r[1][f],++t}return-1===(f=i.call(r[0],e[t]))?null:r[1][f]||null}return null},l=function(e){var t=0,r=n,f,o=e.length;if(0===o)r[o]=++p;else{for(r[o]||(r[o]=[[],[]]),r=r[o];t<o-1;)-1===(f=i.call(r[0],e[t]))&&(f=r[0].push(e[t])-1,r[1].push([[],[]])),r=r[1][f],++t;-1===(f=i.call(r[0],e[t]))&&(f=r[0].push(e[t])-1),r[1][f]=++p}return v[p]=e,p},u=function(e){var t=0,r=n,f,o=v[e],a=o.length,c=[];if(0===a)delete r[a];else if(r=r[a]){for(;t<a-1;){if(-1===(f=i.call(r[0],o[t])))return;c.push(r,f),r=r[1][f],++t}if(-1===(f=i.call(r[0],o[t])))return;for(e=r[1][f],r[0].splice(f,1),r[1].splice(f,1);!r[0].length&&c.length;)f=c.pop(),(r=c.pop())[0].splice(f,1),r[1].splice(f,1)}delete v[e]},e.clearAll=function(){n=[],b=e.cache={},v={}}):(n=[[],[]],v={},s=e.get=function(e){for(var r=0,f=n,o;r<t-1;){if(-1===(o=i.call(f[0],e[r])))return null;f=f[1][o],++r}return-1===(o=i.call(f[0],e[r]))?null:f[1][o]||null},l=function(e){for(var r=0,f=n,o;r<t-1;)-1===(o=i.call(f[0],e[r]))&&(o=f[0].push(e[r])-1,f[1].push([[],[]])),f=f[1][o],++r;return-1===(o=i.call(f[0],e[r]))&&(o=f[0].push(e[r])-1),f[1][o]=++p,v[p]=e,p},u=function(e){for(var r=0,f=n,o,a=[],c=v[e];r<t-1;){if(-1===(o=i.call(f[0],c[r])))return;a.push(f,o),f=f[1][o],++r}if(-1!==(o=i.call(f[0],c[r]))){for(e=f[1][o],f[0].splice(o,1),f[1].splice(o,1);!f[0].length&&a.length;)o=a.pop(),(f=a.pop())[0].splice(o,1),f[1].splice(o,1);delete v[e]}},e.clearAll=function(){n=[[],[]],b=e.cache={},v={}})),e.memoized=function(){var t=s(arguments),n;if(null!=t)return h&&e.emit("hit",t,arguments,this),b[t];if(n=o.call(d,this,arguments),null!=(t=s(arguments)))throw new r("Circular invocation","CIRCULAR_INVOCATION");return t=l(arguments),b[t]=n,m&&e.emit("init",t),n},e.clear=function(t){b.hasOwnProperty(t)&&(g&&e.emit("purge",t),u(t),delete b[t])},e.once("ready",function(){d=e.fn,h=f(e,"hit"),m=f(e,"init"),g=f(e,"purge")})})},"_base.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Object/valid-callable"),i=e("es5-ext/lib/Object/for-each"),f=e("event-emitter/lib/core"),o;n.exports=t=function(e){return function t(n){var a,c,s,l,u;return r(n),n.memoized?n:(a=Object(arguments[1]),u=f({memoize:t,fn:n}),isNaN(a.length)?(c=n.length,a.async&&o.async&&--c):c=!1!==a.length&&a.length>>>0,e(u,c),i(o,function(e,t){e.force?e(u,a):a[t]&&e(a[t],u,a)}),n=u.fn,s=u.get,l=u.clear,u.memoized.clear=function(){l(s(arguments))},u.memoized.clearAll=function(){u.emit("purgeall"),u.clearAll()},u.memoized.memoized=!0,u.emit("ready"),u.memoized)}},o=t.ext={}},"primitive.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Error/custom"),i=e("event-emitter/lib/has-listeners"),f=function(){return""},o=function(e){return e[0]},a=Function.prototype.apply,c=Function.prototype.call;n.exports=e("./_base")(function(e,t){var n,s=e.cache={},l,u,p,d;n=e.get=1===t?o:!1===t?function(e){var t="",n,r=e.length;if(r)for(t+=e[n=0];--r;)t+=""+e[++n];else t="";return t}:t?function(e){for(var n=String(e[0]),r=0,i=t;--i;)n+=""+e[++r];return n}:f,e.memoized=1===t?function(t){var n;if(s.hasOwnProperty(t))return u&&e.emit("hit",t,arguments,this),s[t];if(n=1===arguments.length?c.call(l,this,t):a.call(l,this,arguments),s.hasOwnProperty(t))throw new r("Circular invocation","CIRCULAR_INVOCATION");return s[t]=n,p&&e.emit("init",t),n}:function(){var t=n(arguments),i;if(s.hasOwnProperty(t))return u&&e.emit("hit",t,arguments,this),s[t];if(i=a.call(e.fn,this,arguments),s.hasOwnProperty(t))throw new r("Circular invocation","CIRCULAR_INVOCATION");return s[t]=i,p&&e.emit("init",t),i},e.clear=function(t){s.hasOwnProperty(t)&&(d&&e.emit("purge",t),delete s[t])},e.clearAll=function(){s=e.cache={}},e.once("ready",function(){l=e.fn,u=i(e,"hit"),p=i(e,"init"),d=i(e,"purge")})})},ext:{"dispose.js":function(e){"use strict";var t=e("es5-ext/lib/Object/valid-callable"),n=e("es5-ext/lib/Object/for-each"),r=e("../_base").ext,i=Array.prototype.slice;r.dispose=function(e,f,o){var a,c;t(e),c=o.async&&r.async,f.on("purge"+(c?"async":""),a=c?function(t){var n=f.async[t];delete f.cache[t],e.apply(f.memoized["_memoize:context_"],i.call(n,1))}:function(t){var n=f.cache[t];delete f.cache[t],e.call(f.memoized["_memoize:context_"],n)}),c||f.on("purgeall",function(){n(f.cache,function(e,t){a(t)})})}},"resolvers.js":function(e){"use strict";var t=e("es5-ext/lib/Array/from"),n=e("es5-ext/lib/Object/for-each"),r=e("es5-ext/lib/Object/valid-callable"),i=Array.prototype.slice,f;f=function(e){return this.map(function(t,n){return t?t(e[n]):e[n]}).concat(i.call(e,this.length))},e("../_base").ext.resolvers=function(e,i){var o;(o=t(e)).forEach(function(e){null==e||r(e)}),o=f.bind(o),function(e){i.memoized=function(){var t;return i.memoized.args=arguments,t=e.apply(this,o(arguments)),delete i.memoized.args,t},n(e,function(t,n){i.memoized[n]=function(){return e[n].apply(this,o(arguments))}})}(i.memoized)}},"async.js":function(e){"use strict";var t=e("es5-ext/lib/Array/from"),n=e("es5-ext/lib/Array/prototype/last"),r=e("es5-ext/lib/Object/for-each"),i=e("es5-ext/lib/Object/is-callable"),f=e("next-tick"),o=Array.isArray,a=Array.prototype.slice,c=Function.prototype.apply;e("../_base").ext.async=function(e,s){var l,u;l=s.async={},function(e){var u,p,d,h,m,g;s.on("init",function(e){u.id=e,l[e]=p?[p]:[]}),s.on("hit",function(e,t,n){p&&(o(l[e])?l[e].push(p):(f(function(e,r,i,f){l[r]?(s.emit("hitasync",r,t,n),c.call(e,this.context,this)):m.apply(i,f)}.bind(l[e],p,e,d,h)),d=h=null))}),s.fn=function(){var n,r;return n=arguments,(r=t(n)).push(u=function e(t){var n,r,i,o;{if(null!=e.id){for(i=l[e.id],s.cache.hasOwnProperty(e.id)?t?(delete l[e.id],s.clear(e.id)):(arguments.context=this,l[e.id]=arguments,s.emit("initasync",e.id,i.length)):delete l[e.id],n=0;r=i[n];++n)o=c.call(r,this,arguments);return o}f(c.bind(e,this,arguments))}}),c.call(e,this,r)},m=s.memoized,g=function(e){return p=n.call(e),i(p)?a.call(e,0,-1):(p=null,e)},s.memoized=function(){return m.apply(d=this,h=g(arguments))},r(m,function(e,t){s.memoized[t]=function(){return m[t].apply(this,g(arguments))}})}(s.fn),s.on("purge",u=function(e){o(l[e])||(s.emit("purgeasync",e),delete l[e])}),s.on("purgeall",function(){r(s.async,function(e,t){u(t)})})}},"ref-counter.js":function(e){"use strict";var t=e("../_base").ext;t.refCounter=function(e,n,r){var i,f;i={},f=r.async&&t.async,n.on("init"+(f?"async":""),f?function(e,t){i[e]=t}:function(e){i[e]=1}),n.on("hit"+(f?"async":""),function(e){++i[e]}),n.on("purge"+(f?"async":""),function(e){delete i[e]}),f||n.on("purgeall",function(){i={}}),n.memoized.clearRef=function(){var e=n.get(arguments);return i.hasOwnProperty(e)?!--i[e]&&(n.clear(e),!0):null}}},"method.js":function(e){"use strict";var t=e("es5-ext/lib/Object/descriptor"),n=e("es5-ext/lib/global"),r=e("es5-ext/lib/Object/extend"),i=e("es5-ext/lib/String/is-string"),f=Object.create,o=Object.defineProperty;e("../_base").ext.method=function(e,a,c){i(c.method)?e={name:String(c.method),descriptor:{configurable:!0,writable:!0}}:((e=c.method).name=String(e.name),e.descriptor=null==e.descriptor?{configurable:!0,writable:!0}:Object(e.descriptor)),(c=f(c)).method=void 0,function(i){a.memoized=function(){var r;return this&&this!==n?(r=e.descriptor.value=a.memoize(a.fn.bind(this),c),o(this,e.name,e.descriptor),o(r,"_memoize:context_",t(this)),r.apply(this,arguments)):i.apply(this,arguments)},r(a.memoized,i)}(a.memoized)}},"max-age.js":function(e){"use strict";var t=e("es5-ext/lib/Number/is-number"),n=e("es5-ext/lib/Object/for-each"),r=e("next-tick"),i=e("../_base").ext,f=Math.max,o=Math.min;i.maxAge=function(e,a,c){var s,l,u,p;(e>>>=0)&&(s={},l=c.async&&i.async,a.on("init"+(l?"async":""),function(t){s[t]=setTimeout(function(){a.clear(t)},e),p&&(p[t]=setTimeout(function(){delete p[t]},u))}),a.on("purge"+(l?"async":""),function(e){clearTimeout(s[e]),p&&p[e]&&(clearTimeout(p[e]),delete p[e]),delete s[e]}),c.preFetch&&(u=t(c.preFetch)?f(o(Number(c.preFetch),1),0):.333)&&(p={},u=(1-u)*e,a.on("hit"+(l?"async":""),function(e,t,n){p[e]||(p[e]=!0,r(function(){!0===p[e]&&(delete p[e],a.clear(e),a.memoized.apply(n,t))}))})),l||a.on("purgeall",function(){n(s,function(e){clearTimeout(e)}),s={},p&&(n(p,function(e){clearTimeout(e)}),p={})}))}},"max.js":function(e){"use strict";var t=e("../_base").ext;t.max=function(e,n,r){var i,f,o,a,c,s;(e>>>=0)&&(i=-1,f=o=0,a={},c={},s=r.async&&t.async,n.on("init"+(s?"async":""),function(t){a[++i]=t,c[t]=i,++o>e&&n.clear(a[f])}),n.on("hit"+(s?"async":""),function(e){var t=c[e];if(a[++i]=e,c[e]=i,delete a[t],f===t)for(;!a.hasOwnProperty(++f);)continue}),n.on("purge"+(s?"async":""),function(e){var t=c[e];if(delete a[t],--o,f===t)if(o)for(;!a.hasOwnProperty(++f);)continue;else i=-1,f=0}),s||n.on("purgeall",function(){i=-1,f=o=0,a={},c={}}))}}}},node_modules:{"event-emitter":{lib:{"has-listeners.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Object/is-empty"),i=e("es5-ext/lib/Object/valid-value"),f=e("./_id");n.exports=function(e){var t;return i(e),t=arguments[1],arguments.length>1?e.hasOwnProperty(f)&&e[f].hasOwnProperty(t):e.hasOwnProperty(f)&&!r(e[f])}},"_id.js":function(e,t,n){"use strict";n.exports="_ee2_"},"core.js":function(e,t,n){"use strict";var r=e("es5-ext/lib/Object/descriptor"),i=e("es5-ext/lib/Object/valid-callable"),f=e("./_id"),o=Function.prototype.apply,a=Function.prototype.call,c=Object.create,s=Object.defineProperty,l=Object.defineProperties,u={configurable:!0,enumerable:!1,writable:!0},p,d,h,m,g,b,v,y;g=f+"l_",b={on:p=function(e,t){var n;return i(t),this.hasOwnProperty(f)?n=this[f]:(n=u.value={},s(this,f,u),u.value=null),n.hasOwnProperty(e)?n[e].hasOwnProperty(g)?n[e].push(t):(n[e]=[n[e],t])[g]=!0:n[e]=t,this},once:d=function(e,t){var n,r;return i(t),r=this,p.call(this,e,n=function(){h.call(r,e,n),o.call(t,this,arguments)}),n._listener=t,this},off:h=function(e,t){var n,r,o,a;if(i(t),!this.hasOwnProperty(f))return this;if(!(n=this[f]).hasOwnProperty(e))return this;if((r=n[e]).hasOwnProperty(g))for(a=0;o=r[a];++a)o!==t&&o._listener!==t||(2===r.length?n[e]=r[a?0:1]:r.splice(a,1));else r!==t&&r._listener!==t||delete n[e];return this},emit:m=function(e){var t,n,r,i,c,s;if(this.hasOwnProperty(f)&&(t=this[f]).hasOwnProperty(e))if((c=t[e]).hasOwnProperty(g)){for(r=arguments.length,s=new Array(r-1),n=1;n<r;++n)s[n-1]=arguments[n];for(c=c.slice(),n=0;i=c[n];++n)o.call(i,this,s)}else switch(arguments.length){case 1:a.call(c,this);break;case 2:a.call(c,this,arguments[1]);break;case 3:a.call(c,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,s=new Array(r-1),n=1;n<r;++n)s[n-1]=arguments[n];o.call(c,this,s)}}},v={on:r(p),once:r(d),off:r(h),emit:r(m)},y=l({},v),n.exports=t=function(e){return null==e?c(y):l(Object(e),v)},t.methods=b}}},"next-tick":{"package.json":function(e,t){t.name="next-tick",t.version="0.1.0",t.main="lib/next-tick"},lib:{"next-tick.js":function(e,t,n){"use strict";"undefined"!=typeof process&&process&&"function"==typeof process.nextTick?n.exports=process.nextTick:"function"==typeof setImmediate?n.exports=function(e){setImmediate(e)}:n.exports=function(e){setTimeout(e,0)}}}}}}}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/logging/logging.js"),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.logging={},{Log:f})}();

!function(){var e=Package.meteor.Meteor,a=Package.meteor.global,c=Package.meteor.meteorEnv,n=Package.underscore._,o=Package["reactive-dict"].ReactiveDict,i=Package.ejson.EJSON,t;(function(){t=new o("session")}).call(this),"undefined"==typeof Package&&(Package={}),function(e,a){for(var c in a)c in e||(e[c]=a[c])}(Package.session={},{Session:t})}();

!function(){var a=Package["ddp-client"].DDP,e;"undefined"==typeof Package&&(Package={}),function(a,e){for(var i in e)i in a||(a[i]=e[i])}(Package.livedata={},{DDP:a,LivedataTest:void 0})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,a=Package.meteor.meteorEnv,r;(function(){var n=0,a=!1;r={hold:function(){if(!e.isCordova)return{release:function(){}};if(a)throw new Error("Can't show launch screen once it's hidden");n++;var r=!1;return{release:function(){e.isCordova&&(r||(r=!0,0===--n&&"undefined"!=typeof navigator&&navigator.splashscreen&&(a=!0,navigator.splashscreen.hide())))}}}}}).call(this),function(){var n=r.hold(),a=Package.templating&&Package.templating.Template;e.startup(function(){a?Package["iron:router"]?Package["iron:router"].Router.onAfterAction(function(){n.release()}):(a.body.onRendered(function(){n.release()}),setTimeout(function(){n.release()},6e3)):n.release()})}.call(this),"undefined"==typeof Package&&(Package={}),function(e,n){for(var a in n)a in e||(e[a]=n[a])}(Package["launch-screen"]={},{LaunchScreen:r})}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,o=Package.jquery.$,a=Package.jquery.jQuery,r=Package.underscore._,i=Package["templating-runtime"].Template,l=Package["reactive-var"].ReactiveVar,c=Package["iron:router"].Router,s=Package["iron:router"].RouteController,u=Package["aldeed:simple-schema"].SimpleSchema,d=Package["aldeed:simple-schema"].MongoObject,p=Package.modules.meteorInstall,m=Package["babel-runtime"].meteorBabelHelpers,h=Package.promise.Promise,f=Package["iron:core"].Iron,g=Package["ecmascript-runtime-client"].Symbol,b=Package["ecmascript-runtime-client"].Map,v=Package["ecmascript-runtime-client"].Set,k=Package.webapp.WebApp,w=Package.logging.Log,y=Package.deps.Tracker,x=Package.deps.Deps,T=Package.session.Session,C=Package["ddp-client"].DDP,j=Package.mongo.Mongo,I=Package.ui.Blaze,_=Package.ui.UI,P=Package.ui.Handlebars,M=Package.spacebars.Spacebars,S=Package.check.check,O=Package.check.Match,H=Package.random.Random,$=Package.ejson.EJSON,F=Package["launch-screen"].LaunchScreen,z=Package.htmljs.HTML,D=p({node_modules:{meteor:{"ohif:core":{"main.js":function(e,n,t){t.export({OHIF:function(){return a}});var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a={log:{},ui:{},utils:{},viewer:{},cornerstone:{}};o.isClient&&(window.OHIF=a)},client:{"index.js":function(e,n,t){t.watch(e("./lib")),t.watch(e("./helpers")),t.watch(e("./components")),t.watch(e("./ui")),t.watch(e("./routes.js"))},"routes.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/iron:router"),{Router:function(e){r=e}},2),r.onRun(function(){a(document.body).trigger("ohif.navigated"),this.next()}),o.isDevelopment&&r.route("/playground",function(){this.render("componentPlayground")})},components:{"index.js":function(e,n,t){t.watch(e("./base")),t.watch(e("./bootstrap")),t.watch(e("./pages")),t.watch(e("./paginationArea")),t.watch(e("./playground/playground.html")),t.watch(e("./playground/playground.styl")),t.watch(e("./playground/playground.js")),t.watch(e("./scrollArea"))},base:{"component.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/classCallCheck")),r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var i=function(){function e(n){(0,a.default)(this,e),n.view._component=this,n.sections={},this.templateInstance=n,this.registeredItems=new v}return e.prototype.registerSelf=function(){function e(){var e=r.blaze.getParentComponent(this.templateInstance.view);e&&(this.parent=e,e.registeredItems.add(this))}return e}(),e.prototype.unregisterSelf=function(){function e(){var e=r.blaze.getParentComponent(this.templateInstance.view);e&&(delete this.parent,e.registeredItems.delete(this))}return e}(),e}();r.Component=i},"index.js":function(e,n,t){t.watch(e("./component.js")),t.watch(e("./mixin.js")),t.watch(e("./template.js")),t.watch(e("./section/section.html")),t.watch(e("./section/section.js")),t.watch(e("./mixins/action.js")),t.watch(e("./mixins/button.js")),t.watch(e("./mixins/checkbox.js")),t.watch(e("./mixins/component.js")),t.watch(e("./mixins/dropdown.js")),t.watch(e("./mixins/form.js")),t.watch(e("./mixins/formItem.js")),t.watch(e("./mixins/group.js")),t.watch(e("./mixins/groupRadio.js")),t.watch(e("./mixins/input.js")),t.watch(e("./mixins/link.js")),t.watch(e("./mixins/popover.js")),t.watch(e("./mixins/schemaData.js")),t.watch(e("./mixins/select.js")),t.watch(e("./mixins/select2.js")),t.watch(e("./templates/button.html")),t.watch(e("./templates/custom.html")),t.watch(e("./templates/div.html")),t.watch(e("./templates/form.html")),t.watch(e("./templates/input.html")),t.watch(e("./templates/link.html")),t.watch(e("./templates/select.html")),t.watch(e("./templates/tr.html")),t.watch(e("./wrappers/label.html")),t.watch(e("./wrappers/labelContent.html"))},"mixin.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/classCallCheck")),r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},1),r.mixins={};var l=function(){function e(n){var t=n.dependencies,o=n.composition;(0,a.default)(this,e),this.dependencies=t||"",this.composition=o}return e.prototype.init=function(){function n(n,t,o,a){var r=this,l=this.dependencies.split(" ");i.each(l,function(i){if(i){var l=e.getMixin(i);if(l===r)throw new Error("Mixin "+i+" has a cyclic dependency.");l.init(n,t,o,a)}}),this.apply(n,t,o,a)}return n}(),e.prototype.apply=function(){function e(e,n,t,o){if(!i.contains(t,this)){var a=this.composition;i.each(o,function(t){var o=t;"onMixins"===o&&(o="onRendered"),"onData"===t&&a[t]?a[t](n):a[t]&&e[o](a[t])}),t.push(this)}}return e}(),e.initData=function(){function n(n){var t=n.mixins.split(" "),o=[];i.each(t,function(t){t&&e.getMixin(t).init(null,n,o,["onData"])})}return n}(),e.initAll=function(){function n(n,t){var o=t.mixins.split(" "),a=[],r=[];i.each(o,function(o){if(o){var i=e.getMixin(o);i.init(n,t,a,["onCreated","onRendered","onDestroyed","events","helpers"]),i.init(n,t,r,["onMixins"])}})}return n}(),e.getMixin=function(){function e(e){var n=r.mixins[e];if(!n)throw new Error("Mixin "+e+" not found.");return n}return e}(),e}();r.Mixin=l},"template.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),o.baseComponent=new o("baseComponent",function(){}),o.baseComponent.constructView=function(e,n){var t=o.currentData();if(t){t.base||(t.base="baseCustom");var l=o[t.base];if(!l)throw new Error("Template "+t.base+" not found.");var c=i.blaze.cloneTemplate(l,t.base+"Component");c.renderFunction=l.renderFunction,i.Mixin.initData(t);var s=[];if(t.wrappers){var u=t.wrappers.split(" ");r.each(u,function(e){return e&&s.push(e)})}for(var d=[],p=function(){var r=function(){return c.constructView(e,n)};return c.onCreated(function(){var e=o.instance();e.component=new i.Component(e),e.wrapper=d[0]||e,d.forEach(function(n){n.component=e.component})}),i.Mixin.initAll(c,t),a.With(t,r)},m=void 0,h=function(){var e=o[m];if(!e)throw new Error("Template "+m+" not found.");var r=i.blaze.cloneTemplate(e),l=p,c=function(){return r.onCreated(function(){return d.push(o.instance())}),r.constructView(l,n)};p=function(){return a.With(t,c)}};m=s.shift();)h();return p(e,n)}}},mixins:{"action.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},2),r.mixins.action=new r.Mixin({dependencies:"formItem",composition:{onRendered:function(){o.instance().component.$element.addClass("form-action")},events:{"click .form-action":function(e,n){e.preventDefault();var t=n.component,o=n.data.action,r=n.data.params?n.data.params:e,i=a(":focus"),l=function(){i[0]&&e.currentTarget!==i[0]&&setTimeout(function(){return i.focus()})};if(!t.$element.hasClass("disabled")){var c=t.getApi();if("function"==typeof o)t.actionResult=o.call(e.currentTarget,r,e);else{if(!c||!o||"function"!=typeof c[o])return!0;t.actionResult=c[o].call(e.currentTarget,r,e)}if(t.actionResult instanceof h){var s=t.getForm();s.disable(!0);var u=a('<i class="fa fa-spin fa-circle-o-notch fa-fw m-r"></i>');t.$element.prepend(u);var d=function(){u.remove(),s.disable(!1),l()};t.actionResult.then(d).catch(d)}else l()}}}}})},"button.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),o.mixins.button=new o.Mixin({dependencies:"formItem",composition:{onRendered:function(){var e=a.instance();e.component.$element=e.$("button").first()}}})},"checkbox.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2),o.mixins.checkbox=new o.Mixin({dependencies:"input",composition:{onCreated:function(){var e=a.instance().component;e.value=function(n){if(r.isUndefined(n))return e.parseData(e.$element.is(":checked"));e.$element.prop("checked",n).trigger("change")}}}})},"component.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),o.mixins.component=new o.Mixin({composition:{}})},"dropdown.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/jquery"),{$:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/underscore"),{_:function(e){c=e}},5);var s=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},6),s.mixins.dropdown=new s.Mixin({dependencies:"form",composition:{onRendered:function(){var e=a.instance(),n=e.data.options,t=n.event,i=n.centered,u=n.marginTop,d=n.$parentLi,p=n.reactiveClose,m=e.$(".dropdown"),f=m[0],g=m.children(".dropdown-menu"),b=e.data.options.dismissTimeout;if(c.isUndefined(b)&&(b=500),e.opening=!0,e.destroyView=function(){var n=function(){"function"==typeof e.data.destroyView?e.data.destroyView():r.remove(e.view)},t=setTimeout(n,b);g.one("transitionend",function(){n(),clearTimeout(t)}),m.removeClass("open")},e.data.promise.then(e.destroyView,e.destroyView),e.closeSubmenu=function(n){e.reactiveClose&&(n&&l(e.lastSubmenu).focus(),e.reactiveClose.set(!0),delete e.reactiveClose,delete e.lastSubmenu)},e.close=function(n,t){(0,e.data[n?"promiseResolve":"promiseReject"])(t instanceof h?null:t),e.closeSubmenu(!1),e.closed=!0},p&&e.autorun(function(){p.get()&&e.close(!1)}),!e.data.items.length)return e.close(!1);f.oncontextmenu=function(){return!1};var v={};t&&(v.position="fixed",g.bounded()),u&&(v["margin-top"]=u),g.css(v),o.defer(function(){if(m.addClass("open").find("a:first").focus(),g.one("transitionend",function(n){e.opening=!1}),t){var n=t.originalEvent&&t.originalEvent.touches,o={left:0,top:0};if(n&&n.length>0?(o.left=n[0].pageX,o.top=n[0].pageY):(o.left=t.clientX,o.top=t.clientY),i)o.left-=g.outerWidth()/2,o.top-=g.outerHeight()/2;else if(d){var a=d.closest(".dropdown-menu"),r=g.outerWidth(),l=a.outerWidth(),c=a.offset(),u=s.ui.getOffset(d[0]);Object.assign(o,{left:l+c.left,top:u.top});var p=!1;(o.left<c.left+l||o.left>document.body.clientWidth-r)&&(o.left-=l+g.outerWidth(),p=!0);var h=p?"origin-top-right":"origin-top-left";g.addClass(h)}g.css(o).trigger("spatialChanged"),"fixed"===g.css("position")&&g.outerHeight()>window.innerHeight&&g.css({"overflow-y":"scroll","max-height":window.innerHeight})}})},events:{"click .form-action":function(e,n){var t=l(e.currentTarget);if(t.hasClass("disabled"))n.close(!1);else{var o=t.data("component");n.close(!0,o.actionResult)}},"mouseenter .form-action, openSubmenu .form-action":function(e,n){if(n.opening)n.$(".dropdown-menu").one("transitionend",function(e){l(e.currentTarget).trigger("openSubmenu")});else if(!n.closed&&e.target===e.currentTarget&&(n.lastSubmenu&&n.lastSubmenu!==e.currentTarget&&n.closeSubmenu(!this.items),this.items&&n.lastSubmenu!==e.currentTarget)){n.closeSubmenu(!this.items);var t=new i(!1);n.reactiveClose=t,n.lastSubmenu=e.currentTarget;var o=l(e.currentTarget).closest("li");s.ui.showDropdown(this.items,{event:e,reactiveClose:n.reactiveClose,$parentLi:o,parentInstance:n,dismissTimeout:n.data.options&&n.data.options.dismissTimeout}).then(n.data.promiseResolve).catch(function(){})}},"keydown .form-action":function(e,n){e.stopPropagation();var t=e.which,o=l(e.currentTarget);if(38===t||40===t){var a=o.closest("li"),r=a.parent().children(),i=a.index(),c=void 0;return c=38===t?0===i?r.eq(r.length-1):a.prev():i===r.length-1?r.eq(0):a.next(),e.preventDefault(),void c.find("a:first").focus()}var s=n.data.options.parentInstance;return!s||37!==t&&8!==t&&27!==t?s||27!==t?void(this.items&&(39!==t&&13!==t&&32!==t||(o.trigger("openSubmenu"),e.preventDefault()))):n.close(!1):(e.preventDefault(),s.closeSubmenu(!0))},"mousedown .dropdown":function(e){e.stopPropagation()},"blur .dropdown":function(e,n){n.closed||n.reactiveClose&&!n.reactiveClose.get()||o.defer(function(){var e=l(":focus"),t=!1,o=n;do{if(l.contains(o.$(".dropdown")[0],e[0])){t=!0;break}if(!o.data.options.parentInstance)break;(o=o.data.options.parentInstance).closeSubmenu(!1)}while(o);t||o.close(!1)})}}}})},"form.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/spacebars"),{Spacebars:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/underscore"),{_:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/jquery"),{$:function(e){c=e}},5),o.mixins.form=new o.Mixin({dependencies:"group",composition:{onCreated:function(){var e=a.instance(),n=e.component;n.isForm=!0,n.isValidatedAlready=!1,n.validationObserver=new r.Dependency,e.data.pathKey="",n.validationRan=l.throttle(function(){n.validationObserver.changed()},200);var t=n.validate;n.validate=function(){var o=t();return n.isValidatedAlready=!0,n.schema&&n.schema._invalidKeys.length&&r.afterFlush(function(){return e.$(".state-error :input:first").focus()}),o}},onRendered:function(){var e=a.instance(),n=e.component;n.$style=n.$element=e.$("form").first(),n.$element[0].onsubmit=function(){return!1}},events:{"click .validation-error-container a":function(e,n){var t=c(e.currentTarget).attr("data-target");n.$('.state-error[data-key="'+t+'"]').find(":input:first").focus()}},helpers:{validationErrors:function(){var e=a.instance().component;if(e.validationObserver.depend(),e.schema&&e.schema._invalidKeys.length){var n=[];return e.schema._invalidKeys.forEach(function(t){var o=e.schema._schema[t.name].label,a=e.schema.keyErrorMessage(t.name);a=a.replace(o,"<strong>"+o+"</strong>"),n.push({key:t.name,message:i.SafeString(a)})}),n}}}}})},"formItem.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/underscore"),{_:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/jquery"),{$:function(e){c=e}},5),o.mixins.formItem=new o.Mixin({dependencies:"schemaData",composition:{onCreated:function(){var e=a.instance(),n=e.component;n.changeObserver=new r.Dependency,n.registerSelf(),n.$element=c(),n.$style=c(),n.$wrapper=c(),n.value=function(e){if(l.isUndefined(e))return n.parseData(n.$element.val());i.defer(function(){n.$element.val(e).trigger("change")})},n.disable=function(e){n.$element.prop("disabled",!!e)},n.readonly=function(e){n.$element.prop("readonly",!!e)},n.show=function(e){var t=e?"show":"hide";n.$wrapper[t]()},n.hasFocus=function(){var e=c(":focus")[0],t=c.contains(n.$wrapper[0],e),o=n.$wrapper[0]===e;return t||o},n.state=function(e,t){n.$wrapper.toggleClass("state-"+e,!!t)},n.error=function(e){n.state("error",!!e),e?n.$wrapper.attr("data-error",e):n.$wrapper.removeAttr("data-error",e)},n.toggleTooltip=function(e,t){if(e&&t){var o=n.$wrapper.attr("aria-describedby"),a=c(document.getElementById(o));a.length?a.find(".tooltip-inner").text(t):n.$wrapper.tooltip("destroy").tooltip({trigger:"manual",title:t}).tooltip("show")}else n.$wrapper.tooltip("destroy")},n.toggleMessage=function(e){if(e){var t=n.$wrapper.attr("data-error");t&&n.toggleTooltip(!0,t)}else i.setTimeout(function(){n.hasFocus()||n.toggleTooltip(!1)},100)},n.getForm=function(){for(var e=n;e;)if((e=e.parent)&&e.isForm)return e},n.getApi=function(){var t=e.data.api;if(!t){if(n.isForm)return;var o=n.getForm();if(!o)return;return o.getApi()}return t},n.validate=function(){var t,a=n.getForm(),r=a&&a.schema,i=e.data.pathKey;if(!i||!r||!n.$wrapper.is(":visible"))return!0;var l=o.object.getNestedObject((t={},t[i]=n.value(),t)),c=r.validateOne(l,i);return a.validationRan(),c?(n.error(!1),!0):(n.error(r.keyErrorMessage(i)),!1)},n.depend=function(){return n.changeObserver.depend()},n.triggerFormMainButton=function(){var e=n.$element.closest("form"),t=e.find("button[type=submit]:first");t.length||(t=e.find("button:first")),t.click()}},onRendered:function(){var e=a.instance(),n=e.component;n.$element=e.$(":input").first(),n.$wrapper=e.wrapper.$("*").first(),n.$wrapper.attr("data-key",e.data.pathKey);var t=n.getForm();e.autorun(function(e){n.changeObserver.depend(),e.firstRun||t&&t.isValidatedAlready&&n.validate()})},onDestroyed:function(){var e=a.instance().component,n=e.getForm();e.unregisterSelf(),e.error(!1),e.toggleTooltip(!1),n&&n.isValidatedAlready&&n.validate()},onMixins:function(){var e=a.instance().component;e.$style.length||(e.$style=e.$element),e.$element.data("component",e),e.$wrapper.data("component",e)},events:{change:function(e,n){var t=n.component;e.currentTarget===t.$element[0]&&t.changeObserver.changed()},focus:function(e,n){var t=n.component,o=t.isGroup||t.isCustomFocus,a=e.target===e.currentTarget;!o&&a&&t.toggleMessage(!0)},blur:function(e,n){var t=n.component,o=t.isGroup||t.isCustomFocus,a=e.target===e.currentTarget;!o&&a&&t.toggleMessage(!1)}}}})},"group.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/typeof")),r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var i=void 0;t.watch(e("meteor/templating"),{Template:function(e){i=e}},1);var l=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){l=e}},2);var c=void 0;t.watch(e("meteor/underscore"),{_:function(e){c=e}},3),r.mixins.group=new r.Mixin({dependencies:"formItem",composition:{onCreated:function(){var e=i.instance(),n=e.component;n.isGroup=!0,e.autorun(function(){var t=e.data.schema;t instanceof l&&(t=t.get()),n.schema=t&&t.newContext()}),n.value=function(t){var o=c.isUndefined(t),r=e.data.arrayValues,i=r?[]:{};if(o)return n.registeredItems.forEach(function(e){if(r){if(e.templateInstance.data.mixins.split(" ").indexOf("action")>-1)return;i.push(e.value())}else{var n=e.templateInstance.data.key;n&&(i[n]=e.value())}}),i;var l="object"===(void 0===t?"undefined":(0,a.default)(t))?t:i;if(l){var s=0;n.registeredItems.forEach(function(e){var n=e.templateInstance.data.mixins.split(" ");if(!(r&&n.indexOf("action")>-1)){var t=r?s:e.templateInstance.data.key,o=c.isUndefined(l[t])?null:l[t];e.value(o),s++}}),n.$element.trigger("change")}},n.item=function(e){var t=void 0;return n.registeredItems.forEach(function(n){n.templateInstance.data.key===e&&(t=n)}),t};var t=n.validate;n.validate=function(){var o=!0;return n.isForm&&!n.schema?o:((n.isForm?n.schema:n.getForm().schema).resetValidation(),e.data.pathKey&&!t()&&(o=!1),n.registeredItems.forEach(function(n){!n.templateInstance.data.key&&!e.data.arrayValues||n.validate()||(o=!1)}),o)},n.disable=function(e){n.registeredItems.forEach(function(n){return n.disable(e)})},n.readonly=function(e){n.registeredItems.forEach(function(n){return n.readonly(e)})}},onRendered:function(){var e=i.instance();e.component.$element=e.$(".component-group").first()}}})},"groupRadio.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/jquery"),{$:function(e){i=e}},3),o.mixins.groupRadio=new o.Mixin({dependencies:"group",composition:{onCreated:function(){var e=a.instance().component;e.value=function(n){var t=r.isUndefined(n),o=[];e.registeredItems.forEach(function(e){return o.push(e.$element[0])});var a=i(o);if(t)return e.parseData(a.filter(":checked").val());a.filter("[value='"+n+"']").prop("checked",!0).trigger("change")}}}})},"input.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),o.mixins.input=new o.Mixin({dependencies:"formItem",composition:{onRendered:function(){var e=a.instance();e.component.$element=e.$("input").first()}}})},"link.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1),a.mixins.link=new a.Mixin({dependencies:"formItem",composition:{onRendered:function(){var e=o.instance();e.component.$element=e.$("a").first()},events:{"click a":function(e,n){n.data.action&&e.preventDefault()}}}})},"popover.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/jquery"),{$:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),i.mixins.popover=new i.Mixin({dependencies:"form",composition:{onRendered:function(){var e=a.instance();e.$form=e.$("form").first(),e.$form.find(":input:first").focus()},events:{"blur form":function(e,n){o.defer(function(){var e=r(":focus");r.contains(n.$form[0],e[0])||n.data.promiseReject()})},"click .btn-cancel":function(e,n){e.stopPropagation(),n.data.promiseReject()},"click .btn-confirm":function(e,n){e.stopPropagation();var t=n.$("form").data("component");n.data.promiseResolve(t.value())}}}})},"schemaData.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/templating"),{Template:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/underscore"),{_:function(e){c=e}},5);var s=function(e,n){var t=e&&e.schema,o=e;if(e&&!t){var a=e.getForm();t=a&&a.schema,o=a}if(!n||!t)return{schemaComponentHolder:o};var r=c.clone(t._schema[n]);return r?(Array.isArray(r.type())&&c.extend(r,t._schema[n+".$"]),{currentSchema:r,schemaComponentHolder:o}):{schemaComponentHolder:o}};o.mixins.schemaData=new o.Mixin({dependencies:"component",composition:{onData:function(){var e=r.currentData(),n=o.blaze.getParentComponent(a.currentView),t=n&&n.templateInstance.data.pathKey,u=n&&n.templateInstance.data.arrayValues;if(e.pathKey=e.key||(u?"$":""),e.pathKey&&"string"==typeof t){var d=t?t+".":"";e.pathKey=""+d+e.pathKey}var p=s(n,e.pathKey).currentSchema;p&&(e.label||(e.label=new i(p.label)),c.isUndefined(e.min)&&p.min&&(e.min=p.min),c.isUndefined(e.max)&&p.max&&(e.max=p.max),p.emptyOption&&(e.emptyOption=p.emptyOption),!e.items&&Array.isArray(p.allowedValues)&&(e.items=e.items instanceof i?e.items:new i,l.autorun(function(){var t=s(n,e.pathKey),o=t.schemaComponentHolder;o.templateInstance.data.schema instanceof i&&o.templateInstance.data.schema.dep.depend();for(var a=t.currentSchema.allowedValues,r=t.currentSchema.valuesLabels||[],l=[],c=0;c<a.length;c++)l.push({value:a[c],label:r[c]||a[c]});e.items.set(l)})))},onCreated:function(){var e=r.instance(),n=e.component;n.parseData=function(t){var o=s(n.parent,e.data.pathKey).currentSchema,a=e.data.dataType;if(!o&&!a)return t;var r=o&&o.type;return r===Number||"Number"===a?parseFloat(t):r===Boolean||"Boolean"===a?!!t:t}},onMixins:function(){var e=r.instance(),n=e.component,t=s(n.parent,e.data.pathKey).currentSchema;t&&(c.isUndefined(t.defaultValue)||(n.defaultValue=t.defaultValue,n.value(t.defaultValue)))}}})},"select.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),o.mixins.select=new o.Mixin({dependencies:"formItem",composition:{onRendered:function(){var e=a.instance();e.component.$element=e.$("select").first()}}})},"select2.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/jquery"),{$:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},5),c.mixins.select2=new c.Mixin({dependencies:"select",composition:{onCreated:function(){var e=o.instance(),n=e.component,t=e.data;e.isInitialized=!1,n.isCustomFocus=!0;var r=n.value;n.value=function(t){return!i.isUndefined(t)||e.isInitialized?r(t):i.isUndefined(e.data.value)?i.isUndefined(n.defaultValue)?void 0:n.defaultValue:e.data.value},e.getDropdownContainerElement=function(){var e=n.$element.nextAll(".select2:first").find(".select2-selection").attr("aria-owns");return l("#"+e).closest(".select2-container")};var c=t.options&&t.options.placeholder;c&&e.autorun(function(){var e=t.items,n=e instanceof a;if(n&&(e=e.get()),!i.findWhere(e,{value:""})){var o=i.clone(e)||[];o.unshift({label:c,value:""}),n?t.items.set(o):t.items=o}})},onRendered:function(){var e=o.instance(),n=e.component,t=e.data;e.rebuildSelect2=function(){n.select2Instance&&n.select2Instance.destroy();var o=i.clone(t.options),a=n.$element.closest(".modal");a.length&&(o.dropdownParent=a),n.$element.select2(o),n.select2Instance=n.$element.data("select2");var r=[],c=n.$element.nextAll(".select2:first");r.push(n.$element[0]),r.push(c.find(".select2-selection")[0]),l(r).on("focus",function(t){e.isFocused=!0,t.target===t.currentTarget&&n.toggleMessage(!0)}).on("blur",function(t){e.isFocused=!1,t.target===t.currentTarget&&n.toggleMessage(!1)}),n.$element.on("keydown ",function(e){e.preventDefault(),c.find(".select2-selection").trigger(e)}),c.on("keydown ",function(n){27===n.which&&e.component.$element.focus()}),e.isInitialized=!0},e.autorun(function(){var o=t.items instanceof a;if(o&&t.items.dep.depend(),o){var i=n.value(),l=e.isFocused;r.afterFlush(function(){n.$element.val(i),e.rebuildSelect2(),l&&n.$element.focus()})}else e.rebuildSelect2()})},events:{"select2:select":function(e,n){n.component.$element.focus()},"select2:open":function(e,n){var t=n.data.options.minimumResultsForSearch;if(t!==1/0&&-1!==t){var o=n.getDropdownContainerElement();n.data.wrapText||o.addClass("select2-container-nowrap");var a=o.find(".select2-search__field");a.on("keydown.focusOnEsc",function(e){27===e.which&&(a.off("keydown.focusOnEsc"),n.component.$element.focus())})}}},onDestroyed:function(){var e=o.instance().component;e.select2Instance&&e.select2Instance.destroy()}}})}},section:{"section.html":function(e,n,t){t.exports=e("./template.section.js")},"template.section.js":function(){i.__checkName("section"),i.section=new i("Template.section",function(){var e=this;return I._TemplateWith(function(){return M.call(M.dot(e.lookup("instance"),"sectionData","get"))},function(){return M.include(function(){return M.call(M.dot(e.lookup("instance"),"renderFunction","get"))})})})},"section.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),o.section.onCreated(function(){var e=o.instance();e.renderFunction=new r(null),e.sectionData=new r(null);var n=e.data;if(n){var t=e.view.templateContentBlock,l=i.blaze.getParentTemplateView(e.view);t?(l._sectionMap||(l._sectionMap=new b),l._sectionMap.set(n,{data:Object.assign({},l._templateInstance.data),renderFunction:t.renderFunction})):a.afterFlush(function(){var t=i.blaze.getSectionContent(l,n);t&&(e.sectionData.set(t.data),e.renderFunction.set(new o(t.renderFunction)))})}}),o.registerHelper("hasSection",function(e){return!!i.blaze.getSectionContent(o.instance().view,e)})}},templates:{"button.html":function(e,n,t){t.exports=e("./template.button.js")},"template.button.js":function(){i.__checkName("baseButton"),i.baseButton=new i("Template.baseButton",function(){var e=this;return z.BUTTON(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))},disabled:function(){return I.If(function(){return M.call(M.dot(e.lookup("."),"disabled"))},function(){return"disabled"})},title:function(){return M.mustache(M.dot(e.lookup("."),"title"))},type:function(){return M.mustache(M.dot(e.lookup("."),"type"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    ")})},"custom.html":function(e,n,t){t.exports=e("./template.custom.js")},"template.custom.js":function(){i.__checkName("baseCustom"),i.baseCustom=new i("Template.baseCustom",function(){var e=this;return I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})})})},"div.html":function(e,n,t){t.exports=e("./template.div.js")},"template.div.js":function(){i.__checkName("baseDiv"),i.baseDiv=new i("Template.baseDiv",function(){var e=this;return z.DIV(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    ")})},"form.html":function(e,n,t){t.exports=e("./template.form.js")},"template.form.js":function(){i.__checkName("baseForm"),i.baseForm=new i("Template.baseForm",function(){var e=this;return z.FORM(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))},name:function(){return M.mustache(M.dot(e.lookup("."),"name"))},action:function(){return M.mustache(M.dot(e.lookup("."),"action"))},method:function(){return M.mustache(M.dot(e.lookup("."),"method"))},autocomplete:function(){return M.mustache(M.dot(e.lookup("."),"autocomplete"))},enctype:function(){return M.mustache(M.dot(e.lookup("."),"enctype"))},novalidate:function(){return M.mustache(M.dot(e.lookup("."),"novalidate"))},target:function(){return M.mustache(M.dot(e.lookup("."),"target"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I.If(function(){return M.dataMustache(e.lookup("and"),e.lookup("validationErrors"),M.dataMustache(e.lookup("not"),M.dot(e.lookup("."),"hideValidationBox")))},function(){return["\n            ",z.DIV({class:"validation-error-container alert alert-danger",role:"alert"},"\n                ",I.Each(function(){return{_sequence:M.call(e.lookup("validationErrors")),_variable:"error"}},function(){return["\n                    ",z.P(z.A({href:"#",class:"text-danger","data-target":function(){return M.mustache(M.dot(e.lookup("error"),"key"))}},I.View("lookup:error.message",function(){return M.mustache(M.dot(e.lookup("error"),"message"))}))),"\n                "]}),"\n            "),"\n        "]}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    ")})},"input.html":function(e,n,t){t.exports=e("./template.input.js")},"template.input.js":function(){i.__checkName("baseInput"),i.baseInput=new i("Template.baseInput",function(){var e=this;return[z.INPUT(z.Attrs({type:function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"type"),"text")},id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))},name:function(){return M.mustache(M.dot(e.lookup("."),"name"))},value:function(){return M.mustache(e.lookup("reactive"),M.dot(e.lookup("."),"value"))},placeholder:function(){return M.mustache(M.dot(e.lookup("."),"placeholder"))},checked:function(){return I.If(function(){return M.call(M.dot(e.lookup("."),"checked"))},function(){return"checked"})},disabled:function(){return I.If(function(){return M.call(M.dot(e.lookup("."),"disabled"))},function(){return"disabled"})},min:function(){return M.mustache(M.dot(e.lookup("."),"min"))},max:function(){return M.mustache(M.dot(e.lookup("."),"max"))},maxlength:function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"maxlength"),M.dot(e.lookup("."),"max"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))})),"\n    ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})})]})},"link.html":function(e,n,t){t.exports=e("./template.link.js")},"template.link.js":function(){i.__checkName("baseLink"),i.baseLink=new i("Template.baseLink",function(){var e=this;return z.A(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return[M.mustache(M.dot(e.lookup("."),"class"))," ",I.If(function(){return M.call(M.dot(e.lookup("."),"disabled"))},function(){return"disabled"})]},href:function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"href"),"#")},title:function(){return M.mustache(M.dot(e.lookup("."),"title"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    ")})},"select.html":function(e,n,t){t.exports=e("./template.select.js")},"template.select.js":function(){i.__checkName("baseSelect"),i.baseSelect=new i("Template.baseSelect",function(){var e=this;return z.SELECT(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))},name:function(){return M.mustache(M.dot(e.lookup("."),"name"))},multiple:function(){return I.If(function(){return M.call(M.dot(e.lookup("."),"multiple"))},function(){return"multiple"})},disabled:function(){return I.If(function(){return M.call(M.dot(e.lookup("."),"disabled"))},function(){return"disabled"})}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n        ",I._TemplateWith(function(){return M.call(M.dot(e.lookup("."),"items"))},function(){return M.include(e.lookupTemplate("baseSelectOptions"))}),"\n    ")}),i.__checkName("baseSelectOptions"),i.baseSelectOptions=new i("Template.baseSelectOptions",function(){var e=this;return I.Each(function(){return{_sequence:M.dataMustache(e.lookup("reactive"),e.lookup(".")),_variable:"item"}},function(){return["\n        ",I.If(function(){return M.call(M.dot(e.lookup("item"),"items"))},function(){return["\n            ",z.OPTGROUP({label:function(){return M.mustache(M.dot(e.lookup("item"),"label"))}},"\n                ",I._TemplateWith(function(){return M.call(M.dot(e.lookup("item"),"items"))},function(){return M.include(e.lookupTemplate("baseSelectOptions"))}),"\n            "),"\n        "]},function(){return["\n            ",z.OPTION({value:function(){return M.mustache(M.dot(e.lookup("item"),"value"))},selected:function(){return I.If(function(){return M.dataMustache(e.lookup("eq"),M.dot(e.lookup("item"),"value"),M.dataMustache(e.lookup("reactive"),M.dot(e.lookup("."),"value")))},function(){return"selected"})}},I.View("lookup:item.label",function(){return M.mustache(M.dot(e.lookup("item"),"label"))})),"\n        "]}),"\n    "]})})},"tr.html":function(e,n,t){t.exports=e("./template.tr.js")},"template.tr.js":function(){i.__checkName("baseTr"),i.baseTr=new i("Template.baseTr",function(){var e=this;return z.TR(z.Attrs({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return M.mustache(M.dot(e.lookup("."),"class"))}},function(){return M.attrMustache(M.dot(e.lookup("."),"tagAttributes"))}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    ")})}},wrappers:{"label.html":function(e,n,t){t.exports=e("./template.label.js")},"template.label.js":function(){i.__checkName("wrapperLabel"),i.wrapperLabel=new i("Template.wrapperLabel",function(){var e=this;return I.Unless(function(){return M.call(M.dot(e.lookup("."),"labelAsDiv"))},function(){return["\n        ",z.LABEL(z.Attrs({class:function(){return["wrapperLabel ",M.mustache(M.dot(e.lookup("."),"labelClass"))]}},function(){return M.attrMustache(e.lookup("clone"),M.dot(e.lookup("."),"labelTagAttributes"))}),"\n            ",I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({labelAfter:!0}))},function(){return M.include(e.lookupTemplate("wrapperLabelContent"),function(){return["\n                ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n            "]})}),"\n        "),"\n    "]},function(){return["\n        ",z.DIV(z.Attrs({class:function(){return["wrapperLabel ",M.mustache(M.dot(e.lookup("."),"labelClass"))]}},function(){return M.attrMustache(e.lookup("clone"),M.dot(e.lookup("."),"labelTagAttributes"))}),"\n            ",M.include(e.lookupTemplate("wrapperLabelContent"),function(){return["\n                ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n            "]}),"\n        "),"\n    "]})})},"labelContent.html":function(e,n,t){t.exports=e("./template.labelContent.js")},"template.labelContent.js":function(){i.__checkName("wrapperLabelContent"),i.wrapperLabelContent=new i("Template.wrapperLabelContent",function(){var e=this;return[I.If(function(){return M.call(M.dot(e.lookup("."),"labelAfter"))},function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]}),"\n    ",z.SPAN({class:"wrapperText"},I._TemplateWith(function(){return"labelBeforeText"},function(){return M.include(e.lookupTemplate("section"))}),I.View("lookup:reactive",function(){return M.mustache(e.lookup("reactive"),M.dot(e.lookup("."),"label"))}),I._TemplateWith(function(){return"labelAfterText"},function(){return M.include(e.lookupTemplate("section"))})),"\n    ",I.Unless(function(){return M.call(M.dot(e.lookup("."),"labelAfter"))},function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})]})}}},bootstrap:{"index.js":function(e,n,t){t.watch(e("./dialog/confirm.html")),t.watch(e("./dialog/form.html")),t.watch(e("./dialog/form.js")),t.watch(e("./dialog/header.html")),t.watch(e("./dialog/info.html")),t.watch(e("./dialog/info.js")),t.watch(e("./dialog/loading.html")),t.watch(e("./dialog/loading.js")),t.watch(e("./dialog/login.html")),t.watch(e("./dialog/login.js")),t.watch(e("./dialog/progress.html")),t.watch(e("./dialog/progress.js")),t.watch(e("./dialog/simple.html")),t.watch(e("./dialog/simple.js")),t.watch(e("./dialog/unsavedChangesDialog.html")),t.watch(e("./dialog/unsavedChangesDialog.js")),t.watch(e("./dropdown/form.html")),t.watch(e("./dropdown/form.js")),t.watch(e("./form/button.html")),t.watch(e("./form/form.html")),t.watch(e("./form/group.html")),t.watch(e("./form/link.html")),t.watch(e("./input/checkbox.html")),t.watch(e("./input/hidden.html")),t.watch(e("./input/groupRadio.html")),t.watch(e("./input/number.html")),t.watch(e("./input/password.html")),t.watch(e("./input/radio.html")),t.watch(e("./input/range.html")),t.watch(e("./input/select.html")),t.watch(e("./input/text.html")),t.watch(e("./notification")),t.watch(e("./popover/form.html"))},dialog:{"confirm.html":function(e,n,t){t.exports=e("./template.confirm.js")},"template.confirm.js":function(){i.__checkName("dialogConfirm"),i.dialogConfirm=new i("Template.dialogConfirm",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({dialogClass:"modal-sm",title:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"title"),"Confirmation"),message:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"message"),"Are you sure you want to perform this action?")}))},function(){return M.include(e.lookupTemplate("dialogForm"))})})},"form.html":function(e,n,t){t.exports=e("./template.form.js")},"template.form.js":function(){i.__checkName("dialogForm"),i.dialogForm=new i("Template.dialogForm",function(){var e=this;return z.DIV({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return["modal fade ",M.mustache(M.dot(e.lookup("."),"class"))]},tabindex:"-1",role:"dialog"},"\n        ",z.DIV({class:function(){return["modal-dialog ",M.mustache(M.dot(e.lookup("."),"dialogClass"))]},role:"document"},"\n            ",I._TemplateWith(function(){return{class:M.call(M.dataMustache(e.lookup("concat"),"modal-content ",M.dot(e.lookup("."),"formClass"))),hideValidationBox:M.call(!0),api:M.call(M.dataMustache(e.lookup("extend"),M.dot(e.lookup("instance"),"api"),M.dot(e.lookup("instance"),"data","api"))),schema:M.call(M.dot(e.lookup("."),"schema"))}},function(){return M.include(e.lookupTemplate("form"),function(){return["\n                ",I.If(function(){return M.dataMustache(e.lookup("or"),M.dot(e.lookup("."),"title"),M.dataMustache(e.lookup("hasSection"),"dialogHeader"))},function(){return["\n                    ",I._TemplateWith(function(){return M.call(e.lookup("."))},function(){return M.include(e.lookupTemplate("dialogHeader"))}),"\n                "]}),"\n                ",z.DIV({class:"modal-body"},"\n                    ",z.DIV({class:"messages"},"\n                        ",I.Each(function(){return{_sequence:M.call(M.dot(e.lookup("."),"messages")),_variable:"message"}},function(){return["\n                            ",z.DIV({class:"message"},I.View("lookup:message",function(){return M.makeRaw(M.mustache(e.lookup("message")))})),"\n                        "]},function(){return["\n                            ",I.If(function(){return M.call(e.lookup("isError"))},function(){return["\n                                ",I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({error:M.dot(e.lookup("."),"details")}))},function(){return M.include(e.lookupTemplate("pageError"))}),"\n                            "]},function(){return["\n                                ",I.Let({message:function(){return M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"bodyText"),M.dot(e.lookup("."),"reason"),M.dot(e.lookup("."),"message"),M.dataMustache(e.lookup("valueIf"),e.templateContentBlock,"","An error has ocurred.")))}},function(){return["\n                                    ",z.DIV({class:"message"},I.View("lookup:message",function(){return M.mustache(e.lookup("message"))})),"\n                                "]}),"\n                            "]}),"\n                        "]}),"\n                    "),"\n                    ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n                "),"\n                ",z.DIV({class:"modal-footer"},"\n                    ",I._TemplateWith(function(){return"dialogFooter"},function(){return M.include(e.lookupTemplate("section"))}),"\n                    ",I.Unless(function(){return M.call(M.dot(e.lookup("."),"hideCancel"))},function(){return["\n                        ",I._TemplateWith(function(){return{action:M.call("cancel"),disabled:M.call(M.dot(e.lookup("."),"cancelDisabled")),class:M.call(M.dataMustache(e.lookup("concat"),"btn btn-cancel ",M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"cancelClass"),"btn-secondary"))),tagAttributes:M.call(M.dataMustache(e.lookup("extend"),M.dot(e.lookup("."),"tagAttributes"),M.kw({"data-dismiss":"modal"})))}},function(){return M.include(e.lookupTemplate("button"),function(){return I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"cancelLabel"),"Cancel")})})}),"\n                    "]}),"\n                    ",I.Unless(function(){return M.call(M.dot(e.lookup("."),"hideConfirm"))},function(){return["\n                        ",I._TemplateWith(function(){return{action:M.call("confirm"),disabled:M.call(M.dot(e.lookup("."),"confirmDisabled")),class:M.call(M.dataMustache(e.lookup("concat"),"btn btn-confirm ",M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"confirmClass"),"btn-primary")))}},function(){return M.include(e.lookupTemplate("button"),function(){return I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"confirmLabel"),"Confirm")})})}),"\n                    "]}),"\n                "),"\n            "]})}),"\n        "),"\n    ")})},"form.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/underscore"),{_:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},2),o.dialogForm.onCreated(function(){var e=o.instance(),n=function(n,t){e.$(".modal").one("hidden.bs.modal",function(e){n(t)}).modal("hide")};e.api={confirm:function(){var t=e.$("form").data("component");if(t.validate()){var o=t.value(),r=function(t){return n(e.data.promiseResolve,t)};if(a.isFunction(e.data.confirmCallback)){var i=e.data.confirmCallback(o);return i instanceof h?i.then(r):r(i)}r(o)}},cancel:function(){var t=function(t){return n(e.data.promiseReject,t)};if(a.isFunction(e.data.cancelCallback)){var o=e.data.cancelCallback();return o instanceof h?o.then(t):t(o)}t()}}}),o.dialogForm.onRendered(function(){var e=o.instance(),n=a.extend({backdrop:"static",keyboard:!1},e.data.modalOptions),t=e.$(".modal");t.modal(n);var i=e.data.position,l=e.data.event;!i&&l&&l.clientX&&(i={x:l.clientX,y:l.clientY}),i&&r.ui.repositionDialog(t,i.x,i.y)}),o.dialogForm.events({keydown:function(e){var n=o.instance(),t=e.keyCode||e.which,a=!1;27===t?(n.$(".btn.btn-cancel").click(),a=!0):13===t&&(n.$(".btn.btn-confirm").click(),a=!0),a&&e.stopPropagation()}}),o.dialogForm.helpers({isError:function(){var e=o.instance().data;return e instanceof Error||e&&e.error instanceof Error}})},"header.html":function(e,n,t){t.exports=e("./template.header.js")},"template.header.js":function(){i.__checkName("dialogHeader"),i.dialogHeader=new i("Template.dialogHeader",function(){var e=this;return z.DIV({class:"modal-header"},"\n        ",I._TemplateWith(function(){return"dialogHeader"},function(){return M.include(e.lookupTemplate("section"))}),"\n        ",I.If(function(){return M.dataMustache(e.lookup("or"),M.dot(e.lookup("."),"title"),M.dataMustache(e.lookup("hasSection"),"dialogHeader"))},function(){return["\n            ",I._TemplateWith(function(){return{class:M.call("close"),action:M.call("cancel"),tagAttributes:M.call(M.dataMustache(e.lookup("extend"),M.dot(e.lookup("."),"tagAttributes"),M.kw({"data-dismiss":"modal","aria-label":"Close"})))}},function(){return M.include(e.lookupTemplate("button"),function(){return z.SPAN({"aria-hidden":"true"},z.CharRef({html:"&times;",str:""}))})}),"\n            ",z.H4({class:"modal-title"},"\n                ",I.If(function(){return M.call(M.dot(e.lookup("."),"titleIcon"))},function(){return z.I({class:function(){return M.mustache(M.dot(e.lookup("."),"titleIcon"))}})}),"\n                ",z.SPAN(I.View("lookup:..title",function(){return M.mustache(M.dot(e.lookup("."),"title"))})),"\n            "),"\n        "]}),"\n    ")})},"info.html":function(e,n,t){t.exports=e("./template.info.js")},"template.info.js":function(){i.__checkName("dialogInfo"),i.dialogInfo=new i("Template.dialogInfo",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({title:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"title"),"Error")}))},function(){return M.include(e.lookupTemplate("dialogSimple"),function(){return["\n    ",z.DIV({class:"messages"},"\n      ",I.Each(function(){return{_sequence:M.call(M.dot(e.lookup("."),"messages")),_variable:"message"}},function(){return["\n        ",z.DIV({class:"message"},I.View("lookup:message",function(){return M.makeRaw(M.mustache(e.lookup("message")))})),"\n      "]},function(){return["\n        ",I.If(function(){return M.call(e.lookup("isError"))},function(){return["\n            ",I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({error:M.dot(e.lookup("."),"details")}))},function(){return M.include(e.lookupTemplate("pageError"))}),"\n        "]},function(){return["\n          ",I.Let({message:function(){return M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"reason"),M.dot(e.lookup("."),"message"),"An error has ocurred."))}},function(){return["\n            ",z.DIV({class:"message"},I.View("lookup:message",function(){return M.mustache(e.lookup("message"))})),"\n          "]}),"\n        "]}),"\n      "]}),"\n    "),"\n  "]})})})},"info.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0),o.dialogInfo.onRendered(function(){var e=o.instance();e.$(".modal").one("hidden.bs.modal",function(){return e.data.promiseResolve()})}),o.dialogInfo.helpers({isError:function(){var e=o.instance().data;return e instanceof Error||e&&e.error instanceof Error}})},"loading.html":function(e,n,t){t.exports=e("./template.loading.js")},"template.loading.js":function(){i.__checkName("dialogLoading"),i.dialogLoading=new i("Template.dialogLoading",function(){var e=this;return z.DIV({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return["modal fade ",M.mustache(M.dot(e.lookup("."),"class"))]},tabindex:"-1",role:"dialog"},"\n        ",z.DIV({class:"loading-text noselect"},"\n            ",I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"text"),"Loading...")})," ",z.Raw('<i class="fa fa-spin fa-circle-o-notch fa-fw"></i>'),"\n        "),"\n    ")})},"loading.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0),o.dialogLoading.onRendered(function(){o.instance().$(".modal").modal({backdrop:"static",keyboard:!1,show:!0})})},"login.html":function(e,n,t){t.exports=e("./template.login.js")},"template.login.js":function(){i.__checkName("dialogLogin"),i.dialogLogin=new i("Template.dialogLogin",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({dialogClass:"modal-sm",schema:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"schema"),M.dot(e.lookup("instance"),"schema"))}))},function(){return M.include(e.lookupTemplate("dialogForm"),function(){return["\n        ",I._TemplateWith(function(){return{labelClass:M.call("form-group"),key:M.call("username")}},function(){return M.include(e.lookupTemplate("inputText"))}),"\n        ",I._TemplateWith(function(){return{labelClass:M.call("form-group"),key:M.call("password")}},function(){return M.include(e.lookupTemplate("inputPassword"))}),"\n    "]})})})},"login.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){a=e}},1),o.dialogLogin.onCreated(function(){o.instance().schema=new a({username:{type:String,label:"Username"},password:{type:String,label:"Password"}})})},"progress.html":function(e,n,t){t.exports=e("./template.progress.js")},"template.progress.js":function(){i.__checkName("dialogProgress"),i.dialogProgress=new i("Template.dialogProgress",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({dialogClass:"modal-sm modal-progress",title:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"title"),"Processing...")}))},function(){return M.include(e.lookupTemplate("dialogForm"),function(){return["\n    ",z.DIV({class:"status"},"\n      ",z.DIV({class:"progress-bar-container"},"\n        ",z.DIV({class:"progress-bar progress-bar-striped active",role:"progressbar",style:function(){return["width: ",M.mustache(e.lookup("progress")),"%"]}},"\n          ",z.DIV({class:"percentage"},I.View("lookup:formatNumberPrecision",function(){return M.mustache(e.lookup("formatNumberPrecision"),e.lookup("progress"),0)}),"%"),"\n        "),"\n      "),"\n    "),"\n    ",z.DIV({class:"message"},"\n      ",I.View("lookup:message",function(){return M.makeRaw(M.mustache(e.lookup("message")))}),"\n    "),"\n  "]})})})},"progress.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2),o.dialogProgress.onCreated(function(){var e=o.instance();e.state=new a({processed:0,total:e.data.total,message:e.data.message})}),o.dialogProgress.onRendered(function(){var e=o.instance(),n=e.data.task,t={promise:e.data.promise,done:function(n){e.$(".modal").on("hidden.bs.modal",function(t){e.data.promiseResolve(n)}).modal("hide")},cancel:function(){e.$(".modal").on("hidden.bs.modal",function(n){e.data.promiseReject()}).modal("hide")},update:r.throttle(function(n){var t=e.state.get();t.processed=Math.max(0,n),e.state.set(t)},100),setTotal:r.throttle(function(n){var t=e.state.get();t.total=n,e.state.set(t)},100),setMessage:r.throttle(function(n){var t=e.state.get();t.message=n,e.state.set(t)},100)};n.run(t)}),o.dialogProgress.helpers({progress:function(){var e=o.instance().state.get();return e&&e.total?100*Math.min(1,e.processed/e.total):0},message:function(){var e=o.instance().state.get();if(e)return"function"==typeof e.message?e.message(e):e.message}})},"simple.html":function(e,n,t){t.exports=e("./template.simple.js")},"template.simple.js":function(){i.__checkName("dialogSimple"),i.dialogSimple=new i("Template.dialogSimple",function(){var e=this;return z.DIV({id:function(){return M.mustache(M.dot(e.lookup("."),"id"))},class:function(){return["modal fade ",M.mustache(M.dot(e.lookup("."),"class"))]},tabindex:"-1",role:"dialog"},"\n        ",z.DIV({class:function(){return["modal-dialog ",M.mustache(M.dot(e.lookup("."),"dialogClass"))]},role:"document"},"\n            ",z.DIV({class:"modal-content"},"\n                ",I._TemplateWith(function(){return M.call(e.lookup("."))},function(){return M.include(e.lookupTemplate("dialogHeader"))}),"\n                ",z.DIV({class:"modal-body"},"\n                    ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n                "),"\n                ",z.DIV({class:"modal-footer"},I._TemplateWith(function(){return"dialogFooter"},function(){return M.include(e.lookupTemplate("section"))})),"\n            "),"\n        "),"\n    ")})},"simple.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),a.dialogSimple.onCreated(function(){var e=a.instance();e.close=function(){e.$(".modal").one("hidden.bs.modal",function(){return e.data.promiseResolve()}).modal("hide")},e.data.timeout&&o.setTimeout(e.close,e.data.timeout)}),a.dialogSimple.onRendered(function(){var e=a.instance(),n=r.extend({backdrop:"static",keyboard:!1},e.data.modalOptions),t=e.$(".modal");t.modal(n);var o=e.data.position,l=e.data.event;o||!l||r.isUndefined(l.clientX)||(o={x:l.clientX,y:l.clientY}),o&&i.ui.repositionDialog(t,o.x,o.y)}),a.dialogSimple.events({keydown:function(e){var n=a.instance();27===(e.keyCode||e.which)&&(n.close(),e.stopPropagation())}})},"unsavedChangesDialog.html":function(e,n,t){t.exports=e("./template.unsavedChangesDialog.js")},"template.unsavedChangesDialog.js":function(){i.__checkName("unsavedChangesDialog"),i.unsavedChangesDialog=new i("Template.unsavedChangesDialog",function(){var e=this;return z.DIV({class:function(){return["modal unsavedChangesDialog fade ",M.mustache(M.dot(e.lookup("."),"class"))]},tabindex:"-1",role:"dialog"},"\n        ",z.DIV({class:"modal-dialog",role:"document"},"\n            ",z.DIV({class:"modal-content"},"\n                ",z.DIV({class:"modal-header"},"\n                    ",z.Raw('<button class="close" aria-label="Close" data-choice="abort-action" data-dismiss="modal">\n                        <span aria-hidden="true">&times;</span>\n                    </button>'),"\n                    ",z.H4({class:"modal-title"},I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"message"),"You have unsaved changes!")})),"\n                "),"\n                ",z.DIV({class:"modal-footer"},"\n\n                    ",I.Let({label:function(){return M.call("Stay")}},function(){return["\n                    ",z.BUTTON({class:"btn btn-secondary","aria-label":function(){return M.mustache(e.lookup("label"))},"data-choice":"abort-action","data-dismiss":"modal"},"\n                        ",I.View("lookup:label",function(){return M.mustache(e.lookup("label"))}),"\n                    "),"\n                    "]}),"\n\n                    ",I.Let({label:function(){return M.call("Don't Save")}},function(){return["\n                    ",z.BUTTON({class:"btn btn-danger","aria-label":function(){return M.mustache(e.lookup("label"))},"data-choice":"abandon-changes","data-dismiss":"modal"},"\n                        ",I.View("lookup:label",function(){return M.mustache(e.lookup("label"))}),"\n                    "),"\n                    "]}),"\n\n                    ",I.Let({label:function(){return M.call("Save and Exit!")}},function(){return["\n                    ",z.BUTTON({class:"btn btn-primary","aria-label":function(){return M.mustache(e.lookup("label"))},"data-choice":"save-changes","data-dismiss":"modal"},"\n                        ",I.View("lookup:label",function(){return M.mustache(e.lookup("label"))}),"\n                    "),"\n                    "]}),"\n\n                "),"\n            "),"\n        "),"\n    ")})},"unsavedChangesDialog.js":function(e,n,t){var o=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/jquery"),{$:function(e){i=e}},3);var l=15,c=15;a.unsavedChangesDialog.onRendered(function(){var e=a.instance(),n=e.$(".modal.unsavedChangesDialog");e.displayModal=function(){var t=r.extend({backdrop:"static",keyboard:!1},e.data.modalOptions);n.one("hidden.bs.modal",function(){o.remove(e.view)}),n.modal(t)},e.displayModalWithPosition=function(t){var o={display:n.css("display"),visibility:n.css("visibility")};"none"===o.display&&n.css({visibility:"hidden",display:"block"}),setTimeout(function(){var a=void 0,r=n.find(".modal-dialog"),i={position:{x:parseInt(t.x)||0,y:parseInt(t.y)||0},size:{width:r.outerWidth(),height:r.outerHeight()}},l={width:n.width(),height:n.height()};(a=i.position.x+i.size.width+15)>l.width&&(i.position.x-=a-l.width),i.position.x<0&&(i.position.x=0),(a=i.position.y+i.size.height+15)>l.height&&(i.position.y-=a-l.height),i.position.y<0&&(i.position.y=0),n.css(o),r.css({position:"fixed",margin:0,left:i.position.x,top:i.position.y}),e.displayModal()},0)};var t=e.data.position;t&&"x"in t&&"y"in t?e.displayModalWithPosition(t):e.displayModal()}),a.unsavedChangesDialog.events({"click button[data-choice]":function(e){var n=a.instance(),t=n.data.callback,o=i(e.currentTarget).attr("data-choice")||"";"function"==typeof t&&t.call(n,o)}})}},dropdown:{"form.html":function(e,n,t){t.exports=e("./template.form.js")},"template.form.js":function(){i.__checkName("dropdownForm"),i.dropdownForm=new i("Template.dropdownForm",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({mixins:"dropdown",class:"dropdown",hideValidationBox:!0}))},function(){return M.include(e.lookupTemplate("form"),function(){return["\n        ",I._TemplateWith(function(){return{items:M.call(M.dot(e.lookup("."),"items")),classes:M.call(M.dot(e.lookup("."),"options","menuClasses"))}},function(){return M.include(e.lookupTemplate("dropdownFormMenu"))}),"\n    "]})})}),i.__checkName("dropdownFormMenu"),i.dropdownFormMenu=new i("Template.dropdownFormMenu",function(){var e=this;return z.UL({class:function(){return["dropdown-menu ",M.mustache(M.dot(e.lookup("."),"classes"))]}},"\n        ",I.If(function(){return M.call(e.templateContentBlock)},function(){return["\n            ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n        "]},function(){return["\n            ",I.Each(function(){return{_sequence:M.call(M.dot(e.lookup("."),"items")),_variable:"item"}},function(){return["\n                ",I.If(function(){return M.dataMustache(e.lookup("isVisible"),e.lookup("item"))},function(){return["\n                    ",I.If(function(){return M.call(M.dot(e.lookup("item"),"separatorBefore"))},function(){return["\n                        ",z.LI({role:"separator",class:"divider"}),"\n                    "]}),"\n                    ",z.LI({class:function(){return[I.If(function(){return M.call(M.dot(e.lookup("item"),"disabled"))},function(){return"disabled"})," ",I.If(function(){return M.call(M.dot(e.lookup("item"),"items"))},function(){return"dropdown-submenu"})]}},"\n                        ",I._TemplateWith(function(){return M.call(e.lookup("item"))},function(){return M.include(e.lookupTemplate("link"),function(){return["\n                            ",I.If(function(){return M.call(M.dot(e.lookup("item"),"icon"))},function(){return["\n                                ",z.I({class:function(){return[M.mustache(M.dot(e.lookup("item"),"icon"))," ",M.mustache(M.dot(e.lookup("item"),"iconClasses"))]}}),"\n                            "]}),"\n                            ",I.If(function(){return M.call(M.dot(e.lookup("item"),"iconSvgUse"))},function(){return["\n                                ",z.SVG({class:function(){return M.mustache(M.dot(e.lookup("item"),"iconClasses"))}},"\n                                    ",z.USE({"xlink:href":function(){return M.mustache(e.lookup("absoluteUrl"),M.dot(e.lookup("item"),"iconSvgUse"))}}),"\n                                "),"\n                            "]}),"\n                            ",I.Let({text:function(){return M.call(M.dataMustache(e.lookup("getText"),e.lookup("item")))}},function(){return["\n                                ",I.If(function(){return M.call(e.lookup("text"))},function(){return["\n                                    ",z.SPAN(I.View("lookup:text",function(){return M.mustache(e.lookup("text"))})),"\n                                "]}),"\n                            "]}),"\n                        "]})}),"\n                    "),"\n                    ",I.If(function(){return M.call(M.dot(e.lookup("item"),"separatorAfter"))},function(){return["\n                        ",z.LI({role:"separator",class:"divider"}),"\n                    "]}),"\n                "]}),"\n            "]}),"\n        "]}),"\n    ")})},"form.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0),o.dropdownFormMenu.helpers({isVisible:function(e){var n=!0;return"function"==typeof e.visible?n=e.visible():void 0!==e.visible&&(n=!!e.visible),n},getText:function(e){return"function"==typeof e.text?e.text(e.params||{}):e.text||""}})}},form:{"button.html":function(e,n,t){t.exports=e("./template.button.js")},"template.button.js":function(){i.__checkName("button"),i.button=new i("Template.button",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseButton",mixins:M.dataMustache(e.lookup("concat"),"button action ",M.dot(e.lookup("."),"mixins"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"form.html":function(e,n,t){t.exports=e("./template.form.js")},"template.form.js":function(){i.__checkName("form"),i.form=new i("Template.form",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseForm",mixins:M.dataMustache(e.lookup("concat"),"form ",M.dot(e.lookup("."),"mixins"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n      ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"group.html":function(e,n,t){t.exports=e("./template.group.js")},"template.group.js":function(){i.__checkName("group"),i.group=new i("Template.group",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({class:M.dataMustache(e.lookup("concat"),"component-group ",M.dot(e.lookup("."),"class")),base:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"base"),"baseDiv"),mixins:M.dataMustache(e.lookup("concat"),"group ",M.dot(e.lookup("."),"mixins"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n      ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"link.html":function(e,n,t){t.exports=e("./template.link.js")},"template.link.js":function(){i.__checkName("link"),i.link=new i("Template.link",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseLink",mixins:M.dataMustache(e.lookup("concat"),"link action ",M.dot(e.lookup("."),"mixins"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})}},input:{"checkbox.html":function(e,n,t){t.exports=e("./template.checkbox.js")},"template.checkbox.js":function(){i.__checkName("inputCheckbox"),i.inputCheckbox=new i("Template.inputCheckbox",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",type:"checkbox",mixins:M.dataMustache(e.lookup("concat"),"checkbox ",M.dot(e.lookup("."),"mixins")),labelAfter:M.dataMustache(e.lookup("valueIf"),M.dataMustache(e.lookup("isUndefined"),M.dot(e.lookup("."),"labelAfter")),!0,M.dot(e.lookup("."),"labelAfter")),labelClass:M.dataMustache(e.lookup("concat"),"checkboxLabel ",M.dot(e.lookup("."),"labelClass")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"groupRadio.html":function(e,n,t){t.exports=e("./template.groupRadio.js")},"template.groupRadio.js":function(){i.__checkName("groupRadio"),i.groupRadio=new i("Template.groupRadio",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({class:M.dataMustache(e.lookup("concat"),"group-radio ",M.dot(e.lookup("."),"class")),mixins:M.dataMustache(e.lookup("concat"),"groupRadio ",M.dot(e.lookup("."),"mixins")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers")),labelAsDiv:!0}))},function(){return M.include(e.lookupTemplate("group"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n        ",I.Each(function(){return{_sequence:M.dataMustache(e.lookup("reactive"),M.dot(e.lookup("."),"items")),_variable:"item"}},function(){return["\n            ",I._TemplateWith(function(){return{class:M.call(M.dot(e.lookup("."),"radioClass")),name:M.call(M.dot(e.lookup("."),"key")),value:M.call(M.dot(e.lookup("item"),"value")),label:M.call(M.dot(e.lookup("item"),"label")),checked:M.call(M.dataMustache(e.lookup("eq"),M.dot(e.lookup("item"),"value"),M.dataMustache(e.lookup("reactive"),M.dot(e.lookup("."),"value"))))}},function(){return M.include(e.lookupTemplate("inputRadio"))}),"\n        "]}),"\n    "]})})})},"hidden.html":function(e,n,t){t.exports=e("./template.hidden.js")},"template.hidden.js":function(){i.__checkName("inputHidden"),i.inputHidden=new i("Template.inputHidden",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",type:"hidden",mixins:M.dataMustache(e.lookup("concat"),"input ",M.dot(e.lookup("."),"mixins"))}))},function(){return M.include(e.lookupTemplate("baseComponent"))})})},"number.html":function(e,n,t){t.exports=e("./template.number.js")},"template.number.js":function(){i.__checkName("inputNumber"),i.inputNumber=new i("Template.inputNumber",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",type:"number",class:M.dataMustache(e.lookup("concat"),"form-control ",M.dot(e.lookup("."),"class")),mixins:M.dataMustache(e.lookup("concat"),"input ",M.dot(e.lookup("."),"mixins")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"password.html":function(e,n,t){t.exports=e("./template.password.js")},"template.password.js":function(){i.__checkName("inputPassword"),i.inputPassword=new i("Template.inputPassword",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({type:"password"}))},function(){return M.include(e.lookupTemplate("inputText"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"radio.html":function(e,n,t){t.exports=e("./template.radio.js")},"template.radio.js":function(){i.__checkName("inputRadio"),i.inputRadio=new i("Template.inputRadio",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",type:"radio",mixins:M.dataMustache(e.lookup("concat"),"input ",M.dot(e.lookup("."),"mixins")),labelAfter:M.dataMustache(e.lookup("valueIf"),M.dataMustache(e.lookup("isUndefined"),M.dot(e.lookup("."),"labelAfter")),!0,M.dot(e.lookup("."),"labelAfter")),labelClass:M.dataMustache(e.lookup("concat"),"radioLabel ",M.dot(e.lookup("."),"labelClass")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"range.html":function(e,n,t){t.exports=e("./template.range.js")},"template.range.js":function(){i.__checkName("inputRange"),i.inputRange=new i("Template.inputRange",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",type:"range",class:M.dataMustache(e.lookup("concat"),"form-control ",M.dot(e.lookup("."),"class")),mixins:M.dataMustache(e.lookup("concat"),"input ",M.dot(e.lookup("."),"mixins")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"select.html":function(e,n,t){t.exports=e("./template.select.js")},"template.select.js":function(){i.__checkName("inputSelect"),i.inputSelect=new i("Template.inputSelect",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseSelect",mixins:M.dataMustache(e.lookup("concat"),"select2 ",M.dot(e.lookup("."),"mixins")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers")),options:M.dataMustache(e.lookup("clone"),M.dot(e.lookup("."),"options"),M.kw({multiple:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"options","multiple"),M.dot(e.lookup("."),"multiple"),!1),placeholder:M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"options","placeholder"),M.dot(e.lookup("."),"placeholder")),minimumResultsForSearch:M.dataMustache(e.lookup("valueIf"),M.dot(e.lookup("."),"hideSearch"),-1,M.dot(e.lookup("."),"options","minimumResultsForSearch"))}))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})},"text.html":function(e,n,t){t.exports=e("./template.text.js")},"template.text.js":function(){i.__checkName("inputText"),i.inputText=new i("Template.inputText",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({base:"baseInput",class:M.dataMustache(e.lookup("concat"),"form-control ",M.dot(e.lookup("."),"class")),mixins:M.dataMustache(e.lookup("concat"),"input ",M.dot(e.lookup("."),"mixins")),wrappers:M.dataMustache(e.lookup("concat"),"",M.dataMustache(e.lookup("valueIf"),e.lookup("reactive"),M.dot(e.lookup("."),"label"),"wrapperLabel ",""),M.dot(e.lookup("."),"wrappers"))}))},function(){return M.include(e.lookupTemplate("baseComponent"),function(){return["\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n    "]})})})}},notification:{"index.js":function(e,n,t){t.watch(e("./notification.styl")),t.watch(e("./notificationNote.html")),t.watch(e("./notificationNote.js"))},"notification.styl":function(e,n,t){t.exports=e("./notification.styl.css")},"notification.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.notification-area {\n  position: fixed;\n  right: 0;\n  top: 50px;\n  max-width: 320px;\n  z-index: 10000;\n}\n.notification-note {\n  opacity: 0;\n  position: relative;\n  -webkit-transition: opacity 0.5s linear , max-height 0.5s linear;\n  -moz-transition: opacity 0.5s linear , max-height 0.5s linear;\n  -ms-transition: opacity 0.5s linear , max-height 0.5s linear;\n  -o-transition: opacity 0.5s linear , max-height 0.5s linear;\n  transition: opacity 0.5s linear , max-height 0.5s linear;\n  width: 300px;\n  z-index: 2;\n}\n.notification-note .note-container {\n  padding: 10px;\n  -webkit-transform: translateY(0);\n  -moz-transform: translateY(0);\n  -ms-transform: translateY(0);\n  -o-transform: translateY(0);\n  transform: translateY(0);\n  -webkit-transition: transform 0.5s linear;\n  -moz-transition: transform 0.5s linear;\n  -ms-transition: transform 0.5s linear;\n  -o-transition: transform 0.5s linear;\n  transition: transform 0.5s linear;\n}\n.notification-note .note-container .note-body {\n  margin: 0;\n  padding: 10px;\n  position: relative;\n}\n.notification-note .note-container .note-body:not(.hide-dismiss) {\n  padding-right: 50px;\n}\n.notification-note .note-container .note-body:not(.hide-dismiss) .note-dismiss {\n  display: block;\n}\n.notification-note .note-container .note-dismiss {\n  bottom: 0;\n  cursor: pointer;\n  display: none;\n  position: absolute;\n  right: 0;\n  top: 0;\n  -webkit-transition: background-color 0.3s ease;\n  -moz-transition: background-color 0.3s ease;\n  -ms-transition: background-color 0.3s ease;\n  -o-transition: background-color 0.3s ease;\n  transition: background-color 0.3s ease;\n  width: 40px;\n}\n.notification-note .note-container .note-dismiss i {\n  display: block;\n  font-size: 20px;\n  left: 0;\n  position: absolute;\n  text-align: center;\n  top: 50%;\n  -webkit-transform: translateY(-50%);\n  -moz-transform: translateY(-50%);\n  -ms-transform: translateY(-50%);\n  -o-transform: translateY(-50%);\n  transform: translateY(-50%);\n  width: 100%;\n}\n.notification-note .note-container .note-dismiss:hover {\n  background-color: rgba(0,0,0,0.1);\n}\n.notification-note.in {\n  max-height: auto;\n  opacity: 1;\n}\n.notification-note.out {\n  max-height: 0 !important;\n  opacity: 0;\n  z-index: 1;\n}\n.notification-note.out .note-container {\n  -webkit-transform: translateY(-100%);\n  -moz-transform: translateY(-100%);\n  -ms-transform: translateY(-100%);\n  -o-transform: translateY(-100%);\n  transform: translateY(-100%);\n}\n')},"notificationNote.html":function(e,n,t){t.exports=e("./template.notificationNote.js")},"template.notificationNote.js":function(){i.__checkName("notificationNote"),i.notificationNote=new i("Template.notificationNote",function(){var e=this;return z.DIV({class:function(){return["notification-note ",M.mustache(M.dot(e.lookup("."),"class"))]}},"\n        ",z.DIV({class:"note-container"},"\n            ",z.DIV({class:function(){return["note-body alert alert-",M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"style"),"info")," ",I.If(function(){return M.call(e.lookup("hideDismiss"))},function(){return"hide-dismiss"})]}},"\n                ",z.DIV({class:"note-content"},"\n                    ",I.If(function(){return M.call(M.dot(e.lookup("."),"template"))},function(){return["\n                        ",I._TemplateWith(function(){return{template:M.call(M.dot(e.lookup("."),"template")),data:M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"templateData"),e.lookup(".")))}},function(){return M.include(function(){return M.call(i.__dynamic)})}),"\n                    "]},function(){return["\n                        ",I.View("lookup:..text",function(){return M.mustache(M.dot(e.lookup("."),"text"))}),"\n                    "]}),"\n                "),"\n                ",z.Raw('<div class="note-dismiss">\n                    <i class="fa fa-times"></i>\n                </div>'),"\n            "),"\n        "),"\n    ")})},"notificationNote.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},2),a.notificationNote.onRendered(function(){var e=a.instance();o.setTimeout(function(){var n=e.$(".notification-note");n.css("max-height",n.outerHeight()).addClass("in")},100)}),a.notificationNote.events({"click .note-dismiss":function(e,n){n.data.promiseResolve?n.data.promiseResolve():r.ui.notifications.dismiss(n.data.id)}})}},popover:{"form.html":function(e,n,t){t.exports=e("./template.form.js")},"template.form.js":function(){i.__checkName("popoverForm"),i.popoverForm=new i("Template.popoverForm",function(){var e=this;return I._TemplateWith(function(){return M.dataMustache(e.lookup("extend"),e.lookup("."),M.kw({mixins:"popover",hideValidationBox:!0}))},function(){return M.include(e.lookupTemplate("form"),function(){return["\n        ",I.If(function(){return M.call(M.dot(e.lookup("."),"message"))},function(){return["\n            ",z.P(I.View("lookup:..message",function(){return M.mustache(M.dot(e.lookup("."),"message"))})),"\n        "]}),"\n        ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n        ",z.DIV({class:function(){return["popover-form-buttons ",I.If(function(){return M.dataMustache(e.lookup("eq"),M.dot(e.lookup("."),"placement"),"left")},function(){return"text-right"})]}},"\n            ",I._TemplateWith(function(){return{action:M.call("cancel"),class:M.call(M.dataMustache(e.lookup("concat"),"btn btn-cancel ",M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"cancelClass"),"btn-secondary"))),tagAttributes:M.call(M.dataMustache(e.lookup("extend"),M.dot(e.lookup("."),"tagAttributes"),M.kw({"data-dismiss":"modal"})))}},function(){return M.include(e.lookupTemplate("button"),function(){return I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"cancelLabel"),"Cancel")})})}),"\n            ",I._TemplateWith(function(){return{action:M.call("confirm"),class:M.call(M.dataMustache(e.lookup("concat"),"btn btn-confirm ",M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"confirmClass"),"btn-primary")))}},function(){return M.include(e.lookupTemplate("button"),function(){return I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"confirmLabel"),"Confirm")})})}),"\n        "),"\n    "]})})})}}},pages:{"index.js":function(e,n,t){t.watch(e("./error")),t.watch(e("./message"))},error:{"error.html":function(e,n,t){t.exports=e("./template.error.js")},"template.error.js":function(){i.__checkName("pageError"),i.pageError=new i("Template.pageError",function(){var e=this;return[I._TemplateWith(function(){return"pageMessageAfterContent"},function(){return M.include(e.lookupTemplate("section"),function(){return["\n        ",I.Let({stack:function(){return M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"stack"),M.dot(e.lookup("."),"error","stack")))}},function(){return["\n            ",I.If(function(){return M.dataMustache(e.lookup("and"),e.lookup("shallDisplayErrorStack"),e.lookup("stack"))},function(){return["\n                ",z.DIV({class:"error-stack"},"\n                    ",z.P(I.View("lookup:stack",function(){return M.mustache(e.lookup("stack"))})),"\n                "),"\n            "]}),"\n        "]}),"\n    "]})}),"\n    ",I._TemplateWith(function(){return{class:M.call("page-error"),title:M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"title"),M.dot(e.lookup("."),"error","message"),"Error")),message:M.call(M.dataMustache(e.lookup("choose"),M.dot(e.lookup("."),"message"),M.dot(e.lookup("."),"error","reason"),e.lookup("getDefaultErrorMessage")))}},function(){return M.include(e.lookupTemplate("pageMessage"),function(){return I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})})})})]})},"error.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),a.pageError.helpers({shallDisplayErrorStack:function(){return o.isDevelopment},getDefaultErrorMessage:function(){return a.instance().view.templateContentBlock?"":"An error has ocurred."}})},"error.styl":function(e,n,t){t.exports=e("./error.styl.css")},"error.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.page-error .error-stack {\n  display: table;\n  margin-top: 10px;\n  table-layout: fixed;\n  width: 100%;\n}\n.page-error .error-stack p {\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  -ms-border-radius: 4px;\n  -o-border-radius: 4px;\n  border-radius: 4px;\n  display: inline-block;\n  font-family: monospace;\n  margin: 0;\n  padding: 10px 20px;\n  overflow-x: auto;\n  white-space: pre;\n  width: 100%;\n}\n.page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-tide .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-mint .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-error .error-stack p {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-error .error-stack p {\n  background-color: #14191e;\n}\n.page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-tide .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-tigerlily .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-crickets .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-honeycomb .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-mint .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-overcast .page-error .error-stack p {\n  border: 1px solid #263340;\n}\nbody.theme-quartz .page-error .error-stack p {\n  border: 1px solid #263340;\n}\n')},"index.js":function(e,n,t){t.watch(e("./error.html")),t.watch(e("./error.js")),t.watch(e("./error.styl"))}},message:{"index.js":function(e,n,t){t.watch(e("./message.html")),t.watch(e("./message.styl"))},"message.html":function(e,n,t){t.exports=e("./template.message.js")},"template.message.js":function(){i.__checkName("pageMessage"),i.pageMessage=new i("Template.pageMessage",function(){var e=this;return z.DIV({class:function(){return["page-message ",M.mustache(M.dot(e.lookup("."),"class"))]}},"\n        ",z.DIV({class:"message-container"},"\n            ",z.H1({class:"message-title"},I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"title"))})),"\n            ",z.P({class:"message-content"},I.View("lookup:choose",function(){return M.mustache(e.lookup("choose"),M.dot(e.lookup("."),"message"))}),I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})})),"\n            ",I._TemplateWith(function(){return"pageMessageAfterContent"},function(){return M.include(e.lookupTemplate("section"))}),"\n        "),"\n    ")})},"message.styl":function(e,n,t){t.exports=e("./message.styl.css")},"message.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.page-message {\n  font-weight: 300;\n  padding: 10px 0 20px;\n}\n.page-message {\n  color: #fff;\n}\nbody.theme-tide .page-message {\n  color: #fff;\n}\nbody.theme-tigerlily .page-message {\n  color: #fff;\n}\nbody.theme-crickets .page-message {\n  color: #fff;\n}\nbody.theme-honeycomb .page-message {\n  color: #fff;\n}\nbody.theme-mint .page-message {\n  color: #fff;\n}\nbody.theme-overcast .page-message {\n  color: #fff;\n}\nbody.theme-quartz .page-message {\n  color: #fff;\n}\n.page-message .message-container {\n  display: table;\n  margin: 0 auto;\n  padding: 0 32px;\n}\n.page-message .message-title {\n  font-size: 30px;\n  font-weight: 300;\n}\n.page-message .message-title {\n  color: #91b9cd;\n}\nbody.theme-tide .page-message .message-title {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .page-message .message-title {\n  color: #9ccdf8;\n}\nbody.theme-crickets .page-message .message-title {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .page-message .message-title {\n  color: #fab797;\n}\nbody.theme-mint .page-message .message-title {\n  color: #a7e9b3;\n}\nbody.theme-overcast .page-message .message-title {\n  color: #73f2fc;\n}\nbody.theme-quartz .page-message .message-title {\n  color: #d7e8fe;\n}\n.page-message .message-content {\n  font-size: 18px;\n}\n.page-message a,\n.page-message a:hover,\n.page-message a:active,\n.page-message a:focus {\n  color: #20a5d6;\n}\nbody.theme-tide .page-message a {\n  color: #20a5d6;\n}\nbody.theme-tide .page-message a:hover {\n  color: #20a5d6;\n}\nbody.theme-tide .page-message a:active {\n  color: #20a5d6;\n}\nbody.theme-tide .page-message a:focus {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .page-message a {\n  color: #fa8947;\n}\nbody.theme-tigerlily .page-message a:hover {\n  color: #fa8947;\n}\nbody.theme-tigerlily .page-message a:active {\n  color: #fa8947;\n}\nbody.theme-tigerlily .page-message a:focus {\n  color: #fa8947;\n}\nbody.theme-crickets .page-message a {\n  color: #d4c3c1;\n}\nbody.theme-crickets .page-message a:hover {\n  color: #d4c3c1;\n}\nbody.theme-crickets .page-message a:active {\n  color: #d4c3c1;\n}\nbody.theme-crickets .page-message a:focus {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .page-message a {\n  color: #cda56b;\n}\nbody.theme-honeycomb .page-message a:hover {\n  color: #cda56b;\n}\nbody.theme-honeycomb .page-message a:active {\n  color: #cda56b;\n}\nbody.theme-honeycomb .page-message a:focus {\n  color: #cda56b;\n}\nbody.theme-mint .page-message a {\n  color: #31b166;\n}\nbody.theme-mint .page-message a:hover {\n  color: #31b166;\n}\nbody.theme-mint .page-message a:active {\n  color: #31b166;\n}\nbody.theme-mint .page-message a:focus {\n  color: #31b166;\n}\nbody.theme-overcast .page-message a {\n  color: #507d80;\n}\nbody.theme-overcast .page-message a:hover {\n  color: #507d80;\n}\nbody.theme-overcast .page-message a:active {\n  color: #507d80;\n}\nbody.theme-overcast .page-message a:focus {\n  color: #507d80;\n}\nbody.theme-quartz .page-message a {\n  color: #7858ce;\n}\nbody.theme-quartz .page-message a:hover {\n  color: #7858ce;\n}\nbody.theme-quartz .page-message a:active {\n  color: #7858ce;\n}\nbody.theme-quartz .page-message a:focus {\n  color: #7858ce;\n}\n.modal .page-message .page-message,\n.modal .page-message .message-container {\n  padding: 0;\n}\n.modal .page-message .message-title {\n  display: none;\n}\n')}}},paginationArea:{"index.js":function(e,n,t){t.watch(e("./paginationArea.html")),t.watch(e("./paginationArea.js")),t.watch(e("./paginationArea.styl"))},"paginationArea.html":function(e,n,t){t.exports=e("./template.paginationArea.js")},"template.paginationArea.js":function(){i.__checkName("paginationArea"),i.paginationArea=new i("Template.paginationArea",function(){var e=this;return I._TemplateWith(function(){return{class:M.call(M.dataMustache(e.lookup("concat"),"pagination-area ",M.dot(e.lookup("."),"class"))),schema:M.call(M.dot(e.lookup("instance"),"schema"))}},function(){return M.include(e.lookupTemplate("form"),function(){return["\n        ",z.DIV({class:"row"},"\n            ",z.DIV({class:"col-xs-4 col-sm-3 col-md-3"},"\n                 ",z.DIV({class:"form-inline form-group rows-per-page"},"\n                    ",z.SPAN("Show"),"\n                    ",I._TemplateWith(function(){return{class:M.call("select-small"),key:M.call("rowsPerPage"),hideSearch:M.call(!0)}},function(){return M.include(e.lookupTemplate("inputSelect"))}),"\n                    ",z.SPAN("rows per page"),"\n                "),"\n            "),"\n            ",z.DIV({class:"col-xs-8 col-sm-9 col-md-9"},"\n                ",z.DIV({class:"form-inline form-group page-number"},"\n                    ",z.LABEL("\n                        ",z.UL({class:"pagination-control no-margins"}),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    "]})})})},"paginationArea.js":function(e,n,t){var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var r=void 0;t.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){r=e}},1),t.watch(e("twbs-pagination"));var i=10;a.paginationArea.onCreated(function(){a.instance().schema=new r({rowsPerPage:{type:Number,allowedValues:[25,50,100],defaultValue:25}})}),a.paginationArea.onRendered(function(){var e=a.instance();e.$paginationControl=e.$(".pagination-control"),e.autorun(function(){var n=e.data.recordCount.get(),t=e.data.rowsPerPage.get();if(e.$paginationControl.data().twbsPagination&&e.$paginationControl.twbsPagination("destroy"),n&&t){var o=Math.ceil(n/t);e.$paginationControl.twbsPagination({totalPages:o,visiblePages:10,onPageClick:function(n,t){e.data.currentPage.set(t-1)}})}})}),a.paginationArea.onDestroyed(function(){var e=a.instance();e.$paginationControl.data().twbsPagination&&e.$paginationControl.twbsPagination("destroy")}),a.paginationArea.helpers({recordCount:function(){return a.instance().data.recordCount.get()},isRowsPerPageSelected:function(e){return e===a.instance().data.rowsPerPage.get()}}),a.paginationArea.events({"change [data-key=rowsPerPage]":function(e,n){var t=o(e.currentTarget).data("component").value();n.data.rowsPerPage.set(parseInt(t,10))}})},"paginationArea.styl":function(e,n,t){t.exports=e("./paginationArea.styl.css")},"paginationArea.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.pagination-area {\n  font-size: 13px;\n  font-weight: normal !important;\n}\n.pagination-area label {\n  font-weight: normal;\n}\n.pagination-area select {\n  color: #fff;\n}\n.pagination-area select {\n  background-color: #000;\n}\nbody.theme-tide .pagination-area select {\n  background-color: #000;\n}\nbody.theme-tigerlily .pagination-area select {\n  background-color: #000;\n}\nbody.theme-crickets .pagination-area select {\n  background-color: #000;\n}\nbody.theme-honeycomb .pagination-area select {\n  background-color: #000;\n}\nbody.theme-mint .pagination-area select {\n  background-color: #000;\n}\nbody.theme-overcast .pagination-area select {\n  background-color: #000;\n}\nbody.theme-quartz .pagination-area select {\n  background-color: #000;\n}\n.rows-per-page label.wrapperLabel {\n  display: inline-table !important;\n  margin: 0 4px;\n}\n.rows-per-page label.wrapperLabel select {\n  width: 42px;\n}\n.page-number {\n  margin: 0;\n  text-align: right;\n}\n.page-number label {\n  font-weight: normal;\n}\n.page-number label ul.pagination-control {\n  margin: 0;\n}\n.page-number label ul.pagination-control li a {\n  padding: 4px 8px;\n  color: #fff;\n  padding: 4px 8px;\n}\n.page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-tide .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-crickets .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-mint .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-overcast .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\nbody.theme-quartz .page-number label ul.pagination-control li a {\n  background-color: #000;\n}\n.page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control li a {\n  border-color: #263340;\n}\n.page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-tide .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-mint .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-number label ul.pagination-control li a {\n  background-color: #14191e;\n}\n.page-number label ul.pagination-control li a:hover {\n  color: #20a5d6;\n}\nbody.theme-tide .page-number label ul.pagination-control li a:hover {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control li a:hover {\n  color: #fa8947;\n}\nbody.theme-crickets .page-number label ul.pagination-control li a:hover {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control li a:hover {\n  color: #cda56b;\n}\nbody.theme-mint .page-number label ul.pagination-control li a:hover {\n  color: #31b166;\n}\nbody.theme-overcast .page-number label ul.pagination-control li a:hover {\n  color: #507d80;\n}\nbody.theme-quartz .page-number label ul.pagination-control li a:hover {\n  color: #7858ce;\n}\n.page-number label ul.pagination-control .active a {\n  border-color: #ddd;\n  color: #fff;\n}\n.page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control .active a {\n  background-color: #263340;\n}\n.page-number label ul.pagination-control .disabled a,\n.page-number label ul.pagination-control .disabled a:hover,\n.page-number label ul.pagination-control .disabled a:focus,\n.page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:hover {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:focus {\n  background-color: #14191e;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:active {\n  background-color: #14191e;\n}\n.page-number label ul.pagination-control .disabled a,\n.page-number label ul.pagination-control .disabled a:hover,\n.page-number label ul.pagination-control .disabled a:focus,\n.page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a {\n  border-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:hover {\n  border-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:focus {\n  border-color: #263340;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:active {\n  border-color: #263340;\n}\n.page-number label ul.pagination-control .disabled a,\n.page-number label ul.pagination-control .disabled a:hover,\n.page-number label ul.pagination-control .disabled a:focus,\n.page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a {\n  color: #516873;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:hover {\n  color: #516873;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:focus {\n  color: #516873;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled a:active {\n  color: #516873;\n}\n.page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #16202b;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #16202b;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #26333f;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #2b141b;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #252228;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #1d232a;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #252228;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  background-color: #2b2e3f;\n}\n.page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #20a5d6;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #fa8947;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #cda56b;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #31b166;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #507d80;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled:not(.disabled):hover a {\n  color: #7858ce;\n}\n.page-number label ul.pagination-control .disabled.active a {\n  background-color: #16202b;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled.active a {\n  background-color: #16202b;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled.active a {\n  background-color: #26333f;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled.active a {\n  background-color: #2b141b;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled.active a {\n  background-color: #252228;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled.active a {\n  background-color: #1d232a;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled.active a {\n  background-color: #252228;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled.active a {\n  background-color: #2b2e3f;\n}\n.page-number label ul.pagination-control .disabled.active a {\n  color: #20a5d6;\n}\nbody.theme-tide .page-number label ul.pagination-control .disabled.active a {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .page-number label ul.pagination-control .disabled.active a {\n  color: #fa8947;\n}\nbody.theme-crickets .page-number label ul.pagination-control .disabled.active a {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .page-number label ul.pagination-control .disabled.active a {\n  color: #cda56b;\n}\nbody.theme-mint .page-number label ul.pagination-control .disabled.active a {\n  color: #31b166;\n}\nbody.theme-overcast .page-number label ul.pagination-control .disabled.active a {\n  color: #507d80;\n}\nbody.theme-quartz .page-number label ul.pagination-control .disabled.active a {\n  color: #7858ce;\n}\n')}},playground:{"playground.html":function(e,n,t){t.exports=e("./template.playground.js")},"template.playground.js":function(){i.__checkName("componentPlayground"),i.componentPlayground=new i("Template.componentPlayground",function(){var e=this;return z.Raw('<div class="layout-container">\n        <div class="layout-header">\n            <div class="logo">LOGO</div>\n            <div class="toolbar">\n                <div class="toolbar-main">\n                    <button class="js-toggle-left">Toggle left</button>\n                    <button>Tool 1</button>\n                    <button>Tool 2</button>\n                    <button>Tool 3</button>\n                    <button class="js-tool-more">More...</button>\n                    <button class="js-toggle-right pull-right">Toggle right</button>\n                </div>\n                <div class="toolbar-drawer">\n                    <button>Tool 4</button>\n                    <button>Tool 5</button>\n                    <button>Tool 6</button>\n                    <button>Tool 7</button>\n                </div>\n            </div>\n        </div>\n        <div class="layout-body">\n            <div class="layout-sidebar layout-sidebar-left">LEFT|LEFT|LEFT</div>\n            <div class="layout-main">MAIN CONTENT</div>\n            <div class="layout-sidebar layout-sidebar-right">RIGHT|RIGHT|RIGHT|RIGHT</div>\n        </div>\n    </div>')})},"playground.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},2),r.ui.layoutState={leftSidebar:new a(!1),rightSidebar:new a(!1),toolsDrawer:new a(!1)},o.componentPlayground.onRendered(function(){var e=o.instance();e.$(".toolbar-drawer").adjustMax("height"),e.autorun(function(){var n=r.ui.layoutState.toolsDrawer.get();e.$(".toolbar-drawer").toggleClass("open",n)}),e.$(".layout-sidebar-left").adjustMax("width"),e.autorun(function(){var n=r.ui.layoutState.leftSidebar.get();e.$(".layout-sidebar-left").toggleClass("open",n)}),e.$(".layout-sidebar-right").adjustMax("width"),e.autorun(function(){var n=r.ui.layoutState.rightSidebar.get();e.$(".layout-sidebar-right").toggleClass("open",n)})}),o.componentPlayground.events({"click .js-tool-more":function(e,n){var t=r.ui.layoutState.toolsDrawer.get();r.ui.layoutState.toolsDrawer.set(!t)},"click .js-toggle-left":function(e,n){var t=r.ui.layoutState.leftSidebar.get();r.ui.layoutState.leftSidebar.set(!t)},"click .js-toggle-right":function(e,n){var t=r.ui.layoutState.rightSidebar.get();r.ui.layoutState.rightSidebar.set(!t)}})},"playground.styl":function(e,n,t){t.exports=e("./playground.styl.css")},"playground.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles(".layout-container {\n  align-items: stretch;\n  display: flex;\n  flex-flow: column nowrap;\n  height: 100vh;\n}\n.layout-container .layout-header {\n  background-color: #0ff;\n  flex-grow: 0;\n}\n.layout-container .layout-body {\n  align-items: stretch;\n  display: flex;\n  flex-grow: 1;\n}\n.layout-sidebar {\n  background-color: #0f0;\n  flex-grow: 0;\n}\n.layout-main {\n  background-color: #fff;\n  flex-grow: 1;\n}\n.toolbar-drawer {\n  overflow: hidden;\n  transition: max-height 0.3s ease;\n}\n.toolbar-drawer:not(.open) {\n  max-height: 0 !important;\n}\n.layout-sidebar-left,\n.layout-sidebar-right {\n  overflow: hidden;\n  transition: max-width 0.3s ease;\n}\n.layout-sidebar-left:not(.open),\n.layout-sidebar-right:not(.open) {\n  max-width: 0 !important;\n}\n")}},scrollArea:{"index.js":function(e,n,t){t.watch(e("./scrollArea.html")),t.watch(e("./scrollArea.js")),t.watch(e("./scrollArea.styl"))},"scrollArea.html":function(e,n,t){t.exports=e("./template.scrollArea.js")},"template.scrollArea.js":function(){i.__checkName("scrollArea"),i.scrollArea=new i("Template.scrollArea",function(){var e=this;return z.DIV({class:function(){return["scroll-area ",M.mustache(M.dot(e.lookup("."),"class"))]}},"\n        ",z.DIV({class:function(){return["scrollable ",M.mustache(M.dot(e.lookup("."),"scrollableClass"))," ",I.If(function(){return M.call(M.dot(e.lookup("instance"),"config","scrollX"))},function(){return"scroll-x"})," ",I.If(function(){return M.call(M.dot(e.lookup("instance"),"config","scrollY"))},function(){return"scroll-y"})]}},"\n            ",I._InOuterTemplateScope(e,function(){return M.include(function(){return M.call(e.templateContentBlock)})}),"\n        "),z.Raw('\n        <div class="scroll-nav scroll-nav-up"></div>\n        <div class="scroll-nav scroll-nav-down"></div>\n    '))})},"scrollArea.js":function(e,n,t){var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},1);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},2),a.scrollArea.onCreated(function(){var e=a.instance(),n=e.data,t={hideScrollbar:!0,scrollY:!0,scrollX:!1,scrollStep:100};e.config=r.defaults(n||{},t)}),a.scrollArea.onRendered(function(){var e=a.instance();e.adjustMargins=r.throttle(function(){var n=e.config;if(n.hideScrollbar){var t=e.$(".scrollable").first(),o=n.scrollX?1:0,a=n.scrollY?1:0,r=i.ui.getScrollbarSize();t.css({"margin-right":0-r[0]*a,"margin-bottom":0-r[1]*o})}},150),e.$scrollable=e.$(".scrollable").first(),e.scrollHandler=r.throttle(function(n){var t=n?o(n.currentTarget):e.$scrollable,a=t.closest(".scroll-area");if(t[0]===e.$(".scrollable")[0]){a.removeClass("can-scroll-up can-scroll-down");var r=t.outerHeight(),i=t.scrollTop(),l=t[0].scrollHeight;l<=r||(i&&a.addClass("can-scroll-up"),i+r<l&&a.addClass("can-scroll-down"))}},150),e.scrollHandler(),e.adjustMargins(),o(window).on("resize",e.adjustMargins)}),a.scrollArea.onDestroyed(function(){var e=a.instance();o(window).off("resize",e.adjustMargins)}),a.scrollArea.events({"scroll .scrollable, mouseenter .scrollable, transitionend .scrollable":function(e,n){n.scrollHandler(e)},"click .scroll-nav-down":function(e,n){var t=o(e.currentTarget).siblings(".scrollable"),a=t.outerHeight(),r=t.scrollTop(),i=t[0].scrollHeight-a,l=r+n.data.scrollStep;l=l>i?i:l,t.stop().animate({scrollTop:l},150,"swing")},"click .scroll-nav-up":function(e,n){var t=o(e.currentTarget).siblings(".scrollable"),a=t.scrollTop()-n.data.scrollStep;a=a<0?0:a,t.stop().animate({scrollTop:a},150,"swing")}})},"scrollArea.styl":function(e,n,t){t.exports=e("./scrollArea.styl.css")},"scrollArea.styl.css":function(e,n,t){t.exports=e("meteor/modules").addStyles(".theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url(\"/packages/ohif_design/assets/theme-icons.png\") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.scroll-area {\n  overflow: hidden;\n  position: relative;\n}\n.scroll-area .scrollable {\n  max-height: inherit;\n  overflow: hidden;\n  zoom: 1;\n}\n.scroll-area .scrollable.scroll-x {\n  overflow-x: scroll;\n}\n.scroll-area .scrollable.scroll-y {\n  overflow-y: scroll;\n}\n.scroll-area.fit {\n  height: 100%;\n  width: 100%;\n}\n.scroll-area.fit .scrollable {\n  bottom: 0;\n  left: 0;\n  max-height: none;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n.scroll-area .scroll-nav {\n  background-color: rgba(0,0,0,0.75);\n  -webkit-box-shadow: 0 0 10px 10px rgba(0,0,0,0.75);\n  -moz-box-shadow: 0 0 10px 10px rgba(0,0,0,0.75);\n  -ms-box-shadow: 0 0 10px 10px rgba(0,0,0,0.75);\n  -o-box-shadow: 0 0 10px 10px rgba(0,0,0,0.75);\n  box-shadow: 0 0 10px 10px rgba(0,0,0,0.75);\n  cursor: pointer;\n  height: 24px;\n  left: 10px;\n  opacity: 0;\n  position: absolute;\n  right: 10px;\n  -webkit-transition: transform 0.3s ease , opacity 0.3s ease , background-color 0.3s ease , box-shadow 0.3s ease;\n  -moz-transition: transform 0.3s ease , opacity 0.3s ease , background-color 0.3s ease , box-shadow 0.3s ease;\n  -ms-transition: transform 0.3s ease , opacity 0.3s ease , background-color 0.3s ease , box-shadow 0.3s ease;\n  -o-transition: transform 0.3s ease , opacity 0.3s ease , background-color 0.3s ease , box-shadow 0.3s ease;\n  transition: transform 0.3s ease , opacity 0.3s ease , background-color 0.3s ease , box-shadow 0.3s ease;\n}\n.scroll-area .scroll-nav:after {\n  display: block;\n  font-family: FontAwesome;\n  font-size: 20px;\n  text-align: center;\n  -webkit-transition: color 0.3s ease;\n  -moz-transition: color 0.3s ease;\n  -ms-transition: color 0.3s ease;\n  -o-transition: color 0.3s ease;\n  transition: color 0.3s ease;\n}\n.scroll-area .scroll-nav:after {\n  color: #20a5d6;\n}\nbody.theme-tide .scroll-area .scroll-nav:after {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .scroll-area .scroll-nav:after {\n  color: #fa8947;\n}\nbody.theme-crickets .scroll-area .scroll-nav:after {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .scroll-area .scroll-nav:after {\n  color: #cda56b;\n}\nbody.theme-mint .scroll-area .scroll-nav:after {\n  color: #31b166;\n}\nbody.theme-overcast .scroll-area .scroll-nav:after {\n  color: #507d80;\n}\nbody.theme-quartz .scroll-area .scroll-nav:after {\n  color: #7858ce;\n}\n.scroll-area .scroll-nav:hover {\n  background-color: rgba(0,0,0,0.9);\n  -webkit-box-shadow: 0 0 10px 10px rgba(0,0,0,0.9);\n  -moz-box-shadow: 0 0 10px 10px rgba(0,0,0,0.9);\n  -ms-box-shadow: 0 0 10px 10px rgba(0,0,0,0.9);\n  -o-box-shadow: 0 0 10px 10px rgba(0,0,0,0.9);\n  box-shadow: 0 0 10px 10px rgba(0,0,0,0.9);\n}\n.scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-tide .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-tigerlily .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-crickets .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-honeycomb .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-mint .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-overcast .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\nbody.theme-quartz .scroll-area .scroll-nav:hover:after {\n  color: #fff;\n}\n.scroll-area .scroll-nav-up {\n  -webkit-border-bottom-left-radius: 12px;\n  -moz-border-bottom-left-radius: 12px;\n  -ms-border-bottom-left-radius: 12px;\n  -o-border-bottom-left-radius: 12px;\n  border-bottom-left-radius: 12px;\n  -webkit-border-bottom-right-radius: 12px;\n  -moz-border-bottom-right-radius: 12px;\n  -ms-border-bottom-right-radius: 12px;\n  -o-border-bottom-right-radius: 12px;\n  border-bottom-right-radius: 12px;\n  top: 0;\n  -webkit-transform: translateY(-24px);\n  -moz-transform: translateY(-24px);\n  -ms-transform: translateY(-24px);\n  -o-transform: translateY(-24px);\n  transform: translateY(-24px);\n}\n.scroll-area .scroll-nav-up:after {\n  content: '\\f102';\n}\n.scroll-area .scroll-nav-down {\n  -webkit-border-top-left-radius: 12px;\n  -moz-border-top-left-radius: 12px;\n  -ms-border-top-left-radius: 12px;\n  -o-border-top-left-radius: 12px;\n  border-top-left-radius: 12px;\n  -webkit-border-top-right-radius: 12px;\n  -moz-border-top-right-radius: 12px;\n  -ms-border-top-right-radius: 12px;\n  -o-border-top-right-radius: 12px;\n  border-top-right-radius: 12px;\n  bottom: 0;\n  -webkit-transform: translateY(24px);\n  -moz-transform: translateY(24px);\n  -ms-transform: translateY(24px);\n  -o-transform: translateY(24px);\n  transform: translateY(24px);\n}\n.scroll-area .scroll-nav-down:after {\n  content: '\\f103';\n}\n.scroll-area.can-scroll-up .scroll-nav-up,\n.scroll-area.can-scroll-down .scroll-nav-down {\n  opacity: 1;\n  -webkit-transform: translateY(0);\n  -moz-transform: translateY(0);\n  -ms-transform: translateY(0);\n  -o-transform: translateY(0);\n  transform: translateY(0);\n}\n")}}},helpers:{"blaze.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/session"),{Session:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),o.registerHelper("absoluteUrl",function(e){return i.utils.absoluteUrl(e)}),o.registerHelper("instance",function(){return o.instance()}),o.registerHelper("session",function(e){return a.get(e)}),o.registerHelper("reactive",function(e){return e instanceof r?e.get():e})},"data.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/toConsumableArray")),r=o(e("babel-runtime/helpers/typeof")),i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},0);var l=void 0;t.watch(e("meteor/templating"),{Template:function(e){l=e}},1);var c=function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=n[0]||{},a=i.last(n),l=a?a.hash:null,c=i.initial(n);return i.each(c,function(e){"object"===(void 0===e?"undefined":(0,r.default)(e))&&i.extend(o,e)}),i.extend(o,l),o};l.registerHelper("extend",function(){return c.apply(void 0,arguments)}),l.registerHelper("clone",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=n.slice();return o.unshift({}),c.apply(void 0,(0,a.default)(o))}),l.registerHelper("choose",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=void 0;return i.each(i.initial(n,1),function(e){o||(o=e)}),o})},"debug.js":function(e,n,t){var o=void 0;t.watch(e("meteor/underscore"),{_:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/templating"),{Template:function(e){r=e}},2),a.isDevelopment&&r.registerHelper("debug",function(){var e;(e=console).debug.apply(e,arguments)})},"index.js":function(e,n,t){t.watch(e("./blaze.js")),t.watch(e("./data.js")),t.watch(e("./debug.js")),t.watch(e("./logical.js")),t.watch(e("./number.js")),t.watch(e("./string.js")),t.watch(e("./typing.js")),t.watch(e("./ui.js"))},"logical.js":function(e,n,t){var o=void 0;t.watch(e("meteor/underscore"),{_:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),a.registerHelper("bool",function(e){return!!e}),a.registerHelper("eq",function(e,n){return e===n}),a.registerHelper("ne",function(e,n){return e!==n}),a.registerHelper("gt",function(e,n){return e>n}),a.registerHelper("lt",function(e,n){return e<n}),a.registerHelper("gte",function(e,n){return e>=n}),a.registerHelper("lte",function(e,n){return e<=n}),a.registerHelper("not",function(e){return!e}),a.registerHelper("and",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=!0;return o.each(o.initial(n,1),function(e){return!e&&(a=!1)}),a}),a.registerHelper("or",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=!1;return o.each(o.initial(n,1),function(e){return e&&(a=!0)}),a}),a.registerHelper("valueIf",function(e,n,t){return e?n:t})},"number.js":function(e,n,t){var o=void 0;t.watch(e("meteor/underscore"),{_:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),a.registerHelper("sum",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var a=0;return o.each(o.initial(n,1),function(e){return a+=0|e}),a}),a.registerHelper("isValidNumber",function(e){return"number"==typeof e&&!isNaN(e)}),a.registerHelper("filterNaN",function(e){return isNaN(e)?"":e})},"string.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/underscore"),{_:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/templating"),{Template:function(e){r=e}},2),r.registerHelper("concat",function(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];var o=a.initial(n,1),r="";return a.each(o,function(e){r+=void 0!==e?e:""}),r}),r.registerHelper("encodeId",o.string.encodeId)},"typing.js":function(e,n,t){var o=void 0;t.watch(e("meteor/underscore"),{_:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),a.registerHelper("isUndefined",function(e){return o.isUndefined(e)}),a.registerHelper("isObject",function(e){return o.isObject(e)}),a.registerHelper("isArray",function(e){return o.isArray(e)})},"ui.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1),a.registerHelper("uiSettings",function(){return o.uiSettings})}},lib:{"blaze.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1),a.blaze={},a.blaze.cloneTemplate=function(e,n){if(e){var t=n||e.viewName,a=new o(t,e.renderFunction);return a.inheritsEventsFrom(e),a.inheritsHelpersFrom(e),a.inheritsHooksFrom(e),a}},a.blaze.getParentView=function(e,n){for(var t=e;t&&t.name!==n;)t=t.originalParentView||t.parentView;return t},a.blaze.getParentComponent=function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_component",t=e;t;)if((t=t.originalParentView||t.parentView)&&t[n])return t[n]},a.blaze.getParentTemplateView=function(e){for(var n=e;n;){if(!(n=n.originalParentView||n.parentView)||!n.name)return;if(n.name.indexOf("Template.")>-1&&-1===n.name.indexOf("Template.__dynamic"))return n}},a.blaze.getSectionContent=function(e,n){for(var t=e;!t._sectionMap||!t._sectionMap.get(n);)if(!(t=a.blaze.getParentTemplateView(t)))return;return t._sectionMap.get(n)}},"cornerstone.js":function(e,n,t){function a(e){return e&&e.__esModule?e:{default:e}}var r=a(e("babel-runtime/helpers/typeof")),i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var l=void 0;t.watch(e("meteor/underscore"),{_:function(e){l=e}},1),i.cornerstone={},i.cornerstone.getBoundingBox=function(e,n,t,o,a){"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]);var r=5,i=cornerstoneTools.textStyle.getFont(),l=cornerstoneTools.textStyle.getFontSize();e.save(),e.font=i,e.textBaseline="top";var c=0;n.forEach(function(n){var t=e.measureText(n).width;c=Math.max(c,t)});var s={width:c+10,height:5+n.length*(l+5)};return a&&a.centering&&!0===a.centering.x&&(t-=s.width/2),a&&a.centering&&!0===a.centering.y&&(o-=s.height/2),s.left=t,s.top=o,e.restore(),s},i.cornerstone.pixelToPage=function(e,n){var t=cornerstone.getEnabledElement(e),a={x:0,y:0};if(!t||"object"!==(void 0===n?"undefined":(0,r.default)(n)))return a;var i=t.canvas,l=o(i).offset();a.x+=l.left,a.y+=l.top;var c=cornerstone.pixelToCanvas(e,n);return a.x+=c.x,a.y+=c.y,a},i.cornerstone.repositionTextBox=function(e,n,t){function a(e,n,t,o){var a=(e=e||{}).centering||{},r=!!a.x,i=!!a.y,l=o.x/2,c=o.y/2,s={x:[],y:[]};if("x"===n){var u=i?0:c;s.x[-1]=r?l:0,s.x[1]=r?-l:-o.x,s.y[-1]=u,s.y[1]=u}else{var d=r?0:l;s.x[-1]=d,s.x[1]=d,s.y[-1]=i?c:0,s.y[1]=i?-c:-o.y}return s}if(n.isCreating){var r=e.element,c=cornerstone.getEnabledElement(r),s=c.image,u=i.uiSettings.autoPositionMeasurementsTextCallOuts,d={T:!u||l.contains(u,"T"),R:!u||l.contains(u,"R"),B:!u||l.contains(u,"B"),L:!u||l.contains(u,"L")},p=function(e,n,t){var a=e.element,r=e.canvas,i=e.image,l=cornerstone.pixelToCanvas(a,{x:0,y:0}),c=cornerstone.pixelToCanvas(a,{x:i.width,y:i.height}),s=o(r),u=s.outerWidth(),p=s.outerHeight(),m={};return m["x-1"]=d.L&&l.x>n,m["y-1"]=d.T&&l.y>t,m.x1=d.R&&u-c.x>n,m.y1=d.B&&p-c.y>t,m},m=function(e,n){var t={};t.x=e.x/2,t.y=e.y/2;var o={};o.x=n.x<t.x?-1:1,o.y=n.y<t.y?-1:1;for(var a=o.x<0?n.x:e.x-n.x,r=(o.y<0?n.y:e.y-n.y)<a?"y":"x",i={"x-1":"L","y-1":"T",x1:"R",y1:"B"},l=0;l<4&&!d[i[r+o[r]]];)o[r]*=-1,r="x"===r?"y":"x",l++;return{directions:o,cornerAxis:r}},h=function(e,n,t){var o=n[e],a=t[e],r=Math.min(o,a);return r+(Math.max(o,a)-r)/2},f=function(e,n){var t=cornerstone.pageToPixel(e,0,0),o=cornerstone.pageToPixel(e,n.x,n.y);return{x:o.x-t.x,y:o.y-t.y}},g=n.handles,b=g.textBox,v=o(c.canvas),k=v.outerWidth(),w=v.outerHeight(),y=v.offset(),x={x:k,y:w},T={};T.x=b.boundingBox.width,T.y=b.boundingBox.height;var C=function(e){return l.pick(g[e],["x","y"])},j=C("start"),I=C("end"),_={};_.x=h("x",j,I),_.y=h("y",j,I);var P={};P.x=s.width,P.y=s.height;for(var M=m(P,_),S=M.directions,O=M.cornerAxis,H=p(c,T.x,T.y),$=l.clone(S),F=O,z=!1,D=0;D<4;){if(H[F+$[F]]){z=!0;break}$[F]*=-1,F="x"===F?"y":"x",D++}var E=void 0;if(z)l.extend(S,$),E=S[O=F]<0?0:P[O];else{l.extend(P,x);var A=m(P,cornerstone.pixelToCanvas(r,_));S=A.directions,O=A.cornerAxis;var V={x:S.x<0?y.left:y.left+k,y:S.y<0?y.top:y.top+w};E=cornerstone.pageToPixel(r,V.x,V.y)[O]}var R="x"===O?"y":"x",N=f(r,T);b[O]=E,b[R]=_[R];var B=a(t,O,R,N);b[O]+=B[O][S[O]];var W=cornerstone.pixelToCanvas(r,b),L={x:W.x+T.x,y:W.y+T.y},q={x0:y.left,y0:y.top,x1:y.left+k,y1:y.top+w};if(W[R]<0){var Y=q.x0,U=q.y0,X=cornerstone.pageToPixel(r,Y,U);b[R]=X[R]}else if(L[R]>x[R]){var K=q.x1-T.x,G=q.y1-T.y,Q=cornerstone.pageToPixel(r,K,G);b[R]=Q[R]}}}},"index.js":function(e,n,t){t.watch(e("./blaze.js")),t.watch(e("./cornerstone.js")),t.watch(e("./string.js")),t.watch(e("./ui.js")),t.watch(e("./utils.js")),t.watch(e("./viewer.js"))},"string.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/underscore"),{_:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/jquery"),{$:function(e){r=e}},2),o.string={},o.string.search=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=new RegExp(r.trim(n),"i");return a.each(e,function(e){if(e){var r=a.isString(t)?e[t]:e;a.isString(r)&&l.test(r)&&i.push(e),a.isObject(e)&&o.string.search(e,n,t,i)}}),i},o.string.encodeId=function(e){var n=e&&e.toString?e.toString():e;if(""===n||"string"!=typeof n)return"_";var t=function(e){return"_"+e[0].charCodeAt(0).toString(16)+"_"};return n.replace(/[^a-zA-Z0-9-]/g,t)}},"ui.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){a=e}},1);var r=a.settings&&a.settings.public&&a.settings.public.ui;o.uiSettings=r||{},o.ui.getOffset=function(e){var n=0,t=0;if(e.offsetParent)do{t+=e.offsetLeft,n+=e.offsetTop}while(e=e.offsetParent);return{left:t,top:n}},o.ui.getScrollbarSize=function(){var e=document.createElement("p");e.style.width="100%",e.style.height="100%";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="100px",n.style.height="100px",n.style.overflow="hidden",n.appendChild(e),document.body.appendChild(n);var t=e.offsetWidth,o=e.offsetHeight;n.style.overflow="scroll";var a=e.offsetWidth,r=e.offsetHeight;return t===a&&(a=n.clientWidth),o===r&&(r=n.clientHeight),document.body.removeChild(n),[t-a,o-r]}},"utils.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),o.utils.sortBy=function(){var e=[].slice.call(arguments),n=e.length;return function(t,o){var a,r,i,l,c,s,u,d;for(d=0;d<n&&(u=0,i=e[d],l="string"==typeof i?i:i.name,a=t[l],r=o[l],void 0!==i.primer&&(a=i.primer(a),r=i.primer(r)),s=i.reverse?-1:1,a<r&&(u=-1*s),a>r&&(u=1*s),0===u);d++);return u}}},"viewer.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),o.viewer={}}},ui:{"handleError.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1),a.ui.handleError=function(e){var n=e.title,t=e.message;n||(e instanceof o.Error?n=e.error:e instanceof Error&&(n=e.name)),t||(e instanceof o.Error?t=e.reason:e instanceof Error&&(t=e.message));var a=Object.assign({title:n,message:t,class:"themed",hideConfirm:!0,cancelLabel:"Dismiss",cancelClass:"btn-secondary"},e||{})}},"index.js":function(e,n,t){t.watch(e("./bounded/bounded.js")),t.watch(e("./dimensional/dimensional.js")),t.watch(e("./dialog/display.js")),t.watch(e("./dialog/spatial.js")),t.watch(e("./dialog/unsavedChangesDialog.js")),t.watch(e("./draggable/draggable.js")),t.watch(e("./dropdown/class.js")),t.watch(e("./dropdown/display.js")),t.watch(e("./notifications/notifications.js")),t.watch(e("./popover/display.js")),t.watch(e("./resizable/resizable.js")),t.watch(e("./unsavedChanges/unsavedChanges.js")),t.watch(e("./handleError.js")),t.watch(e("./styleProperty.js"))},"styleProperty.js":function(e,n,t){t.export({styleProperty:function(){return a}});var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),function(){"use strict";function e(e,n){var t=["Webkit","Moz","ms","O"];n(e);for(var o=0;o<t.length;o++)n(t[o]+e.charAt(0).toUpperCase()+e.slice(1))}function n(e,n){var t=document.createElement("iframe"),o=document.createElement("p");document.body.appendChild(t),t.contentDocument.body.appendChild(o);var r=a(o,e,n);return t.parentElement.removeChild(t),r}function t(e,n){var t=window.getComputedStyle(e).getPropertyValue(n);return void 0!==t&&t.length>0&&"none"!==t}function a(n,o,a){var i=!1;return void 0!==r[o]?(n.style[r[o]]=a,!0):(e(o,function(e){void 0!==n.style[e]&&!1===i&&(n.style[e]=a,t(n,e)&&(i=!0,r[o]=e))}),i)}var r={},i={check:n,set:a};o.ui.styleProperty=i}();var a=o.ui.styleProperty},bounded:{"bounded.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/classCallCheck")),r=void 0;t.watch(e("meteor/jquery"),{$:function(e){r=e}},0);var i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},1);var l=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},2),r.fn.bounded=function(e){return i.each(this,function(n){var t=r(n).data("boundedInstance");"destroy"===e&&t?(r(n).removeData("boundedInstance"),t.destroy()):t?t.options(e):r(n).data("boundedInstance",new c(n,e))}),this};var c=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,a.default)(this,e),this.element=n,this.$element=r(n),this.options(t),this.setBoundedFlag(!1),this.useTransform=l.ui.styleProperty.check("transform","translate(1px, 1px)")}return e.prototype.options=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.boundingElement,t=e.positionElement,o=e.dimensionElement,a=e.allowResizing;this.positionElement=t||this.element,this.$positionElement=r(this.positionElement),this.dimensionElement=o||this.element,this.$dimensionElement=r(this.dimensionElement),this.boundingElement=n,this.$boundingElement=r(this.boundingElement),this.allowResizing=a,"fixed"===this.$positionElement.css("position")&&(this.boundingElement=window),this.destroy(),this.init()}return e}(),e.prototype.init=function(){function e(){var e=this;this.defineEventHandlers(),this.attachEventHandlers(),this.$element.addClass("bounded");var n=r(window),t=function(){e.$element.closest(document.documentElement).length||n.off("resize",t),e.$element.trigger("spatialChanged")};n.on("resize",t),setTimeout(function(){return e.$element.trigger("spatialChanged")})}return e}(),e.prototype.destroy=function(){function e(){this.detachEventHandlers(),this.$element.removeClass("bounded")}return e}(),e.spatialInfo=function(){function e(e,n){var t={};if(!n||n===window){var o=r(window),a=o.outerWidth(),i=o.outerHeight();return{width:a,height:i,x0:0,y0:0,x1:a,y1:i}}var l=r(n),c=r(e);t.width=l.outerWidth(),t.height=l.outerHeight();var s=c["fixed"===c.css("position")?"position":"offset"]();return t.x0=s.left,t.y0=s.top,t.x1=t.x0+t.width,t.y1=t.y0+t.height,t}return e}(),e.prototype.defineEventHandlers=function(){function n(){var n=this;this.cssPositionHandler=function(e,t){n.allowResizing&&e.width>t.width?(n.$dimensionElement.width(t.width),n.$positionElement.css("left",t.x0),n.setBoundedFlag(!0)):e.x0<t.x0?(n.$positionElement.css("left",t.x0),n.setBoundedFlag(!0)):e.x1>t.x1&&(n.$positionElement.css("left",t.x1-e.width),n.setBoundedFlag(!0)),n.allowResizing&&e.height>t.height?(n.$dimensionElement.height(t.height),n.$positionElement.css("top",t.y0),n.setBoundedFlag(!0)):e.y0<t.y0?(n.$positionElement.css("top",t.y0),n.setBoundedFlag(!0)):e.y1>t.y1&&(n.$positionElement.css("top",t.y1-e.height),n.setBoundedFlag(!0))},this.getCSSTranslate=function(){var e=function(e){return e.match(/(-?[0-9\.]+)/g)}(n.$positionElement.css("transform"))||[];return{x:parseFloat(e[4])||0,y:parseFloat(e[5])||0}},this.cssTransformHandler=function(e,t,o){e.x1>t.x1&&(o.x-=e.x1-t.x1),e.y1>t.y1&&(o.y-=e.y1-t.y1),e.x0<t.x0&&(o.x+=t.x0-e.x0),e.y0<t.y0&&(o.y+=t.y0-e.y0);var a="translate("+o.x+"px, "+o.y+"px)";l.ui.styleProperty.set(n.positionElement,"transform",a)},this.spatialChangedHandler=function(t){var o=n.positionElement,a=n.dimensionElement,r=n.boundingElement,i=n.useTransform,l=e.spatialInfo(o,a),c=e.spatialInfo(r,r),s=n.getCSSTranslate();i&&(s.x||s.y)?n.cssTransformHandler(l,c,s):n.cssPositionHandler(l,c)}}return n}(),e.prototype.attachEventHandlers=function(){function e(){this.$element.on("spatialChanged",this.spatialChangedHandler),this.$boundingElement.on("resize",this.spatialChangedHandler)}return e}(),e.prototype.detachEventHandlers=function(){function e(){this.$element.off("spatialChanged",this.spatialChangedHandler),this.$boundingElement.off("resize",this.spatialChangedHandler)}return e}(),e.prototype.setBoundedFlag=function(){function e(e){this.$element.data("wasBounded",e)}return e}(),e}();l.ui.Bounded=c}},dialog:{"display.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/jquery"),{$:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},4),l.ui.showDialog=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=o[e];if(!t)throw{name:"TEMPLATE_NOT_FOUND",message:"Template "+e+" not found."};var l=void 0,c=void 0;if(n&&n.promise instanceof h)l=n.promise,c=n;else{var s=void 0,u=void 0;l=new h(function(e,n){s=e,u=n}),c=r.extend({},n,{promise:l,promiseResolve:s,promiseReject:u})}var d=a.renderWithData(t,c,document.body),p=d.firstNode(),m=p&&i(p),f=void 0;m&&m.hasClass("modal")?f=m:m&&m.has(".modal")&&(f=m.find(".modal:first"));var g=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||n&&n.promise&&f?f.one("hidden.bs.modal",function(){return a.remove(d)}).modal("hide"):a.remove(d)},b=i(document.body),v=function(){g(!0),b.off("ohif.navigated",v)};return l.then(function(){return g(!1)}).catch(function(){return g(!1)}),n.keepOpenOnNavigation||b.on("ohif.navigated",v),l}},"spatial.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),o.ui.repositionDialog=function(e,n,t){var o=e.find(".modal-dialog");o.css({margin:0,position:"fixed"}).bounded();var a=e.is(":visible");e.show();var r=o.outerHeight(),i=o.outerWidth(),l=parseInt(n-i/2),c=parseInt(t-r/2);o.css({left:l,top:c}).trigger("spatialChanged").one("transitionend",function(){return o.trigger("spatialChanged")}),e.toggle(a)}},"unsavedChangesDialog.js":function(e,n,t){var o=void 0;t.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/underscore"),{_:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},3),i.ui.unsavedChangesDialog=function(e,n){var t=r.extend({},n,{callback:e});a.renderWithData(o.unsavedChangesDialog,t,document.body)}}},dimensional:{"dimensional.js":function(e,n,t){var o=void 0;t.watch(e("meteor/jquery"),{$:function(e){o=e}},0),o.fn.tempShow=function(e){for(var n=[],t=this;this.is(":hidden");){var a=o(t);if(!a.length||a.is(":visible"))break;a.addClass("visible"),n.push(t),t=a[0].parentElement}return"function"==typeof e&&e(this),o(n).removeClass("visible"),this},o.fn.adjustMax=function(e,n){var t=o(this);t.tempShow(function(){var n="max-"+e;t.each(function(e,t){return t.style.setProperty(n,"none","important")});var o="outer"+e.charAt(0).toUpperCase()+e.slice(1),a=t[o]();t.each(function(e,t){return t.style.removeProperty(n)}),t.css(n,a)})}}},draggable:{"draggable.js":function(e,n,t){function a(e){function n(e){return e.match(/(-?[0-9\.]+)/g)}function t(e){var n={x:e.clientX,y:e.clientY};return void 0===n.x&&(n.x=e.originalEvent.touches[0].pageX),void 0===n.y&&(n.y=e.originalEvent.touches[0].pageY),n}function a(e,n){if(p){var t="translate("+e+"px, "+n+"px)";d.set(u[0],"transform",t)}else u.css({left:e+"px",top:n+"px",bottom:"auto",right:"auto"})}function i(e){if(!(e.target.type&&"range"===e.target.type||0!==e.button||u.hasClass("resizing"))){var r=parseFloat(u.offset().left),i=parseFloat(u.offset().top),s=t(e);if(p){v=s,k=u.offset();var d=n(u.css("transform"))||[];w=parseFloat(d[4])||0,y=parseFloat(d[5])||0,r=w,i=y}else h=s.x-r,f=s.y-i;a(r,i),o(document).on("mousemove",c),o(document).on("mouseup",l),o(document).on("touchmove",c),o(document).on("touchend",l)}}function l(){m.css("cursor","default"),u.css("cursor",s.defaultElementCursor),b&&(setTimeout(function(){return u.removeClass("dragging")}),b=!1),o(document).off("mousemove",c),o(document).off("touchmove",c)}function c(e){b||(m.css("cursor","move"),u.css("cursor","move"),u.addClass("dragging"),b=!0),g&&(u.data("wasDragged",!0),g=!1),e.preventDefault();var n=parseFloat(u.outerWidth()),o=parseFloat(u.outerHeight()),r=parseFloat(m.width()),i=parseFloat(m.height()),l=t(e),c=void 0,s=void 0;if(p){c=w-(v.x-l.x),s=y-(v.y-l.y);var d=r-n,x=i-o,T=k.left+(c-w),C=k.top+(s-y);T>d&&(c-=T-d),C>x&&(s-=C-x),T<0&&(c+=0-T),C<0&&(s+=0-C)}else c=l.x-h,s=l.y-f,c=Math.max(c,0),s=Math.max(s,0),c+n>r&&(c=r-n),s+o>i&&(s=i-o);a(c,s)}var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=e,d=r.ui.styleProperty,p=d.check("transform","translate(1px, 1px)"),m=o(s.container||window),h=void 0,f=void 0,g=!0,b=!1,v=void 0,k=void 0,w=0,y=0;s.defaultElementCursor=s.defaultElementCursor||"default",u.data("wasDragged",!1),u.on("mousedown",i),u.on("touchstart",i)}var r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0),o.fn.draggable=function(e){return a(this,e),this}}},dropdown:{"class.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/classCallCheck")),r=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},0);var i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},1);var l=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},2);var c=function(){function e(){(0,a.default)(this,e),this.observer=new r.Dependency,this._items=[],this.observer.changed()}return e.prototype.clearItems=function(){function e(){this._items=[],this.observer.changed()}return e}(),e.prototype.setItems=function(){function e(e){this._items=e,this.observer.changed()}return e}(),e.prototype.addItem=function(){function e(e){this._items.push(e),this.observer.changed()}return e}(),e.prototype.removeItem=function(){function e(e){this._items=i.without(this._items,e),this.observer.changed()}return e}(),e.prototype.getItems=function(){function e(){return this.observer.depend(),this._items}return e}(),e}();l.ui.Dropdown=c},"display.js":function(e,n,t){var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var r=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){r=e}},1);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},2),i.ui.showDropdown=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=void 0,i=void 0,l=new h(function(e,n){t=e,i=n}),c=void 0,s={items:e,options:n,destroyView:function(){return r.remove(c)},promise:l,promiseResolve:t,promiseReject:i},u=n.parentElement||document.body;c=r.renderWithData(a.dropdownForm,s,u);var d=o(document.body),p=function(){i(),d.off("ohif.navigated",p)};return d.on("ohif.navigated",p),l}}},notifications:{"notifications.js":function(e,n,t){var o=void 0;t.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var r=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){r=e}},2);var i=void 0;t.watch(e("meteor/jquery"),{$:function(e){i=e}},3);var l=void 0;t.watch(e("meteor/underscore"),{_:function(e){l=e}},4);var c=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},5);var s={currentId:0,views:new b},u=function(e,n){s.views.delete(e),r.remove(n)};s.dismiss=function(e){var n=s.views.get(e);if(!n||n.isDestroyed)return s.views.delete(e);var t=n.firstNode(),o=t&&i(t);o.length?o.addClass("out").one("transitionend",function(){return u(e,n)}):u(e,n)},s.clear=function(){return Array.from(s.views.keys()).forEach(s.dismiss)},s.show=function(e){var n=e.template,t=e.data,c=e.text,u=e.style,d=e.timeout,p=void 0===d?5e3:d,m=e.promise,f=a[n];if(n&&!f)throw new o.Error("TEMPLATE_NOT_FOUND","Template "+n+" not found.");var g=i("#notificationArea");if(!g.length)throw new o.Error("NOTIFICATION_AREA_NOT_FOUND","Notification area not found.");var b=void 0,v={template:n,data:t,text:c,style:u,timeout:p,id:s.currentId++};if(m instanceof h)b=v.promise=m;else{var k=void 0,w=void 0;b=new h(function(e,n){k=e,w=n}),l.extend({},v,{promise:b,promiseResolve:k,promiseReject:w})}var y=r.renderWithData(a.notificationNote,v,g[0]),x=function(){return s.dismiss(v.id)};return s.views.set(v.id,y),b.then(x).catch(x),p>0&&o.setTimeout(function(){v.promiseResolve?v.promiseResolve():x()},p),b},s.info=function(e){return s.show(Object.assign({},e,{style:"info"}))},s.success=function(e){return s.show(Object.assign({},e,{style:"success"}))},s.warning=function(e){return s.show(Object.assign({},e,{style:"warning"}))},s.danger=function(e){return s.show(Object.assign({},e,{style:"danger"}))},c.ui.notifications=s}},popover:{"display.js":function(e,n,t){var a=void 0;t.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var r=void 0;t.watch(e("meteor/blaze"),{Blaze:function(e){r=e}},1);var i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},2),i.ui.showPopover=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=a[e];if(!i)throw{name:"TEMPLATE_NOT_FOUND",message:"Template "+e+" not found."};var l=void 0,c=void 0;if(n&&n.promise instanceof h)l=n.promise,c=n;else{var s=void 0,u=void 0;l=new h(function(e,n){s=e,u=n}),c=Object.assign({},n,{promise:l,promiseResolve:s,promiseReject:u})}var d=t.element,p=t.event,m=o(d||p.currentTarget),f={content:"",html:!0,trigger:"manual",placement:"auto",delay:{show:300,hide:300}},g=Object.assign({},f,t);return g.content=r.toHTMLWithData(i,n),m.popover(g),m.one("shown.bs.popover",function(e){var n=m.attr("aria-describedby"),t=document.getElementById(n),a=o(t).find(".popover-content"),s=function(){return m.popover("hide")};a.html("");var u=r.renderWithData(i,c,a[0]);m.one("hidden.bs.popover",function(){r.remove(u),m.popover("destroy")}),l.then(s).catch(s)}),"manual"===g.trigger&&m.popover("show"),l}}},resizable:{"resizable.js":function(e,n,t){function a(e){return e&&e.__esModule?e:{default:e}}var r=a(e("babel-runtime/helpers/classCallCheck")),i=void 0;t.watch(e("meteor/underscore"),{_:function(e){i=e}},0);var l=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},1),o.fn.resizable=function(e){return i.each(this,function(n){var t=o(n).data("resizableInstance");"destroy"===e&&t?(o(n).removeData("resizableInstance"),t.destroy()):t?t.options(e):o(n).data("resizableInstance",new c(n,e))}),this};var c=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,e),this.element=n,this.$element=o(n),this.options(t)}return e.prototype.options=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.boundSize,t=e.minWidth,o=e.minHeight;this.minWidth=t||this.$element.width()||16,this.minHeight=o||this.$element.height()||16,this.boundSize=n||8,this.destroy(),this.init()}return e}(),e.prototype.init=function(){function e(){this.defineEventHandlers();for(var e=-1;e<=1;e++)for(var n=-1;n<=1;n++)this.createBound(e,n);this.$element.addClass("resizable")}return e}(),e.prototype.destroy=function(){function e(){this.$element.removeClass("resizable resizing");var e=this.$element.find("resize-bound");e.remove(),this.detachEventHandlers(e)}return e}(),e.prototype.defineEventHandlers=function(){function e(){var e=this;this.initResizeHandler=function(n){var t=o(window);e.width=e.initialWidth=e.$element.width(),e.height=e.initialHeight=e.$element.height(),e.startWidth=e.width,e.startHeight=e.height,e.posX=parseInt(e.$element.css("left")),e.posY=parseInt(e.$element.css("top")),e.startPosX=e.posX,e.startPosY=e.posY,e.startX=n.clientX,e.startY=n.clientY,e.$element.addClass("resizing"),t.on("mousemove",n.data,e.resizeHandler),t.on("mouseup",n.data,e.endResizeHandler)},this.resizeHandler=function(n){var t=n.data,o=t.xDirection,a=t.yDirection,r=void 0,i=void 0;r=(r=n.clientX<0?0:n.clientX)>window.innerWidth?window.innerWidth:r,i=(i=n.clientY<0?0:n.clientY)>window.innerHeight?window.innerHeight:i;var l=(r-e.startX)*o,c=(i-e.startY)*a,s=l+e.startWidth,u=c+e.startHeight;e.width=s<e.minWidth?e.minWidth:s,e.height=u<e.minHeight?e.minHeight:u,e.$element.width(e.width),e.$element.height(e.height),o<0&&(e.posX=e.startPosX-l,s<e.minWidth&&(e.posX=e.startPosX+(e.startWidth-e.minWidth)),e.$element.css("left",e.posX+"px")),a<0&&(e.posY=e.startPosY-c,u<e.minHeight&&(e.posY=e.startPosY+(e.startHeight-e.minHeight)),e.$element.css("top",e.posY+"px"))},this.endResizeHandler=function(n){var t=o(window);t.off("mousemove",e.resizeHandler),t.off("mouseup",e.endResizeHandler),e.$element.removeClass("resizing"),e.$element.trigger("resize")}}return e}(),e.prototype.attachEventHandlers=function(){function e(e,n,t){var o={xDirection:n,yDirection:t};e.on("mousedown",o,this.initResizeHandler)}return e}(),e.prototype.detachEventHandlers=function(){function e(e){var n=o(window);e.off("mousedown",this.initResizeHandler),n.off("mousemove",this.resizeHandler),n.off("mouseup",this.endResizeHandler)}return e}(),e.prototype.createBound=function(){function e(e,n){if(0!==e||e!==n){var t=o('<div class="resize-bound"></div>');t[0].onselectstart=function(){return!1},t.css("font-size",this.boundSize+"px");var a=["left","center","right"],r=["top","middle","bottom"];t.addClass("bound-"+a[e+1]),t.addClass("bound-"+r[n+1]),t.appendTo(this.$element),this.attachEventHandlers(t,e,n)}}return e}(),e}();l.ui.Resizable=c}},unsavedChanges:{"unsavedChanges.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/typeof")),r=o(e("babel-runtime/helpers/classCallCheck"));t.export({unsavedChanges:function(){return v}});var i=void 0;t.watch(e("meteor/tracker"),{Tracker:function(e){i=e}},0);var l=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},1);var c=void 0;t.watch(e("meteor/underscore"),{_:function(e){c=e}},2);var s="function",u="string",d="undefined",p="*",f=".",g=new(function(){function e(){(0,r.default)(this,e),this.value=0,this.children={},this.handlers={}}return e.prototype.getPathComponents=function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===u?e.split(f):null}return e}(),e.prototype.getNodeUpToIndex=function(){function e(e,n){for(var t=this,o=0;o<n;++o){var a=e[o];if(!t.children.hasOwnProperty(a)){t=null;break}t=t.children[a]}return t}return e}(),e.prototype.append=function(){function n(n,t){var o=this.children,r=null;return o.hasOwnProperty(n)?r=o[n]:(void 0===n?"undefined":(0,a.default)(n))===u&&n!==p&&(r=new e,o[n]=r),null!==r&&(r.value+=t>0?parseInt(t):0),r}return n}(),e.prototype.probe=function(){function e(e){var n=this.value;if(!0===e){var t=this.children;for(var o in m.sanitizeForInObject(t))t.hasOwnProperty(o)&&(n+=t[o].probe(e))}return n}return e}(),e.prototype.clear=function(){function e(e){if(this.value=0,!0===e){var n=this.children;for(var t in m.sanitizeForInObject(n))n.hasOwnProperty(t)&&n[t].clear(e)}}return e}(),e.prototype.appendPath=function(){function e(e,n){if(null!==(e=this.getPathComponents(e))){for(var t=e.length-1,o=this,a=0;a<t;++a)if(null===(o=o.append(e[a],0)))return!1;return null!==o.append(e[t],n)}return!1}return e}(),e.prototype.clearPath=function(){function e(e,n){if(null!==(e=this.getPathComponents(e))){var t=e.length-1,o=this.getNodeUpToIndex(e,t);if(null!==o){var a=e[t];if(a===p){var r=o.children;for(a in m.sanitizeForInObject(r))r.hasOwnProperty(a)&&r[a].clear(n);return!0}if(o.children.hasOwnProperty(a))return o.children[a].clear(n),!0}}return!1}return e}(),e.prototype.probePath=function(){function e(e,n){if(null!==(e=this.getPathComponents(e))){var t=e.length-1,o=this.getNodeUpToIndex(e,t);if(null!==o){var a=e[t];if(a===p){var r=o.children,i=0;for(a in m.sanitizeForInObject(r))r.hasOwnProperty(a)&&(i+=r[a].probe(n));return i}if(o.children.hasOwnProperty(a))return o.children[a].probe(n)}}return 0}return e}(),e.prototype.attachHandler=function(){function e(e,n){var t=!1;if((void 0===e?"undefined":(0,a.default)(e))===u&&(void 0===n?"undefined":(0,a.default)(n))===s){for(var o=this.handlers,r=o.hasOwnProperty(e)?o[e]:o[e]=[],i=r.length,l=!0,c=0;c<i;++c)if(n===r[c]){l=!1;break}l&&(r[i]=n,t=!0)}return t}return e}(),e.prototype.removeHandler=function(){function e(e,n){var t=!1;if((void 0===e?"undefined":(0,a.default)(e))===u&&(void 0===n?"undefined":(0,a.default)(n))===s){var o=this.handlers;if(o.hasOwnProperty(e))for(var r=o[e],i=r.length,l=0;l<i;++l)if(n===r[l]){r.splice(l,1),t=!0;break}}return t}return e}(),e.prototype.trigger=function(){function e(e,n){if((void 0===e?"undefined":(0,a.default)(e))===u){var t=this.handlers;if(t.hasOwnProperty(e))for(var o=t[e],r=o.length,i=0;i<r;++i)o[i].call(null);if(!0!==n){var l=this.children;for(var c in m.sanitizeForInObject(l))l.hasOwnProperty(c)&&l[c].trigger(e)}}}return e}(),e.prototype.attachHandlerForPath=function(){function e(e,n,t){if(null!==(e=this.getPathComponents(e))){var o=this.getNodeUpToIndex(e,e.length);if(null!==o)return o.attachHandler(n,t)}return!1}return e}(),e.prototype.removeHandlerForPath=function(){function e(e,n,t){if(null!==(e=this.getPathComponents(e))){var o=this.getNodeUpToIndex(e,e.length);if(null!==o)return o.removeHandler(n,t)}return!1}return e}(),e.prototype.triggerHandlersForPath=function(){function e(e,n,t){if(null!==(e=this.getPathComponents(e))){var o=this.getNodeUpToIndex(e,e.length);null!==o&&o.trigger(n,t)}}return e}(),e}()),v={rootNode:g,observer:new i.Dependency,hooks:new b,depend:function(){return this.observer.depend()},set:function(e){var n=g.appendPath(e,1);return this.observer.changed(),n},clear:function(e,n){var t=g.clearPath(e,(void 0===n?"undefined":(0,a.default)(n))===d||n);return this.observer.changed(),t},probe:function(e,n){return g.probePath(e,(void 0===n?"undefined":(0,a.default)(n))===d||n)},attachHandler:function(e,n,t){return g.appendPath(e,0)&&g.attachHandlerForPath(e,n,t)},removeHandler:function(e,n,t){return g.removeHandlerForPath(e,n,t)},trigger:function(e,n,t){g.triggerHandlersForPath(e,n,t)},checkBeforeAction:function(e,n,t){var o=void 0,a=void 0,r=void 0;if("function"==typeof n)if((o=this.probe(e))>0){a=!0;var i=c.extend({title:"You have unsaved changes!",message:"Your changes will be lost if you don't save them before leaving the current page... Are you sure you want to proceed?"},t);l.ui.showDialog("dialogConfirm",i).then(function(){r=!0,n.call(null,r,a)},function(){r=!1,n.call(null,r,a)})}else a=!1,r=!0,n.call(null,r,a)},presentProactiveDialog:function(e,n,t){var o=void 0,a=void 0;"function"==typeof n&&((o=this.probe(e,!0))>0?(a=!0,l.ui.unsavedChangesDialog(function(e){n.call(null,a,e)},t)):(a=!1,n.call(null,a,null)))},addHook:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c.defaults(n,{path:"*",message:"There are unsaved changes"}),this.hooks.set(e,n)},removeHook:function(e){this.hooks.delete(e)},confirmNavigation:function(e,n){var t=this,o=!1;Array.from(this.hooks.keys()).every(function(a){var r=t.hooks.get(a);if(!t.probe(r.path,!0))return!0;var i=Object.assign({class:"themed"},r);return n&&(i.position={x:n.clientX+15,y:n.clientY+15}),l.ui.unsavedChanges.presentProactiveDialog(r.path,function(o,i){if(o){var l=function(){return t.clear(r.path,!0)};switch(i){case"abort-action":return;case"save-changes":var c=a();return c instanceof h?c.then(function(){l(),t.confirmNavigation(e,n)}):(l(),t.confirmNavigation(e,n));case"abandon-changes":l();break}e()}},i),o=!0,!1}),o||e()}};l.ui.unsavedChanges=v}}}},both:{"index.js":function(e,n,t){t.watch(e("./lib")),t.watch(e("./utils")),t.watch(e("./schema.js"))},"schema.js":function(e,n,t){var o=void 0;t.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){o=e}},0),o.extendOptions({valuesLabels:O.Optional([String]),textOptional:O.Optional(Boolean)}),o.addValidator(function(){if(!0!==this.definition.optional&&!0!==this.definition.textOptional&&""===this.value)return"required"}),o.messages({maxCount:"[label] can not have more than [maxCount] values",minCount:"[label] must have at least [minCount] values",notAllowed:'[label] has an invalid value: "[value]"'})},lib:{"index.js":function(e,n,t){t.watch(e("./object.js"))},"object.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/typeof")),r=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0),r.object={},r.object.getNestedObject=function(e){var n={};for(var t in m.sanitizeForInObject(e))if(e.hasOwnProperty(t))for(var o=e[t],a=t.split("."),r=n;a.length;){var i=a.shift();a.length?(r[i]||(r[i]={}),r=r[i]):r[i]=o}return n},r.object.getShallowObject=function(e){var n={},t=function(e,n,o){for(var r in m.sanitizeForInObject(n))if(n.hasOwnProperty(r)){var i=e?e+"."+r:r,l=n[r];"object"===(void 0===l?"undefined":(0,a.default)(l))?(l instanceof Array&&(i+="[]"),t(i,l,o)):o[i]=l}};return t("",e,n),n}}},utils:{"absoluteUrl.js":function(e,n,t){var o=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var a="XNAT";o.utils.absoluteUrl=function(e){var n=T.get("viewerRoot");return"/"===e[0]?""+n+e:n+"/"+e}},"index.js":function(e,n,t){t.watch(e("./absoluteUrl")),t.watch(e("./objectPath"))},"objectPath.js":function(e,n,t){function o(e){return e&&e.__esModule?e:{default:e}}var a=o(e("babel-runtime/helpers/typeof")),r=o(e("babel-runtime/helpers/classCallCheck")),i=void 0;t.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var l=function(){function e(){(0,r.default)(this,e)}return e.set=function(){function n(n,t,o){var a=e.getPathComponents(t),r=null!==a?a.length:0,i=!1;if(r>0&&e.isValidObject(n)){for(var l=0,c=r-1,s=n;l<c;){var u=a[l];if(u in s){if(!e.isValidObject(s[u]))break}else s[u]={};s=s[u],l++}l===c&&(s[a[c]]=o,i=!0)}return i}return n}(),e.get=function(){function n(n,t){var o=void 0,a=e.getPathComponents(t),r=null!==a?a.length:0;if(r>0&&e.isValidObject(n)){for(var i=0,l=r-1,c=n;i<l;){var s=a[i],u=e.isValidObject(c[s]);if(!(s in c&&u))break;c=c[s],i++}i===l&&a[l]in c&&(o=c[a[l]])}return o}return n}(),e.isValidObject=function(){function e(e){return"object"===(void 0===e?"undefined":(0,a.default)(e))&&null!==e&&e instanceof Object}return e}(),e.getPathComponents=function(){function e(e){return"string"==typeof e?e.split("."):null}return e}(),e}();i.utils.ObjectPath=l}}},node_modules:{"twbs-pagination":{"package.json":function(e,n){n.name="twbs-pagination",n.version="1.4.1",n.main="jquery.twbsPagination"},"jquery.twbsPagination.js":function(){!function(e,n,t,o){"use strict";var a=e.fn.twbsPagination,r=function(n,t){if(this.$element=e(n),this.options=e.extend({},e.fn.twbsPagination.defaults,t),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.hideOnlyOnePage&&1==this.options.totalPages)return this.$element.trigger("page",1),this;this.options.totalPages<this.options.visiblePages&&(this.options.visiblePages=this.options.totalPages),this.options.href&&(this.options.startPage=this.getPageFromQueryString(),this.options.startPage||(this.options.startPage=1));var o="function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName");return this.$listContainer="UL"===o?this.$element:e("<ul></ul>"),this.$listContainer.addClass(this.options.paginationClass),"UL"!==o&&this.$element.append(this.$listContainer),this.options.initiateStartPageClick?this.show(this.options.startPage):(this.currentPage=this.options.startPage,this.render(this.getPages(this.options.startPage)),this.setupEvents()),this};r.prototype={constructor:r,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(e){if(e<1||e>this.options.totalPages)throw new Error("Page is incorrect.");return this.currentPage=e,this.render(this.getPages(e)),this.setupEvents(),this.$element.trigger("page",e),this},enable:function(){this.show(this.currentPage)},disable:function(){var n=this;this.$listContainer.off("click").on("click","li",function(e){e.preventDefault()}),this.$listContainer.children().each(function(){e(this).hasClass(n.options.activeClass)||e(this).addClass(n.options.disabledClass)})},buildListItems:function(e){var n=[];if(this.options.first&&n.push(this.buildItem("first",1)),this.options.prev){var t=e.currentPage>1?e.currentPage-1:this.options.loop?this.options.totalPages:1;n.push(this.buildItem("prev",t))}for(var o=0;o<e.numeric.length;o++)n.push(this.buildItem("page",e.numeric[o]));if(this.options.next){var a=e.currentPage<this.options.totalPages?e.currentPage+1:this.options.loop?1:this.options.totalPages;n.push(this.buildItem("next",a))}return this.options.last&&n.push(this.buildItem("last",this.options.totalPages)),n},buildItem:function(n,t){var o=e("<li></li>"),a=e("<a></a>"),r=this.options[n]?this.makeText(this.options[n],t):t;return o.addClass(this.options[n+"Class"]),o.data("page",t),o.data("page-type",n),o.append(a.attr("href",this.makeHref(t)).addClass(this.options.anchorClass).html(r)),o},getPages:function(e){var n=[],t=Math.floor(this.options.visiblePages/2),o=e-t+1-this.options.visiblePages%2,a=e+t;o<=0&&(o=1,a=this.options.visiblePages),a>this.options.totalPages&&(o=this.options.totalPages-this.options.visiblePages+1,a=this.options.totalPages);for(var r=o;r<=a;)n.push(r),r++;return{currentPage:e,numeric:n}},render:function(n){var t=this;this.$listContainer.children().remove();var o=this.buildListItems(n);e.each(o,function(e,n){t.$listContainer.append(n)}),this.$listContainer.children().each(function(){var o=e(this);switch(o.data("page-type")){case"page":o.data("page")===n.currentPage&&o.addClass(t.options.activeClass);break;case"first":o.toggleClass(t.options.disabledClass,1===n.currentPage);break;case"last":o.toggleClass(t.options.disabledClass,n.currentPage===t.options.totalPages);break;case"prev":o.toggleClass(t.options.disabledClass,!t.options.loop&&1===n.currentPage);break;case"next":o.toggleClass(t.options.disabledClass,!t.options.loop&&n.currentPage===t.options.totalPages);break;default:break}})},setupEvents:function(){var n=this;this.$listContainer.off("click").on("click","li",function(t){var o=e(this);if(o.hasClass(n.options.disabledClass)||o.hasClass(n.options.activeClass))return!1;!n.options.href&&t.preventDefault(),n.show(parseInt(o.data("page")))})},makeHref:function(e){return this.options.href?this.generateQueryString(e):"#"},makeText:function(e,n){return e.replace(this.options.pageVariable,n).replace(this.options.totalPagesVariable,this.options.totalPages)},getPageFromQueryString:function(e){var n=this.getSearchString(e),t=new RegExp(this.options.pageVariable+"(=([^&#]*)|&|#|$)").exec(n);return t&&t[2]?(t=decodeURIComponent(t[2]),t=parseInt(t),isNaN(t)?null:t):null},generateQueryString:function(e,n){var t=this.getSearchString(n),o=new RegExp(this.options.pageVariable+"=*[^&#]*");return t?"?"+t.replace(o,this.options.pageVariable+"="+e):""},getSearchString:function(e){var t=e||n.location.search;return""===t?null:(0===t.indexOf("?")&&(t=t.substr(1)),t)},getCurrentPage:function(){return this.currentPage}},e.fn.twbsPagination=function(n){var t=Array.prototype.slice.call(arguments,1),o,a=e(this),i=a.data("twbs-pagination"),l="object"==typeof n?n:{};return i||a.data("twbs-pagination",i=new r(this,l)),"string"==typeof n&&(o=i[n].apply(i,t)),void 0===o?a:o},e.fn.twbsPagination.defaults={totalPages:1,startPage:1,visiblePages:5,initiateStartPageClick:!0,hideOnlyOnePage:!1,href:!1,pageVariable:"{{page}}",totalPagesVariable:"{{total_pages}}",page:null,first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,onPageClick:null,paginationClass:"pagination",nextClass:"page-item next",prevClass:"page-item prev",lastClass:"page-item last",firstClass:"page-item first",pageClass:"page-item",activeClass:"active",disabledClass:"disabled",anchorClass:"page-link"},e.fn.twbsPagination.Constructor=r,e.fn.twbsPagination.noConflict=function(){return e.fn.twbsPagination=a,this},e.fn.twbsPagination.version="1.4.1"}(window.jQuery,window,document)}}}}}}},{extensions:[".js",".json",".styl",".html"]}),E=D("./node_modules/meteor/ohif:core/main.js");D("./node_modules/meteor/ohif:core/client/index.js"),D("./node_modules/meteor/ohif:core/both/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:core"]=E}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,o=Package.meteor.meteorEnv,t=Package["templating-runtime"].Template,r=Package.underscore._,a=Package.modules.meteorInstall,d=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,i=Package["ecmascript-runtime-client"].Symbol,h=Package["ecmascript-runtime-client"].Map,l=Package["ecmascript-runtime-client"].Set,m=Package.blaze.Blaze,s=Package.blaze.UI,u=Package.blaze.Handlebars,p=Package.spacebars.Spacebars,b=Package.htmljs.HTML,f=a({node_modules:{meteor:{"ohif:header":{"main.js":function(e,n,o){o.export({header:function(){return r}});var t=void 0;o.watch(e("meteor/ohif:core"),{OHIF:function(e){t=e}},0);var r={dropdown:new t.ui.Dropdown};t.header=r},client:{"index.js":function(e,n,o){o.watch(e("./components"))},components:{"index.js":function(e,n,o){o.watch(e("./header/header.html")),o.watch(e("./header/header.js")),o.watch(e("./header/header.styl"))},header:{"header.html":function(e,n,o){o.exports=e("./template.header.js")},"template.header.js":function(){t.__checkName("header"),t.header=new t("Template.header",function(){var e=this;return b.DIV({class:function(){return["header noselect ",p.mustache(e.lookup("reactive"),e.lookup("headerClasses"))]}},"\n        ",b.DIV({class:"clearfix"},"\n            ",b.A({target:"_blank",class:"brand pull-left",href:function(){return p.mustache(e.lookup("choose"),p.dot(e.lookup("."),"brandHref"),"/")}},"\n                ",m._TemplateWith(function(){return"brand"},function(){return p.include(e.lookupTemplate("section"))}),"\n            "),"\n            ",m._TemplateWith(function(){return"headerAfterBrand"},function(){return p.include(e.lookupTemplate("section"))}),"\n            ",b.A({href:"#",class:"header-menu pull-right"},m._TemplateWith(function(){return"headerMenu"},function(){return p.include(e.lookupTemplate("section"))})),"\n        "),"\n        ",m._InOuterTemplateScope(e,function(){return p.include(function(){return p.call(e.templateContentBlock)})}),"\n    ")})},"header.js":function(e,n,o){var t=void 0;o.watch(e("meteor/templating"),{Template:function(e){t=e}},0);var r=void 0;o.watch(e("meteor/jquery"),{$:function(e){r=e}},1);var a=void 0;o.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},2),t.header.onCreated(function(){var e=t.instance();e.dropdownItems=[],e.autorun(function(){a.header.dropdown.observer.depend(),e.dropdownItems=a.header.dropdown.getItems()})}),t.header.events({"click .header-menu":function(e,n){e.preventDefault(),r(e.currentTarget).find(".dropdown").length||a.ui.showDropdown(n.dropdownItems,{parentElement:e.currentTarget,menuClasses:"dropdown-menu-right",marginTop:"25px"})}})},"header.styl":function(e,n,o){o.exports=e("./header.styl.css")},"header.styl.css":function(e,n,o){o.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\nbody>.header {\n  height: 40px;\n  padding: 10px 10px 0;\n  -webkit-transition: all 0.5s ease;\n  -moz-transition: all 0.5s ease;\n  -ms-transition: all 0.5s ease;\n  -o-transition: all 0.5s ease;\n  transition: all 0.5s ease;\n}\nbody>.header {\n  color: #fff;\n}\nbody.theme-tide body>.header {\n  color: #fff;\n}\nbody.theme-tigerlily body>.header {\n  color: #fff;\n}\nbody.theme-crickets body>.header {\n  color: #fff;\n}\nbody.theme-honeycomb body>.header {\n  color: #fff;\n}\nbody.theme-mint body>.header {\n  color: #fff;\n}\nbody.theme-overcast body>.header {\n  color: #fff;\n}\nbody.theme-quartz body>.header {\n  color: #fff;\n}\nbody>.header {\n  background-color: #000;\n}\nbody.theme-tide body>.header {\n  background-color: #000;\n}\nbody.theme-tigerlily body>.header {\n  background-color: #000;\n}\nbody.theme-crickets body>.header {\n  background-color: #000;\n}\nbody.theme-honeycomb body>.header {\n  background-color: #000;\n}\nbody.theme-mint body>.header {\n  background-color: #000;\n}\nbody.theme-overcast body>.header {\n  background-color: #000;\n}\nbody.theme-quartz body>.header {\n  background-color: #000;\n}\nbody>.header>.clearfix {\n  position: relative;\n}\nbody>.header .header-menu {\n  padding: 4px 0;\n  font-size: 13px;\n  font-weight: 400;\n  line-height: 18px;\n  text-decoration: none;\n}\nbody>.header .header-menu {\n  color: #9ccef9;\n}\nbody.theme-tide body>.header .header-menu {\n  color: #9ccef9;\n}\nbody.theme-tigerlily body>.header .header-menu {\n  color: #9acffd;\n}\nbody.theme-crickets body>.header .header-menu {\n  color: #92c2da;\n}\nbody.theme-honeycomb body>.header .header-menu {\n  color: #b5b5b5;\n}\nbody.theme-mint body>.header .header-menu {\n  color: #a7e9b3;\n}\nbody.theme-overcast body>.header .header-menu {\n  color: #9cbecf;\n}\nbody.theme-quartz body>.header .header-menu {\n  color: #8ea2a4;\n}\nbody>.header .header-menu:empty {\n  display: none;\n}\nbody>.header.header-big {\n  height: 160px;\n  background-color: rgba(21,25,30,0.7);\n}\n')}}}}}}}},{extensions:[".js",".json",".html",".styl"]}),y=f("./node_modules/meteor/ohif:header/main.js");f("./node_modules/meteor/ohif:header/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:header"]=y}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["templating-runtime"].Template,l=Package.modules.meteorInstall,i=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,r=Package["ecmascript-runtime-client"].Symbol,a=Package["ecmascript-runtime-client"].Map,m=Package["ecmascript-runtime-client"].Set,h=Package.blaze.Blaze,s=Package.blaze.UI,d=Package.blaze.Handlebars,p=Package.spacebars.Spacebars,u=Package.htmljs.HTML;l({node_modules:{meteor:{"ohif:themes-common":{client:{"index.js":function(e,t,n){n.watch(e("./components"))},components:{"index.js":function(e,t,n){n.watch(e("./themeSelectorModal/themeSelectorModal.html")),n.watch(e("./themeSelectorModal/themeSelectorModal.styl")),n.watch(e("./themeSelectorModal/themeSelectorModal.js"))},themeSelectorModal:{"themeSelectorModal.html":function(e,t,n){n.exports=e("./template.themeSelectorModal.js")},"template.themeSelectorModal.js":function(){o.__checkName("themeSelectorModal"),o.themeSelectorModal=new o("Template.themeSelectorModal",function(){var e=this;return h._TemplateWith(function(){return p.dataMustache(e.lookup("extend"),e.lookup("."),p.kw({id:"themeSelectorModal",dialogClass:"modal-lg",confirmLabel:"Apply theme",title:"Themes",titleIcon:"fa fa-sliders"}))},function(){return p.include(e.lookupTemplate("dialogForm"),function(){return["\n        ",u.UL({class:"theme-list text-center"},"\n            ",h.Each(function(){return{_sequence:p.call(e.lookup("themes")),_variable:"theme"}},function(){return["\n                ",u.LI({class:function(){return["text-center preview-theme ",p.mustache(e.lookup("printClassIfSelected"),e.lookup("theme"))]},"data-theme":function(){return p.mustache(e.lookup("theme"))}},"\n                    ",u.DIV({class:"icon-wrapper"},"\n                        ",u.SPAN({class:function(){return["theme-icon-",p.mustache(e.lookup("theme"))]}}),"\n                    "),"\n                    ",u.H4({class:"theme-title"},h.View("lookup:ucFirst",function(){return p.mustache(e.lookup("ucFirst"),e.lookup("theme"))})),"\n                "),"\n            "]}),"\n        "),"\n    "]})})})},"themeSelectorModal.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var l=void 0;n.watch(e("meteor/reactive-dict"),{ReactiveDict:function(e){l=e}},1);var i="tide",c=function(){return sessionStorage.getItem("theme")},r=function(e){return sessionStorage.setItem("theme",e)},a=function(e){return document.body.classList.add("theme-"+e)},m=function(){for(var e=document.body.classList,t=e.length-1;t>=0;t--)-1!==e[t].search("theme-")&&document.body.classList.remove(e[t])};o.themeSelectorModal.onCreated(function(){var e=o.instance(),t=c();t||r(t="tide"),e.state=new l,e.state.set("selectedTheme",t),a(t),e.container={currentTheme:t,previewTheme:function(e,t){t.set("selectedTheme",e),m(),a(e)},applyTheme:function(e){r(e.get("selectedTheme"))},resetState:function(e){var t=c();e.set("selectedTheme",t),m(),a(t)}};var n=e.data.promise;n.then(function(){return e.container.applyTheme(e.state)}),n.catch(function(){return e.container.resetState(e.state)})}),o.themeSelectorModal.helpers({themes:["crickets","honeycomb","mint","overcast","quartz","tide","tigerlily"],ucFirst:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},printClassIfSelected:function(e){return e===o.instance().state.get("selectedTheme")?"selected":""}}),o.themeSelectorModal.events({"click .preview-theme":function(e,t){t.container.previewTheme(e.currentTarget.dataset.theme,t.state)}})},"themeSelectorModal.styl":function(e,t,n){n.exports=e("./themeSelectorModal.styl.css")},"themeSelectorModal.styl.css":function(e,t,n){n.exports=e("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n#themeSelectorModal .theme-list {\n  list-style: none;\n  padding: 0;\n}\n#themeSelectorModal .theme-list li {\n  display: inline-block;\n  cursor: pointer;\n  margin-right: 10px;\n  margin-bottom: 10px;\n  padding: 10px;\n  width: 110px;\n}\n#themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-tide #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-tigerlily #themeSelectorModal .theme-list li {\n  border: 1px solid #744b71;\n}\nbody.theme-crickets #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-honeycomb #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-mint #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-overcast #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\nbody.theme-quartz #themeSelectorModal .theme-list li {\n  border: 1px solid #3c5d80;\n}\n#themeSelectorModal .theme-list li:hover {\n  background-color: rgba(21,25,30,0.7);\n}\n#themeSelectorModal .theme-list li:last-child {\n  margin-right: 0;\n}\n#themeSelectorModal .theme-list li.selected {\n  padding: 7px;\n}\n#themeSelectorModal .theme-list li.selected {\n  border: 3px solid #00a4d9;\n}\nbody.theme-tide #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #00a4d9;\n}\nbody.theme-tigerlily #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #ff8a3d;\n}\nbody.theme-crickets #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #d4aaa5;\n}\nbody.theme-honeycomb #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #ce9e59;\n}\nbody.theme-mint #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #23b15d;\n}\nbody.theme-overcast #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #467c80;\n}\nbody.theme-quartz #themeSelectorModal .theme-list li.selected {\n  border: 3px solid #6843cc;\n}\n#themeSelectorModal .theme-list li .icon-wrapper {\n  height: 64px;\n  width: 64px;\n  margin: 0 auto;\n  line-height: 6.5;\n}\n#themeSelectorModal .theme-list li .theme-title {\n  font-weight: normal;\n  font-size: 1.1em;\n  margin-bottom: 0;\n}\n')}}}}}}}},{extensions:[".js",".json",".styl",".html"]})("./node_modules/meteor/ohif:themes-common/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:themes-common"]={}}();

"undefined"==typeof Package&&(Package={}),Package["ohif:themes"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package.jquery.$,a=Package.jquery.jQuery,u=Package.modules.meteorInstall,r=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,i=Package["ecmascript-runtime-client"].Map,s=Package["ecmascript-runtime-client"].Set,d=Package.webapp.WebApp,p=Package.logging.Log,m=Package.deps.Tracker,k=Package.deps.Deps,g=Package.session.Session,f=Package["ddp-client"].DDP,P=Package.mongo.Mongo,h=Package.ui.Blaze,b=Package.ui.UI,v=Package.ui.Handlebars,B=Package.spacebars.Spacebars,G=Package["templating-runtime"].Template,V=Package.check.check,j=Package.check.Match,I=Package.underscore._,y=Package.random.Random,L=Package.ejson.EJSON,S=Package["launch-screen"].LaunchScreen,x=Package.htmljs.HTML,D=u({node_modules:{meteor:{"ohif:design":{components:{roundedButtonGroup:{"template.roundedButtonGroup.js":function(){G.__checkName("roundedButtonGroup"),G.roundedButtonGroup=new G("Template.roundedButtonGroup",function(){var e=this;return x.DIV({class:function(){return[B.mustache(e.lookup("class"))," roundedButtonGroup clearfix center-table"]}},"\n        ",h.Each(function(){return{_sequence:B.call(B.dot(e.lookup("."),"options")),_variable:"item"}},function(){return["\n            ",x.A({class:function(){return["roundedButtonWrapper noselect ",h.If(function(){return B.dataMustache(e.lookup("eq"),e.lookup("getValue"),B.dot(e.lookup("item"),"value"))},function(){return"active"})]},"data-value":function(){return B.mustache(B.dot(e.lookup("item"),"value"))}},"\n                ",x.DIV({class:"roundedButton"},"\n                    ",h.If(function(){return B.call(B.dot(e.lookup("item"),"svgLink"))},function(){return["\n                        ",x.SVG({style:function(){return["width: ",B.mustache(B.dot(e.lookup("item"),"svgWidth")),"px; height: ",B.mustache(B.dot(e.lookup("item"),"svgHeight")),"px"]}},"\n                            ",x.USE({"xlink:href":function(){return B.mustache(e.lookup("absoluteUrl"),B.dot(e.lookup("item"),"svgLink"))}}),"\n                        "),"\n                    "]}),"\n                    ",h.If(function(){return B.call(B.dot(e.lookup("item"),"text"))},function(){return["\n                        ",x.SPAN(h.View("lookup:item.text",function(){return B.mustache(B.dot(e.lookup("item"),"text"))})),"\n                    "]}),"\n                    ",h.If(function(){return B.call(B.dot(e.lookup("item"),"iconClasses"))},function(){return["\n                        ",x.I({class:function(){return B.mustache(B.dot(e.lookup("item"),"iconClasses"))}}),"\n                    "]}),"\n                "),"\n                ",h.If(function(){return B.call(B.dot(e.lookup("item"),"bottomLabel"))},function(){return["\n                    ",x.DIV({class:"bottomLabel"},h.View("lookup:item.bottomLabel",function(){return B.mustache(B.dot(e.lookup("item"),"bottomLabel"))})),"\n                "]}),"\n            "),"\n        "]}),"\n    ")})},"roundedButtonGroup.js":function(){G.roundedButtonGroup.onCreated(function(){var e=G.instance(),t=e.data.value;e.getValue=function(){return t.get(e.data.key)},e.setValue=function(n){var o=[n];t instanceof ReactiveDict&&o.unshift(e.data.key),t.set.apply(t,o)},e.getValue()||e.data.toggleable||e.setValue(e.data.options[0].value)}),G.roundedButtonGroup.events({"click [data-value]":function(e,t){e.preventDefault();var n=o(e.currentTarget);if(!n.hasClass("disabled")){var a=n.hasClass("active")&&t.data.toggleable?null:n.attr("data-value");t.setValue(a)}}}),G.roundedButtonGroup.helpers({getValue:function(){return G.instance().getValue()}})}}}}}}},{extensions:[".js",".json",".styl",".html"]});D("./node_modules/meteor/ohif:design/components/roundedButtonGroup/template.roundedButtonGroup.js"),D("./node_modules/meteor/ohif:design/components/roundedButtonGroup/roundedButtonGroup.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:design"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,a=Package["babel-runtime"].meteorBabelHelpers,i=Package.promise.Promise,o=Package["ecmascript-runtime-client"].Symbol,s=Package["ecmascript-runtime-client"].Map,l=Package["ecmascript-runtime-client"].Set,u,d,c,f,h,m,p,g=r({node_modules:{meteor:{"ohif:cornerstone":{"main.js":function(e,t,n){n.export({cornerstone:function(){return a},cornerstoneTools:function(){return o},cornerstoneMath:function(){return i},cornerstoneWADOImageLoader:function(){return s},dicomParser:function(){return l}});var r=void 0;n.watch(e("hammerjs"),{default:function(e){r=e}},0);var a=void 0;n.watch(e("cornerstone-core/dist/cornerstone.js"),{"*":function(e){a=e}},1);var i=void 0;n.watch(e("cornerstone-math/dist/cornerstoneMath.js"),{"*":function(e){i=e}},2);var o=void 0;n.watch(e("cornerstone-tools/dist/cornerstoneTools.js"),{"*":function(e){o=e}},3);var s=void 0;n.watch(e("cornerstone-wado-image-loader/dist/cornerstoneWADOImageLoader.js"),{"*":function(e){s=e}},4);var l=void 0;n.watch(e("dicom-parser/dist/dicomParser.js"),{"*":function(e){l=e}},5),o.external.Hammer=r,o.external.cornerstone=a,o.external.cornerstoneMath=i,s.external.cornerstone=a,s.external.dicomParser=l},node_modules:{hammerjs:{"package.json":function(e,t){t.name="hammerjs",t.version="2.0.8",t.main="hammer.js"},"hammer.js":function(e,t,n){!function(e,t,r,a){"use strict";function i(e,t,n){return setTimeout(d(e,n),t)}function o(e,t,n){return!!Array.isArray(e)&&(s(e,n[t],n),!0)}function s(e,t,n){var r;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==a)for(r=0;r<e.length;)t.call(n,e[r],r,e),r++;else for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e)}function l(t,n,r){var a="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=e.console&&(e.console.warn||e.console.log);return i&&i.call(e.console,a,r),t.apply(this,arguments)}}function u(e,t,n){var r=t.prototype,a;(a=e.prototype=Object.create(r)).constructor=e,a._super=r,n&&ye(a,n)}function d(e,t){return function n(){return e.apply(t,arguments)}}function c(e,t){return typeof e==me?e.apply(t?t[0]||a:a,t):e}function f(e,t){return e===a?t:e}function h(e,t,n){s(v(t),function(t){e.addEventListener(t,n,!1)})}function m(e,t,n){s(v(t),function(t){e.removeEventListener(t,n,!1)})}function p(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function g(e,t){return e.indexOf(t)>-1}function v(e){return e.trim().split(/\s+/g)}function y(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function b(e){return Array.prototype.slice.call(e,0)}function _(e,t,n){for(var r=[],a=[],i=0;i<e.length;){var o=t?e[i][t]:e[i];y(a,o)<0&&r.push(e[i]),a[i]=o,i++}return n&&(r=t?r.sort(function e(n,r){return n[t]>r[t]}):r.sort()),r}function w(e,t){for(var n,r,i=t[0].toUpperCase()+t.slice(1),o=0;o<fe.length;){if(n=fe[o],(r=n?n+i:t)in e)return r;o++}return a}function E(){return we++}function x(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function T(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){c(e.options.enable,[e])&&n.handler(t)},this.init()}function P(e){var t,n=e.options.inputClass;return new(t=n||(Te?N:Pe?H:xe?W:B))(e,j)}function j(e,t,n){var r=n.pointers.length,a=n.changedPointers.length,i=t&Ce&&r-a==0,o=t&(ke|Ae)&&r-a==0;n.isFirst=!!i,n.isFinal=!!o,i&&(e.session={}),n.eventType=t,S(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function S(e,t){var n=e.session,r=t.pointers,a=r.length;n.firstInput||(n.firstInput=I(t)),a>1&&!n.firstMultiple?n.firstMultiple=I(t):1===a&&(n.firstMultiple=!1);var i=n.firstInput,o=n.firstMultiple,s=o?o.center:i.center,l=t.center=C(r);t.timeStamp=ve(),t.deltaTime=t.timeStamp-i.timeStamp,t.angle=D(s,l),t.distance=A(s,l),M(n,t),t.offsetDirection=k(t.deltaX,t.deltaY);var u=L(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=u.x,t.overallVelocityY=u.y,t.overallVelocity=ge(u.x)>ge(u.y)?u.x:u.y,t.scale=o?U(o.pointers,r):1,t.rotation=o?R(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,O(n,t);var d=e.element;p(t.srcEvent.target,d)&&(d=t.srcEvent.target),t.target=d}function M(e,t){var n=t.center,r=e.offsetDelta||{},a=e.prevDelta||{},i=e.prevInput||{};t.eventType!==Ce&&i.eventType!==ke||(a=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=a.x+(n.x-r.x),t.deltaY=a.y+(n.y-r.y)}function O(e,t){var n=e.lastInterval||t,r=t.timeStamp-n.timeStamp,i,o,s,l;if(t.eventType!=Ae&&(r>Ie||n.velocity===a)){var u=t.deltaX-n.deltaX,d=t.deltaY-n.deltaY,c=L(r,u,d);o=c.x,s=c.y,i=ge(c.x)>ge(c.y)?c.x:c.y,l=k(u,d),e.lastInterval=t}else i=n.velocity,o=n.velocityX,s=n.velocityY,l=n.direction;t.velocity=i,t.velocityX=o,t.velocityY=s,t.direction=l}function I(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:pe(e.pointers[n].clientX),clientY:pe(e.pointers[n].clientY)},n++;return{timeStamp:ve(),pointers:t,center:C(t),deltaX:e.deltaX,deltaY:e.deltaY}}function C(e){var t=e.length;if(1===t)return{x:pe(e[0].clientX),y:pe(e[0].clientY)};for(var n=0,r=0,a=0;a<t;)n+=e[a].clientX,r+=e[a].clientY,a++;return{x:pe(n/t),y:pe(r/t)}}function L(e,t,n){return{x:t/e||0,y:n/e||0}}function k(e,t){return e===t?De:ge(e)>=ge(t)?e<0?Re:Ue:t<0?Be:Ne}function A(e,t,n){n||(n=Ve);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return Math.sqrt(r*r+a*a)}function D(e,t,n){n||(n=Ve);var r=t[n[0]]-e[n[0]],a=t[n[1]]-e[n[1]];return 180*Math.atan2(a,r)/Math.PI}function R(e,t){return D(t[1],t[0],We)+D(e[1],e[0],We)}function U(e,t){return A(t[0],t[1],We)/A(e[0],e[1],We)}function B(){this.evEl=Ge,this.evWin=Ze,this.pressed=!1,T.apply(this,arguments)}function N(){this.evEl=Xe,this.evWin=Je,T.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function F(){this.evTarget=Qe,this.evWin=et,this.started=!1,T.apply(this,arguments)}function z(e,t){var n=b(e.touches),r=b(e.changedTouches);return t&(ke|Ae)&&(n=_(n.concat(r),"identifier",!0)),[n,r]}function H(){this.evTarget=nt,this.targetIds={},T.apply(this,arguments)}function V(e,t){var n=b(e.touches),r=this.targetIds;if(t&(Ce|Le)&&1===n.length)return r[n[0].identifier]=!0,[n,n];var a,i,o=b(e.changedTouches),s=[],l=this.target;if(i=n.filter(function(e){return p(e.target,l)}),t===Ce)for(a=0;a<i.length;)r[i[a].identifier]=!0,a++;for(a=0;a<o.length;)r[o[a].identifier]&&s.push(o[a]),t&(ke|Ae)&&delete r[o[a].identifier],a++;return s.length?[_(i.concat(s),"identifier",!0),s]:void 0}function W(){T.apply(this,arguments);var e=d(this.handler,this);this.touch=new H(this.manager,e),this.mouse=new B(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function q(e,t){e&Ce?(this.primaryTouch=t.changedPointers[0].identifier,G.call(this,t)):e&(ke|Ae)&&G.call(this,t)}function G(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches,a=function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)};setTimeout(a,rt)}}function Z(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var a=this.lastTouches[r],i=Math.abs(t-a.x),o=Math.abs(n-a.y);if(i<=at&&o<=at)return!0}return!1}function Y(e,t){this.manager=e,this.set(t)}function K(e){if(g(e,dt))return dt;var t=g(e,ct),n=g(e,ft);return t&&n?dt:t||n?t?ct:ft:g(e,ut)?ut:lt}function X(){if(!ot)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){t[r]=!n||e.CSS.supports("touch-action",r)}),t}function J(e){this.options=ye({},this.defaults,e||{}),this.id=E(),this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=mt,this.simultaneous={},this.requireFail=[]}function $(e){return e&bt?"cancel":e&vt?"end":e&gt?"move":e&pt?"start":""}function Q(e){return e==Ne?"down":e==Be?"up":e==Re?"left":e==Ue?"right":""}function ee(e,t){var n=t.manager;return n?n.get(e):e}function te(){J.apply(this,arguments)}function ne(){te.apply(this,arguments),this.pX=null,this.pY=null}function re(){te.apply(this,arguments)}function ae(){J.apply(this,arguments),this._timer=null,this._input=null}function ie(){te.apply(this,arguments)}function oe(){te.apply(this,arguments)}function se(){J.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function le(e,t){return t=t||{},t.recognizers=f(t.recognizers,le.defaults.preset),new ue(e,t)}function ue(e,t){this.options=ye({},le.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=P(this),this.touchAction=new Y(this,this.options.touchAction),de(this,!0),s(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function de(e,t){var n=e.element;if(n.style){var r;s(e.options.cssProps,function(a,i){r=w(n.style,i),t?(e.oldCssProps[r]=n.style[r],n.style[r]=a):n.style[r]=e.oldCssProps[r]||""}),t||(e.oldCssProps={})}}function ce(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var fe=["","webkit","Moz","MS","ms","o"],he=t.createElement("div"),me="function",pe=Math.round,ge=Math.abs,ve=Date.now,ye;ye="function"!=typeof Object.assign?function e(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(i!==a&&null!==i)for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o])}return n}:Object.assign;var be=l(function e(t,n,r){for(var i=Object.keys(n),o=0;o<i.length;)(!r||r&&t[i[o]]===a)&&(t[i[o]]=n[i[o]]),o++;return t},"extend","Use `assign`."),_e=l(function e(t,n){return be(t,n,!0)},"merge","Use `assign`."),we=1,Ee=/mobile|tablet|ip(ad|hone|od)|android/i,xe="ontouchstart"in e,Te=w(e,"PointerEvent")!==a,Pe=xe&&Ee.test(navigator.userAgent),je="touch",Se="pen",Me="mouse",Oe="kinect",Ie=25,Ce=1,Le=2,ke=4,Ae=8,De=1,Re=2,Ue=4,Be=8,Ne=16,Fe=Re|Ue,ze=Be|Ne,He=Fe|ze,Ve=["x","y"],We=["clientX","clientY"];T.prototype={handler:function(){},init:function(){this.evEl&&h(this.element,this.evEl,this.domHandler),this.evTarget&&h(this.target,this.evTarget,this.domHandler),this.evWin&&h(x(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&m(this.element,this.evEl,this.domHandler),this.evTarget&&m(this.target,this.evTarget,this.domHandler),this.evWin&&m(x(this.element),this.evWin,this.domHandler)}};var qe={mousedown:Ce,mousemove:Le,mouseup:ke},Ge="mousedown",Ze="mousemove mouseup";u(B,T,{handler:function e(t){var n=qe[t.type];n&Ce&&0===t.button&&(this.pressed=!0),n&Le&&1!==t.which&&(n=ke),this.pressed&&(n&ke&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:"mouse",srcEvent:t}))}});var Ye={pointerdown:Ce,pointermove:Le,pointerup:ke,pointercancel:Ae,pointerout:Ae},Ke={2:"touch",3:"pen",4:"mouse",5:"kinect"},Xe="pointerdown",Je="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Xe="MSPointerDown",Je="MSPointerMove MSPointerUp MSPointerCancel"),u(N,T,{handler:function e(t){var n=this.store,r=!1,a=t.type.toLowerCase().replace("ms",""),i=Ye[a],o=Ke[t.pointerType]||t.pointerType,s="touch"==o,l=y(n,t.pointerId,"pointerId");i&Ce&&(0===t.button||s)?l<0&&(n.push(t),l=n.length-1):i&(ke|Ae)&&(r=!0),l<0||(n[l]=t,this.callback(this.manager,i,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(l,1))}});var $e={touchstart:Ce,touchmove:Le,touchend:ke,touchcancel:Ae},Qe="touchstart",et="touchstart touchmove touchend touchcancel";u(F,T,{handler:function e(t){var n=$e[t.type];if(n===Ce&&(this.started=!0),this.started){var r=z.call(this,t,n);n&(ke|Ae)&&r[0].length-r[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:t})}}});var tt={touchstart:Ce,touchmove:Le,touchend:ke,touchcancel:Ae},nt="touchstart touchmove touchend touchcancel";u(H,T,{handler:function e(t){var n=tt[t.type],r=V.call(this,t,n);r&&this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:"touch",srcEvent:t})}});var rt=2500,at=25;u(W,T,{handler:function e(t,n,r){var a="touch"==r.pointerType,i="mouse"==r.pointerType;if(!(i&&r.sourceCapabilities&&r.sourceCapabilities.firesTouchEvents)){if(a)q.call(this,n,r);else if(i&&Z.call(this,r))return;this.callback(t,n,r)}},destroy:function e(){this.touch.destroy(),this.mouse.destroy()}});var it=w(he.style,"touchAction"),ot=it!==a,st="compute",lt="auto",ut="manipulation",dt="none",ct="pan-x",ft="pan-y",ht=X();Y.prototype={set:function(e){"compute"==e&&(e=this.compute()),ot&&this.manager.element.style&&ht[e]&&(this.manager.element.style[it]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return s(this.manager.recognizers,function(t){c(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),K(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,a=g(r,dt)&&!ht[dt],i=g(r,ft)&&!ht[ft],o=g(r,ct)&&!ht[ct];if(a){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!o||!i)return a||i&&n&Fe||o&&n&ze?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var mt=1,pt=2,gt=4,vt=8,yt=vt,bt=16,_t=32;J.prototype={defaults:{},set:function(e){return ye(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(o(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=ee(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return o(e,"dropRecognizeWith",this)?this:(e=ee(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(o(e,"requireFailure",this))return this;var t=this.requireFail;return e=ee(e,this),-1===y(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(o(e,"dropRequireFailure",this))return this;e=ee(e,this);var t=y(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function t(t){n.manager.emit(t,e)}var n=this,r=this.state;r<vt&&t(n.options.event+$(r)),t(n.options.event),e.additionalEvent&&t(e.additionalEvent),r>=vt&&t(n.options.event+$(r))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=32},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(this.requireFail[e].state&(32|mt)))return!1;e++}return!0},recognize:function(e){var t=ye({},e);if(!c(this.options.enable,[this,t]))return this.reset(),void(this.state=32);this.state&(yt|bt|32)&&(this.state=mt),this.state=this.process(t),this.state&(pt|gt|vt|bt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},u(te,J,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(pt|gt),a=this.attrTest(e);return r&&(n&Ae||!a)?t|bt:r||a?n&ke?t|vt:t&pt?t|gt:pt:32}}),u(ne,te,{defaults:{event:"pan",threshold:10,pointers:1,direction:He},getTouchAction:function(){var e=this.options.direction,t=[];return e&Fe&&t.push(ft),e&ze&&t.push(ct),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,a=e.direction,i=e.deltaX,o=e.deltaY;return a&t.direction||(t.direction&Fe?(a=0===i?De:i<0?Re:Ue,n=i!=this.pX,r=Math.abs(e.deltaX)):(a=0===o?De:o<0?Be:Ne,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=a,n&&r>t.threshold&&a&t.direction},attrTest:function(e){return te.prototype.attrTest.call(this,e)&&(this.state&pt||!(this.state&pt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Q(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),u(re,te,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&pt)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),u(ae,J,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[lt]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime>t.time;if(this._input=e,!r||!n||e.eventType&(ke|Ae)&&!a)this.reset();else if(e.eventType&Ce)this.reset(),this._timer=i(function(){this.state=yt,this.tryEmit()},t.time,this);else if(e.eventType&ke)return yt;return 32},reset:function(){clearTimeout(this._timer)},emit:function(e){this.state===yt&&(e&&e.eventType&ke?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=ve(),this.manager.emit(this.options.event,this._input)))}}),u(ie,te,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[dt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&pt)}}),u(oe,te,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Fe|ze,pointers:1},getTouchAction:function(){return ne.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(Fe|ze)?n=e.overallVelocity:t&Fe?n=e.overallVelocityX:t&ze&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&ge(n)>this.options.velocity&&e.eventType&ke},emit:function(e){var t=Q(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),u(se,J,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ut]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,a=e.deltaTime<t.time;if(this.reset(),e.eventType&Ce&&0===this.count)return this.failTimeout();if(r&&a&&n){if(e.eventType!=ke)return this.failTimeout();var o=!this.pTime||e.timeStamp-this.pTime<t.interval,s=!this.pCenter||A(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,s&&o?this.count+=1:this.count=1,this._input=e,0===this.count%t.taps)return this.hasRequireFailures()?(this._timer=i(function(){this.state=yt,this.tryEmit()},t.interval,this),pt):yt}return 32},failTimeout:function(){return this._timer=i(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==yt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),le.VERSION="2.0.7",le.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[re,{enable:!1},["rotate"]],[oe,{direction:Fe}],[ne,{direction:Fe},["swipe"]],[se],[se,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var wt=1,Et=2;ue.prototype={set:function(e){return ye(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){this.touchAction.preventDefaults(e);var n,r=this.recognizers,a=t.curRecognizer;(!a||a&&a.state&yt)&&(a=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||a&&n!=a&&!n.canRecognizeWith(a)?n.reset():n.recognize(e),!a&&n.state&(pt|gt|vt)&&(a=t.curRecognizer=n),i++}},get:function(e){if(e instanceof J)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(o(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(o(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=y(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==a&&t!==a){var n=this.handlers;return s(v(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this}},off:function(e,t){if(e!==a){var n=this.handlers;return s(v(e),function(e){t?n[e]&&n[e].splice(y(n[e],t),1):delete n[e]}),this}},emit:function(e,t){this.options.domEvents&&ce(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(n&&n.length){t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](t),r++}},destroy:function(){this.element&&de(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},ye(le,{INPUT_START:Ce,INPUT_MOVE:Le,INPUT_END:ke,INPUT_CANCEL:Ae,STATE_POSSIBLE:mt,STATE_BEGAN:pt,STATE_CHANGED:gt,STATE_ENDED:vt,STATE_RECOGNIZED:yt,STATE_CANCELLED:bt,STATE_FAILED:32,DIRECTION_NONE:De,DIRECTION_LEFT:Re,DIRECTION_RIGHT:Ue,DIRECTION_UP:Be,DIRECTION_DOWN:Ne,DIRECTION_HORIZONTAL:Fe,DIRECTION_VERTICAL:ze,DIRECTION_ALL:He,Manager:ue,Input:T,TouchAction:Y,TouchInput:H,MouseInput:B,PointerEventInput:N,TouchMouseInput:W,SingleTouchInput:F,Recognizer:J,AttrRecognizer:te,Tap:se,Pan:ne,Swipe:oe,Pinch:re,Rotate:ie,Press:ae,on:h,off:m,each:s,merge:_e,extend:be,assign:ye,inherit:u,bindFn:d,prefixed:w}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=le,"function"==typeof define&&define.amd?define(function(){return le}):void 0!==n&&n.exports?n.exports=le:e.Hammer=le}(window,document,"Hammer")}},"cornerstone-core":{dist:{"cornerstone.js":function(e,t,n){!function e(r,a){"object"==typeof t&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define("cornerstone-core",[],a):"object"==typeof t?t["cornerstone-core"]=a():r.cornerstone=a()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=42)}([function(e,t,n){"use strict";function r(e){if(void 0===e)throw new Error("getEnabledElement: parameter element must not be undefined");for(var t=0;t<s.length;t++)if(s[t].element===e)return s[t];throw new Error("element not enabled")}function a(e){if(void 0===e)throw new Error("getEnabledElement: enabledElement element must not be undefined");s.push(e)}function i(e){var t=[];return s.forEach(function(n){n.image&&n.image.imageId===e&&t.push(n)}),t}function o(){return s}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnabledElement=r,t.addEnabledElement=a,t.getEnabledElementsByImageId=i,t.getEnabledElements=o;var s=[]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return window.performance?performance.now():Date.now()}},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;return"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:n,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("getDefaultViewport: parameter canvas must not be undefined");if(void 0===t)return{scale:1,translation:{x:0,y:0},voi:{windowWidth:void 0,windowCenter:void 0},invert:!1,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:void 0,voiLUT:void 0,colormap:void 0,labelmap:!1};var n=e.height/t.rows,r=e.width/t.columns;return{scale:Math.min(r,n),translation:{x:0,y:0},voi:{windowWidth:t.windowWidth,windowCenter:t.windowCenter},invert:t.invert,pixelReplication:!1,rotation:0,hflip:!1,vflip:!1,modalityLUT:t.modalityLUT,voiLUT:t.voiLUT,colormap:t.colormap,labelmap:Boolean(t.labelmap)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw new Error("setToPixelCoordinateSystem: parameter enabledElement must not be undefined");if(void 0===t)throw new Error("setToPixelCoordinateSystem: parameter context must not be undefined");var r=(0,a.default)(e,n);t.setTransform(r.m[0],r.m[1],r.m[2],r.m[3],r.m[4],r.m[5])};var a=r(n(24))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.getEnabledElement)(e);if(void 0===n.image&&!n.layers.length)throw new Error("updateImage: image has not been loaded yet");(0,i.default)(n,t)};var a=n(0),i=r(n(6))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.needsRedraw=!0,t&&(e.invalid=!0)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(28),i=r(n(29));t.default={getColormap:a.getColormap,getColormapsList:a.getColormapsList,LookupTable:i.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&e.cachedLut.invert===t.invert?e.cachedLut.lutArray:((0,u.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.lutArray)}function i(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas;if(255===e.viewport.voi.windowWidth&&128===e.viewport.voi.windowCenter&&!1===e.viewport.invert&&t.getCanvas&&t.getCanvas())return t.getCanvas();if(!1===(0,m.default)(e,t)&&!0!==n)return r;r.width===t.width&&r.height===t.height||(0,p.default)(e,t);var i=(0,l.default)(),o=a(t,e.viewport);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,l.default)()-i;var s=e.renderingTools.renderCanvasData,u=e.renderingTools.renderCanvasContext;return t.rgba?(0,c.default)(t,o,s.data):(0,d.default)(t,o,s.data),i=(0,l.default)(),u.putImageData(s,0,0),t.stats.lastPutImageDataTime=(0,l.default)()-i,r}function o(e,t){if(void 0===e)throw new Error("renderColorImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderColorImage: image must be loaded before it can be drawn");var r=e.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,(0,f.default)(e,r);var a=void 0;a=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?h.default.renderer.render(e):i(e,n,t),r.drawImage(a,0,0,n.width,n.height,0,0,n.width,n.height),e.renderingTools=(0,g.default)(e)}function s(e,t){if(void 0===e)throw new Error("addColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addColorLayer: image must be loaded before it can be drawn");n.rgba=!0,e.canvas=i(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=(0,g.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderColorImage=o,t.addColorLayer=s;var l=r(n(1)),u=r(n(45)),d=r(n(21)),c=r(n(46)),f=r(n(4)),h=r(n(15)),m=r(n(13)),p=r(n(11)),g=r(n(12))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,a.default)(e)};var a=r(n(24))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,a=e.viewport.colormap||e.options.colormap;if(a&&"string"==typeof a&&(a=h.default.getColormap(a)),!a)throw new Error("renderLabelMapImage: colormap not found.");var i=a.getId();if(!1===(0,c.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===i)return r;r.width===t.width&&r.height===t.height||(0,u.default)(e,t);var o=(0,l.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===i||(e.renderingTools.colorLut=a.createLookupTable(),e.renderingTools.colormapId=i),t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,l.default)()-o;var s=e.renderingTools.colorLut,d=e.renderingTools.renderCanvasData,m=e.renderingTools.renderCanvasContext;return(0,f.default)(t,s,d.data),o=(0,l.default)(),m.putImageData(d,0,0),t.stats.lastPutImageDataTime=(0,l.default)()-o,r}function i(e,t){if(void 0===e)throw new Error("renderLabelMapImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderLabelMapImage: image must be loaded before it can be drawn");var r=e.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,(0,s.default)(e,r);var i=a(e,n,t),o=n.width,l=n.height;r.drawImage(i,0,0,o,l,0,0,o,l),e.renderingTools=(0,d.default)(e)}function o(e,t){if(void 0===e)throw new Error("addLabelMapLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addLabelMapLayer: image must be loaded before it can be drawn");e.canvas=a(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=(0,d.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderLabelMapImage=i,t.addLabelMapLayer=o;var s=r(n(4)),l=r(n(1)),u=r(n(11)),d=r(n(12)),c=r(n(13)),f=r(n(22)),h=r(n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.renderingTools.renderCanvas;n.width=t.width,n.height=t.height;var r=n.getContext("2d");r.fillStyle="white",r.fillRect(0,0,n.width,n.height);var a=r.getImageData(0,0,t.width,t.height);e.renderingTools.renderCanvasContext=r,e.renderingTools.renderCanvasData=a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.image.imageId,n=e.viewport;return e.renderingTools.lastRenderedImageId=t,e.renderingTools.lastRenderedViewport={windowCenter:n.voi.windowCenter,windowWidth:n.voi.windowWidth,invert:n.invert,rotation:n.rotation,hflip:n.hflip,vflip:n.vflip,modalityLUT:n.modalityLUT,voiLUT:n.voiLUT,colormap:n.colormap},e.renderingTools}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.renderingTools.lastRenderedImageId,r=e.renderingTools.lastRenderedViewport;return t.imageId!==n||!r||r.windowCenter!==e.viewport.voi.windowCenter||r.windowWidth!==e.viewport.voi.windowWidth||r.invert!==e.viewport.invert||r.rotation!==e.viewport.rotation||r.hflip!==e.viewport.hflip||r.vflip!==e.viewport.vflip||r.modalityLUT!==e.viewport.modalityLUT||r.voiLUT!==e.viewport.voiLUT||r.colormap!==e.viewport.colormap}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var r=e.renderingTools.renderCanvas,a=e.viewport.colormap||e.options.colormap;if(a&&"string"==typeof a&&(a=m.default.getColormap(a)),!a)throw new Error("renderPseudoColorImage: colormap not found.");var i=a.getId();if(!1===(0,f.default)(e,t)&&!0!==n&&e.renderingTools.colormapId===i)return r;r.width===t.width&&r.height===t.height||(0,u.default)(e,t);var o=(0,l.default)();e.renderingTools.colorLut&&!n&&e.renderingTools.colormapId===i||(a.setNumberOfColors(256),e.renderingTools.colorLut=a.createLookupTable(),e.renderingTools.colormapId=i);var s=(0,d.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,l.default)()-o;var c=e.renderingTools.colorLut,p=e.renderingTools.renderCanvasData,g=e.renderingTools.renderCanvasContext;return(0,h.default)(t,s,c,p.data),o=(0,l.default)(),g.putImageData(p,0,0),t.stats.lastPutImageDataTime=(0,l.default)()-o,r}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var r=e.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,(0,s.default)(e,r);var i=a(e,n,t),o=n.width,l=n.height;r.drawImage(i,0,0,o,l,0,0,o,l),e.renderingTools=(0,c.default)(e)}function o(e,t){if(void 0===e)throw new Error("addPseudoColorLayer: layer parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("addPseudoColorLayer: image must be loaded before it can be drawn");e.canvas=a(e,n,t);var r=e.canvas.getContext("2d");r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,e.renderingTools=(0,c.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderPseudoColorImage=i,t.addPseudoColorLayer=o;var s=r(n(4)),l=r(n(1)),u=r(n(11)),d=r(n(32)),c=r(n(12)),f=r(n(13)),h=r(n(23)),m=r(n(7))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(47),i=r(n(34)),o=r(n(33)),s={createProgramFromString:i.default,renderer:{render:a.render,initRenderer:a.initRenderer,getRenderCanvas:a.getRenderCanvas,isWebGLAvailable:a.isWebGLAvailable},textureCache:o.default};Object.defineProperty(s,"isWebGLInitialized",{enumerable:!0,configurable:!1,get:function e(){return a.isWebGLInitialized}}),t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=new(function(){function e(){r(this,e),this.listeners={},this.namespaces={}}return a(e,[{key:"addEventNamespaceListener",value:function e(t,n){t.indexOf(".")<=0||(this.namespaces[t]=n,this.addEventListener(t.split(".")[0],n))}},{key:"removeEventNamespaceListener",value:function e(t){t.indexOf(".")<=0||!this.namespaces[t]||(this.removeEventListener(t.split(".")[0],this.namespaces[t]),delete this.namespaces[t])}},{key:"addEventListener",value:function e(t,n){t.indexOf(".")>0?this.addEventNamespaceListener(t,n):(t in this.listeners||(this.listeners[t]=[]),this.listeners[t].push(n))}},{key:"removeEventListener",value:function e(t,n){if(t.indexOf(".")>0)this.removeEventNamespaceListener(t);else if(t in this.listeners)for(var r=this.listeners[t],a=0,i=r.length;a<i;a++)if(r[a]===n)return void r.splice(a,1)}},{key:"dispatchEvent",value:function e(t){if(!(t.type in this.listeners))return!0;for(var n=this.listeners[t.type],r=0,a=n.length;r<a;r++)n[r].call(this,t);return!t.defaultPrevented}}]),e}());t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e.renderingTools.renderCanvas||(e.renderingTools.renderCanvas=document.createElement("canvas"));var a=e.renderingTools.renderCanvas;if(!1===(0,h.default)(e,t)&&!0!==n)return a;a.width===t.width&&a.height===t.height||(0,m.default)(e,t);var i=(0,d.default)(),o=(0,f.default)(t,e.viewport,n);t.stats=t.stats||{},t.stats.lastLutGenerateTime=(0,d.default)()-i;var u=e.renderingTools.renderCanvasData,c=e.renderingTools.renderCanvasContext;return r?(0,s.default)(t,o,u.data):(0,l.default)(t,o,u.data),i=(0,d.default)(),c.putImageData(u,0,0),t.stats.lastPutImageDataTime=(0,d.default)()-i,a}function i(e,t){if(void 0===e)throw new Error("drawImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("drawImage: image must be loaded before it can be drawn");var r=e.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,(0,u.default)(e,r);var i=void 0;i=e.options&&e.options.renderer&&"webgl"===e.options.renderer.toLowerCase()?c.default.renderer.render(e):a(e,n,t),r.drawImage(i,0,0,n.width,n.height,0,0,n.width,n.height),e.renderingTools=(0,p.default)(e)}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0===e)throw new Error("addGrayscaleLayer: layer parameter must not be undefined");var r=e.image;if(void 0===r)throw new Error("addGrayscaleLayer: image must be loaded before it can be drawn");e.canvas=a(e,r,t,n);var i=e.canvas.getContext("2d");i.imageSmoothingEnabled=!e.viewport.pixelReplication,i.mozImageSmoothingEnabled=i.imageSmoothingEnabled,e.renderingTools=(0,p.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderGrayscaleImage=i,t.addGrayscaleLayer=o;var s=r(n(20)),l=r(n(30)),u=r(n(4)),d=r(n(1)),c=r(n(15)),f=r(n(32)),h=r(n(13)),m=r(n(11)),p=r(n(12))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,s){var l=e.maxPixelValue,u=e.minPixelValue,d=Math.min(u,0);if(void 0===e.cachedLut){var c=l-d+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(c)}var f=e.cachedLut.lutArray,h=(0,a.default)(e.slope,e.intercept,o),m=(0,i.default)(t,n,s);if(!0===r)for(var p=u;p<=l;p++)f[p+-d]=255-m(h(p));else for(var g=u;g<=l;g++)f[g+-d]=m(h(g));return f};var a=r(n(26)),i=r(n(27))},function(e,t,n){"use strict";function r(e){window.setTimeout(e,1e3/60)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.oRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||r(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-r;var o=i.length,s=e.minPixelValue,l=3,u=0;if(r=(0,a.default)(),i instanceof Int16Array)if(s<0)for(;u<o;)n[l]=t[i[u++]+-s],l+=4;else for(;u<o;)n[l]=t[i[u++]],l+=4;else if(i instanceof Uint16Array)for(;u<o;)n[l]=t[i[u++]],l+=4;else if(s<0)for(;u<o;)n[l]=t[i[u++]+-s],l+=4;else for(;u<o;)n[l]=t[i[u++]],l+=4;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-r};var a=r(n(1))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-r;var o=e.minPixelValue,s=0,l=0,u=i.length;if(r=(0,a.default)(),o<0)for(;l<u;)n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s]=t[i[l]+-o],l+=2,s+=2;else for(;l<u;)n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s]=t[i[l]],l+=2,s+=2;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-r};var a=r(n(1))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=(0,o.default)(),a=e.getPixelData();e.stats.lastGetPixelDataTime=(0,o.default)()-r;var s=a.length,l=e.minPixelValue,u=0,d=0,c=void 0,f=void 0;if(r=(0,o.default)(),f=t instanceof i.default.LookupTable?t.Table:t,l<0)for(;d<s;)c=f[a[d++]+-l],n[u++]=c[0],n[u++]=c[1],n[u++]=c[2],n[u++]=c[3];else for(;d<s;)c=f[a[d++]],n[u++]=c[0],n[u++]=c[1],n[u++]=c[2],n[u++]=c[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,o.default)()-r}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(7)),o=r(n(1));t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){var a=(0,o.default)(),s=e.getPixelData();e.stats.lastGetPixelDataTime=(0,o.default)()-a;var l=s.length,u=e.minPixelValue,d=0,c=0,f=void 0,h=void 0,m=void 0;if(a=(0,o.default)(),m=n instanceof i.default.LookupTable?n.Table:n,u<0)for(;c<l;)h=m[f=t[s[c++]+-u]],r[d++]=h[0],r[d++]=h[1],r[d++]=h[2],r[d++]=h[3];else for(;c<l;)h=m[f=t[s[c++]]],r[d++]=h[0],r[d++]=h[1],r[d++]=h[2],r[d++]=h[3];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,o.default)()-a}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(7)),o=r(n(1));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=new r.Transform;n.translate(e.canvas.width/2,e.canvas.height/2);var a=e.viewport.rotation;0!==a&&n.rotate(a*Math.PI/180);var i=e.viewport.scale,o=e.viewport.scale;return e.image.rowPixelSpacing<e.image.columnPixelSpacing?i*=e.image.columnPixelSpacing/e.image.rowPixelSpacing:e.image.columnPixelSpacing<e.image.rowPixelSpacing&&(o*=e.image.rowPixelSpacing/e.image.columnPixelSpacing),n.scale(i,o),0!==a&&n.rotate(-a*Math.PI/180),n.translate(e.viewport.translation.x,e.viewport.translation.y),0!==a&&n.rotate(a*Math.PI/180),void 0!==t&&n.scale(t,t),e.viewport.hflip&&n.scale(-1,1),e.viewport.vflip&&n.scale(1,-1),n.translate(-e.image.width/2,-e.image.height/2),n};var r=n(31)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=t.element,a={viewport:t.viewport,element:t.element,image:t.image,enabledElement:t,layerId:n};(0,y.default)(r,e,a)}function i(e,t){if(e.layerId===t.layerId)throw new Error("rescaleImage: both arguments represent the same layer");var n=e.image,r=t.image;if(n.imageId&&r.imageId){var a=r.columnPixelSpacing*r.width/(n.columnPixelSpacing*n.width),i=t.viewport.scale/e.viewport.scale*a;t.viewport.scale=e.viewport.scale*i}}function o(e,t,n){var r=(0,m.default)(),o=(0,p.getEnabledElement)(e),s=o.layers,l=void 0;t&&(l=(0,g.default)(o.canvas,t),n&&n.viewport&&(l=Object.assign(l,n.viewport))),!1!==o.syncViewports&&(o.syncViewports=!0);var u={image:t,layerId:r,viewport:l,options:n||{},renderingTools:{}};return s.length&&t&&i(s[0],u),s.push(u),a("cornerstonelayeradded",o,r),1===s.length&&t&&c(e,r),r}function s(e,t){var n=(0,p.getEnabledElement)(e),r=n.layers,i=n.layers.findIndex(function(e){return e.layerId===t});-1!==i&&(r.splice(i,1),t===n.activeLayerId&&r.length&&c(e,r[0].layerId),a("cornerstonelayerremoved",n,t))}function l(e,t){return(0,p.getEnabledElement)(e).layers.find(function(e){return e.layerId===t})}function u(e){return(0,p.getEnabledElement)(e).layers}function d(e){return(0,p.getEnabledElement)(e).layers.filter(function(e){return e.options&&!1!==e.options.visible&&0!==e.options.opacity})}function c(e,t){var n=(0,p.getEnabledElement)(e);if(n.activeLayerId!==t){var r=n.layers.findIndex(function(e){return e.layerId===t});if(-1===r)throw new Error("setActiveLayer: layer not found in layers array");var i=n.layers[r];if(!i.image)throw new Error("setActiveLayer: layer with undefined image cannot be set as active.");n.activeLayerId=t,n.image=i.image,n.viewport=i.viewport,(0,v.default)(e),a("cornerstoneactivelayerchanged",n,t)}}function f(e,t,n){var r=(0,p.getEnabledElement)(e),a=r.layers[0],o=void 0;if(!(o=n?l(e,n):h(e)))throw new Error("setLayerImage: Layer not found");if(o.image=t,t){if(!o.viewport){var s=(0,g.default)(r.canvas,t);o.options&&o.options.viewport&&(o.viewport=Object.assign(s,o.options.viewport)),a.layerId!==n&&i(a,o)}}else o.viewport=void 0}function h(e){var t=(0,p.getEnabledElement)(e);return t.layers.find(function(e){return e.layerId===t.activeLayerId})}Object.defineProperty(t,"__esModule",{value:!0}),t.rescaleImage=i,t.addLayer=o,t.removeLayer=s,t.getLayer=l,t.getLayers=u,t.getVisibleLayers=d,t.setActiveLayer=c,t.setLayerImage=f,t.getActiveLayer=h;var m=r(n(58)),p=n(0),g=r(n(3)),v=r(n(5)),y=r(n(2))},function(e,t,n){"use strict";function r(e,t){return function(n){return n*e+t}}function a(e){var t=e.lut[0],n=e.lut[e.lut.length-1],r=e.firstValueMapped+e.lut.length;return function(a){return a<e.firstValueMapped?t:a>=r?n:e.lut[a]}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return n?a(n):r(e,t)}},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){return function(n){return 255*((n-t)/e+.5)}}function i(e){var t=Math.max.apply(Math,r(e.lut)).toString(2).length-8,n=e.lut[0]>>t,a=e.lut[e.lut.length-1]>>t,i=e.firstValueMapped+e.lut.length-1;return function(r){return r<e.firstValueMapped?n:r>=i?a:e.lut[r-e.firstValueMapped]>>t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return n?i(n):a(e,t)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){for(var r=(t-e)/((n=null===n?100:n)-1),a=[];n-- >0;)a.push(e),e+=r;return a[a.length-1]=t,a}function i(e,t){for(var n=0,r=e.length-1;n<=r;){var a=n+Math.floor((r-n)/2),i=e[a];if(i===t)return a;t<i?r=a-1:n=a+1}return n}function o(e,t){var n=void 0,r=[],a=t.length;for(e.sort(function(e,t){return e-t}),n=0;n<a;n++)r[n]=i(e,t[n]);return r}function s(e,t,n){var r=void 0,i=[],s=[],l=[],u=[];for(n=null===n?1:n,r=0;r<t.length;r++){var d=t[r];i.push((e-1)*d[0]),s.push(d[1]),l.push(d[1])}var c=a(0,1,e);for(r=0;r<e;r++)c[r]=(e-1)*Math.pow(c[r],n);var f=o(i,c);for(r=1;r<e-1;r++){var h=f[r],m=(c[r]-i[h-1])/(i[h]-i[h-1]),p=s[h]-l[h-1];u[r]=m*p+l[h-1]}return u[0]=l[0],u[e-1]=s[t.length-1],u}function l(e,t,n){var r=void 0,a=[];t=null===t?256:t,n=null===n?1:n;var i=s(t,e.red,n),o=s(t,e.green,n),l=s(t,e.blue,n);for(r=0;r<t;r++){var u=[Math.round(255*i[r]),Math.round(255*o[r]),Math.round(255*l[r]),255];a.push(u)}return a}function u(){var e=[];return Object.keys(h).forEach(function(t){if(h.hasOwnProperty(t)){var n=h[t];e.push({id:t,name:n.name})}}),e.sort(function(e,t){var n=e.name.toLowerCase(),r=t.name.toLowerCase();return n===r?0:n<r?-1:1}),e}function d(e,t){var n=h[e];return n||(n=h[e]=t||{name:"",colors:[]}),!n.colors&&n.segmentedData&&(n.colors=l(n.segmentedData,n.numColors,n.gamma)),{getId:function t(){return e},getColorSchemeName:function e(){return n.name},setColorSchemeName:function e(t){n.name=t},getNumberOfColors:function e(){return n.colors.length},setNumberOfColors:function e(t){for(;n.colors.length<t;)n.colors.push(f);n.colors.length=t},getColor:function e(t){return this.isValidIndex(t)?n.colors[t]:f},getColorRepeating:function e(t){var r=n.colors.length;return t=r?t%r:0,this.getColor(t)},setColor:function e(t,r){this.isValidIndex(t)&&(n.colors[t]=r)},addColor:function e(t){n.colors.push(t)},insertColor:function e(t,r){this.isValidIndex(t)&&n.colors.splice(t,1,r)},removeColor:function e(t){this.isValidIndex(t)&&n.colors.splice(t,1)},clearColors:function e(){n.colors=[]},buildLookupTable:function e(t){if(t){var r=n.colors.length;t.setNumberOfTableValues(r);for(var a=0;a<r;a++)t.setTableValue(a,n.colors[a])}},createLookupTable:function e(){var t=new c.default;return this.buildLookupTable(t),t},isValidIndex:function e(t){return t>=0&&t<n.colors.length}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getColormapsList=u,t.getColormap=d;var c=r(n(29)),f=[0,0,0,0],h={hotIron:{name:"Hot Iron",numOfColors:256,colors:[[0,0,0,255],[2,0,0,255],[4,0,0,255],[6,0,0,255],[8,0,0,255],[10,0,0,255],[12,0,0,255],[14,0,0,255],[16,0,0,255],[18,0,0,255],[20,0,0,255],[22,0,0,255],[24,0,0,255],[26,0,0,255],[28,0,0,255],[30,0,0,255],[32,0,0,255],[34,0,0,255],[36,0,0,255],[38,0,0,255],[40,0,0,255],[42,0,0,255],[44,0,0,255],[46,0,0,255],[48,0,0,255],[50,0,0,255],[52,0,0,255],[54,0,0,255],[56,0,0,255],[58,0,0,255],[60,0,0,255],[62,0,0,255],[64,0,0,255],[66,0,0,255],[68,0,0,255],[70,0,0,255],[72,0,0,255],[74,0,0,255],[76,0,0,255],[78,0,0,255],[80,0,0,255],[82,0,0,255],[84,0,0,255],[86,0,0,255],[88,0,0,255],[90,0,0,255],[92,0,0,255],[94,0,0,255],[96,0,0,255],[98,0,0,255],[100,0,0,255],[102,0,0,255],[104,0,0,255],[106,0,0,255],[108,0,0,255],[110,0,0,255],[112,0,0,255],[114,0,0,255],[116,0,0,255],[118,0,0,255],[120,0,0,255],[122,0,0,255],[124,0,0,255],[126,0,0,255],[128,0,0,255],[130,0,0,255],[132,0,0,255],[134,0,0,255],[136,0,0,255],[138,0,0,255],[140,0,0,255],[142,0,0,255],[144,0,0,255],[146,0,0,255],[148,0,0,255],[150,0,0,255],[152,0,0,255],[154,0,0,255],[156,0,0,255],[158,0,0,255],[160,0,0,255],[162,0,0,255],[164,0,0,255],[166,0,0,255],[168,0,0,255],[170,0,0,255],[172,0,0,255],[174,0,0,255],[176,0,0,255],[178,0,0,255],[180,0,0,255],[182,0,0,255],[184,0,0,255],[186,0,0,255],[188,0,0,255],[190,0,0,255],[192,0,0,255],[194,0,0,255],[196,0,0,255],[198,0,0,255],[200,0,0,255],[202,0,0,255],[204,0,0,255],[206,0,0,255],[208,0,0,255],[210,0,0,255],[212,0,0,255],[214,0,0,255],[216,0,0,255],[218,0,0,255],[220,0,0,255],[222,0,0,255],[224,0,0,255],[226,0,0,255],[228,0,0,255],[230,0,0,255],[232,0,0,255],[234,0,0,255],[236,0,0,255],[238,0,0,255],[240,0,0,255],[242,0,0,255],[244,0,0,255],[246,0,0,255],[248,0,0,255],[250,0,0,255],[252,0,0,255],[254,0,0,255],[255,0,0,255],[255,2,0,255],[255,4,0,255],[255,6,0,255],[255,8,0,255],[255,10,0,255],[255,12,0,255],[255,14,0,255],[255,16,0,255],[255,18,0,255],[255,20,0,255],[255,22,0,255],[255,24,0,255],[255,26,0,255],[255,28,0,255],[255,30,0,255],[255,32,0,255],[255,34,0,255],[255,36,0,255],[255,38,0,255],[255,40,0,255],[255,42,0,255],[255,44,0,255],[255,46,0,255],[255,48,0,255],[255,50,0,255],[255,52,0,255],[255,54,0,255],[255,56,0,255],[255,58,0,255],[255,60,0,255],[255,62,0,255],[255,64,0,255],[255,66,0,255],[255,68,0,255],[255,70,0,255],[255,72,0,255],[255,74,0,255],[255,76,0,255],[255,78,0,255],[255,80,0,255],[255,82,0,255],[255,84,0,255],[255,86,0,255],[255,88,0,255],[255,90,0,255],[255,92,0,255],[255,94,0,255],[255,96,0,255],[255,98,0,255],[255,100,0,255],[255,102,0,255],[255,104,0,255],[255,106,0,255],[255,108,0,255],[255,110,0,255],[255,112,0,255],[255,114,0,255],[255,116,0,255],[255,118,0,255],[255,120,0,255],[255,122,0,255],[255,124,0,255],[255,126,0,255],[255,128,4,255],[255,130,8,255],[255,132,12,255],[255,134,16,255],[255,136,20,255],[255,138,24,255],[255,140,28,255],[255,142,32,255],[255,144,36,255],[255,146,40,255],[255,148,44,255],[255,150,48,255],[255,152,52,255],[255,154,56,255],[255,156,60,255],[255,158,64,255],[255,160,68,255],[255,162,72,255],[255,164,76,255],[255,166,80,255],[255,168,84,255],[255,170,88,255],[255,172,92,255],[255,174,96,255],[255,176,100,255],[255,178,104,255],[255,180,108,255],[255,182,112,255],[255,184,116,255],[255,186,120,255],[255,188,124,255],[255,190,128,255],[255,192,132,255],[255,194,136,255],[255,196,140,255],[255,198,144,255],[255,200,148,255],[255,202,152,255],[255,204,156,255],[255,206,160,255],[255,208,164,255],[255,210,168,255],[255,212,172,255],[255,214,176,255],[255,216,180,255],[255,218,184,255],[255,220,188,255],[255,222,192,255],[255,224,196,255],[255,226,200,255],[255,228,204,255],[255,230,208,255],[255,232,212,255],[255,234,216,255],[255,236,220,255],[255,238,224,255],[255,240,228,255],[255,242,232,255],[255,244,236,255],[255,246,240,255],[255,248,244,255],[255,250,248,255],[255,252,252,255],[255,255,255,255]]},pet:{name:"PET",numColors:256,colors:[[0,0,0,255],[0,2,1,255],[0,4,3,255],[0,6,5,255],[0,8,7,255],[0,10,9,255],[0,12,11,255],[0,14,13,255],[0,16,15,255],[0,18,17,255],[0,20,19,255],[0,22,21,255],[0,24,23,255],[0,26,25,255],[0,28,27,255],[0,30,29,255],[0,32,31,255],[0,34,33,255],[0,36,35,255],[0,38,37,255],[0,40,39,255],[0,42,41,255],[0,44,43,255],[0,46,45,255],[0,48,47,255],[0,50,49,255],[0,52,51,255],[0,54,53,255],[0,56,55,255],[0,58,57,255],[0,60,59,255],[0,62,61,255],[0,65,63,255],[0,67,65,255],[0,69,67,255],[0,71,69,255],[0,73,71,255],[0,75,73,255],[0,77,75,255],[0,79,77,255],[0,81,79,255],[0,83,81,255],[0,85,83,255],[0,87,85,255],[0,89,87,255],[0,91,89,255],[0,93,91,255],[0,95,93,255],[0,97,95,255],[0,99,97,255],[0,101,99,255],[0,103,101,255],[0,105,103,255],[0,107,105,255],[0,109,107,255],[0,111,109,255],[0,113,111,255],[0,115,113,255],[0,117,115,255],[0,119,117,255],[0,121,119,255],[0,123,121,255],[0,125,123,255],[0,128,125,255],[1,126,127,255],[3,124,129,255],[5,122,131,255],[7,120,133,255],[9,118,135,255],[11,116,137,255],[13,114,139,255],[15,112,141,255],[17,110,143,255],[19,108,145,255],[21,106,147,255],[23,104,149,255],[25,102,151,255],[27,100,153,255],[29,98,155,255],[31,96,157,255],[33,94,159,255],[35,92,161,255],[37,90,163,255],[39,88,165,255],[41,86,167,255],[43,84,169,255],[45,82,171,255],[47,80,173,255],[49,78,175,255],[51,76,177,255],[53,74,179,255],[55,72,181,255],[57,70,183,255],[59,68,185,255],[61,66,187,255],[63,64,189,255],[65,63,191,255],[67,61,193,255],[69,59,195,255],[71,57,197,255],[73,55,199,255],[75,53,201,255],[77,51,203,255],[79,49,205,255],[81,47,207,255],[83,45,209,255],[85,43,211,255],[86,41,213,255],[88,39,215,255],[90,37,217,255],[92,35,219,255],[94,33,221,255],[96,31,223,255],[98,29,225,255],[100,27,227,255],[102,25,229,255],[104,23,231,255],[106,21,233,255],[108,19,235,255],[110,17,237,255],[112,15,239,255],[114,13,241,255],[116,11,243,255],[118,9,245,255],[120,7,247,255],[122,5,249,255],[124,3,251,255],[126,1,253,255],[128,0,255,255],[130,2,252,255],[132,4,248,255],[134,6,244,255],[136,8,240,255],[138,10,236,255],[140,12,232,255],[142,14,228,255],[144,16,224,255],[146,18,220,255],[148,20,216,255],[150,22,212,255],[152,24,208,255],[154,26,204,255],[156,28,200,255],[158,30,196,255],[160,32,192,255],[162,34,188,255],[164,36,184,255],[166,38,180,255],[168,40,176,255],[170,42,172,255],[171,44,168,255],[173,46,164,255],[175,48,160,255],[177,50,156,255],[179,52,152,255],[181,54,148,255],[183,56,144,255],[185,58,140,255],[187,60,136,255],[189,62,132,255],[191,64,128,255],[193,66,124,255],[195,68,120,255],[197,70,116,255],[199,72,112,255],[201,74,108,255],[203,76,104,255],[205,78,100,255],[207,80,96,255],[209,82,92,255],[211,84,88,255],[213,86,84,255],[215,88,80,255],[217,90,76,255],[219,92,72,255],[221,94,68,255],[223,96,64,255],[225,98,60,255],[227,100,56,255],[229,102,52,255],[231,104,48,255],[233,106,44,255],[235,108,40,255],[237,110,36,255],[239,112,32,255],[241,114,28,255],[243,116,24,255],[245,118,20,255],[247,120,16,255],[249,122,12,255],[251,124,8,255],[253,126,4,255],[255,128,0,255],[255,130,4,255],[255,132,8,255],[255,134,12,255],[255,136,16,255],[255,138,20,255],[255,140,24,255],[255,142,28,255],[255,144,32,255],[255,146,36,255],[255,148,40,255],[255,150,44,255],[255,152,48,255],[255,154,52,255],[255,156,56,255],[255,158,60,255],[255,160,64,255],[255,162,68,255],[255,164,72,255],[255,166,76,255],[255,168,80,255],[255,170,85,255],[255,172,89,255],[255,174,93,255],[255,176,97,255],[255,178,101,255],[255,180,105,255],[255,182,109,255],[255,184,113,255],[255,186,117,255],[255,188,121,255],[255,190,125,255],[255,192,129,255],[255,194,133,255],[255,196,137,255],[255,198,141,255],[255,200,145,255],[255,202,149,255],[255,204,153,255],[255,206,157,255],[255,208,161,255],[255,210,165,255],[255,212,170,255],[255,214,174,255],[255,216,178,255],[255,218,182,255],[255,220,186,255],[255,222,190,255],[255,224,194,255],[255,226,198,255],[255,228,202,255],[255,230,206,255],[255,232,210,255],[255,234,214,255],[255,236,218,255],[255,238,222,255],[255,240,226,255],[255,242,230,255],[255,244,234,255],[255,246,238,255],[255,248,242,255],[255,250,246,255],[255,252,250,255],[255,255,255,255]]},hotMetalBlue:{name:"Hot Metal Blue",numColors:256,colors:[[0,0,0,255],[0,0,2,255],[0,0,4,255],[0,0,6,255],[0,0,8,255],[0,0,10,255],[0,0,12,255],[0,0,14,255],[0,0,16,255],[0,0,17,255],[0,0,19,255],[0,0,21,255],[0,0,23,255],[0,0,25,255],[0,0,27,255],[0,0,29,255],[0,0,31,255],[0,0,33,255],[0,0,35,255],[0,0,37,255],[0,0,39,255],[0,0,41,255],[0,0,43,255],[0,0,45,255],[0,0,47,255],[0,0,49,255],[0,0,51,255],[0,0,53,255],[0,0,55,255],[0,0,57,255],[0,0,59,255],[0,0,61,255],[0,0,63,255],[0,0,65,255],[0,0,67,255],[0,0,69,255],[0,0,71,255],[0,0,73,255],[0,0,75,255],[0,0,77,255],[0,0,79,255],[0,0,81,255],[0,0,83,255],[0,0,84,255],[0,0,86,255],[0,0,88,255],[0,0,90,255],[0,0,92,255],[0,0,94,255],[0,0,96,255],[0,0,98,255],[0,0,100,255],[0,0,102,255],[0,0,104,255],[0,0,106,255],[0,0,108,255],[0,0,110,255],[0,0,112,255],[0,0,114,255],[0,0,116,255],[0,0,117,255],[0,0,119,255],[0,0,121,255],[0,0,123,255],[0,0,125,255],[0,0,127,255],[0,0,129,255],[0,0,131,255],[0,0,133,255],[0,0,135,255],[0,0,137,255],[0,0,139,255],[0,0,141,255],[0,0,143,255],[0,0,145,255],[0,0,147,255],[0,0,149,255],[0,0,151,255],[0,0,153,255],[0,0,155,255],[0,0,157,255],[0,0,159,255],[0,0,161,255],[0,0,163,255],[0,0,165,255],[0,0,167,255],[3,0,169,255],[6,0,171,255],[9,0,173,255],[12,0,175,255],[15,0,177,255],[18,0,179,255],[21,0,181,255],[24,0,183,255],[26,0,184,255],[29,0,186,255],[32,0,188,255],[35,0,190,255],[38,0,192,255],[41,0,194,255],[44,0,196,255],[47,0,198,255],[50,0,200,255],[52,0,197,255],[55,0,194,255],[57,0,191,255],[59,0,188,255],[62,0,185,255],[64,0,182,255],[66,0,179,255],[69,0,176,255],[71,0,174,255],[74,0,171,255],[76,0,168,255],[78,0,165,255],[81,0,162,255],[83,0,159,255],[85,0,156,255],[88,0,153,255],[90,0,150,255],[93,2,144,255],[96,4,138,255],[99,6,132,255],[102,8,126,255],[105,9,121,255],[108,11,115,255],[111,13,109,255],[114,15,103,255],[116,17,97,255],[119,19,91,255],[122,21,85,255],[125,23,79,255],[128,24,74,255],[131,26,68,255],[134,28,62,255],[137,30,56,255],[140,32,50,255],[143,34,47,255],[146,36,44,255],[149,38,41,255],[152,40,38,255],[155,41,35,255],[158,43,32,255],[161,45,29,255],[164,47,26,255],[166,49,24,255],[169,51,21,255],[172,53,18,255],[175,55,15,255],[178,56,12,255],[181,58,9,255],[184,60,6,255],[187,62,3,255],[190,64,0,255],[194,66,0,255],[198,68,0,255],[201,70,0,255],[205,72,0,255],[209,73,0,255],[213,75,0,255],[217,77,0,255],[221,79,0,255],[224,81,0,255],[228,83,0,255],[232,85,0,255],[236,87,0,255],[240,88,0,255],[244,90,0,255],[247,92,0,255],[251,94,0,255],[255,96,0,255],[255,98,3,255],[255,100,6,255],[255,102,9,255],[255,104,12,255],[255,105,15,255],[255,107,18,255],[255,109,21,255],[255,111,24,255],[255,113,26,255],[255,115,29,255],[255,117,32,255],[255,119,35,255],[255,120,38,255],[255,122,41,255],[255,124,44,255],[255,126,47,255],[255,128,50,255],[255,130,53,255],[255,132,56,255],[255,134,59,255],[255,136,62,255],[255,137,65,255],[255,139,68,255],[255,141,71,255],[255,143,74,255],[255,145,76,255],[255,147,79,255],[255,149,82,255],[255,151,85,255],[255,152,88,255],[255,154,91,255],[255,156,94,255],[255,158,97,255],[255,160,100,255],[255,162,103,255],[255,164,106,255],[255,166,109,255],[255,168,112,255],[255,169,115,255],[255,171,118,255],[255,173,121,255],[255,175,124,255],[255,177,126,255],[255,179,129,255],[255,181,132,255],[255,183,135,255],[255,184,138,255],[255,186,141,255],[255,188,144,255],[255,190,147,255],[255,192,150,255],[255,194,153,255],[255,196,156,255],[255,198,159,255],[255,200,162,255],[255,201,165,255],[255,203,168,255],[255,205,171,255],[255,207,174,255],[255,209,176,255],[255,211,179,255],[255,213,182,255],[255,215,185,255],[255,216,188,255],[255,218,191,255],[255,220,194,255],[255,222,197,255],[255,224,200,255],[255,226,203,255],[255,228,206,255],[255,229,210,255],[255,231,213,255],[255,233,216,255],[255,235,219,255],[255,237,223,255],[255,239,226,255],[255,240,229,255],[255,242,232,255],[255,244,236,255],[255,246,239,255],[255,248,242,255],[255,250,245,255],[255,251,249,255],[255,253,252,255],[255,255,255,255]]},pet20Step:{name:"PET 20 Step",numColors:256,colors:[[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[0,0,0,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[96,0,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,80,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[48,48,112,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[80,80,128,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[96,96,176,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[112,112,192,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[128,128,224,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,96,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[48,144,48,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[80,192,80,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[64,224,64,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[224,224,80,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,208,96,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,176,64,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[208,144,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[192,96,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[176,48,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,0,0,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255],[255,255,255,255]]},gray:{name:"Gray",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,1,1]]}},jet:{name:"Jet",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.35,0,0],[.66,1,1],[.89,1,1],[1,.5,.5]],green:[[0,0,0],[.125,0,0],[.375,1,1],[.64,1,1],[.91,0,0],[1,0,0]],blue:[[0,.5,.5],[.11,1,1],[.34,1,1],[.65,0,0],[1,0,0]]}},hsv:{name:"HSV",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[.15873,1,1],[.174603,.96875,.96875],[.333333,.03125,.03125],[.349206,0,0],[.666667,0,0],[.68254,.03125,.03125],[.84127,.96875,.96875],[.857143,1,1],[1,1,1]],green:[[0,0,0],[.15873,.9375,.9375],[.174603,1,1],[.507937,1,1],[.666667,.0625,.0625],[.68254,0,0],[1,0,0]],blue:[[0,0,0],[.333333,0,0],[.349206,.0625,.0625],[.507937,1,1],[.84127,1,1],[.857143,.9375,.9375],[1,.09375,.09375]]}},hot:{name:"Hot",numColors:256,gamma:1,segmentedData:{red:[[0,.0416,.0416],[.365079,1,1],[1,1,1]],green:[[0,0,0],[.365079,0,0],[.746032,1,1],[1,1,1]],blue:[[0,0,0],[.746032,0,0],[1,1,1]]}},cool:{name:"Cool",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,1,1],[1,0,0]],blue:[[0,1,1],[1,1,1]]}},spring:{name:"Spring",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,0,0]]}},summer:{name:"Summer",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,1,1]],green:[[0,.5,.5],[1,1,1]],blue:[[0,.4,.4],[1,.4,.4]]}},autumn:{name:"Autumn",numColors:256,gamma:1,segmentedData:{red:[[0,1,1],[1,1,1]],green:[[0,0,0],[1,1,1]],blue:[[0,0,0],[1,0,0]]}},winter:{name:"Winter",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[1,0,0]],green:[[0,0,0],[1,1,1]],blue:[[0,1,1],[1,.5,.5]]}},bone:{name:"Bone",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.746032,.652778,.652778],[1,1,1]],green:[[0,0,0],[.365079,.319444,.319444],[.746032,.777778,.777778],[1,1,1]],blue:[[0,0,0],[.365079,.444444,.444444],[1,1,1]]}},copper:{name:"Copper",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.809524,1,1],[1,1,1]],green:[[0,0,0],[1,.7812,.7812]],blue:[[0,0,0],[1,.4975,.4975]]}},spectral:{name:"Spectral",numColors:256,gamma:1,segmentedData:{red:[[0,0,0],[.05,.4667,.4667],[.1,.5333,.5333],[.15,0,0],[.2,0,0],[.25,0,0],[.3,0,0],[.35,0,0],[.4,0,0],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,.7333,.7333],[.7,.9333,.9333],[.75,1,1],[.8,1,1],[.85,1,1],[.9,.8667,.8667],[.95,.8,.8],[1,.8,.8]],green:[[0,0,0],[.05,0,0],[.1,0,0],[.15,0,0],[.2,0,0],[.25,.4667,.4667],[.3,.6,.6],[.35,.6667,.6667],[.4,.6667,.6667],[.45,.6,.6],[.5,.7333,.7333],[.55,.8667,.8667],[.6,1,1],[.65,1,1],[.7,.9333,.9333],[.75,.8,.8],[.8,.6,.6],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]],blue:[[0,0,0],[.05,.5333,.5333],[.1,.6,.6],[.15,.6667,.6667],[.2,.8667,.8667],[.25,.8667,.8667],[.3,.8667,.8667],[.35,.6667,.6667],[.4,.5333,.5333],[.45,0,0],[.5,0,0],[.55,0,0],[.6,0,0],[.65,0,0],[.7,0,0],[.75,0,0],[.8,0,0],[.85,0,0],[.9,0,0],[.95,0,0],[1,.8,.8]]}},coolwarm:{name:"CoolWarm",numColors:256,gamma:1,segmentedData:{red:[[0,.2298057,.2298057],[.03125,.26623388,.26623388],[.0625,.30386891,.30386891],[.09375,.342804478,.342804478],[.125,.38301334,.38301334],[.15625,.424369608,.424369608],[.1875,.46666708,.46666708],[.21875,.509635204,.509635204],[.25,.552953156,.552953156],[.28125,.596262162,.596262162],[.3125,.639176211,.639176211],[.34375,.681291281,.681291281],[.375,.722193294,.722193294],[.40625,.761464949,.761464949],[.4375,.798691636,.798691636],[.46875,.833466556,.833466556],[.5,.865395197,.865395197],[.53125,.897787179,.897787179],[.5625,.924127593,.924127593],[.59375,.944468518,.944468518],[.625,.958852946,.958852946],[.65625,.96732803,.96732803],[.6875,.969954137,.969954137],[.71875,.966811177,.966811177],[.75,.958003065,.958003065],[.78125,.943660866,.943660866],[.8125,.923944917,.923944917],[.84375,.89904617,.89904617],[.875,.869186849,.869186849],[.90625,.834620542,.834620542],[.9375,.795631745,.795631745],[.96875,.752534934,.752534934],[1,.705673158,.705673158]],green:[[0,.298717966,.298717966],[.03125,.353094838,.353094838],[.0625,.406535296,.406535296],[.09375,.458757618,.458757618],[.125,.50941904,.50941904],[.15625,.558148092,.558148092],[.1875,.604562568,.604562568],[.21875,.648280772,.648280772],[.25,.688929332,.688929332],[.28125,.726149107,.726149107],[.3125,.759599947,.759599947],[.34375,.788964712,.788964712],[.375,.813952739,.813952739],[.40625,.834302879,.834302879],[.4375,.849786142,.849786142],[.46875,.860207984,.860207984],[.5,.86541021,.86541021],[.53125,.848937047,.848937047],[.5625,.827384882,.827384882],[.59375,.800927443,.800927443],[.625,.769767752,.769767752],[.65625,.734132809,.734132809],[.6875,.694266682,.694266682],[.71875,.650421156,.650421156],[.75,.602842431,.602842431],[.78125,.551750968,.551750968],[.8125,.49730856,.49730856],[.84375,.439559467,.439559467],[.875,.378313092,.378313092],[.90625,.312874446,.312874446],[.9375,.24128379,.24128379],[.96875,.157246067,.157246067],[1,.01555616,.01555616]],blue:[[0,.753683153,.753683153],[.03125,.801466763,.801466763],[.0625,.84495867,.84495867],[.09375,.883725899,.883725899],[.125,.917387822,.917387822],[.15625,.945619588,.945619588],[.1875,.968154911,.968154911],[.21875,.98478814,.98478814],[.25,.995375608,.995375608],[.28125,.999836203,.999836203],[.3125,.998151185,.998151185],[.34375,.990363227,.990363227],[.375,.976574709,.976574709],[.40625,.956945269,.956945269],[.4375,.931688648,.931688648],[.46875,.901068838,.901068838],[.5,.865395561,.865395561],[.53125,.820880546,.820880546],[.5625,.774508472,.774508472],[.59375,.726736146,.726736146],[.625,.678007945,.678007945],[.65625,.628751763,.628751763],[.6875,.579375448,.579375448],[.71875,.530263762,.530263762],[.75,.481775914,.481775914],[.78125,.434243684,.434243684],[.8125,.387970225,.387970225],[.84375,.343229596,.343229596],[.875,.300267182,.300267182],[.90625,.259301199,.259301199],[.9375,.220525627,.220525627],[.96875,.184115123,.184115123],[1,.150232812,.150232812]]}},blues:{name:"Blues",numColors:256,gamma:1,segmentedData:{red:[[0,.9686274528503418,.9686274528503418],[.125,.8705882430076599,.8705882430076599],[.25,.7764706015586853,.7764706015586853],[.375,.6196078658103943,.6196078658103943],[.5,.41960784792900085,.41960784792900085],[.625,.25882354378700256,.25882354378700256],[.75,.12941177189350128,.12941177189350128],[.875,.0313725508749485,.0313725508749485],[1,.0313725508749485,.0313725508749485]],green:[[0,.9843137264251709,.9843137264251709],[.125,.9215686321258545,.9215686321258545],[.25,.8588235378265381,.8588235378265381],[.375,.7921568751335144,.7921568751335144],[.5,.6823529601097107,.6823529601097107],[.625,.572549045085907,.572549045085907],[.75,.4431372582912445,.4431372582912445],[.875,.3176470696926117,.3176470696926117],[1,.1882352977991104,.1882352977991104]],blue:[[0,1,1],[.125,.9686274528503418,.9686274528503418],[.25,.9372549057006836,.9372549057006836],[.375,.8823529481887817,.8823529481887817],[.5,.8392156958580017,.8392156958580017],[.625,.7764706015586853,.7764706015586853],[.75,.7098039388656616,.7098039388656616],[.875,.6117647290229797,.6117647290229797],[1,.41960784792900085,.41960784792900085]]}}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){if(e>1)throw new Error("HSVToRGB expects hue < 1");var r=[];if(0===t)return r[0]=n,r[1]=n,r[2]=n,r;var a=Math.floor(6*e),i=6*e-a,o=n*(1-t),s=n*(1-t*i),l=n*(1-t*(1-i));switch(a){case 0:case 6:r[0]=n,r[1]=l,r[2]=o;break;case 1:r[0]=s,r[1]=n,r[2]=o;break;case 2:r[0]=o,r[1]=n,r[2]=l;break;case 3:r[0]=o,r[1]=s,r[2]=n;break;case 4:r[0]=l,r[1]=o,r[2]=n;break;case 5:r[0]=n,r[1]=o,r[2]=s;break}return r}function i(e,t){var n=void 0;return n=e<t.Range[0]?t.MaxIndex+s+1.5:e>t.Range[1]?t.MaxIndex+l+1.5:(e+t.Shift)*t.Scale,Math.floor(n)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=0,l=1,u=2,d=function(){function e(){r(this,e),this.NumberOfColors=256,this.Ramp="linear",this.TableRange=[0,255],this.HueRange=[0,.66667],this.SaturationRange=[1,1],this.ValueRange=[1,1],this.AlphaRange=[1,1],this.NaNColor=[128,0,0,255],this.BelowRangeColor=[0,0,0,255],this.UseBelowRangeColor=!0,this.AboveRangeColor=[255,255,255,255],this.UseAboveRangeColor=!0,this.InputRange=[0,255],this.Table=[]}return o(e,[{key:"setNumberOfTableValues",value:function e(t){this.NumberOfColors=t}},{key:"setRamp",value:function e(t){this.Ramp=t}},{key:"setTableRange",value:function e(t,n){this.TableRange[0]=t,this.TableRange[1]=n}},{key:"setHueRange",value:function e(t,n){this.HueRange[0]=t,this.HueRange[1]=n}},{key:"setSaturationRange",value:function e(t,n){this.SaturationRange[0]=t,this.SaturationRange[1]=n}},{key:"setValueRange",value:function e(t,n){this.ValueRange[0]=t,this.ValueRange[1]=n}},{key:"setRange",value:function e(t,n){this.InputRange[0]=t,this.InputRange[1]=n}},{key:"setAlphaRange",value:function e(t,n){this.AlphaRange[0]=t,this.AlphaRange[1]=n}},{key:"getColor",value:function e(t){return this.mapValue(t)}},{key:"build",value:function e(t){if(!(this.Table.length>1)||t){this.Table=[];var n=this.NumberOfColors-1,r=void 0,i=void 0,o=void 0,s=void 0;n?(r=(this.HueRange[1]-this.HueRange[0])/n,i=(this.SaturationRange[1]-this.SaturationRange[0])/n,o=(this.ValueRange[1]-this.ValueRange[0])/n,s=(this.AlphaRange[1]-this.AlphaRange[0])/n):r=i=o=s=0;for(var l=0;l<=n;l++){var u=this.HueRange[0]+l*r,d=this.SaturationRange[0]+l*i,c=this.ValueRange[0]+l*o,f=this.AlphaRange[0]+l*s,h=a(u,d,c),m=[];switch(this.Ramp){case"scurve":m[0]=Math.floor(127.5*(1+Math.cos((1-h[0])*Math.PI))),m[1]=Math.floor(127.5*(1+Math.cos((1-h[1])*Math.PI))),m[2]=Math.floor(127.5*(1+Math.cos((1-h[2])*Math.PI))),m[3]=Math.floor(255*f);break;case"linear":m[0]=Math.floor(255*h[0]+.5),m[1]=Math.floor(255*h[1]+.5),m[2]=Math.floor(255*h[2]+.5),m[3]=Math.floor(255*f+.5);break;case"sqrt":m[0]=Math.floor(255*Math.sqrt(h[0])+.5),m[1]=Math.floor(255*Math.sqrt(h[1])+.5),m[2]=Math.floor(255*Math.sqrt(h[2])+.5),m[3]=Math.floor(255*Math.sqrt(f)+.5);break;default:throw new Error("Invalid Ramp value ("+this.Ramp+")")}this.Table.push(m)}this.buildSpecialColors()}}},{key:"buildSpecialColors",value:function e(){var t=this.NumberOfColors,n=t+s,r=t+l,a=t+2;this.UseBelowRangeColor||0===t?this.Table[n]=this.BelowRangeColor:this.Table[n]=this.Table[0],this.UseAboveRangeColor||0===t?this.Table[r]=this.AboveRangeColor:this.Table[r]=this.Table[t-1],this.Table[a]=this.NaNColor}},{key:"mapValue",value:function e(t){var n=this.getIndex(t);if(n<0)return this.NaNColor;if(0===n){if(this.UseBelowRangeColor&&t<this.TableRange[0])return this.BelowRangeColor}else if(n===this.NumberOfColors-1&&this.UseAboveRangeColor&&t>this.TableRange[1])return this.AboveRangeColor;return this.Table[n]}},{key:"getIndex",value:function e(t){var n={};if(n.Range=[],n.MaxIndex=this.NumberOfColors-1,n.Shift=-this.TableRange[0],this.TableRange[1]<=this.TableRange[0]?n.Scale=Number.MAX_VALUE:n.Scale=n.MaxIndex/(this.TableRange[1]-this.TableRange[0]),n.Range[0]=this.TableRange[0],n.Range[1]=this.TableRange[1],isNaN(t))return-1;var r=i(t,n);return r===this.NumberOfColors+s?r=0:r===this.NumberOfColors+l&&(r=this.NumberOfColors-1),r}},{key:"setTableValue",value:function e(t,n){if(5===arguments.length&&(n=Array.prototype.slice.call(arguments,1)),t<0)throw new Error("Can't set the table value for negative index ("+t+")");t>=this.NumberOfColors&&new Error("Index "+t+" is greater than the number of colors "+this.NumberOfColors),this.Table[t]=n,0!==t&&t!==this.NumberOfColors-1||this.buildSpecialColors()}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-r;var o=i.length,s=e.minPixelValue,l=0,u=0,d=void 0;if(r=(0,a.default)(),i instanceof Int16Array)if(s<0)for(;u<o;)d=t[i[u++]+-s],n[l++]=d,n[l++]=d,n[l++]=d,n[l++]=255;else for(;u<o;)d=t[i[u++]],n[l++]=d,n[l++]=d,n[l++]=d,n[l++]=255;else if(i instanceof Uint16Array)for(;u<o;)d=t[i[u++]],n[l++]=d,n[l++]=d,n[l++]=d,n[l++]=255;else if(s<0)for(;u<o;)d=t[i[u++]+-s],n[l++]=d,n[l++]=d,n[l++]=d,n[l++]=255;else for(;u<o;)d=t[i[u++]],n[l++]=d,n[l++]=d,n[l++]=d,n[l++]=255;e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-r};var a=r(n(1))},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.Transform=function(){function e(){r(this,e),this.reset()}return a(e,[{key:"reset",value:function e(){this.m=[1,0,0,1,0,0]}},{key:"clone",value:function t(){var n=new e;return n.m[0]=this.m[0],n.m[1]=this.m[1],n.m[2]=this.m[2],n.m[3]=this.m[3],n.m[4]=this.m[4],n.m[5]=this.m[5],n}},{key:"multiply",value:function e(t){var n=this.m[0]*t.m[0]+this.m[2]*t.m[1],r=this.m[1]*t.m[0]+this.m[3]*t.m[1],a=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=n,this.m[1]=r,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=s}},{key:"invert",value:function e(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,r=-this.m[1]*t,a=-this.m[2]*t,i=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=n,this.m[1]=r,this.m[2]=a,this.m[3]=i,this.m[4]=o,this.m[5]=s}},{key:"rotate",value:function e(t){var n=Math.cos(t),r=Math.sin(t),a=this.m[0]*n+this.m[2]*r,i=this.m[1]*n+this.m[3]*r,o=this.m[0]*-r+this.m[2]*n,s=this.m[1]*-r+this.m[3]*n;this.m[0]=a,this.m[1]=i,this.m[2]=o,this.m[3]=s}},{key:"translate",value:function e(t,n){this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n}},{key:"scale",value:function e(t,n){this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n}},{key:"transformPoint",value:function e(t,n){var r=t,a=n;return t=r*this.m[0]+a*this.m[2]+this.m[4],n=r*this.m[1]+a*this.m[3]+this.m[5],{x:t,y:n}}}]),e}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return void 0!==e.cachedLut&&e.cachedLut.windowCenter===t.voi.windowCenter&&e.cachedLut.windowWidth===t.voi.windowWidth&&(0,a.default)(e.cachedLut.modalityLUT,t.modalityLUT)&&(0,a.default)(e.cachedLut.voiLUT,t.voiLUT)&&e.cachedLut.invert===t.invert&&!0!==n?e.cachedLut.lutArray:((0,i.default)(e,t.voi.windowWidth,t.voi.windowCenter,t.invert,t.modalityLUT,t.voiLUT),e.cachedLut.windowWidth=t.voi.windowWidth,e.cachedLut.windowCenter=t.voi.windowCenter,e.cachedLut.invert=t.invert,e.cachedLut.voiLUT=t.voiLUT,e.cachedLut.modalityLUT=t.modalityLUT,e.cachedLut.lutArray)};var a=r(n(44)),i=r(n(18))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return{maximumSizeInBytes:p,cacheSizeInBytes:g,numberOfImagesCached:m.length}}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(g<=p)){for(m.sort(e);g>p;){var t=m[m.length-1];g-=t.sizeInBytes,delete h[t.imageId],m.pop(),(0,f.default)(c.default,"cornerstonewebgltextureremoved",{imageId:t.imageId})}var n=a();(0,f.default)(c.default,"cornerstonewebgltexturecachefull",n)}}function o(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");p=e,i()}function s(e,t){var n=e.imageId;if(void 0===e)throw new Error("putImageTexture: image must not be undefined");if(void 0===n)throw new Error("putImageTexture: imageId must not be undefined");if(void 0===t)throw new Error("putImageTexture: imageTexture must not be undefined");if(!0===Object.prototype.hasOwnProperty.call(h,n))throw new Error("putImageTexture: imageId already in cache");var r={imageId:n,imageTexture:t,timeStamp:new Date,sizeInBytes:t.sizeInBytes};if(h[n]=r,m.push(r),void 0===t.sizeInBytes)throw new Error("putImageTexture: imageTexture.sizeInBytes must not be undefined");if(void 0===t.sizeInBytes.toFixed)throw new Error("putImageTexture: imageTexture.sizeInBytes is not a number");g+=r.sizeInBytes,i()}function l(e){if(void 0===e)throw new Error("getImageTexture: imageId must not be undefined");var t=h[e];if(void 0!==t)return t.timeStamp=new Date,t.imageTexture}function u(e){if(void 0===e)throw new Error("removeImageTexture: imageId must not be undefined");var t=h[e];if(void 0===t)throw new Error("removeImageTexture: imageId must not be undefined");return m.splice(m.indexOf(t),1),g-=t.sizeInBytes,delete h[e],t.imageTexture}function d(){for(;m.length>0;){var e=m.pop();delete h[e.imageId]}g=0}Object.defineProperty(t,"__esModule",{value:!0});var c=r(n(16)),f=r(n(2)),h={},m=[],p=268435456,g=0;t.default={purgeCache:d,getImageTexture:l,putImageTexture:s,removeImageTexture:u,setMaximumSizeBytes:o}},function(e,t,n){"use strict";function r(e,t,n){var r=e.createShader(n);if(e.shaderSource(r,t),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)&&!e.isContextLost()){var a=e.getShaderInfoLog(r);console.error("Could not compile shader:\n"+a)}return r}function a(e,t,n){var r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS)&&!e.isContextLost()){var a=e.getProgramInfoLog(r);console.error("WebGL program filed to link:\n"+a)}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return a(e,r(e,t,e.VERTEX_SHADER),r(e,n,e.FRAGMENT_SHADER))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(void 0===e)throw new Error("renderWebImage: enabledElement parameter must not be undefined");var n=e.image;if(void 0===n)throw new Error("renderWebImage: image must be loaded before it can be drawn");if(e.viewport.voi.windowWidth===e.image.windowWidth&&e.viewport.voi.windowCenter===e.image.windowCenter&&!1===e.viewport.invert){var r=e.canvas.getContext("2d");r.setTransform(1,0,0,1,0,0),r.fillStyle="black",r.fillRect(0,0,e.canvas.width,e.canvas.height),r.imageSmoothingEnabled=!e.viewport.pixelReplication,r.mozImageSmoothingEnabled=r.imageSmoothingEnabled,(0,i.default)(e,r),r.drawImage(n.getImage(),0,0,n.width,n.height,0,0,n.width,n.height)}else(0,o.renderColorImage)(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.renderWebImage=a;var i=r(n(4)),o=n(8)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){t.width!==e.clientWidth&&(t.width=e.clientWidth,t.style.width=e.clientWidth+"px"),t.height!==e.clientHeight&&(t.height=e.clientHeight,t.style.height=e.clientHeight+"px")}function i(e,t,n){var r=e.viewport.scale,a=(0,c.default)(e),i=Math.round(a.width*r),o=Math.round(a.height*r),s=e.viewport.translation.x,l=e.viewport.translation.y;return i===t&&o<=n||i<=t&&o===n&&0===s&&0===l}function o(e,t,n){var r=e.viewport.scale,a=e.canvas.width/t,i=e.canvas.height/n,o=Math.sqrt(a*i);e.viewport.scale=o*r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,s.getEnabledElement)(e),r=n.canvas.width,c=n.canvas.height;a(e,n.canvas);var f={element:e};(0,d.default)(e,"cornerstoneelementresized",f),void 0!==n.image&&(!0!==t?i(n,r,c)?(0,l.default)(e):(o(n,r,c),(0,u.default)(e)):(0,l.default)(e))};var s=n(0),l=r(n(37)),u=r(n(5)),d=r(n(2)),c=r(n(38))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e),n=(0,o.default)(t),r=t.canvas.height/n.height,s=t.canvas.width/n.width;t.viewport.scale=Math.min(s,r),t.viewport.translation.x=0,t.viewport.translation.y=0,(0,i.default)(e)};var a=n(0),i=r(n(5)),o=r(n(38))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return 0===e.viewport.rotation||180===e.viewport.rotation?{width:e.image.width,height:e.image.height}:{width:e.image.height,height:e.image.width}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){if(void 0===e)throw new Error("getStoredPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);for(var o=(0,r.getEnabledElement)(e),s=[],l=0,u=o.image.getPixelData(),d=0;d<i;d++)for(var c=0;c<a;c++){var f=(d+n)*o.image.columns+(c+t);s[l++]=u[f]}return s};var r=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw new Error("setMaximumSizeBytes: parameter numBytes must not be undefined");if(void 0===e.toFixed)throw new Error("setMaximumSizeBytes: parameter numBytes must be a number");p=e,(0,m.default)(h.default,"cornerstoneimagecachemaximumsizechanged"),i()}function i(){function e(e,t){return e.timeStamp>t.timeStamp?-1:e.timeStamp<t.timeStamp?1:0}if(!(g<=p)){for(y.sort(e);g>p;){var t=y[y.length-1].imageId;l(t),(0,m.default)(h.default,"cornerstoneimagecachepromiseremoved",{imageId:t})}var n=u();(0,m.default)(h.default,"cornerstoneimagecachefull",n)}}function o(e,t){if(void 0===e)throw new Error("putImageLoadObject: imageId must not be undefined");if(void 0===t.promise)throw new Error("putImageLoadObject: imageLoadObject.promise must not be undefined");if(!0===v.hasOwnProperty(e))throw new Error("putImageLoadObject: imageId already in cache");if(t.cancelFn&&"function"!=typeof t.cancelFn)throw new Error("putImageLoadObject: imageLoadObject.cancelFn must be a function");var n={loaded:!1,imageId:e,sharedCacheKey:void 0,imageLoadObject:t,timeStamp:Date.now(),sizeInBytes:0};v[e]=n,y.push(n),t.promise.then(function(e){if(-1!==y.indexOf(n)){if(n.loaded=!0,n.image=e,void 0===e.sizeInBytes)throw new Error("putImageLoadObject: image.sizeInBytes must not be undefined");if(void 0===e.sizeInBytes.toFixed)throw new Error("putImageLoadObject: image.sizeInBytes is not a number");n.sizeInBytes=e.sizeInBytes,g+=n.sizeInBytes;var t={action:"addImage",image:n};(0,m.default)(h.default,"cornerstoneimagecachechanged",t),n.sharedCacheKey=e.sharedCacheKey,i()}},function(){var t=v[e];y.splice(y.indexOf(t),1),delete v[e]})}function s(e){if(void 0===e)throw new Error("getImageLoadObject: imageId must not be undefined");var t=v[e];if(void 0!==t)return t.timeStamp=Date.now(),t.imageLoadObject}function l(e){if(void 0===e)throw new Error("removeImageLoadObject: imageId must not be undefined");var t=v[e];if(void 0===t)throw new Error("removeImageLoadObject: imageId was not present in imageCache");y.splice(y.indexOf(t),1),g-=t.sizeInBytes;var n={action:"deleteImage",image:t};(0,m.default)(h.default,"cornerstoneimagecachechanged",n),d(t.imageLoadObject),delete v[e]}function u(){return{maximumSizeInBytes:p,cacheSizeInBytes:g,numberOfImagesCached:y.length}}function d(e){e.promise.then(function(){e.decache&&e.decache()},function(){e.decache&&e.decache()})}function c(){for(;y.length>0;)l(y[0].imageId)}function f(e,t){var n=v[e];n&&n.imageLoadObject.promise.then(function(e){var r=t-e.sizeInBytes;e.sizeInBytes=t,n.sizeInBytes=t,g+=r;var a={action:"changeImageSize",image:e};(0,m.default)(h.default,"cornerstoneimagecachechanged",a)})}Object.defineProperty(t,"__esModule",{value:!0}),t.cachedImages=void 0,t.setMaximumSizeBytes=a,t.putImageLoadObject=o,t.getImageLoadObject=s,t.removeImageLoadObject=l,t.getCacheInfo=u,t.purgeCache=c,t.changeImageIdCacheSize=f;var h=r(n(16)),m=r(n(2)),p=1073741824,g=0,v={},y=t.cachedImages=[];t.default={imageCache:v,cachedImages:y,setMaximumSizeBytes:a,putImageLoadObject:o,getImageLoadObject:s,removeImageLoadObject:l,getCacheInfo:u,purgeCache:c,changeImageIdCacheSize:f}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n=e.minPixelValue,r=0,a=0,o=e.width*e.height,s=e.origPixelData||e.getPixelData(),l=new Uint8Array(4*o),u=void 0,d=void 0;if(e.color=!0,e.falseColor=!0,e.origPixelData=s,t instanceof i.default.LookupTable)for(t.build();a<o;)u=s[a++],d=t.mapValue(u),l[r++]=d[0],l[r++]=d[1],l[r++]=d[2],l[r++]=d[3];else if(n<0)for(;a<o;)u=s[a++],l[r++]=t[u+-n][0],l[r++]=t[u+-n][1],l[r++]=t[u+-n][2],l[r++]=t[u+-n][3];else for(;a<o;)u=s[a++],l[r++]=t[u][0],l[r++]=t[u][1],l[r++]=t[u][2],l[r++]=t[u][3];e.rgba=!0,e.cachedLut=void 0,e.render=void 0,e.slope=1,e.intercept=0,e.minPixelValue=0,e.maxPixelValue=255,e.windowWidth=255,e.windowCenter=128,e.getPixelData=function(){return l}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(7))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6);Object.defineProperty(t,"drawImage",{enumerable:!0,get:function e(){return r(a).default}});var i=n(18);Object.defineProperty(t,"generateLut",{enumerable:!0,get:function e(){return r(i).default}});var o=n(3);Object.defineProperty(t,"getDefaultViewport",{enumerable:!0,get:function e(){return r(o).default}});var s=n(19);Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function e(){return r(s).default}});var l=n(20);Object.defineProperty(t,"storedPixelDataToCanvasImageData",{enumerable:!0,get:function e(){return r(l).default}});var u=n(21);Object.defineProperty(t,"storedColorPixelDataToCanvasImageData",{enumerable:!0,get:function e(){return r(u).default}});var d=n(22);Object.defineProperty(t,"storedPixelDataToCanvasImageDataColorLUT",{enumerable:!0,get:function e(){return r(d).default}});var c=n(23);Object.defineProperty(t,"storedPixelDataToCanvasImageDataPseudocolorLUT",{enumerable:!0,get:function e(){return r(c).default}});var f=n(43);Object.defineProperty(t,"internal",{enumerable:!0,get:function e(){return r(f).default}});var h=n(10);Object.defineProperty(t,"renderLabelMapImage",{enumerable:!0,get:function e(){return h.renderLabelMapImage}});var m=n(14);Object.defineProperty(t,"renderPseudoColorImage",{enumerable:!0,get:function e(){return m.renderPseudoColorImage}});var p=n(8);Object.defineProperty(t,"renderColorImage",{enumerable:!0,get:function e(){return p.renderColorImage}});var g=n(17);Object.defineProperty(t,"renderGrayscaleImage",{enumerable:!0,get:function e(){return g.renderGrayscaleImage}});var v=n(35);Object.defineProperty(t,"renderWebImage",{enumerable:!0,get:function e(){return v.renderWebImage}});var y=n(55);Object.defineProperty(t,"canvasToPixel",{enumerable:!0,get:function e(){return r(y).default}});var b=n(56);Object.defineProperty(t,"disable",{enumerable:!0,get:function e(){return r(b).default}});var _=n(57);Object.defineProperty(t,"displayImage",{enumerable:!0,get:function e(){return r(_).default}});var w=n(59);Object.defineProperty(t,"draw",{enumerable:!0,get:function e(){return r(w).default}});var E=n(60);Object.defineProperty(t,"drawInvalidated",{enumerable:!0,get:function e(){return r(E).default}});var x=n(61);Object.defineProperty(t,"enable",{enumerable:!0,get:function e(){return r(x).default}});var T=n(65);Object.defineProperty(t,"getElementData",{enumerable:!0,get:function e(){return T.getElementData}}),Object.defineProperty(t,"removeElementData",{enumerable:!0,get:function e(){return T.removeElementData}});var P=n(0);Object.defineProperty(t,"getEnabledElement",{enumerable:!0,get:function e(){return P.getEnabledElement}}),Object.defineProperty(t,"addEnabledElement",{enumerable:!0,get:function e(){return P.addEnabledElement}}),Object.defineProperty(t,"getEnabledElementsByImageId",{enumerable:!0,get:function e(){return P.getEnabledElementsByImageId}}),Object.defineProperty(t,"getEnabledElements",{enumerable:!0,get:function e(){return P.getEnabledElements}});var j=n(25);Object.defineProperty(t,"addLayer",{enumerable:!0,get:function e(){return j.addLayer}}),Object.defineProperty(t,"removeLayer",{enumerable:!0,get:function e(){return j.removeLayer}}),Object.defineProperty(t,"getLayer",{enumerable:!0,get:function e(){return j.getLayer}}),Object.defineProperty(t,"getLayers",{enumerable:!0,get:function e(){return j.getLayers}}),Object.defineProperty(t,"getVisibleLayers",{enumerable:!0,get:function e(){return j.getVisibleLayers}}),Object.defineProperty(t,"setActiveLayer",{enumerable:!0,get:function e(){return j.setActiveLayer}}),Object.defineProperty(t,"getActiveLayer",{enumerable:!0,get:function e(){return j.getActiveLayer}}),Object.defineProperty(t,"setLayerImage",{enumerable:!0,get:function e(){return j.setLayerImage}});var S=n(37);Object.defineProperty(t,"fitToWindow",{enumerable:!0,get:function e(){return r(S).default}});var M=n(66);Object.defineProperty(t,"getDefaultViewportForImage",{enumerable:!0,get:function e(){return r(M).default}});var O=n(67);Object.defineProperty(t,"getImage",{enumerable:!0,get:function e(){return r(O).default}});var I=n(68);Object.defineProperty(t,"getPixels",{enumerable:!0,get:function e(){return r(I).default}});var C=n(39);Object.defineProperty(t,"getStoredPixels",{enumerable:!0,get:function e(){return r(C).default}});var L=n(69);Object.defineProperty(t,"getViewport",{enumerable:!0,get:function e(){return r(L).default}});var k=n(70);Object.defineProperty(t,"loadImage",{enumerable:!0,get:function e(){return k.loadImage}}),Object.defineProperty(t,"loadAndCacheImage",{enumerable:!0,get:function e(){return k.loadAndCacheImage}}),Object.defineProperty(t,"registerImageLoader",{enumerable:!0,get:function e(){return k.registerImageLoader}}),Object.defineProperty(t,"registerUnknownImageLoader",{enumerable:!0,get:function e(){return k.registerUnknownImageLoader}});var A=n(71);Object.defineProperty(t,"invalidate",{enumerable:!0,get:function e(){return r(A).default}});var D=n(72);Object.defineProperty(t,"invalidateImageId",{enumerable:!0,get:function e(){return r(D).default}});var R=n(73);Object.defineProperty(t,"pageToPixel",{enumerable:!0,get:function e(){return r(R).default}});var U=n(74);Object.defineProperty(t,"pixelToCanvas",{enumerable:!0,get:function e(){return r(U).default}});var B=n(75);Object.defineProperty(t,"reset",{enumerable:!0,get:function e(){return r(B).default}});var N=n(36);Object.defineProperty(t,"resize",{enumerable:!0,get:function e(){return r(N).default}});var F=n(4);Object.defineProperty(t,"setToPixelCoordinateSystem",{enumerable:!0,get:function e(){return r(F).default}});var z=n(76);Object.defineProperty(t,"setViewport",{enumerable:!0,get:function e(){return r(z).default}});var H=n(5);Object.defineProperty(t,"updateImage",{enumerable:!0,get:function e(){return r(H).default}});var V=n(41);Object.defineProperty(t,"pixelDataToFalseColorData",{enumerable:!0,get:function e(){return r(V).default}});var W=n(77);Object.defineProperty(t,"rendering",{enumerable:!0,get:function e(){return r(W).default}});var q=n(40);Object.defineProperty(t,"imageCache",{enumerable:!0,get:function e(){return r(q).default}});var G=n(78);Object.defineProperty(t,"metaData",{enumerable:!0,get:function e(){return r(G).default}});var Z=n(15);Object.defineProperty(t,"webGL",{enumerable:!0,get:function e(){return r(Z).default}});var Y=n(7);Object.defineProperty(t,"colors",{enumerable:!0,get:function e(){return r(Y).default}});var K=n(79);Object.defineProperty(t,"convertImageToFalseColorImage",{enumerable:!0,get:function e(){return K.convertImageToFalseColorImage}}),Object.defineProperty(t,"convertToFalseColorImage",{enumerable:!0,get:function e(){return K.convertToFalseColorImage}}),Object.defineProperty(t,"restoreImage",{enumerable:!0,get:function e(){return K.restoreImage}});var X=n(16);Object.defineProperty(t,"events",{enumerable:!0,get:function e(){return r(X).default}});var J=n(2);Object.defineProperty(t,"triggerEvent",{enumerable:!0,get:function e(){return r(J).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(6)),i=r(n(18)),o=r(n(3)),s=r(n(19)),l=r(n(20)),u=r(n(30)),d=r(n(21)),c=r(n(22)),f=r(n(23)),h=r(n(9)),m=r(n(24)),p=n(31);t.default={drawImage:a.default,generateLut:i.default,getDefaultViewport:o.default,requestAnimationFrame:s.default,storedPixelDataToCanvasImageData:l.default,storedPixelDataToCanvasImageDataRGBA:u.default,storedPixelDataToCanvasImageDataColorLUT:c.default,storedPixelDataToCanvasImageDataPseudocolorLUT:f.default,storedColorPixelDataToCanvasImageData:d.default,getTransform:h.default,calculateTransform:m.default,Transform:p.Transform}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return!e&&!t||!(!e||!t)&&e.id===t.id}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){var o=e.maxPixelValue,s=e.minPixelValue,l=Math.min(s,0);if(void 0===e.cachedLut){var u=o-l+1;e.cachedLut={},e.cachedLut.lutArray=new Uint8ClampedArray(u)}var d=e.cachedLut.lutArray,c=(0,a.default)(t,n,i);if(!0===r)for(var f=s;f<=o;f++)d[f+-l]=255-c(f);else for(var h=s;h<=o;h++)d[h+-l]=c(h);return d};var a=r(n(27))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.default)(),i=e.getPixelData();e.stats.lastGetPixelDataTime=(0,a.default)()-r;var o=e.minPixelValue,s=0,l=0,u=i.length;if(r=(0,a.default)(),o<0)for(;l<u;)n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s++]=t[i[l++]+-o],n[s++]=i[l++];else for(;l<u;)n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s++]=t[i[l++]],n[s++]=i[l++];e.stats.lastStoredPixelDataToCanvasImageDataTime=(0,a.default)()-r};var a=r(n(1))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return x}function i(){for(var e in b.shaders){var t=b.shaders[e];t.attributes={},t.uniforms={},t.vert=_.vertexShader,t.program=(0,E.default)(T,t.vert,t.frag),t.attributes.texCoordLocation=T.getAttribLocation(t.program,"a_texCoord"),T.enableVertexAttribArray(t.attributes.texCoordLocation),t.attributes.positionLocation=T.getAttribLocation(t.program,"a_position"),T.enableVertexAttribArray(t.attributes.positionLocation),t.uniforms.resolutionLocation=T.getUniformLocation(t.program,"u_resolution")}}function o(){!0!==S&&d(x)&&(p(),i(),t.isWebGLInitialized=S=!0)}function s(e,t,n){e.bufferData(e.ARRAY_BUFFER,new Float32Array([t,n,0,n,t,0,0,0]),e.STATIC_DRAW)}function l(e){e.preventDefault(),console.warn("WebGL Context Lost!")}function u(e){e.preventDefault(),t.isWebGLInitialized=S=!1,w.default.purgeCache(),o()}function d(e){T=null;try{var t={preserveDrawingBuffer:!0};T=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),e.removeEventListener("webglcontextlost",l,!1),e.addEventListener("webglcontextlost",l,!1),e.removeEventListener("webglcontextrestored",u,!1),e.addEventListener("webglcontextrestored",u,!1)}catch(e){throw new Error("Error creating WebGL context")}return T||(console.error("Unable to initialize WebGL. Your browser may not support it."),T=null),T}function c(e){if(e.color)return"rgb";var t="int";return e.minPixelValue>=0&&(t="u"+t),e.maxPixelValue>255?t+="16":t+="8",t}function f(e){var t=c(e);return b.shaders.hasOwnProperty(t)?b.shaders[t]:b.shaders.rgb}function h(e){var t={uint8:T.LUMINANCE,int8:T.LUMINANCE_ALPHA,uint16:T.LUMINANCE_ALPHA,int16:T.RGB,rgb:T.RGB},n={int8:1,uint16:2,int16:3,rgb:3},r=c(e),a=t[r],i=T.createTexture();T.bindTexture(T.TEXTURE_2D,i),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MIN_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_MAG_FILTER,T.NEAREST),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_S,T.CLAMP_TO_EDGE),T.texParameteri(T.TEXTURE_2D,T.TEXTURE_WRAP_T,T.CLAMP_TO_EDGE),T.pixelStorei(T.UNPACK_ALIGNMENT,1);var o=b.dataUtilities[r].storedPixelDataToImageData(e,e.width,e.height);return T.texImage2D(T.TEXTURE_2D,0,a,e.width,e.height,0,a,T.UNSIGNED_BYTE,o),{texture:i,sizeInBytes:e.width*e.height*n[r]}}function m(e){var t=w.default.getImageTexture(e.imageId);return t||(t=h(e),w.default.putImageTexture(e,t)),t.texture}function p(){j=T.createBuffer(),T.bindBuffer(T.ARRAY_BUFFER,j),T.bufferData(T.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),T.STATIC_DRAW),P=T.createBuffer(),T.bindBuffer(T.ARRAY_BUFFER,P),T.bufferData(T.ARRAY_BUFFER,new Float32Array([1,1,0,1,1,0,0,0]),T.STATIC_DRAW)}function g(e,t,n,r,a){T.clearColor(1,0,0,1),T.viewport(0,0,r,a),T.clear(T.COLOR_BUFFER_BIT|T.DEPTH_BUFFER_BIT),T.useProgram(e.program),T.bindBuffer(T.ARRAY_BUFFER,P),T.vertexAttribPointer(e.attributes.texCoordLocation,2,T.FLOAT,!1,0,0),T.bindBuffer(T.ARRAY_BUFFER,j),T.vertexAttribPointer(e.attributes.positionLocation,2,T.FLOAT,!1,0,0);for(var i in t){var o=T.getUniformLocation(e.program,i);if(o){var l=t[i],u=l.type,d=l.value;"i"===u?T.uniform1i(o,d):"f"===u?T.uniform1f(o,d):"2f"===u&&T.uniform2f(o,d[0],d[1])}}s(T,r,a),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,n),T.drawArrays(T.TRIANGLE_STRIP,0,4)}function v(e){var t=e.image;x.width=t.width,x.height=t.height;var n=e.viewport,r=f(t),a=m(t);return g(r,{u_resolution:{type:"2f",value:[t.width,t.height]},wc:{type:"f",value:n.voi.windowCenter},ww:{type:"f",value:n.voi.windowWidth},slope:{type:"f",value:t.slope},intercept:{type:"f",value:t.intercept},minPixelValue:{type:"f",value:t.minPixelValue},invert:{type:"i",value:n.invert?1:0}},a,t.width,t.height),x}function y(){var e={failIfMajorPerformanceCaveat:!0};try{var t=document.createElement("canvas");return Boolean(window.WebGLRenderingContext)&&(t.getContext("webgl",e)||t.getContext("experimental-webgl",e))}catch(e){return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWebGLInitialized=void 0,t.getRenderCanvas=a,t.initRenderer=o,t.render=v,t.isWebGLAvailable=y;var b=n(48),_=n(54),w=r(n(33)),E=r(n(34)),x=document.createElement("canvas"),T=void 0,P=void 0,j=void 0,S=!1;t.isWebGLInitialized=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dataUtilities=t.shaders=void 0;var r=n(49),a=n(50),i=n(51),o=n(52),s=n(53),l={int16:r.int16Shader,int8:a.int8Shader,rgb:i.rgbShader,uint16:o.uint16Shader,uint8:s.uint8Shader},u={int16:r.int16DataUtilities,int8:a.int8DataUtilities,rgb:i.rgbDataUtilities,uint16:o.uint16DataUtilities,uint8:s.uint8DataUtilities};t.shaders=l,t.dataUtilities=u},function(e,t,n){"use strict";function r(e){for(var t=e.getPixelData(),n=3,r=new Uint8Array(e.width*e.height*3),a=0,i=0;i<t.length;i++){var o=Math.abs(t[i]);r[a++]=255&o,r[a++]=o>>8,r[a++]=t[i]<0?0:1}return r}Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.int16DataUtilities={storedPixelDataToImageData:r};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.g*65536.0;if (color.b == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int16Shader=a},function(e,t,n){"use strict";function r(e){for(var t=e.getPixelData(),n=2,r=new Uint8Array(e.width*e.height*2),a=0,i=0;i<t.length;i++)r[a++]=t[i],r[a++]=t[i]<0?0:1;return r}Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.int8DataUtilities={storedPixelDataToImageData:r};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.;if (color.a == 0.0)intensity = -intensity;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.int8Shader=a},function(e,t,n){"use strict";function r(e){var t=e.minPixelValue,n=0,r=0,a=e.width*e.height*4,i=e.width*e.height*3,o=e.getPixelData(),s=new Uint8Array(i);if(t<0)for(;r<a;)s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,s[n++]=o[r++]+-t,r+=1;else for(;r<a;)s[n++]=o[r++],s[n++]=o[r++],s[n++]=o[r++],r+=1;return s}Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.rgbDataUtilities={storedPixelDataToImageData:r};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform float minPixelValue;uniform int invert;varying vec2 v_texCoord;void main() {vec3 color = texture2D(u_image, v_texCoord).xyz;color = color * 256.0 * slope + intercept;float center0 = wc - 0.5 - minPixelValue;float width0 = max(ww, 1.0);color = (color - center0) / width0 + 0.5;gl_FragColor = vec4(color, 1);if (invert == 1)gl_FragColor.rgb = 1. - gl_FragColor.rgb;}",t.rgbShader=a},function(e,t,n){"use strict";function r(e){for(var t=e.getPixelData(),n=2,r=new Uint8Array(e.width*e.height*2),a=0,i=0;i<t.length;i++){var o=t[i];r[a++]=255&o,r[a++]=o>>8}return r}Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.uint16DataUtilities={storedPixelDataToImageData:r};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0 + color.a*65536.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint16Shader=a},function(e,t,n){"use strict";function r(e){return e.getPixelData()}Object.defineProperty(t,"__esModule",{value:!0});var a={},i=t.uint8DataUtilities={storedPixelDataToImageData:r};a.frag="precision mediump float;uniform sampler2D u_image;uniform float ww;uniform float wc;uniform float slope;uniform float intercept;uniform int invert;varying vec2 v_texCoord;void main() {vec4 color = texture2D(u_image, v_texCoord);float intensity = color.r*256.0;intensity = intensity * slope + intercept;float center0 = wc - 0.5;float width0 = max(ww, 1.0);intensity = (intensity - center0) / width0 + 0.5;intensity = clamp(intensity, 0.0, 1.0);gl_FragColor = vec4(intensity, intensity, intensity, 1.0);if (invert == 1)gl_FragColor.rgb = 1.0 - gl_FragColor.rgb;}",t.uint8Shader=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.vertexShader="attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.getEnabledElement)(e),r=(0,i.default)(n);return r.invert(),r.transformPoint(t.x,t.y)};var a=n(0),i=r(n(9))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(void 0===e)throw new Error("disable: element must not be undefined");for(var t=(0,a.getEnabledElements)(),n=0;n<t.length;n++)if(t[n].element===e){var r={element:e};(0,i.default)(e,"cornerstoneelementdisabled",r),t[n].element.removeChild(t[n].canvas),t[n].canvas=void 0,t.splice(n,1);break}};var a=n(0),i=r(n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(void 0===e)throw new Error("displayImage: parameter element must not be undefined");if(void 0===t)throw new Error("displayImage: parameter image must not be undefined");var r=(0,a.getEnabledElement)(e),d=r.image;if(r.image=t,r.layers&&r.layers.length&&(0,l.setLayerImage)(e,t),void 0===r.viewport&&(r.viewport=(0,i.default)(r.canvas,t)),n)for(var c in n)null!==n[c]&&(r.viewport[c]=n[c]);var f=void 0;void 0!==r.lastImageTimeStamp&&(f=(1e3/((0,s.default)()-r.lastImageTimeStamp)).toFixed()),r.lastImageTimeStamp=(0,s.default)();var h={viewport:r.viewport,element:r.element,image:r.image,oldImage:d,enabledElement:r,frameRate:f};(0,u.default)(r.element,"cornerstonenewimage",h),(0,o.default)(e)};var a=n(0),i=r(n(3)),o=r(n(5)),s=r(n(1)),l=n(25),u=r(n(2))},function(e,t,n){"use strict";function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e);if(void 0===t.image)throw new Error("draw: image has not been loaded yet");(0,i.default)(t)};var a=n(0),i=r(n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=(0,a.getEnabledElements)(),t=0;t<e.length;t++){var n=e[t];!0===n.invalid&&(0,i.default)(n,!0)}};var a=n(0),i=r(n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return void 0!==e.image||e.layers.length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(e){if(void 0!==r.canvas){var t={enabledElement:r,timestamp:e};(0,d.default)(r.element,"cornerstoneprerender",t),r.needsRedraw&&a(r)&&(0,s.default)(r,r.invalid),(0,l.default)(n)}}if(void 0===e)throw new Error("enable: parameter element cannot be undefined");t&&t.renderer&&"webgl"===t.renderer.toLowerCase()&&(u.default.renderer.isWebGLAvailable()?(u.default.renderer.initRenderer(),t.renderer="webgl"):(console.error("WebGL not available, falling back to Canvas renderer"),delete t.renderer));var r={element:e,canvas:(0,c.default)(e),image:void 0,invalid:!1,needsRedraw:!0,options:t,layers:[],data:{},renderingTools:{}};(0,i.addEnabledElement)(r),(0,o.default)(e,!0),n()};var i=n(0),o=r(n(36)),s=r(n(62)),l=r(n(19)),u=r(n(15)),d=r(n(2)),c=r(n(64))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.image,r=e.element,c=e.layers||[];if(e.canvas&&(e.image||c.length)){var f=(0,a.default)();if(n.stats={lastGetPixelDataTime:-1,lastStoredPixelDataToCanvasImageDataTime:-1,lastPutImageDataTime:-1,lastRenderTime:-1,lastLutGenerateTime:-1},c&&c.length)(0,i.default)(e,t);else if(n){var h=n.render;h||(h=e.viewport.colormap&&""!==e.viewport.colormap&&!0===e.image.labelmap?u.renderLabelMapImage:e.viewport.colormap&&""!==e.viewport.colormap?l.renderPseudoColorImage:n.color?o.renderColorImage:s.renderGrayscaleImage),h(e,t)}var m=(0,a.default)()-f,p={viewport:e.viewport,element:r,image:n,enabledElement:e,canvasContext:e.canvas.getContext("2d"),renderTimeInMs:m};n.stats.lastRenderTime=m,e.invalid=!1,e.needsRedraw=!1,(0,d.default)(r,"cornerstoneimagerendered",p)}};var a=r(n(1)),i=r(n(63)),o=n(8),s=n(17),l=n(14),u=n(10),d=r(n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){return h[t]/h[e]}function i(e,t){e.forEach(function(e){if(e!==t&&e.viewport&&t.viewport){h[e.layerId]||(h[e.layerId]=e.viewport.scale);var n=a(t.layerId,e.layerId);e.viewport.scale=t.viewport.scale*n,e.viewport.rotation=t.viewport.rotation,e.viewport.translation={x:t.viewport.translation.x/n,y:t.viewport.translation.y/n},e.viewport.hflip=t.viewport.hflip,e.viewport.vflip=t.viewport.vflip}})}function o(e,t,n){t.forEach(function(t,r){if(t.image){e.save(),t.canvas=e.canvas,(0,f.default)(t,e);var a=t.viewport.colormap||t.options.colormap,i=t.viewport.labelmap,o=t.invalid||n;if(a&&""!==a&&!0===i)(0,c.addLabelMapLayer)(t,o);else if(a&&""!==a)(0,d.addPseudoColorLayer)(t,o);else if(!0===t.image.color)(0,u.addColorLayer)(t,o);else{var s=0===r;(0,l.addGrayscaleLayer)(t,o,s)}t.options&&t.options.opacity?e.globalAlpha=t.options.opacity:e.globalAlpha=1,t.options&&t.options.fillStyle&&(e.fillStyle=t.options.fillStyle),e.imageSmoothingEnabled=!t.viewport.pixelReplication,e.mozImageSmoothingEnabled=e.imageSmoothingEnabled;var h=t.image,m=h.width,p=h.height;e.drawImage(t.canvas,0,0,m,p,0,0,m,p),e.restore(),t.invalid=!1}})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.element,r=(0,s.getLayers)(n),a=(0,s.getActiveLayer)(n),l=(0,s.getVisibleLayers)(n),u=!e.lastSyncViewportsState&&e.syncViewports;e.lastSyncViewportsState=e.syncViewports,u&&r.forEach(function(e){e.viewport&&(h[e.layerId]=e.viewport.scale)}),!0===e.syncViewports&&i(l,a);var d=e.canvas.getContext("2d");d.setTransform(1,0,0,1,0,0),d.fillStyle="black",d.fillRect(0,0,e.canvas.width,e.canvas.height),o(d,l,t)};var s=n(25),l=n(17),u=n(8),d=n(14),c=n(10),f=r(n(4)),h={}},function(e,t,n){"use strict";function r(e){var t=document.createElement("canvas");return t.style.display="block",t.classList.add(i),e.appendChild(t),t}function a(e){var t="canvas."+i;return e.querySelector(t)||r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i="cornerstone-canvas"},function(e,t,n){"use strict";function r(e,t){var n=(0,i.getEnabledElement)(e);return!1===n.data.hasOwnProperty(t)&&(n.data[t]={}),n.data[t]}function a(e,t){delete(0,i.getEnabledElement)(e).data[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementData=r,t.removeElementData=a;var i=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.getEnabledElement)(e);return(0,i.default)(n.canvas,t)};var a=n(0),i=r(n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.getEnabledElement)(e).image};var r=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s){var l=(0,i.default)(e,t,n,r,s),u=(0,a.getEnabledElement)(e),d=(0,o.default)(u.image.slope,u.image.intercept,u.viewport.modalityLUT);return l.map(d)};var a=n(0),i=r(n(39)),o=r(n(26))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,r.getEnabledElement)(e).viewport;if(void 0!==t)return Object.assign({},t)};var r=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.indexOf(":"),r=e.substring(0,n),a=f[r];if(void 0===a||null===a){if(void 0!==h)return h(e);throw new Error("loadImageFromImageLoader: no image loader for imageId")}var i=a(e,t);return i.promise.then(function(e){(0,c.default)(d.default,"cornerstoneimageloaded",{image:e})},function(t){var n={imageId:e,error:t};(0,c.default)(d.default,"cornerstoneimageloadfailed",n)}),i}function i(e,t){if(void 0===e)throw new Error("loadImage: parameter imageId must not be undefined");var n=(0,u.getImageLoadObject)(e);return void 0!==n?n.promise:a(e,t).promise}function o(e,t){if(void 0===e)throw new Error("loadAndCacheImage: parameter imageId must not be undefined");var n=(0,u.getImageLoadObject)(e);return void 0!==n?n.promise:(n=a(e,t),(0,u.putImageLoadObject)(e,n),n.promise)}function s(e,t){f[e]=t}function l(e){var t=h;return h=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=i,t.loadAndCacheImage=o,t.registerImageLoader=s,t.registerUnknownImageLoader=l;var u=n(40),d=r(n(16)),c=r(n(2)),f={},h=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e);t.invalid=!0,t.needsRedraw=!0;var n={element:e};(0,i.default)(e,"cornerstoneinvalidated",n)};var a=n(0),i=r(n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,a.getEnabledElementsByImageId)(e).forEach(function(e){(0,i.default)(e,!0)})};var a=n(0),i=r(n(6))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,a.getEnabledElement)(e);if(void 0===r.image)throw new Error("image has not been loaded yet");var o=e.getBoundingClientRect(),s={x:t-o.left-window.pageXOffset,y:n-o.top-window.pageYOffset},l=(0,i.default)(r);return l.invert(),l.transformPoint(s.x,s.y)};var a=n(0),i=r(n(9))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,a.getEnabledElement)(e);return(0,i.default)(n).transformPoint(t.x,t.y)};var a=n(0),i=r(n(9))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,a.getEnabledElement)(e);t.viewport=(0,i.default)(t.canvas,t.image),(0,o.default)(e)};var a=n(0),i=r(n(3)),o=r(n(5))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,i.getEnabledElement)(e);if(void 0===n.viewport&&(n.viewport=(0,a.default)(n.canvas)),t)for(var r in t)null!==t[r]&&(n.viewport[r]=t[r]);n.viewport.voi.windowWidth&&(n.viewport.voi.windowWidth=Math.max(t.voi.windowWidth,s)),n.viewport.scale&&(n.viewport.scale=Math.max(t.scale,l)),n.viewport.rotation%=360,n.viewport.rotation<0&&(n.viewport.rotation+=360),n.image&&(0,o.default)(e)};var a=r(n(3)),i=n(0),o=r(n(5)),s=1e-6,l=1e-4},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(8),a=n(17),i=n(35),o=n(14),s=n(10);t.default={colorImage:r.renderColorImage,grayscaleImage:a.renderGrayscaleImage,webImage:i.renderWebImage,pseudoColorImage:o.renderPseudoColorImage,labelMapImage:s.renderLabelMapImage}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;for(n=0;n<o.length&&!(o[n].priority<=t);n++);o.splice(n,0,{priority:t,provider:e})}function a(e){for(var t=0;t<o.length;t++)if(o[t].provider===e){o.splice(t,1);break}}function i(e,t){for(var n=0;n<o.length;n++){var r=o[n].provider(e,t);if(void 0!==r)return r}}Object.defineProperty(t,"__esModule",{value:!0}),t.addProvider=r,t.removeProvider=a;var o=[];t.default={addProvider:r,removeProvider:a,get:i}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=Number.MAX_VALUE,n=Number.MIN_VALUE,r=e.length,a=void 0,i=0;i<r;i++)t=t<(a=e[i])?t:a,n=n>a?n:a;return{minPixelValue:t,maxPixelValue:n}}function i(e){if(e.restore)return e.restore;var t=e.color,n=e.rgba,r=e.cachedLut,a=e.slope,i=e.windowWidth,o=e.windowCenter,s=e.minPixelValue,l=e.maxPixelValue;return function(){if(e.color=t,e.rgba=n,e.cachedLut=r,e.slope=a,e.windowWidth=i,e.windowCenter=o,e.minPixelValue=s,e.maxPixelValue=l,e.origPixelData){var u=e.origPixelData;e.getPixelData=function(){return u}}e.origPixelData=void 0,e.colormapId=void 0,e.falseColor=void 0}}function o(e){return e&&"string"==typeof e&&(e=(0,f.getColormap)(e)),e}function s(e){return!(!e.restore||"function"!=typeof e.restore)&&(e.restore(),!0)}function l(e,t){if(e.color&&!e.falseColor)throw new Error("Color transforms are not implemented yet");var n=(t=o(t)).getId();if(e.colormapId===n)return!1;if(s(e),n){var r=e.minPixelValue||0,l=e.maxPixelValue||255;e.restore=i(e);var u=t.createLookupTable();u.setTableRange(r,l),(0,c.default)(e,u);var d=a(e.getPixelData());e.minPixelValue=d.minPixelValue,e.maxPixelValue=d.maxPixelValue,e.windowWidth=255,e.windowCenter=128,e.colormapId=n}return!0}function u(e,t){return l((0,d.getEnabledElement)(e).image,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreImage=t.convertToFalseColorImage=t.convertImageToFalseColorImage=void 0;var d=n(0),c=r(n(41)),f=n(28);t.convertImageToFalseColorImage=l,t.convertToFalseColorImage=u,t.restoreImage=s}])})}}},"cornerstone-math":{dist:{"cornerstoneMath.js":function(e,t,n){!function e(r,a){"object"==typeof t&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define("cornerstoneMath",[],a):"object"==typeof t?t.cornerstoneMath=a():r.cornerstoneMath=a()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";function r(e,t,n){return e<t?t:e>n?n:e}function a(e){return e*(Math.PI/180)}function i(e){return e*(180/Math.PI)}function o(e){return"number"==typeof e?e?e<0?-1:1:e===e?0:NaN:NaN}Object.defineProperty(t,"__esModule",{value:!0}),t.clamp=r,t.degToRad=a,t.radToDeg=i,t.sign=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(3)),i=n(0),o=function e(t,n,r){this.x=t||0,this.y=n||0,this.z=r||0};o.prototype={constructor:o,set:function e(t,n,r){return this.x=t,this.y=n,this.z=r,this},setX:function e(t){return this.x=t,this},setY:function e(t){return this.y=t,this},setZ:function e(t){return this.z=t,this},setComponent:function e(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}},getComponent:function e(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function e(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function e(t,n){return void 0!==n?(console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function e(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function e(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},sub:function e(t,n){return void 0!==n?(console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function e(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},multiply:function e(t,n){return void 0!==n?(console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function e(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function e(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this},applyAxisAngle:function(){var e=void 0;return function(t,n){return void 0===e&&(e=new a.default),this.applyQuaternion(e.setFromAxisAngle(t,n)),this}}(),applyMatrix3:function e(t){var n=this.x,r=this.y,a=this.z,i=t.elements;return this.x=i[0]*n+i[3]*r+i[6]*a,this.y=i[1]*n+i[4]*r+i[7]*a,this.z=i[2]*n+i[5]*r+i[8]*a,this},applyMatrix4:function e(t){var n=this.x,r=this.y,a=this.z,i=t.elements;return this.x=i[0]*n+i[4]*r+i[8]*a+i[12],this.y=i[1]*n+i[5]*r+i[9]*a+i[13],this.z=i[2]*n+i[6]*r+i[10]*a+i[14],this},applyProjection:function e(t){var n=this.x,r=this.y,a=this.z,i=t.elements,o=1/(i[3]*n+i[7]*r+i[11]*a+i[15]);return this.x=(i[0]*n+i[4]*r+i[8]*a+i[12])*o,this.y=(i[1]*n+i[5]*r+i[9]*a+i[13])*o,this.z=(i[2]*n+i[6]*r+i[10]*a+i[14])*o,this},applyQuaternion:function e(t){var n=this.x,r=this.y,a=this.z,i=t.x,o=t.y,s=t.z,l=t.w,u=l*n+o*a-s*r,d=l*r+s*n-i*a,c=l*a+i*r-o*n,f=-i*n-o*r-s*a;return this.x=u*l+f*-i+d*-s-c*-o,this.y=d*l+f*-o+c*-i-u*-s,this.z=c*l+f*-s+u*-o-d*-i,this},transformDirection:function e(t){var n=this.x,r=this.y,a=this.z,i=t.elements;return this.x=i[0]*n+i[4]*r+i[8]*a,this.y=i[1]*n+i[5]*r+i[9]*a,this.z=i[2]*n+i[6]*r+i[10]*a,this.normalize(),this},divide:function e(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function e(t){if(0!==t){var n=1/t;this.x*=n,this.y*=n,this.z*=n}else this.x=0,this.y=0,this.z=0;return this},min:function e(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function e(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function e(t,n){return this.x<t.x?this.x=t.x:this.x>n.x&&(this.x=n.x),this.y<t.y?this.y=t.y:this.y>n.y&&(this.y=n.y),this.z<t.z?this.z=t.z:this.z>n.z&&(this.z=n.z),this},clampScalar:function(){var e=void 0,t=void 0;return function(n,r){return void 0===e&&(e=new o,t=new o),e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),floor:function e(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function e(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function e(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function e(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function e(){return this.multiplyScalar(-1)},dot:function e(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function e(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function e(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function e(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function e(){return this.divideScalar(this.length())},setLength:function e(t){var n=this.length();return 0!==n&&t!==n&&this.multiplyScalar(t/n),this},lerp:function e(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this},cross:function e(t,n){if(void 0!==n)return console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n);var r=this.x,a=this.y,i=this.z;return this.x=a*t.z-i*t.y,this.y=i*t.x-r*t.z,this.z=r*t.y-a*t.x,this},crossVectors:function e(t,n){var r=t.x,a=t.y,i=t.z,o=n.x,s=n.y,l=n.z;return this.x=a*l-i*s,this.y=i*o-r*l,this.z=r*s-a*o,this},projectOnVector:function(){var e=void 0,t=void 0;return function(n){return void 0===e&&(e=new o),e.copy(n).normalize(),t=this.dot(e),this.copy(e).multiplyScalar(t)}}(),projectOnPlane:function(){var e=void 0;return function(t){return void 0===e&&(e=new o),e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=void 0;return function(t){return void 0===e&&(e=new o),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function e(t){var n=this.dot(t)/(this.length()*t.length());return Math.acos((0,i.clamp)(n,-1,1))},distanceTo:function e(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function e(t){var n=this.x-t.x,r=this.y-t.y,a=this.z-t.z;return n*n+r*r+a*a},setFromMatrixPosition:function e(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function e(t){var n=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),r=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),a=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=n,this.y=r,this.z=a,this},setFromMatrixColumn:function e(t,n){var r=4*t,a=n.elements;return this.x=a[r],this.y=a[r+1],this.z=a[r+2],this},equals:function e(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function e(t){return this.x=t[0],this.y=t[1],this.z=t[2],this},toArray:function e(){return[this.x,this.y,this.z]},clone:function e(){return new o(this.x,this.y,this.z)}},t.default=o},function(e,t,n){"use strict";function r(e){return e*e}function a(e,t){return r(e.x-t.x)+r(e.y-t.y)}function i(e,t){var n=a(e.start,e.end);if(0===n)return a(t,e.start);var r=((t.x-e.start.x)*(e.end.x-e.start.x)+(t.y-e.start.y)*(e.end.y-e.start.y))/n;return r<0?a(t,e.start):r>1?a(t,e.end):a(t,{x:e.start.x+r*(e.end.x-e.start.x),y:e.start.y+r*(e.end.y-e.start.y)})}function o(e,t){return Math.sqrt(i(e,t))}function s(e,t){var n={},r=e.start.x,a=e.start.y,i=e.end.x,o=e.end.y,s=t.start.x,u=t.start.y,d=t.end.x,c=t.end.y,f=void 0,h=void 0,m=void 0,p=void 0,g=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=void 0,E=void 0,x=void 0;if(f=o-a,m=r-i,g=i*a-r*o,_=f*s+m*u+g,w=f*d+m*c+g,(0===_||0===w||(0,l.sign)(_)!==(0,l.sign)(w))&&(h=c-u,p=s-d,v=d*u-s*c,y=h*r+p*a+v,b=h*i+p*o+v,0===y||0===b||(0,l.sign)(y)!==(0,l.sign)(b))){E=f*p-h*m,x=m*v-p*g;var T=parseFloat(x/E);x=h*g-f*v;var P=parseFloat(x/E);return n.x=T,n.y=P,n}}Object.defineProperty(t,"__esModule",{value:!0});var l=n(0),u={distanceToPoint:o,intersectLine:s};t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r,a){this.x=t||0,this.y=n||0,this.z=r||0,this.w=void 0!==a?a:1};r.prototype.setFromAxisAngle=function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},r.prototype.multiplyQuaternions=function(e,t){var n=e.x,r=e.y,a=e.z,i=e.w,o=t.x,s=t.y,l=t.z,u=t.w;return this.x=n*u+i*o+r*l-a*s,this.y=r*u+i*s+a*o-n*l,this.z=a*u+i*l+n*s-r*o,this.w=i*u-n*o-r*s-a*l,this},r.prototype.setFromRotationMatrix=function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],i=t[1],o=t[5],s=t[9],l=t[2],u=t[6],d=t[10],c=n+o+d,f=void 0;return c>0?(f=.5/Math.sqrt(c+1),this.w=.25/f,this.x=(u-s)*f,this.y=(a-l)*f,this.z=(i-r)*f):n>o&&n>d?(f=2*Math.sqrt(1+n-o-d),this.w=(u-s)/f,this.x=.25*f,this.y=(r+i)/f,this.z=(a+l)/f):o>d?(f=2*Math.sqrt(1+o-n-d),this.w=(a-l)/f,this.x=(r+i)/f,this.y=.25*f,this.z=(s+u)/f):(f=2*Math.sqrt(1+d-n-o),this.w=(i-r)/f,this.x=(a+l)/f,this.y=(s+u)/f,this.z=.25*f),this},t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(1)),s=n(0),l=function(){function e(t,n){a(this,e),this.start=void 0!==t?t:new o.default,this.end=void 0!==n?n:new o.default}return i(e,[{key:"set",value:function e(t,n){return this.start.copy(t),this.end.copy(n),this}},{key:"copy",value:function e(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"center",value:function e(t){return(t||new o.default).addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function e(t){return(t||new o.default).subVectors(this.end,this.start)}},{key:"distanceSq",value:function e(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function e(){return this.start.distanceTo(this.end)}},{key:"at",value:function e(t,n){var r=n||new o.default;return this.delta(r).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function e(){var t=new o.default,n=new o.default;return function(e,r){t.subVectors(e,this.start),n.subVectors(this.end,this.start);var a=n.dot(n),i=n.dot(t)/a;return r&&(i=(0,s.clamp)(i,0,1)),i}}},{key:"closestPointToPoint",value:function e(t,n,r){var a=this.closestPointToPointParameter(t,n),i=r||new o.default;return this.delta(i).multiplyScalar(a).add(this.start)}},{key:"applyMatrix4",value:function e(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function e(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:"clone",value:function t(){return(new e).copy(this)}},{key:"intersectLine",value:function e(t){var n=this.end.clone().sub(this.start),r=t.end.clone().sub(t.start),a=t.start.clone().sub(this.start),i=n.clone().cross(r),o=a.clone().cross(r);if(0!==a.dot(n)){var s=o.dot(i)/i.lengthSq();if(!(s>1||isNaN(s))){var l=this.start.clone().add(n.clone().multiplyScalar(s));return l.clone().sub(t.start).lengthSq()+l.clone().sub(t.end).lengthSq()<=t.distanceSq()?l:void 0}}}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)),i=function e(t,n,r,a,i,o,s,l,u,d,c,f,h,m,p,g){this.elements=new Float32Array(16);var v=this.elements;v[0]=void 0!==t?t:1,v[4]=n||0,v[8]=r||0,v[12]=a||0,v[1]=i||0,v[5]=void 0!==o?o:1,v[9]=s||0,v[13]=l||0,v[2]=u||0,v[6]=d||0,v[10]=void 0!==c?c:1,v[14]=f||0,v[3]=h||0,v[7]=m||0,v[11]=p||0,v[15]=void 0!==g?g:1};i.prototype.makeRotationFromQuaternion=function(e){var t=this.elements,n=e.x,r=e.y,a=e.z,i=e.w,o=n+n,s=r+r,l=a+a,u=n*o,d=n*s,c=n*l,f=r*s,h=r*l,m=a*l,p=i*o,g=i*s,v=i*l;return t[0]=1-(f+m),t[4]=d-v,t[8]=c+g,t[1]=d+v,t[5]=1-(u+m),t[9]=h-p,t[2]=c-g,t[6]=h+p,t[10]=1-(u+f),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},i.prototype.multiplyMatrices=function(e,t){var n=e.elements,r=t.elements,a=this.elements,i=n[0],o=n[4],s=n[8],l=n[12],u=n[1],d=n[5],c=n[9],f=n[13],h=n[2],m=n[6],p=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],w=r[0],E=r[4],x=r[8],T=r[12],P=r[1],j=r[5],S=r[9],M=r[13],O=r[2],I=r[6],C=r[10],L=r[14],k=r[3],A=r[7],D=r[11],R=r[15];return a[0]=i*w+o*P+s*O+l*k,a[4]=i*E+o*j+s*I+l*A,a[8]=i*x+o*S+s*C+l*D,a[12]=i*T+o*M+s*L+l*R,a[1]=u*w+d*P+c*O+f*k,a[5]=u*E+d*j+c*I+f*A,a[9]=u*x+d*S+c*C+f*D,a[13]=u*T+d*M+c*L+f*R,a[2]=h*w+m*P+p*O+g*k,a[6]=h*E+m*j+p*I+g*A,a[10]=h*x+m*S+p*C+g*D,a[14]=h*T+m*M+p*L+g*R,a[3]=v*w+y*P+b*O+_*k,a[7]=v*E+y*j+b*I+_*A,a[11]=v*x+y*S+b*C+_*D,a[15]=v*T+y*M+b*L+_*R,this},i.prototype.multiply=function(e,t){return void 0!==t?(console.warn("DEPRECATED: Matrix4's .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},i.prototype.getInverse=function(e,t){var n=this.elements,r=e.elements,a=r[0],i=r[4],o=r[8],s=r[12],l=r[1],u=r[5],d=r[9],c=r[13],f=r[2],h=r[6],m=r[10],p=r[14],g=r[3],v=r[7],y=r[11],b=r[15];n[0]=d*p*v-c*m*v+c*h*y-u*p*y-d*h*b+u*m*b,n[4]=s*m*v-o*p*v-s*h*y+i*p*y+o*h*b-i*m*b,n[8]=o*c*v-s*d*v+s*u*y-i*c*y-o*u*b+i*d*b,n[12]=s*d*h-o*c*h-s*u*m+i*c*m+o*u*p-i*d*p,n[1]=c*m*g-d*p*g-c*f*y+l*p*y+d*f*b-l*m*b,n[5]=o*p*g-s*m*g+s*f*y-a*p*y-o*f*b+a*m*b,n[9]=s*d*g-o*c*g-s*l*y+a*c*y+o*l*b-a*d*b,n[13]=o*c*f-s*d*f+s*l*m-a*c*m-o*l*p+a*d*p,n[2]=u*p*g-c*h*g+c*f*v-l*p*v-u*f*b+l*h*b,n[6]=s*h*g-i*p*g-s*f*v+a*p*v+i*f*b-a*h*b,n[10]=i*c*g-s*u*g+s*l*v-a*c*v-i*l*b+a*u*b,n[14]=s*u*f-i*c*f-s*l*h+a*c*h+i*l*p-a*u*p,n[3]=d*h*g-u*m*g-d*f*v+l*m*v+u*f*y-l*h*y,n[7]=i*m*g-o*h*g+o*f*v-a*m*v-i*f*y+a*h*y,n[11]=o*u*g-i*d*g-o*l*v+a*d*v+i*l*y-a*u*y,n[15]=i*d*f-o*u*f+o*l*h-a*d*h-i*l*m+a*u*m;var _=a*n[0]+l*n[4]+f*n[8]+g*n[12];if(0===_){var w="Matrix4.getInverse(): can't invert matrix, determinant is 0";if(t)throw new Error(w);return console.warn(w),this.identity(),this}return this.multiplyScalar(1/_),this},i.prototype.applyToVector3Array=function(){var e=new a.default;return function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=t.length);for(var a=0,i=n;a<r;a+=3,i+=3)e.x=t[i],e.y=t[i+1],e.z=t[i+2],e.applyMatrix4(this),t[i]=e.x,t[i+1]=e.y,t[i+2]=e.z;return t}},i.prototype.makeTranslation=function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},i.prototype.multiplyScalar=function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},i.prototype.set=function(e,t,n,r,a,i,o,s,l,u,d,c,f,h,m,p){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=a,g[5]=i,g[9]=o,g[13]=s,g[2]=l,g[6]=u,g[10]=d,g[14]=c,g[3]=f,g[7]=h,g[11]=m,g[15]=p,this},i.prototype.makeScale=function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n(1)),i=function e(t,n){this.normal=void 0!==t?t:new a.default(1,0,0),this.constant=void 0!==n?n:0};i.prototype={constructor:i,set:function e(t,n){return this.normal.copy(t),this.constant=n,this},setComponents:function e(t,n,r,a){return this.normal.set(t,n,r),this.constant=a,this},setFromNormalAndCoplanarPoint:function e(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new a.default,t=new a.default;return function(n,r,a){var i=e.subVectors(a,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(i,n),this}}(),copy:function e(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function e(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function e(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function e(t){return this.normal.dot(t)+this.constant},distanceToSphere:function e(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function e(t,n){return this.orthoPoint(t,n).sub(t).negate()},orthoPoint:function e(t,n){var r=this.distanceToPoint(t);return(n||new a.default).copy(this.normal).multiplyScalar(r)},isIntersectionLine:function e(t){var n=this.distanceToPoint(t.start),r=this.distanceToPoint(t.end);return n<0&&r>0||r<0&&n>0},intersectLine:function(){var e=new a.default;return function(t,n){var r=n||new a.default,i=t.delta(e),o=this.normal.dot(i);if(0!==o){var s=-(t.start.dot(this.normal)+this.constant)/o;if(!(s<0||s>1))return r.copy(i).multiplyScalar(s).add(t.start)}else if(0===this.distanceToPoint(t.start))return r.copy(t.start)}}(),intersectPlane:function e(t){var n=this.normal.clone().cross(t.normal),r={origin:new a.default,direction:n};if(this.normal.clone().cross(t.normal).length<1e-10)return r.direction=new a.default,r;var i=this.constant,o=t.constant,s=this.normal.clone().dot(t.normal),l=-(i-o*s)/(1-s*s),u=-(o-i*s)/(1-s*s);return r.origin=this.normal.clone().multiplyScalar(l).add(t.normal.clone().multiplyScalar(u)),r},coplanarPoint:function e(t){return(t||new a.default).copy(this.normal).multiplyScalar(-this.constant)},translate:function e(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function e(t){return t.normal.equals(this.normal)&&t.constant===this.constant},clone:function e(){return(new i).copy(this)}},t.default=i},function(e,t,n){"use strict";function r(e){return{x:e.pageX,y:e.pageY}}function a(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i(e){return{x:e.x,y:e.y}}function o(e,t){return Math.sqrt(s(e,t))}function s(e,t){var n=a(e,t);return n.x*n.x+n.y*n.y}function l(e,t){return!(e.x<t.left||e.x>t.left+t.width||e.y<t.top||e.y>t.top+t.height)}function u(e,t){var n=[],r=void 0;return e.forEach(function(e,a){var i=o(e,t);n.push(i),r=0===a?i:Math.min(i,r)}),e[n.indexOf(r)]}Object.defineProperty(t,"__esModule",{value:!0});var d={subtract:a,copy:i,pageToPoint:r,distance:o,distanceSquared:s,insideRect:l,findClosestPoint:u};t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return[{start:{x:e.left,y:e.top},end:{x:e.left+e.width,y:e.top}},{start:{x:e.left+e.width,y:e.top},end:{x:e.left+e.width,y:e.top+e.height}},{start:{x:e.left+e.width,y:e.top+e.height},end:{x:e.left,y:e.top+e.height}},{start:{x:e.left,y:e.top+e.height},end:{x:e.left,y:e.top}}]}function i(e,t){var n=655535;return a(e).forEach(function(e){var r=u.default.distanceToPoint(e,t);r<n&&(n=r)}),n}function o(e){return{topLeft:{x:e.left,y:e.top},bottomRight:{x:e.left+e.width,y:e.top+e.height}}}function s(e,t){var n=void 0,r=void 0,a=o(e),i=o(t);return n=e.width>=0?t.width>=0?!(a.bottomRight.x<=i.topLeft.x||i.bottomRight.x<=a.topLeft.x):!(a.bottomRight.x<=i.bottomRight.x||i.topLeft.x<=a.topLeft.x):t.width>=0?!(a.topLeft.x<=i.topLeft.x||i.bottomRight.x<=a.bottomRight.x):!(a.topLeft.x<=i.bottomRight.x||i.topLeft.x<=a.bottomRight.x),r=e.height>=0?t.height>=0?!(a.bottomRight.y<=i.topLeft.y||i.bottomRight.y<=a.topLeft.y):!(a.bottomRight.y<=i.bottomRight.y||i.topLeft.y<=a.topLeft.y):t.height>=0?!(a.topLeft.y<=i.topLeft.y||i.bottomRight.y<=a.bottomRight.y):!(a.topLeft.y<=i.bottomRight.y||i.top<=a.bottomRight.y),n&&r}function l(e,t){var n={topLeft:{},bottomRight:{}};if(s(e,t)){var r=o(e),a=o(t);return e.width>=0?t.width>=0?(n.topLeft.x=Math.max(r.topLeft.x,a.topLeft.x),n.bottomRight.x=Math.min(r.bottomRight.x,a.bottomRight.x)):(n.topLeft.x=Math.max(r.topLeft.x,a.bottomRight.x),n.bottomRight.x=Math.min(r.bottomRight.x,a.topLeft.x)):t.width>=0?(n.topLeft.x=Math.min(r.topLeft.x,a.bottomRight.x),n.bottomRight.x=Math.max(r.bottomRight.x,a.topLeft.x)):(n.topLeft.x=Math.min(r.topLeft.x,a.topLeft.x),n.bottomRight.x=Math.max(r.bottomRight.x,a.bottomRight.x)),e.height>=0?t.height>=0?(n.topLeft.y=Math.max(r.topLeft.y,a.topLeft.y),n.bottomRight.y=Math.min(r.bottomRight.y,a.bottomRight.y)):(n.topLeft.y=Math.max(r.topLeft.y,a.bottomRight.y),n.bottomRight.y=Math.min(r.bottomRight.y,a.topLeft.y)):t.height>=0?(n.topLeft.y=Math.min(r.topLeft.y,a.bottomRight.y),n.bottomRight.y=Math.max(r.bottomRight.y,a.topLeft.y)):(n.topLeft.y=Math.min(r.topLeft.y,a.topLeft.y),n.bottomRight.y=Math.max(r.bottomRight.y,a.bottomRight.y)),n}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n(2)),d={distanceToPoint:i,getIntersectionRect:l};t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4);Object.defineProperty(t,"Line3",{enumerable:!0,get:function e(){return r(a).default}});var i=n(2);Object.defineProperty(t,"lineSegment",{enumerable:!0,get:function e(){return r(i).default}});var o=n(0);Object.defineProperty(t,"clamp",{enumerable:!0,get:function e(){return o.clamp}}),Object.defineProperty(t,"degToRad",{enumerable:!0,get:function e(){return o.degToRad}}),Object.defineProperty(t,"radToDeg",{enumerable:!0,get:function e(){return o.radToDeg}}),Object.defineProperty(t,"sign",{enumerable:!0,get:function e(){return o.sign}});var s=n(5);Object.defineProperty(t,"Matrix4",{enumerable:!0,get:function e(){return r(s).default}});var l=n(6);Object.defineProperty(t,"Plane",{enumerable:!0,get:function e(){return r(l).default}});var u=n(7);Object.defineProperty(t,"point",{enumerable:!0,get:function e(){return r(u).default}});var d=n(3);Object.defineProperty(t,"quaternion",{enumerable:!0,get:function e(){return r(d).default}});var c=n(8);Object.defineProperty(t,"rect",{enumerable:!0,get:function e(){return r(c).default}});var f=n(1);Object.defineProperty(t,"Vector3",{enumerable:!0,get:function e(){return r(f).default}})}])})}}},"cornerstone-tools":{dist:{"cornerstoneTools.js":function(e,t,n){!function e(r,a){"object"==typeof t&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define("cornerstoneTools",[],a):"object"==typeof t?t.cornerstoneTools=a():r.cornerstoneTools=a()}(window,function(){return function(e){function t(e){delete installedChunks[e]}function n(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=m.p+""+e+"."+v+".hot-update.js",t.appendChild(n)}function r(e){return e=e||1e4,new i(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,a=m.p+""+v+".hot-update.json";r.open("GET",a,!0),r.timeout=e,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+a+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+a+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void n(e)}t(e)}}})}function a(e){var t=k[e];if(!t)return m;var n=function(n){return t.hot.active?(k[n]?-1===k[n].parents.indexOf(e)&&k[n].parents.push(e):(w=[e],_=n),-1===t.children.indexOf(n)&&t.children.push(n)):(console.warn("[HMR] unexpected require("+n+") from disposed module "+e),w=[]),m(n)},r=function e(t){return{configurable:!0,enumerable:!0,get:function(){return m[t]},set:function(e){m[t]=e}}};for(var a in m)Object.prototype.hasOwnProperty.call(m,a)&&"e"!==a&&Object.defineProperty(n,a,r(a));return n.e=function(e){function t(){j--,"prepare"===T&&(S[e]||c(e),0===j&&0===P&&f())}return"ready"===T&&s("prepare"),j++,m.e(e).then(t,function(e){throw t(),e})},n}function o(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:_!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:u,apply:h,status:function(e){if(!e)return T;x.push(e)},addStatusHandler:function(e){x.push(e)},removeStatusHandler:function(e){var t=x.indexOf(e);t>=0&&x.splice(t,1)},data:b[e]};return _=void 0,t}function s(e){T=e;for(var t=0;t<x.length;t++)x[t].call(null,e)}function l(e){return+e+""===e?+e:e}function u(e){if("idle"!==T)throw new Error("check() is only allowed in idle status");return g=e,s("check"),r(y).then(function(e){if(!e)return s("idle"),null;M={},S={},O=e.c,L=e.h,s("prepare");var t=new i(function(e,t){I={resolve:e,reject:t}});return C={},c("cornerstoneTools"),"prepare"===T&&0===j&&0===P&&f(),t})}function d(e,t){if(O[e]&&M[e]){M[e]=!1;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(C[n]=t[n]);0==--P&&0===j&&f()}}function c(e){O[e]?(M[e]=!0,P++,n(e)):S[e]=!0}function f(){s("ready");var e=I;if(I=null,e)if(g)i.resolve().then(function(){return h(g)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in C)Object.prototype.hasOwnProperty.call(C,n)&&t.push(l(n));e.resolve(t)}}function h(n){function r(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),o=i.id,s=i.chain;if((c=k[o])&&!c.hot._selfAccepted){if(c.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],d=k[u];if(d){if(d.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(d.hot._acceptedDependencies[o]?(n[u]||(n[u]=[]),a(n[u],[o])):(delete n[u],t.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}if("ready"!==T)throw new Error("apply() is only allowed in ready status");n=n||{};var o,u,d,c,f,h={},p=[],g={},y=function e(){console.warn("[HMR] unexpected require("+E.moduleId+") to disposed module")};for(var _ in C)if(Object.prototype.hasOwnProperty.call(C,_)){f=l(_);var E,x=!1,P=!1,j=!1,S="";switch((E=C[_]?r(f):{type:"disposed",moduleId:_}).chain&&(S="\nUpdate propagation: "+E.chain.join(" -> ")),E.type){case"self-declined":n.onDeclined&&n.onDeclined(E),n.ignoreDeclined||(x=new Error("Aborted because of self decline: "+E.moduleId+S));break;case"declined":n.onDeclined&&n.onDeclined(E),n.ignoreDeclined||(x=new Error("Aborted because of declined dependency: "+E.moduleId+" in "+E.parentId+S));break;case"unaccepted":n.onUnaccepted&&n.onUnaccepted(E),n.ignoreUnaccepted||(x=new Error("Aborted because "+f+" is not accepted"+S));break;case"accepted":n.onAccepted&&n.onAccepted(E),P=!0;break;case"disposed":n.onDisposed&&n.onDisposed(E),j=!0;break;default:throw new Error("Unexception type "+E.type)}if(x)return s("abort"),i.reject(x);if(P){g[f]=C[f],a(p,E.outdatedModules);for(f in E.outdatedDependencies)Object.prototype.hasOwnProperty.call(E.outdatedDependencies,f)&&(h[f]||(h[f]=[]),a(h[f],E.outdatedDependencies[f]))}j&&(a(p,[E.moduleId]),g[f]=y)}var M=[];for(u=0;u<p.length;u++)f=p[u],k[f]&&k[f].hot._selfAccepted&&M.push({module:f,errorHandler:k[f].hot._selfAccepted});s("dispose"),Object.keys(O).forEach(function(e){!1===O[e]&&t(e)});for(var I,A=p.slice();A.length>0;)if(f=A.pop(),c=k[f]){var D={},R=c.hot._disposeHandlers;for(d=0;d<R.length;d++)(o=R[d])(D);for(b[f]=D,c.hot.active=!1,delete k[f],delete h[f],d=0;d<c.children.length;d++){var U=k[c.children[d]];U&&((I=U.parents.indexOf(f))>=0&&U.parents.splice(I,1))}}var B,N;for(f in h)if(Object.prototype.hasOwnProperty.call(h,f)&&(c=k[f]))for(N=h[f],d=0;d<N.length;d++)B=N[d],(I=c.children.indexOf(B))>=0&&c.children.splice(I,1);s("apply"),v=L;for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(e[f]=g[f]);var F=null;for(f in h)if(Object.prototype.hasOwnProperty.call(h,f)&&(c=k[f])){N=h[f];var z=[];for(u=0;u<N.length;u++)if(B=N[u],o=c.hot._acceptedDependencies[B]){if(-1!==z.indexOf(o))continue;z.push(o)}for(u=0;u<z.length;u++){o=z[u];try{o(N)}catch(e){n.onErrored&&n.onErrored({type:"accept-errored",moduleId:f,dependencyId:N[u],error:e}),n.ignoreErrored||F||(F=e)}}}for(u=0;u<M.length;u++){var H=M[u];f=H.module,w=[f];try{m(f)}catch(e){if("function"==typeof H.errorHandler)try{H.errorHandler(e)}catch(t){n.onErrored&&n.onErrored({type:"self-accept-error-handler-errored",moduleId:f,error:t,originalError:e}),n.ignoreErrored||F||(F=t),F||(F=e)}else n.onErrored&&n.onErrored({type:"self-accept-errored",moduleId:f,error:e}),n.ignoreErrored||F||(F=e)}}return F?(s("fail"),i.reject(F)):(s("idle"),new i(function(e){e(p)}))}function m(t){if(k[t])return k[t].exports;var n=k[t]={i:t,l:!1,exports:{},hot:o(t),parents:(E=w,w=[],E),children:[]};return e[t].call(n.exports,n,n.exports,a(t)),n.l=!0,n.exports}var p=window.webpackHotUpdate_name_;window.webpackHotUpdate_name_=function e(t,n){d(t,n),p&&p(t,n)};var g=!0,v="a3fe19d99574ce2cb42f",y=1e4,b={},_,w=[],E=[],x=[],T="idle",P=0,j=0,S={},M={},O={},I,C,L,k={};return m.m=e,m.c=k,m.d=function(e,t,n){m.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},m.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},m.n=function(e){var t=e&&e.__esModule?function t(){return e.default}:function t(){return e};return m.d(t,"a",t),t},m.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},m.p="",m.h=function(){return v},a("./index.js")(m.s="./index.js")}({"../node_modules/babel-runtime/core-js/array/from.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/math/sign.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/math/sign.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/number/is-integer.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/number/is-integer.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/object/assign.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/object/define-property.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/object/keys.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/object/keys.js"),__esModule:!0}},"../node_modules/babel-runtime/core-js/promise.js":function(e,t,n){e.exports={default:n("../node_modules/core-js/library/fn/promise.js"),__esModule:!0}},"../node_modules/babel-runtime/helpers/asyncToGenerator.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(n("../node_modules/babel-runtime/core-js/promise.js"));t.default=function(e){return function(){var t=e.apply(this,arguments);return new a.default(function(e,n){function r(i,o){try{var s=t[i](o),l=s.value}catch(e){return void n(e)}if(!s.done)return a.default.resolve(l).then(function(e){r("next",e)},function(e){r("throw",e)});e(l)}return r("next")})}}},"../node_modules/babel-runtime/helpers/classCallCheck.js":function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"../node_modules/babel-runtime/helpers/createClass.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(n("../node_modules/babel-runtime/core-js/object/define-property.js"));t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},"../node_modules/babel-runtime/helpers/toConsumableArray.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=r(n("../node_modules/babel-runtime/core-js/array/from.js"));t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},"../node_modules/babel-runtime/regenerator/index.js":function(e,t,n){e.exports=n("../node_modules/regenerator-runtime/runtime-module.js")},"../node_modules/core-js/library/fn/array/from.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.string.iterator.js"),n("../node_modules/core-js/library/modules/es6.array.from.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Array.from},"../node_modules/core-js/library/fn/math/sign.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.math.sign.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Math.sign},"../node_modules/core-js/library/fn/number/is-integer.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.number.is-integer.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Number.isInteger},"../node_modules/core-js/library/fn/object/assign.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Object.assign},"../node_modules/core-js/library/fn/object/define-property.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.object.define-property.js");var r=n("../node_modules/core-js/library/modules/_core.js").Object;e.exports=function e(t,n,a){return r.defineProperty(t,n,a)}},"../node_modules/core-js/library/fn/object/keys.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.object.keys.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Object.keys},"../node_modules/core-js/library/fn/promise.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.object.to-string.js"),n("../node_modules/core-js/library/modules/es6.string.iterator.js"),n("../node_modules/core-js/library/modules/web.dom.iterable.js"),n("../node_modules/core-js/library/modules/es6.promise.js"),n("../node_modules/core-js/library/modules/es7.promise.finally.js"),n("../node_modules/core-js/library/modules/es7.promise.try.js"),e.exports=n("../node_modules/core-js/library/modules/_core.js").Promise},"../node_modules/core-js/library/modules/_a-function.js":function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"../node_modules/core-js/library/modules/_add-to-unscopables.js":function(e,t){e.exports=function(){}},"../node_modules/core-js/library/modules/_an-instance.js":function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},"../node_modules/core-js/library/modules/_an-object.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},"../node_modules/core-js/library/modules/_array-includes.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_to-iobject.js"),a=n("../node_modules/core-js/library/modules/_to-length.js"),i=n("../node_modules/core-js/library/modules/_to-absolute-index.js");e.exports=function(e){return function(t,n,o){var s=r(t),l=a(s.length),u=i(o,l),d;if(e&&n!=n){for(;l>u;)if((d=s[u++])!=d)return!0}else for(;l>u;u++)if((e||u in s)&&s[u]===n)return e||u||0;return!e&&-1}}},"../node_modules/core-js/library/modules/_classof.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_cof.js"),a=n("../node_modules/core-js/library/modules/_wks.js")("toStringTag"),i="Arguments"==r(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),a))?n:i?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},"../node_modules/core-js/library/modules/_cof.js":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"../node_modules/core-js/library/modules/_core.js":function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof u&&(u=n)},"../node_modules/core-js/library/modules/_create-property.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_object-dp.js"),a=n("../node_modules/core-js/library/modules/_property-desc.js");e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},"../node_modules/core-js/library/modules/_ctx.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}}},"../node_modules/core-js/library/modules/_defined.js":function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},"../node_modules/core-js/library/modules/_descriptors.js":function(e,t,n){e.exports=!n("../node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"../node_modules/core-js/library/modules/_dom-create.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_is-object.js"),a=n("../node_modules/core-js/library/modules/_global.js").document,i=r(a)&&r(a.createElement);e.exports=function(e){return i?a.createElement(e):{}}},"../node_modules/core-js/library/modules/_enum-bug-keys.js":function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"../node_modules/core-js/library/modules/_export.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_global.js"),a=n("../node_modules/core-js/library/modules/_core.js"),i=n("../node_modules/core-js/library/modules/_ctx.js"),o=n("../node_modules/core-js/library/modules/_hide.js"),s="prototype",l=function(e,t,n){var u=e&l.F,d=e&l.G,c=e&l.S,f=e&l.P,h=e&l.B,m=e&l.W,p=d?a:a[t]||(a[t]={}),g=p[s],v=d?r:c?r[t]:(r[t]||{})[s],y,b,_;d&&(n=t);for(y in n)(b=!u&&v&&void 0!==v[y])&&y in p||(_=b?v[y]:n[y],p[y]=d&&"function"!=typeof v[y]?n[y]:h&&b?i(_,r):m&&v[y]==_?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[s]=e[s],t}(_):f&&"function"==typeof _?i(Function.call,_):_,f&&((p.virtual||(p.virtual={}))[y]=_,e&l.R&&g&&!g[y]&&o(g,y,_)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},"../node_modules/core-js/library/modules/_fails.js":function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"../node_modules/core-js/library/modules/_for-of.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_ctx.js"),a=n("../node_modules/core-js/library/modules/_iter-call.js"),i=n("../node_modules/core-js/library/modules/_is-array-iter.js"),o=n("../node_modules/core-js/library/modules/_an-object.js"),s=n("../node_modules/core-js/library/modules/_to-length.js"),l=n("../node_modules/core-js/library/modules/core.get-iterator-method.js"),u={},d={};(t=e.exports=function(e,t,n,c,f){var h=f?function(){return e}:l(e),m=r(n,c,t?2:1),p=0,g,v,y,b;if("function"!=typeof h)throw TypeError(e+" is not iterable!");if(i(h)){for(g=s(e.length);g>p;p++)if((b=t?m(o(v=e[p])[0],v[1]):m(e[p]))===u||b===d)return b}else for(y=h.call(e);!(v=y.next()).done;)if((b=a(y,m,v.value,t))===u||b===d)return b}).BREAK=u,t.RETURN=d},"../node_modules/core-js/library/modules/_global.js":function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof d&&(d=n)},"../node_modules/core-js/library/modules/_has.js":function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},"../node_modules/core-js/library/modules/_hide.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_object-dp.js"),a=n("../node_modules/core-js/library/modules/_property-desc.js");e.exports=n("../node_modules/core-js/library/modules/_descriptors.js")?function(e,t,n){return r.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},"../node_modules/core-js/library/modules/_html.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_global.js").document;e.exports=r&&r.documentElement},"../node_modules/core-js/library/modules/_ie8-dom-define.js":function(e,t,n){e.exports=!n("../node_modules/core-js/library/modules/_descriptors.js")&&!n("../node_modules/core-js/library/modules/_fails.js")(function(){return 7!=Object.defineProperty(n("../node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a})},"../node_modules/core-js/library/modules/_invoke.js":function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},"../node_modules/core-js/library/modules/_iobject.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},"../node_modules/core-js/library/modules/_is-array-iter.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_iterators.js"),a=n("../node_modules/core-js/library/modules/_wks.js")("iterator"),i=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||i[a]===e)}},"../node_modules/core-js/library/modules/_is-integer.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_is-object.js"),a=Math.floor;e.exports=function e(t){return!r(t)&&isFinite(t)&&a(t)===t}},"../node_modules/core-js/library/modules/_is-object.js":function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"../node_modules/core-js/library/modules/_iter-call.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,t,n,a){try{return a?t(r(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&r(i.call(e)),t}}},"../node_modules/core-js/library/modules/_iter-create.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_object-create.js"),a=n("../node_modules/core-js/library/modules/_property-desc.js"),i=n("../node_modules/core-js/library/modules/_set-to-string-tag.js"),o={};n("../node_modules/core-js/library/modules/_hide.js")(o,n("../node_modules/core-js/library/modules/_wks.js")("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:a(1,n)}),i(e,t+" Iterator")}},"../node_modules/core-js/library/modules/_iter-define.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_library.js"),a=n("../node_modules/core-js/library/modules/_export.js"),i=n("../node_modules/core-js/library/modules/_redefine.js"),o=n("../node_modules/core-js/library/modules/_hide.js"),s=n("../node_modules/core-js/library/modules/_has.js"),l=n("../node_modules/core-js/library/modules/_iterators.js"),u=n("../node_modules/core-js/library/modules/_iter-create.js"),d=n("../node_modules/core-js/library/modules/_set-to-string-tag.js"),c=n("../node_modules/core-js/library/modules/_object-gpo.js"),f=n("../node_modules/core-js/library/modules/_wks.js")("iterator"),h=!([].keys&&"next"in[].keys()),m="@@iterator",p="keys",g="values",v=function(){return this};e.exports=function(e,t,n,y,b,_,w){u(n,t,y);var E=function(e){if(!h&&e in j)return j[e];switch(e){case p:return function t(){return new n(this,e)};case g:return function t(){return new n(this,e)}}return function t(){return new n(this,e)}},x=t+" Iterator",T=b==g,P=!1,j=e.prototype,S=j[f]||j[m]||b&&j[b],M=S||E(b),O=b?T?E("entries"):M:void 0,I="Array"==t?j.entries||S:S,C,L,k;if(I&&(k=c(I.call(new e)))!==Object.prototype&&k.next&&(d(k,x,!0),r||s(k,f)||o(k,f,v)),T&&S&&S.name!==g&&(P=!0,M=function e(){return S.call(this)}),r&&!w||!h&&!P&&j[f]||o(j,f,M),l[t]=M,l[x]=v,b)if(C={values:T?M:E(g),keys:_?M:E(p),entries:O},w)for(L in C)L in j||i(j,L,C[L]);else a(a.P+a.F*(h||P),t,C);return C}},"../node_modules/core-js/library/modules/_iter-detect.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_wks.js")("iterator"),a=!1;try{var i=[7][r]();i.return=function(){a=!0},Array.from(i,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i=[7],o=i[r]();o.next=function(){return{done:n=!0}},i[r]=function(){return o},e(i)}catch(e){}return n}},"../node_modules/core-js/library/modules/_iter-step.js":function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"../node_modules/core-js/library/modules/_iterators.js":function(e,t){e.exports={}},"../node_modules/core-js/library/modules/_library.js":function(e,t){e.exports=!0},"../node_modules/core-js/library/modules/_math-sign.js":function(e,t){e.exports=Math.sign||function e(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},"../node_modules/core-js/library/modules/_microtask.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_global.js"),a=n("../node_modules/core-js/library/modules/_task.js").set,i=r.MutationObserver||r.WebKitMutationObserver,o=r.process,s=r.Promise,l="process"==n("../node_modules/core-js/library/modules/_cof.js")(o);e.exports=function(){var e,t,n,u=function(){var r,a;for(l&&(r=o.domain)&&r.exit();e;){a=e.fn,e=e.next;try{a()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(l)n=function(){o.nextTick(u)};else if(i){var d=!0,c=document.createTextNode("");new i(u).observe(c,{characterData:!0}),n=function(){c.data=d=!d}}else if(s&&s.resolve){var f=s.resolve();n=function(){f.then(u)}}else n=function(){a.call(r,u)};return function(r){var a={fn:r,next:void 0};t&&(t.next=a),e||(e=a,n()),t=a}}},"../node_modules/core-js/library/modules/_new-promise-capability.js":function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=a(t),this.reject=a(n)}var a=n("../node_modules/core-js/library/modules/_a-function.js");e.exports.f=function(e){return new r(e)}},"../node_modules/core-js/library/modules/_object-assign.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_object-keys.js"),a=n("../node_modules/core-js/library/modules/_object-gops.js"),i=n("../node_modules/core-js/library/modules/_object-pie.js"),s=n("../node_modules/core-js/library/modules/_to-object.js"),l=n("../node_modules/core-js/library/modules/_iobject.js"),u=Object.assign;e.exports=!u||n("../node_modules/core-js/library/modules/_fails.js")(function(){var e={},t={},n=o(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function e(t,n){for(var o=s(t),u=arguments.length,d=1,c=a.f,f=i.f;u>d;)for(var h=l(arguments[d++]),m=c?r(h).concat(c(h)):r(h),p=m.length,g=0,v;p>g;)f.call(h,v=m[g++])&&(o[v]=h[v]);return o}:u},"../node_modules/core-js/library/modules/_object-create.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_an-object.js"),a=n("../node_modules/core-js/library/modules/_object-dps.js"),i=n("../node_modules/core-js/library/modules/_enum-bug-keys.js"),o=n("../node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),s=function(){},l="prototype",u=function(){var e=n("../node_modules/core-js/library/modules/_dom-create.js")("iframe"),t=i.length,r="<",a=">",o;for(e.style.display="none",n("../node_modules/core-js/library/modules/_html.js").appendChild(e),e.src="javascript:",(o=e.contentWindow.document).open(),o.write("<script>document.F=Object<\/script>"),o.close(),u=o.F;t--;)delete u[l][i[t]];return u()};e.exports=Object.create||function e(t,n){var i;return null!==t?(s[l]=r(t),i=new s,s[l]=null,i[o]=t):i=u(),void 0===n?i:a(i,n)}},"../node_modules/core-js/library/modules/_object-dp.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_an-object.js"),a=n("../node_modules/core-js/library/modules/_ie8-dom-define.js"),i=n("../node_modules/core-js/library/modules/_to-primitive.js"),o=Object.defineProperty;t.f=n("../node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function e(t,n,s){if(r(t),n=i(n,!0),r(s),a)try{return o(t,n,s)}catch(e){}if("get"in s||"set"in s)throw TypeError("Accessors not supported!");return"value"in s&&(t[n]=s.value),t}},"../node_modules/core-js/library/modules/_object-dps.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_object-dp.js"),a=n("../node_modules/core-js/library/modules/_an-object.js"),i=n("../node_modules/core-js/library/modules/_object-keys.js");e.exports=n("../node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function e(t,n){a(t);for(var o=i(n),s=o.length,l=0,u;s>l;)r.f(t,u=o[l++],n[u]);return t}},"../node_modules/core-js/library/modules/_object-gops.js":function(e,t){t.f=Object.getOwnPropertySymbols},"../node_modules/core-js/library/modules/_object-gpo.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_has.js"),a=n("../node_modules/core-js/library/modules/_to-object.js"),i=n("../node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=a(e),r(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},"../node_modules/core-js/library/modules/_object-keys-internal.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_has.js"),a=n("../node_modules/core-js/library/modules/_to-iobject.js"),i=n("../node_modules/core-js/library/modules/_array-includes.js")(!1),o=n("../node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var n=a(e),s=0,l=[],u;for(u in n)u!=o&&r(n,u)&&l.push(u);for(;t.length>s;)r(n,u=t[s++])&&(~i(l,u)||l.push(u));return l}},"../node_modules/core-js/library/modules/_object-keys.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_object-keys-internal.js"),a=n("../node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function e(t){return r(t,a)}},"../node_modules/core-js/library/modules/_object-pie.js":function(e,t){t.f={}.propertyIsEnumerable},"../node_modules/core-js/library/modules/_object-sap.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_export.js"),a=n("../node_modules/core-js/library/modules/_core.js"),i=n("../node_modules/core-js/library/modules/_fails.js");e.exports=function(e,t){var n=(a.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*i(function(){n(1)}),"Object",o)}},"../node_modules/core-js/library/modules/_perform.js":function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},"../node_modules/core-js/library/modules/_promise-resolve.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_an-object.js"),a=n("../node_modules/core-js/library/modules/_is-object.js"),i=n("../node_modules/core-js/library/modules/_new-promise-capability.js");e.exports=function(e,t){if(r(e),a(t)&&t.constructor===e)return t;var n=i.f(e);return(0,n.resolve)(t),n.promise}},"../node_modules/core-js/library/modules/_property-desc.js":function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"../node_modules/core-js/library/modules/_redefine-all.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_hide.js");e.exports=function(e,t,n){for(var a in t)n&&e[a]?e[a]=t[a]:r(e,a,t[a]);return e}},"../node_modules/core-js/library/modules/_redefine.js":function(e,t,n){e.exports=n("../node_modules/core-js/library/modules/_hide.js")},"../node_modules/core-js/library/modules/_set-species.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_global.js"),a=n("../node_modules/core-js/library/modules/_core.js"),i=n("../node_modules/core-js/library/modules/_object-dp.js"),o=n("../node_modules/core-js/library/modules/_descriptors.js"),s=n("../node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var t="function"==typeof a[e]?a[e]:r[e];o&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},"../node_modules/core-js/library/modules/_set-to-string-tag.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_object-dp.js").f,a=n("../node_modules/core-js/library/modules/_has.js"),i=n("../node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,i)&&r(e,i,{configurable:!0,value:t})}},"../node_modules/core-js/library/modules/_shared-key.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_shared.js")("keys"),a=n("../node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return r[e]||(r[e]=a(e))}},"../node_modules/core-js/library/modules/_shared.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_global.js"),a="__core-js_shared__",i=r[a]||(r[a]={});e.exports=function(e){return i[e]||(i[e]={})}},"../node_modules/core-js/library/modules/_species-constructor.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_an-object.js"),a=n("../node_modules/core-js/library/modules/_a-function.js"),i=n("../node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e,t){var n=r(e).constructor,o;return void 0===n||void 0==(o=r(n)[i])?t:a(o)}},"../node_modules/core-js/library/modules/_string-at.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_to-integer.js"),a=n("../node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(t,n){var i=String(a(t)),o=r(n),s=i.length,l,u;return o<0||o>=s?e?"":void 0:(l=i.charCodeAt(o))<55296||l>56319||o+1===s||(u=i.charCodeAt(o+1))<56320||u>57343?e?i.charAt(o):l:e?i.slice(o,o+2):u-56320+(l-55296<<10)+65536}}},"../node_modules/core-js/library/modules/_task.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_ctx.js"),a=n("../node_modules/core-js/library/modules/_invoke.js"),i=n("../node_modules/core-js/library/modules/_html.js"),o=n("../node_modules/core-js/library/modules/_dom-create.js"),s=n("../node_modules/core-js/library/modules/_global.js"),l=s.process,u=s.setImmediate,d=s.clearImmediate,c=s.MessageChannel,f=s.Dispatch,h=0,m={},p="onreadystatechange",g,v,y,b=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},_=function(e){b.call(e.data)};u&&d||(u=function e(t){for(var n=[],r=1;arguments.length>r;)n.push(arguments[r++]);return m[++h]=function(){a("function"==typeof t?t:Function(t),n)},g(h),h},d=function e(t){delete m[t]},"process"==n("../node_modules/core-js/library/modules/_cof.js")(l)?g=function(e){l.nextTick(r(b,e,1))}:f&&f.now?g=function(e){f.now(r(b,e,1))}:c?(y=(v=new c).port2,v.port1.onmessage=_,g=r(y.postMessage,y,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(g=function(e){s.postMessage(e+"","*")},s.addEventListener("message",_,!1)):g=p in o("script")?function(e){i.appendChild(o("script"))[p]=function(){i.removeChild(this),b.call(e)}}:function(e){setTimeout(r(b,e,1),0)}),e.exports={set:u,clear:d}},"../node_modules/core-js/library/modules/_to-absolute-index.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_to-integer.js"),a=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?a(e+t,0):i(e,t)}},"../node_modules/core-js/library/modules/_to-integer.js":function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},"../node_modules/core-js/library/modules/_to-iobject.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_iobject.js"),a=n("../node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return r(a(e))}},"../node_modules/core-js/library/modules/_to-length.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_to-integer.js"),a=Math.min;e.exports=function(e){return e>0?a(r(e),9007199254740991):0}},"../node_modules/core-js/library/modules/_to-object.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(r(e))}},"../node_modules/core-js/library/modules/_to-primitive.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!r(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!r(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!r(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},"../node_modules/core-js/library/modules/_uid.js":function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},"../node_modules/core-js/library/modules/_wks.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_shared.js")("wks"),a=n("../node_modules/core-js/library/modules/_uid.js"),i=n("../node_modules/core-js/library/modules/_global.js").Symbol,o="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=o&&i[e]||(o?i:a)("Symbol."+e))}).store=r},"../node_modules/core-js/library/modules/core.get-iterator-method.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_classof.js"),a=n("../node_modules/core-js/library/modules/_wks.js")("iterator"),i=n("../node_modules/core-js/library/modules/_iterators.js");e.exports=n("../node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(void 0!=e)return e[a]||e["@@iterator"]||i[r(e)]}},"../node_modules/core-js/library/modules/es6.array.from.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_ctx.js"),a=n("../node_modules/core-js/library/modules/_export.js"),i=n("../node_modules/core-js/library/modules/_to-object.js"),o=n("../node_modules/core-js/library/modules/_iter-call.js"),s=n("../node_modules/core-js/library/modules/_is-array-iter.js"),l=n("../node_modules/core-js/library/modules/_to-length.js"),u=n("../node_modules/core-js/library/modules/_create-property.js"),d=n("../node_modules/core-js/library/modules/core.get-iterator-method.js");a(a.S+a.F*!n("../node_modules/core-js/library/modules/_iter-detect.js")(function(e){Array.from(e)}),"Array",{from:function e(t){var n=i(t),a="function"==typeof this?this:Array,c=arguments.length,f=c>1?arguments[1]:void 0,h=void 0!==f,m=0,p=d(n),g,v,y,b;if(h&&(f=r(f,c>2?arguments[2]:void 0,2)),void 0==p||a==Array&&s(p))for(v=new a(g=l(n.length));g>m;m++)u(v,m,h?f(n[m],m):n[m]);else for(b=p.call(n),v=new a;!(y=b.next()).done;m++)u(v,m,h?o(b,f,[y.value,m],!0):y.value);return v.length=m,v}})},"../node_modules/core-js/library/modules/es6.array.iterator.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_add-to-unscopables.js"),a=n("../node_modules/core-js/library/modules/_iter-step.js"),i=n("../node_modules/core-js/library/modules/_iterators.js"),o=n("../node_modules/core-js/library/modules/_to-iobject.js");e.exports=n("../node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,a(1)):"keys"==t?a(0,n):"values"==t?a(0,e[n]):a(0,[n,e[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},"../node_modules/core-js/library/modules/es6.math.sign.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_export.js");r(r.S,"Math",{sign:n("../node_modules/core-js/library/modules/_math-sign.js")})},"../node_modules/core-js/library/modules/es6.number.is-integer.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_export.js");r(r.S,"Number",{isInteger:n("../node_modules/core-js/library/modules/_is-integer.js")})},"../node_modules/core-js/library/modules/es6.object.assign.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_export.js");r(r.S+r.F,"Object",{assign:n("../node_modules/core-js/library/modules/_object-assign.js")})},"../node_modules/core-js/library/modules/es6.object.define-property.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_export.js");r(r.S+r.F*!n("../node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:n("../node_modules/core-js/library/modules/_object-dp.js").f})},"../node_modules/core-js/library/modules/es6.object.keys.js":function(e,t,n){var r=n("../node_modules/core-js/library/modules/_to-object.js"),a=n("../node_modules/core-js/library/modules/_object-keys.js");n("../node_modules/core-js/library/modules/_object-sap.js")("keys",function(){return function e(t){return a(r(t))}})},"../node_modules/core-js/library/modules/es6.object.to-string.js":function(e,t){},"../node_modules/core-js/library/modules/es6.promise.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_library.js"),a=n("../node_modules/core-js/library/modules/_global.js"),i=n("../node_modules/core-js/library/modules/_ctx.js"),o=n("../node_modules/core-js/library/modules/_classof.js"),s=n("../node_modules/core-js/library/modules/_export.js"),l=n("../node_modules/core-js/library/modules/_is-object.js"),u=n("../node_modules/core-js/library/modules/_a-function.js"),d=n("../node_modules/core-js/library/modules/_an-instance.js"),c=n("../node_modules/core-js/library/modules/_for-of.js"),f=n("../node_modules/core-js/library/modules/_species-constructor.js"),h=n("../node_modules/core-js/library/modules/_task.js").set,m=n("../node_modules/core-js/library/modules/_microtask.js")(),p=n("../node_modules/core-js/library/modules/_new-promise-capability.js"),g=n("../node_modules/core-js/library/modules/_perform.js"),v=n("../node_modules/core-js/library/modules/_promise-resolve.js"),y="Promise",b=a.TypeError,_=a.process,w=a[y],E="process"==o(_),x=function(){},T,P,j,S,M=P=p.f,O=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[n("../node_modules/core-js/library/modules/_wks.js")("species")]=function(e){e(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),I=function(e){var t;return!(!l(e)||"function"!=typeof(t=e.then))&&t},C=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,a=1==e._s,i=0,o=function(t){var n=a?t.ok:t.fail,i=t.resolve,o=t.reject,s=t.domain,l,u;try{n?(a||(2==e._h&&A(e),e._h=1),!0===n?l=r:(s&&s.enter(),l=n(r),s&&s.exit()),l===t.promise?o(b("Promise-chain cycle")):(u=I(l))?u.call(l,i,o):i(l)):o(r)}catch(e){o(e)}};n.length>i;)o(n[i++]);e._c=[],e._n=!1,t&&!e._h&&L(e)})}},L=function(e){h.call(a,function(){var t=e._v,n=k(e),r,i,o;if(n&&(r=g(function(){E?_.emit("unhandledRejection",t,e):(i=a.onunhandledrejection)?i({promise:e,reason:t}):(o=a.console)&&o.error&&o.error("Unhandled promise rejection",t)}),e._h=E||k(e)?2:1),e._a=void 0,n&&r.e)throw r.v})},k=function(e){if(1==e._h)return!1;for(var t=e._a||e._c,n=0,r;t.length>n;)if((r=t[n++]).fail||!k(r.promise))return!1;return!0},A=function(e){h.call(a,function(){var t;E?_.emit("rejectionHandled",e):(t=a.onrejectionhandled)&&t({promise:e,reason:e._v})})},D=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),C(t,!0))},R=function(e){var t=this,n;if(!t._d){t._d=!0,t=t._w||t;try{if(t===e)throw b("Promise can't be resolved itself");(n=I(e))?m(function(){var r={_w:t,_d:!1};try{n.call(e,i(R,r,1),i(D,r,1))}catch(e){D.call(r,e)}}):(t._v=e,t._s=1,C(t,!1))}catch(e){D.call({_w:t,_d:!1},e)}}};O||(w=function e(t){d(this,w,y,"_h"),u(t),T.call(this);try{t(i(R,this,1),i(D,this,1))}catch(e){D.call(this,e)}},(T=function e(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n("../node_modules/core-js/library/modules/_redefine-all.js")(w.prototype,{then:function e(t,n){var r=M(f(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof n&&n,r.domain=E?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&C(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),j=function(){var e=new T;this.promise=e,this.resolve=i(R,e,1),this.reject=i(D,e,1)},p.f=M=function(e){return e===w||e===S?new j(e):P(e)}),s(s.G+s.W+s.F*!O,{Promise:w}),n("../node_modules/core-js/library/modules/_set-to-string-tag.js")(w,y),n("../node_modules/core-js/library/modules/_set-species.js")(y),S=n("../node_modules/core-js/library/modules/_core.js")[y],s(s.S+s.F*!O,y,{reject:function e(t){var n=M(this);return(0,n.reject)(t),n.promise}}),s(s.S+s.F*(r||!O),y,{resolve:function e(t){return v(r&&this===S?w:this,t)}}),s(s.S+s.F*!(O&&n("../node_modules/core-js/library/modules/_iter-detect.js")(function(e){w.all(e).catch(x)})),y,{all:function e(t){var n=this,r=M(n),a=r.resolve,i=r.reject,o=g(function(){var e=[],r=0,o=1;c(t,!1,function(t){var s=r++,l=!1;e.push(void 0),o++,n.resolve(t).then(function(t){l||(l=!0,e[s]=t,--o||a(e))},i)}),--o||a(e)});return o.e&&i(o.v),r.promise},race:function e(t){var n=this,r=M(n),a=r.reject,i=g(function(){c(t,!1,function(e){n.resolve(e).then(r.resolve,a)})});return i.e&&a(i.v),r.promise}})},"../node_modules/core-js/library/modules/es6.string.iterator.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_string-at.js")(!0);n("../node_modules/core-js/library/modules/_iter-define.js")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,n;return t>=e.length?{value:void 0,done:!0}:(n=r(e,t),this._i+=n.length,{value:n,done:!1})})},"../node_modules/core-js/library/modules/es7.promise.finally.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_export.js"),a=n("../node_modules/core-js/library/modules/_core.js"),i=n("../node_modules/core-js/library/modules/_global.js"),o=n("../node_modules/core-js/library/modules/_species-constructor.js"),s=n("../node_modules/core-js/library/modules/_promise-resolve.js");r(r.P+r.R,"Promise",{finally:function(e){var t=o(this,a.Promise||i.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},"../node_modules/core-js/library/modules/es7.promise.try.js":function(e,t,n){"use strict";var r=n("../node_modules/core-js/library/modules/_export.js"),a=n("../node_modules/core-js/library/modules/_new-promise-capability.js"),i=n("../node_modules/core-js/library/modules/_perform.js");r(r.S,"Promise",{try:function(e){var t=a.f(this),n=i(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},"../node_modules/core-js/library/modules/web.dom.iterable.js":function(e,t,n){n("../node_modules/core-js/library/modules/es6.array.iterator.js");for(var r=n("../node_modules/core-js/library/modules/_global.js"),a=n("../node_modules/core-js/library/modules/_hide.js"),i=n("../node_modules/core-js/library/modules/_iterators.js"),o=n("../node_modules/core-js/library/modules/_wks.js")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],d=r[u],c=d&&d.prototype;c&&!c[o]&&a(c,o,u),i[u]=i.Array}},"../node_modules/regenerator-runtime/runtime-module.js":function(e,t,n){var r=function(){return this}()||Function("return this")(),a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,i=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n("../node_modules/regenerator-runtime/runtime.js"),a)r.regeneratorRuntime=i;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},"../node_modules/regenerator-runtime/runtime.js":function(e,t){!function(t){"use strict";function n(e,t,n,r){var i=t&&t.prototype instanceof a?t:a,o=Object.create(i.prototype),s=new p(r||[]);return o._invoke=c(e,n,s),o}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function s(){}function l(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function d(e){function t(n,a,o,s){var l=r(e[n],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==typeof d&&b.call(d,"__await")?i.resolve(d.__await).then(function(e){t("next",e,o,s)},function(e){t("throw",e,o,s)}):i.resolve(d).then(function(e){u.value=e,o(u)},s)}s(l.arg)}function n(e,n){function r(){return new i(function(r,a){t(e,n,r,a)})}return a=a?a.then(r,r):r()}var a;this._invoke=n}function c(e,t,n){var a=S;return function i(o,s){if(a===O)throw new Error("Generator is already running");if(a===I){if("throw"===o)throw s;return v()}for(n.method=o,n.arg=s;;){var l=n.delegate;if(l){var u=f(l,n);if(u){if(u===C)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===S)throw a=I,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=O;var d=r(e,t,n);if("normal"===d.type){if(a=n.done?I:M,d.arg===C)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(a=I,n.method="throw",n.arg=d.arg)}}}function f(e,t){var n=e.iterator[t.method];if(n===_){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=_,f(e,t),"throw"===t.method))return C;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var a=r(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,C;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=_),t.delegate=null,C):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,C)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function m(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function g(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=_,t.done=!0,t};return r.next=r}}return{next:v}}function v(){return{value:_,done:!0}}var y=Object.prototype,b=y.hasOwnProperty,_,w="function"==typeof o?o:{},E=w.iterator||"@@iterator",x=w.asyncIterator||"@@asyncIterator",T=w.toStringTag||"@@toStringTag",P="object"==typeof e,j=t.regeneratorRuntime;if(j)P&&(e.exports=j);else{(j=t.regeneratorRuntime=P?e.exports:{}).wrap=n;var S="suspendedStart",M="suspendedYield",O="executing",I="completed",C={},L={};L[E]=function(){return this};var k=Object.getPrototypeOf,A=k&&k(k(g([])));A&&A!==y&&b.call(A,E)&&(L=A);var D=l.prototype=a.prototype=Object.create(L);s.prototype=D.constructor=l,l.constructor=s,l[T]=s.displayName="GeneratorFunction",j.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===s||"GeneratorFunction"===(t.displayName||t.name))},j.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,T in e||(e[T]="GeneratorFunction")),e.prototype=Object.create(D),e},j.awrap=function(e){return{__await:e}},u(d.prototype),d.prototype[x]=function(){return this},j.AsyncIterator=d,j.async=function(e,t,r,a){var i=new d(n(e,t,r,a));return j.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},u(D),D[T]="Generator",D[E]=function(){return this},D.toString=function(){return"[object Generator]"},j.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},j.values=g,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=_,this.done=!1,this.delegate=null,this.method="next",this.arg=_,this.tryEntries.forEach(m),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=_)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=_),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return t("end");if(a.tryLoc<=this.prev){var o=b.call(a,"catchLoc"),s=b.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return t(a.catchLoc,!0);if(this.prev<a.finallyLoc)return t(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return t(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return t(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,C):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),C},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),m(n),C}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;m(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:g(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=_),C}}}}(function(){return this}()||Function("return this")())},"./events.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={IMAGE_RENDERED:"cornerstoneimagerendered",NEW_IMAGE:"cornerstonenewimage",IMAGE_CACHE_PROMISE_REMOVED:"cornerstoneimagecachepromiseremoved",ELEMENT_DISABLED:"cornerstoneelementdisabled",MOUSE_DOWN:"cornerstonetoolsmousedown",MOUSE_UP:"cornerstonetoolsmouseup",MOUSE_DOWN_ACTIVATE:"cornerstonetoolsmousedownactivate",MOUSE_DRAG:"cornerstonetoolsmousedrag",MOUSE_MOVE:"cornerstonetoolsmousemove",MOUSE_CLICK:"cornerstonetoolsmouseclick",MOUSE_DOUBLE_CLICK:"cornerstonetoolsmousedoubleclick",MOUSE_WHEEL:"cornerstonetoolsmousewheel",TOUCH_START:"cornerstonetoolstouchstart",TOUCH_START_ACTIVE:"cornerstonetoolstouchstartactive",TOUCH_END:"cornerstonetoolstouchend",TOUCH_DRAG:"cornerstonetoolstouchdrag",TOUCH_DRAG_END:"cornerstonetoolstouchdragend",TOUCH_PINCH:"cornerstonetoolstouchpinch",TOUCH_ROTATE:"cornerstonetoolstouchrotate",TOUCH_PRESS:"cornerstonetoolstouchpress",TAP:"cornerstonetoolstap",DOUBLE_TAP:"cornerstonetoolsdoubletap",MULTI_TOUCH_START:"cornerstonetoolsmultitouchstart",MULTI_TOUCH_START_ACTIVE:"cornerstonetoolsmultitouchstartactive",MULTI_TOUCH_DRAG:"cornerstonetoolsmultitouchdrag",KEY_DOWN:"cornerstonetoolskeydown",KEY_UP:"cornerstonetoolskeyup",KEY_PRESS:"cornerstonetoolskeypress",MEASUREMENT_ADDED:"cornerstonetoolsmeasurementadded",MEASUREMENT_MODIFIED:"cornerstonetoolsmeasurementmodified",MEASUREMENT_REMOVED:"cornerstonemeasurementremoved",TOOL_DEACTIVATED:"cornerstonetoolstooldeactivated",CLIP_STOPPED:"cornerstonetoolsclipstopped",STACK_SCROLL:"cornerstonestackscroll",LINE_SAMPLE_UPDATED:"cornerstonelinesampleupdated"};t.default=r},"./externalModules.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.cornerstone,a=window.cornerstoneMath,i=window.Hammer,o=window.OHIF;t.default={set cornerstone(e){r=e},get cornerstone(){return r},set cornerstoneMath(e){a=e},get cornerstoneMath(){return a},set Hammer(e){i=e},get Hammer(){return i},set OHIF(e){o=e},get OHIF(){return o}}},"./imageTools/angleTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},start2:{x:e.currentPoints.image.x-20,y:e.currentPoints.image.y+10,highlight:!0,active:!1},end2:{x:e.currentPoints.image.x,y:e.currentPoints.image.y+20,highlight:!0,active:!1}}}}function i(e,t,n){return!1!==t.visible&&((0,g.default)(e,t.handles.start,t.handles.end,n)<5||(0,g.default)(e,t.handles.start2,t.handles.end2,n)<5)}function o(e){var t=e.detail,n=(0,p.getToolState)(e.currentTarget,y);if(void 0!==n)for(var r=(0,v.getNewContext)(t.canvasContext.canvas),a=f.default.getFont(),i=b.getConfiguration(),o=s.default.cornerstone,l=function e(s){var l=n.data[s];if(!1===l.visible)return"continue";(0,v.draw)(r,function(e){(0,v.setShadow)(e,i);var n=h.default.getColorIfActive(l);(0,v.drawJoinedLines)(e,t.element,l.handles.end,[l.handles.start,l.handles.end2],{color:n}),(0,m.default)(e,t,l.handles),e.fillStyle=n;var r=(Math.ceil(l.handles.start.x)-Math.ceil(l.handles.end.x))*t.image.columnPixelSpacing,s=(Math.ceil(l.handles.start.y)-Math.ceil(l.handles.end.y))*t.image.rowPixelSpacing,u=(Math.ceil(l.handles.start2.x)-Math.ceil(l.handles.end2.x))*t.image.columnPixelSpacing,f=(Math.ceil(l.handles.start2.y)-Math.ceil(l.handles.end2.y))*t.image.rowPixelSpacing,p=Math.acos(Math.abs((r*u+s*f)/(Math.sqrt(r*r+s*s)*Math.sqrt(u*u+f*f))));p*=180/Math.PI;var g="00B0",y=(0,c.default)(p,2).toString()+String.fromCharCode(parseInt(g,16)),b=o.pixelToCanvas(t.element,l.handles.start2),_=o.pixelToCanvas(t.element,l.handles.end2),w=(b.x+_.x)/2,E=(b.y+_.y)/2;e.font=a,(0,d.default)(e,y,w,E,n)})},u=0;u<n.data.length;u++){var g=l(u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.angleTouch=t.angle=void 0;var s=r(n("./externalModules.js")),l=r(n("./imageTools/mouseButtonTool.js")),u=r(n("./imageTools/touchTool.js")),d=r(n("./util/drawTextBox.js")),c=r(n("./util/roundToDecimal.js")),f=r(n("./stateManagement/textStyle.js")),h=r(n("./stateManagement/toolColors.js")),m=r(n("./manipulators/drawHandles.js")),p=n("./stateManagement/toolState.js"),g=r(n("./util/lineSegDistance.js")),v=n("./util/drawing.js"),y="angle",b=(0,l.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:y}),_=(0,u.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:y});t.angle=b,t.angleTouch=_},"./imageTools/arrowAnnotate.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e(prompt("Enter your annotation:"))}function i(e,t,n){n(prompt("Change your annotation:"))}function o(e){function t(e){null===e?(0,M.removeToolState)(n,L,r):r.text=e,r.active=!1,a.updateImage(n),n.addEventListener(h.default.MOUSE_MOVE,A.mouseMoveCallback),n.addEventListener(h.default.MOUSE_DOWN,A.mouseDownCallback),n.addEventListener(h.default.MOUSE_DOWN_ACTIVATE,A.mouseDownActivateCallback),n.addEventListener(h.default.MOUSE_DOUBLE_CLICK,A.mouseDoubleClickCallback)}var n=e.element,r=s(e),a=m.default.cornerstone;(0,M.addToolState)(n,L,r),n.removeEventListener(h.default.MOUSE_MOVE,A.mouseMoveCallback),n.removeEventListener(h.default.MOUSE_DOWN,A.mouseDownCallback),n.removeEventListener(h.default.MOUSE_DOWN_ACTIVATE,A.mouseDownActivateCallback),n.removeEventListener(h.default.MOUSE_DOUBLE_CLICK,A.mouseDoubleClickCallback),a.updateImage(n),(0,E.default)(e,L,r,r.handles.end,function(){(0,T.default)(e,r.handles)&&(0,M.removeToolState)(n,L,r);var i=A.getConfiguration();void 0===r.text&&i.getTextCallback(t),a.updateImage(n)})}function s(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function l(e,t,n){return!1!==t.visible&&(0,I.default)(e,t.handles.start,t.handles.end,n)<25}function u(e){function t(e){return e.text}function n(e){var t={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};return[e.start,t,e.end]}var r=e.detail,a=(0,M.getToolState)(e.currentTarget,L);if(a)for(var i=r.enabledElement,o=m.default.cornerstone,s=(0,C.getNewContext)(r.canvasContext.canvas),l=v.default.getToolWidth(),u=y.default.getFont(),d=A.getConfiguration(),c=function e(c){var f=a.data[c];if(!1===f.visible)return"continue";(0,C.draw)(s,function(e){(0,C.setShadow)(e,d);var a=b.default.getColorIfActive(f),s=o.pixelToCanvas(r.element,f.handles.start),c=o.pixelToCanvas(r.element,f.handles.end);d.arrowFirst?(0,w.default)(e,c,s,a,l):(0,w.default)(e,s,c,a,l);var h={drawHandlesIfActive:d&&d.drawHandlesOnHover};d.drawHandles&&(0,_.default)(e,r,f.handles,a,h);var m=t(f);if(m&&""!==m){e.font=u;var p=e.measureText(m).width+10,g=y.default.getFontSize()+10,v=Math.max(p,g)/2+5;if(c.x<s.x&&(v=-v),!f.handles.textBox.hasMoved){var E=void 0;E=d.arrowFirst?{x:c.x-p/2+v,y:c.y-g/2}:{x:s.x-p/2-v,y:s.y-g/2};var x=o.internal.getTransform(i);x.invert();var T=x.transformPoint(E.x,E.y);f.handles.textBox.x=T.x,f.handles.textBox.y=T.y}(0,S.default)(e,r.element,f.handles.textBox,m,f.handles,n,a,l,0,!1)}})},f=0;f<a.data.length;f++){var h=c(f)}}function d(e){function t(e){null===e?(0,M.removeToolState)(n,L,r):r.text=e,r.active=!1,a.updateImage(n),n.addEventListener(h.default.TOUCH_PRESS,D.pressCallback),n.addEventListener(h.default.TOUCH_START_ACTIVE,D.touchDownActivateCallback),n.addEventListener(h.default.TAP,D.tapCallback)}var n=e.element,r=s(e),a=m.default.cornerstone;(0,M.addToolState)(n,L,r),n.removeEventListener(h.default.TOUCH_PRESS,D.pressCallback),n.removeEventListener(h.default.TOUCH_START_ACTIVE,D.touchDownActivateCallback),n.removeEventListener(h.default.TAP,D.tapCallback),a.updateImage(n),(0,x.default)(e,L,r,r.handles.end,function(){a.updateImage(n),(0,T.default)(e,r.handles)&&(0,M.removeToolState)(n,L,r);var i=A.getConfiguration();void 0===r.text&&i.getTextCallback(t)})}function c(e){function t(e,t,n){!0===n?(0,M.removeToolState)(r,L,e):e.text=t,e.active=!1,a.updateImage(r)}var n=e.detail,r=n.element,a=m.default.cornerstone,i=(0,O.getToolOptions)(L,r),o=void 0;if((0,P.default)(n.which,i.mouseButtonMask)){var s=A.getConfiguration(),u=n.currentPoints.canvas,d=(0,M.getToolState)(r,L);if(d)for(var c=0;c<d.data.length;c++)if(o=d.data[c],l(r,o,u)||(0,j.default)(o.handles.textBox,u))return o.active=!0,a.updateImage(r),s.changeTextCallback(o,n,t),e.stopImmediatePropagation(),!1}}function f(e){function t(e,t,n){console.log("pressCallback doneChangingTextCallback"),!0===n?(0,M.removeToolState)(r,L,e):e.text=t,e.active=!1,a.updateImage(r),r.addEventListener(h.default.TOUCH_START,D.touchStartCallback),r.addEventListener(h.default.TOUCH_START_ACTIVE,D.touchDownActivateCallback),r.addEventListener(h.default.TAP,D.tapCallback)}var n=e.detail,r=n.element,a=m.default.cornerstone,i=void 0,o=A.getConfiguration(),s=n.currentPoints.canvas,u=(0,M.getToolState)(r,L);if(u){if(n.handlePressed)return r.removeEventListener(h.default.TOUCH_START,D.touchStartCallback),r.removeEventListener(h.default.TOUCH_START_ACTIVE,D.touchDownActivateCallback),r.removeEventListener(h.default.TAP,D.tapCallback),o.changeTextCallback(n.handlePressed,n,t),e.stopImmediatePropagation(),!1;for(var d=0;d<u.data.length;d++)if(i=u.data[d],l(r,i,s)||(0,j.default)(i.handles.textBox,s))return i.active=!0,a.updateImage(r),r.removeEventListener(h.default.TOUCH_START,D.touchStartCallback),r.removeEventListener(h.default.TOUCH_START_ACTIVE,D.touchDownActivateCallback),r.removeEventListener(h.default.TAP,D.tapCallback),o.changeTextCallback(i,n,t),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}Object.defineProperty(t,"__esModule",{value:!0}),t.arrowAnnotateTouch=t.arrowAnnotate=void 0;var h=r(n("./events.js")),m=r(n("./externalModules.js")),p=r(n("./imageTools/mouseButtonTool.js")),g=r(n("./imageTools/touchTool.js")),v=r(n("./stateManagement/toolStyle.js")),y=r(n("./stateManagement/textStyle.js")),b=r(n("./stateManagement/toolColors.js")),_=r(n("./manipulators/drawHandles.js")),w=r(n("./util/drawArrow.js")),E=r(n("./manipulators/moveNewHandle.js")),x=r(n("./manipulators/moveNewHandleTouch.js")),T=r(n("./manipulators/anyHandlesOutsideImage.js")),P=r(n("./util/isMouseButtonEnabled.js")),j=r(n("./util/pointInsideBoundingBox.js")),S=r(n("./util/drawLinkedTextBox.js")),M=n("./stateManagement/toolState.js"),O=n("./toolOptions.js"),I=r(n("./util/lineSegDistance.js")),C=n("./util/drawing.js"),L="arrowAnnotate",k={getTextCallback:a,changeTextCallback:i,drawHandles:!1,drawHandlesOnHover:!0,arrowFirst:!0},A=(0,p.default)({addNewMeasurement:o,createNewMeasurement:s,onImageRendered:u,pointNearTool:l,toolType:L,mouseDoubleClickCallback:c});A.setConfiguration(k);var D=(0,g.default)({addNewMeasurement:d,createNewMeasurement:s,onImageRendered:u,pointNearTool:l,toolType:L,pressCallback:f});t.arrowAnnotate=A,t.arrowAnnotateTouch=D},"./imageTools/crosshairs.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail;e.stopImmediatePropagation();var n=(0,y.getToolState)(e.currentTarget,x);if(n){var r=g.default.cornerstone,a=e.currentTarget,i=r.getEnabledElement(a).image.imageId,o=r.metaData.get("imagePlaneModule",i);if(o){var s=t.currentPoints.image,l=(0,_.imagePointToPatientPoint)(s,o);n.data[0].synchronizationContext.getSourceElements().forEach(function(e){if(e!==a){var t=Number.MAX_VALUE,n=-1,i=(0,y.getToolState)(e,"stack");if(void 0!==i){var o=i.data[0];if(o.imageIds.forEach(function(e,a){var i=r.metaData.get("imagePlaneModule",e);if(i&&i.imagePositionPatient&&i.rowCosines&&i.columnCosines){var o=(0,w.default)(i.imagePositionPatient),s=(0,w.default)(i.rowCosines),u=(0,w.default)(i.columnCosines).clone().cross(s.clone()),d=Math.abs(u.clone().dot(o)-u.clone().dot(l));d<t&&(t=d,n=a)}}),n!==o.currentImageIdIndex&&-1!==n&&void 0!==o.imageIds[n]){var s=v.default.getStartLoadHandler(),u=v.default.getEndLoadHandler(),d=v.default.getErrorLoadingHandler();s&&s(e);var c=void 0;(c=!0===o.preventCache?r.loadImage(o.imageIds[n]):r.loadAndCacheImage(o.imageIds[n])).then(function(t){var a=r.getViewport(e);o.currentImageIdIndex=n,r.displayImage(e,t,a),u&&u(e,t)},function(t){var r=o.imageIds[n];d&&d(e,r,t)})}}}})}}}function i(e){var t=e.detail.element;t.removeEventListener(p.default.MOUSE_DRAG,s),t.removeEventListener(p.default.MOUSE_UP,i)}function o(e){var t=e.detail,n=t.element,r=(0,E.getToolOptions)(x,n);(0,b.default)(t.which,r.mouseButtonMask)&&(n.addEventListener(p.default.MOUSE_DRAG,s),n.addEventListener(p.default.MOUSE_UP,i),a(e),e.preventDefault(),e.stopPropagation())}function s(e){a(e),e.preventDefault(),e.stopPropagation()}function l(e,t,n){(0,E.setToolOptions)(x,e,{mouseButtonMask:t}),(0,y.clearToolState)(e,x),(0,y.addToolState)(e,x,{synchronizationContext:n}),e.removeEventListener(p.default.MOUSE_DOWN,o),e.addEventListener(p.default.MOUSE_DOWN,o)}function u(e){e.removeEventListener(p.default.MOUSE_DOWN,o)}function d(e){var t=e.detail.element;t.removeEventListener(p.default.TOUCH_DRAG,f),t.removeEventListener(p.default.TOUCH_DRAG_END,d)}function c(e){var t=e.detail.element;return t.addEventListener(p.default.TOUCH_DRAG,f),t.addEventListener(p.default.TOUCH_DRAG_END,d),a(e),!1}function f(e){a(e),e.preventDefault(),e.stopPropagation()}function h(e,t){(0,y.clearToolState)(e,x),(0,y.addToolState)(e,x,{synchronizationContext:t}),e.removeEventListener(p.default.TOUCH_START,c),e.addEventListener(p.default.TOUCH_START,c)}function m(e){e.removeEventListener(p.default.TOUCH_START,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.crosshairsTouch=t.crosshairs=void 0;var p=r(n("./events.js")),g=r(n("./externalModules.js")),v=r(n("./stateManagement/loadHandlerManager.js")),y=n("./stateManagement/toolState.js"),b=r(n("./util/isMouseButtonEnabled.js")),_=n("./util/pointProjector.js"),w=r(n("./util/convertToVector3.js")),E=n("./toolOptions.js"),x="crosshairs",T={activate:l,deactivate:u,enable:l,disable:u},P={activate:h,deactivate:m,enable:h,disable:m};t.crosshairs=T,t.crosshairsTouch=P},"./imageTools/displayTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{disable:function t(n){n.removeEventListener(a.default.IMAGE_RENDERED,e)},enable:function t(n){n.removeEventListener(a.default.IMAGE_RENDERED,e),n.addEventListener(a.default.IMAGE_RENDERED,e),i.default.cornerstone.updateImage(n)},getConfiguration:function e(){return t},setConfiguration:function e(n){t=n}}};var a=r(n("./events.js")),i=r(n("./externalModules.js"))},"./imageTools/doubleTapTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function t(n){n.removeEventListener(a.default.DOUBLE_TAP,e),n.addEventListener(a.default.DOUBLE_TAP,e)},disable:function t(n){n.removeEventListener(a.default.DOUBLE_TAP,e)},enable:function t(n){n.removeEventListener(a.default.DOUBLE_TAP,e)},deactivate:function t(n){n.removeEventListener(a.default.DOUBLE_TAP,e)}}};var a=r(n("./events.js"))},"./imageTools/doubleTapZoom.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){o.default.cornerstone.fitToWindow(e.element)}function i(e){var t=e.detail;s.strategy(t),e.preventDefault(),e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("./externalModules.js")),s=(0,r(n("./imageTools/doubleTapTool.js")).default)(i);s.strategies={default:a},s.strategy=a,t.default=s},"./imageTools/dragProbe.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=h.default.cornerstone,n=t.getEnabledElement(e.element),r=(0,x.getNewContext)(n.canvas),a=v.default.getActiveColor(),i=g.default.getFont(),o=g.default.getFontSize(),s=j.getConfiguration(),l=Math.round(e.currentPoints.image.x),u=Math.round(e.currentPoints.image.y);l<0||u<0||l>=e.image.columns||u>=e.image.rows||(0,x.draw)(r,function(n){(0,x.setShadow)(n,s);var r=void 0,d=void 0,c=void 0;if(e.image.color)r=(0,b.default)(e.element,l,u,1,1),d=l+", "+u,c="R: "+r[0]+" G: "+r[1]+" B: "+r[2]+" A: "+r[3];else{var f=(r=t.getStoredPixels(e.element,l,u,1,1))[0],h=f*e.image.slope+e.image.intercept,m=(0,_.default)(e.image,f);d=l+", "+u,c="SP: "+f+" MO: "+parseFloat(h.toFixed(3)),m&&(c+=" SUV: "+parseFloat(m.toFixed(3)))}var p={x:e.currentPoints.image.x+3,y:e.currentPoints.image.y-3},g=t.pixelToCanvas(e.element,p);n.font=i,n.fillStyle=a,(0,y.default)(n,c,g.x,g.y+o+5,a),(0,y.default)(n,d,g.x,g.y,a)})}function i(e){var t=h.default.cornerstone,n=e.element,r=t.getEnabledElement(n),a=r.image,i=(0,x.getNewContext)(r.canvas),o=v.default.getActiveColor(),s=g.default.getFont(),l=j.getConfiguration(),u=void 0;(u=!0===e.isTouchEvent?t.pageToPixel(n,e.currentPoints.page.x,e.currentPoints.page.y-4*g.default.getFontSize()):t.pageToPixel(n,e.currentPoints.page.x,e.currentPoints.page.y-g.default.getFontSize()/2)).x<0||u.y<0||u.x>=a.columns||u.y>=a.rows||(0,x.draw)(i,function(r){(0,x.setShadow)(r,l);var i=t.metaData.get("generalSeriesModule",a.imageId),d=void 0;i&&(d=i.modality);var c=void 0,f="";if(a.color)f="R: "+(c=(0,b.default)(n,u.x,u.y,1,1))[0]+" G: "+c[1]+" B: "+c[2];else{var h=(c=t.getStoredPixels(n,u.x,u.y,1,1))[0],m=h*e.image.slope+e.image.intercept,p=parseFloat(m.toFixed(2));if("CT"===d)f+="HU: "+p;else if("PT"===d){f+=p;var v=(0,_.default)(e.image,h);v&&(f+=" SUV: "+parseFloat(v.toFixed(2)))}else f+=p}var w=t.pixelToCanvas(n,u);r.font=s,r.fillStyle=o;var E=void 0,T=6,P=r.measureText(f).width;E=!0===e.isTouchEvent?{x:-P/2-5,y:-g.default.getFontSize()-10-12}:{x:12,y:-(g.default.getFontSize()+10)/2},(0,x.path)(r,{color:o},function(e){e.arc(w.x,w.y,6,0,2*Math.PI)}),(0,y.default)(r,f,w.x+E.x,w.y+E.y,o)})}function o(e){var t=e.detail,n=t.element;n.removeEventListener(f.default.IMAGE_RENDERED,l),n.removeEventListener(f.default.MOUSE_DRAG,u),n.removeEventListener(f.default.MOUSE_UP,o),n.removeEventListener(f.default.MOUSE_CLICK,o),h.default.cornerstone.updateImage(t.element)}function s(e){var t=e.detail,n=t.element,r=(0,E.getToolOptions)(T,n);(0,w.default)(t.which,r.mouseButtonMask)&&(n.addEventListener(f.default.IMAGE_RENDERED,l),n.addEventListener(f.default.MOUSE_DRAG,u),n.addEventListener(f.default.MOUSE_UP,o),n.addEventListener(f.default.MOUSE_CLICK,o),j.strategy(t),e.preventDefault(),e.stopPropagation())}function l(){P&&(j.strategy(P),P=null)}function u(e){var t=e.detail,n=t.element;P=t,h.default.cornerstone.updateImage(n),e.preventDefault(),e.stopPropagation()}function d(e){e.detail.element.addEventListener(f.default.IMAGE_RENDERED,l)}function c(e){var t=e.detail.element;t.removeEventListener(f.default.IMAGE_RENDERED,l),h.default.cornerstone.updateImage(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.dragProbeTouch=t.dragProbe=void 0;var f=r(n("./events.js")),h=r(n("./externalModules.js")),m=r(n("./imageTools/simpleMouseButtonTool.js")),p=r(n("./imageTools/touchDragTool.js")),g=r(n("./stateManagement/textStyle.js")),v=r(n("./stateManagement/toolColors.js")),y=r(n("./util/drawTextBox.js")),b=r(n("./util/getRGBPixels.js")),_=r(n("./util/calculateSUV.js")),w=r(n("./util/isMouseButtonEnabled.js")),E=n("./toolOptions.js"),x=n("./util/drawing.js"),T="dragProbe",P=void 0,j=(0,m.default)(s,T);j.strategies={default:a,minimal:i},j.strategy=a;var S={fireOnTouchStart:!0,touchStartCallback:d,touchEndCallback:c},M=(0,p.default)(u,T,S);t.dragProbe=j,t.dragProbeTouch=M},"./imageTools/ellipticalRoi.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function i(e,t,n,r){if(!1===t.visible)return!1;var a=d.default.cornerstone,i=a.pixelToCanvas(e,t.handles.start),o=a.pixelToCanvas(e,t.handles.end),s={left:Math.min(i.x,o.x)+r/2,top:Math.min(i.y,o.y)+r/2,width:Math.abs(i.x-o.x)-r,height:Math.abs(i.y-o.y)-r},l={left:Math.min(i.x,o.x)-r/2,top:Math.min(i.y,o.y)-r/2,width:Math.abs(i.x-o.x)+r,height:Math.abs(i.y-o.y)+r},u=(0,g.default)(s,n);return!(!(0,g.default)(l,n)||u)}function o(e,t,n){return i(e,t,n,15)}function s(e,t,n){return i(e,t,n,25)}function l(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function u(e){function t(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&void 0!==t.mean){var i="";"CT"===T&&(i=" HU");var o="Mean: "+l(t.mean.toFixed(2))+i,s="StdDev: "+l(t.stdDev.toFixed(2))+i;if(n&&void 0!==n.mean){var u=" SUV: ";o+=u+l(n.mean.toFixed(2)),s+=u+l(n.stdDev.toFixed(2))}a.push(o),a.push(s)}if(r){var d=" mm"+String.fromCharCode(178);P&&j||(d=" pixels"+String.fromCharCode(178));var c="Area: "+l(r.toFixed(2))+d;a.push(c)}return a}function n(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),a=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+a/2},{x:t+r/2,y:n+a},{x:t+r,y:n+a/2}]}var r=e.detail,a=(0,_.getToolState)(e.currentTarget,E);if(a){var i=d.default.cornerstone,o=r.image,s=r.element,u=h.default.getToolWidth(),c=x.getConfiguration(),f=i.metaData.get("generalSeriesModule",o.imageId),g=i.metaData.get("imagePlaneModule",o.imageId),T=void 0,P=void 0,j=void 0;g?(P=g.rowPixelSpacing||g.rowImagePixelSpacing,j=g.columnPixelSpacing||g.colImagePixelSpacing):(P=o.rowPixelSpacing,j=o.columnPixelSpacing),f&&(T=f.modality);for(var S=(0,w.getNewContext)(r.canvasContext.canvas),M=function e(l){var d=a.data[l];if(!1===d.visible)return"continue";(0,w.draw)(S,function(e){(0,w.setShadow)(e,c);var a=m.default.getColorIfActive(d);if((0,w.drawEllipse)(e,s,d.handles.start,d.handles.end,{color:a}),c&&c.drawHandlesOnHover)if(!0===d.active)(0,p.default)(e,r,d.handles,a);else{var l={drawHandlesIfActive:!0};(0,p.default)(e,r,d.handles,a,l)}else(0,p.default)(e,r,d.handles,a);var f=void 0,h=void 0,g=void 0;if(!1===d.invalidated)h=d.meanStdDev,g=d.meanStdDevSUV,f=d.area;else{var _={left:Math.round(Math.min(d.handles.start.x,d.handles.end.x)),top:Math.round(Math.min(d.handles.start.y,d.handles.end.y)),width:Math.round(Math.abs(d.handles.start.x-d.handles.end.x)),height:Math.round(Math.abs(d.handles.start.y-d.handles.end.y))};if(!o.color){var E=i.getPixels(s,_.left,_.top,_.width,_.height);h=(0,v.default)(E,_),"PT"===T&&(g={mean:(0,y.default)(o,(h.mean-o.intercept)/o.slope),stdDev:(0,y.default)(o,(h.stdDev-o.intercept)/o.slope)}),h&&!isNaN(h.mean)&&(d.meanStdDev=h,d.meanStdDevSUV=g)}f=Math.PI*(_.width*(j||1)/2)*(_.height*(P||1)/2),isNaN(f)||(d.area=f),d.invalidated=!1}d.handles.textBox.hasMoved||(d.handles.textBox.x=Math.max(d.handles.start.x,d.handles.end.x),d.handles.textBox.y=(d.handles.start.y+d.handles.end.y)/2);var x=t(d);(0,b.default)(e,s,d.handles.textBox,x,d.handles,n,a,u,0,!0)})},O=0;O<a.data.length;O++){var I=M(O)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.ellipticalRoiTouch=t.ellipticalRoi=void 0;var d=r(n("./externalModules.js")),c=r(n("./imageTools/mouseButtonTool.js")),f=r(n("./imageTools/touchTool.js")),h=r(n("./stateManagement/toolStyle.js")),m=r(n("./stateManagement/toolColors.js")),p=r(n("./manipulators/drawHandles.js")),g=r(n("./util/pointInEllipse.js")),v=r(n("./util/calculateEllipseStatistics.js")),y=r(n("./util/calculateSUV.js")),b=r(n("./util/drawLinkedTextBox.js")),_=n("./stateManagement/toolState.js"),w=n("./util/drawing.js"),E="ellipticalRoi",x=(0,c.default)({createNewMeasurement:a,onImageRendered:u,pointNearTool:o,toolType:E}),T=(0,f.default)({createNewMeasurement:a,onImageRendered:u,pointNearTool:s,toolType:E});t.ellipticalRoi=x,t.ellipticalRoiTouch=T},"./imageTools/eraser.js":function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.detail.currentPoints.canvas,n=e.detail.element;(0,o.default)(s).forEach(function(e){var r=s[e],a=s.getToolState(n,e);console.log("toolName"),console.log(e),a&&a.data.forEach(function(a){if("function"==typeof r.pointNearTool&&r.pointNearTool(n,a,t)){if("freehand"===e){if(console.log("processing freehand"),console.log(a),a.imageAnnotationData.locked)return;console.log("not locked"),c.freehand.decrementVolumePolygonCount(a.seriesInstanceUid,"default",a.volumeIndex),console.log("decremented")}s.removeToolState(n,e,a),l.default.cornerstone.updateImage(n)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.eraserTouch=t.eraser=void 0;var o=a(n("../node_modules/babel-runtime/core-js/object/keys.js")),s=r(n("./index.js")),l=a(n("./externalModules.js")),u=a(n("./imageTools/simpleMouseButtonTool.js")),d=a(n("./imageTools/simpleTouchTool.js")),c=n("./imageTools/freehand.js"),f="eraser",h=(0,u.default)(i,"eraser"),m=(0,d.default)(i,"eraser");t.eraser=h,t.eraserTouch=m},"./imageTools/freehand.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return re.default.OHIF.RoiStateManagement.SeriesInfoProvider.getActiveSeriesInstanceUid()}function i(){var e=a(),t=Me[e].default.activeVolumeIndex;return q(e,"default",t),{uuid:o(),seriesInstanceUid:e,sopInstanceUID:null,volumeIndex:t,imageAnnotationData:Me[e].default[t],referencedRoiCollection:"default",visible:!0,active:!0,invalidated:!0,handles:[],textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}function o(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}function s(e,t,n){return null!==l(e,t,n)}function l(e,t,n){var r=Ie.getConfiguration();if(void 0===t.handles)return null;if(!1===t.visible)return null;for(var a=0;a<t.handles.length;a++){var i=re.default.cornerstone.pixelToCanvas(e,t.handles[a]);if(re.default.cornerstoneMath.point.distance(i,n)<r.spacing)return a}return t.textBox&&Oe.alwaysShowTextBox&&(0,le.default)(t.textBox,n)?t.textBox:null}function u(e){var t=e.element,n=e.currentPoints.canvas,r=(0,he.getToolState)(t,Se);if(r)for(var a=void 0,i=0;i<r.data.length;i++)if(null!==(a=l(t,r.data[i],n)))return{handleNearby:a,toolIndex:i}}function d(e){var t=e.detail,n=Ie.getConfiguration();t.event.shiftKey&&(n.activePencilMode=!0);var r=a();c(r)||Y(r);var i=Z(r);void 0!==i&&null!==i?te(r).then(function(){h(t),p(t),e.preventDefault(),e.stopPropagation()}).catch(function(){e.preventDefault(),e.stopPropagation()}):re.default.OHIF.RoiStateManagement.createNewVolume()}function c(e){return!!Me[e]}function f(e){var t=e.detail,n=(0,he.getToolState)(t.element,Se),r=u(t),i=Ie.getConfiguration().currentTool;if(!(void 0===r||i>=0)){e.preventDefault(),e.stopPropagation();var o=n.data[r.toolIndex];if(!o.imageAnnotationData.locked){var s=o.volumeIndex,l=a();re.default.OHIF.RoiStateManagement.setVolumeName(l,s)}}}function h(e){e.element.addEventListener(ne.default.MOUSE_MOVE,b);var t=i(),n=Ie.getConfiguration();n.mouseLocation.handles.start.x=e.currentPoints.image.x,n.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,he.addToolState)(e.element,Se,t);var r=(0,he.getToolState)(e.element,Se);n.currentTool=r.data.length-1}function m(e,t){for(var n=Ie.getConfiguration(),r=n.mouseLocation.handles.start,a=0;a<t.length;a++)if(re.default.cornerstoneMath.point.distance(t[a],r)<n.spacing)return;p(e)}function p(e){var t=(0,he.getToolState)(e.element,Se);if(void 0!==t){var n=Ie.getConfiguration(),r=t.data[n.currentTool];if(!r.handles.invalidHandlePlacement){var a=new xe.FreehandHandleData(e.currentPoints.image);r.handles.length&&r.handles[n.currentHandle-1].lines.push(e.currentPoints.image),r.handles.push(a),n.currentHandle+=1,re.default.cornerstone.updateImage(e.element)}}}function g(e,t){var n=(0,he.getToolState)(e,Se);if(n){var r=Ie.getConfiguration(),a=n.data[r.currentTool];a.active=!1,a.highlight=!1,a.handles.invalidHandlePlacement=!1,void 0!==t&&a.handles[r.currentHandle-1].lines.push(a.handles[0]),r.modifying&&(r.modifying=!1,a.invalidated=!0),r.currentHandle=0,r.currentTool=-1,r.activePencilMode=!1,a.canComplete=!1,re.default.cornerstone.updateImage(e)}}function v(e,t,n){var r=e.detail,a=Ie.getConfiguration(),i=r.element,o=t.data[n],s=l(i,o,r.currentPoints.canvas);!Ee.default.end(o.handles)&&o.canComplete?g(i,a.currentHandle):null===s&&p(r),e.preventDefault(),e.stopPropagation()}function y(e){var t=e.detail,n=t.element,r=(0,me.getToolOptions)(Se,n);if(!(0,ce.default)(t.which,r.mouseButtonMask))return e.stopPropagation(),void e.preventDefault();var a=Ie.getConfiguration().currentTool;if(a<0)S(e);else{var i=(0,he.getToolState)(t.element,Se);a>=0&&i.data[a]&&i.data[a].active&&v(e,i,a)}}function b(e){var t=e.detail,n=(0,he.getToolState)(t.element,Se);if(n){if(Ie.getConfiguration().currentTool<0){if(!k(t,n))return}else _(t,n);re.default.cornerstone.updateImage(t.element)}}function _(e,t){var n=Ie.getConfiguration(),r=n.currentTool,a=e.element,i=t.data[r],o=e.currentPoints.canvas;if(A(e),w(i),n.activePencilMode)m(e,i.handles);else{var s=l(a,i,o);null!==s&&!s.hasBoundingBox&&s<i.handles.length-1&&(n.mouseLocation.handles.start.x=i.handles[s].x,n.mouseLocation.handles.start.y=i.handles[s].y)}}function w(e){var t=Ie.getConfiguration();if(e.handles.length<2)return!0;var n=void 0;n=t.activePencilMode?E(e):x(e),e.handles.invalidHandlePlacement=n}function E(e){var t=Ie.getConfiguration().mouseLocation.handles.start,n=e.handles,r=Ee.default.newHandle(t,n);return!1===r&&(r=T(e,t)),r}function x(e){var t=Ie.getConfiguration(),n=t.mouseLocation.handles.start,r=e.handles,a=!1;return e.canComplete=!1,re.default.cornerstoneMath.point.distance(r[0],n)<t.spacing&&!Ee.default.end(r)?(e.canComplete=!0,a=!1):a=Ee.default.newHandle(n,r),a}function T(e,t){var n=Ie.getConfiguration(),r=e.handles;if(re.default.cornerstoneMath.point.distance(r[0],t)<n.spacing)return e.canComplete=!0,!1;e.canComplete=!1;for(var a=1;a<r.length-1;a++)if(re.default.cornerstoneMath.point.distance(r[a],t)<n.spacing)return!0;return!1}function P(e){var t=e.detail,n=(0,he.getToolState)(t.element,Se);if(n){var r=Ie.getConfiguration(),a=n.data[r.currentTool],i=r.currentHandle;A(t),r.currentTool>=0&&(0,ve.default)(i,a),re.default.cornerstone.updateImage(t.element)}}function j(e){var t=e.detail,n=t.element,r=(0,he.getToolState)(t.element,Se);n.removeEventListener(ne.default.MOUSE_UP,j),n.removeEventListener(ne.default.MOUSE_DRAG,P),n.removeEventListener(ne.default.MOUSE_CLICK,j),n.addEventListener(ne.default.MOUSE_MOVE,b),void 0!==r&&("handle"===(0,ye.default)(e,r)&&g(n),e.preventDefault(),e.stopPropagation(),re.default.cornerstone.updateImage(t.element))}function S(e){var t=e.detail,n=(0,he.getToolState)(t.element,Se),r=u(t);r&&n.data[r.toolIndex].imageAnnotationData.locked?M(e,r):t.event.ctrlKey?(0,be.default)(e,r):void 0!==r&&(t.event.metaKey||t.event.altKey)?O(e,r):void 0!==r&&I(e,r)}function M(e,t){if(t.handleNearby.hasBoundingBox){var n=e.detail,r=(0,he.getToolState)(n.element,Se).data[t.toolIndex],a=r.referencedRoiCollection,i=r.seriesInstanceUid;Me[i][a].visible&&I(e,t)}}function O(e,t){var n=e.detail,r=(0,he.getToolState)(n.element,Se);if(void 0!==t.handleNearby){var i=r.data[t.toolIndex].volumeIndex,o=a();Me[o].default.activeVolumeIndex=i,e.preventDefault(),e.stopPropagation()}}function I(e,t){var n=e.detail.element,r=(0,he.getToolState)(n,Se),a=t.handleNearby;a.hasBoundingBox?C(n,t):void 0!==a&&L(n,t,r),e.preventDefault(),e.stopPropagation()}function C(e,t){var n=Ie.getConfiguration(),r=t.handleNearby,a=t.toolIndex;e.addEventListener(ne.default.MOUSE_UP,j),e.addEventListener(ne.default.MOUSE_DRAG,P),n.movingTextBox=!0,n.currentHandle=r,n.currentTool=a}function L(e,t,n){var r=Ie.getConfiguration(),a=t.handleNearby,i=t.toolIndex;e.removeEventListener(ne.default.MOUSE_MOVE,b),r.dragOrigin={x:n.data[i].handles[a].x,y:n.data[i].handles[a].y},e.addEventListener(ne.default.MOUSE_UP,j),e.addEventListener(ne.default.MOUSE_CLICK,j),e.addEventListener(ne.default.MOUSE_DRAG,P),r.modifying=!0,r.currentHandle=a,r.currentTool=i}function k(e,t){for(var n=Ie.getConfiguration(),r=!1,a=0;a<t.data.length;a++){var i=e.element,o=t.data[a],l=e.currentPoints.canvas;!0===(0,se.default)(i,o.handles,l)&&(r=!0),(s(i,o,l)&&!o.active||!s(i,o,l)&&o.active)&&(o.active=!o.active,r=!0),!0===o.textBox&&n.alwaysShowTextBox&&(0,le.default)(o.textBox,l)&&(o.active=!o.active,o.highlight=!o.highlight,r=!0)}return r}function A(e){var t=Ie.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,pe.clipToBox)(t.mouseLocation.handles.start,e.image)}function D(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function R(e){function t(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&void 0!==t.mean){var i="";"CT"===d&&(i=" HU");var s="Mean: "+D(t.mean.toFixed(2))+i,l="StdDev: "+D(t.stdDev.toFixed(2))+i;if(n&&void 0!==n.mean){var u=" SUV: ";s+=u+D(n.mean.toFixed(2)),l+=u+D(n.stdDev.toFixed(2))}a.push(e.imageAnnotationData.name),a.push(e.imageAnnotationData.numPolygons+" contours"),a.push(s),a.push(l)}if(r){var c=" mm"+String.fromCharCode(178);o.rowPixelSpacing&&o.columnPixelSpacing||(c=" pixels"+String.fromCharCode(178));var f="Area: "+D(r.toFixed(2))+c;a.push(f)}return a}function n(e){return e}var r=e.detail,a=(0,he.getToolState)(e.currentTarget,Se);if(void 0!==a){var i=re.default.cornerstone,o=r.image,s=r.element,l=Ie.getConfiguration(),u=i.metaData.get("generalSeriesModule",o.imageId),d=void 0;u&&(d=u.modality);for(var c=(0,je.getNewContext)(r.canvasContext.canvas),f=ae.default.getToolWidth(),h=function e(u){var h=a.data[u],m=h.seriesInstanceUid,p=h.referencedRoiCollection,g=Me[m][p].visible;if(!1===h.visible||!g)return"continue";(0,je.draw)(c,function(e){var a=ie.default.getColorIfActive(h),u=void 0;if(h.active&&!h.imageAnnotationData.locked?h.handles.invalidHandlePlacement?(a=l.invalidColor,u=l.invalidColor):(a=ie.default.getActiveColor(),u=ie.default.getFillColor()):(a=h.imageAnnotationData.color,u=h.imageAnnotationData.color),h.handles.length)for(var c=0;c<h.handles.length;c++){var m=[].concat((0,J.default)(h.handles[c].lines));c!==h.handles.length-1||h.polyBoundingBox||m.push(l.mouseLocation.handles.start),(0,je.drawJoinedLines)(e,r.element,h.handles[c],m,{color:a})}var p={fill:u};(l.alwaysShowHandles||l.keyDown.ctrl||h.active&&h.polyBoundingBox)&&(p.handleRadius=l.activeHandleRadius,(0,oe.default)(e,r,h.handles,a,p)),h.canComplete&&(p.handleRadius=l.completeHandleRadius,(0,oe.default)(e,r,[h.handles[0]],a,p)),h.active&&!h.polyBoundingBox&&(p.handleRadius=l.activeHandleRadius,(0,oe.default)(e,r,l.mouseLocation.handles,a,p),(0,oe.default)(e,r,[h.handles[0]],a,p));var g=void 0,v=void 0,y=void 0;if(!1===h.invalidated)v=h.meanStdDev,y=h.meanStdDevSUV,g=h.area;else if(!h.active){for(var b={left:h.handles[0].x,right:h.handles[0].x,bottom:h.handles[0].y,top:h.handles[0].x},_=0;_<h.handles.length;_++)b.left=Math.min(b.left,h.handles[_].x),b.right=Math.max(b.right,h.handles[_].x),b.bottom=Math.min(b.bottom,h.handles[_].y),b.top=Math.max(b.top,h.handles[_].y);var w={left:b.left,top:b.bottom,width:Math.abs(b.right-b.left),height:Math.abs(b.top-b.bottom)};if(h.polyBoundingBox=w,!o.color){var E=i.getPixels(s,w.left,w.top,w.width,w.height);v=(0,we.default)(E,w,h.handles),"PT"===d&&(y={mean:(0,ue.default)(o,(v.mean-o.intercept)/o.slope),stdDev:(0,ue.default)(o,(v.stdDev-o.intercept)/o.slope)}),v&&!isNaN(v.mean)&&(h.meanStdDev=v,h.meanStdDevSUV=y)}var x=(o.columnPixelSpacing||1)*(o.rowPixelSpacing||1);g=(0,_e.default)(h.handles,x),isNaN(g)||(h.area=g),h.invalidated=!1}var T=!1;if(null!==Pe.freehandSculpter.getConfiguration().currentTool&&(T=!0),h.polyBoundingBox&&(h.active||l.alwaysShowTextBox)&&!T){h.textBox.hasMoved||(h.textBox.x=h.polyBoundingBox.left+h.polyBoundingBox.width,h.textBox.y=h.polyBoundingBox.top+h.polyBoundingBox.height/2);var P=t(h);(0,fe.default)(e,s,h.textBox,P,h.handles,n,a,f,0,!0)}})},m=0;m<a.data.length;m++){var p=h(m)}}}function U(e){z(e),H(e),e.addEventListener(ne.default.IMAGE_RENDERED,R),re.default.cornerstone.updateImage(e)}function B(e){z(e),H(e),re.default.cornerstone.updateImage(e)}function N(e,t){(0,me.setToolOptions)(Se,e,{mouseButtonMask:t}),z(e),e.addEventListener(ne.default.IMAGE_RENDERED,R),e.addEventListener(ne.default.MOUSE_MOVE,b),e.addEventListener(ne.default.MOUSE_DOWN,y),e.addEventListener(ne.default.MOUSE_DOWN_ACTIVATE,d),e.addEventListener(ne.default.MOUSE_DOUBLE_CLICK,f),e.addEventListener(ne.default.KEY_DOWN,ge.keyDownCallback),e.addEventListener(ne.default.KEY_UP,ge.keyUpCallback),re.default.cornerstone.updateImage(e)}function F(e,t){(0,me.setToolOptions)(Se,e,{mouseButtonMask:t});var n=ne.default.TOOL_DEACTIVATED,r={mouseButtonMask:t,toolType:Se,type:n};(0,de.default)(e,n,r),z(e),H(e),e.addEventListener(ne.default.IMAGE_RENDERED,R),e.addEventListener(ne.default.MOUSE_MOVE,b),e.addEventListener(ne.default.MOUSE_DOWN,y),e.addEventListener(ne.default.MOUSE_DOUBLE_CLICK,f),e.addEventListener(ne.default.KEY_DOWN,ge.keyDownCallback),e.addEventListener(ne.default.KEY_UP,ge.keyUpCallback),re.default.cornerstone.updateImage(e)}function z(e){e.removeEventListener(ne.default.MOUSE_DOWN,y),e.removeEventListener(ne.default.MOUSE_DOUBLE_CLICK,f),e.removeEventListener(ne.default.MOUSE_DOWN_ACTIVATE,d),e.removeEventListener(ne.default.MOUSE_DRAG,P),e.removeEventListener(ne.default.MOUSE_UP,j),e.removeEventListener(ne.default.MOUSE_MOVE,b),e.removeEventListener(ne.default.IMAGE_RENDERED,R),e.removeEventListener(ne.default.KEY_DOWN,ge.keyDownCallback),e.removeEventListener(ne.default.KEY_UP,ge.keyUpCallback)}function H(e){var t=Ie.getConfiguration();t.currentTool>=0&&(console.log("closing polygon on abrupt tool change."),g(e,t.currentHandle))}function V(){return Oe}function W(){return Me}function q(e,t,n){Me[e][t][n].numPolygons++}function G(e,t,n){Me[e][t][n].numPolygons--}function Z(e){return Me[e].default.activeVolumeIndex}function Y(e){Me[e]={},Me[e].default=[],Me[e].default.visible=!0,Me[e].default.label="DEFAULT"}function K(e,t,n,r,a,i){c(e)||Y(e);var s=Me[e];if(n){var l={name:t,color:Te.default.getNextColor(),uuid:o(),locked:!1,numPolygons:0};s.default.push(l);var u=s.default.length-1;return s.default.activeVolumeIndex=u,u}if(!r||!a)throw new Error("If importing a volume the uuid and roiCollectionName must be given");var d={name:t,color:Te.default.getNextColor(),uuid:r,locked:!0,numPolygons:0};return s[a]||(s[a]=[],s[a].visible=!0,s[a].label=i),s[a].push(d),s[a].length-1}function X(e){Oe=e}Object.defineProperty(t,"__esModule",{value:!0}),t.freehand=void 0;var J=r(n("../node_modules/babel-runtime/helpers/toConsumableArray.js")),$=r(n("../node_modules/babel-runtime/regenerator/index.js")),Q=r(n("../node_modules/babel-runtime/core-js/promise.js")),ee=r(n("../node_modules/babel-runtime/helpers/asyncToGenerator.js")),te=function(){var e=(0,ee.default)($.default.mark(function e(t){var n,r;return $.default.wrap(function e(a){for(;;)switch(a.prev=a.next){case 0:if(n=Me[t].default.activeVolumeIndex,!(r=Me[t].default[n].name)){a.next=4;break}return a.abrupt("return",new Q.default(function(e){e()}));case 4:return a.next=6,re.default.OHIF.RoiStateManagement.setVolumeName(t,n);case 6:return a.abrupt("return",new Q.default(function(e,t){t()}));case 7:case"end":return a.stop()}},e,this)}));return function t(n){return e.apply(this,arguments)}}(),ne=r(n("./events.js")),re=r(n("./externalModules.js")),ae=r(n("./stateManagement/toolStyle.js")),ie=r(n("./stateManagement/toolColors.js")),oe=r(n("./manipulators/drawHandles.js")),se=r(n("./manipulators/handleActivator.js")),le=r(n("./util/pointInsideBoundingBox.js")),ue=r(n("./util/calculateSUV.js")),de=r(n("./util/triggerEvent.js")),ce=r(n("./util/isMouseButtonEnabled.js")),fe=r(n("./util/drawLinkedTextBox.js")),he=n("./stateManagement/toolState.js"),me=n("./toolOptions.js"),pe=n("./util/clip.js"),ge=n("./util/freehand/keysHeld.js"),ve=r(n("./util/freehand/dragObject.js")),ye=r(n("./util/freehand/dropObject.js")),be=r(n("./util/freehand/insertOrDelete.js")),_e=r(n("./util/freehand/freeHandArea.js")),we=r(n("./util/freehand/calculateFreehandStatistics.js")),Ee=r(n("./util/freehand/freeHandIntersect.js")),xe=n("./util/freehand/FreehandHandleData.js"),Te=r(n("./stateManagement/freehandToolColors.js")),Pe=n("./imageTools/freehandSculpter.js"),je=n("./util/drawing.js"),Se="freehand",Me={},Oe={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},activePencilMode:!1,spacing:5,activeHandleRadius:3,completeHandleRadius:6,alwaysShowHandles:!1,alwaysShowTextBox:!1,invalidColor:"crimson",modifying:!1,movingTextBox:!1,currentHandle:0,currentTool:-1},Ie={enable:U,disable:B,activate:N,deactivate:F,getConfiguration:V,setConfiguration:X,getRoiCollectionData:W,getActiveVolumeIndex:Z,createNewVolumeAndGetIndex:K,getSeriesInstanceUid:a,incrementVolumePolygonCount:q,decrementVolumePolygonCount:G,pointNearTool:s,newWorkingRoiCollection:Y};t.freehand=Ie},"./imageTools/freehandSculpter.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=t.element,r=(0,I.getToolOptions)(D,n),a=B.getConfiguration(),o=!1;if(!(0,M.default)(t.which,r.mouseButtonMask))return e.stopPropagation(),void e.preventDefault();t.event.ctrlKey?(i(t),o=!0):null!==a.currentTool&&(s(t),o=!0),o&&T.default.cornerstone.updateImage(t.element)}function i(e){var t=B.getConfiguration(),n=e.element,r=new k.FreehandLineFinder(e).findTool(),a=o(n,r);t.currentTool=a?r:null}function o(e,t){for(var n=(0,O.getToolState)(e,R),r=!1,a=0;a<n.data.length;a++)a!==t||n.data[a].imageAnnotationData.locked?n.data[a].active=!1:(n.data[a].active=!0,r=!0);return r}function s(e){var t=B.getConfiguration(),n=e.element;l(e),t.active=!0,m(e),n.addEventListener(x.default.MOUSE_UP,d),n.addEventListener(x.default.MOUSE_CLICK,d),n.addEventListener(x.default.MOUSE_DRAG,u)}function l(e){for(var t=B.getConfiguration(),n=t.currentTool,r=(0,O.getToolState)(e.element,R).data[n].handles,a=e.currentPoints.image,i=e.currentPoints.canvas,o=1/0,s=1/0,l=0;l<r.length;l++){var u=r[l],d=T.default.cornerstoneMath.point.distance(u,a);if(d<o){o=d;var c=T.default.cornerstone.pixelToCanvas(e.element,r[l]);s=T.default.cornerstoneMath.point.distance(c,i)}}t.toolSizeImage=o,t.toolSizeCanvas=s}function u(e){var t=e.detail,n=(0,O.getToolState)(t.element,R);if(n){var r=B.getConfiguration(),a=n.data[r.currentTool].handles;m(t),A.sculpt(t,a),T.default.cornerstone.updateImage(t.element)}}function d(e){var t=e.detail,n=t.element,r=B.getConfiguration();n.removeEventListener(x.default.MOUSE_UP,d),n.removeEventListener(x.default.MOUSE_DRAG,u),n.removeEventListener(x.default.MOUSE_CLICK,d),r.active=!1,e.preventDefault(),e.stopPropagation(),h(t)}function c(e){f(e.detail.element)}function f(e){var t=B.getConfiguration(),n=(0,O.getToolState)(e,R);if(t.currentTool=null,n)for(var r=0;r<n.data.length;r++)n.data[r].active=!1;T.default.cornerstone.updateImage(e)}function h(e){var t=B.getConfiguration(),n=e.element;(0,O.getToolState)(n,R).data[t.currentTool].invalidated=!0,T.default.cornerstone.updateImage(n)}function m(e){var t=B.getConfiguration();t.mouseLocation.handles.start.x=e.currentPoints.image.x,t.mouseLocation.handles.start.y=e.currentPoints.image.y,(0,C.clipToBox)(t.mouseLocation.handles.start,e.image)}function p(e){var t=e.detail,n=t.canvasContext.canvas.getContext("2d"),r=B.getConfiguration();if(r.active){var a={fill:null,handleRadius:r.toolSizeCanvas};(0,S.default)(n,t,r.mouseLocation.handles,r.color,a)}}function g(e){v(e)}function v(e){f(e),_(e)}function y(e,t){(0,I.setToolOptions)(D,e,{mouseButtonMask:t}),P.freehand.enable(e),_(e),e.addEventListener(x.default.IMAGE_RENDERED,p),e.addEventListener(x.default.MOUSE_DOWN,a),e.addEventListener(x.default.KEY_DOWN,L.keyDownCallback),e.addEventListener(x.default.KEY_UP,L.keyUpCallback),e.addEventListener(x.default.NEW_IMAGE,c),e.focus(),T.default.cornerstone.updateImage(e)}function b(e){v(e)}function _(e){e.removeEventListener(x.default.IMAGE_RENDERED,p),e.removeEventListener(x.default.MOUSE_DOWN,a),e.removeEventListener(x.default.MOUSE_DRAG,u),e.removeEventListener(x.default.MOUSE_UP,d),e.removeEventListener(x.default.KEY_DOWN,L.keyDownCallback),e.removeEventListener(x.default.KEY_UP,L.keyUpCallback),e.removeEventListener(x.default.NEW_IMAGE,c)}function w(){return U}function E(e){U=e}Object.defineProperty(t,"__esModule",{value:!0}),t.freehandSculpter=void 0;var x=r(n("./events.js")),T=r(n("./externalModules.js")),P=n("./imageTools/freehand.js"),j=r(n("./stateManagement/toolColors.js")),S=r(n("./manipulators/drawHandles.js")),M=r(n("./util/isMouseButtonEnabled.js")),O=n("./stateManagement/toolState.js"),I=n("./toolOptions.js"),C=n("./util/clip.js"),L=n("./util/freehand/keysHeld.js"),k=n("./util/freehand/FreehandLineFinder.js"),A=new(n("./util/freehand/Sculpter.js").Sculpter),D="freehandSculpter",R="freehand",U={mouseLocation:{handles:{start:{highlight:!0,active:!0}}},keyDown:{shift:!1,ctrl:!1,alt:!1},active:!1,minSpacing:5,maxSpacing:20,toolSizeImage:null,toolSizeCanvas:null,currentTool:null,color:j.default.getActiveColor()},B={enable:g,disable:v,activate:y,deactivate:b,getConfiguration:w,setConfiguration:E};t.freehandSculpter=B},"./imageTools/highlight.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,m.getToolState)(e.event.currentTarget,g);if(!(t&&t.data&&t.data.length>0))return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function i(e,t,n){var r=l.default.cornerstone,a=r.pixelToCanvas(e,t.handles.start),i=r.pixelToCanvas(e,t.handles.end),o={left:Math.min(a.x,i.x),top:Math.min(a.y,i.y),width:Math.abs(a.x-i.x),height:Math.abs(a.y-i.y)},s=!1;return n.x>=o.left&&n.x<=o.left+o.width&&n.y>=o.top&&n.y<=o.top+o.height&&(s=!0),s}function o(e,t,n){if(!1===t.visible)return!1;var r=l.default.cornerstone,a=r.pixelToCanvas(e,t.handles.start),i=r.pixelToCanvas(e,t.handles.end),o={left:Math.min(a.x,i.x),top:Math.min(a.y,i.y),width:Math.abs(a.x-i.x),height:Math.abs(a.y-i.y)};return l.default.cornerstoneMath.rect.distanceToPoint(o,n)<5}function s(e){var t=e.detail,n=(0,m.getToolState)(e.currentTarget,g);if(void 0!==n){var r=l.default.cornerstone,a=(0,p.getNewContext)(t.canvasContext.canvas),i=c.default.getToolWidth(),o=n.data[0];!1!==o.visible&&o&&(0,p.draw)(a,function(e){var n=r.pixelToCanvas(t.element,o.handles.start),a=r.pixelToCanvas(t.element,o.handles.end),s={left:Math.min(n.x,a.x),top:Math.min(n.y,a.y),width:Math.abs(n.x-a.x),height:Math.abs(n.y-a.y)},l="transparent",u="rgba(0,0,0,0.7)";(0,p.path)(e,{color:l,fillStyle:u},function(e){e.rect(0,0,e.canvas.clientWidth,e.canvas.clientHeight),e.rect(s.width+s.left,s.top,-s.width,s.height)}),l=f.default.getColorIfActive(o);var d=[4];(0,p.path)(e,{color:l,lineWidth:i,lineDash:d},function(e){e.rect(s.left,s.top,s.width,s.height)}),(0,h.default)(e,t,o.handles,l)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.highlightTouch=t.highlight=void 0;var l=r(n("./externalModules.js")),u=r(n("./imageTools/mouseButtonRectangleTool.js")),d=r(n("./imageTools/touchTool.js")),c=r(n("./stateManagement/toolStyle.js")),f=r(n("./stateManagement/toolColors.js")),h=r(n("./manipulators/drawHandles.js")),m=n("./stateManagement/toolState.js"),p=n("./util/drawing.js"),g="highlight",v=!0,y=(0,u.default)({createNewMeasurement:a,onImageRendered:s,pointNearTool:o,pointInsideRect:i,toolType:g},!0),b=(0,d.default)({createNewMeasurement:a,onImageRendered:s,pointNearTool:o,pointInsideRect:i,toolType:g},!0);t.highlight=y,t.highlightTouch=b},"./imageTools/imageStats.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=t.image.stats,r=(0,l.getNewContext)(t.canvasContext.canvas),a=[];(0,i.default)(n).forEach(function(e){var t=e+" : "+n[e];a.push(t)}),(0,s.default)(r,a,0,0,"orange"),a.forEach(function(e){console.log(e)})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("../node_modules/babel-runtime/core-js/object/keys.js")),o=r(n("./imageTools/displayTool.js")),s=r(n("./util/drawTextBox.js")),l=n("./util/drawing.js"),u=(0,o.default)(a);t.default=u},"./imageTools/keyboardTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t={};return{activate:function t(n){n.removeEventListener(a.default.KEY_DOWN,e),n.addEventListener(a.default.KEY_DOWN,e)},disable:function t(n){n.removeEventListener(a.default.KEY_DOWN,e)},enable:function t(n){n.removeEventListener(a.default.KEY_DOWN,e)},deactivate:function t(n){n.removeEventListener(a.default.KEY_DOWN,e)},getConfiguration:function e(){return t},setConfiguration:function e(n){t=n}}};var a=r(n("./events.js"))},"./imageTools/length.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function i(e,t,n){return!1!==t.visible&&(0,p.default)(e,t.handles.start,t.handles.end,n)<25}function o(e){function t(e,t,n){var r=" mm";return t&&n||(r=" pixels"),""+e.length.toFixed(2)+r}function n(e){var t={x:(e.start.x+e.end.x)/2,y:(e.start.y+e.end.y)/2};return[e.start,t,e.end]}var r=e.detail,a=(0,m.getToolState)(e.currentTarget,v);if(a){var i=s.default.cornerstone,o=(0,g.getNewContext)(r.canvasContext.canvas),l=r.image,u=r.element,p=c.default.getToolWidth(),b=y.getConfiguration(),_=i.metaData.get("imagePlaneModule",l.imageId),w=void 0,E=void 0;_?(w=_.rowPixelSpacing||_.rowImagePixelSpacing,E=_.columnPixelSpacing||_.colImagePixelSpacing):(w=l.rowPixelSpacing,E=l.columnPixelSpacing);for(var x=function e(i){var s=a.data[i];if(!1===s.visible)return"continue";(0,g.draw)(o,function(e){(0,g.setShadow)(e,b);var a=f.default.getColorIfActive(s);(0,g.drawLine)(e,u,s.handles.start,s.handles.end,{color:a});var i={drawHandlesIfActive:b&&b.drawHandlesOnHover};(0,h.default)(e,r,s.handles,a,i),e.fillStyle=a;var o=(s.handles.end.x-s.handles.start.x)*(E||1),l=(s.handles.end.y-s.handles.start.y)*(w||1),c=Math.sqrt(o*o+l*l);if(s.length=c,!s.handles.textBox.hasMoved){var m={x:Math.max(s.handles.start.x,s.handles.end.x)};m.x===s.handles.start.x?m.y=s.handles.start.y:m.y=s.handles.end.y,s.handles.textBox.x=m.x,s.handles.textBox.y=m.y}var v=10,y=t(s,w,E);(0,d.default)(e,u,s.handles.textBox,y,s.handles,n,a,p,10,!0)})},T=0;T<a.data.length;T++){var P=x(T)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.lengthTouch=t.length=void 0;var s=r(n("./externalModules.js")),l=r(n("./imageTools/mouseButtonTool.js")),u=r(n("./imageTools/touchTool.js")),d=r(n("./util/drawLinkedTextBox.js")),c=r(n("./stateManagement/toolStyle.js")),f=r(n("./stateManagement/toolColors.js")),h=r(n("./manipulators/drawHandles.js")),m=n("./stateManagement/toolState.js"),p=r(n("./util/lineSegDistance.js")),g=n("./util/drawing.js"),v="length",y=(0,l.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:v}),b=(0,u.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:v});t.length=y,t.lengthTouch=b},"./imageTools/magnify.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=t.element;n.removeEventListener(x.default.MOUSE_DRAG,u),n.removeEventListener(x.default.MOUSE_UP,a),n.removeEventListener(x.default.MOUSE_CLICK,a),i(t)}function i(e){e.element.querySelector(".magnifyTool").style.display="none",document.body.style.cursor="default",m()}function o(e){var t=e.detail,n=t.element,r=(0,S.getToolOptions)(I,n);(e.isTouchEvent||(0,j.default)(t.which,r.mouseButtonMask))&&(n.addEventListener(x.default.MOUSE_DRAG,u),n.addEventListener(x.default.TOUCH_DRAG,u),n.addEventListener(x.default.MOUSE_UP,a),n.addEventListener(x.default.TOUCH_END,a),n.addEventListener(x.default.MOUSE_CLICK,a),n.addEventListener(x.default.NEW_IMAGE,s),h(t),window.requestAnimationFrame(function(){return d(t)}),e.preventDefault(),e.stopPropagation())}function s(e){var t=e.detail;t.currentPoints=k,d(t)}function l(e){var t=e.detail,n=t.element;n.removeEventListener(x.default.TOUCH_DRAG_END,l),n.removeEventListener(x.default.TOUCH_END,l),n.removeEventListener(x.default.NEW_IMAGE,s),i(t)}function u(e){var t=e.detail,n=t.element;d(t),!0===t.isTouchEvent&&(n.addEventListener(x.default.TOUCH_DRAG_END,l),n.addEventListener(x.default.TOUCH_END,l)),e.preventDefault(),e.stopPropagation()}function d(e){var t=e.element,n=t.querySelector(".magnifyTool");if(n||c(e.element),void 0!==A){var r=R.getConfiguration(),a=r.magnifySize,i=r.magnificationLevel,o=t.querySelector("canvas:not(.magnifyTool)"),s=(0,O.getNewContext)(n),l=a,u=T.default.cornerstone.pixelToCanvas(e.element,e.currentPoints.image);(0,M.clipToBox)(u,o),s.clearRect(0,0,a,a);var d={left:0,top:0,width:a,height:a};(0,O.fillBox)(s,d,"transparent");var f={x:u.x*i-.5*l,y:u.y*i-.5*l};"Safari"===L&&(f.x=Math.max(f.x,0),f.y=Math.max(f.y,0)),f.x=Math.min(f.x,A.width),f.y=Math.min(f.y,A.height),s.drawImage(A,f.x,f.y,l,l,0,0,l,l),n.style.top=u.y-.5*a+"px",n.style.left=u.x-.5*a+"px",e.isTouchEvent&&(n.style.top=u.y-.5*a-120+"px"),n.style.display="block",document.body.style.cursor="none"}}function c(e){if(null===e.querySelector(".magnifyTool")){var t=document.createElement("canvas");t.classList.add("magnifyTool");var n=R.getConfiguration();t.width=n.magnifySize,t.height=n.magnifySize,t.style.position="absolute",t.style.display="none",e.appendChild(t)}}function f(e){var t=e.querySelector(".magnifyTool");t&&e.removeChild(t)}function h(e){m();var t=e.enabledElement;void 0===t&&(t=T.default.cornerstone.getEnabledElement(e.element));var n=R.getConfiguration().magnificationLevel,r=t.canvas,a=t.image;(D=document.createElement("div")).width=r.width*n,D.height=r.height*n,T.default.cornerstone.enable(D);var i=T.default.cornerstone.getEnabledElement(D),o=T.default.cornerstone.getViewport(t.element);(A=i.canvas).width=r.width*n,A.height=r.height*n,i.viewport=(0,E.default)({},o),o.scale*=n,T.default.cornerstone.displayImage(D,a),T.default.cornerstone.setViewport(D,o)}function m(){void 0!==D&&(T.default.cornerstone.disable(D),D=void 0,A=void 0)}function p(e){e.removeEventListener(x.default.MOUSE_DOWN,o),f(e)}function g(e){var t=R.getConfiguration(t);if(!L){var n=(0,P.getBrowserInfo)().split(" ");L=n[0]}c(e)}function v(e,t){(0,S.setToolOptions)(I,e,{mouseButtonMask:t}),e.removeEventListener(x.default.MOUSE_DOWN,o),e.addEventListener(x.default.MOUSE_DOWN,o),c(e)}function y(){return C}function b(e){C=e}function _(e){e.removeEventListener(x.default.TOUCH_START,o),e.addEventListener(x.default.TOUCH_START,o)}function w(e){e.removeEventListener(x.default.TOUCH_START,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.magnifyTouchDrag=t.magnify=void 0;var E=r(n("../node_modules/babel-runtime/core-js/object/assign.js")),x=r(n("./events.js")),T=r(n("./externalModules.js")),P=n("./util/getMaxSimultaneousRequests.js"),j=r(n("./util/isMouseButtonEnabled.js")),S=n("./toolOptions.js"),M=n("./util/clip.js"),O=n("./util/drawing.js"),I="magnify",C={magnifySize:300,magnificationLevel:5},L=void 0,k=void 0,A=void 0,D=void 0,R={enable:g,activate:v,deactivate:p,disable:p,getConfiguration:y,setConfiguration:b},U={activate:_,deactivate:w,enable:_,disable:w};t.magnify=R,t.magnifyTouchDrag=U},"./imageTools/mouseButtonRectangleTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(n){var r=n.element,i=e.createNewMeasurement(n);i&&((0,h.addToolState)(n.element,w,i),r.removeEventListener(a.default.MOUSE_MOVE,p),(0,u.default)(n,w,i,i.handles.end,function(){i.active=!1,(0,c.default)(n,i.handles)&&(0,h.removeToolState)(n.element,w,i),r.addEventListener(a.default.MOUSE_MOVE,p)},t))}function r(e){var t=e.detail,r=t.element,a=(0,m.getToolOptions)(w,r);if((0,f.default)(t.which,a.mouseButtonMask))return n(t),!1}function p(t){var n=t.detail;o.default.setCoords(n);var r=(0,h.getToolState)(n.element,w);if(void 0!==r){for(var a=!1,s=n.currentPoints.canvas,u=0;u<r.data.length;u++){var d=r.data[u];!0===(0,l.default)(n.element,d.handles,s)&&(a=!0),(e.pointInsideRect(n.element,d,s)&&!d.active||!e.pointInsideRect(n.element,d,s)&&d.active)&&(d.active=!d.active,a=!0)}!0===a&&i.default.cornerstone.updateImage(n.element)}}function g(n){function r(){v.active=!1,(0,c.default)(o,v.handles)&&(0,h.removeToolState)(o.element,w,v),g.updateImage(o.element),l.addEventListener(a.default.MOUSE_MOVE,p)}var o=n.detail,l=o.element,g=i.default.cornerstone,v=void 0,y=(0,m.getToolOptions)(w,l);if((0,f.default)(o.which,y.mouseButtonMask)){var b=o.startPoints.canvas,_=(0,h.getToolState)(n.currentTarget,w),E=void 0,x=25;if(void 0!==_)for(E=0;E<_.data.length;E++){v=_.data[E];var T=(0,s.default)(o.element,v.handles,b,25);if(void 0!==T)return l.removeEventListener(a.default.MOUSE_MOVE,p),v.active=!0,(0,u.default)(o,w,v,T,r,t),n.stopImmediatePropagation(),!1}var P={deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:t};if(void 0!==_&&void 0!==e.pointInsideRect)for(E=0;E<_.data.length;E++)if(v=_.data[E],e.pointInsideRect(o.element,v,b))return l.removeEventListener(a.default.MOUSE_MOVE,p),(0,d.default)(n,v,_,w,P,r),l.addEventListener(a.default.MOUSE_MOVE,p),n.stopImmediatePropagation(),!1}}function v(t){t.removeEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(a.default.MOUSE_MOVE,p),t.removeEventListener(a.default.MOUSE_DOWN,g),t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,r),i.default.cornerstone.updateImage(t)}function y(t){t.removeEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(a.default.MOUSE_MOVE,p),t.removeEventListener(a.default.MOUSE_DOWN,g),t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,r),t.addEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),i.default.cornerstone.updateImage(t)}function b(t,n){(0,m.setToolOptions)(w,t,{mouseButtonMask:n}),t.removeEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(a.default.MOUSE_MOVE,p),t.removeEventListener(a.default.MOUSE_DOWN,g),t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,r),t.addEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(a.default.MOUSE_MOVE,p),t.addEventListener(a.default.MOUSE_DOWN,g),t.addEventListener(a.default.MOUSE_DOWN_ACTIVATE,r),i.default.cornerstone.updateImage(t)}function _(t,n){(0,m.setToolOptions)(w,t,{mouseButtonMask:n}),t.removeEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(a.default.MOUSE_MOVE,p),t.removeEventListener(a.default.MOUSE_DOWN,g),t.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,r),t.addEventListener(a.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(a.default.MOUSE_MOVE,p),t.addEventListener(a.default.MOUSE_DOWN,g),i.default.cornerstone.updateImage(t)}var w=e.toolType;return{enable:y,disable:v,activate:b,deactivate:_}};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=r(n("./stateManagement/toolCoordinates.js")),s=r(n("./manipulators/getHandleNearImagePoint.js")),l=r(n("./manipulators/handleActivator.js")),u=r(n("./manipulators/moveHandle.js")),d=r(n("./manipulators/moveAllHandles.js")),c=r(n("./manipulators/anyHandlesOutsideImage.js")),f=r(n("./util/isMouseButtonEnabled.js")),h=n("./stateManagement/toolState.js"),m=n("./toolOptions.js")},"./imageTools/mouseButtonTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e){function t(t){var n=t.detail,r=n.element,a=(0,v.getToolOptions)(j,r);(0,m.default)(n.which,a.mouseButtonMask)&&(e.addNewMeasurement?e.addNewMeasurement(n):y(n),t.preventDefault(),t.stopPropagation())}function n(t){var n=t.detail;s.default.setCoords(n);var r=(0,p.getToolState)(n.element,j);if(r){for(var a=!1,i=0;i<r.data.length;i++){var l=n.currentPoints.canvas,d=r.data[i];!0===(0,u.default)(n.element,d.handles,l)&&(a=!0),(e.pointNearTool(n.element,d,l)&&!d.active||!e.pointNearTool(n.element,d,l)&&d.active)&&(d.active=!d.active,a=!0)}!0===a&&o.default.cornerstone.updateImage(n.element)}}function r(t){function n(){a.invalidated=!0,(0,h.default)(r,a.handles)&&(0,p.removeToolState)(s,j,a),o.default.cornerstone.updateImage(s),s.addEventListener(i.default.MOUSE_MOVE,S)}var r=t.detail,a=void 0,s=r.element,u=(0,v.getToolOptions)(j,s);if((0,m.default)(r.which,u.mouseButtonMask)){var c=r.startPoints.canvas,g=(0,p.getToolState)(t.currentTarget,j);if(g){var y=void 0,b=void 0;for(b=!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage,y=0;y<g.data.length;y++){a=g.data[y];var _=6,w=(0,l.default)(s,a.handles,c,6);if(w)return s.removeEventListener(i.default.MOUSE_MOVE,S),a.active=!0,(0,d.default)(r,j,a,w,n,b),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}if(e.pointNearTool){var E=e.options||{deleteIfHandleOutsideImage:!0,preventHandleOutsideImage:!1};for(y=0;y<g.data.length;y++)if(a=g.data[y],a.active=!1,e.pointNearTool(s,a,c))return a.active=!0,s.removeEventListener(i.default.MOUSE_MOVE,S),(0,f.default)(t,a,g,j,E,n),t.stopImmediatePropagation(),t.stopPropagation(),void t.preventDefault()}}}}function y(t){var n=o.default.cornerstone,r=t.element,s=e.createNewMeasurement(t);if(s){(0,p.addToolState)(t.element,j,s),r.removeEventListener(i.default.MOUSE_MOVE,S),r.removeEventListener(i.default.MOUSE_DOWN,M),r.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),I&&r.removeEventListener(i.default.MOUSE_DOUBLE_CLICK,I),n.updateImage(r);var l=void 0;l=1===(0,a.default)(s.handles).length?d.default:c.default;var u=void 0;u=!(!e.options||void 0===e.options.preventHandleOutsideImage)&&e.options.preventHandleOutsideImage,l(t,j,s,s.handles.end,function(){s.active=!1,s.invalidated=!0,(0,h.default)(t,s.handles)&&(0,p.removeToolState)(r,j,s),r.addEventListener(i.default.MOUSE_MOVE,S),r.addEventListener(i.default.MOUSE_DOWN,M),r.addEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),I&&r.addEventListener(i.default.MOUSE_DOUBLE_CLICK,I),n.updateImage(r)},u)}}function b(t){t.removeEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(i.default.MOUSE_MOVE,S),t.removeEventListener(i.default.MOUSE_DOWN,M),t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),I&&t.removeEventListener(i.default.MOUSE_DOUBLE_CLICK,I),o.default.cornerstone.updateImage(t)}function _(t){t.removeEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(i.default.MOUSE_MOVE,S),t.removeEventListener(i.default.MOUSE_DOWN,M),t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),I&&t.removeEventListener(i.default.MOUSE_DOUBLE_CLICK,I),t.addEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),o.default.cornerstone.updateImage(t)}function w(t,n){(0,v.setToolOptions)(j,t,{mouseButtonMask:n}),t.removeEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(i.default.MOUSE_MOVE,S),t.removeEventListener(i.default.MOUSE_DOWN,M),t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),t.addEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(i.default.MOUSE_MOVE,S),t.addEventListener(i.default.MOUSE_DOWN,M),t.addEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),I&&(t.removeEventListener(i.default.MOUSE_DOUBLE_CLICK,I),t.addEventListener(i.default.MOUSE_DOUBLE_CLICK,I)),o.default.cornerstone.updateImage(t)}function E(t,n){(0,v.setToolOptions)(j,t,{mouseButtonMask:n});var r=i.default.TOOL_DEACTIVATED,a={mouseButtonMask:n,toolType:j,type:r};(0,g.default)(t,r,a),t.removeEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(i.default.MOUSE_MOVE,S),t.removeEventListener(i.default.MOUSE_DOWN,M),t.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,O),t.addEventListener(i.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(i.default.MOUSE_MOVE,S),t.addEventListener(i.default.MOUSE_DOWN,M),I&&(t.removeEventListener(i.default.MOUSE_DOUBLE_CLICK,I),t.addEventListener(i.default.MOUSE_DOUBLE_CLICK,I)),e.deactivate&&e.deactivate(t,n),o.default.cornerstone.updateImage(t)}function x(){return P}function T(e){P=e}var P={},j=e.toolType,S=e.mouseMoveCallback||n,M=e.mouseDownCallback||r,O=e.mouseDownActivateCallback||t,I=e.mouseDoubleClickCallback,C={enable:_,disable:b,activate:w,deactivate:E,getConfiguration:x,setConfiguration:T,mouseDownCallback:r,mouseMoveCallback:n,mouseDownActivateCallback:t};return e.pointNearTool&&(C.pointNearTool=e.pointNearTool),I&&(C.mouseDoubleClickCallback=I),e.addNewMeasurement&&(C.addNewMeasurement=e.addNewMeasurement),C};var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=r(n("./stateManagement/toolCoordinates.js")),l=r(n("./manipulators/getHandleNearImagePoint.js")),u=r(n("./manipulators/handleActivator.js")),d=r(n("./manipulators/moveHandle.js")),c=r(n("./manipulators/moveNewHandle.js")),f=r(n("./manipulators/moveAllHandles.js")),h=r(n("./manipulators/anyHandlesOutsideImage.js")),m=r(n("./util/isMouseButtonEnabled.js")),p=n("./stateManagement/toolState.js"),g=r(n("./util/triggerEvent.js")),v=n("./toolOptions.js")},"./imageTools/mouseWheelTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function t(n){n.removeEventListener(a.default.MOUSE_WHEEL,e),n.addEventListener(a.default.MOUSE_WHEEL,e)},disable:function t(n){n.removeEventListener(a.default.MOUSE_WHEEL,e)},enable:function t(n){n.removeEventListener(a.default.MOUSE_WHEEL,e)},deactivate:function t(n){n.removeEventListener(a.default.MOUSE_WHEEL,e)}}};var a=r(n("./events.js"))},"./imageTools/multiTouchDragTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n={},r=[a.default.MULTI_TOUCH_DRAG];return t&&!0===t.fireOnTouchStart&&r.push(a.default.MULTI_TOUCH_START),{activate:function n(a){r.forEach(function(t){a.removeEventListener(t,e),a.addEventListener(t,e)}),t&&t.activateCallback&&t.activateCallback(a)},disable:function n(a){r.forEach(function(t){a.removeEventListener(t,e)}),t&&t.disableCallback&&t.disableCallback(a)},enable:function n(a){r.forEach(function(t){a.removeEventListener(t,e)}),t&&t.enableCallback&&t.enableCallback(a)},deactivate:function n(a){r.forEach(function(t){a.removeEventListener(t,e)}),t&&t.deactivateCallback&&t.deactivateCallback(a)},getConfiguration:function e(){return n},setConfiguration:function e(t){n=t}}};var a=r(n("./events.js"))},"./imageTools/orientationMarkers.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=s.default.cornerstone,n=t.getEnabledElement(e),r=t.metaData.get("imagePlaneModule",n.image.imageId);if(r&&r.rowCosines&&r.columnCosines){var a=l.default.getOrientationString(r.rowCosines),i=l.default.getOrientationString(r.columnCosines),o=l.default.invertOrientationString(a);return{top:l.default.invertOrientationString(i),bottom:i,left:o,right:a}}}function i(e){var t=s.default.cornerstone,n=t.getEnabledElement(e),r=void 0;r={x:n.image.width/2,y:5};var a=t.pixelToCanvas(e,r);r={x:n.image.width/2,y:n.image.height-5};var i=t.pixelToCanvas(e,r);r={x:5,y:n.image.height/2};var o=t.pixelToCanvas(e,r);return r={x:n.image.width-10,y:n.image.height/2},{top:a,bottom:i,left:o,right:t.pixelToCanvas(e,r)}}function o(e){var t=e.detail,n=t.element,r=a(n);if(r){var o=i(n,r),s=(0,f.getNewContext)(t.canvasContext.canvas),l=d.default.getToolColor(),u={top:s.measureText(r.top).width,left:s.measureText(r.left).width,right:s.measureText(r.right).width,bottom:s.measureText(r.bottom).width};(0,c.default)(s,r.top,o.top.x-u.top/2,o.top.y,l),(0,c.default)(s,r.left,o.left.x-u.left/2,o.left.y,l);var m=h.getConfiguration();m&&m.drawAllMarkers&&((0,c.default)(s,r.right,o.right.x-u.right/2,o.right.y,l),(0,c.default)(s,r.bottom,o.bottom.x-u.bottom/2,o.bottom.y,l))}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./externalModules.js")),l=r(n("./orientation/index.js")),u=r(n("./imageTools/displayTool.js")),d=r(n("./stateManagement/toolColors.js")),c=r(n("./util/drawTextBox.js")),f=n("./util/drawing.js"),h=(0,u.default)(o);t.default=h},"./imageTools/pan.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail.element;t.removeEventListener(s.default.MOUSE_DRAG,o),t.removeEventListener(s.default.MOUSE_UP,a),t.removeEventListener(s.default.MOUSE_CLICK,a)}function i(e){var t=e.detail,n=t.element,r=(0,f.getToolOptions)(h,n);(0,c.default)(t.which,r.mouseButtonMask)&&(n.addEventListener(s.default.MOUSE_DRAG,o),n.addEventListener(s.default.MOUSE_UP,a),n.addEventListener(s.default.MOUSE_CLICK,a),e.preventDefault(),e.stopPropagation())}function o(e){var t=e.detail,n=t.viewport.scale,r=t.viewport.scale;t.image.rowPixelSpacing<t.image.columnPixelSpacing?n*=t.image.columnPixelSpacing/t.image.rowPixelSpacing:t.image.columnPixelSpacing<t.image.rowPixelSpacing&&(r*=t.image.rowPixelSpacing/t.image.columnPixelSpacing),t.viewport.translation.x+=t.deltaPoints.page.x/n,t.viewport.translation.y+=t.deltaPoints.page.y/r,l.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.panTouchDrag=t.pan=void 0;var s=r(n("./events.js")),l=r(n("./externalModules.js")),u=r(n("./imageTools/simpleMouseButtonTool.js")),d=r(n("./imageTools/touchDragTool.js")),c=r(n("./util/isMouseButtonEnabled.js")),f=n("./toolOptions.js"),h="pan",m=(0,u.default)(i,h),p=(0,d.default)(o,h);t.pan=m,t.panTouchDrag=p},"./imageTools/panMultiTouch.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=s.getConfiguration();n&&n.testPointers(t)&&(t.viewport.translation.x+=t.deltaPoints.page.x/t.viewport.scale,t.viewport.translation.y+=t.deltaPoints.page.y/t.viewport.scale,i.default.cornerstone.setViewport(t.element,t.viewport),e.preventDefault(),e.stopPropagation())}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./externalModules.js")),o={testPointers:function e(t){return t.numPointers>=2}},s=(0,r(n("./imageTools/multiTouchDragTool.js")).default)(a);s.setConfiguration(o),t.default=s},"./imageTools/probe.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}}}function i(e,t,n){if(!1===t.visible)return!1;var r=s.default.cornerstone.pixelToCanvas(e,t.handles.end);return s.default.cornerstoneMath.point.distance(r,n)<5}function o(e){var t=e.detail,n=(0,g.getToolState)(e.currentTarget,y);if(n)for(var r=s.default.cornerstone,a=(0,v.getNewContext)(t.canvasContext.canvas),i=c.default.getFont(),o=c.default.getFontSize(),l=function e(s){var l=n.data[s];if(!1===l.visible)return"continue";(0,v.draw)(a,function(e){var n=d.default.getColorIfActive(l);(0,f.default)(e,t,l.handles,n);var a=Math.round(l.handles.end.x),s=Math.round(l.handles.end.y),u=void 0,c=void 0,g=void 0;if(a>=0&&s>=0&&a<t.image.columns&&s<t.image.rows){if(t.image.color)c=a+", "+s,g="R: "+(u=(0,m.default)(t.element,a,s,1,1))[0]+" G: "+u[1]+" B: "+u[2];else{var v=(u=r.getStoredPixels(t.element,a,s,1,1))[0],y=v*t.image.slope+t.image.intercept,b=(0,p.default)(t.image,v);c=a+", "+s,g="SP: "+v+" MO: "+parseFloat(y.toFixed(3)),b&&(g+=" SUV: "+parseFloat(b.toFixed(3)))}var _={x:l.handles.end.x+3,y:l.handles.end.y-3},w=r.pixelToCanvas(t.element,_);e.font=i,e.fillStyle=n,(0,h.default)(e,g,w.x,w.y+o+5,n),(0,h.default)(e,c,w.x,w.y,n)}})},u=0;u<n.data.length;u++){var b=l(u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.probeTouch=t.probe=void 0;var s=r(n("./externalModules.js")),l=r(n("./imageTools/mouseButtonTool.js")),u=r(n("./imageTools/touchTool.js")),d=r(n("./stateManagement/toolColors.js")),c=r(n("./stateManagement/textStyle.js")),f=r(n("./manipulators/drawHandles.js")),h=r(n("./util/drawTextBox.js")),m=r(n("./util/getRGBPixels.js")),p=r(n("./util/calculateSUV.js")),g=n("./stateManagement/toolState.js"),v=n("./util/drawing.js"),y="probe",b=(0,l.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:y}),_=(0,u.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:y});t.probe=b,t.probeTouch=_},"./imageTools/rectangleRoi.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,invalidated:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function i(e,t,n){if(!1===t.visible)return!1;var r=u.default.cornerstone,a=r.pixelToCanvas(e,t.handles.start),i=r.pixelToCanvas(e,t.handles.end),o={left:Math.min(a.x,i.x),top:Math.min(a.y,i.y),width:Math.abs(a.x-i.x),height:Math.abs(a.y-i.y)};return u.default.cornerstoneMath.rect.distanceToPoint(o,n)<5}function o(e,t){for(var n=0,r=0,a=0,i=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)n+=e[i],r+=e[i]*e[i],a++,i++;if(0===a)return{count:a,mean:0,variance:0,stdDev:0};var l=n/a,u=r/a-l*l;return{count:a,mean:l,variance:u,stdDev:Math.sqrt(u)}}function s(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function l(e){function t(e){var t=e.meanStdDev,n=e.meanStdDevSUV,r=e.area,a=[];if(t&&t.mean){var i="";"CT"===T&&(i=" HU");var o="Mean: "+s(t.mean.toFixed(2))+i,l="StdDev: "+s(t.stdDev.toFixed(2))+i;if(n&&void 0!==n.mean){var u=" SUV: ";o+=u+s(n.mean.toFixed(2)),l+=u+s(n.stdDev.toFixed(2))}a.push(o),a.push(l)}if(r){var d=" mm"+String.fromCharCode(178);P&&j||(d=" pixels"+String.fromCharCode(178));var c="Area: "+s(r.toFixed(2))+d;a.push(c)}return a}function n(e){var t=Math.min(e.start.x,e.end.x),n=Math.min(e.start.y,e.end.y),r=Math.abs(e.start.x-e.end.x),a=Math.abs(e.start.y-e.end.y);return[{x:t+r/2,y:n},{x:t,y:n+a/2},{x:t+r/2,y:n+a},{x:t+r,y:n+a/2}]}var r=e.detail,a=(0,g.getToolState)(e.currentTarget,b);if(a){var i=u.default.cornerstone,l=r.image,d=r.element,c=f.default.getToolWidth(),w=_.getConfiguration(),E=i.metaData.get("generalSeriesModule",l.imageId),x=i.metaData.get("imagePlaneModule",l.imageId),T=void 0,P=void 0,j=void 0;x?(P=x.rowPixelSpacing||x.rowImagePixelSpacing,j=x.columnPixelSpacing||x.colImagePixelSpacing):(P=l.rowPixelSpacing,j=l.columnPixelSpacing),E&&(T=E.modality);for(var S=(0,y.getNewContext)(r.canvasContext.canvas),M=function e(s){var u=a.data[s];if(!1===u.visible)return"continue";(0,y.draw)(S,function(e){(0,y.setShadow)(e,w);var a=h.default.getColorIfActive(u),s=i.pixelToCanvas(d,u.handles.start),f=i.pixelToCanvas(d,u.handles.end),g=Math.min(s.x,f.x),b=Math.min(s.y,f.y),_=Math.abs(s.x-f.x),E=Math.abs(s.y-f.y);if((0,y.path)(e,{color:a,lineWidth:c},function(e){e.rect(g,b,_,E)}),w&&w.drawHandlesOnHover)if(!0===u.active)(0,m.default)(e,r,u.handles,a);else{var x={drawHandlesIfActive:!0};(0,m.default)(e,r,u.handles,a,x)}else(0,m.default)(e,r,u.handles,a);var S=void 0,M=void 0,O=void 0;if(!1===u.invalidated)M=u.meanStdDev,O=u.meanStdDevSUV,S=u.area;else{var I={left:Math.min(u.handles.start.x,u.handles.end.x),top:Math.min(u.handles.start.y,u.handles.end.y),width:Math.abs(u.handles.start.x-u.handles.end.x),height:Math.abs(u.handles.start.y-u.handles.end.y)};l.color||(M=o(i.getPixels(d,I.left,I.top,I.width,I.height),I),"PT"===T&&(O={mean:(0,p.default)(l,(M.mean-l.intercept)/l.slope),stdDev:(0,p.default)(l,(M.stdDev-l.intercept)/l.slope)}),M&&!isNaN(M.mean)&&(u.meanStdDev=M,u.meanStdDevSUV=O)),S=I.width*(j||1)*(I.height*(P||1)),isNaN(S)||(u.area=S),u.invalidated=!1}var C=t(u);u.handles.textBox.hasMoved||(u.handles.textBox.x=Math.max(u.handles.start.x,u.handles.end.x),u.handles.textBox.y=(u.handles.start.y+u.handles.end.y)/2),(0,v.default)(e,d,u.handles.textBox,C,u.handles,n,a,c,0,!0)})},O=0;O<a.data.length;O++){var I=M(O)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rectangleRoiTouch=t.rectangleRoi=void 0;var u=r(n("./externalModules.js")),d=r(n("./imageTools/mouseButtonTool.js")),c=r(n("./imageTools/touchTool.js")),f=r(n("./stateManagement/toolStyle.js")),h=r(n("./stateManagement/toolColors.js")),m=r(n("./manipulators/drawHandles.js")),p=r(n("./util/calculateSUV.js")),g=n("./stateManagement/toolState.js"),v=r(n("./util/drawLinkedTextBox.js")),y=n("./util/drawing.js"),b="rectangleRoi",_=(0,d.default)({createNewMeasurement:a,onImageRendered:l,pointNearTool:i,toolType:b}),w=(0,c.default)({createNewMeasurement:a,onImageRendered:l,pointNearTool:i,toolType:b});t.rectangleRoi=_,t.rectangleRoiTouch=w},"./imageTools/rotate.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=e.element.getBoundingClientRect(e.element),a=e.element.clientWidth,i=e.element.clientHeight,o=e.viewport.scale,s=e.viewport.translation,l={x:r.left+a/2+s.x*o,y:r.top+i/2+s.y*o},u=t,d={x:e.currentPoints.client.x,y:e.currentPoints.client.y},f=Math.sqrt(Math.pow(l.x-u.x,2)+Math.pow(l.y-u.y,2)),h=Math.sqrt(Math.pow(l.x-d.x,2)+Math.pow(l.y-d.y,2)),m=Math.sqrt(Math.pow(u.x-d.x,2)+Math.pow(u.y-d.y,2)),p=180*Math.acos((Math.pow(f,2)+Math.pow(h,2)-Math.pow(m,2))/(2*f*h))/Math.PI;(u.x-l.x)*(d.y-l.y)-(u.y-l.y)*(d.x-l.x)<0&&(p=-p),e.viewport.rotation=n+p,c.default.cornerstone.setViewport(e.element,e.viewport)}function i(e){e.viewport.rotation+=e.deltaPoints.page.x/e.viewport.scale,c.default.cornerstone.setViewport(e.element,e.viewport)}function o(e){e.viewport.rotation+=e.deltaPoints.page.y/e.viewport.scale,c.default.cornerstone.setViewport(e.element,e.viewport)}function s(e){var t=e.detail,n=t.element,r=(0,p.getToolOptions)(g,n),a={x:t.currentPoints.client.x,y:t.currentPoints.client.y},i=t.viewport.rotation;if((0,m.default)(t.which,r.mouseButtonMask)){var o=u.bind({},a,i),s=function e(t){var n=t.detail.element;n.removeEventListener(d.default.MOUSE_DRAG,o),n.removeEventListener(d.default.MOUSE_UP,e),n.removeEventListener(d.default.MOUSE_CLICK,e)};n.addEventListener(d.default.MOUSE_DRAG,o),n.addEventListener(d.default.MOUSE_UP,s),n.addEventListener(d.default.MOUSE_CLICK,s),e.preventDefault(),e.stopPropagation()}}function l(e){var t=e.detail,n=t.element,r={x:t.currentPoints.client.x,y:t.currentPoints.client.y},a=t.viewport.rotation,i=u.bind({},r,a),o=function e(t){var n=t.detail.element;n.removeEventListener(d.default.TOUCH_DRAG,i),n.removeEventListener(d.default.TOUCH_END,e)};n.addEventListener(d.default.TOUCH_DRAG,i),n.addEventListener(d.default.TOUCH_END,o),e.preventDefault(),e.stopPropagation()}function u(e,t,n){var r=n.detail;v.strategy(r,e,t),c.default.cornerstone.setViewport(r.element,r.viewport),n.preventDefault(),n.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.rotateTouchDrag=t.rotate=void 0;var d=r(n("./events.js")),c=r(n("./externalModules.js")),f=r(n("./imageTools/simpleMouseButtonTool.js")),h=r(n("./imageTools/simpleTouchTool.js")),m=r(n("./util/isMouseButtonEnabled.js")),p=n("./toolOptions.js"),g="rotate",v=(0,f.default)(s,g);v.strategies={default:a,horizontal:i,vertical:o},v.strategy=a;var y=(0,h.default)(l,g);t.rotate=v,t.rotateTouchDrag=y},"./imageTools/rotateTouch.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail;return t.viewport.rotation+=t.rotation,l.default.cornerstone.setViewport(t.element,t.viewport),!1}function i(e){e.removeEventListener(s.default.TOUCH_ROTATE,a)}function o(e){e.removeEventListener(s.default.TOUCH_ROTATE,a),e.addEventListener(s.default.TOUCH_ROTATE,a)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./events.js")),l=r(n("./externalModules.js")),u={activate:o,disable:i};t.default=u},"./imageTools/saveAs.js":function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"image/png",r=e.querySelector("canvas");if(r.msToBlob){var a=r.msToBlob();return window.navigator.msSaveBlob(a,t)}var i=document.createElement("a");if(i.download=t,i.href=r.toDataURL(n,1),document.createEvent){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(o)}else i.fireEvent&&i.fireEvent("onclick")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},"./imageTools/scaleOverlayTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){e.moveTo(t.x,t.y),e.lineTo(n.x,n.y)}function i(e,t){for(var n=0;t.verticalLine.start.y+n*t.verticalMinorTick<=t.vscaleBounds.bottomRight.y;){var r={x:t.verticalLine.start.x,y:t.verticalLine.start.y+n*t.verticalMinorTick},i={x:0,y:t.verticalLine.start.y+n*t.verticalMinorTick};i.x=n%5==0?t.verticalLine.start.x-t.majorTickLength:t.verticalLine.start.x-t.minorTickLength,a(e,r,i),n++}}function o(e,t){for(var n=0;t.horizontalLine.start.x+n*t.horizontalMinorTick<=t.hscaleBounds.bottomRight.x;){var r={x:t.horizontalLine.start.x+n*t.horizontalMinorTick,y:t.horizontalLine.start.y},i={x:t.horizontalLine.start.x+n*t.horizontalMinorTick,y:0};i.y=n%5==0?t.horizontalLine.start.y-t.majorTickLength:t.horizontalLine.start.y-t.minorTickLength,a(e,r,i),n++}}function s(e,t){var n={x:t.verticalLine.start.x,y:t.verticalLine.start.y},r={x:t.verticalLine.end.x,y:t.verticalLine.end.y},o=t.color,s=t.lineWidth;(0,v.path)(e,{color:o,lineWidth:s},function(e){a(e,n,r),i(e,t)})}function l(e,t){a(e,{x:t.horizontalLine.start.x,y:t.horizontalLine.start.y},{x:t.horizontalLine.end.x,y:t.horizontalLine.end.y}),o(e,t)}function u(e,t){e.shadowColor=t.shadowColor,e.shadowBlur=t.shadowBlur;var n=t.color,r=t.lineWidth;(0,v.path)(e,{color:n,lineWidth:r},function(e){s(e,t),l(e,t)})}function d(e,t,n,r,a){var i={left:0,top:0,width:t.width,height:t.height},o=r*Math.min(1e3,t.width),s=a*Math.min(1e3,t.height);return i={left:i.left+o,top:i.top+s,width:i.width-2*o,height:i.height-2*s},{topLeft:{x:i.left,y:i.top},bottomRight:{x:i.left+i.width,y:i.top+i.height}}}function c(e){var t=e.detail,n=(0,v.getNewContext)(t.canvasContext.canvas),r=t.image,a=t.viewport,i=g.default.cornerstone.metaData.get("imagePlaneModule",r.imageId),o=void 0,s=void 0;if(i?(o=i.rowPixelSpacing||i.rowImagePixelSpacing,s=i.columnPixelSpacing||i.colImagePixelSpacing):(o=r.rowPixelSpacing,s=r.columnPixelSpacing),o&&s){var l={width:n.canvas.width,height:n.canvas.height},c={width:r.width,height:r.height},f=10/o*a.scale,m=10/s*a.scale,p=d(t,l,c,.25,.05),y=d(t,l,c,.05,.15);if(l.width&&l.height&&c.width&&c.height&&p&&y){var _=b.getConfiguration(),w=(0,h.default)({},{hscaleBounds:p,vscaleBounds:y,verticalMinorTick:f,horizontalMinorTick:m,minorTickLength:12.5,majorTickLength:25,verticalLine:{start:{x:y.bottomRight.x,y:y.topLeft.y},end:{x:y.bottomRight.x,y:y.bottomRight.y}},horizontalLine:{start:{x:p.topLeft.x,y:p.bottomRight.y},end:{x:p.bottomRight.x,y:p.bottomRight.y}}},_);(0,v.draw)(n,function(e){u(e,w)})}}}function f(e){e.removeEventListener(p.default.IMAGE_RENDERED,c),g.default.cornerstone.updateImage(e)}Object.defineProperty(t,"__esModule",{value:!0});var h=r(n("../node_modules/babel-runtime/core-js/object/assign.js")),m=r(n("./imageTools/displayTool.js")),p=r(n("./events.js")),g=r(n("./externalModules.js")),v=n("./util/drawing.js"),y={color:"white",lineWidth:2,shadowColor:"black",shadowBlur:4},b=(0,m.default)(c);b.setConfiguration(y),b.disable=f,t.default=b},"./imageTools/seedAnnotate.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e(prompt("Enter your annotation:"))}function i(e,t,n){n(prompt("Change your annotation:"))}function o(e){function t(e){null===e?(0,j.removeToolState)(r,O,i):i.text=e,i.active=!1,n.updateImage(r)}var n=m.default.cornerstone,r=e.element,a=C.getConfiguration(),i=s(e);(0,j.addToolState)(r,O,i),n.updateImage(r),(0,w.default)(e,O,i,i.handles.end,function(){(0,_.default)(e,i.handles)&&(0,j.removeToolState)(r,O,i),void 0===i.text&&a.getTextCallback(t),n.updateImage(r)})}function s(e){return{visible:!0,active:!0,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function l(e,t,n){if(!1===t.visible)return!1;if(t.handles.end){var r=m.default.cornerstone.pixelToCanvas(e,t.handles.end);return m.default.cornerstoneMath.point.distance(r,n)<25}}function u(e){function t(e){var t="";return t=c.showCoordinates?e.text+" x: "+Math.round(e.handles.end.x)+" y: "+Math.round(e.handles.end.y):e.text}function n(e){return[e.end]}var r=e.detail,a=(0,j.getToolState)(e.currentTarget,O);if(a)for(var i=m.default.cornerstone,o=r.enabledElement,s=(0,M.getNewContext)(r.canvasContext.canvas),l=r.canvasContext.canvas.width,u=y.default.getToolWidth(),d=v.default.getFont(),c=C.getConfiguration(),f=function e(f){var h=a.data[f];if(!1===h.visible)return"continue";(0,M.draw)(s,function(e){(0,M.setShadow)(e,c);var a=b.default.getColorIfActive(h),s=i.pixelToCanvas(r.element,h.handles.end),f=6;(0,M.drawCircle)(e,r.element,h.handles.end,6,{color:a});var m={drawHandlesIfActive:c&&c.drawHandlesOnHover};if(c.drawHandles&&(0,E.default)(e,r,s,a,m),h.text&&""!==h.text){var p=t(h);e.font=d;var g=e.measureText(p).width+10,y=v.default.getFontSize()+10,_=Math.max(g,y)/2+5;s.x>l/2&&(_=-_);var w=void 0;if(!h.handles.textBox.hasMoved){w={x:s.x-g/2+_,y:s.y-y/2};var x=i.internal.getTransform(o);x.invert();var T=x.transformPoint(w.x,w.y);h.handles.textBox.x=T.x,h.handles.textBox.y=T.y}(0,P.default)(e,r.element,h.handles.textBox,p,h.handles,n,a,u,0,!1)}})},h=0;h<a.data.length;h++){var p=f(h)}}function d(e){function t(e){null===e?(0,j.removeToolState)(r,O,i):i.text=e,i.active=!1,n.updateImage(r)}var n=m.default.cornerstone,r=e.element,a=C.getConfiguration(),i=s(e);(0,j.addToolState)(r,O,i),n.updateImage(r),(0,w.default)(e,O,i,i.handles.end,function(){(0,_.default)(e,i.handles)&&(0,j.removeToolState)(r,O,i),void 0===i.text&&a.getTextCallback(t),n.updateImage(r)})}function c(e){function t(e,t,n){!0===n?(0,j.removeToolState)(a,O,e):e.text=t,e.active=!1,r.updateImage(a)}var n=e.detail,r=m.default.cornerstone,a=n.element,i=void 0,o=(0,S.getToolOptions)(O,a);if((0,x.default)(n.which,o.mouseButtonMask)){var s=C.getConfiguration(),u=n.currentPoints.canvas,d=(0,j.getToolState)(a,O);if(d){for(var c=0;c<d.data.length;c++)if(i=d.data[c],l(a,i,u)||(0,T.default)(i.handles.textBox,u))return i.active=!0,r.updateImage(a),s.changeTextCallback(i,n,t),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}}}function f(e){function t(e,t,n){console.log("pressCallback doneChangingTextCallback"),!0===n?(0,j.removeToolState)(a,O,e):e.text=t,e.active=!1,r.updateImage(a),a.addEventListener(h.default.TOUCH_START,L.touchStartCallback),a.addEventListener(h.default.TOUCH_START_ACTIVE,L.touchDownActivateCallback),a.addEventListener(h.default.TAP,L.tapCallback)}var n=e.detail,r=m.default.cornerstone,a=n.element,i=void 0,o=C.getConfiguration(),s=n.currentPoints.canvas,u=(0,j.getToolState)(a,O);if(!u)return!1;if(n.handlePressed)return a.removeEventListener(h.default.TOUCH_START,L.touchStartCallback),a.removeEventListener(h.default.TOUCH_START_ACTIVE,L.touchDownActivateCallback),a.removeEventListener(h.default.TAP,L.tapCallback),o.changeTextCallback(n.handlePressed,n,t),e.stopImmediatePropagation(),!1;for(var d=0;d<u.data.length;d++)if(i=u.data[d],l(a,i,s)||(0,T.default)(i.handles.textBox,s))return i.active=!0,r.updateImage(a),a.removeEventListener(h.default.TOUCH_START,L.touchStartCallback),a.removeEventListener(h.default.TOUCH_START_ACTIVE,L.touchDownActivateCallback),a.removeEventListener(h.default.TAP,L.tapCallback),o.changeTextCallback(i,n,t),e.stopImmediatePropagation(),!1;e.preventDefault(),e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.seedAnnotateTouch=t.seedAnnotate=void 0;var h=r(n("./events.js")),m=r(n("./externalModules.js")),p=r(n("./imageTools/mouseButtonTool.js")),g=r(n("./imageTools/touchTool.js")),v=r(n("./stateManagement/textStyle.js")),y=r(n("./stateManagement/toolStyle.js")),b=r(n("./stateManagement/toolColors.js")),_=r(n("./manipulators/anyHandlesOutsideImage.js")),w=r(n("./manipulators/moveHandle.js")),E=r(n("./manipulators/drawHandles.js")),x=r(n("./util/isMouseButtonEnabled.js")),T=r(n("./util/pointInsideBoundingBox.js")),P=r(n("./util/drawLinkedTextBox.js")),j=n("./stateManagement/toolState.js"),S=n("./toolOptions.js"),M=n("./util/drawing.js"),O="seedAnnotate",I={getTextCallback:a,changeTextCallback:i,drawHandles:!1,drawHandlesOnHover:!0,currentLetter:"A",currentNumber:0,showCoordinates:!0,countUp:!0},C=(0,p.default)({addNewMeasurement:o,createNewMeasurement:s,onImageRendered:u,pointNearTool:l,toolType:O,mouseDoubleClickCallback:c});C.setConfiguration(I);var L=(0,g.default)({addNewMeasurement:d,createNewMeasurement:s,onImageRendered:u,pointNearTool:l,toolType:O,pressCallback:f});t.seedAnnotate=C,t.seedAnnotateTouch=L},"./imageTools/simpleAngle.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return{visible:!0,active:!0,color:void 0,handles:{start:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},middle:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0},end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!1},textBox:{active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0}}}}function i(e,t,n){return!1!==t.visible&&((0,x.default)(e,t.handles.start,t.handles.middle,n)<25||(0,x.default)(e,t.handles.middle,t.handles.end,n)<25)}function o(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function s(e){function t(e,t,n){var r=t&&n?"":" (isotropic)",a="00B0";return e.rAngle.toString()+String.fromCharCode(parseInt(a,16))+r}function n(e){return[e.start,e.middle,e.end]}var r=e.detail,a=(0,T.getToolState)(e.currentTarget,j);if(a)for(var i=c.default.cornerstone,s=r.enabledElement,l=(0,P.getNewContext)(r.canvasContext.canvas),u=g.default.getToolWidth(),d=p.default.getFont(),f=S.getConfiguration(),y=function e(c){var p=a.data[c];if(!1===p.visible)return"continue";(0,P.draw)(l,function(e){(0,P.setShadow)(e,f);var a=v.default.getColorIfActive(p),l=i.pixelToCanvas(r.element,p.handles.start),c=i.pixelToCanvas(r.element,p.handles.middle);(0,P.drawJoinedLines)(e,r.element,p.handles.start,[p.handles.middle,p.handles.end],{color:a});var g={drawHandlesIfActive:f&&f.drawHandlesOnHover};(0,w.default)(e,r,p.handles,a,g),e.fillStyle=a;var y=r.image.columnPixelSpacing||1,b=r.image.rowPixelSpacing||1,_={x:(Math.ceil(p.handles.middle.x)-Math.ceil(p.handles.start.x))*y,y:(Math.ceil(p.handles.middle.y)-Math.ceil(p.handles.start.y))*b},E={x:(Math.ceil(p.handles.end.x)-Math.ceil(p.handles.middle.x))*y,y:(Math.ceil(p.handles.end.y)-Math.ceil(p.handles.middle.y))*b},x={x:(Math.ceil(p.handles.end.x)-Math.ceil(p.handles.start.x))*y,y:(Math.ceil(p.handles.end.y)-Math.ceil(p.handles.start.y))*b},T=o(_),j=o(E),S=o(x),M=Math.acos((Math.pow(T,2)+Math.pow(j,2)-Math.pow(S,2))/(2*T*j));if(M*=180/Math.PI,p.rAngle=(0,h.default)(M,2),p.rAngle){var O=t(p,r.image.rowPixelSpacing,r.image.columnPixelSpacing),I=15,C=void 0;if(!p.handles.textBox.hasMoved){C={x:c.x,y:c.y},e.font=d;var L=e.measureText(O).width;c.x<l.x?C.x-=15+L+10:C.x+=15;var k=i.internal.getTransform(s);k.invert();var A=k.transformPoint(C.x,C.y);p.handles.textBox.x=A.x,p.handles.textBox.y=A.y}(0,m.default)(e,r.element,p.handles.textBox,O,p.handles,n,a,u,0,!0)}})},b=0;b<a.data.length;b++){var _=y(b)}}function l(e){var t=c.default.cornerstone,n=a(e),r=e.element;(0,T.addToolState)(r,j,n),r.removeEventListener(d.default.MOUSE_MOVE,S.mouseMoveCallback),r.removeEventListener(d.default.MOUSE_DRAG,S.mouseMoveCallback),r.removeEventListener(d.default.MOUSE_DOWN,S.mouseDownCallback),r.removeEventListener(d.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),t.updateImage(r),(0,b.default)(e,j,n,n.handles.middle,function(){if(n.active=!1,(0,y.default)(e,n.handles))return(0,T.removeToolState)(r,j,n),r.addEventListener(d.default.MOUSE_MOVE,S.mouseMoveCallback),r.addEventListener(d.default.MOUSE_DRAG,S.mouseMoveCallback),r.addEventListener(d.default.MOUSE_DOWN,S.mouseDownCallback),r.addEventListener(d.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),void t.updateImage(r);n.handles.end.active=!0,t.updateImage(r),(0,b.default)(e,j,n,n.handles.end,function(){n.active=!1,(0,y.default)(e,n.handles)&&(0,T.removeToolState)(r,j,n),r.addEventListener(d.default.MOUSE_MOVE,S.mouseMoveCallback),r.addEventListener(d.default.MOUSE_DRAG,S.mouseMoveCallback),r.addEventListener(d.default.MOUSE_DOWN,S.mouseDownCallback),r.addEventListener(d.default.MOUSE_DOWN_ACTIVATE,S.mouseDownActivateCallback),t.updateImage(r)})})}function u(e){var t=c.default.cornerstone,n=a(e),r=e.element;(0,T.addToolState)(r,j,n),r.removeEventListener(d.default.TOUCH_DRAG,M.touchMoveCallback),r.removeEventListener(d.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),r.removeEventListener(d.default.TOUCH_START,M.touchStartCallback),r.removeEventListener(d.default.TAP,M.tapCallback),t.updateImage(r),(0,_.default)(e,j,n,n.handles.middle,function(){if((0,y.default)(e,n.handles))return(0,T.removeToolState)(r,j,n),r.addEventListener(d.default.TOUCH_DRAG,M.touchMoveCallback),r.addEventListener(d.default.TOUCH_START,M.touchStartCallback),r.addEventListener(d.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),r.addEventListener(d.default.TAP,M.tapCallback),void t.updateImage(r);(0,_.default)(e,j,n,n.handles.end,function(){(0,y.default)(e,n.handles)&&((0,T.removeToolState)(r,j,n),t.updateImage(r)),r.addEventListener(d.default.TOUCH_DRAG,M.touchMoveCallback),r.addEventListener(d.default.TOUCH_START,M.touchStartCallback),r.addEventListener(d.default.TOUCH_START_ACTIVE,M.touchDownActivateCallback),r.addEventListener(d.default.TAP,M.tapCallback)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.simpleAngleTouch=t.simpleAngle=void 0;var d=r(n("./events.js")),c=r(n("./externalModules.js")),f=r(n("./imageTools/mouseButtonTool.js")),h=r(n("./util/roundToDecimal.js")),m=r(n("./util/drawLinkedTextBox.js")),p=r(n("./stateManagement/textStyle.js")),g=r(n("./stateManagement/toolStyle.js")),v=r(n("./stateManagement/toolColors.js")),y=r(n("./manipulators/anyHandlesOutsideImage.js")),b=r(n("./manipulators/moveNewHandle.js")),_=r(n("./manipulators/moveNewHandleTouch.js")),w=r(n("./manipulators/drawHandles.js")),E=r(n("./imageTools/touchTool.js")),x=r(n("./util/lineSegDistance.js")),T=n("./stateManagement/toolState.js"),P=n("./util/drawing.js"),j="simpleAngle",S=(0,f.default)({createNewMeasurement:a,addNewMeasurement:l,onImageRendered:s,pointNearTool:i,toolType:j}),M=(0,E.default)({createNewMeasurement:a,addNewMeasurement:u,onImageRendered:s,pointNearTool:i,toolType:j});t.simpleAngle=S,t.simpleAngleTouch=M},"./imageTools/simpleMouseButtonTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleMouseButtonTool: toolType is required");var n={};return{activate:function n(r,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s.mouseButtonMask=o,(0,i.setToolOptions)(t,r,s),r.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e),r.addEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},disable:function t(n){n.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},enable:function t(n){n.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},deactivate:function t(n){n.removeEventListener(a.default.MOUSE_DOWN_ACTIVATE,e)},getConfiguration:function e(){return n},setConfiguration:function e(t){n=t}}};var a=r(n("./events.js")),i=n("./toolOptions.js")},"./imageTools/simpleTouchTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!t)throw new Error("simpleTouchTool: toolType is required");var n={};return{activate:function n(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,i.setToolOptions)(t,r,o),r.removeEventListener(a.default.TOUCH_START,e),r.addEventListener(a.default.TOUCH_START,e)},disable:function t(n){n.removeEventListener(a.default.TOUCH_START,e)},enable:function t(n){n.removeEventListener(a.default.TOUCH_START,e)},deactivate:function t(n){n.removeEventListener(a.default.TOUCH_START,e)},getConfiguration:function e(){return n},setConfiguration:function e(t){n=t}}};var a=r(n("./events.js")),i=n("./toolOptions.js")},"./imageTools/textMarker.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=w.getConfiguration();if(t.current){var n={visible:!0,active:!0,text:t.current,color:void 0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0,hasBoundingBox:!0}}},r={left:0,top:0,width:e.image.width,height:e.image.height};if(d.default.cornerstoneMath.point.insideRect(n.handles.end,r)){var a=t.markers.indexOf(t.current);return t.ascending?(a+=1)>=t.markers.length&&(t.loop?a-=t.markers.length:a=-1):(a-=1)<0&&(t.loop?a+=t.markers.length:a=-1),t.current=t.markers[a],n}}}function i(e,t,n){if(!1===t.visible)return!1;if(t.handles.end.boundingBox){var r=d.default.cornerstoneMath.rect.distanceToPoint(t.handles.end.boundingBox,n),a=(0,h.default)(t.handles.end,n);return r<10||a}}function o(e){var t=e.detail,n=(0,v.getToolState)(t.element,_);if(n)for(var r=(0,b.getNewContext)(t.canvasContext.canvas),a=w.getConfiguration(),i=function e(i){var o=n.data[i];if(!1===o.visible)return"continue";var s=m.default.getColorIfActive(o);(0,b.draw)(r,function(e){(0,b.setShadow)(e,a),e.fillStyle=s;var n=e.measureText(o.text);o.textWidth=n.width+10;var r=d.default.cornerstone.pixelToCanvas(t.element,o.handles.end),i={centering:{x:!0,y:!0}};o.handles.end.boundingBox=(0,g.default)(e,o.text,r.x,r.y-10,s,i)})},o=0;o<n.data.length;o++){var s=i(o)}}function s(e){function t(e,t,n){!0===n?(0,v.removeToolState)(a,_,e):e.text=t,e.active=!1,r.updateImage(a),a.addEventListener(u.default.MOUSE_MOVE,w.mouseMoveCallback),a.addEventListener(u.default.MOUSE_DOWN,w.mouseDownCallback),a.addEventListener(u.default.MOUSE_DOWN_ACTIVATE,w.mouseDownActivateCallback),a.addEventListener(u.default.MOUSE_DOUBLE_CLICK,w.mouseDoubleClickCallback)}var n=e.detail,r=d.default.cornerstone,a=n.element,o=void 0,s=(0,y.getToolOptions)(_,a);if((0,p.default)(n.which,s.mouseButtonMask)){var l=w.getConfiguration(),c=n.currentPoints.canvas,f=(0,v.getToolState)(a,_);if(f){for(var h=0;h<f.data.length;h++)if(o=f.data[h],i(a,o,c))return o.active=!0,r.updateImage(a),a.removeEventListener(u.default.MOUSE_MOVE,w.mouseMoveCallback),a.removeEventListener(u.default.MOUSE_DOWN,w.mouseDownCallback),a.removeEventListener(u.default.MOUSE_DOWN_ACTIVATE,w.mouseDownActivateCallback),a.removeEventListener(u.default.MOUSE_DOUBLE_CLICK,w.mouseDoubleClickCallback),l.changeTextCallback(o,n,t),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}}}function l(e){function t(e,t,n){!0===n?(0,v.removeToolState)(a,_,e):e.text=t,e.active=!1,r.updateImage(a),a.addEventListener(u.default.TOUCH_DRAG,E.touchMoveCallback),a.addEventListener(u.default.TOUCH_START_ACTIVE,E.touchDownActivateCallback),a.addEventListener(u.default.TOUCH_START,E.touchStartCallback),a.addEventListener(u.default.TAP,E.tapCallback),a.addEventListener(u.default.TOUCH_PRESS,E.pressCallback)}var n=e.detail,r=d.default.cornerstone,a=n.element,o=void 0,s=w.getConfiguration(),l=n.currentPoints.canvas,c=(0,v.getToolState)(a,_);if(!c)return!1;if(n.handlePressed)return n.handlePressed.active=!0,r.updateImage(a),a.removeEventListener(u.default.TOUCH_DRAG,E.touchMoveCallback),a.removeEventListener(u.default.TOUCH_START_ACTIVE,E.touchDownActivateCallback),a.removeEventListener(u.default.TOUCH_START,E.touchStartCallback),a.removeEventListener(u.default.TAP,E.tapCallback),a.removeEventListener(u.default.TOUCH_PRESS,E.pressCallback),s.changeTextCallback(n.handlePressed,n,t),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();for(var f=0;f<c.data.length;f++)if(o=c.data[f],i(a,o,l))return o.active=!0,r.updateImage(a),a.removeEventListener(u.default.TOUCH_DRAG,E.touchMoveCallback),a.removeEventListener(u.default.TOUCH_START_ACTIVE,E.touchDownActivateCallback),a.removeEventListener(u.default.TOUCH_START,E.touchStartCallback),a.removeEventListener(u.default.TAP,E.tapCallback),a.removeEventListener(u.default.TOUCH_PRESS,E.pressCallback),s.changeTextCallback(o,n,t),e.stopImmediatePropagation(),e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation()}Object.defineProperty(t,"__esModule",{value:!0}),t.textMarkerTouch=t.textMarker=void 0;var u=r(n("./events.js")),d=r(n("./externalModules.js")),c=r(n("./imageTools/mouseButtonTool.js")),f=r(n("./imageTools/touchTool.js")),h=r(n("./util/pointInsideBoundingBox.js")),m=r(n("./stateManagement/toolColors.js")),p=r(n("./util/isMouseButtonEnabled.js")),g=r(n("./util/drawTextBox.js")),v=n("./stateManagement/toolState.js"),y=n("./toolOptions.js"),b=n("./util/drawing.js"),_="textMarker",w=(0,c.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:_,mouseDoubleClickCallback:s}),E=(0,f.default)({createNewMeasurement:a,onImageRendered:o,pointNearTool:i,toolType:_,pressCallback:l});t.textMarker=w,t.textMarkerTouch=E},"./imageTools/touchDragTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=[a.default.TOUCH_DRAG];return n&&!0===n.fireOnTouchStart&&r.push(a.default.TOUCH_START),{activate:function o(s){n&&n.eventData&&(0,i.setToolOptions)(t,s,n.eventData),r.forEach(function(t){s.removeEventListener(t,e),s.addEventListener(t,e)}),n&&n.activateCallback&&n.activateCallback(s),n&&n.touchStartCallback&&s.addEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&s.addEventListener(a.default.TOUCH_END,n.touchEndCallback)},disable:function t(i){r.forEach(function(t){i.removeEventListener(t,e)}),n&&n.disableCallback&&n.disableCallback(i),n&&n.touchStartCallback&&i.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&i.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)},enable:function t(i){r.forEach(function(t){i.removeEventListener(t,e)}),n&&n.enableCallback&&n.enableCallback(i),n&&n.touchStartCallback&&i.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&i.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)},deactivate:function t(i){r.forEach(function(t){i.removeEventListener(t,e)}),n&&n.deactivateCallback&&n.deactivateCallback(i),n&&n.touchStartCallback&&i.removeEventListener(a.default.TOUCH_START,n.touchStartCallback),n&&n.touchEndCallback&&i.removeEventListener(a.default.TOUCH_END,n.touchEndCallback)}}};var a=r(n("./events.js")),i=n("./toolOptions.js")},"./imageTools/touchPinchTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{activate:function t(n){n.removeEventListener(a.default.TOUCH_PINCH,e),n.addEventListener(a.default.TOUCH_PINCH,e)},disable:function t(n){n.removeEventListener(a.default.TOUCH_PINCH,e)},enable:function t(n){n.removeEventListener(a.default.TOUCH_PINCH,e)},deactivate:function t(n){n.removeEventListener(a.default.TOUCH_PINCH,e)}}};var a=r(n("./events.js"))},"./imageTools/touchTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){(0,s.default)(e).forEach(function(t){e[t].active=!1})}function i(e){if(e)for(var t=0;t<e.data.length;t++){var n=e.data[t];n.active=!1,n.handles&&a(n.handles)}}function o(e){function t(t){var i=u.default.cornerstone,o=t.element,c=e.createNewMeasurement(t);if(c){if((0,p.addToolState)(o,e.toolType,c),1===(0,s.default)(c.handles).length&&t.type===l.default.TAP)return c.active=!1,c.handles.end.active=!1,c.handles.end.highlight=!1,c.invalidated=!0,(0,d.default)(t,c.handles)&&(0,p.removeToolState)(o,e.toolType,c),void i.updateImage(o);o.removeEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),o.removeEventListener(l.default.TAP,e.tapCallback||r),o.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),i.updateImage(o),(0,h.default)(t,e.toolType,c,c.handles.end,function(){c.active=!1,c.invalidated=!0,(0,d.default)(t,c.handles)&&(0,p.removeToolState)(o,e.toolType,c),o.addEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),o.addEventListener(l.default.TAP,e.tapCallback||r),o.addEventListener(l.default.TOUCH_START,e.touchStartCallback||a),i.updateImage(o)})}}function n(n){var r=n.detail;e.addNewMeasurement?e.addNewMeasurement(r):t(r),n.stopImmediatePropagation(),n.preventDefault()}function r(t){function o(){i(y),(0,d.default)(s,b.handles)&&(0,p.removeToolState)(g,e.toolType,b),h.updateImage(g),g.addEventListener(l.default.TOUCH_START,e.touchStartCallback||a),g.addEventListener(l.default.TAP,e.tapCallback||r)}var s=t.detail,h=u.default.cornerstone,g=s.element,v=s.currentPoints.canvas,y=(0,p.getToolState)(t.currentTarget,e.toolType),b=void 0,_=void 0;if(i(y),y)for(_=0;_<y.data.length;_++){b=y.data[_];var w=25,E=(0,c.default)(g,b.handles,v,25);if(E)return g.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),g.removeEventListener(l.default.TAP,e.tapCallback||r),b.active=!0,E.active=!0,h.updateImage(g),(0,f.default)(t,e.toolType,b,E,o),t.stopImmediatePropagation(),void t.preventDefault()}if(y&&e.pointNearTool)for(_=0;_<y.data.length;_++)if(b=y.data[_],e.pointNearTool(g,b,v))return g.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),g.removeEventListener(l.default.TAP,e.tapCallback||r),b.active=!0,h.updateImage(g),(0,m.default)(t,b,y,e.toolType,!0,o),t.stopImmediatePropagation(),void t.preventDefault();return e.touchDownActivateCallback?e.touchDownActivateCallback(t):n(t),!1}function a(t){function n(t,n){v.active=!1,v.invalidated=!0,(0,d.default)(i,v.handles)&&(0,p.removeToolState)(i.element,e.toolType,v),o.updateImage(i.element),s.addEventListener(l.default.TOUCH_START,e.touchStartCallback||a),s.addEventListener(l.default.TAP,e.tapCallback||r),e.pressCallback&&s.addEventListener(l.default.TOUCH_PRESS,e.pressCallback),t&&t.type===l.default.TOUCH_PRESS&&(0,g.default)(s,t.type,n)}var i=t.detail,o=u.default.cornerstone,s=i.element,h=i.startPoints.canvas,v=void 0,y=(0,p.getToolState)(t.currentTarget,e.toolType),b=void 0,_=28;if(y){for(b=0;b<y.data.length;b++){v=y.data[b];var w=(0,c.default)(i.element,v.handles,h,28);if(w)return s.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),s.removeEventListener(l.default.TAP,e.tapCallback||r),e.pressCallback&&s.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),v.active=!0,(0,f.default)(t,e.toolType,v,w,n),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}if(e.pointNearTool)for(b=0;b<y.data.length;b++)if(v=y.data[b],e.pointNearTool(i.element,v,h))return s.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),s.removeEventListener(l.default.TAP,e.tapCallback||r),e.pressCallback&&s.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),(0,m.default)(t,v,y,e.toolType,!0,n),t.stopImmediatePropagation(),t.preventDefault(),void t.stopPropagation()}}function o(t){t.removeEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),t.removeEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),t.removeEventListener(l.default.TAP,e.tapCallback||r),e.doubleTapCallback&&t.removeEventListener(l.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&t.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),u.default.cornerstone.updateImage(t)}function v(t){t.removeEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),t.removeEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),t.removeEventListener(l.default.TAP,e.tapCallback||r),t.addEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),e.doubleTapCallback&&t.removeEventListener(l.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&t.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),u.default.cornerstone.updateImage(t)}function y(t){t.removeEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),t.removeEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),t.removeEventListener(l.default.TAP,e.tapCallback||r),t.addEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(l.default.TOUCH_START,e.touchStartCallback||a),t.addEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),t.addEventListener(l.default.TAP,e.tapCallback||r),e.doubleTapCallback&&(t.removeEventListener(l.default.DOUBLE_TAP,e.doubleTapCallback),t.addEventListener(l.default.DOUBLE_TAP,e.doubleTapCallback)),e.pressCallback&&(t.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),t.addEventListener(l.default.TOUCH_PRESS,e.pressCallback)),u.default.cornerstone.updateImage(t)}function b(t){var i=l.default.TOOL_DEACTIVATED,o={toolType:e.toolType,type:i};(0,g.default)(t,i,o),t.removeEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.removeEventListener(l.default.TOUCH_START,e.touchStartCallback||a),t.removeEventListener(l.default.TOUCH_START_ACTIVE,e.touchDownActivateCallback||n),t.removeEventListener(l.default.TAP,e.tapCallback||r),t.addEventListener(l.default.IMAGE_RENDERED,e.onImageRendered),t.addEventListener(l.default.TOUCH_START,e.touchStartCallback||a),e.doubleTapCallback&&t.removeEventListener(l.default.DOUBLE_TAP,e.doubleTapCallback),e.pressCallback&&t.removeEventListener(l.default.TOUCH_PRESS,e.pressCallback),u.default.cornerstone.updateImage(t)}var _={enable:v,disable:o,activate:y,deactivate:b,touchStartCallback:e.touchStartCallback||a,touchDownActivateCallback:e.touchDownActivateCallback||n,tapCallback:e.tapCallback||r};return e.pointNearTool&&(_.pointNearTool=e.pointNearTool),e.doubleTapCallback&&(_.doubleTapCallback=e.doubleTapCallback),e.pressCallback&&(_.pressCallback=e.pressCallback),e.addNewMeasurement&&(_.addNewMeasurement=e.addNewMeasurement),_}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("../node_modules/babel-runtime/core-js/object/keys.js")),l=r(n("./events.js")),u=r(n("./externalModules.js")),d=r(n("./manipulators/anyHandlesOutsideImage.js")),c=r(n("./manipulators/getHandleNearImagePoint.js")),f=r(n("./manipulators/touchMoveHandle.js")),h=r(n("./manipulators/moveNewHandleTouch.js")),m=r(n("./manipulators/touchMoveAllHandles.js")),p=n("./stateManagement/toolState.js"),g=r(n("./util/triggerEvent.js"));t.default=o},"./imageTools/wwwc.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail.element;t.removeEventListener(u.default.MOUSE_DRAG,s),t.removeEventListener(u.default.MOUSE_UP,a),t.removeEventListener(u.default.MOUSE_CLICK,a)}function i(e){var t=e.detail,n=t.element,r=(0,m.getToolOptions)(p,n);(0,h.default)(t.which,r.mouseButtonMask)&&(n.addEventListener(u.default.MOUSE_DRAG,s),n.addEventListener(u.default.MOUSE_UP,a),n.addEventListener(u.default.MOUSE_CLICK,a),e.preventDefault(),e.stopPropagation())}function o(e){var t=(e.image.maxPixelValue*e.image.slope+e.image.intercept-(e.image.minPixelValue*e.image.slope+e.image.intercept))/1024,n=e.deltaPoints.page.x*t,r=e.deltaPoints.page.y*t;e.viewport.voi.windowWidth+=n,e.viewport.voi.windowCenter+=r}function s(e){var t=e.detail;g.strategy(t),d.default.cornerstone.setViewport(t.element,t.viewport)}function l(e){var t=e.detail;e.stopImmediatePropagation();var n=t,r=(n.image.maxPixelValue*n.image.slope+n.image.intercept-(n.image.minPixelValue*n.image.slope+n.image.intercept))/1024,a=n.deltaPoints.page.x*r,i=n.deltaPoints.page.y*r,o=g.getConfiguration();o.orientation?0===o.orientation?(n.viewport.voi.windowWidth+=a,n.viewport.voi.windowCenter+=i):(n.viewport.voi.windowWidth+=i,n.viewport.voi.windowCenter+=a):(n.viewport.voi.windowWidth+=a,n.viewport.voi.windowCenter+=i),d.default.cornerstone.setViewport(n.element,n.viewport)}Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcTouchDrag=t.wwwc=void 0;var u=r(n("./events.js")),d=r(n("./externalModules.js")),c=r(n("./imageTools/simpleMouseButtonTool.js")),f=r(n("./imageTools/touchDragTool.js")),h=r(n("./util/isMouseButtonEnabled.js")),m=n("./toolOptions.js"),p="wwwc",g=(0,c.default)(i,p);g.strategies={default:o},g.strategy=o;var v=(0,f.default)(l);t.wwwc=g,t.wwwcTouchDrag=v},"./imageTools/wwwcRegion.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=e.length;if(r<2)return{min:t,max:n,mean:(t+n)/2};for(var a=n,i=t,o=0,s=0;s<r;s++){var l=e[s];a=Math.min(a,l),i=Math.max(i,l),o+=l}return{min:a,max:i,mean:o/r}}function i(e){var t=e.detail.element,n=(0,x.getToolState)(t,O);n&&n.data&&(n.data=[]),t.removeEventListener(b.default.MOUSE_MOVE,c),t.removeEventListener(b.default.MOUSE_DRAG,c),t.removeEventListener(b.default.MOUSE_UP,o),t.removeEventListener(b.default.MOUSE_CLICK,o),t.addEventListener(b.default.MOUSE_DOWN,u)}function o(e){var t=e.detail,n=t.element;n.removeEventListener(b.default.MOUSE_MOVE,c),n.removeEventListener(b.default.MOUSE_DRAG,c),n.removeEventListener(b.default.MOUSE_UP,o),n.removeEventListener(b.default.MOUSE_CLICK,o),n.addEventListener(b.default.MOUSE_DOWN,u);var r=(0,x.getToolState)(t.element,O);r&&r.data&&r.data.length&&(r.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},s(t))}function s(e){var t=_.default.cornerstone,n=(0,x.getToolState)(e.element,O);if(n&&n.data&&n.data.length){var r=n.data[0].startPoint,i=n.data[0].endPoint,o=Math.abs(r.x-i.x),s=Math.abs(r.y-i.y),l=Math.min(r.x,i.x),u=Math.min(r.y,i.y);l=(0,S.default)(l,0,e.image.width),u=(0,S.default)(u,0,e.image.height),o=Math.floor(Math.min(o,Math.abs(e.image.width-l))),s=Math.floor(Math.min(s,Math.abs(e.image.height-u)));var d=a((0,T.default)(e.element,l,u,o,s),e.image.minPixelValue,e.image.maxPixelValue),c=C.getConfiguration(),f=t.getViewport(e.element);void 0===c.minWindowWidth&&(c.minWindowWidth=10),f.voi.windowWidth=Math.max(Math.abs(d.max-d.min),c.minWindowWidth),f.voi.windowCenter=d.mean,t.setViewport(e.element,f),n.data=[],t.updateImage(e.element)}}function l(e){var t=e.detail.element;t.removeEventListener(b.default.MOUSE_MOVE,l),t.removeEventListener(b.default.MOUSE_DRAG,l),t.addEventListener(b.default.MOUSE_MOVE,c),t.addEventListener(b.default.MOUSE_DRAG,c),t.addEventListener(b.default.MOUSE_CLICK,o),e.type===b.default.MOUSE_DRAG&&t.addEventListener(b.default.MOUSE_UP,o)}function u(e){var t=e.detail,n=t.element,r=(0,j.getToolOptions)(O,n);if((0,P.default)(t.which,r.mouseButtonMask))return n.addEventListener(b.default.MOUSE_DRAG,l),n.addEventListener(b.default.MOUSE_MOVE,l),n.removeEventListener(b.default.MOUSE_DOWN,u),d(t),!1}function d(e){var t=(0,x.getToolState)(e.element,O);t&&t.data&&(t.data=[]);var n={startPoint:{x:e.currentPoints.image.x,y:e.currentPoints.image.y}};(0,x.addToolState)(e.element,O,n)}function c(e){var t=e.detail,n=t.element,r=(0,x.getToolState)(n,O);r&&r.data&&r.data.length&&(r.data[0].endPoint={x:t.currentPoints.image.x,y:t.currentPoints.image.y},_.default.cornerstone.updateImage(n))}function f(e){var t=e.detail,n=t.element,r=t.canvasContext,a=_.default.cornerstone,i=(0,x.getToolState)(t.element,O);if(i&&i.data&&i.data.length){var o=i.data[0].startPoint,s=i.data[0].endPoint;if(o&&s){r.setTransform(1,0,0,1,0,0);var l=E.default.getActiveColor(),u=a.pixelToCanvas(n,o),d=a.pixelToCanvas(n,s),c=Math.min(u.x,d.x),f=Math.min(u.y,d.y),h=Math.abs(u.x-d.x),m=Math.abs(u.y-d.y),p=w.default.getToolWidth(),g=C.getConfiguration();(0,M.draw)(r,function(e){(0,M.setShadow)(e,g),(0,M.path)(e,{color:l,lineWidth:p},function(e){e.rect(c,f,h,m)})})}}}function h(e){e.removeEventListener(b.default.MOUSE_DOWN,u),e.removeEventListener(b.default.MOUSE_UP,o),e.removeEventListener(b.default.MOUSE_CLICK,o),e.removeEventListener(b.default.MOUSE_DRAG,c),e.removeEventListener(b.default.MOUSE_MOVE,c),e.removeEventListener(b.default.IMAGE_RENDERED,f),e.removeEventListener(b.default.NEW_IMAGE,i),_.default.cornerstone.updateImage(e)}function m(e,t){if((0,j.setToolOptions)(O,e,{mouseButtonMask:t}),!(0,x.getToolState)(e,O)){var n=[];(0,x.addToolState)(e,O,n)}e.removeEventListener(b.default.MOUSE_DOWN,u),e.removeEventListener(b.default.MOUSE_UP,o),e.removeEventListener(b.default.MOUSE_CLICK,o),e.removeEventListener(b.default.MOUSE_DRAG,c),e.removeEventListener(b.default.MOUSE_MOVE,c),e.removeEventListener(b.default.IMAGE_RENDERED,f),e.removeEventListener(b.default.NEW_IMAGE,i),e.addEventListener(b.default.MOUSE_DOWN,u),e.addEventListener(b.default.IMAGE_RENDERED,f),e.addEventListener(b.default.NEW_IMAGE,i),_.default.cornerstone.updateImage(e)}function p(e){e.removeEventListener(b.default.TOUCH_DRAG,c),e.removeEventListener(b.default.TOUCH_START,d),e.removeEventListener(b.default.TOUCH_DRAG_END,s),e.removeEventListener(b.default.IMAGE_RENDERED,f)}function g(e){if(!(0,x.getToolState)(e,O)){var t=[];(0,x.addToolState)(e,O,t)}e.removeEventListener(b.default.TOUCH_DRAG,c),e.removeEventListener(b.default.TOUCH_START,d),e.removeEventListener(b.default.TOUCH_DRAG_END,s),e.removeEventListener(b.default.IMAGE_RENDERED,f),e.addEventListener(b.default.TOUCH_DRAG,c),e.addEventListener(b.default.TOUCH_START,d),e.addEventListener(b.default.TOUCH_DRAG_END,s),e.addEventListener(b.default.IMAGE_RENDERED,f)}function v(){return I}function y(e){I=e}Object.defineProperty(t,"__esModule",{value:!0}),t.wwwcRegionTouch=t.wwwcRegion=void 0;var b=r(n("./events.js")),_=r(n("./externalModules.js")),w=r(n("./stateManagement/toolStyle.js")),E=r(n("./stateManagement/toolColors.js")),x=n("./stateManagement/toolState.js"),T=r(n("./util/getLuminance.js")),P=r(n("./util/isMouseButtonEnabled.js")),j=n("./toolOptions.js"),S=r(n("./util/clip.js")),M=n("./util/drawing.js"),O="wwwcRegion",I={minWindowWidth:10},C={activate:m,deactivate:h,disable:h,setConfiguration:y,getConfiguration:v},L={activate:g,deactivate:p,disable:p};t.wwwcRegion=C,t.wwwcRegionTouch=L},"./imageTools/zoom.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=P.getConfiguration(),r=1.7,a=Math.log(e.scale)/Math.log(1.7)+t,i=Math.pow(1.7,a);return n.maxScale&&i>n.maxScale?e.scale=n.maxScale:n.minScale&&i<n.minScale?e.scale=n.minScale:e.scale=i,e}function i(e,t){if(t.hflip&&(e.x*=-1),t.vflip&&(e.y*=-1),0!==t.rotation){var n=t.rotation*Math.PI/180,r=Math.cos(n),a=Math.sin(n),i=e.x*r-e.y*a,o=e.x*a+e.y*r;e.x=i,e.y=o}return e}function o(e,t){var n=p.default.cornerstone,r=e.element,o=a(e.viewport,t);n.setViewport(r,o);var s=n.pageToPixel(r,e.startPoints.page.x,e.startPoints.page.y),l={x:e.startPoints.image.x-s.x,y:e.startPoints.image.y-s.y};l=i(l,o),o.translation.x-=l.x,o.translation.y-=l.y,n.setViewport(r,o)}function s(e,t){var n=e.element,r=e.image,o=P.getConfiguration(),s=a(e.viewport,t),l={x:0,y:0},u=8,d=3,c=.01;if(t<0)s.scale<3&&(Math.abs(s.translation.x)<.01?s.translation.x=0:l.x=s.translation.x/8,Math.abs(s.translation.y)<.01?s.translation.y=0:l.y=s.translation.y/8);else{o&&o.preventZoomOutsideImage&&(0,E.clipToBox)(T.image,r);var f={x:r.width/2-T.image.x,y:r.height/2-T.image.y};f=i(f,s);var h={x:s.translation.x-f.x,y:s.translation.y-f.y};Math.abs(h.x)<.01?s.translation.x=f.x:l.x=h.x/8,Math.abs(h.y)<.01?s.translation.y=f.y:l.y=h.y/8}s.translation.x-=l.x,s.translation.y-=l.y,p.default.cornerstone.setViewport(n,s)}function l(e,t){var n=e.element,r=a(e.viewport,t);p.default.cornerstone.setViewport(n,r)}function u(e){var t=e.detail.element;t.removeEventListener(m.default.MOUSE_DRAG,c),t.removeEventListener(m.default.MOUSE_UP,u),t.removeEventListener(m.default.MOUSE_CLICK,u)}function d(e){var t=e.detail,n=t.element,r=(0,w.getToolOptions)(x,n);(0,v.default)(t.which,r.mouseButtonMask)&&(T=t.startPoints,n.addEventListener(m.default.MOUSE_DRAG,c),n.addEventListener(m.default.MOUSE_UP,u),n.addEventListener(m.default.MOUSE_CLICK,u),e.preventDefault(),e.stopPropagation())}function c(e){var t=e.detail;if(!t.deltaPoints.page.y)return!1;var n=t.deltaPoints.page.y/100,r=P.getConfiguration();r&&r.invert&&(n*=-1),P.strategy(t,n),e.preventDefault(),e.stopPropagation()}function f(e){var t=e.detail,n=-t.direction/4,r=P.getConfiguration();r&&r.invert&&(n*=-1);var i=a(t.viewport,n);p.default.cornerstone.setViewport(t.element,i)}function h(e){var t=e.detail,n=p.default.cornerstone,r=P.getConfiguration(),a=t.viewport,o=t.element;a.scale+=t.scaleChange*a.scale,r.maxScale&&a.scale>r.maxScale?a.scale=r.maxScale:r.minScale&&a.scale<r.minScale&&(a.scale=r.minScale),n.setViewport(o,a);var s=n.pageToPixel(o,t.startPoints.page.x,t.startPoints.page.y),l={x:t.startPoints.image.x-s.x,y:t.startPoints.image.y-s.y};l=i(l,a),a.translation.x-=l.x,a.translation.y-=l.y,n.setViewport(o,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=void 0;var m=r(n("./events.js")),p=r(n("./externalModules.js")),g=r(n("./imageTools/simpleMouseButtonTool.js")),v=r(n("./util/isMouseButtonEnabled.js")),y=r(n("./imageTools/mouseWheelTool.js")),b=r(n("./imageTools/touchPinchTool.js")),_=r(n("./imageTools/touchDragTool.js")),w=n("./toolOptions.js"),E=n("./util/clip.js"),x="zoom",T=void 0,P=(0,g.default)(d,x);P.strategies={default:o,translate:s,zoomToCenter:l},P.strategy=o;var j=(0,y.default)(f),S=(0,b.default)(h),M=(0,_.default)(c,x);t.zoom=P,t.zoomWheel=j,t.zoomTouchPinch=S,t.zoomTouchDrag=M},"./index.js":function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getToolOptions=t.setToolOptions=t.version=t.adaptiveBrush=t.brush=t.zoomTouchDrag=t.zoomTouchPinch=t.zoomWheel=t.zoom=t.wwwcRegionTouch=t.wwwcRegion=t.wwwcTouchDrag=t.wwwc=t.touchTool=t.touchPinchTool=t.touchDragTool=t.textMarkerTouch=t.textMarker=t.simpleMouseButtonTool=t.simpleAngleTouch=t.simpleAngle=t.seedAnnotateTouch=t.seedAnnotate=t.scaleOverlayTool=t.saveAs=t.rotateTouch=t.rotateTouchDrag=t.rotate=t.rectangleRoiTouch=t.rectangleRoi=t.probeTouch=t.probe=t.panMultiTouch=t.panTouchDrag=t.pan=t.orientationMarkers=t.multiTouchDragTool=t.mouseWheelTool=t.mouseButtonTool=t.mouseButtonRectangleTool=t.magnifyTouchDrag=t.magnify=t.lengthTouch=t.length=t.keyboardTool=t.imageStats=t.highlightTouch=t.highlight=t.freehandSculpter=t.freehandToolColors=t.freehand=t.eraserTouch=t.eraser=t.ellipticalRoiTouch=t.ellipticalRoi=t.dragProbeTouch=void 0,t.dragProbe=t.doubleTapZoom=t.doubleTapTool=t.displayTool=t.crosshairsTouch=t.crosshairs=t.arrowAnnotateTouch=t.arrowAnnotate=t.angleTouch=t.angle=t.touchInput=t.preventGhostClick=t.mouseWheelInput=t.mouseInput=t.keyboardInput=t.touchMoveHandle=t.touchMoveAllHandles=t.moveNewHandleTouch=t.moveNewHandle=t.moveHandle=t.moveAllHandles=t.handleActivator=t.getHandleNearImagePoint=t.drawHandles=t.anyHandlesOutsideImage=t.stopClip=t.playClip=t.stackRenderers=t.scrollIndicator=t.stackPrefetch=t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=t.stackScrollKeyboard=t.appState=t.globalFrameOfReferenceSpecificToolStateManager=t.newFrameOfReferenceSpecificToolStateManager=t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=t.loadHandlerManager=t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=t.textStyle=t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=t.toolColors=t.toolCoordinates=t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=t.toolStyle=t.panZoomSynchronizer=t.stackImageIndexSynchronizer=t.stackImagePositionOffsetSynchronizer=t.stackImagePositionSynchronizer=t.stackScrollSynchronizer=t.Synchronizer=t.updateImageSynchronizer=t.wwwcSynchronizer=t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=t.timeSeriesPlayer=t.incrementTimePoint=t.probeTool4D=t.calculateEllipseStatistics=t.calculateSUV=t.copyPoints=t.drawArrow=t.drawCircle=t.drawEllipse=t.drawTextBox=t.getLuminance=t.isMobileDevice=t.getBrowserInfo=t.getMaxSimultaneousRequests=t.getDefaultSimultaneousRequests=t.getRGBPixels=t.isMouseButtonEnabled=t.makeUnselectable=t.pointInEllipse=t.pointInsideBoundingBox=t.planePlaneIntersection=t.imagePointToPatientPoint=t.projectPatientPointToImagePlane=t.roundToDecimal=t.scroll=t.scrollToIndex=t.setContextToDisplayFontSize=t.requestPoolManager=t.orientation=t.referenceLines=t.EVENTS=t.external=t.drawing=void 0;var i=n("./externalModules.js");Object.defineProperty(t,"external",{enumerable:!0,get:function e(){return a(i).default}});var o=n("./events.js");Object.defineProperty(t,"EVENTS",{enumerable:!0,get:function e(){return a(o).default}});var s=n("./referenceLines/index.js");Object.defineProperty(t,"referenceLines",{enumerable:!0,get:function e(){return a(s).default}});var l=n("./orientation/index.js");Object.defineProperty(t,"orientation",{enumerable:!0,get:function e(){return a(l).default}});var u=n("./requestPool/requestPoolManager.js");Object.defineProperty(t,"requestPoolManager",{enumerable:!0,get:function e(){return a(u).default}});var d=n("./util/setContextToDisplayFontSize.js");Object.defineProperty(t,"setContextToDisplayFontSize",{enumerable:!0,get:function e(){return a(d).default}});var c=n("./util/scrollToIndex.js");Object.defineProperty(t,"scrollToIndex",{enumerable:!0,get:function e(){return a(c).default}});var f=n("./util/scroll.js");Object.defineProperty(t,"scroll",{enumerable:!0,get:function e(){return a(f).default}});var h=n("./util/roundToDecimal.js");Object.defineProperty(t,"roundToDecimal",{enumerable:!0,get:function e(){return a(h).default}});var m=n("./util/pointProjector.js");Object.defineProperty(t,"projectPatientPointToImagePlane",{enumerable:!0,get:function e(){return m.projectPatientPointToImagePlane}}),Object.defineProperty(t,"imagePointToPatientPoint",{enumerable:!0,get:function e(){return m.imagePointToPatientPoint}}),Object.defineProperty(t,"planePlaneIntersection",{enumerable:!0,get:function e(){return m.planePlaneIntersection}});var p=n("./util/pointInsideBoundingBox.js");Object.defineProperty(t,"pointInsideBoundingBox",{enumerable:!0,get:function e(){return a(p).default}});var g=n("./util/pointInEllipse.js");Object.defineProperty(t,"pointInEllipse",{enumerable:!0,get:function e(){return a(g).default}});var v=n("./util/makeUnselectable.js");Object.defineProperty(t,"makeUnselectable",{enumerable:!0,get:function e(){return a(v).default}});var y=n("./util/isMouseButtonEnabled.js");Object.defineProperty(t,"isMouseButtonEnabled",{enumerable:!0,get:function e(){return a(y).default}});var b=n("./util/getRGBPixels.js");Object.defineProperty(t,"getRGBPixels",{enumerable:!0,get:function e(){return a(b).default}});var _=n("./util/getMaxSimultaneousRequests.js");Object.defineProperty(t,"getDefaultSimultaneousRequests",{enumerable:!0,get:function e(){return _.getDefaultSimultaneousRequests}}),Object.defineProperty(t,"getMaxSimultaneousRequests",{enumerable:!0,get:function e(){return _.getMaxSimultaneousRequests}}),Object.defineProperty(t,"getBrowserInfo",{enumerable:!0,get:function e(){return _.getBrowserInfo}}),Object.defineProperty(t,"isMobileDevice",{enumerable:!0,get:function e(){return _.isMobileDevice}});var w=n("./util/getLuminance.js");Object.defineProperty(t,"getLuminance",{enumerable:!0,get:function e(){return a(w).default}});var E=n("./util/drawTextBox.js");Object.defineProperty(t,"drawTextBox",{enumerable:!0,get:function e(){return a(E).default}});var x=n("./util/drawEllipse.js");Object.defineProperty(t,"drawEllipse",{enumerable:!0,get:function e(){return a(x).default}});var T=n("./util/drawCircle.js");Object.defineProperty(t,"drawCircle",{enumerable:!0,get:function e(){return a(T).default}});var P=n("./util/drawArrow.js");Object.defineProperty(t,"drawArrow",{enumerable:!0,get:function e(){return a(P).default}});var j=n("./util/copyPoints.js");Object.defineProperty(t,"copyPoints",{enumerable:!0,get:function e(){return a(j).default}});var S=n("./util/calculateSUV.js");Object.defineProperty(t,"calculateSUV",{enumerable:!0,get:function e(){return a(S).default}});var M=n("./util/calculateEllipseStatistics.js");Object.defineProperty(t,"calculateEllipseStatistics",{enumerable:!0,get:function e(){return a(M).default}});var O=n("./timeSeriesTools/probeTool4D.js");Object.defineProperty(t,"probeTool4D",{enumerable:!0,get:function e(){return a(O).default}});var I=n("./timeSeriesTools/incrementTimePoint.js");Object.defineProperty(t,"incrementTimePoint",{enumerable:!0,get:function e(){return a(I).default}});var C=n("./timeSeriesTools/timeSeriesPlayer.js");Object.defineProperty(t,"timeSeriesPlayer",{enumerable:!0,get:function e(){return a(C).default}});var L=n("./timeSeriesTools/timeSeriesScroll.js");Object.defineProperty(t,"timeSeriesScroll",{enumerable:!0,get:function e(){return L.timeSeriesScroll}}),Object.defineProperty(t,"timeSeriesScrollWheel",{enumerable:!0,get:function e(){return L.timeSeriesScrollWheel}}),Object.defineProperty(t,"timeSeriesScrollTouchDrag",{enumerable:!0,get:function e(){return L.timeSeriesScrollTouchDrag}});var k=n("./synchronization/wwwcSynchronizer.js");Object.defineProperty(t,"wwwcSynchronizer",{enumerable:!0,get:function e(){return a(k).default}});var A=n("./synchronization/updateImageSynchronizer.js");Object.defineProperty(t,"updateImageSynchronizer",{enumerable:!0,get:function e(){return a(A).default}});var D=n("./synchronization/Synchronizer.js");Object.defineProperty(t,"Synchronizer",{enumerable:!0,get:function e(){return a(D).default}});var R=n("./synchronization/stackScrollSynchronizer.js");Object.defineProperty(t,"stackScrollSynchronizer",{enumerable:!0,get:function e(){return a(R).default}});var U=n("./synchronization/stackImagePositionSynchronizer.js");Object.defineProperty(t,"stackImagePositionSynchronizer",{enumerable:!0,get:function e(){return a(U).default}});var B=n("./synchronization/stackImagePositionOffsetSynchronizer.js");Object.defineProperty(t,"stackImagePositionOffsetSynchronizer",{enumerable:!0,get:function e(){return a(B).default}});var N=n("./synchronization/stackImageIndexSynchronizer.js");Object.defineProperty(t,"stackImageIndexSynchronizer",{enumerable:!0,get:function e(){return a(N).default}});var F=n("./synchronization/panZoomSynchronizer.js");Object.defineProperty(t,"panZoomSynchronizer",{enumerable:!0,get:function e(){return a(F).default}});var z=n("./stateManagement/toolStyle.js");Object.defineProperty(t,"toolStyle",{enumerable:!0,get:function e(){return a(z).default}});var H=n("./stateManagement/toolState.js");Object.defineProperty(t,"addToolState",{enumerable:!0,get:function e(){return H.addToolState}}),Object.defineProperty(t,"getToolState",{enumerable:!0,get:function e(){return H.getToolState}}),Object.defineProperty(t,"removeToolState",{enumerable:!0,get:function e(){return H.removeToolState}}),Object.defineProperty(t,"clearToolState",{enumerable:!0,get:function e(){return H.clearToolState}}),Object.defineProperty(t,"setElementToolStateManager",{enumerable:!0,get:function e(){return H.setElementToolStateManager}}),Object.defineProperty(t,"getElementToolStateManager",{enumerable:!0,get:function e(){return H.getElementToolStateManager}});var V=n("./stateManagement/toolCoordinates.js");Object.defineProperty(t,"toolCoordinates",{enumerable:!0,get:function e(){return a(V).default}});var W=n("./stateManagement/toolColors.js");Object.defineProperty(t,"toolColors",{enumerable:!0,get:function e(){return a(W).default}});var q=n("./stateManagement/timeSeriesSpecificStateManager.js");Object.defineProperty(t,"addTimeSeriesStateManager",{enumerable:!0,get:function e(){return q.addTimeSeriesStateManager}}),Object.defineProperty(t,"newTimeSeriesSpecificToolStateManager",{enumerable:!0,get:function e(){return q.newTimeSeriesSpecificToolStateManager}});var G=n("./stateManagement/textStyle.js");Object.defineProperty(t,"textStyle",{enumerable:!0,get:function e(){return a(G).default}});var Z=n("./stateManagement/stackSpecificStateManager.js");Object.defineProperty(t,"stackSpecificStateManager",{enumerable:!0,get:function e(){return Z.stackSpecificStateManager}}),Object.defineProperty(t,"newStackSpecificToolStateManager",{enumerable:!0,get:function e(){return Z.newStackSpecificToolStateManager}}),Object.defineProperty(t,"addStackStateManager",{enumerable:!0,get:function e(){return Z.addStackStateManager}});var Y=n("./stateManagement/loadHandlerManager.js");Object.defineProperty(t,"loadHandlerManager",{enumerable:!0,get:function e(){return a(Y).default}});var K=n("./stateManagement/imageIdSpecificStateManager.js");Object.defineProperty(t,"newImageIdSpecificToolStateManager",{enumerable:!0,get:function e(){return K.newImageIdSpecificToolStateManager}}),Object.defineProperty(t,"globalImageIdSpecificToolStateManager",{enumerable:!0,get:function e(){return K.globalImageIdSpecificToolStateManager}});var X=n("./stateManagement/frameOfReferenceStateManager.js");Object.defineProperty(t,"newFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function e(){return X.newFrameOfReferenceSpecificToolStateManager}}),Object.defineProperty(t,"globalFrameOfReferenceSpecificToolStateManager",{enumerable:!0,get:function e(){return X.globalFrameOfReferenceSpecificToolStateManager}});var J=n("./stateManagement/appState.js");Object.defineProperty(t,"appState",{enumerable:!0,get:function e(){return a(J).default}});var $=n("./stackTools/stackScrollKeyboard.js");Object.defineProperty(t,"stackScrollKeyboard",{enumerable:!0,get:function e(){return a($).default}});var Q=n("./stackTools/stackScroll.js");Object.defineProperty(t,"stackScroll",{enumerable:!0,get:function e(){return Q.stackScroll}}),Object.defineProperty(t,"stackScrollWheel",{enumerable:!0,get:function e(){return Q.stackScrollWheel}}),Object.defineProperty(t,"stackScrollTouchDrag",{enumerable:!0,get:function e(){return Q.stackScrollTouchDrag}}),Object.defineProperty(t,"stackScrollMultiTouch",{enumerable:!0,get:function e(){return Q.stackScrollMultiTouch}});var ee=n("./stackTools/stackPrefetch.js");Object.defineProperty(t,"stackPrefetch",{enumerable:!0,get:function e(){return a(ee).default}});var te=n("./stackTools/scrollIndicator.js");Object.defineProperty(t,"scrollIndicator",{enumerable:!0,get:function e(){return a(te).default}});var ne=n("./stackTools/stackRenderers.js");Object.defineProperty(t,"stackRenderers",{enumerable:!0,get:function e(){return a(ne).default}});var re=n("./stackTools/playClip.js");Object.defineProperty(t,"playClip",{enumerable:!0,get:function e(){return re.playClip}}),Object.defineProperty(t,"stopClip",{enumerable:!0,get:function e(){return re.stopClip}});var ae=n("./manipulators/anyHandlesOutsideImage.js");Object.defineProperty(t,"anyHandlesOutsideImage",{enumerable:!0,get:function e(){return a(ae).default}});var ie=n("./manipulators/drawHandles.js");Object.defineProperty(t,"drawHandles",{enumerable:!0,get:function e(){return a(ie).default}});var oe=n("./manipulators/getHandleNearImagePoint.js");Object.defineProperty(t,"getHandleNearImagePoint",{enumerable:!0,get:function e(){return a(oe).default}});var se=n("./manipulators/handleActivator.js");Object.defineProperty(t,"handleActivator",{enumerable:!0,get:function e(){return a(se).default}});var le=n("./manipulators/moveAllHandles.js");Object.defineProperty(t,"moveAllHandles",{enumerable:!0,get:function e(){return a(le).default}});var ue=n("./manipulators/moveHandle.js");Object.defineProperty(t,"moveHandle",{enumerable:!0,get:function e(){return a(ue).default}});var de=n("./manipulators/moveNewHandle.js");Object.defineProperty(t,"moveNewHandle",{enumerable:!0,get:function e(){return a(de).default}});var ce=n("./manipulators/moveNewHandleTouch.js");Object.defineProperty(t,"moveNewHandleTouch",{enumerable:!0,get:function e(){return a(ce).default}});var fe=n("./manipulators/touchMoveAllHandles.js");Object.defineProperty(t,"touchMoveAllHandles",{enumerable:!0,get:function e(){return a(fe).default}});var he=n("./manipulators/touchMoveHandle.js");Object.defineProperty(t,"touchMoveHandle",{enumerable:!0,get:function e(){return a(he).default}});var me=n("./inputSources/keyboardInput.js");Object.defineProperty(t,"keyboardInput",{enumerable:!0,get:function e(){return a(me).default}});var pe=n("./inputSources/mouseInput.js");Object.defineProperty(t,"mouseInput",{enumerable:!0,get:function e(){return a(pe).default}});var ge=n("./inputSources/mouseWheelInput.js");Object.defineProperty(t,"mouseWheelInput",{enumerable:!0,get:function e(){return a(ge).default}});var ve=n("./inputSources/preventGhostClick.js");Object.defineProperty(t,"preventGhostClick",{enumerable:!0,get:function e(){return a(ve).default}});var ye=n("./inputSources/touchInput.js");Object.defineProperty(t,"touchInput",{enumerable:!0,get:function e(){return a(ye).default}});var be=n("./imageTools/angleTool.js");Object.defineProperty(t,"angle",{enumerable:!0,get:function e(){return be.angle}}),Object.defineProperty(t,"angleTouch",{enumerable:!0,get:function e(){return be.angleTouch}});var _e=n("./imageTools/arrowAnnotate.js");Object.defineProperty(t,"arrowAnnotate",{enumerable:!0,get:function e(){return _e.arrowAnnotate}}),Object.defineProperty(t,"arrowAnnotateTouch",{enumerable:!0,get:function e(){return _e.arrowAnnotateTouch}});var we=n("./imageTools/crosshairs.js");Object.defineProperty(t,"crosshairs",{enumerable:!0,get:function e(){return we.crosshairs}}),Object.defineProperty(t,"crosshairsTouch",{enumerable:!0,get:function e(){return we.crosshairsTouch}});var Ee=n("./imageTools/displayTool.js");Object.defineProperty(t,"displayTool",{enumerable:!0,get:function e(){return a(Ee).default}});var xe=n("./imageTools/doubleTapTool.js");Object.defineProperty(t,"doubleTapTool",{enumerable:!0,get:function e(){return a(xe).default}});var Te=n("./imageTools/doubleTapZoom.js");Object.defineProperty(t,"doubleTapZoom",{enumerable:!0,get:function e(){return a(Te).default}});var Pe=n("./imageTools/dragProbe.js");Object.defineProperty(t,"dragProbe",{enumerable:!0,get:function e(){return Pe.dragProbe}}),Object.defineProperty(t,"dragProbeTouch",{enumerable:!0,get:function e(){return Pe.dragProbeTouch}});var je=n("./imageTools/ellipticalRoi.js");Object.defineProperty(t,"ellipticalRoi",{enumerable:!0,get:function e(){return je.ellipticalRoi}}),Object.defineProperty(t,"ellipticalRoiTouch",{enumerable:!0,get:function e(){return je.ellipticalRoiTouch}});var Se=n("./imageTools/eraser.js");Object.defineProperty(t,"eraser",{enumerable:!0,get:function e(){return Se.eraser}}),Object.defineProperty(t,"eraserTouch",{enumerable:!0,get:function e(){return Se.eraserTouch}});var Me=n("./imageTools/freehand.js");Object.defineProperty(t,"freehand",{enumerable:!0,get:function e(){return Me.freehand}});var Oe=n("./stateManagement/freehandToolColors.js");Object.defineProperty(t,"freehandToolColors",{enumerable:!0,get:function e(){return a(Oe).default}});var Ie=n("./imageTools/freehandSculpter.js");Object.defineProperty(t,"freehandSculpter",{enumerable:!0,get:function e(){return Ie.freehandSculpter}});var Ce=n("./imageTools/highlight.js");Object.defineProperty(t,"highlight",{enumerable:!0,get:function e(){return Ce.highlight}}),Object.defineProperty(t,"highlightTouch",{enumerable:!0,get:function e(){return Ce.highlightTouch}});var Le=n("./imageTools/imageStats.js");Object.defineProperty(t,"imageStats",{enumerable:!0,get:function e(){return a(Le).default}});var ke=n("./imageTools/keyboardTool.js");Object.defineProperty(t,"keyboardTool",{enumerable:!0,get:function e(){return a(ke).default}});var Ae=n("./imageTools/length.js");Object.defineProperty(t,"length",{enumerable:!0,get:function e(){return Ae.length}}),Object.defineProperty(t,"lengthTouch",{enumerable:!0,get:function e(){return Ae.lengthTouch}});var De=n("./imageTools/magnify.js");Object.defineProperty(t,"magnify",{enumerable:!0,get:function e(){return De.magnify}}),Object.defineProperty(t,"magnifyTouchDrag",{enumerable:!0,get:function e(){return De.magnifyTouchDrag}});var Re=n("./imageTools/mouseButtonRectangleTool.js");Object.defineProperty(t,"mouseButtonRectangleTool",{enumerable:!0,get:function e(){return a(Re).default}});var Ue=n("./imageTools/mouseButtonTool.js");Object.defineProperty(t,"mouseButtonTool",{enumerable:!0,get:function e(){return a(Ue).default}});var Be=n("./imageTools/mouseWheelTool.js");Object.defineProperty(t,"mouseWheelTool",{enumerable:!0,get:function e(){return a(Be).default}});var Ne=n("./imageTools/multiTouchDragTool.js");Object.defineProperty(t,"multiTouchDragTool",{enumerable:!0,get:function e(){return a(Ne).default}});var Fe=n("./imageTools/orientationMarkers.js");Object.defineProperty(t,"orientationMarkers",{enumerable:!0,get:function e(){return a(Fe).default}});var ze=n("./imageTools/pan.js");Object.defineProperty(t,"pan",{enumerable:!0,get:function e(){return ze.pan}}),Object.defineProperty(t,"panTouchDrag",{enumerable:!0,get:function e(){return ze.panTouchDrag}});var He=n("./imageTools/panMultiTouch.js");Object.defineProperty(t,"panMultiTouch",{enumerable:!0,get:function e(){return a(He).default}});var Ve=n("./imageTools/probe.js");Object.defineProperty(t,"probe",{enumerable:!0,get:function e(){return Ve.probe}}),Object.defineProperty(t,"probeTouch",{enumerable:!0,get:function e(){return Ve.probeTouch}});var We=n("./imageTools/rectangleRoi.js");Object.defineProperty(t,"rectangleRoi",{enumerable:!0,get:function e(){return We.rectangleRoi}}),Object.defineProperty(t,"rectangleRoiTouch",{enumerable:!0,get:function e(){return We.rectangleRoiTouch}});var qe=n("./imageTools/rotate.js");Object.defineProperty(t,"rotate",{enumerable:!0,get:function e(){return qe.rotate}}),Object.defineProperty(t,"rotateTouchDrag",{enumerable:!0,get:function e(){return qe.rotateTouchDrag}});var Ge=n("./imageTools/rotateTouch.js");Object.defineProperty(t,"rotateTouch",{enumerable:!0,get:function e(){return a(Ge).default}});var Ze=n("./imageTools/saveAs.js");Object.defineProperty(t,"saveAs",{enumerable:!0,get:function e(){return a(Ze).default}});var Ye=n("./imageTools/scaleOverlayTool.js");Object.defineProperty(t,"scaleOverlayTool",{enumerable:!0,get:function e(){return a(Ye).default}});var Ke=n("./imageTools/seedAnnotate.js");Object.defineProperty(t,"seedAnnotate",{enumerable:!0,get:function e(){return Ke.seedAnnotate}}),Object.defineProperty(t,"seedAnnotateTouch",{enumerable:!0,get:function e(){return Ke.seedAnnotateTouch}});var Xe=n("./imageTools/simpleAngle.js");Object.defineProperty(t,"simpleAngle",{enumerable:!0,get:function e(){return Xe.simpleAngle}}),Object.defineProperty(t,"simpleAngleTouch",{enumerable:!0,get:function e(){return Xe.simpleAngleTouch}});var Je=n("./imageTools/simpleMouseButtonTool.js");Object.defineProperty(t,"simpleMouseButtonTool",{enumerable:!0,get:function e(){return a(Je).default}});var $e=n("./imageTools/textMarker.js");Object.defineProperty(t,"textMarker",{enumerable:!0,get:function e(){return $e.textMarker}}),Object.defineProperty(t,"textMarkerTouch",{enumerable:!0,get:function e(){return $e.textMarkerTouch}});var Qe=n("./imageTools/touchDragTool.js");Object.defineProperty(t,"touchDragTool",{enumerable:!0,get:function e(){return a(Qe).default}});var et=n("./imageTools/touchPinchTool.js");Object.defineProperty(t,"touchPinchTool",{enumerable:!0,get:function e(){return a(et).default}});var tt=n("./imageTools/touchTool.js");Object.defineProperty(t,"touchTool",{enumerable:!0,get:function e(){return a(tt).default}});var nt=n("./imageTools/wwwc.js");Object.defineProperty(t,"wwwc",{enumerable:!0,get:function e(){return nt.wwwc}}),Object.defineProperty(t,"wwwcTouchDrag",{enumerable:!0,get:function e(){return nt.wwwcTouchDrag}});var rt=n("./imageTools/wwwcRegion.js");Object.defineProperty(t,"wwwcRegion",{enumerable:!0,get:function e(){return rt.wwwcRegion}}),Object.defineProperty(t,"wwwcRegionTouch",{enumerable:!0,get:function e(){return rt.wwwcRegionTouch}});var at=n("./imageTools/zoom.js");Object.defineProperty(t,"zoom",{enumerable:!0,get:function e(){return at.zoom}}),Object.defineProperty(t,"zoomWheel",{enumerable:!0,get:function e(){return at.zoomWheel}}),Object.defineProperty(t,"zoomTouchPinch",{enumerable:!0,get:function e(){return at.zoomTouchPinch}}),Object.defineProperty(t,"zoomTouchDrag",{enumerable:!0,get:function e(){return at.zoomTouchDrag}});var it=n("./paintingTools/brush.js");Object.defineProperty(t,"brush",{enumerable:!0,get:function e(){return it.brush}});var ot=n("./paintingTools/adaptiveBrush.js");Object.defineProperty(t,"adaptiveBrush",{enumerable:!0,get:function e(){return ot.adaptiveBrush}});var st=n("./version.js");Object.defineProperty(t,"version",{enumerable:!0,get:function e(){return a(st).default}});var lt=n("./toolOptions.js");Object.defineProperty(t,"setToolOptions",{enumerable:!0,get:function e(){return lt.setToolOptions}}),Object.defineProperty(t,"getToolOptions",{enumerable:!0,get:function e(){return lt.getToolOptions}});var ut=r(n("./util/drawing.js"));t.drawing=ut},"./inputSources/keyboardInput.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=u.default.cornerstone,n=e.currentTarget,r=t.getEnabledElement(n);if(r.image){var a={event:window.event||e,element:n,viewport:t.getViewport(n),image:r.image,currentPoints:{page:{x:c,y:f},image:t.pageToPixel(n,c,f)},keyCode:e.keyCode,which:e.which};a.currentPoints.canvas=t.pixelToCanvas(n,a.currentPoints.image);var i={keydown:l.default.KEY_DOWN,keypress:l.default.KEY_PRESS,keyup:l.default.KEY_UP};(0,d.default)(n,i[e.type],a)}}function i(e){c=e.pageX,f=e.pageY}function o(e){h.forEach(function(t){e.removeEventListener(t,a),e.addEventListener(t,a)}),e.removeEventListener("mousemove",i),e.addEventListener("mousemove",i)}function s(e){h.forEach(function(t){e.removeEventListener(t,a)}),e.removeEventListener("mousemove",i)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n("./events.js")),u=r(n("./externalModules.js")),d=r(n("./util/triggerEvent.js")),c=void 0,f=void 0,h=["keydown","keypress","keyup"],m={enable:o,disable:s};t.default=m},"./inputSources/mouseInput.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return"number"!=typeof e.buttons?e.which:0===e.buttons?0:e.buttons%2==1?1:e.buttons%4==2?3:e.buttons%8==4?2:0}function i(){p=!1}function o(e){var t=f.default.cornerstone,n=e.currentTarget,r=t.getEnabledElement(n);if(r.image){var a=c.default.MOUSE_DOUBLE_CLICK,i={page:f.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};i.canvas=t.pixelToCanvas(n,i.image);var o=(0,h.default)(i),s={event:e,which:e.which,viewport:t.getViewport(n),image:r.image,element:n,startPoints:i,lastPoints:o,currentPoints:i,deltaPoints:{x:0,y:0},type:a};(0,m.default)(n,a,s)}}function s(e){function t(e){var t=c.default.MOUSE_DRAG,n={page:f.default.cornerstoneMath.point.pageToPoint(e),image:r.pageToPixel(o,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};n.canvas=r.pixelToCanvas(o,n.image);var a={page:f.default.cornerstoneMath.point.subtract(n.page,y.page),image:f.default.cornerstoneMath.point.subtract(n.image,y.image),client:f.default.cornerstoneMath.point.subtract(n.client,y.client),canvas:f.default.cornerstoneMath.point.subtract(n.canvas,y.canvas)},i={which:_,viewport:r.getViewport(o),image:s.image,element:o,startPoints:d,lastPoints:y,currentPoints:n,deltaPoints:a,type:t,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey};(0,m.default)(i.element,t,i),y=(0,h.default)(n)}function n(e){clearTimeout(g);var a=c.default.MOUSE_UP;p&&(a=c.default.MOUSE_CLICK);var i={page:f.default.cornerstoneMath.point.pageToPoint(e),image:r.pageToPixel(o,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};i.canvas=r.pixelToCanvas(o,i.image);var u={page:f.default.cornerstoneMath.point.subtract(i.page,y.page),image:f.default.cornerstoneMath.point.subtract(i.image,y.image),client:f.default.cornerstoneMath.point.subtract(i.client,y.client),canvas:f.default.cornerstoneMath.point.subtract(i.canvas,y.canvas)},h={event:e,which:_,viewport:r.getViewport(o),image:s.image,element:o,startPoints:d,lastPoints:y,currentPoints:i,deltaPoints:u,type:a};(0,m.default)(h.element,a,h),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n),o.addEventListener("mousemove",l),p=!0}var r=f.default.cornerstone,o=e.currentTarget,s=r.getEnabledElement(o);if(s.image){g=setTimeout(i,v);var u=c.default.MOUSE_DOWN;o.removeEventListener("mousemove",l);var d={page:f.default.cornerstoneMath.point.pageToPoint(e),image:r.pageToPixel(o,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};d.canvas=r.pixelToCanvas(o,d.image);var y=(0,h.default)(d),b={event:e,which:a(e),viewport:r.getViewport(o),image:s.image,element:o,startPoints:d,lastPoints:y,currentPoints:d,deltaPoints:{x:0,y:0},type:u};(0,m.default)(b.element,u,b)&&(b.type=c.default.MOUSE_DOWN_ACTIVATE,(0,m.default)(b.element,c.default.MOUSE_DOWN_ACTIVATE,b));var _=a(e);document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)}}function l(e){var t=f.default.cornerstone,n=e.currentTarget,r=t.getEnabledElement(n);if(r.image){var a=c.default.MOUSE_MOVE,i={page:f.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};i.canvas=t.pixelToCanvas(n,i.image);var o=(0,h.default)(i),s={page:f.default.cornerstoneMath.point.pageToPoint(e),image:t.pageToPixel(n,e.pageX,e.pageY),client:{x:e.clientX,y:e.clientY}};s.canvas=t.pixelToCanvas(n,s.image);var l={page:f.default.cornerstoneMath.point.subtract(s.page,o.page),image:f.default.cornerstoneMath.point.subtract(s.image,o.image),client:f.default.cornerstoneMath.point.subtract(s.client,o.client),canvas:f.default.cornerstoneMath.point.subtract(s.canvas,o.canvas)},u={viewport:t.getViewport(n),image:r.image,element:n,startPoints:i,lastPoints:o,currentPoints:s,deltaPoints:l,type:a};(0,m.default)(n,a,u),o=(0,h.default)(s)}}function u(e){e.removeEventListener("mousedown",s),e.removeEventListener("mousemove",l),e.removeEventListener("dblclick",o)}function d(e){u(e),e.addEventListener("mousedown",s),e.addEventListener("mousemove",l),e.addEventListener("dblclick",o)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(n("./events.js")),f=r(n("./externalModules.js")),h=r(n("./util/copyPoints.js")),m=r(n("./util/triggerEvent.js")),p=!0,g=void 0,v=200,y={enable:d,disable:u};t.default=y},"./inputSources/mouseWheelInput.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=l.default.cornerstone,n=e.currentTarget,r=t.getEnabledElement(n);if(r.image&&!("mousewheel"===e.type&&0===e.wheelDeltaY||"DOMMouseScroll"===e.type&&1===e.axis)){e.preventDefault();var a=void 0,i=void 0;void 0!==e.pageX&&void 0!==e.pageY?(a=e.pageX,i=e.pageY):(a=e.x,i=e.y);var o=t.pageToPixel(n,a,i),d=void 0,c=(d=(e=window.event&&window.event.wheelDelta?window.event:e).wheelDelta?e.wheelDelta:e.deltaY?-e.deltaY:e.detail?-e.detail:e.wheelDelta)<0?-1:1,f={element:n,viewport:t.getViewport(n),image:r.image,direction:c,pageX:a,pageY:i,imageX:o.x,imageY:o.y};(0,u.default)(n,s.default.MOUSE_WHEEL,f)}}function i(e){o(e),d.forEach(function(t){e.addEventListener(t,a)})}function o(e){d.forEach(function(t){e.removeEventListener(t,a)})}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./events.js")),l=r(n("./externalModules.js")),u=r(n("./util/triggerEvent.js")),d=["mousewheel","DOMMouseScroll"],c={enable:i,disable:o};t.default=c},"./inputSources/preventGhostClick.js":function(e,t,n){"use strict";function r(e,t){var n=Date.now();if(e!==d){if(n-c<=l)return t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),!1;d=e}c=n}function a(e,t,n){var r=n?f:h;t.forEach(function(t){e.addEventListener(t,r)})}function i(e,t,n){var r=n?f:h;t.forEach(function(t){e.removeEventListener(t,r)})}function o(e){i(e,m,u.mouse),i(e,p,u.touch)}function s(e){o(e),a(e,m,u.mouse),a(e,p,u.touch)}Object.defineProperty(t,"__esModule",{value:!0});var l=2e3,u={mouse:0,touch:1},d=void 0,c=void 0,f=r.bind(null,u.mouse),h=r.bind(null,u.touch),m=["mousedown","mouseup"],p=["touchstart","touchend"],g={enable:s,disable:o};t.default=g},"./inputSources/touchInput.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=l.default.cornerstone,n=e.currentTarget||e.srcEvent.currentTarget,r=t.getEnabledElement(n);if(r.image){var a=void 0,i=void 0,o=void 0,d=void 0,f=void 0;switch(e.preventDefault(),(e.pointers&&e.pointers.length>1||e.touches&&e.touches.length>1)&&(T=!1,clearTimeout(b)),e.type){case"tap":T=!1,clearTimeout(b),(m={page:l.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,m.image),a=s.default.TAP,v={event:e,viewport:t.getViewport(n),image:r.image,element:n,currentPoints:m,type:a,isTouchEvent:!0},(0,c.default)(n,a,v);break;case"doubletap":T=!1,clearTimeout(b),(m={page:l.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,m.image),a=s.default.DOUBLE_TAP,v={event:e,viewport:t.getViewport(n),image:r.image,element:n,currentPoints:m,type:a,isTouchEvent:!0},(0,c.default)(n,a,v);break;case"pinchstart":T=!1,clearTimeout(b),w=1;break;case"pinchmove":if(T=!1,clearTimeout(b),!0===x){w=e.scale,x=!1;break}i=(e.scale-w)/w,(h={page:e.center,image:t.pageToPixel(n,e.center.x,e.center.y)}).canvas=t.pixelToCanvas(n,h.image),a=s.default.TOUCH_PINCH,v={event:e,startPoints:h,viewport:t.getViewport(n),image:r.image,element:n,direction:e.scale<1?1:-1,scaleChange:i,type:a,isTouchEvent:!0},(0,c.default)(n,a,v),w=e.scale;break;case"touchstart":w=1,clearTimeout(b),clearTimeout(y),y=setTimeout(function(){(h={page:l.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,h.image),a=s.default.TOUCH_START,e.touches.length>1&&(a=s.default.MULTI_TOUCH_START),v={event:e,viewport:t.getViewport(n),image:r.image,element:n,startPoints:h,currentPoints:h,type:a,isTouchEvent:!0},!0===(0,c.default)(n,a,v)&&(a=s.default.TOUCH_START_ACTIVE,e.touches.length>1&&(a=s.default.MULTI_TOUCH_START_ACTIVE),v.type=a,(0,c.default)(n,a,v)),p=(0,u.default)(h)},50),T=!0,_=0,b=setTimeout(function(){T&&((m={page:l.default.cornerstoneMath.point.pageToPoint(e.touches[0]),image:t.pageToPixel(n,e.touches[0].pageX,e.touches[0].pageY),client:{x:e.touches[0].clientX,y:e.touches[0].clientY}}).canvas=t.pixelToCanvas(n,h.image),a=s.default.TOUCH_PRESS,v={event:e,viewport:t.getViewport(n),image:r.image,element:n,currentPoints:m,type:a,isTouchEvent:!0},(0,c.default)(n,a,v))},j);break;case"touchend":w=1,T=!1,clearTimeout(b),setTimeout(function(){(h={page:l.default.cornerstoneMath.point.pageToPoint(e.changedTouches[0]),image:t.pageToPixel(n,e.changedTouches[0].pageX,e.changedTouches[0].pageY),client:{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}}).canvas=t.pixelToCanvas(n,h.image),a=s.default.TOUCH_END,v={event:e,viewport:t.getViewport(n),image:r.image,element:n,startPoints:h,currentPoints:h,type:a,isTouchEvent:!0},(0,c.default)(n,a,v)},50);break;case"panmove":o={x:e.deltaX-P.x,y:e.deltaY-P.y},P={x:e.deltaX,y:e.deltaY},(m={page:{x:p.page.x+o.x,y:p.page.y+o.y},image:t.pageToPixel(n,p.page.x+o.x,p.page.y+o.y),client:{x:p.client.x+o.x,y:p.client.y+o.y}}).canvas=t.pixelToCanvas(n,m.image),g={page:l.default.cornerstoneMath.point.subtract(m.page,p.page),image:l.default.cornerstoneMath.point.subtract(m.image,p.image),client:l.default.cornerstoneMath.point.subtract(m.client,p.client),canvas:l.default.cornerstoneMath.point.subtract(m.canvas,p.canvas)},(_+=Math.sqrt(g.page.x*g.page.x+g.page.y*g.page.y))>S&&(T=!1,clearTimeout(b)),a=s.default.TOUCH_DRAG,e.pointers.length>1&&(a=s.default.MULTI_TOUCH_DRAG),v={viewport:t.getViewport(n),image:r.image,element:n,startPoints:h,lastPoints:p,currentPoints:m,deltaPoints:g,numPointers:e.pointers.length,type:a,isTouchEvent:!0},(0,c.default)(n,a,v),p=(0,u.default)(m);break;case"panstart":P={x:e.deltaX,y:e.deltaY},(m={page:l.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,m.image),p=(0,u.default)(m);break;case"panend":if(T=!1,clearTimeout(b),!p)return!1;(m={page:l.default.cornerstoneMath.point.pageToPoint(e.pointers[0]),image:t.pageToPixel(n,e.pointers[0].pageX,e.pointers[0].pageY),client:{x:e.pointers[0].clientX,y:e.pointers[0].clientY}}).canvas=t.pixelToCanvas(n,m.image),g={page:l.default.cornerstoneMath.point.subtract(m.page,p.page),image:l.default.cornerstoneMath.point.subtract(m.image,p.image),client:l.default.cornerstoneMath.point.subtract(m.client,p.client),canvas:l.default.cornerstoneMath.point.subtract(m.canvas,p.canvas)},a=s.default.TOUCH_DRAG_END,v={event:e.srcEvent,viewport:t.getViewport(n),image:r.image,element:n,startPoints:h,lastPoints:p,currentPoints:m,deltaPoints:g,type:a,isTouchEvent:!0},(0,c.default)(n,a,v),2===(d=e.pointers.length-e.changedPointers.length)&&(x=!0);break;case"rotatemove":T=!1,clearTimeout(b),f=e.rotation-E,E=e.rotation,a=s.default.TOUCH_ROTATE,v={event:e.srcEvent,viewport:t.getViewport(n),image:r.image,element:n,rotation:f,type:a},(0,c.default)(n,a,v);break}return!1}}function i(e){o(e);var t=l.default.Hammer,n={inputClass:t.SUPPORT_POINTER_EVENTS?t.PointerEventInput:t.TouchInput},r=new t.Manager(e,n),i={pointers:0,direction:t.DIRECTION_ALL,threshold:0},s=new t.Pan(i),u=new t.Pinch({threshold:0}),c=new t.Rotate({threshold:0});u.recognizeWith(s),u.recognizeWith(c),c.recognizeWith(s);var h=new t.Tap({event:"doubletap",taps:2,interval:1500,threshold:50,posThreshold:50});h.recognizeWith(s),r.add([h,s,c,u]),r.on("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",a),d.default.enable(e),["touchstart","touchend"].forEach(function(t){e.addEventListener(t,a)});var m=(0,f.getToolOptions)(M,e);m.hammer=r,(0,f.setToolOptions)(M,e,m)}function o(e){d.default.disable(e),["touchstart","touchend"].forEach(function(t){e.removeEventListener(t,a)});var t=(0,f.getToolOptions)(M,e).hammer;t&&t.off("tap doubletap panstart panmove panend pinchstart pinchmove rotatemove",a)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./events.js")),l=r(n("./externalModules.js")),u=r(n("./util/copyPoints.js")),d=r(n("./inputSources/preventGhostClick.js")),c=r(n("./util/triggerEvent.js")),f=n("./toolOptions.js"),h=void 0,m=void 0,p=void 0,g=void 0,v=void 0,y=void 0,b=void 0,_=void 0,w=1,E=0,x=!1,T=!1,P=void 0,j=700,S=5,M="touchInput",O={enable:i,disable:o};t.default=O},"./manipulators/anyHandlesOutsideImage.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t){var n=e.image,r={left:0,top:0,width:n.width,height:n.height},o=!1;return(0,a.default)(t).forEach(function(e){var n=t[e];!0!==n.allowedOutsideImage&&!1===i.default.cornerstoneMath.point.insideRect(n,r)&&(o=!0)}),o};var i=r(n("./externalModules.js"))},"./manipulators/drawHandles.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=void 0;return t=e&&e.handleRadius?e.handleRadius:u}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t,n,r,u){e.strokeStyle=r,(0,i.default)(n).forEach(function(r){var i=n[r];if(!0!==i.drawnIndependently&&(!u||!0!==u.drawHandlesIfActive||i.active)){var d=i.active?s.default.getActiveWidth():s.default.getToolWidth(),c=u&&u.fill;(0,l.path)(e,{lineWidth:d,fillStyle:c},function(e){var n=o.default.cornerstone.pixelToCanvas(t.element,i),r=a(u);e.arc(n.x,n.y,r,0,2*Math.PI)})}})};var o=r(n("./externalModules.js")),s=r(n("./stateManagement/toolStyle.js")),l=n("./util/drawing.js"),u=6},"./manipulators/getHandleNearImagePoint.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t,n,r){var s=void 0;if(t)return(0,a.default)(t).forEach(function(a){var l=t[a];if(l.hasOwnProperty("pointNearHandle")){if(l.pointNearHandle(e,l,n))return void(s=l)}else if(!0===l.hasBoundingBox){if((0,o.default)(l,n))return void(s=l)}else{var u=i.default.cornerstone.pixelToCanvas(e,l);if(i.default.cornerstoneMath.point.distance(u,n)<=r)return void(s=l)}}),s};var i=r(n("./externalModules.js")),o=r(n("./util/pointInsideBoundingBox.js"))},"./manipulators/handleActivator.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=void 0;return(0,i.default)(e).forEach(function(n){var r=e[n];!0!==r.active||(t=r)}),t}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t,n,r){r||(r=6);var i=a(t),s=(0,o.default)(e,t,n,r);return i!==s&&(void 0!==s&&(s.active=!0),void 0!==i&&(i.active=!1),!0)};var o=r(n("./manipulators/getHandleNearImagePoint.js"))},"./manipulators/moveAllHandles.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t,n,r,c,f){function h(e){var n=e.detail;t.active=!0,(0,a.default)(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y,c.preventHandleOutsideImage&&(0,d.clipToBox)(r,n.image))}),p.updateImage(g);var o=i.default.MEASUREMENT_MODIFIED,s={toolType:r,element:g,measurementData:t};(0,u.default)(g,o,s),e.preventDefault(),e.stopPropagation()}function m(e){var n=e.detail;t.invalidated=!0,g.removeEventListener(i.default.MOUSE_DRAG,h),g.removeEventListener(i.default.MOUSE_UP,m),g.removeEventListener(i.default.MOUSE_CLICK,m),!0===c.deleteIfHandleOutsideImage&&(0,s.default)(n,t.handles)&&(0,l.removeToolState)(g,r,t),p.updateImage(g),"function"==typeof f&&f()}var p=o.default.cornerstone,g=e.detail.element;return g.addEventListener(i.default.MOUSE_DRAG,h),g.addEventListener(i.default.MOUSE_UP,m),g.addEventListener(i.default.MOUSE_CLICK,m),!0};var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=r(n("./manipulators/anyHandlesOutsideImage.js")),l=n("./stateManagement/toolState.js"),u=r(n("./util/triggerEvent.js")),d=n("./util/clip.js")},"./manipulators/moveHandle.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,l,u){function d(e){var i=e.detail;!1===r.hasMoved&&(r.hasMoved=!0),r.active=!0,r.x=i.currentPoints.image.x+m.x,r.y=i.currentPoints.image.y+m.y,u&&(0,s.clipToBox)(r,i.image),f.updateImage(h);var l=a.default.MEASUREMENT_MODIFIED,d={toolType:t,element:h,measurementData:n};(0,o.default)(h,l,d)}function c(){r.active=!1,h.removeEventListener(a.default.MOUSE_DRAG,d),h.removeEventListener(a.default.MOUSE_UP,c),h.removeEventListener(a.default.MOUSE_CLICK,c),f.updateImage(h),"function"==typeof l&&l()}var f=i.default.cornerstone,h=e.element,m={x:r.x-e.currentPoints.image.x,y:r.y-e.currentPoints.image.y};h.addEventListener(a.default.MOUSE_DRAG,d),h.addEventListener(a.default.MOUSE_UP,c),h.addEventListener(a.default.MOUSE_CLICK,c)};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=r(n("./util/triggerEvent.js")),s=n("./util/clip.js")},"./manipulators/moveNewHandle.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,l,u){function d(e){var i=e.detail;r.active=!0,r.x=i.currentPoints.image.x,r.y=i.currentPoints.image.y,u&&(0,s.clipToBox)(r,i.image),p.updateImage(g);var l=a.default.MEASUREMENT_MODIFIED,d={toolType:t,element:g,measurementData:n};(0,o.default)(g,l,d)}function c(e){g.removeEventListener(a.default.MOUSE_MOVE,c),g.removeEventListener(a.default.MOUSE_DRAG,c),g.addEventListener(a.default.MOUSE_MOVE,d),g.addEventListener(a.default.MOUSE_DRAG,d),g.addEventListener(a.default.MOUSE_CLICK,m),e.type===a.default.MOUSE_DRAG&&g.addEventListener(a.default.MOUSE_UP,m)}function f(e){e.detail.measurementData===n&&m()}function h(e){e.detail.toolType===t&&(g.removeEventListener(a.default.MOUSE_MOVE,d),g.removeEventListener(a.default.MOUSE_DRAG,d),g.removeEventListener(a.default.MOUSE_CLICK,m),g.removeEventListener(a.default.MOUSE_UP,m),g.removeEventListener(a.default.MEASUREMENT_REMOVED,f),g.removeEventListener(a.default.TOOL_DEACTIVATED,h),r.active=!1,p.updateImage(g))}function m(){g.removeEventListener(a.default.MOUSE_MOVE,d),g.removeEventListener(a.default.MOUSE_DRAG,d),g.removeEventListener(a.default.MOUSE_CLICK,m),g.removeEventListener(a.default.MOUSE_UP,m),g.removeEventListener(a.default.MEASUREMENT_REMOVED,f),g.removeEventListener(a.default.TOOL_DEACTIVATED,h),r.active=!1,p.updateImage(g),"function"==typeof l&&l()}var p=i.default.cornerstone,g=e.element;g.addEventListener(a.default.MOUSE_DRAG,c),g.addEventListener(a.default.MOUSE_MOVE,c),g.addEventListener(a.default.MEASUREMENT_REMOVED,f),g.addEventListener(a.default.TOOL_DEACTIVATED,h)};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=r(n("./util/triggerEvent.js")),s=n("./util/clip.js")},"./manipulators/moveNewHandleTouch.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,l,u){function d(e){var i=e.detail;r.x=i.currentPoints.image.x+v.x,r.y=i.currentPoints.image.y+v.y,u&&(0,s.clipToBox)(r,i.image),m.updateImage(p);var l=a.default.MEASUREMENT_MODIFIED,d={toolType:t,element:p,measurementData:n};(0,o.default)(p,l,d)}function c(e){var t=e.detail;if(p.removeEventListener(a.default.TOUCH_DRAG,d),p.removeEventListener(a.default.TOUCH_PINCH,c),p.removeEventListener(a.default.TOUCH_END,c),p.removeEventListener(a.default.TAP,c),p.removeEventListener(a.default.TOUCH_START,f),p.removeEventListener(a.default.TOOL_DEACTIVATED,h),e.type===a.default.TOUCH_PINCH||e.type===a.default.TOUCH_PRESS)return r.active=!1,m.updateImage(p),void l();r.active=!1,n.active=!1,r.x=t.currentPoints.image.x+v.x,r.y=t.currentPoints.image.y+v.y,u&&(0,s.clipToBox)(r,t.image),m.updateImage(p),"function"==typeof l&&l()}function f(e){return e.stopImmediatePropagation(),!1}function h(){p.removeEventListener(a.default.TOUCH_DRAG,d),p.removeEventListener(a.default.TOUCH_PINCH,c),p.removeEventListener(a.default.TOUCH_END,c),p.removeEventListener(a.default.TAP,c),p.removeEventListener(a.default.TOUCH_START,f),p.removeEventListener(a.default.TOOL_DEACTIVATED,h),r.active=!1,n.active=!1,r.x=e.currentPoints.image.x+v.x,r.y=e.currentPoints.image.y+v.y,u&&(0,s.clipToBox)(r,e.image),m.updateImage(p)}var m=i.default.cornerstone,p=e.element,g=m.pageToPixel(p,e.currentPoints.page.x,e.currentPoints.page.y+50),v={x:r.x-g.x,y:r.y-g.y};r.active=!0,n.active=!0,p.addEventListener(a.default.TOUCH_DRAG,d),p.addEventListener(a.default.TOUCH_PINCH,c),p.addEventListener(a.default.TOUCH_END,c),p.addEventListener(a.default.TAP,c),p.addEventListener(a.default.TOUCH_START,f),p.addEventListener(a.default.TOOL_DEACTIVATED,h)};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=r(n("./util/triggerEvent.js")),s=n("./util/clip.js")},"./manipulators/touchMoveAllHandles.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.default=function(e,t,n,r,d,c){function f(e){var n=e.detail;t.active=!0,(0,a.default)(t.handles).forEach(function(e){var r=t.handles[e];!0!==r.movesIndependently&&(r.x+=n.deltaPoints.image.x,r.y+=n.deltaPoints.image.y)}),p.updateImage(m);var o=i.default.MEASUREMENT_MODIFIED,s={toolType:r,element:m,measurementData:t};(0,u.default)(m,o,s),e.preventDefault(),e.stopPropagation()}function h(e){var n=e.detail;t.active=!1,t.invalidated=!1,m.removeEventListener(i.default.TOUCH_DRAG,f),m.removeEventListener(i.default.TOUCH_PINCH,h),m.removeEventListener(i.default.TOUCH_PRESS,h),m.removeEventListener(i.default.TOUCH_END,h),m.removeEventListener(i.default.TOUCH_DRAG_END,h),m.removeEventListener(i.default.TAP,h);var a=(0,s.default)(n,t.handles);!0===d&&!0===a&&(0,l.removeToolState)(m,r,t),p.updateImage(m),"function"==typeof c&&c(e)}var m=e.detail.element,p=o.default.cornerstone;return m.addEventListener(i.default.TOUCH_DRAG,f),m.addEventListener(i.default.TOUCH_PINCH,h),m.addEventListener(i.default.TOUCH_PRESS,h),m.addEventListener(i.default.TOUCH_END,h),m.addEventListener(i.default.TOUCH_DRAG_END,h),m.addEventListener(i.default.TAP,h),!0};var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=r(n("./manipulators/anyHandlesOutsideImage.js")),l=n("./stateManagement/toolState.js"),u=r(n("./util/triggerEvent.js"))},"./manipulators/touchMoveHandle.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,i){if(n.value){var s=o.default.cornerstone,l=(new Date).getTime(),u=Math.abs(t.y-i.y),d=u/10;if(u<1)return t.y=i.y,void(n.value=!1);t.y>i.y?t.y-=d:t.y<i.y&&(t.y+=d),s.updateImage(r.element),s.requestAnimationFrame(function(){a(l,t,n,r,i)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,d){function c(e){var a=e.detail;l.value=!1,!1===r.hasMoved&&(r.hasMoved=!0),r.active=!0;var o=a.currentPoints,u={x:o.page.x,y:o.page.y+y};_=m.pageToPixel(p,u.x,u.y),r.x=_.x,r.y=_.y,m.updateImage(p);var d=i.default.MEASUREMENT_MODIFIED,c={toolType:t,element:p,measurementData:n};(0,s.default)(p,d,c)}function f(e){var t=e.detail;l.value=!1,r.active=!1,p.removeEventListener(i.default.TOUCH_DRAG,c),u.forEach(function(e){p.removeEventListener(e,f)}),m.updateImage(p),e.type===i.default.TOUCH_PRESS&&(t.handlePressed=n,r.x=h.currentPoints.image.x,r.y=h.currentPoints.image.y),"function"==typeof d&&d(e)}l.value=!0;var h=e.detail,m=o.default.cornerstone,p=h.element,g=m.getEnabledElement(p),v=(new Date).getTime(),y=-57,b={x:h.currentPoints.page.x,y:h.currentPoints.page.y+y},_=m.pageToPixel(p,b.x,b.y);p.addEventListener(i.default.TOUCH_DRAG,c),u.forEach(function(e){p.addEventListener(e,f)}),a(v,r,l,g,_)};var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=r(n("./util/triggerEvent.js")),l={value:!1},u=[i.default.TOUCH_END,i.default.TOUCH_DRAG_END,i.default.TOUCH_PINCH,i.default.TOUCH_PRESS,i.default.TAP]},"./measurementManager/lineSampleMeasurement.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=i.default.cornerstone,t=this;t.samples=[],this.set=function(n){t.samples=n,(0,o.default)(e.events,a.default.LINE_SAMPLE_UPDATED)}};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=r(n("./util/triggerEvent.js"))},"./measurementManager/measurementManager.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=o.default.cornerstone,t=this;t.measurements=[],this.add=function(n){var r={index:t.measurements.push(n),measurement:n};(0,s.default)(e.events,i.default.MEASUREMENT_ADDED,r)},this.remove=function(n){var r=t.measurements[n];t.measurements.splice(n,1);var a={index:n,measurement:r};(0,s.default)(e.events,i.default.MEASUREMENT_REMOVED,a)}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=r(n("./util/triggerEvent.js")),l=new a;t.default=l},"./orientation/getOrientationString.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=(0,i.default)(e),n="",r=t.x<0?"R":"L",o=t.y<0?"A":"P",s=t.z<0?"F":"H",l=new a.default.cornerstoneMath.Vector3(Math.abs(t.x),Math.abs(t.y),Math.abs(t.z)),u=0;u<3;u++)if(l.x>1e-4&&l.x>l.y&&l.x>l.z)n+=r,l.x=0;else if(l.y>1e-4&&l.y>l.x&&l.y>l.z)n+=o,l.y=0;else{if(!(l.z>1e-4&&l.z>l.x&&l.z>l.y))break;n+=s,l.z=0}return n};var a=r(n("./externalModules.js")),i=r(n("./util/convertToVector3.js"))},"./orientation/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./orientation/getOrientationString.js")),i=r(n("./orientation/invertOrientationString.js")),o={getOrientationString:a.default,invertOrientationString:i.default};t.default=o},"./orientation/invertOrientationString.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.replace("H","f");return t=t.replace("F","h"),t=t.replace("R","l"),t=t.replace("L","r"),t=t.replace("A","p"),t=t.replace("P","a"),t=t.toUpperCase()}},"./paintingTools/adaptiveBrush.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=j.getConfiguration().tolerance,a=Number.MAX_VALUE,i=-Number.MAX_VALUE;e.forEach(function(e){var r=e[1]*n+e[0],o=t[r];a=Math.min(o,a),i=Math.max(o,i)}),x=a-r,E=i+r}function i(e,t,n,r){for(var a=j.getConfiguration(),i=a.draw,o=Math.round(w.x),s=Math.round(w.y),l=null,u=[],d=a.radius;0!==l&&d>a.minRadius;){l=0,u=(0,g.default)(d,n,r,o,s);for(var c=0;c<u.length;c++){var f=u[c][0],h=e[u[c][1]*r+f];if(h>E||h<x){l++;break}}d--}return 0===l&&(0,v.drawBrushPixels)(u,t,i,r),d}function o(e){var t=j.getConfiguration(),n=e.element,r=h.default.cornerstone.getLayer(n,t.brushLayerId),a=h.default.cornerstone.getLayers(n)[0],o=r.image,s=o.rows,l=o.columns,u=(0,m.getToolState)(n,y).data[0];T=i(a.image.getPixelData(),u.pixelData,s,l),r.invalid=!0,h.default.cornerstone.updateImage(n)}function s(e){var t=j.getConfiguration(),n=e.element,r=h.default.cornerstone.getLayer(n,t.brushLayerId),a=r.image,i=a.rows,o=a.columns,s=e.currentPoints.image,l=s.x,u=s.y,d=(0,m.getToolState)(n,y).data[0].pixelData,c=t.draw,f=t.radius;if(!(l<0||l>o||u<0||u>i)){var p=(0,g.default)(f,i,o,l,u);(0,v.drawBrushPixels)(p,d,c,o),r.invalid=!0,h.default.cornerstone.updateImage(n)}}function l(e){var t=e.detail;w=t.currentPoints.image;var n=j.getConfiguration();P=!1,T=n.radius,h.default.cornerstone.updateImage(t.element)}function u(e){var t=e.detail,n=t.element,r=j.getConfiguration(),i=h.default.cornerstone.getLayer(n,r.brushLayerId),l=h.default.cornerstone.getLayers(n)[0],u=t.currentPoints.image,d=u.x,c=u.y,f=i.image,m=f.rows,p=f.columns,v=(0,g.default)(r.radius,m,p,d,c);0===r.draw?s(t):(a(v,l.image.getPixelData(),p),o(t)),P=!0,w=t.currentPoints.image}function d(e){var t=e.detail;w=t.currentPoints.image,h.default.cornerstone.updateImage(t.element)}function c(e){var t=e.detail;0===_.draw?s(t):o(t),P=!0,w=t.currentPoints.image}function f(e){var t=e.detail;if(w){var n=t.image,r=n.rows,a=n.columns,i=w,o=i.x,s=i.y;if(!(o<0||o>a||s<0||s>r)){var l=j.getConfiguration(),u=t.canvasContext,d=P?l.dragColor:l.hoverColor,c=t.element;if(T=P?T||l.radius:l.radius,u.setTransform(1,0,0,1,0,0),l.active){var f=(0,g.default)(T,r,a,o,s);(0,v.drawBrushOnCanvas)(f,u,d,c)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.adaptiveBrush=void 0;var h=r(n("./externalModules.js")),m=n("./stateManagement/toolState.js"),p=r(n("./paintingTools/brushTool.js")),g=r(n("./paintingTools/getCircle.js")),v=n("./paintingTools/drawBrush.js"),y="brush",b="adaptiveBrush",_={draw:1,radius:5,tolerance:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1},w=void 0,E=void 0,x=void 0,T=void 0,P=void 0,j=(0,p.default)({onMouseMove:d,onMouseDown:u,onMouseUp:l,onDrag:c,toolType:b,onImageRendered:f});j.setConfiguration(_),t.adaptiveBrush=j},"./paintingTools/brush.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=_.getConfiguration(),n=e.element,r=d.default.cornerstone.getLayer(n,t.brushLayerId),a=r.image,i=a.rows,o=a.columns,s=e.currentPoints.image,l=s.x,u=s.y,f=(0,c.getToolState)(n,p).data[0].pixelData,g=t.draw,v=t.radius;if(!(l<0||l>o||u<0||u>i)){var y=(0,h.default)(v,i,o,l,u);(0,m.drawBrushPixels)(y,f,g,o),r.invalid=!0,d.default.cornerstone.updateImage(n)}}function i(e){var t=e.detail;y=t.currentPoints.image,b=!1}function o(e){var t=e.detail;a(t),b=!0,y=t.currentPoints.image}function s(e){var t=e.detail;y=t.currentPoints.image,d.default.cornerstone.updateImage(t.element)}function l(e){var t=e.detail;a(t),b=!0,y=t.currentPoints.image}function u(e){var t=e.detail;if(y){var n=t.image,r=n.rows,a=n.columns,i=y,o=i.x,s=i.y;if(!(o<0||o>a||s<0||s>r)){var l=_.getConfiguration(),u=l.radius,d=t.canvasContext,c=b?l.dragColor:l.hoverColor,f=t.element;if(d.setTransform(1,0,0,1,0,0),l.active){var p=(0,h.default)(u,r,a,o,s);(0,m.drawBrushOnCanvas)(p,d,c,f)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.brush=void 0;var d=r(n("./externalModules.js")),c=n("./stateManagement/toolState.js"),f=r(n("./paintingTools/brushTool.js")),h=r(n("./paintingTools/getCircle.js")),m=n("./paintingTools/drawBrush.js"),p="brush",g="brush",v={draw:1,radius:5,minRadius:1,maxRadius:20,hoverColor:"rgba(230, 25, 75, 1.0)",dragColor:"rgba(230, 25, 75, 0.8)",active:!1},y=void 0,b=!1,_=(0,f.default)({onMouseMove:s,onMouseDown:o,onMouseUp:i,onDrag:l,toolType:"brush",onImageRendered:u});_.setConfiguration(v),t.brush=_},"./paintingTools/brushTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(e){var t=e.detail,a=!1;a=n(t)||a,(a=r(t)||a)&&o.default.cornerstone.updateImage(t.element)}function n(e){var t=e.keyCode,n=!1;return 109===t||173===t?(g(),n=!0):61!==t&&107!==t||(p(),n=!0),n}function r(e){var t=e.keyCode,n=!1;return 219===t?(y(),n=!0):221===t&&(v(),n=!0),n}function a(e){var t=O.getConfiguration(),n=o.default.cornerstone.colors.getColormap(t.colormapId);t.draw=e;var r=n.getColor(t.draw);t.hoverColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 1.0 )",t.dragColor="rgba("+r[[0]]+", "+r[[1]]+", "+r[[2]]+", 0.8 )"}function p(){var e=O.getConfiguration();e.radius=(0,c.default)(e.radius+1,e.minRadius,e.maxRadius)}function g(){var e=O.getConfiguration();e.radius=(0,c.default)(e.radius-1,e.minRadius,e.maxRadius)}function v(){var e=O.getConfiguration(),t=b(),n=e.draw+1;n===t&&(n=0),a(n)}function y(){var e=O.getConfiguration(),t=b(),n=e.draw-1;n<0&&(n=t-1),a(n)}function b(){var e=O.getConfiguration();return o.default.cornerstone.colors.getColormap(e.colormapId).getNumberOfColors()}function _(t){e.onMouseMove(t)}function w(t){var n=t.detail.element;e.onMouseUp(t),n.removeEventListener(i.default.MOUSE_DRAG,_),n.removeEventListener(i.default.MOUSE_DRAG,E),n.removeEventListener(i.default.MOUSE_UP,w),n.removeEventListener(i.default.MOUSE_CLICK,w)}function E(t){return e.onDrag(t),!1}function x(t){var n=t.detail,r=n.element,a=(0,d.getToolOptions)(M,r);if((0,u.default)(n.which,a.mouseButtonMask))return r.addEventListener(i.default.MOUSE_DRAG,E),r.addEventListener(i.default.MOUSE_UP,w),r.addEventListener(i.default.MOUSE_CLICK,w),e.onMouseDown(t),!1;r.addEventListener(i.default.MOUSE_DRAG,_),r.addEventListener(i.default.MOUSE_UP,w)}function T(t){var n=t.detail,r=n.element,a=(0,s.getToolState)(r,f),i=void 0;a?i=a.data[0].pixelData:(i=new Uint8ClampedArray(n.image.width*n.image.height),(0,s.addToolState)(r,f,{pixelData:i}));var l=o.default.cornerstone.getLayer(n.element,h);l.image.setPixelData(i),l.invalid=!0,o.default.cornerstone.updateImage(r),e.onImageRendered(t)}function P(e){var t=o.default.cornerstone.colors.getColormap(e);t.setNumberOfColors(20),t.setColor(0,[255,255,255,0]),t.setColor(1,[230,25,75,102]),t.setColor(2,[60,180,175,102]),t.setColor(3,[255,225,25,102]),t.setColor(4,[0,130,200,102]),t.setColor(5,[245,130,48,102]),t.setColor(6,[145,30,180,102]),t.setColor(7,[70,240,240,102]),t.setColor(8,[240,50,230,102]),t.setColor(9,[210,245,60,102]),t.setColor(10,[250,190,190,102]),t.setColor(11,[0,128,128,102]),t.setColor(12,[230,190,255,102]),t.setColor(13,[170,110,40,102]),t.setColor(14,[255,250,200,102]),t.setColor(15,[128,0,0,102]),t.setColor(16,[170,255,195,102]),t.setColor(17,[128,128,0,102]),t.setColor(18,[255,215,180,102]),t.setColor(19,[0,0,128,102])}function j(e,n){(0,d.setToolOptions)(M,e,{mouseButtonMask:n}),e.removeEventListener(i.default.IMAGE_RENDERED,T),e.addEventListener(i.default.IMAGE_RENDERED,T),e.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,x),e.addEventListener(i.default.MOUSE_DOWN_ACTIVATE,x),e.removeEventListener(i.default.MOUSE_MOVE,_),e.addEventListener(i.default.MOUSE_MOVE,_),e.removeEventListener(i.default.KEY_DOWN,t),e.addEventListener(i.default.KEY_DOWN,t);var r=o.default.cornerstone.getEnabledElement(e),a=r.image,l=a.width,u=a.height,c=new Uint8ClampedArray(l*u),p=O.getConfiguration();p.active=!0;var g=p.colormapId;if(!g){var v=O.getConfiguration();P(g="BrushColorMap"),v.colormapId=g}var y={minPixelValue:0,maxPixelValue:1,slope:1,intercept:0,getPixelData:function e(){return c},rows:r.image.height,columns:r.image.width,height:u,width:l,pixelData:c,setPixelData:function e(t){c=t},colormap:g,color:!1,rgba:!1,labelmap:!0,invert:!1,columnPixelSpacing:1,rowPixelSpacing:1,sizeInBytes:r.image.width*r.image.height},b=void 0,w={viewport:{pixelReplication:!0}};m||(m=o.default.cornerstone.addLayer(e,o.default.cornerstone.getEnabledElement(e).image)),h&&(b=o.default.cornerstone.getLayer(e,h)),b||(h=o.default.cornerstone.addLayer(e,y,w)),(0,s.addToolState)(e,f,{pixelData:c}),p.brushLayerId=h,O.setConfiguration(p),o.default.cornerstone.updateImage(e)}function S(e){e.removeEventListener(i.default.IMAGE_RENDERED,T),e.removeEventListener(i.default.MOUSE_DOWN_ACTIVATE,x),e.removeEventListener(i.default.MOUSE_MOVE,_),e.removeEventListener(i.default.KEY_DOWN,t),e.addEventListener(i.default.IMAGE_RENDERED,T),O.getConfiguration().active=!1}var M=e.toolType,O=(0,l.default)({mouseMoveCallback:_,mouseDownActivateCallback:x,onImageRendered:T,deactivate:S});return O.keyDownCallback=t,O.activate=j,O.changeDrawColor=a,O.increaseRadius=p,O.decreaseRadius=g,O.nextSegmentation=v,O.previousSegmentation=y,O}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("./events.js")),o=r(n("./externalModules.js")),s=n("./stateManagement/toolState.js"),l=r(n("./imageTools/mouseButtonTool.js")),u=r(n("./util/isMouseButtonEnabled.js")),d=n("./toolOptions.js"),c=r(n("./util/clip.js")),f="brush",h=void 0,m=void 0},"./paintingTools/drawBrush.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){var a=function e(t,n){return n*r+t};e.forEach(function(e){var r=a(e[0],e[1]);t[r]=n})}function i(e,t,n,r){var a=o.default.cornerstone.pixelToCanvas(r,{x:0,y:0}),i=o.default.cornerstone.pixelToCanvas(r,{x:1,y:1}),l=i.x-a.x,u=i.y-a.y;(0,s.draw)(t,function(t){e.forEach(function(e){var a=o.default.cornerstone.pixelToCanvas(r,{x:e[0],y:e[1]}),i={left:a.x,top:a.y,width:l,height:u};(0,s.fillBox)(t,i,n)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.drawBrushOnCanvas=t.drawBrushPixels=void 0;var o=r(n("./externalModules.js")),s=n("./util/drawing.js");t.drawBrushPixels=a,t.drawBrushOnCanvas=i},"./paintingTools/getCircle.js":function(e,t,n){"use strict";function r(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=Math.round(r),o=Math.round(a);if(1===e)return[[i,o]];for(var s=[],l=0,u=-e;u<=e;u++){var d=o+u;if(!(d>t||d<0))for(var c=-e;c<=e;c++){var f=i+c;f>n||f<0||c*c+u*u<e*e&&(s[l++]=[i+c,o+u])}}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},"./referenceLines/calculateReferenceLine.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.planePlaneIntersection)(e,t);if(n)return{start:(0,r.projectPatientPointToImagePlane)(n.start,e),end:(0,r.projectPatientPointToImagePlane)(n.end,e)}};var r=n("./util/pointProjector.js")},"./referenceLines/index.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./referenceLines/calculateReferenceLine.js")),i=r(n("./referenceLines/referenceLinesTool.js")),o=r(n("./referenceLines/renderActiveReferenceLine.js")),s={calculateReferenceLine:a.default,tool:i.default,renderActiveReferenceLine:o.default};t.default=s},"./referenceLines/referenceLinesTool.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=(0,u.getToolState)(e.currentTarget,c);if(void 0!==n){var r=n.data[0].synchronizationContext.getSourceElements(),a=n.data[0].renderer,i=t.canvasContext.canvas.getContext("2d");l.default.cornerstone.setToPixelCoordinateSystem(t.enabledElement,i),r.forEach(function(n){n!==e.currentTarget&&a(i,t,e.currentTarget,n)})}}function i(e,t,n){n=n||d.default,(0,u.addToolState)(e,c,{synchronizationContext:t,renderer:n}),e.removeEventListener(s.default.IMAGE_RENDERED,a),e.addEventListener(s.default.IMAGE_RENDERED,a),l.default.cornerstone.updateImage(e)}function o(e){e.removeEventListener(s.default.IMAGE_RENDERED,a),l.default.cornerstone.updateImage(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./events.js")),l=r(n("./externalModules.js")),u=n("./stateManagement/toolState.js"),d=r(n("./referenceLines/renderActiveReferenceLine.js")),c="referenceLines",f={enable:i,disable:o};t.default=f},"./referenceLines/renderActiveReferenceLine.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var u=a.default.cornerstone,d=u.getEnabledElement(n).image,c=u.getEnabledElement(r).image;if(d&&c){var f=u.metaData.get("imagePlaneModule",d.imageId),h=u.metaData.get("imagePlaneModule",c.imageId);if(f&&h&&f.rowCosines&&f.columnCosines&&f.imagePositionPatient&&h.rowCosines&&h.columnCosines&&h.imagePositionPatient&&f.frameOfReferenceUID===h.frameOfReferenceUID){f.rowCosines=(0,s.default)(f.rowCosines),f.columnCosines=(0,s.default)(f.columnCosines),f.imagePositionPatient=(0,s.default)(f.imagePositionPatient),h.rowCosines=(0,s.default)(h.rowCosines),h.columnCosines=(0,s.default)(h.columnCosines),h.imagePositionPatient=(0,s.default)(h.imagePositionPatient);var m=f.rowCosines.clone().cross(f.columnCosines),p=h.rowCosines.clone().cross(h.columnCosines),g=m.angleTo(p);if(!((g=Math.abs(g))<.5)){var v=(0,i.default)(f,h);if(v){var y=o.default.getActiveColor();e.setTransform(1,0,0,1,0,0),(0,l.draw)(e,function(e){(0,l.drawLine)(e,t.element,v.start,v.end,{color:y})})}}}}};var a=r(n("./externalModules.js")),i=r(n("./referenceLines/calculateReferenceLine.js")),o=r(n("./stateManagement/toolColors.js")),s=r(n("./util/convertToVector3.js")),l=n("./util/drawing.js")},"./requestPool/requestPoolManager.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a,i,o){if(!h.hasOwnProperty(n))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");if(e&&t){var s={type:n,imageId:t,preventCache:r,doneCallback:a,failCallback:i},l=c.default.cornerstone.imageCache.getImageLoadObject(t);l?l.promise.then(function(e){a(e)},function(e){i(e)}):(o?h[n].unshift(s):h[n].push(s),g=!0)}}function i(e){if(!h.hasOwnProperty(e))throw new Error("Request type must be one of interaction, thumbnail, or prefetch");h[e]=[]}function o(){g&&setTimeout(function(){l()},v)}function s(e){function t(e){return"prefetch"===e.type?-5:"interactive"===e.type?0:"thumbnail"===e.type?5:void 0}var n=c.default.cornerstone,r=e.type;m[r]++,g=!0;var a=e.imageId,i=e.doneCallback,s=e.failCallback,l=n.imageCache.getImageLoadObject(a);if(l)l.promise.then(function(e){m[r]--,i(e),o()},function(e){m[r]--,s(e),o()});else{var u=t(e),d=void 0;(d=!0===e.preventCache?n.loadImage(a,{priority:u,type:e.type}):n.loadAndCacheImage(a,{priority:u,type:e.type})).then(function(e){m[r]--,i(e),o()},function(e){m[r]--,s(e),o()})}}function l(){var e=(0,f.getMaxSimultaneousRequests)();p={interaction:Math.max(e,1),thumbnail:Math.max(e-2,1),prefetch:Math.max(e-1,1)};for(var t=e-(m.interaction+m.thumbnail+m.prefetch),n=0;n<t;n++){var r=u();r&&s(r)}}function u(){return h.interaction.length&&m.interaction<p.interaction?h.interaction.shift():h.thumbnail.length&&m.thumbnail<p.thumbnail?h.thumbnail.shift():h.prefetch.length&&m.prefetch<p.prefetch?h.prefetch.shift():(h.interaction.length||h.thumbnail.length||h.prefetch.length||(g=!1),!1)}function d(){return h}Object.defineProperty(t,"__esModule",{value:!0});var c=r(n("./externalModules.js")),f=n("./util/getMaxSimultaneousRequests.js"),h={interaction:[],thumbnail:[],prefetch:[]},m={interaction:0,thumbnail:0,prefetch:0},p={interaction:6,thumbnail:6,prefetch:5},g=!1,v=20;t.default={addRequest:a,clearRequestStack:i,startGrabbing:l,getRequestPool:d}},"./stackTools/fusionRenderer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("../node_modules/babel-runtime/core-js/number/is-integer.js")),i=r(n("../node_modules/babel-runtime/helpers/classCallCheck.js")),o=r(n("../node_modules/babel-runtime/helpers/createClass.js")),s=r(n("./externalModules.js")),l=n("./stateManagement/toolState.js"),u=function(){function e(){(0,i.default)(this,e),this.currentImageIdIndex=0,this.layerIds=[],this.findImageFn=void 0}return(0,o.default)(e,[{key:"render",value:function e(t,n){var r=this;if(!(0,a.default)(this.currentImageIdIndex))throw new Error("FusionRenderer: render - Image ID Index is not an integer");if(!this.findImageFn)throw new Error("No findImage function has been defined");n||(n=(0,l.getToolState)(t,"stack").data);var i=s.default.cornerstone,o=n[0],u=o.imageIds[this.currentImageIdIndex],d=n.slice(1,n.length);i.loadAndCacheImage(u).then(function(e){var n=r.layerIds[0];n?i.setLayerImage(t,e,n):(n=i.addLayer(t,e,o.options),r.layerIds.push(n)),i.displayImage(t,e),d.forEach(function(e,a){var o=r.findImageFn(e.imageIds,u),s=a+1,l=r.layerIds[s];l||(l=i.addLayer(t,void 0,e.options),r.layerIds.push(l)),o?i.loadAndCacheImage(o).then(function(e){i.setLayerImage(t,e,l),i.updateImage(t)}):(i.setLayerImage(t,void 0,l),i.setActiveLayer(t,n),i.updateImage(t))})})}}]),e}();t.default=u},"./stackTools/playClip.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=void 0,r=void 0,a=void 0,i=0,o=e.length,s=[];for(s.isTimeVarying=!1,("number"!=typeof t||t<=0)&&(t=1),n=1;n<o;n++)a=Number(e[n])/t|0,s.push(a),1===n?r=a:a!==r&&(s.isTimeVarying=!0),i+=a;return s.length>0&&(a=s.isTimeVarying?i/s.length|0:s[0],s.push(a)),s}function i(e){var t=e.intervalId;void 0!==t&&(e.intervalId=void 0,e.usingFrameTimeVector?clearTimeout(t):clearInterval(t))}function o(e){var t={element:e};(0,h.default)(e,u.default.CLIP_STOPPED,t)}function s(e,t){var n=void 0,r=void 0;if(void 0===e)throw new Error("playClip: element must not be undefined");var s=(0,f.getToolState)(e,"stack");if(s&&s.data&&s.data.length){var l=d.default.cornerstone,u=void 0;if(s.data.length>1){var h=(0,f.getToolState)(e,"stackRenderer");h&&h.data&&h.data.length&&(u=h.data[0])}var p=s.data[0],g=(0,f.getToolState)(e,m);g&&g.data&&g.data.length?i(n=g.data[0]):(n={intervalId:void 0,framesPerSecond:30,lastFrameTimeStamp:void 0,frameRate:0,frameTimeVector:void 0,ignoreFrameTimeVector:!1,usingFrameTimeVector:!1,speed:1,reverse:!1,loop:!0},(0,f.addToolState)(e,m,n)),(t<0||t>0)&&(n.framesPerSecond=Number(t),n.reverse=n.framesPerSecond<0,n.ignoreFrameTimeVector=!0),!0!==n.ignoreFrameTimeVector&&n.frameTimeVector&&n.frameTimeVector.length===p.imageIds.length&&(r=a(n.frameTimeVector,n.speed));var v=function t(){var r=void 0,a=void 0,d=void 0,f=void 0,h=p.currentImageIdIndex,m=p.imageIds.length;if(n.reverse?h--:h++,!n.loop&&(h<0||h>=m))return i(n),void o(e);h>=m&&(h=0),h<0&&(h=m-1),h!==p.currentImageIdIndex&&(a=c.default.getStartLoadHandler(),d=c.default.getEndLoadHandler(),f=c.default.getErrorLoadingHandler(),a&&a(e),(r=!0===p.preventCache?l.loadImage(p.imageIds[h]):l.loadAndCacheImage(p.imageIds[h])).then(function(t){try{p.currentImageIdIndex=h,u?(u.currentImageIdIndex=h,u.render(e,s.data)):l.displayImage(e,t),d&&d(e,t)}catch(e){return}},function(t){var n=p.imageIds[h];f&&f(e,n,t)}))};r&&r.length>0&&r.isTimeVarying?(n.usingFrameTimeVector=!0,n.intervalId=setTimeout(function e(){n.intervalId=setTimeout(e,r[p.currentImageIdIndex]),v()},0)):(n.usingFrameTimeVector=!1,n.intervalId=setInterval(v,1e3/Math.abs(n.framesPerSecond)))}}function l(e){var t=(0,f.getToolState)(e,m);t&&t.data&&t.data.length&&i(t.data[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.stopClip=t.playClip=void 0;var u=r(n("./events.js")),d=r(n("./externalModules.js")),c=r(n("./stateManagement/loadHandlerManager.js")),f=n("./stateManagement/toolState.js"),h=r(n("./util/triggerEvent.js")),m="playClip";t.playClip=s,t.stopClip=l},"./stackTools/scrollIndicator.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=t.element,r=t.enabledElement.canvas.width,a=t.enabledElement.canvas.height;if(!r||!a)return!1;var i=(0,s.getNewContext)(t.enabledElement.canvas);(0,s.draw)(i,function(e){var t=d.getConfiguration(),i=void 0;i="horizontal"===t.orientation?{left:0,top:a-l,width:r,heigh:l}:{left:0,top:0,width:l,height:a},(0,s.fillBox)(e,i,t.backgroundColor);var u=(0,o.getToolState)(n,"stack");if(u&&u.data&&u.data.length){var c=u.data[0].imageIds,f=u.data[0].currentImageIdIndex,h=r/c.length,m=a/c.length,p=h*f,g=m*f;i="horizontal"===t.orientation?{left:p,top:a-l,cursorWidth:h,scrollBarHeight:l}:{left:0,top:g,width:l,heigh:m},(0,s.fillBox)(e,i,t.fillColor)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./imageTools/displayTool.js")),o=n("./stateManagement/toolState.js"),s=n("./util/drawing.js"),l=6,u={backgroundColor:"rgb(19, 63, 141)",fillColor:"white",orientation:"horizontal"},d=(0,i.default)(a);d.setConfiguration(u),t.default=d},"./stackTools/stackPrefetch.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){e=Math.round(e)||0;var n=[],r=(t=Math.round(t)||0)-e+1;if(r<=0)return n;for(;r--;)n[r]=t--;return n}function i(e,t){var n=[],r=[];return e.forEach(function(e){e<t?n.push(e):e>t&&r.push(e)}),{low:e.indexOf(T(n)),high:e.indexOf(P(r))}}function o(e){function t(e){var t=l.indicesToRequest.indexOf(e);t>-1&&l.indicesToRequest.splice(t,1)}function n(e){t(o.imageIds.indexOf(e.imageId))}function r(t){console.log("prefetch errored: "+t),h&&h(e,d,t,"stackPrefetch")}var a=(0,v.getToolState)(e,"stack");if(a&&a.data&&a.data.length){var o=a.data[0],s=(0,v.getToolState)(e,b);if(s){var l=s.data[0]||{};if(l.indicesToRequest&&l.indicesToRequest.length||(l.enabled=!1),!1!==l.enabled&&(s.data[0].indicesToRequest.sort(function(e,t){return e-t}),l.indicesToRequest.slice().forEach(function(e){var n=o.imageIds[e];n&&m.default.cornerstone.imageCache.getImageLoadObject(n)&&t(e)}),l.indicesToRequest.length)){p.default.clearRequestStack(_);for(var u=i(l.indicesToRequest,o.currentImageIdIndex),d=void 0,c=void 0,f=!1,h=g.default.getErrorLoadingHandler(),y=u.low,E=u.high;y>=0||E<l.indicesToRequest.length;){var x=o.currentImageIdIndex,T=x-l.indicesToRequest[y]>w.maxImagesToPrefetch,P=l.indicesToRequest[E]-x>w.maxImagesToPrefetch,j=!T&&y>=0,S=!P&&E<l.indicesToRequest.length;if(!S&&!j)break;j&&(c=l.indicesToRequest[y--],d=o.imageIds[c],p.default.addRequest(e,d,_,!1,n,r)),S&&(c=l.indicesToRequest[E++],d=o.imageIds[c],p.default.addRequest(e,d,_,!1,n,r))}p.default.startGrabbing()}}}}function s(e){return function(t){var n=t.detail,r=void 0;try{r=(0,v.getToolState)(e,"stack")}catch(e){return}if(r&&r.data&&r.data.length){var a=r.data[0].imageIds.indexOf(n.imageId);if(!(a<0)){var i=(0,v.getToolState)(e,b);i&&i.data&&i.data.length&&i.data[0].indicesToRequest.push(a)}}}}function l(e){clearTimeout(E),E=setTimeout(function(){var t=e.target;try{o(t)}catch(e){return}},x)}function u(e){(0,v.getToolState)(e,b).data=[];var t=(0,v.getToolState)(e,"stack");if(t&&t.data&&t.data.length){var n=t.data[0];if(!0!==n.preventCache){var r={indicesToRequest:a(0,n.imageIds.length-1),enabled:!0,direction:1},i=r.indicesToRequest.indexOf(n.currentImageIdIndex);r.indicesToRequest.splice(i,1),(0,v.addToolState)(e,b,r),o(e),e.removeEventListener(h.default.NEW_IMAGE,l),e.addEventListener(h.default.NEW_IMAGE,l);var u=s(e);m.default.cornerstone.events.removeEventListener(h.default.IMAGE_CACHE_PROMISE_REMOVED,u),m.default.cornerstone.events.addEventListener(h.default.IMAGE_CACHE_PROMISE_REMOVED,u)}else console.warn("A stack that should not be cached was given the stackPrefetch")}}function d(e){clearTimeout(E),e.removeEventListener(h.default.NEW_IMAGE,l);var t=s(e);m.default.cornerstone.events.removeEventListener(h.default.IMAGE_CACHE_PROMISE_REMOVED,t);var n=(0,v.getToolState)(e,b);n&&n.data.length&&(n.data[0].enabled=!1,p.default.clearRequestStack(_))}function c(){return w}function f(e){w=e,e.maxSimultaneousRequests&&(0,y.setMaxSimultaneousRequests)(e.maxSimultaneousRequests)}Object.defineProperty(t,"__esModule",{value:!0});var h=r(n("./events.js")),m=r(n("./externalModules.js")),p=r(n("./requestPool/requestPoolManager.js")),g=r(n("./stateManagement/loadHandlerManager.js")),v=n("./stateManagement/toolState.js"),y=n("./util/getMaxSimultaneousRequests.js"),b="stackPrefetch",_="prefetch",w={maxImagesToPrefetch:1/0},E=void 0,x=10,T=function e(t){return Math.max.apply(null,t)},P=function e(t){return Math.min.apply(null,t)},j={enable:u,disable:d,getConfiguration:c,setConfiguration:f};t.default=j},"./stackTools/stackRenderers.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n("./stackTools/fusionRenderer.js")),i={};i.FusionRenderer=a.default,t.default=i},"./stackTools/stackScroll.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail.element;t.removeEventListener(u.default.MOUSE_DRAG,s),t.removeEventListener(u.default.MOUSE_UP,a),t.removeEventListener(u.default.MOUSE_CLICK,a)}function i(e){var t=e.detail,n=t.element,r=(0,v.getToolOptions)(y,n);if((0,m.default)(t.which,r.mouseButtonMask))return r.deltaY=0,(0,v.setToolOptions)(y,n,r),n.addEventListener(u.default.MOUSE_DRAG,s),n.addEventListener(u.default.MOUSE_UP,a),n.addEventListener(u.default.MOUSE_CLICK,a),e.stopImmediatePropagation(),!1}function o(e){var t=e.detail,n=-t.direction,r=_.getConfiguration(),a=!1,i=!0;r&&(a=void 0!==r.loop&&r.loop,i=void 0===r.allowSkipping||r.allowSkipping),(0,p.default)(t.element,n,a,i)}function s(e){var t=e.detail,n=t.element,r=(0,g.getToolState)(n,"stack");if(r&&r.data&&r.data.length){var a=r.data[0],i=_.getConfiguration(),o=!0;i&&void 0!==i.allowSkipping&&(o=i.allowSkipping);var s=Math.max(2,n.offsetHeight/Math.max(a.imageIds.length,8));i&&i.stackScrollSpeed&&(s=i.stackScrollSpeed);var l=(0,v.getToolOptions)(y,n),u=l.deltaY||0;if(u+=t.deltaPoints.page.y,Math.abs(u)>=s){var d=Math.round(u/s);(0,p.default)(n,d,!1,o),l.deltaY=u%s}else l.deltaY=u;(0,v.setToolOptions)(y,n,l),e.preventDefault(),e.stopPropagation()}}function l(e){var t=e.detail,n=P.getConfiguration();n&&n.testPointers(t)&&s(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.stackScrollMultiTouch=t.stackScrollTouchDrag=t.stackScrollWheel=t.stackScroll=void 0;var u=r(n("./events.js")),d=r(n("./imageTools/touchDragTool.js")),c=r(n("./imageTools/multiTouchDragTool.js")),f=r(n("./imageTools/simpleMouseButtonTool.js")),h=r(n("./imageTools/mouseWheelTool.js")),m=r(n("./util/isMouseButtonEnabled.js")),p=r(n("./util/scroll.js")),g=n("./stateManagement/toolState.js"),v=n("./toolOptions.js"),y="stackScroll",b="stackScrollTouchDrag",_=(0,f.default)(i,y),w=(0,h.default)(o),E={eventData:{deltaY:0}},x=(0,d.default)(s,b,E),T={testPointers:function e(t){return t.numPointers>=3}},P=(0,c.default)(l,E);P.setConfiguration(T),t.stackScroll=_,t.stackScrollWheel=w,t.stackScrollTouchDrag=x,t.stackScrollMultiTouch=P},"./stackTools/stackScrollKeyboard.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail,n=t.keyCode;if(n===o.UP||n===o.DOWN){var r=1;n===o.DOWN&&(r=-1),(0,i.default)(t.element,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n("./util/scroll.js")),o={UP:38,DOWN:40},s=(0,r(n("./imageTools/keyboardTool.js")).default)(a);t.default=s},"./stateManagement/appState.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={imageIdToolState:l.globalImageIdSpecificToolStateManager.saveToolState(),elementToolState:{},elementViewport:{}};return e.forEach(function(e){var n=(0,u.getElementToolStateManager)(e);n!==l.globalImageIdSpecificToolStateManager&&(t.elementToolState[e.id]=n.saveToolState(),t.elementViewport[e.id]=s.default.cornerstone.getViewport(e))}),t}function i(e){if(e.hasOwnProperty("imageIdToolState")&&e.hasOwnProperty("elementToolState")&&e.hasOwnProperty("elementViewport")){var t=s.default.cornerstone;return l.globalImageIdSpecificToolStateManager.restoreToolState(e.imageIdToolState),(0,o.default)(e.elementViewport).forEach(function(n){var r=document.getElementById(n);if(r&&e.elementToolState.hasOwnProperty(n)){var a=(0,u.getElementToolStateManager)(r);if(a!==l.globalImageIdSpecificToolStateManager){a.restoreToolState(e.elementToolState[n]);var i=e.elementViewport[n];t.setViewport(r,i),t.updateImage(r)}}}),e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("../node_modules/babel-runtime/core-js/object/keys.js")),s=r(n("./externalModules.js")),l=n("./stateManagement/imageIdSpecificStateManager.js"),u=n("./stateManagement/toolState.js"),d={save:a,restore:i};t.default=d},"./stateManagement/frameOfReferenceStateManager.js":function(e,t,n){"use strict";function r(){function e(e,t,n){!1===r.hasOwnProperty(e)&&(r[e]={});var a=r[e];!1===a.hasOwnProperty(t)&&(a[t]={data:[]}),a[t].data.push(n)}function t(e,t){if(!1!==r.hasOwnProperty(e)){var n=r[e];if(!1!==n.hasOwnProperty(t))return n[t]}}function n(e,t,n){if(!1!==r.hasOwnProperty(e)){var a=r[e];if(!1!==a.hasOwnProperty(t)){for(var i=a[t],o=-1,s=0;s<i.data.length;s++)i.data[s]===n&&(o=s);-1!==o&&i.data.splice(o,1)}}}var r={};return{get:t,add:e,remove:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=r();t.newFrameOfReferenceSpecificToolStateManager=r,t.globalFrameOfReferenceSpecificToolStateManager=a},"./stateManagement/freehandToolColors.js":function(e,t,n){"use strict";function r(){return i[o]}function a(){return++o>=i.length&&(o=0),r()}Object.defineProperty(t,"__esModule",{value:!0});var i=["cornflowerblue","firebrick","goldenrod","blueviolet","indianred","orange","mediumturquoise","lightcoral","khaki","darkmagenta","lightseagreen","tomato","aquamarine","darksalmon","moccasin","orchid","skyblue","peru"],o=i.length,s={getCurrentColor:r,getNextColor:a};t.default=s},"./stateManagement/imageIdSpecificStateManager.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){function e(e){return l[e]}function t(e,t){l[e]=t}function n(){return l}function r(e){l=e}function a(e,t,n){var r=i.default.cornerstone.getEnabledElement(e);r.image&&!1!==l.hasOwnProperty(r.image.imageId)||(l[r.image.imageId]={});var a=l[r.image.imageId];!1===a.hasOwnProperty(t)&&(a[t]={data:[]}),a[t].data.push(n)}function o(e,t){var n=i.default.cornerstone.getEnabledElement(e);if(n.image&&!1!==l.hasOwnProperty(n.image.imageId)){var r=l[n.image.imageId];if(!1!==r.hasOwnProperty(t))return r[t]}}function s(e){var t=i.default.cornerstone.getEnabledElement(e);t.image&&!1!==l.hasOwnProperty(t.image.imageId)&&delete l[t.image.imageId]}var l={};return{get:o,add:a,clear:s,saveImageIdToolState:e,restoreImageIdToolState:t,saveToolState:n,restoreToolState:r,toolState:l}}Object.defineProperty(t,"__esModule",{value:!0}),t.globalImageIdSpecificToolStateManager=t.newImageIdSpecificToolStateManager=void 0;var i=r(n("./externalModules.js")),o=a();t.newImageIdSpecificToolStateManager=a,t.globalImageIdSpecificToolStateManager=o},"./stateManagement/loadHandlerManager.js":function(e,t,n){"use strict";function r(e){u=e}function a(){return u}function i(e){d=e}function o(){return d}function s(e){c=e}function l(){return c}Object.defineProperty(t,"__esModule",{value:!0});var u=void 0,d=void 0,c=void 0,f={setStartLoadHandler:r,getStartLoadHandler:a,setEndLoadHandler:i,getEndLoadHandler:o,setErrorLoadingHandler:s,getErrorLoadingHandler:l};t.default=f},"./stateManagement/stackSpecificStateManager.js":function(e,t,n){"use strict";function r(e,t){function n(){return o}function r(e){o=e}function a(n,r,a){if(!(e.indexOf(r)>=0))return t.add(n,r,a);!1===o.hasOwnProperty(r)&&(o[r]={data:[]}),o[r].data.push(a)}function i(n,r){return e.indexOf(r)>=0?(!1===o.hasOwnProperty(r)&&(o[r]={data:[]}),o[r]):t.get(n,r)}var o={};return{get:i,add:a,saveToolState:n,restoreToolState:r,toolState:o}}function a(e,t){var n=(0,o.getElementToolStateManager)(e);n||(n=i.globalImageIdSpecificToolStateManager);var a=["stack","stackPrefetch","playClip","volume","slab","referenceLines","crosshairs","stackRenderer"];t&&(a=a.concat(t));var l=r(a,n);s.push(l),(0,o.setElementToolStateManager)(e,l)}Object.defineProperty(t,"__esModule",{value:!0}),t.addStackStateManager=t.newStackSpecificToolStateManager=t.stackSpecificStateManager=void 0;var i=n("./stateManagement/imageIdSpecificStateManager.js"),o=n("./stateManagement/toolState.js"),s=[],l={newStackSpecificToolStateManager:r,addStackStateManager:a};t.stackSpecificStateManager=l,t.newStackSpecificToolStateManager=r,t.addStackStateManager=a},"./stateManagement/textStyle.js":function(e,t,n){"use strict";function r(e){d=e}function a(){return d}function i(e){u=e}function o(){return u}function s(e){c=e}function l(){return c}Object.defineProperty(t,"__esModule",{value:!0});var u=15,d=u+"px Arial",c="transparent",f={setFont:r,getFont:a,setFontSize:i,getFontSize:o,setBackgroundColor:s,getBackgroundColor:l};t.default=f},"./stateManagement/timeSeriesSpecificStateManager.js":function(e,t,n){"use strict";function r(e,t){function n(n,r,i){if(!(e.indexOf(r)>=0))return t.add(n,r,i);!1===a.hasOwnProperty(r)&&(a[r]={data:[]}),a[r].data.push(i)}function r(n,r){return e.indexOf(r)>=0?(!1===a.hasOwnProperty(r)&&(a[r]={data:[]}),a[r]):t.get(n,r)}var a={};return{get:r,add:n}}function a(e,t){t=t||["timeSeries"];var n=(0,o.getElementToolStateManager)(e);void 0===n&&(n=i.globalImageIdSpecificToolStateManager);var a=r(t,n);s.push(a),(0,o.setElementToolStateManager)(e,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.newTimeSeriesSpecificToolStateManager=t.addTimeSeriesStateManager=void 0;var i=n("./stateManagement/imageIdSpecificStateManager.js"),o=n("./stateManagement/toolState.js"),s=[];t.addTimeSeriesStateManager=a,t.newTimeSeriesSpecificToolStateManager=r},"./stateManagement/toolColors.js":function(e,t,n){"use strict";function r(e){f=e}function a(){return f}function i(e){d=e}function o(){return d}function s(e){c=e}function l(){return c}function u(e){return e.color?e.color:e.active?c:d}Object.defineProperty(t,"__esModule",{value:!0});var d="white",c="greenyellow",f="transparent",h={setFillColor:r,getFillColor:a,setToolColor:i,getToolColor:o,setActiveColor:s,getActiveColor:l,getColorIfActive:u};t.default=h},"./stateManagement/toolCoordinates.js":function(e,t,n){"use strict";function r(e){i=e.currentPoints.canvas}function a(){return i}Object.defineProperty(t,"__esModule",{value:!0});var i=void 0,o={setCoords:r,getCoords:a};t.default=o},"./stateManagement/toolState.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=c.default.cornerstone.getEnabledElement(e);return void 0===t.toolStateManager&&(t.toolStateManager=f.globalImageIdSpecificToolStateManager),t.toolStateManager}function i(e,t,n){a(e).add(e,t,n);var r=d.default.MEASUREMENT_ADDED,i={toolType:t,element:e,measurementData:n};(0,h.default)(e,r,i)}function o(e,t){return a(e).get(e,t)}function s(e,t,n){for(var r=a(e).get(e,t),i=-1,o=0;o<r.data.length;o++)r.data[o]===n&&(i=o);if(-1!==i){r.data.splice(i,1);var s=d.default.MEASUREMENT_REMOVED,l={toolType:t,element:e,measurementData:n};(0,h.default)(e,s,l)}}function l(e,t){var n=a(e).get(e,t);void 0!==n&&(n.data=[])}function u(e,t){c.default.cornerstone.getEnabledElement(e).toolStateManager=t}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementToolStateManager=t.setElementToolStateManager=t.clearToolState=t.removeToolState=t.getToolState=t.addToolState=void 0;var d=r(n("./events.js")),c=r(n("./externalModules.js")),f=n("./stateManagement/imageIdSpecificStateManager.js"),h=r(n("./util/triggerEvent.js"));t.addToolState=i,t.getToolState=o,t.removeToolState=s,t.clearToolState=l,t.setElementToolStateManager=u,t.getElementToolStateManager=a},"./stateManagement/toolStyle.js":function(e,t,n){"use strict";function r(e){s=e}function a(){return s}function i(e){l=e}function o(){return l}Object.defineProperty(t,"__esModule",{value:!0});var s=1,l=2,u={setToolWidth:r,getToolWidth:a,setActiveWidth:i,getActiveWidth:o};t.default=u},"./synchronization/Synchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function i(e,t){function n(e,t){h.length&&m.length&&(p=!0,m.forEach(function(n){var r=m.indexOf(n);if(-1!==r){var a=g.imageIds.targetElements[r],i=h.indexOf(e);if(-1!==i){var o=g.imageIds.sourceElements[i],s=void 0;o===a?s=0:void 0!==g.distances[o]&&(s=g.distances[o][a]),v(f,e,n,t,s)}}}),p=!1)}function r(e){var t=e.detail;!0!==p&&n(e.currentTarget,t)}function i(e){var t=e.detail.element;f.remove(t),(0,d.clearToolOptionsByElement)(t)}var c=l.default.cornerstone,f=this,h=[],m=[],p=!1,g={},v=t;this.setHandler=function(e){v=e},this.getHandler=function(){return v},this.getDistances=function(){h.length&&m.length&&(g.distances={},g.imageIds={sourceElements:[],targetElements:[]},h.forEach(function(e){var t=c.getEnabledElement(e);if(t&&t.image){var n=t.image.imageId,r=c.metaData.get("imagePlaneModule",n);if(r&&r.imagePositionPatient){var a=(0,u.default)(r.imagePositionPatient);g.hasOwnProperty(t)||(g.distances[n]={},g.imageIds.sourceElements.push(n),m.forEach(function(t){var r=c.getEnabledElement(t);if(r&&r.image){var i=r.image.imageId;if(g.imageIds.targetElements.push(i),e!==t&&n!==i&&!g.distances[n].hasOwnProperty(i)){var o=c.metaData.get("imagePlaneModule",i);if(o&&o.imagePositionPatient){var s=(0,u.default)(o.imagePositionPatient);g.distances[n][i]=s.clone().sub(a)}}}}),(0,o.default)(g.distances[n]).length||delete g.distances[n])}}}))},this.addSource=function(t){-1===h.indexOf(t)&&(h.push(t),e.split(" ").forEach(function(e){t.addEventListener(e,r)}),f.getDistances(),f.updateDisableHandlers())},this.addTarget=function(e){-1===m.indexOf(e)&&(m.push(e),f.getDistances(),v(f,e,e,0),f.updateDisableHandlers())},this.add=function(e){f.addSource(e),f.addTarget(e)},this.removeSource=function(t){var a=h.indexOf(t);-1!==a&&(h.splice(a,1),e.split(" ").forEach(function(e){t.removeEventListener(e,r)}),f.getDistances(),n(t),f.updateDisableHandlers())},this.removeTarget=function(e){var t=m.indexOf(e);-1!==t&&(m.splice(t,1),f.getDistances(),v(f,e,e,0),f.updateDisableHandlers())},this.remove=function(e){f.removeTarget(e),f.removeSource(e)},this.getSourceElements=function(){return h},this.getTargetElements=function(){return m},this.displayImage=function(e,t,n){p=!0,c.displayImage(e,t,n),p=!1},this.setViewport=function(e,t){p=!0,c.setViewport(e,t),p=!1},this.updateDisableHandlers=function(){a(h.concat(m)).forEach(function(e){e.removeEventListener(s.default.ELEMENT_DISABLED,i),e.addEventListener(s.default.ELEMENT_DISABLED,i)})},this.destroy=function(){a(h.concat(m)).forEach(function(e){f.remove(e)})}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n("../node_modules/babel-runtime/core-js/object/keys.js")),s=r(n("./events.js")),l=r(n("./externalModules.js")),u=r(n("./util/convertToVector3.js")),d=n("./toolOptions.js");t.default=i},"./synchronization/panZoomSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,i=r.getViewport(t),o=r.getViewport(n);o.scale===i.scale&&o.translation.x===i.translation.x&&o.translation.y===i.translation.y||(o.scale=i.scale,o.translation.x=i.translation.x,o.translation.y=i.translation.y,e.setViewport(n,o))}};var a=r(n("./externalModules.js"))},"./synchronization/stackImageIndexSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,l=(0,i.getToolState)(t,"stack").data[0],u=(0,i.getToolState)(n,"stack").data[0],d=l.currentImageIdIndex;if((d=(0,s.default)(d,0,u.imageIds.length-1))!==u.currentImageIdIndex){var c=o.default.getStartLoadHandler(),f=o.default.getEndLoadHandler(),h=o.default.getErrorLoadingHandler();c&&c(n);var m=void 0;(m=!0===u.preventCache?r.loadImage(u.imageIds[d]):r.loadAndCacheImage(u.imageIds[d])).then(function(t){var a=r.getViewport(n);u.currentImageIdIndex=d,e.displayImage(n,t,a),f&&f(n,t)},function(e){var t=u.imageIds[d];h&&h(n,t,e)})}}};var a=r(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=r(n("./stateManagement/loadHandlerManager.js")),s=r(n("./util/clip.js"))},"./synchronization/stackImagePositionOffsetSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,l){if(n!==t){var u=a.default.cornerstone,d=u.getEnabledElement(t),c=u.metaData.get("imagePlaneModule",d.image.imageId);if(void 0!==c&&void 0!==c.imagePositionPatient){var f=(0,s.default)(c.imagePositionPatient),h=(0,i.getToolState)(n,"stack").data[0],m=Number.MAX_VALUE,p=-1;if(l){var g=f.clone().add(l);if(h.imageIds.forEach(function(e,t){var n=u.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var r=(0,s.default)(n.imagePositionPatient),a=g.distanceToSquared(r);a<m&&(m=a,p=t)}}),p!==h.currentImageIdIndex&&-1!==p){var v=o.default.getStartLoadHandler(),y=o.default.getEndLoadHandler(),b=o.default.getErrorLoadingHandler();h.currentImageIdIndex=p;var _=h.imageIds[p];v&&v(n);var w=void 0;(w=!0===h.preventCache?u.loadImage(_):u.loadAndCacheImage(_)).then(function(t){var r=u.getViewport(n);h.currentImageIdIndex===p&&(e.displayImage(n,t,r),y&&y(n,t))},function(e){var t=h.imageIds[p];b&&b(n,t,e)})}}}}};var a=r(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=r(n("./stateManagement/loadHandlerManager.js")),s=r(n("./util/convertToVector3.js"))},"./synchronization/stackImagePositionSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,l=r.getEnabledElement(t).image,u=r.metaData.get("imagePlaneModule",l.imageId);if(void 0!==u&&void 0!==u.imagePositionPatient){var d=(0,s.default)(u.imagePositionPatient),c=(0,i.getToolState)(n,"stack").data[0],f=Number.MAX_VALUE,h=-1;if(c.imageIds.forEach(function(e,t){var n=r.metaData.get("imagePlaneModule",e);if(void 0!==n&&void 0!==n.imagePositionPatient){var a=(0,s.default)(n.imagePositionPatient).distanceToSquared(d);a<f&&(f=a,h=t)}}),h!==c.currentImageIdIndex){var m=o.default.getStartLoadHandler(),p=o.default.getEndLoadHandler(),g=o.default.getErrorLoadingHandler();c.currentImageIdIndex=h;var v=c.imageIds[h];if(m&&m(n),-1!==h){var y=void 0;(y=!0===c.preventCache?r.loadImage(v):r.loadAndCacheImage(v)).then(function(t){var a=r.getViewport(n);c.currentImageIdIndex===h&&(e.displayImage(n,t,a),p&&p(n,t))},function(e){var t=c.imageIds[h];g&&g(n,t,e)})}}}}};var a=r(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=r(n("./stateManagement/loadHandlerManager.js")),s=r(n("./util/convertToVector3.js"))},"./synchronization/stackScrollSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){if(t!==n&&r&&r.direction){var l=a.default.cornerstone,u=(0,i.getToolState)(n,"stack").data[0],d=u.currentImageIdIndex+r.direction;if(d=(0,s.default)(d,0,u.imageIds.length-1),u.currentImageIdIndex!==d){var c=o.default.getStartLoadHandler(),f=o.default.getEndLoadHandler(),h=o.default.getErrorLoadingHandler();u.currentImageIdIndex=d;var m=u.imageIds[d];c&&c(n);var p=void 0;(p=!0===u.preventCache?l.loadImage(m):l.loadAndCacheImage(m)).then(function(t){var r=l.getViewport(n);u.currentImageIdIndex===d&&(e.displayImage(n,t,r),f&&f(n,t))},function(e){var t=u.imageIds[d];h&&h(n,t,e)})}}};var a=r(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=r(n("./stateManagement/loadHandlerManager.js")),s=r(n("./util/clip.js"))},"./synchronization/updateImageSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){n!==t&&a.default.cornerstone.updateImage(n)};var a=r(n("./externalModules.js"))},"./synchronization/wwwcSynchronizer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(n!==t){var r=a.default.cornerstone,i=r.getViewport(t),o=r.getViewport(n);o.voi.windowWidth===i.voi.windowWidth&&o.voi.windowCenter===i.voi.windowCenter&&o.invert===i.invert||(o.voi.windowWidth=i.voi.windowWidth,o.voi.windowCenter=i.voi.windowCenter,o.invert=i.invert,e.setViewport(n,o))}};var a=r(n("./externalModules.js"))},"./timeSeriesTools/incrementTimePoint.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=(0,i.getToolState)(e,"timeSeries");if(r&&r.data&&r.data.length){var l=a.default.cornerstone,u=r.data[0],d=u.stacks[u.currentStackIndex].currentImageIdIndex,c=u.currentStackIndex+t;if(n?(c>=u.stacks.length&&(c=0),c<0&&(c=u.stacks.length-1)):c=(0,s.default)(c,0,u.stacks.length-1),c!==u.currentStackIndex){var f=l.getViewport(e),h=u.stacks[c],m=o.default.getStartLoadHandler(),p=o.default.getEndLoadHandler(),g=o.default.getErrorLoadingHandler();m&&m(e);var v=void 0;(v=!0===h.preventCache?l.loadImage(h.imageIds[d]):l.loadAndCacheImage(h.imageIds[d])).then(function(t){u.currentImageIdIndex!==d&&(h.currentImageIdIndex=d,u.currentStackIndex=c,l.displayImage(e,t,f),p&&p(e,t))},function(t){var n=h.imageIds[d];g&&g(e,n,t)})}}};var a=r(n("./externalModules.js")),i=n("./stateManagement/toolState.js"),o=r(n("./stateManagement/loadHandlerManager.js")),s=r(n("./util/clip.js"))},"./timeSeriesTools/probeTool4D.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=s.default.cornerstone,n=[];e.timeSeries.stacks.forEach(function(r){var a=void 0;(a=!0===r.preventCache?t.loadImage(r.imageIds[e.imageIdIndex]):t.loadAndCacheImage(r.imageIds[e.imageIdIndex])).then(function(t){var r=Math.round(e.handles.end.x)+Math.round(e.handles.end.y)*t.width,a=t.getPixelData()[r];n.push(a)})}),e.lineSample.set(n)}function i(e){var t=(0,d.getToolState)(e.element,"timeSeries");if(void 0!==t&&void 0!==t.data&&0!==t.data.length){var n=t.data[0],r={timeSeries:n,lineSample:new f.default,imageIdIndex:n.stacks[n.currentStackIndex].currentImageIdIndex,visible:!0,handles:{end:{x:e.currentPoints.image.x,y:e.currentPoints.image.y,highlight:!0,active:!0}}};return a(r),c.default.add(r),r}}function o(e){var t=s.default.cornerstone,n=e.detail,r=(0,d.getToolState)(e.currentTarget,g);if(r){var a=n.canvasContext;a.setTransform(1,0,0,1,0,0);for(var i="white",o=h.default.getFont(),l=function e(s){(0,p.draw)(a,function(e){var a=r.data[s];(0,p.path)(e,{},function(e){(0,u.default)(e,n,a.handles,i)}),e.font=o;var l={x:a.handles.end.x+3,y:a.handles.end.y-3},d=t.pixelToCanvas(n.element,l);e.fillStyle=i,(0,m.default)(e,a.handles.end.x+", "+a.handles.end.y,d.x,d.y,i)})},c=0;c<r.data.length;c++)l(c)}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n("./externalModules.js")),l=r(n("./imageTools/mouseButtonTool.js")),u=r(n("./manipulators/drawHandles.js")),d=n("./stateManagement/toolState.js"),c=r(n("./measurementManager/measurementManager.js")),f=r(n("./measurementManager/lineSampleMeasurement.js")),h=r(n("./stateManagement/textStyle.js")),m=r(n("./util/drawTextBox.js")),p=n("./util/drawing.js"),g="probe4D",v=(0,l.default)({createNewMeasurement:i,onImageRendered:o,toolType:g});t.default=v},"./timeSeriesTools/timeSeriesPlayer.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(void 0===e)throw new Error("playClip: element must not be undefined");void 0===t&&(t=30);var n=(0,o.getToolState)(e,"timeSeries");if(void 0!==n&&void 0!==n.data&&0!==n.data.length){var r=(0,o.getToolState)(e,l),a=void 0;void 0===r||0===r.data.length?(a={intervalId:void 0,framesPerSecond:t,lastFrameTimeStamp:void 0,frameRate:0},(0,o.addToolState)(e,l,a)):(a=r.data[0]).framesPerSecond=t,void 0===a.intervalId&&(a.intervalId=setInterval(function(){a.framesPerSecond>0?(0,s.default)(e,1,!0):(0,s.default)(e,-1,!0)},1e3/Math.abs(a.framesPerSecond)))}}function i(e){var t=(0,o.getToolState)(e,l);if(t&&t.data&&t.data.length){var n=t.data[0];clearInterval(n.intervalId),n.intervalId=void 0}}Object.defineProperty(t,"__esModule",{value:!0});var o=n("./stateManagement/toolState.js"),s=r(n("./timeSeriesTools/incrementTimePoint.js")),l="timeSeriesPlayer",u={start:a,stop:i};t.default=u},"./timeSeriesTools/timeSeriesScroll.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.detail.element;t.removeEventListener(u.default.MOUSE_DRAG,o),t.removeEventListener(u.default.MOUSE_UP,a),t.removeEventListener(u.default.MOUSE_CLICK,a)}function i(e){var t=e.detail,n=t.element,r=(0,g.getToolOptions)(v,n);if((0,m.default)(t.which,r.mouseButtonMask))return r.deltaY=0,(0,g.setToolOptions)(v,n,r),n.addEventListener(u.default.MOUSE_DRAG,o),n.addEventListener(u.default.MOUSE_UP,a),n.addEventListener(u.default.MOUSE_CLICK,a),e.stopImmediatePropagation(),!1}function o(e){var t=e.detail,n=t.element;e.data.deltaY+=t.deltaPoints.page.y;var r=(0,p.getToolState)(t.element,"timeSeries");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){var a=r.data[0],i=n.offsetHeight/a.stacks.length;if(void 0!==e.data.options&&void 0!==e.data.options.timeSeriesScrollSpeed&&(i=e.data.options.timeSeriesScrollSpeed),e.data.deltaY>=i||e.data.deltaY<=-i){var o=Math.round(e.data.deltaY/i),s=e.data.deltaY%i;(0,h.default)(t.element,o),e.data.deltaY=s}return!1}}function s(e){var t=e.detail,n=-t.direction;(0,h.default)(t.element,n)}function l(e){var t=e.originalEvent.detail,n={deltaY:0};n.deltaY+=t.deltaPoints.page.y;var r=(0,p.getToolState)(t.element,"stack");if(void 0!==r&&void 0!==r.data&&0!==r.data.length){if(n.deltaY>=3||n.deltaY<=-3){var a=n.deltaY/3,i=n.deltaY%3;(0,h.default)(n.element,a),n.deltaY=i}return!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.timeSeriesScrollTouchDrag=t.timeSeriesScrollWheel=t.timeSeriesScroll=void 0;var u=r(n("./events.js")),d=r(n("./imageTools/simpleMouseButtonTool.js")),c=r(n("./imageTools/touchDragTool.js")),f=r(n("./imageTools/mouseWheelTool.js")),h=r(n("./timeSeriesTools/incrementTimePoint.js")),m=r(n("./util/isMouseButtonEnabled.js")),p=n("./stateManagement/toolState.js"),g=n("./toolOptions.js"),v="timeSeriesScroll",y=(0,d.default)(i,v),b=(0,f.default)(s),_=(0,c.default)(l);t.timeSeriesScroll=y,t.timeSeriesScrollWheel=b,t.timeSeriesScrollTouchDrag=_},"./toolOptions.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!d[e])return{};var n=d[e].find(function(e){return e.element===t});return n?n.options:{}}function i(e,t,n){if(d[e]){var r=d[e].findIndex(function(e){return e.element===t});if(-1===r)d[e].push({element:t,options:n});else{var a=d[e][r].options||{};d[e][r].options=(0,u.default)(a,n)}}else d[e]=[{element:t,options:n}]}function o(e,t){var n=d[e];n&&(d[e]=n.filter(function(e){return e.element!==t}))}function s(e){delete d[e]}function l(e){for(var t in d)d[t]=d[t].filter(function(t){return t.element!==e})}Object.defineProperty(t,"__esModule",{value:!0}),t.clearToolOptionsByElement=t.clearToolOptionsByToolType=t.clearToolOptions=t.setToolOptions=t.getToolOptions=void 0;var u=r(n("../node_modules/babel-runtime/core-js/object/assign.js")),d={};t.getToolOptions=a,t.setToolOptions=i,t.clearToolOptions=o,t.clearToolOptionsByToolType=s,t.clearToolOptionsByElement=l},"./util/calculateEllipseStatistics.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=0,r=0,i=0,o=0,s=t.top;s<t.top+t.height;s++)for(var l=t.left;l<t.left+t.width;l++){var u={x:l,y:s};(0,a.default)(t,u)&&(n+=e[o],r+=e[o]*e[o],i++),o++}if(0===i)return{count:i,mean:0,variance:0,stdDev:0};var d=n/i,c=r/i-d*d;return{count:i,mean:d,variance:c,stdDev:Math.sqrt(c)}};var a=r(n("./util/pointInEllipse.js"))},"./util/calculateSUV.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return parseFloat("."+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=i.default.cornerstone,r=n.metaData.get("patientStudyModule",e.imageId),o=n.metaData.get("generalSeriesModule",e.imageId);if(r&&o&&"PT"===o.modality){var s=t*e.slope+e.intercept,l=r.patientWeight;if(l){var u=n.metaData.get("petIsotopeModule",e.imageId);if(u){var d=u.radiopharmaceuticalInfo,c=d.radiopharmaceuticalStartTime,f=d.radionuclideTotalDose,h=d.radionuclideHalfLife,m=o.seriesTime;if(c&&f&&h&&m){var p=a(m.fractionalSeconds||0)+m.seconds+60*m.minutes+60*m.hours*60-(a(c.fractionalSeconds)+c.seconds+60*c.minutes+60*c.hours*60);return s*l/(f*Math.exp(-p*Math.log(2)/h))*1e3}}}}};var i=r(n("./externalModules.js"))},"./util/clip.js":function(e,t,n){"use strict";function r(e,t,n){return Math.min(Math.max(t,e),n)}function a(e,t){e.x=r(e.x,0,t.width),e.y=r(e.y,0,t.height)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,t.clipToBox=a},"./util/convertToVector3.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=i.default.cornerstoneMath;return e instanceof t.Vector3?e:new t.Vector3(e[0],e[1],e[2])}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n("./externalModules.js"))},"./util/copyPoints.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return{page:a.default.cornerstoneMath.point.copy(e.page),image:a.default.cornerstoneMath.point.copy(e.image),client:a.default.cornerstoneMath.point.copy(e.client),canvas:a.default.cornerstoneMath.point.copy(e.canvas)}};var a=r(n("./externalModules.js"))},"./util/drawArrow.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){var o=10,s=Math.atan2(n.y-t.y,n.x-t.x),l={color:a,lineWidth:i};(0,r.drawLine)(e,void 0,t,n,l,"canvas"),l={color:a,lineWidth:i,fillStyle:a};var u=[{x:n.x-10*Math.cos(s-Math.PI/7),y:n.y-10*Math.sin(s-Math.PI/7)},{x:n.x-10*Math.cos(s+Math.PI/7),y:n.y-10*Math.sin(s+Math.PI/7)},n];(0,r.drawJoinedLines)(e,void 0,n,u,l,"canvas")};var r=n("./util/drawing.js")},"./util/drawCircle.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a){var i=6;(0,r.path)(e,{color:n,lineWidth:a},function(e){e.arc(t.x,t.y,6,0,2*Math.PI)})};var r=n("./util/drawing.js")},"./util/drawEllipse.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,i){var o=.5522848,s=a/2*o,l=i/2*o,u=t+a,d=n+i,c=t+a/2,f=n+i/2;(0,r.path)(e,{},function(e){e.moveTo(t,f),e.bezierCurveTo(t,f-l,c-s,n,c,n),e.bezierCurveTo(c+s,n,u,f-l,u,f),e.bezierCurveTo(u,f+l,c+s,d,c,d),e.bezierCurveTo(c-s,d,t,f+l,t,f)})};var r=n("./util/drawing.js")},"./util/drawLink.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,s){var l=e.length>0?a.default.cornerstoneMath.point.findClosestPoint(e,t):t,u=[{x:n.left+n.width/2,y:n.top},{x:n.left,y:n.top+n.height/2},{x:n.left+n.width/2,y:n.top+n.height},{x:n.left+n.width,y:n.top+n.height/2}],d=a.default.cornerstoneMath.point.findClosestPoint(u,l),c={color:o,lineWidth:s,lineDash:[2,3]};(0,i.drawLine)(r,void 0,l,d,c,"canvas")};var a=r(n("./externalModules.js")),i=n("./util/drawing.js")},"./util/drawLinkedTextBox.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,s,l,u,d,c,f){var h=a.default.cornerstone,m=h.pixelToCanvas(t,n);c&&(m.x+=c);var p={centering:{x:!1,y:f}};if(n.boundingBox=(0,i.default)(e,r,m.x,m.y,u,p),n.hasMoved){var g=l(s).map(function(e){return h.pixelToCanvas(t,e)});(0,o.default)(g,m,n.boundingBox,e,u,d)}};var a=r(n("./externalModules.js")),i=r(n("./util/drawTextBox.js")),o=r(n("./util/drawLink.js"))},"./util/drawTextBox.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,o,s){"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]);var l=5,u=a.default.getFontSize(),d=a.default.getBackgroundColor(),c=0;t.forEach(function(t){var n=e.measureText(t).width;c=Math.max(c,n)});var f={width:c+10,height:5+t.length*(u+5)};return(0,i.draw)(e,function(e){e.strokeStyle=o,s&&s.centering&&!0===s.centering.x&&(n-=f.width/2),s&&s.centering&&!0===s.centering.y&&(r-=f.height/2),f.left=n,f.top=r;var a=s&&!0===s.debug?"#FF0000":d;(0,i.fillBox)(e,f,a),(0,i.fillTextLines)(e,f,t,o,5)}),f};var a=r(n("./stateManagement/textStyle.js")),i=n("./util/drawing.js")},"./util/drawing.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.getContext("2d");return t.setTransform(1,0,0,1,0,0),t}function i(e,t){e.save(),t(e),e.restore()}function o(e,t,n){var r=t.color,a=t.lineWidth,i=t.fillStyle,o=t.lineDash;e.beginPath(),e.strokeStyle=r||e.strokeStyle,e.lineWidth=a||void 0===a&&v.toolStyle.getToolWidth()||e.lineWidth,o&&e.setLineDash(o),n(e),i&&(e.fillStyle=i,e.fill()),e.stroke(),o&&e.setLineDash([])}function s(e,t){t.shadow&&(e.shadowColor=t.shadowColor||"#000000",e.shadowOffsetX=t.shadowOffsetX||1,e.shadowOffsetY=t.shadowOffsetY||1)}function l(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,a,function(e){if("pixel"===i){var a=g.default.cornerstone;n=a.pixelToCanvas(t,n),r=a.pixelToCanvas(t,r)}e.moveTo(n.x,n.y),e.lineTo(r.x,r.y)})}function u(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"pixel";o(e,r,function(e){n.forEach(function(n){var r=n.start,i=n.end;if("pixel"===a){var o=g.default.cornerstone;r=o.pixelToCanvas(t,r),i=o.pixelToCanvas(t,i)}e.moveTo(r.x,r.y),e.lineTo(i.x,i.y)})})}function d(e,t,n,r,a){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel";o(e,a,function(e){if("pixel"===i){var a=g.default.cornerstone;n=a.pixelToCanvas(t,n),r=r.map(function(e){return a.pixelToCanvas(t,e)})}e.moveTo(n.x,n.y),r.forEach(function(t){var n=t.x,r=t.y;e.lineTo(n,r)})})}function c(e,t,n,r,a){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=g.default.cornerstone.pixelToCanvas(t,n)),o(e,a,function(e){e.arc(n.x,n.y,r,0,2*Math.PI)})}function f(e,t,n,r,a){"pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")&&(n=g.default.cornerstone.pixelToCanvas(t,n),r=g.default.cornerstone.pixelToCanvas(t,r));var i=Math.min(n.x,r.x),s=Math.min(n.y,r.y),l=Math.abs(n.x-r.x),u=Math.abs(n.y-r.y),d=.5522848,c=l/2*d,f=u/2*d,h=i+l,m=s+u,p=i+l/2,v=s+u/2;o(e,a,function(e){e.moveTo(i,v),e.bezierCurveTo(i,v-f,p-c,s,p,s),e.bezierCurveTo(p+c,s,h,v-f,h,v),e.bezierCurveTo(h,v+f,p+c,m,p,m),e.bezierCurveTo(p-c,m,i,v+f,i,v),e.closePath()})}function h(e,t,n,r,a){if("pixel"===(arguments.length>5&&void 0!==arguments[5]?arguments[5]:"pixel")){var i=g.default.cornerstone;n=i.pixelToCanvas(t,n),r=i.pixelToCanvas(t,r)}var s=Math.min(n.x,r.x),l=Math.min(n.y,r.y),u=Math.abs(n.x-r.x),d=Math.abs(n.y-r.y);o(e,a,function(e){e.rect(s,l,u,d)})}function m(e,t,n){e.fillStyle=n,e.fillRect(t.left,t.top,t.width,t.height)}function p(e,t,n,r,a){var i=v.textStyle.getFontSize();e.font=v.textStyle.getFont(),e.textBaseline="top",e.fillStyle=r,n.forEach(function(n,r){e.fillText(n,t.left+a,t.top+a+r*(i+a))})}Object.defineProperty(t,"__esModule",{value:!0}),t.getNewContext=a,t.draw=i,t.path=o,t.setShadow=s,t.drawLine=l,t.drawLines=u,t.drawJoinedLines=d,t.drawCircle=c,t.drawEllipse=f,t.drawRect=h,t.fillBox=m,t.fillTextLines=p;var g=r(n("./externalModules.js")),v=n("./index.js")},"./util/freehand/ClickedLineData.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ClickedLineData=void 0;var a=r(n("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=t.ClickedLineData=function e(t,n){(0,a.default)(this,e),this.toolIndex=t,this.handleIndexArray=n}},"./util/freehand/FreehandHandleData.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandHandleData=void 0;var a=r(n("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=t.FreehandHandleData=function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,a.default)(this,e),this.x=t.x,this.y=t.y,this.highlight=n,this.active=r,this.lines=[]}},"./util/freehand/FreehandLineFinder.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.FreehandLineFinder=void 0;var a=r(n("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=r(n("../node_modules/babel-runtime/helpers/createClass.js")),o=n("./stateManagement/toolState.js"),s=r(n("./externalModules.js")),l=n("./util/freehand/ClickedLineData.js"),u="freehand",d=10,c=t.FreehandLineFinder=function(){function e(t){(0,a.default)(this,e),this._eventData=t}return(0,i.default)(e,[{key:"findLine",value:function e(){var t=this.findTool();if(null===t)return null;var n=this._getCloseLinesInTool(t);return n?this._findCorrectLine(t,n):null}},{key:"findTool",value:function e(){return this._toolData=(0,o.getToolState)(this._eventData.element,u),this._mousePoint=this._eventData.currentPoints.canvas,this._toolData?this._nearestHandleToPointAllTools().toolIndex:null}},{key:"_nearestHandleToPointAllTools",value:function e(){for(var t=this._toolData,n={toolIndex:null,handleIndex:null,distance:1/0},r=0;r<t.data.length;r++){var a=this._nearestHandleToPoint(r);null!==a&&(a.distance<n.distance&&(n=a))}return n}},{key:"_nearestHandleToPoint",value:function e(t){var n=this._eventData,r=this._toolData.data[t];if(void 0===r.handles)return null;if(!1===r.visible)return null;for(var a={toolIndex:t,handleIndex:null,distance:1/0},i=0;i<r.handles.length;i++){var o=s.default.cornerstone.pixelToCanvas(n.element,r.handles[i]),l=s.default.cornerstoneMath.point.distance(o,this._mousePoint);l<a.distance&&(a.handleIndex=i,a.distance=l)}return a}},{key:"_getCloseLinesInTool",value:function t(n){for(var r=this._toolData.data[n].handles,a=[],i=0;i<r.length;i++){var o=e.getNextHandleIndex(i,r.length);this._distanceOfPointfromLine(r[i],r[o])<10&&a.push([i,o])}return a}},{key:"_findCorrectLine",value:function e(t,n){for(var r=0;r<n.length;r++)if(this._pointProjectsToLineSegment(t,n[r]))return new l.ClickedLineData(t,n[r]);return null}},{key:"_pointProjectsToLineSegment",value:function t(n,r){var a=this._eventData,i=this._toolData.data[n];if(void 0!==i.handles){if(!1===i.visible)return!1;var o=i.handles[r[0]],s=i.handles[r[1]],l=e.getCanvasPointsFromHandles(o,s,a.element),u=e.getLineAsVector(l),d=this._getLineOriginToMouseAsVector(l),c=(d[0]*u[0]+d[1]*u[1])/u.magnitude;return c>0&&c<u.magnitude}}},{key:"_getLineOriginToMouseAsVector",value:function e(t){return[this._mousePoint.x-t[0].x,this._mousePoint.y-t[0].y]}},{key:"_distanceOfPointfromLine",value:function e(t,n){var r=this._eventData,a=s.default.cornerstone.pixelToCanvas(r.element,t),i=s.default.cornerstone.pixelToCanvas(r.element,n),o=this._mousePoint;return Math.abs((i.y-a.y)*o.x-(i.x-a.x)*o.y+i.x*a.y-i.y*a.x)/s.default.cornerstoneMath.point.distance(a,i)}}],[{key:"getCanvasPointsFromHandles",value:function e(t,n,r){var a=[];return t.x<n.x?(a.push(s.default.cornerstone.pixelToCanvas(r,t)),a.push(s.default.cornerstone.pixelToCanvas(r,n))):(a.push(s.default.cornerstone.pixelToCanvas(r,n)),a.push(s.default.cornerstone.pixelToCanvas(r,t))),a}},{key:"getLineAsVector",value:function e(t){var n=[t[1].x-t[0].x,t[1].y-t[0].y];return n.magnitude=s.default.cornerstoneMath.point.distance(t[0],t[1]),n}},{key:"getNextHandleIndex",value:function e(t,n){var r=void 0;return r=t<n-1?t+1:0}}]),e}()},"./util/freehand/Sculpter.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Sculpter=void 0;var a=r(n("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=r(n("../node_modules/babel-runtime/helpers/createClass.js")),o=r(n("./externalModules.js")),s=n("./imageTools/freehandSculpter.js"),l=n("./util/freehand/FreehandHandleData.js"),u=n("./util/clip.js"),d=t.Sculpter=function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"sculpt",value:function e(t,n){this._setData(t,n),this._pushHandles(),this._insertNewHandles(),this._consolidateHandles()}},{key:"_setData",value:function e(t,n){var r=s.freehandSculpter.getConfiguration();this._eventData=t,this._element=t.element,this._image=t.image,this._mousePoint=t.currentPoints.image,this._dataHandles=n,this._toolSize=r.toolSizeImage,this._minSpacing=r.minSpacing,this._maxSpacing=r.maxSpacing}},{key:"_pushHandles",value:function e(){for(var t=this._dataHandles,n=this._mousePoint,r=this._toolSize,a=0;a<t.length;a++){var i=o.default.cornerstoneMath.point.distance(t[a],n);i<r&&this._pushOneHandle(a,i)}}},{key:"_pushOneHandle",value:function t(n,r){var a=this._dataHandles,i=a[n],o=this._mousePoint,s=this._toolSize,l={x:(i.x-o.x)/r,y:(i.y-o.y)/r},d={x:o.x+s*l.x,y:o.y+s*l.y};(0,u.clipToBox)(d,this._image),i.x=d.x,i.y=d.y;var c=e.getPreviousHandleIndex(n,a.length);a[c].lines.pop(),a[c].lines.push(i)}},{key:"_insertNewHandles",value:function e(){for(var t=this._findNewHandleIndicies(),n=0,r=0;r<t.length;r++){var a=t[r]+1+n;this._insertHandleRadially(a),n++}}},{key:"_findNewHandleIndicies",value:function t(){for(var n=this._dataHandles,r=[],a=0;a<n.length;a++){var i=o.default.cornerstone.pixelToCanvas(this._element,n[a]),s=e.getNextHandleIndex(a,n.length),l=o.default.cornerstone.pixelToCanvas(this._element,n[s]);o.default.cornerstoneMath.point.distance(i,l)>this._maxSpacing&&r.push(a)}return r}},{key:"_insertHandleRadially",value:function t(n){var r=this._dataHandles,a=n-1,i=e.getNextHandleIndexBeforeInsert(n,r.length),o=this._getInsertPosition(n,a,i),s=new l.FreehandHandleData(o);r.splice(n,0,s),r[a].lines.pop(),r[a].lines.push(r[n]),n===r.length-1?r[n].lines.push(r[0]):r[n].lines.push(r[n+1])}},{key:"_getInsertPosition",value:function e(t,n,r){var a=this._toolSize,i=this._mousePoint,s=this._dataHandles,l={x:(s[n].x+s[r].x)/2,y:(s[n].y+s[r].y)/2},d=o.default.cornerstoneMath.point.distance(i,l),c=void 0;if(d<a){var f={x:(l.x-i.x)/d,y:(l.y-i.y)/d};c={x:i.x+a*f.x,y:i.y+a*f.y}}else c=l;return(0,u.clipToBox)(c,this._image),c}},{key:"_consolidateHandles",value:function e(){if(this._dataHandles.length>3){var t=this._findCloseHandlePairs();this._mergeCloseHandles(t)}}},{key:"_mergeCloseHandles",value:function t(n){for(var r=0,a=0;a<n.length;a++){var i=e.getCorrectedPair(n[a],r);this._combineHandles(i),r++}var o=this._findCloseHandlePairs();o.length&&this._mergeCloseHandles(o)}},{key:"_findCloseHandlePairs",value:function t(){for(var n=this._dataHandles,r=this._element,a=[],i=n.length,s=0;s<i;s++){var l=o.default.cornerstone.pixelToCanvas(r,n[s]),u=e.getNextHandleIndex(s,n.length),d=o.default.cornerstone.pixelToCanvas(r,n[u]);if(o.default.cornerstoneMath.point.distance(l,d)<this._minSpacing){var c=[s,u];a.push(c),0===s&&(i-=1),s++}}return a}},{key:"_combineHandles",value:function t(n){var r=this._dataHandles,a={x:(r[n[0]].x+r[n[1]].x)/2,y:(r[n[0]].y+r[n[1]].y)/2};(0,u.clipToBox)(a,this._image),r[n[0]].x=a.x,r[n[0]].y=a.y;var i=e.getNextHandleIndex(n[1],r.length);r[n[0]].lines.pop(),r[n[0]].lines.push(r[i]),r.splice(n[1],1)}}],[{key:"getNextHandleIndex",value:function e(t,n){return t===n-1?0:t+1}},{key:"getNextHandleIndexBeforeInsert",value:function e(t,n){return t===n?0:t}},{key:"getPreviousHandleIndex",value:function e(t,n){return 0===t?n-1:t-1}},{key:"getCorrectedPair",value:function e(t,n){var r=[t[0]-n,t[1]-n];return r[1]<0&&(r[1]=0),r}}]),e}()},"./util/freehand/calculateFreehandStatistics.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){for(var r={value:0,squared:0,count:0},a=0,o=t.top;o<t.top+t.height;o++)for(var s=t.left;s<t.left+t.width;s++)i(n,{x:s,y:o},r,e[a]),a++;return r}function i(e,t,n,r){(0,o.default)(e,t)&&(n.value+=r,n.squared+=r*r,n.count++)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r={count:0,mean:0,variance:0,stdDev:0},i=a(e,t,n);return 0===i.count?r:(r.count=i.count,r.mean=i.value/i.count,r.variance=i.squared/i.count-r.mean*r.mean,r.stdDev=Math.sqrt(r.variance),r)};var o=r(n("./util/freehand/pointInFreehand.js"))},"./util/freehand/dragObject.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=o.freehand.getConfiguration();e.hasMoved=!0,e.x=t.mouseLocation.handles.start.x,e.y=t.mouseLocation.handles.start.y}function i(e,t){var n=o.freehand.getConfiguration();if(t.handles.invalidHandlePlacement=s.default.modify(t.handles,e),t.active=!0,t.highlight=!0,t.handles[e].x=n.mouseLocation.handles.start.x,t.handles[e].y=n.mouseLocation.handles.start.y,e){var r=t.handles[e-1].lines.length-1,a=t.handles[e-1].lines[r];a.x=n.mouseLocation.handles.start.x,a.y=n.mouseLocation.handles.start.y}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=o.freehand.getConfiguration();n.movingTextBox&&a(e),n.modifying&&i(e,t)};var o=n("./imageTools/freehand.js"),s=r(n("./util/freehand/freeHandIntersect.js"))},"./util/freehand/dropObject.js":function(e,t,n){"use strict";function r(e,t){var n=i.freehand.getConfiguration();n.movingTextBox=!1,t.data[n.currentTool].invalidated=!0,n.currentHandle=0,n.currentTool=-1}function a(e,t){var n=i.freehand.getConfiguration(),r=n.currentTool,a=t.data[r].handles;if(a.invalidHandlePlacement){var o=n.currentHandle,s=a[o],l=void 0;l=0===o?a[a.length-1]:a[o-1],s.x=n.dragOrigin.x,s.y=n.dragOrigin.y,l.lines[0]=s,a.invalidHandlePlacement=!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.detail,o=i.freehand.getConfiguration();return!0===o.movingTextBox?(r(n,t),"textBox"):o.modifying?(a(n,t),"handle"):null};var i=n("./imageTools/freehand.js")},"./util/freehand/freeHandArea.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=0,r=e.length-1;t=t||1;for(var a=0;a<e.length;a++)n+=(e[r].x+e[a].x)*(e[r].y-e[a].y),r=a;return Math.abs(n*t/2)}},"./util/freehand/freeHandIntersect.js":function(e,t,n){"use strict";function r(e,t){var n=t.length-1;return o(t,l(t[n]),l(e),[n])}function a(e){var t=e.length-1;return o(e,l(e[t]),l(e[0]),[t,0])}function i(e,t){var n=l(e[t]),r=t-1;0===t&&(r=e.length-1);var a=l(e[r]);return!!o(e,n,a,[t,r])||(r=t===e.length-1?0:t+1,a=l(e[r]),o(e,n,a,[t,r]))}function o(e,t,n,r){for(var a=e.length-1,i=0;i<e.length;i++)if(-1===r.indexOf(i)&&-1===r.indexOf(a)){if(s(t,n,l(e[a]),l(e[i])))return!0;a=i}else a=i;return!1}function s(e,t,n,r){var a=!1,i=[u(e,t,n),u(e,t,r),u(n,r,e),u(n,r,t)];return i[0]!==i[1]&&i[2]!==i[3]||(0===i[0]&&d(e,n,t)?a=!0:0===i[1]&&d(e,r,t)?a=!0:0===i[2]&&d(n,e,r)?a=!0:0===i[3]&&d(n,t,r)&&(a=!0),a)}function l(e){return{x:e.x,y:e.y}}function u(e,t,n){var r=(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y);return 0===r?0:r>0?1:2}function d(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}Object.defineProperty(t,"__esModule",{value:!0});var c={newHandle:r,end:a,modify:i};t.default=c},"./util/freehand/insertOrDelete.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,u.getToolState)(e.element,c);if(void 0!==n){var r=t.handleIndex,a=t.toolIndex,i=n.data[a];i.handles.length<=3||(r===i.handles.length-1?(i.handles[r-1].lines.pop(),i.handles[r-1].lines.push(i.handles[0])):0===r?(i.handles[i.handles.length-1].lines.pop(),i.handles[i.handles.length-1].lines.push(i.handles[r+1])):(i.handles[r-1].lines.pop(),i.handles[r-1].lines.push(i.handles[r+1])),i.handles.splice(r,1),i.invalidated=!0,i.active=!0,i.highlight=!0,d.default.cornerstone.updateImage(e.element))}}function i(e,t){var n=(0,u.getToolState)(e.element,c);if(void 0!==n){var r=n.data[t.toolIndex],a=o(t);if(a!==1/0){var i=new l.FreehandHandleData(e.currentPoints.image);r.handles.splice(a,0,i),r.handles[a-1].lines.pop(),r.handles[a-1].lines.push(e.currentPoints.image),a===r.handles.length-1?r.handles[a].lines.push(r.handles[0]):r.handles[a].lines.push(r.handles[a+1]),r.active=!0,r.highlight=!0,r.invalidated=!0,d.default.cornerstone.updateImage(e.element)}}}function o(e){for(var t=e.handleIndexArray,n=1/0,r=t.includes(0),a=0;a<t.length;a++){var i=t[a];0!==i&&i<n&&(n=i)}return r&&1===n&&(n=0),++n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.detail;if(t&&null!==t.handleNearby)a(n,{toolIndex:t.toolIndex,handleIndex:t.handleNearby});else{var r=new s.FreehandLineFinder(n).findLine();r&&i(n,r)}e.preventDefault(),e.stopPropagation()};var s=n("./util/freehand/FreehandLineFinder.js"),l=n("./util/freehand/FreehandHandleData.js"),u=n("./stateManagement/toolState.js"),d=r(n("./externalModules.js")),c="freehand"},"./util/freehand/keysHeld.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){o(e.detail)}function i(e){var t=e.detail,n=t.keyCode;s(t),n===d.N&&l.default.OHIF.RoiStateManagement.createNewVolume()}function o(e){var t=u.freehand.getConfiguration(),n=e.keyCode,r=!1;n===d.CTRL&&(t.keyDown.ctrl=!0,r=!0),n===d.SHIFT&&(t.keyDown.shift=!0),n===d.ALT&&(t.keyDown.alt=!0),r&&l.default.cornerstone.updateImage(e.element)}function s(e){var t=u.freehand.getConfiguration(),n=e.keyCode,r=!1;n===d.CTRL&&(t.keyDown.ctrl=!1,r=!0),n===d.SHIFT&&(t.keyDown.shift=!1),n===d.ALT&&(t.keyDown.alt=!1),r&&l.default.cornerstone.updateImage(e.element)}Object.defineProperty(t,"__esModule",{value:!0}),t.keyDownCallback=a,t.keyUpCallback=i;var l=r(n("./externalModules.js")),u=n("./imageTools/freehand.js"),d={SHIFT:16,CTRL:17,ALT:18,N:78}},"./util/freehand/pointInFreehand.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t<e&&e<n||n<e&&e<t}function i(e,t,n){if(t.x>e.x&&n.x>e.x)return!0;if(t.x===n.x)return e.x<t.x;if(t.x>n.x){var r=t;t=n,n=r}var a=o(e,t,n);return(0,l.default)(a.gradient)*e.y>a.value}function o(e,t,n){var r=(n.y-t.y)/(n.x-t.x);return{value:t.x+r*(e.x-t.x),gradient:r}}function s(e,t,n){return!(!a(e.y,t.y,n.y)||!i(e,t,n))}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n("../node_modules/babel-runtime/core-js/math/sign.js"));t.default=function(e,t){for(var n=!1,r=e.length-1,a=0;a<e.length;a++)s(t,e[a],e[r])&&(n=!n),r=a;return n}},"./util/getLuminance.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){if(!e)throw new Error("getLuminance: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=a.default.cornerstone.getEnabledElement(e).image,s=[],l=0,u=o.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.color)for(c=0;c<i;c++)for(f=0;f<r;f++){var h=u[d=4*((c+n)*o.columns+(f+t))],m=u[d+1],p=u[d+2];s[l++]=.2126*h+.7152*m+.0722*p}else for(c=0;c<i;c++)for(f=0;f<r;f++)d=(c+n)*o.columns+(f+t),s[l++]=u[d]*o.slope+o.intercept;return s};var a=r(n("./externalModules.js"))},"./util/getMaxSimultaneousRequests.js":function(e,t,n){"use strict";function r(){var e=navigator.userAgent,t=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],n=void 0;return/trident/i.test(t[1])?"IE "+((n=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===t[1]&&null!==(n=e.match(/\b(OPR|Edge)\/(\d+)/))?n.slice(1).join(" ").replace("OPR","Opera"):(t=t[2]?[t[1],t[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(n=e.match(/version\/(\d+)/i))&&t.splice(1,1,n[1]),t.join(" "))}function a(e){l=e}function i(){return l||o()}function o(){var e=r().split(" "),t=e[0],n=e[1],a=u[t];return a?a[n]?a[n]:a.default:u.default}function s(){return new RegExp("Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini").test(navigator.userAgent)}Object.defineProperty(t,"__esModule",{value:!0});var l=void 0,u={default:6,IE:{9:6,10:8,default:8},Firefox:{default:6},Opera:{10:8,11:6,12:6,default:6},Chrome:{default:6},Safari:{default:6}};t.getDefaultSimultaneousRequests=o,t.getMaxSimultaneousRequests=i,t.setMaxSimultaneousRequests=a,t.getBrowserInfo=r,t.isMobileDevice=s},"./util/getRGBPixels.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i){if(!e)throw new Error("getRGBPixels: parameter element must not be undefined");t=Math.round(t),n=Math.round(n);var o=a.default.cornerstone.getEnabledElement(e),s=[],l=0,u=o.image.getPixelData(),d=void 0,c=void 0,f=void 0;if(o.image.color)for(c=0;c<i;c++)for(f=0;f<r;f++){var h=u[d=4*((c+n)*o.image.columns+(f+t))],m=u[d+1],p=u[d+2],g=u[d+3];s[l++]=h,s[l++]=m,s[l++]=p,s[l++]=g}return s};var a=r(n("./externalModules.js"))},"./util/isMouseButtonEnabled.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return 0!=(t&1<<e-1)}},"./util/lineSegDistance.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var i=a.default.cornerstone,o={start:i.pixelToCanvas(e,t),end:i.pixelToCanvas(e,n)};return a.default.cornerstoneMath.lineSegment.distanceToPoint(o,r)};var a=r(n("./externalModules.js"))},"./util/makeUnselectable.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.style.webkitUserSelect="none",e.style.webkitTouchCallout="none",e.style.mozUserSelect="none",e.style.msUserSelect="none",e.style.oUserSelect="none",e.style.khtmlUserSelect="none",e.style.userSelect="none",e.unselectable="on",e.oncontextmenu=function(){return!1},!0===t&&(e.style.pointerEvents="none")}},"./util/pointInEllipse.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.width/2,r=e.height/2;if(n<=0||r<=0)return!1;var a={x:e.left+n,y:e.top+r},i={x:t.x-a.x,y:t.y-a.y};return i.x*i.x/(n*n)+i.y*i.y/(r*r)<=1}},"./util/pointInsideBoundingBox.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(e.boundingBox)return a.default.cornerstoneMath.point.insideRect(t,e.boundingBox)};var a=r(n("./externalModules.js"))},"./util/pointProjector.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,c.default)(t.rowCosines),r=(0,c.default)(t.columnCosines),a=(0,c.default)(t.imagePositionPatient),i=e.clone().sub(a);return{x:n.dot(i)/t.columnPixelSpacing,y:r.dot(i)/t.rowPixelSpacing}}function i(e,t){var n=(0,c.default)(t.rowCosines),r=(0,c.default)(t.columnCosines),a=(0,c.default)(t.imagePositionPatient),i=n.clone().multiplyScalar(e.x);i.multiplyScalar(t.columnPixelSpacing);var o=r.clone().multiplyScalar(e.y);o.multiplyScalar(t.rowPixelSpacing);var s=i.add(o);return s.add(a),s}function o(e){var t=i({x:0,y:0},e),n=i({x:e.columns,y:0},e),r=i({x:0,y:e.rows},e),a=i({x:e.columns,y:e.rows},e);return{top:new d.default.cornerstoneMath.Line3(t,n),left:new d.default.cornerstoneMath.Line3(t,r),right:new d.default.cornerstoneMath.Line3(n,a),bottom:new d.default.cornerstoneMath.Line3(r,a)}}function s(e,t){var n=[];return(0,u.default)(t).forEach(function(r){var a=t[r],i=e.intersectLine(a);i&&n.push(i)}),n}function l(e,t){var n=(0,c.default)(e.rowCosines),r=(0,c.default)(e.columnCosines),a=(0,c.default)(e.imagePositionPatient),l=(0,c.default)(t.rowCosines),u=(0,c.default)(t.columnCosines),f=(0,c.default)(t.imagePositionPatient),h=n.clone().cross(r),m=new d.default.cornerstoneMath.Plane;m.setFromNormalAndCoplanarPoint(h,a);var p=l.clone().cross(u),g=new d.default.cornerstoneMath.Plane;g.setFromNormalAndCoplanarPoint(p,f);var v=g.clone().intersectPlane(m),y=v.origin,b=v.direction,_=i({x:t.columns,y:t.rows},t),w=f.distanceTo(_),E=new d.default.cornerstoneMath.Line3;E.start=y,E.end=y.clone().add(b.multiplyScalar(w));var x=s(E,o(t));if(2===x.length)return{start:x[0],end:x[1]}}Object.defineProperty(t,"__esModule",{value:!0});var u=r(n("../node_modules/babel-runtime/core-js/object/keys.js"));t.projectPatientPointToImagePlane=a,t.imagePointToPatientPoint=i,t.planePlaneIntersection=l;var d=r(n("./externalModules.js")),c=r(n("./util/convertToVector3.js"))},"./util/roundToDecimal.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}},"./util/scroll.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(e.pending[0]===t){if(e.currentImageIdIndex===t.index)return e.pending.splice(e.pending.indexOf(t),1),void(e.pending.length>0&&a(e,e.pending[0],n));var r=function r(o){e.imageIds.indexOf(o.detail.image.imageId)===t.index&&(e.pending.splice(e.pending.indexOf(t),1),n.removeEventListener(i.default.NEW_IMAGE,r),e.pending.length>0&&a(e,e.pending[0],n))};n.addEventListener(i.default.NEW_IMAGE,r),(0,o.default)(n,t.index)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=(0,s.getToolState)(e,"stack");if(i&&i.data&&i.data.length){var u=i.data[0];u.pending||(u.pending=[]);var d=u.currentImageIdIndex+t;if(n?d%=u.imageIds.length:d=(0,l.default)(d,0,u.imageIds.length-1),r)(0,o.default)(e,d);else{var c={index:d};u.pending.push(c),a(u,c,e)}}};var i=r(n("./events.js")),o=r(n("./util/scrollToIndex.js")),s=n("./stateManagement/toolState.js"),l=r(n("./util/clip.js"))},"./util/scrollToIndex.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function n(n){if(m.currentImageIdIndex===t){try{c.getEnabledElement(e)}catch(e){return}f?(f.currentImageIdIndex=t,f.render(e,d.data)):c.displayImage(e,n),g&&g(e,n)}}function r(n){var r=m.imageIds[t];v&&v(e,r,n)}var d=(0,o.getToolState)(e,"stack");if(d&&d.data&&d.data.length){var c=i.default.cornerstone,f=void 0;if(d.data.length>1){var h=(0,o.getToolState)(e,"stackRenderer");h&&h.data&&h.data.length&&(f=h.data[0])}var m=d.data[0];t<0&&(t+=m.imageIds.length);var p=l.default.getStartLoadHandler(),g=l.default.getEndLoadHandler(),v=l.default.getErrorLoadingHandler();if(t!==m.currentImageIdIndex){p&&p(e);var y={newImageIdIndex:t,direction:t-m.currentImageIdIndex};m.currentImageIdIndex=t;var b=m.imageIds[t],_=void 0;(_=Boolean(m.preventCache)?c.loadImage(b):c.loadAndCacheImage(b)).then(n,r),s.default.startGrabbing(),(0,u.default)(e,a.default.STACK_SCROLL,y)}}};var a=r(n("./events.js")),i=r(n("./externalModules.js")),o=n("./stateManagement/toolState.js"),s=r(n("./requestPool/requestPoolManager.js")),l=r(n("./stateManagement/loadHandlerManager.js")),u=r(n("./util/triggerEvent.js"))},"./util/setContextToDisplayFontSize.js":function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=.1;return a.default.cornerstone.setToPixelCoordinateSystem(e,t,.1),{fontSize:n/e.viewport.scale/.1,lineHeight:n/e.viewport.scale/.1,fontScale:.1}};var a=r(n("./externalModules.js"))},"./util/triggerEvent.js":function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;return"function"==typeof window.CustomEvent?r=new CustomEvent(t,{detail:n,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},"./version.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.3.7"}})})}}},"cornerstone-wado-image-loader":{dist:{"cornerstoneWADOImageLoader.js":function(e,t,n){!function r(a,i){"object"==typeof t&&"object"==typeof n?n.exports=i(e("dicom-parser")):"function"==typeof define&&define.amd?define("cornerstoneWADOImageLoader",["dicom-parser"],i):"object"==typeof t?t.cornerstoneWADOImageLoader=i(e("dicom-parser")):a.cornerstoneWADOImageLoader=i(a.dicomParser)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=39)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.external=t.dicomParser=void 0;var i=a(n(46)),o=r(n(47)),s=void 0,l={set cornerstone(e){s=e,(0,o.default)(s)},get cornerstone(){return s}};t.dicomParser=i,t.external=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.internal=t.xhrRequest=t.getOptions=t.setOptions=void 0;var a=r(n(50)),i=n(6),o={xhrRequest:a.default,setOptions:i.setOptions,getOptions:i.getOptions};t.setOptions=i.setOptions,t.getOptions=i.getOptions,t.xhrRequest=a.default,t.internal=o},function(e,t,n){"use strict";function r(e){for(var t=e[0],n=e[0],r=void 0,a=e.length,i=1;i<a;i++)r=e[i],t=Math.min(t,r),n=Math.max(n,r);return{min:t,max:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){return t=t||0,e&&e.Value?e.Value.length<=t?n:e.Value[t]:n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){var t=e.indexOf(":"),n=e.substring(t+1),r=n.indexOf("frame="),a=void 0;if(-1!==r){var i=n.substr(r+6);a=parseInt(i,10),n=n.substr(0,r-1)}return{scheme:e.substr(0,t),url:n,frame:a}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){s[e]=t}function a(e){return s[e]}function i(e){s[e]=void 0}function o(){s=[]}Object.defineProperty(t,"__esModule",{value:!0});var s=[];t.default={add:r,get:a,remove:i,purge:o}},function(e,t,n){"use strict";function r(e){i=e}function a(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.setOptions=r,t.getOptions=a;var i={beforeSend:function e(){},imageCreated:function e(){},strict:!1}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return"1.2.840.10008.5.1.4.1.1.12.1"!==e&&"1.2.840.10008.5.1.4.1.1.12.2.1"!==e}function o(e){for(var t=(0,m.default)(e),n=65535,r=Math.abs(t.max-t.min)/65535,a=t.min,i=e.length,o=new Uint16Array(i),s=65535,l=0,u=0;u<i;u++){var d=Math.floor((e[u]-a)/r);o[u]=d,s=Math.min(s,d),l=Math.max(l,d)}return{min:s,max:l,intPixelData:o,slope:r,intercept:a}}function s(e){32===e.bitsAllocated?e.pixelData=new Float32Array(e.pixelData):16===e.bitsAllocated?0===e.pixelRepresentation?e.pixelData=new Uint16Array(e.pixelData):e.pixelData=new Int16Array(e.pixelData):e.pixelData=new Uint8Array(e.pixelData)}function l(e,t,n,r){var l=u.external.cornerstone,v=document.createElement("canvas"),y=(0,d.default)(e),b=(0,c.default)(y,n,t,v,r);return new i(function(t,r){b.then(function(r){var i=l.metaData.get("imagePlaneModule",e)||{},u=l.metaData.get("voiLutModule",e)||{},d=l.metaData.get("modalityLutModule",e)||{},c=l.metaData.get("sopCommonModule",e)||{},y=(0,f.default)(r.photometricInterpretation);if(!(0,p.default)(r,n)&&(s(r),y)){v.height=r.rows,v.width=r.columns;var b=v.getContext("2d").createImageData(r.columns,r.rows);(0,h.default)(r,b),r.imageData=b,r.pixelData=b.data;var _=(0,m.default)(r.pixelData);r.smallestPixelValue=_.min,r.largestPixelValue=_.max}var w={imageId:e,color:y,columnPixelSpacing:i.pixelSpacing?i.pixelSpacing[1]:void 0,columns:r.columns,height:r.rows,intercept:d.rescaleIntercept?d.rescaleIntercept:0,invert:"MONOCHROME1"===r.photometricInterpretation,minPixelValue:r.smallestPixelValue,maxPixelValue:r.largestPixelValue,render:void 0,rowPixelSpacing:i.pixelSpacing?i.pixelSpacing[0]:void 0,rows:r.rows,sizeInBytes:r.pixelData.length,slope:d.rescaleSlope?d.rescaleSlope:1,width:r.columns,windowCenter:u.windowCenter?u.windowCenter[0]:void 0,windowWidth:u.windowWidth?u.windowWidth[0]:void 0,decodeTimeInMS:r.decodeTimeInMS,floatPixelData:void 0};if(r.pixelData instanceof Float32Array){var E=r.pixelData,x=o(E);w.minPixelValue=x.min,w.maxPixelValue=x.max,w.slope=x.slope,w.intercept=x.intercept,w.floatPixelData=E,w.getPixelData=function(){return x.intPixelData}}else w.getPixelData=function(){return r.pixelData};if(w.color?(w.render=l.renderColorImage,w.getCanvas=function(){return g===e?v:(v.height=w.rows,v.width=w.columns,v.getContext("2d").putImageData(r.imageData,0,0),g=e,v)}):w.render=l.renderGrayscaleImage,d.modalityLUTSequence&&d.modalityLUTSequence.length>0&&a(c.sopClassUID)&&(w.modalityLUT=d.modalityLUTSequence[0]),u.voiLUTSequence&&u.voiLUTSequence.length>0&&(w.voiLUT=u.voiLUTSequence[0]),w.color&&(w.windowWidth=255,w.windowCenter=127),void 0===w.windowCenter||void 0===w.windowWidth){var T=w.maxPixelValue*w.slope+w.intercept,P=w.minPixelValue*w.slope+w.intercept;w.windowWidth=T-P,w.windowCenter=(T+P)/2}t(w)},r)})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),d=r(n(24)),c=r(n(25)),f=r(n(28)),h=r(n(29)),m=r(n(2)),p=r(n(30)),g="";t.default=l},function(e,t,n){"use strict";function r(e){return void 0!==c[e]}function a(e){if(c[e])return c[e].dataSet}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.xhrRequest,n=arguments[2];if(c[e])return new i(function(t){c[e].cacheCount++,t(c[e].dataSet)});if(f[e])return f[e];var r=t(e,n),a=new i(function(t,n){r.then(function(r){var a=new Uint8Array(r),i=void 0;try{i=u.dicomParser.parseDicom(a)}catch(e){return n(e)}c[e]={dataSet:i,cacheCount:1},t(i)},n).then(function(){delete f[e]})});return f[e]=a,a}function s(e){c[e]&&(c[e].cacheCount--,0===c[e].cacheCount&&delete c[e])}function l(){c={},f={}}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),d=n(1),c={},f={};t.default={isLoaded:r,load:o,unload:s,purge:l,get:a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="2.0.0"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(40);Object.defineProperty(t,"convertRGBColorByPixel",{enumerable:!0,get:function e(){return r(a).default}});var i=n(41);Object.defineProperty(t,"convertRGBColorByPlane",{enumerable:!0,get:function e(){return r(i).default}});var o=n(42);Object.defineProperty(t,"convertYBRFullByPixel",{enumerable:!0,get:function e(){return r(o).default}});var s=n(43);Object.defineProperty(t,"convertYBRFullByPlane",{enumerable:!0,get:function e(){return r(s).default}});var l=n(44);Object.defineProperty(t,"convertPALETTECOLOR",{enumerable:!0,get:function e(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),i=r(n(8)),o=r(n(31)),s=r(n(32)),l=r(n(33)),u=r(n(35)),d=n(36),c=r(n(4)),f=r(n(34)),h=r(n(53)),m={getImagePixelModule:a.getImagePixelModule,getLUTs:a.getLUTs,getModalityLUTOutputPixelRepresentation:a.getModalityLUTOutputPixelRepresentation,getNumberValues:a.getNumberValues,metaDataProvider:a.metaDataProvider};t.default={metaData:m,dataSetCacheManager:i.default,fileManager:o.default,getEncapsulatedImageFrame:s.default,getUncompressedImageFrame:l.default,loadFileRequest:u.default,loadImageFromPromise:d.loadImageFromPromise,getLoaderForScheme:d.getLoaderForScheme,loadImage:d.loadImage,parseImageId:c.default,unpackBinaryFrame:f.default,register:h.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(13);Object.defineProperty(t,"getImagePixelModule",{enumerable:!0,get:function e(){return r(a).default}});var i=n(14);Object.defineProperty(t,"getLUTs",{enumerable:!0,get:function e(){return r(i).default}});var o=n(15);Object.defineProperty(t,"getModalityLUTOutputPixelRepresentation",{enumerable:!0,get:function e(){return r(o).default}});var s=n(16);Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function e(){return r(s).default}});var l=n(45);Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function e(){return r(l).default}})},function(e,t,n){"use strict";function r(e,t){if(e.elements[t]&&6===e.elements[t].length)return[e.uint16(t,0),e.uint16(t,1),e.uint16(t,2)]}function a(e,t,n){for(var r=[],a=e.elements[t],i=0;i<n[0];i++)16===n[2]?r[i]=e.uint16(t,i):r[i]=e.byteArray[i+a.dataOffset];return r}function i(e,t){t.redPaletteColorLookupTableDescriptor=r(e,"x00281101"),t.greenPaletteColorLookupTableDescriptor=r(e,"x00281102"),t.bluePaletteColorLookupTableDescriptor=r(e,"x00281103"),0===t.redPaletteColorLookupTableDescriptor[0]&&(t.redPaletteColorLookupTableDescriptor[0]=65536,t.greenPaletteColorLookupTableDescriptor[0]=65536,t.bluePaletteColorLookupTableDescriptor[0]=65536);var n=t.redPaletteColorLookupTableDescriptor[0],i=e.elements.x00281201.length===n?8:16;t.redPaletteColorLookupTableDescriptor[2]!==i&&(t.redPaletteColorLookupTableDescriptor[2]=i,t.greenPaletteColorLookupTableDescriptor[2]=i,t.bluePaletteColorLookupTableDescriptor[2]=i),t.redPaletteColorLookupTableData=a(e,"x00281201",t.redPaletteColorLookupTableDescriptor),t.greenPaletteColorLookupTableData=a(e,"x00281202",t.greenPaletteColorLookupTableDescriptor),t.bluePaletteColorLookupTableData=a(e,"x00281203",t.bluePaletteColorLookupTableDescriptor)}function o(e,t){0===e.uint16("x00280103")?(t.smallestPixelValue=e.uint16("x00280106"),t.largestPixelValue=e.uint16("x00280107")):(t.smallestPixelValue=e.int16("x00280106"),t.largestPixelValue=e.int16("x00280107"))}function s(e){var t={samplesPerPixel:e.uint16("x00280002"),photometricInterpretation:e.string("x00280004"),rows:e.uint16("x00280010"),columns:e.uint16("x00280011"),bitsAllocated:e.uint16("x00280100"),bitsStored:e.uint16("x00280101"),highBit:e.uint16("x00280102"),pixelRepresentation:e.uint16("x00280103"),planarConfiguration:e.uint16("x00280006"),pixelAspectRatio:e.string("x00280034")};return o(e,t),"PALETTE COLOR"===t.photometricInterpretation&&e.elements.x00281101&&i(e,t),t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s},function(e,t,n){"use strict";function r(e,t){var n=t.uint16("x00283002",0);0===n&&(n=65535);for(var r=0,a={id:"1",firstValueMapped:r=0===e?t.uint16("x00283002",1):t.int16("x00283002",1),numBitsPerEntry:t.uint16("x00283002",2),lut:[]},i=0;i<n;i++)a.lut[i]=0===e?t.uint16("x00283006",i):t.int16("x00283006",i);return a}function a(e,t){if(t&&t.items.length){for(var n=[],a=0;a<t.items.length;a++){var i=r(e,t.items[a].dataSet);i&&n.push(i)}return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e){var t=e.uint16("x00280103"),n=e.uint16("x00280101");return 0===t?0:-1<<n-1}function a(e){var t=e.string("x00080016");if("1.2.840.10008.5.1.4.1.1.2"===t||"1.2.840.10008.5.1.4.1.1.2.1"===t)return 1;var n=e.floatString("x00281052"),a=e.floatString("x00281053");return void 0!==n&&void 0!==a?r(e)*a+n<0?1:0:e.elements.x00283000&&e.elements.x00283000.length>0?0:e.uint16("x00280103")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e,t,n){var r=[],a=e.string(t);if(a){var i=a.split("\\");if(!(n&&i.length<n)){for(var o=0;o<i.length;o++)r.push(parseFloat(i[o]));return r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(18),i=r(n(21)),o=r(n(22)),s=r(n(5)),l=r(n(23)),u=r(n(51)),d={getNumberString:a.getNumberString,getNumberValue:a.getNumberValue,getNumberValues:a.getNumberValues,getValue:a.getValue,metaDataProvider:a.metaDataProvider};t.default={metaData:d,findIndexOfString:i.default,getPixelData:o.default,loadImage:l.default,metaDataManager:s.default,register:u.default}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(48);Object.defineProperty(t,"getNumberString",{enumerable:!0,get:function e(){return r(a).default}});var i=n(19);Object.defineProperty(t,"getNumberValue",{enumerable:!0,get:function e(){return r(i).default}});var o=n(20);Object.defineProperty(t,"getNumberValues",{enumerable:!0,get:function e(){return r(o).default}});var s=n(3);Object.defineProperty(t,"getValue",{enumerable:!0,get:function e(){return r(s).default}});var l=n(49);Object.defineProperty(t,"metaDataProvider",{enumerable:!0,get:function e(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,i.default)(e,t);if(void 0!==n)return parseFloat(n)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3));t.default=a},function(e,t,n){"use strict";function r(e,t){if(e&&e.Value&&!(t&&e.Value.length<t)){for(var n=[],r=0;r<e.Value.length;r++)n.push(parseFloat(e.Value[r]));return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t,n){if(n+e.length>t.length)return!1;for(var r=n,a=0;a<e.length;a++)if(e[a]!==t[r++])return!1;return!0}function a(e){for(var t=new Uint8Array(e.length),n=0,r=e.length;n<r;n++)t[n]=e.charCodeAt(n);return t}function i(e,t,n){n=n||0;for(var i=a(t),o=n;o<e.length;o++)if(i[0]===e[o]&&r(i,e,o))return o;return-1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=0;t<e.length;t++)if("--"===e[t].substr(0,2))return e[t]}function o(e){for(var t=0;t<e.length;t++)if("Content-Type:"===e[t].substr(0,13))return e[t].substr(13).trim()}function s(e,t,n){t=t||0,n=n||e.length-t;for(var r="",a=t;a<t+n;a++)r+=String.fromCharCode(e[a]);return r}function l(e,t){var n={accept:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"application/octet-stream"};return new i(function(r,i){(0,u.xhrRequest)(e,t,n).then(function(e){var t=new Uint8Array(e),n=(0,d.default)(t,"\r\n\r\n");-1===n&&i(new Error("invalid response - no multipart mime header"));var l=s(t,0,n).split("\r\n"),u=a(l);u||i(new Error("invalid response - no boundary marker"));var c=n+4,f=(0,d.default)(t,u,c);-1===f&&i(new Error("invalid response - terminating boundary not found"));var h=f-c-2;r({contentType:o(l),imageFrame:{pixelData:new Uint8Array(e,c,h)}})})})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(1),d=r(n(21));t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return"1.2.840.10008.1.2"}function o(e,t){var n=(new Date).getTime(),r=e.substring(7);return{promise:new i(function(i,o){if(void 0===s.default.get(e)){var d=new Error("no metadata for imageId "+e);return o(d)}var c='multipart/related; type="application/octet-stream"';(0,l.default)(r,e,c).then(function(r){var s=a(r.contentType),l=r.imageFrame.pixelData;(0,u.default)(e,l,s,t).then(function(e){var t=(new Date).getTime();e.loadTimeInMS=t-n,i(e)},o)},o)}),cancelFn:void 0}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(5)),l=r(n(22)),u=r(n(7));t.default=o},function(e,t,n){"use strict";function r(e){var t=a.external.cornerstone.metaData.get("imagePixelModule",e);return{samplesPerPixel:t.samplesPerPixel,photometricInterpretation:t.photometricInterpretation,planarConfiguration:t.planarConfiguration,rows:t.rows,columns:t.columns,bitsAllocated:t.bitsAllocated,pixelRepresentation:t.pixelRepresentation,smallestPixelValue:t.smallestPixelValue,largestPixelValue:t.largestPixelValue,redPaletteColorLookupTableDescriptor:t.redPaletteColorLookupTableDescriptor,greenPaletteColorLookupTableDescriptor:t.greenPaletteColorLookupTableDescriptor,bluePaletteColorLookupTableDescriptor:t.bluePaletteColorLookupTableDescriptor,redPaletteColorLookupTableData:t.redPaletteColorLookupTableData,greenPaletteColorLookupTableData:t.greenPaletteColorLookupTableData,bluePaletteColorLookupTableData:t.bluePaletteColorLookupTableData,pixelData:void 0}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0);t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r){var a=r.priority||void 0,i=r.transferPixelData?[n.buffer]:void 0;return o.default.addTask("decodeTask",{imageFrame:e,transferSyntax:t,pixelData:n,options:r},a,i).promise}function i(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if("1.2.840.10008.1.2"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.1"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.2"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.1.99"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.5"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.50"===t)return 8!==e.bitsAllocated||3!==e.samplesPerPixel&&4!==e.samplesPerPixel?a(e,t,n,i):(0,s.default)(e,n,r);if("1.2.840.10008.1.2.4.51"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.57"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.70"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.80"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.81"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.90"===t)return a(e,t,n,i);if("1.2.840.10008.1.2.4.91"===t)return a(e,t,n,i);throw new Error("No decoder for transfer syntax "+t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(26)),s=r(n(27));t.default=i},function(e,t,n){"use strict";function r(){if(m.length){for(var e=0;e<p.length;e++)if("ready"===p[e].status){p[e].status="busy";var t=m.shift();t.start=(new Date).getTime();var n=(new Date).getTime();return b.totalTimeDelayedInMS+=n-t.added,p[e].task=t,p[e].worker.postMessage({taskType:t.taskType,workerIndex:e,data:t.data},t.transferList),void b.numTasksExecuting++}p.length<y.maxWebWorkers&&o()}}function a(e){if("initialize"===e.data.taskType)p[e.data.workerIndex].status="ready",r();else{var t=p[e.data.workerIndex].task.start;p[e.data.workerIndex].task.deferred.resolve(e.data.result),p[e.data.workerIndex].task=void 0,b.numTasksExecuting--,p[e.data.workerIndex].status="ready",b.numTasksCompleted++;var n=(new Date).getTime();b.totalTaskTimeInMS+=n-t,r()}}function o(){if(!(p.length>=y.maxWebWorkers)){var e=new Worker(y.webWorkerPath);p.push({worker:e,status:"initializing"}),e.addEventListener("message",a),e.postMessage({taskType:"initialize",workerIndex:p.length-1,config:y})}}function s(e){if(e=e||v,y)throw new Error("WebWorkerManager already initialized");if(y=e,y.maxWebWorkers=y.maxWebWorkers||navigator.hardwareConcurrency||1,!y.startWebWorkersOnDemand)for(var t=0;t<y.maxWebWorkers;t++)o()}function l(e,t){y.webWorkerTaskPaths.push(e),t&&(y.taskConfiguration=Object.assign(y.taskConfiguration,t));for(var n=0;n<p.length;n++)p[n].worker.postMessage({taskType:"loadWebWorkerTask",workerIndex:p.length-1,sourcePath:e,config:y})}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments[3];y||s();var o={},l=new i(function(e,t){o={resolve:e,reject:t}}),u=void 0;for(u=0;u<m.length&&!(m[u].priority<n);u++);var d=h++;return m.splice(u,0,{taskId:d,taskType:e,status:"ready",added:(new Date).getTime(),data:t,deferred:o,priority:n,transferList:a}),r(),{taskId:d,promise:l}}function d(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<m.length;n++)if(m[n].taskId===e){var r=m.splice(n,1)[0];for(r.priority=t,n=0;n<m.length&&!(m[n].priority<t);n++);return m.splice(n,0,r),!0}return!1}function c(e,t){for(var n=0;n<m.length;n++)if(m[n].taskId===e)return m.splice(n,1).deferred.reject(t),!0;return!1}function f(){return b.maxWebWorkers=y.maxWebWorkers,b.numWebWorkers=p.length,b.numTasksQueued=m.length,b}Object.defineProperty(t,"__esModule",{value:!0});var h=0,m=[],p=[],g=(0,n(6).getOptions)(),v={maxWebWorkers:navigator.hardwareConcurrency||1,startWebWorkersOnDemand:!0,webWorkerPath:"../../dist/cornerstoneWADOImageLoaderWebWorker.js",webWorkerTaskPaths:[],taskConfiguration:{decodeTask:{loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:"../dist/cornerstoneWADOImageLoaderCodecs.js",usePDFJS:!1,strict:g.strict}}},y=void 0,b={maxWebWorkers:0,numWebWorkers:0,numTasksQueued:0,numTasksExecuting:0,numTasksCompleted:0,totalTaskTimeInMS:0,totalTimeDelayedInMS:0};t.default={initialize:s,loadWebWorkerTask:l,addTask:u,getStatistics:f,setTaskPriority:d,cancelTask:c}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return o(String.fromCharCode.apply(null,Array.prototype.slice.apply(new Uint8Array(e))))}function o(e){var t=void 0;try{return decodeURIComponent(escape(e))}catch(n){if((t=n)instanceof URIError)return e;throw t}}function s(e,t,n){var r=(new Date).getTime(),o=new Blob([t],{type:"image/jpeg"});return new i(function(t,i){var s=new FileReader;void 0===s.readAsBinaryString?s.readAsArrayBuffer(o):s.readAsBinaryString(o),s.onload=function(){var o=new Image;o.onload=function(){n.height=o.height,n.width=o.width,e.rows=o.height,e.columns=o.width;var a=n.getContext("2d");a.drawImage(this,0,0);var i=a.getImageData(0,0,o.width,o.height),s=(new Date).getTime();e.pixelData=i.data,e.imageData=i,e.decodeTimeInMS=s-r;var u=(0,l.default)(e.pixelData);e.smallestPixelValue=u.min,e.largestPixelValue=u.max,t(e)},o.onerror=function(e){i(e)},void 0===s.readAsBinaryString?o.src="data:image/jpeg;base64,"+window.btoa(a(s.result)):o.src="data:image/jpeg;base64,"+window.btoa(s.result)},s.onerror=function(e){i(e)}})}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n(2));t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"RGB"===e||"PALETTE COLOR"===e||"YBR_FULL"===e||"YBR_FULL_422"===e||"YBR_PARTIAL_422"===e||"YBR_PARTIAL_420"===e||"YBR_RCT"===e||"YBR_ICT"===e}},function(e,t,n){"use strict";function r(e,t){0===e.planarConfiguration?(0,o.convertRGBColorByPixel)(e.pixelData,t):(0,o.convertRGBColorByPlane)(e.pixelData,t)}function a(e,t){0===e.planarConfiguration?(0,o.convertYBRFullByPixel)(e.pixelData,t):(0,o.convertYBRFullByPlane)(e.pixelData,t)}function i(e,t){var n=t.data;if("RGB"===e.photometricInterpretation)r(e,n);else if("YBR_RCT"===e.photometricInterpretation)r(e,n);else if("YBR_ICT"===e.photometricInterpretation)r(e,n);else if("PALETTE COLOR"===e.photometricInterpretation)(0,o.convertPALETTECOLOR)(e,n);else if("YBR_FULL_422"===e.photometricInterpretation)r(e,n);else{if("YBR_FULL"!==e.photometricInterpretation)throw new Error("No color space conversion for photometric interpretation "+e.photometricInterpretation);a(e,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(10)},function(e,t,n){"use strict";function r(e,t){if(t=t||e.transferSyntax,8===e.bitsAllocated&&"1.2.840.10008.1.2.4.50"===t&&(3===e.samplesPerPixel||4===e.samplesPerPixel))return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return"dicomfile:"+(s.push(e)-1)}function a(e){return s[e]}function i(e){s[e]=void 0}function o(){s=[]}Object.defineProperty(t,"__esModule",{value:!0});var s=[];t.default={add:r,get:a,remove:i,purge:o}},function(e,t,n){"use strict";function r(e){return e.intString("x00280008")!==e.elements.x7fe00010.fragments.length}function a(e,t){if(e.elements.x7fe00010&&e.elements.x7fe00010.basicOffsetTable.length)return i.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t);if(r(e)){var n=i.dicomParser.createJPEGBasicOffsetTable(e,e.elements.x7fe00010);return i.dicomParser.readEncapsulatedImageFrame(e,e.elements.x7fe00010,t,n)}return i.dicomParser.readEncapsulatedPixelDataFromFragments(e,e.elements.x7fe00010,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=n(0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=e.elements.x7fe00010||e.elements.x7fe00008,r=e.uint16("x00280100"),a=e.uint16("x00280010"),o=e.uint16("x00280011"),s=e.uint16("x00280002"),l=n.dataOffset,u=a*o*s,d=void 0;if(8===r){if((d=l+t*u)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,u)}if(16===r){if((d=l+t*u*2)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,2*u)}if(1===r){if((d=l+t*u*.125)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return(0,i.default)(e.byteArray,d,u)}if(32===r){if((d=l+t*u*4)>=e.byteArray.length)throw new Error("frame exceeds size of pixelData");return new Uint8Array(e.byteArray.buffer,d,4*u)}throw new Error("unsupported pixel format")}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(34));t.default=a},function(e,t,n){"use strict";function r(e,t){return e&1<<t}function a(e,t,n){for(var a=new Uint8Array(n),i=0;i<n;i++){var o=e[Math.floor(i/8)+t],s=i%8;a[i]=r(o,s)?1:0}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=(0,o.default)(e),n=parseInt(t.url,10),r=s.default.get(n);return new i(function(e,t){var n=new FileReader;n.onload=function(t){var n=t.target.result;e(n)},n.onerror=t,n.readAsArrayBuffer(r)})}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(4)),s=r(n(31));t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){e.decache=function(){var t=(0,c.default)(e.imageId);f.default.unload(t.url)}}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3],o=arguments[4],s=(new Date).getTime();return{promise:new i(function(i,l){e.then(function(e){var u=(0,m.default)(e,n),c=e.string("x00020010"),f=(new Date).getTime();(0,d.default)(t,u,c,o).then(function(t){t.data=e,t.sharedCacheKey=r;var n=(new Date).getTime();t.loadTimeInMS=f-s,t.totalTimeInMS=n-s,a(t),i(t)},l)},l)}),cancelFn:void 0}}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3],o=arguments[4],s=(new Date).getTime();return{promise:new i(function(i,l){var u=(0,m.default)(e,n),c=e.string("x00020010"),f=(new Date).getTime();(0,d.default)(t,u,c,o).then(function(t){t.data=e,t.sharedCacheKey=r;var n=(new Date).getTime();t.loadTimeInMS=f-s,t.totalTimeInMS=n-s,a(t),i(t)},l)}),cancelFn:void 0}}function l(e){return"dicomweb"===e||"wadouri"===e?p.xhrRequest:"dicomfile"===e?h.default:void 0}function u(e,t){var n=(0,c.default)(e),r=l(n.scheme);return f.default.isLoaded(n.url)?s(f.default.get(n.url,r,e),e,n.frame,n.url,t):o(f.default.load(n.url,r,e),e,n.frame,n.url,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=t.getLoaderForScheme=t.loadImageFromPromise=void 0;var d=r(n(7)),c=r(n(4)),f=r(n(8)),h=r(n(35)),m=r(n(52)),p=n(1);t.loadImageFromPromise=o,t.getLoaderForScheme=l,t.loadImage=u},,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(10);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function t(){return a[e]}})});var i=n(11);Object.defineProperty(t,"wadouri",{enumerable:!0,get:function e(){return r(i).default}});var o=n(17);Object.defineProperty(t,"wadors",{enumerable:!0,get:function e(){return r(o).default}});var s=n(54);Object.defineProperty(t,"configure",{enumerable:!0,get:function e(){return r(s).default}});var l=n(29);Object.defineProperty(t,"convertColorSpace",{enumerable:!0,get:function e(){return r(l).default}});var u=n(7);Object.defineProperty(t,"createImage",{enumerable:!0,get:function e(){return r(u).default}});var d=n(25);Object.defineProperty(t,"decodeImageFrame",{enumerable:!0,get:function e(){return r(d).default}});var c=n(27);Object.defineProperty(t,"decodeJPEGBaseline8BitColor",{enumerable:!0,get:function e(){return r(c).default}});var f=n(24);Object.defineProperty(t,"getImageFrame",{enumerable:!0,get:function e(){return r(f).default}});var h=n(2);Object.defineProperty(t,"getMinMax",{enumerable:!0,get:function e(){return r(h).default}});var m=n(28);Object.defineProperty(t,"isColorImage",{enumerable:!0,get:function e(){return r(m).default}});var p=n(30);Object.defineProperty(t,"isJPEGBaseline8BitColor",{enumerable:!0,get:function e(){return r(p).default}});var g=n(26);Object.defineProperty(t,"webWorkerManager",{enumerable:!0,get:function e(){return r(g).default}});var v=n(9);Object.defineProperty(t,"version",{enumerable:!0,get:function e(){return r(v).default}});var y=n(1);Object.defineProperty(t,"internal",{enumerable:!0,get:function e(){return y.internal}});var b=n(0);Object.defineProperty(t,"external",{enumerable:!0,get:function e(){return b.external}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var n=e.length/3,r=0,a=0,i=0;i<n;i++)t[a++]=e[r++],t[a++]=e[r++],t[a++]=e[r++],t[a++]=255}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: rgbBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: rgbBuffer length must be divisible by 3");for(var n=e.length/3,r=0,a=0,i=n,o=2*n,s=0;s<n;s++)t[r++]=e[a++],t[r++]=e[i++],t[r++]=e[o++],t[r++]=255}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var n=e.length/3,r=0,a=0,i=0;i<n;i++){var o=e[r++],s=e[r++],l=e[r++];t[a++]=o+1.402*(l-128),t[a++]=o-.34414*(s-128)-.71414*(l-128),t[a++]=o+1.772*(s-128),t[a++]=255}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(void 0===e)throw new Error("decodeRGB: ybrBuffer must not be undefined");if(e.length%3!=0)throw new Error("decodeRGB: ybrBuffer length must be divisble by 3");for(var n=e.length/3,r=0,a=0,i=n,o=2*n,s=0;s<n;s++){var l=e[a++],u=e[i++],d=e[o++];t[r++]=l+1.402*(d-128),t[r++]=l-.34414*(u-128)-.71414*(d-128),t[r++]=l+1.772*(u-128),t[r++]=255}}},function(e,t,n){"use strict";function r(e,t){for(var n=e.length,r=new Uint8ClampedArray(n),a=0;a<n;++a)r[a]=e[a]>>t;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){for(var n=e.columns*e.rows,a=e.pixelData,i=e.redPaletteColorLookupTableData,o=e.greenPaletteColorLookupTableData,s=e.bluePaletteColorLookupTableData,l=e.redPaletteColorLookupTableData.length,u=0,d=0,c=e.redPaletteColorLookupTableDescriptor[1],f=8===e.redPaletteColorLookupTableDescriptor[2]?0:8,h=r(i,f),m=r(o,f),p=r(s,f),g=0;g<n;++g){var v=a[u++];v<c?v=0:v>c+l-1?v=l-1:v-=c,t[d++]=h[v],t[d++]=m[v],t[d++]=p[v],t[d++]=255}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=(0,s.default)(t),r=l.default.get(n.url);if(r){if("generalSeriesModule"===e)return{modality:r.string("x00080060"),seriesInstanceUID:r.string("x0020000e"),seriesNumber:r.intString("x00200011"),studyInstanceUID:r.string("x0020000d"),seriesDate:i.dicomParser.parseDA(r.string("x00080021")),seriesTime:i.dicomParser.parseTM(r.string("x00080031")||"")};if("patientStudyModule"===e)return{patientAge:r.intString("x00101010"),patientSize:r.floatString("x00101020"),patientWeight:r.floatString("x00101030")};if("imagePlaneModule"===e){var a=(0,o.default)(r,"x00200037",6),f=(0,o.default)(r,"x00200032",3),h=(0,o.default)(r,"x00280030",2),m=1,p=1;h&&(p=h[0],m=h[1]);var g=null,v=null;return a&&(g=[parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])],v=[parseFloat(a[3]),parseFloat(a[4]),parseFloat(a[5])]),{frameOfReferenceUID:r.string("x00200052"),rows:r.uint16("x00280010"),columns:r.uint16("x00280011"),imageOrientationPatient:a,rowCosines:g,columnCosines:v,imagePositionPatient:f,sliceThickness:r.floatString("x00180050"),sliceLocation:r.floatString("x00201041"),pixelSpacing:h,rowPixelSpacing:p,columnPixelSpacing:m}}if("imagePixelModule"===e)return(0,u.default)(r);if("modalityLutModule"===e)return{rescaleIntercept:r.floatString("x00281052"),rescaleSlope:r.floatString("x00281053"),rescaleType:r.string("x00281054"),modalityLUTSequence:(0,d.default)(r.uint16("x00280103"),r.elements.x00283000)};if("voiLutModule"===e){var y=(0,c.default)(r);return{windowCenter:(0,o.default)(r,"x00281050",1),windowWidth:(0,o.default)(r,"x00281051",1),voiLUTSequence:(0,d.default)(y,r.elements.x00283010)}}if("sopCommonModule"===e)return{sopClassUID:r.string("x00080016"),sopInstanceUID:r.string("x00080018")};if("petIsotopeModule"===e){var b=r.elements.x00540016;if(void 0===b)return;var _=b.items[0].dataSet;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:i.dicomParser.parseTM(_.string("x00181072")||""),radionuclideTotalDose:_.floatString("x00181074"),radionuclideHalfLife:_.floatString("x00181075")}}}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(n(16)),s=r(n(4)),l=r(n(8)),u=r(n(13)),d=r(n(14)),c=r(n(15));t.default=a},function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){i.default.register(e),o.default.register(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(17)),o=r(n(11));t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=(0,i.default)(e,t,n);if(void 0!==r)return parseFloat(r)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(3));t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){var n=u.default.get(t);if(n){if("generalSeriesModule"===e)return{modality:(0,s.default)(n["00080060"]),seriesInstanceUID:(0,s.default)(n["0020000e"]),seriesNumber:(0,l.default)(n["00200011"]),studyInstanceUID:(0,s.default)(n["0020000d"]),seriesDate:i.dicomParser.parseDA((0,s.default)(n["00080021"])),seriesTime:i.dicomParser.parseTM((0,s.default)(n["00080031"],0,""))};if("patientStudyModule"===e)return{patientAge:(0,l.default)(n["00101010"]),patientSize:(0,l.default)(n["00101020"]),patientWeight:(0,l.default)(n["00101030"])};if("imagePlaneModule"===e){var r=(0,o.default)(n["00200037"],6),a=(0,o.default)(n["00200032"],3),d=(0,o.default)(n["00280030"],2),c=1,f=1;d&&(f=d[0],c=d[1]);var h=null,m=null;return r&&(h=[parseFloat(r[0]),parseFloat(r[1]),parseFloat(r[2])],m=[parseFloat(r[3]),parseFloat(r[4]),parseFloat(r[5])]),{frameOfReferenceUID:(0,s.default)(n["00200052"]),rows:(0,l.default)(n["00280010"]),columns:(0,l.default)(n["00280011"]),imageOrientationPatient:r,rowCosines:h,columnCosines:m,imagePositionPatient:a,sliceThickness:(0,l.default)(n["00180050"]),sliceLocation:(0,l.default)(n["00201041"]),pixelSpacing:d,rowPixelSpacing:f,columnPixelSpacing:c}}if("imagePixelModule"===e)return{samplesPerPixel:(0,l.default)(n["00280002"]),photometricInterpretation:(0,s.default)(n["00280004"]),rows:(0,l.default)(n["00280010"]),columns:(0,l.default)(n["00280011"]),bitsAllocated:(0,l.default)(n["00280100"]),bitsStored:(0,l.default)(n["00280101"]),highBit:(0,s.default)(n["00280102"]),pixelRepresentation:(0,l.default)(n["00280103"]),planarConfiguration:(0,l.default)(n["00280006"]),pixelAspectRatio:(0,s.default)(n["00280034"]),smallestPixelValue:(0,l.default)(n["00280106"]),largestPixelValue:(0,l.default)(n["00280107"]),redPaletteColorLookupTableDescriptor:(0,o.default)(n["00281101"]),greenPaletteColorLookupTableDescriptor:(0,o.default)(n["00281102"]),bluePaletteColorLookupTableDescriptor:(0,o.default)(n["00281103"]),redPaletteColorLookupTableData:(0,o.default)(n["00281201"]),greenPaletteColorLookupTableData:(0,o.default)(n["00281202"]),bluePaletteColorLookupTableData:(0,o.default)(n["00281203"])};if("voiLutModule"===e)return{windowCenter:(0,o.default)(n["00281050"],1),windowWidth:(0,o.default)(n["00281051"],1)};if("modalityLutModule"===e)return{rescaleIntercept:(0,l.default)(n["00281052"]),rescaleSlope:(0,l.default)(n["00281053"]),rescaleType:(0,s.default)(n["00281054"])};if("sopCommonModule"===e)return{sopClassUID:(0,s.default)(n["00080016"]),sopInstanceUID:(0,s.default)(n["00080018"])};if("petIsotopeModule"===e){var p=(0,s.default)(n["00540016"]);if(void 0===p)return;return{radiopharmaceuticalInfo:{radiopharmaceuticalStartTime:i.dicomParser.parseTM((0,s.default)(p["00181072"],0,"")),radionuclideTotalDose:(0,l.default)(p["00181074"]),radionuclideHalfLife:(0,l.default)(p["00181075"])}}}}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=r(n(20)),s=r(n(3)),l=r(n(19)),u=r(n(5));t.default=a},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.external.cornerstone,l=(0,o.getOptions)();return new i(function(a,i){var o=new XMLHttpRequest;o.open("get",e,!0),o.responseType="arraybuffer",l.beforeSend(o,t),Object.keys(n).forEach(function(e){o.setRequestHeader(e,n[e])}),r.deferred={resolve:a,reject:i},r.url=e,r.imageId=t,o.onloadstart=function(n){l.onloadstart&&l.onloadstart(n,r);var a={url:e,imageId:t};s.triggerEvent(s.events,"cornerstoneimageloadstart",a)},o.onloadend=function(n){l.onloadend&&l.onloadend(n,r);var a={url:e,imageId:t};s.triggerEvent(s.events,"cornerstoneimageloadend",a)},o.onreadystatechange=function(e){l.onreadystatechange?l.onreadystatechange(e,r):4===o.readyState&&(200===o.status?a(o.response,o):i(o))},o.onprogress=function(n){var a=n.loaded,i=void 0,o=void 0;n.lengthComputable&&(i=n.total,o=Math.round(a/i*100)),l.onprogress&&l.onprogress(n,r);var u={url:e,imageId:t,loaded:a,total:i,percentComplete:o};s.triggerEvent(s.events,"cornerstoneimageloadprogress",u)},o.send()})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=n(6);t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerImageLoader("wadors",a.default),e.metaData.addProvider(i.metaDataProvider)};var a=r(n(23)),i=n(18)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(e.elements.x7fe00010||e.elements.x7fe00008).encapsulatedPixelData?(0,i.default)(e,t):(0,o.default)(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(32)),o=r(n(33));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.registerImageLoader("dicomweb",r.loadImage),e.registerImageLoader("wadouri",r.loadImage),e.registerImageLoader("dicomfile",r.loadImage),e.metaData.addProvider(a.metaDataProvider)};var r=n(36),a=n(12)},function(e,t,n){"use strict";function r(e){(0,a.setOptions)(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1);t.default=r}])})}}},"dicom-parser":{"package.json":function(e,t){t.name="dicom-parser",t.version="1.7.6",t.main="dist/dicomParser.min.js"},dist:{"dicomParser.min.js":function(e,t,n){!function(e,r){"object"==typeof t&&"object"==typeof n?n.exports=r():"function"==typeof define&&define.amd?define("dicom-parser",[],r):"object"==typeof t?t["dicom-parser"]=r():e.dicomParser=r()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=43)}([function(e,t,n){"use strict";(function(e){function r(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,n){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return s(this,e,t,n)}function s(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):m(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function d(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!i.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!i.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|v(t,n),o=(e=a(e,r)).write(t,n);return o!==r&&(e=e.slice(0,o)),e}function f(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=f(e,t),e}function m(e,t){if(i.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?a(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function p(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function g(e){return+e!=e&&(e=0),i.alloc(+e)}function v(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(r)return q(e).length;t=(""+t).toLowerCase(),r=!0}}function y(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return O(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return L(this,t,n);case"base64":return M(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=i.from(t,r)),i.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,a);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,a){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}var u;if(a){var d=-1;for(u=n;u<s;u++)if(i(e,u)===i(t,-1===d?0:u-d)){if(-1===d&&(d=u),u-d+1===l)return d*o}else-1!==d&&(u-=u-d),d=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var c=!0,f=0;f<l;f++)if(i(e,u+f)!==i(t,f)){c=!1;break}if(c)return u}return-1}function E(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function x(e,t,n,r){return K(q(t,e.length-n),e,n,r)}function T(e,t,n,r){return K(G(t),e,n,r)}function P(e,t,n,r){return T(e,t,n,r)}function j(e,t,n,r){return K(Y(t),e,n,r)}function S(e,t,n,r){return K(Z(t,e.length-n),e,n,r)}function M(e,t,n){return 0===t&&n===e.length?J.fromByteArray(e):J.fromByteArray(e.slice(t,n))}function O(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=n){var l,u,d,c;switch(s){case 1:i<128&&(o=i);break;case 2:128==(192&(l=e[a+1]))&&(c=(31&i)<<6|63&l)>127&&(o=c);break;case 3:l=e[a+1],u=e[a+2],128==(192&l)&&128==(192&u)&&(c=(15&i)<<12|(63&l)<<6|63&u)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:l=e[a+1],u=e[a+2],d=e[a+3],128==(192&l)&&128==(192&u)&&128==(192&d)&&(c=(15&i)<<18|(63&l)<<12|(63&u)<<6|63&d)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=s}return I(r)}function I(e){var t=e.length;if(t<=ee)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=W(e[i]);return a}function A(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,a,o){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function U(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function B(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function N(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(e,t,n,r,a){return a||N(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),$.write(e,t,n,r,23,4),n+4}function z(e,t,n,r,a){return a||N(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),$.write(e,t,n,r,52,8),n+8}function H(e){if((e=V(e).replace(te,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function W(e){return e<16?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var n,r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function G(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Z(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,a=n%256,i.push(a),i.push(r);return i}function Y(e){return J.toByteArray(H(e))}function K(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function X(e){return e!==e}var J=n(49),$=n(50),Q=n(28);t.Buffer=i,t.SlowBuffer=g,t.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,n){return s(null,e,t,n)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,void 0!==o&&o.species&&i[o.species]===i&&Object.defineProperty(i,o.species,{value:null,configurable:!0})),i.alloc=function(e,t,n){return u(null,e,t,n)},i.allocUnsafe=function(e){return d(null,e)},i.allocUnsafeSlow=function(e){return d(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,o=Math.min(n,r);a<o;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=i.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var o=e[n];if(!i.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,a),a+=o.length}return r},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?O(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,n,r,a){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var o=a-r,s=n-t,l=Math.min(o,s),u=this.slice(r,a),d=e.slice(t,n),c=0;c<l;++c)if(u[c]!==d[c]){o=u[c],s=d[c];break}return o<s?-1:s<o?1:0},i.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},i.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},i.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},i.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return x(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return P(this,e,t,n);case"base64":return j(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;i.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(i.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=i.prototype;else{var a=t-e;r=new i(a,void 0);for(var o=0;o<a;++o)r[o]=this[o+e]}return r},i.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return r},i.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},i.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],a=1,i=0;++i<t&&(a*=256);)r+=this[e+i]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},i.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,a=1,i=this[e+--r];r>0&&(a*=256);)i+=this[e+--r]*a;return a*=128,i>=a&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),$.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),$.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=1,i=0;for(this[t]=255&e;++i<n&&(a*=256);)this[t+i]=e/a&255;return t+n},i.prototype.writeUIntBE=function(e,t,n,r){e=+e,t|=0,n|=0,r||R(this,e,t,n,Math.pow(2,8*n)-1,0);var a=n-1,i=1;for(this[t+a]=255&e;--a>=0&&(i*=256);)this[t+a]=e/i&255;return t+n},i.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):B(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var i=0,o=1,s=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},i.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);R(this,e,t,n,a-1,-a)}var i=n-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+n},i.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):U(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):U(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):B(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):B(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,n){return F(this,e,t,!0,n)},i.prototype.writeFloatBE=function(e,t,n){return F(this,e,t,!1,n)},i.prototype.writeDoubleLE=function(e,t,n){return z(this,e,t,!0,n)},i.prototype.writeDoubleBE=function(e,t,n){return z(this,e,t,!1,n)},i.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,o=r-n;if(this===e&&n<t&&t<r)for(a=o-1;a>=0;--a)e[a+t]=this[a+n];else if(o<1e3||!i.TYPED_ARRAY_SUPPORT)for(a=0;a<o;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},i.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!i.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=i.isBuffer(e)?e:q(new i(e,r).toString()),l=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(t,n(2))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*e.readUint16()*256+e.readUint16()).toString(16)).substr(-8)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function i(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){p&&h&&(p=!1,h.length?m=h.concat(m):g=-1,m.length&&s())}function s(){if(!p){var e=a(o);p=!0;for(var t=m.length;t;){for(h=m,m=[];++g<t;)h&&h[g].run();g=-1,t=m.length}h=null,p=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d,c,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var h,m=[],p=!1,g=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new l(e,t)),1!==m.length||p||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=u,f.addListener=u,f.once=u,f.off=u,f.removeListener=u,f.removeAllListeners=u,f.emit=u,f.prependListener=u,f.prependOnceListener=u,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);u.call(this,e),d.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||o(i,this)}function i(e){e.end()}var o=n(14),s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var l=n(6);l.inherits=n(7);var u=n(31),d=n(35);l.inherits(r,u);for(var c=s(d.prototype),f=0;f<c.length;f++){var h=c[f];r.prototype[h]||(r.prototype[h]=d.prototype[h])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),o(t,e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return void 0!==e.parser?e.parser:t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(10),s=function(){function e(t,n,a){r(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=a}return i(e,[{key:"uint16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readUint16(this.byteArray,n.dataOffset+2*t)}},{key:"int16",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readInt16(this.byteArray,n.dataOffset+2*t)}},{key:"uint32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readUint32(this.byteArray,n.dataOffset+4*t)}},{key:"int32",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readInt32(this.byteArray,n.dataOffset+4*t)}},{key:"float",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readFloat(this.byteArray,n.dataOffset+4*t)}},{key:"double",value:function(e,t){var n=this.elements[e];if(t=void 0!==t?t:0,n&&0!==n.length)return a(n,this.byteArrayParser).readDouble(this.byteArray,n.dataOffset+8*t)}},{key:"numStringValues",value:function(e){var t=this.elements[e];if(t&&t.length>0){var n=(0,o.readFixedString)(this.byteArray,t.dataOffset,t.length).match(/\\/g);return null===n?1:n.length+1}}},{key:"string",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,o.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].trim():r.trim()}}},{key:"text",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){var r=(0,o.readFixedString)(this.byteArray,n.dataOffset,n.length);return t>=0?r.split("\\")[t].replace(/ +$/,""):r.replace(/ +$/,"")}}},{key:"floatString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseFloat(r)}}},{key:"intString",value:function(e,t){var n=this.elements[e];if(n&&n.length>0){t=void 0!==t?t:0;var r=this.string(e,t);if(void 0!==r)return parseInt(r)}}},{key:"attributeTag",value:function(e){var t=this.elements[e];if(t&&4===t.length){var n=a(t,this.byteArrayParser).readUint16,r=this.byteArray,i=t.dataOffset;return"x"+("00000000"+(256*n(r,i)*256+n(r,i+2)).toString(16)).substr(-8)}}}]),e}();t.default=s},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function a(e){return null===e}function i(e){return null==e}function o(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function d(e){return"[object RegExp]"===g(e)}function c(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function m(e){return"function"==typeof e}function p(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=a,t.isNullOrUndefined=i,t.isNumber=o,t.isString=s,t.isSymbol=l,t.isUndefined=u,t.isRegExp=d,t.isObject=c,t.isDate=f,t.isError=h,t.isFunction=m,t.isPrimitive=p,t.isBuffer=e.isBuffer}).call(t,n(0).Buffer)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var a=e.elements;t.position<n;){var i=(0,o.default)(t,e.warnings,r.untilTag);if(a[i.tag]=i,i.tag===r.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var a=e.elements;t.position<n;){var i=(0,s.default)(t,r.untilTag,r.vrCallback);if(a[i.tag]=i,i.tag===r.untilTag)return}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDicomDataSetExplicit=a,t.parseDicomDataSetImplicit=i;var o=r(n(9)),s=r(n(18))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var r={tag:(0,l.default)(e),vr:e.readFixedString(2)};return 2===d(r.vr)?(r.length=e.readUint16(),r.dataOffset=e.position):(e.seek(2),r.length=e.readUint32(),r.dataOffset=e.position),4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===n?r:"SQ"===r.vr?((0,u.default)(e,r,t),r):4294967295===r.length?"x7fe00010"===r.tag?((0,i.default)(e,r,t),r):"UN"===r.vr?((0,o.default)(e,r),r):((0,s.default)(e,r),r):(e.seek(r.length),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(24)),o=r(n(25)),s=r(n(17)),l=r(n(1)),u=r(n(26)),d=function(e){return"OB"===e||"OW"===e||"SQ"===e||"OF"===e||"UT"===e||"UN"===e?4:2}},function(e,t,n){"use strict";function r(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r,a="",i=0;i<n;i++){if(0===(r=e[t+i]))return t+=n,a;a+=String.fromCharCode(r)}return a}Object.defineProperty(t,"__esModule",{value:!0}),t.readFixedString=r},function(e,t,n){"use strict";function r(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:(0,a.default)(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+e.position;return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1))},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(13)),o=n(10),s=function(){function t(n,a,i){if(r(this,t),void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===a)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(a instanceof Uint8Array==0&&a instanceof e==0)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(i<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(i>=a.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=n,this.byteArray=a,this.position=i||0,this.warnings=[]}return a(t,[{key:"seek",value:function(e){if(this.position+e<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=e}},{key:"readByteStream",value:function(e){if(this.position+e>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var n=(0,i.default)(this.byteArray,this.position,e);return this.position+=e,new t(this.byteArrayParser,n)}},{key:"readUint16",value:function(){var e=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,e}},{key:"readUint32",value:function(){var e=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,e}},{key:"readFixedString",value:function(e){var t=(0,o.readFixedString)(this.byteArray,this.position,e);return this.position+=e,t}}]),t}();t.default=s}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(e){function n(t,n,r){if(void 0!==e&&t instanceof e)return t.slice(n,n+r);if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset+n,r);throw"dicomParser.from: unknown type for byteArray"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(t){function n(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,a)});default:for(i=new Array(s-1),o=0;o<i.length;)i[o++]=arguments[o];return t.nextTick(function(){e.apply(null,i)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(3))},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],o.set(i,a),a+=i.length;return o}},i={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},a=function(e){return r[e]},i=function(e){return parseInt(e[4])%2==1},o=function(e){if(void 0!==e){var t=e.split("^");return{familyName:t[0],givenName:t[1],middleName:t[2],prefix:t[3],suffix:t[4]}}};t.isStringVr=a,t.isPrivateTag=i,t.parsePN=o},function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var r={tag:(0,s.default)(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===t?r:l(r,e,n)?((0,o.default)(e,r),r):r.hadUndefinedLength?((0,i.default)(e,r),r):(e.seek(r.length),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(17)),o=r(n(27)),s=r(n(1)),l=function(e,t,n){if(void 0!==n)return"SQ"===n(e.tag);if(t.position+4<=t.byteArray.length){var r=(0,s.default)(t);return t.seek(-4),"xfffee000"===r||"xfffee0dd"===r}return t.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},function(e,t,n){"use strict";(function(e){function n(t,n){if(void 0!==e&&t instanceof e)return e.alloc(n);if(t instanceof Uint8Array)return new Uint8Array(n);throw"dicomParser.alloc: unknown type for byteArray"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}).call(t,n(0).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return e[t]+256*e[t+1]},readInt16:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=e[t]+(e[t+1]<<8);return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return e[t]+256*e[t+1]+256*e[t+2]*256+256*e[t+3]*256*256},readInt32:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24)},readFloat:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],n[3]=e[t+3],n[4]=e[t+4],n[5]=e[t+5],n[6]=e[t+6],n[7]=e[t+7],new Float64Array(n.buffer)[0]}}},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}var i=n(0),o=i.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=a),r(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){if(r=r||1,a=a||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(r<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+r>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var d=new o.default(e.byteArrayParser,e.byteArray,t.dataOffset),c=(0,s.default)(d);if("xfffee000"!==c.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";d.seek(c.length);var f=d.position;if(1===r)return(0,l.default)(d.byteArray,f+a[n].offset+8,a[n].length);for(var h=u(a,n,r),m=(0,i.default)(d.byteArray,h),p=0,g=n;g<n+r;g++)for(var v=f+a[g].offset+8,y=0;y<a[g].length;y++)m[p++]=d.byteArray[v++];return m}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(19)),o=r(n(12)),s=r(n(11)),l=r(n(13)),u=function(e,t,n){for(var r=0,a=t;a<t+n;a++)r+=e[a].length;return r}},function(e,t,n){"use strict";function r(e,t){function n(t,n){for(var r="",a=0;a<t;a++)0!==a&&(r+="/"),r+=n.call(e,o,a).toString();return r}if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var r,i=t.vr,o=t.tag;if(!0===a.isStringVr(i))r=e.string(o);else{if("AT"===i){var s=e.uint32(o);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"===i?r=n(t.length/2,e.uint16):"SS"===i?r=n(t.length/2,e.int16):"UL"===i?r=n(t.length/4,e.uint32):"SL"===i?r=n(t.length/4,e.int32):"FD"===i?r=n(t.length/8,e.double):"FL"===i&&(r=n(t.length/4,e.float))}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(16))},function(e,t,n){"use strict";function r(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==(0,a.default)(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,i=0;i<r;i++){var o=e.readUint32();t.basicOffsetTable.push(o)}for(var s=e.position;e.position<e.byteArray.length;){var l=(0,a.default)(e),u=e.readUint32();if("xfffee0dd"===l)return e.seek(u),void(t.length=e.position-t.dataOffset);if("xfffee000"!==l)return n&&n.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),u>e.byteArray.length-e.position&&(u=e.byteArray.length-e.position),t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u)}n&&n.push("pixel data element "+t.tag+" missing sequence delimiter tag xfffee0dd")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(1))},function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=e.byteArray.length-8;e.position<=n;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n={};e.position<e.byteArray.length;){var r=(0,d.default)(e,t);if(n[r.tag]=r,"xfffee00d"===r.tag)return new u.default(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new u.default(e.byteArrayParser,e.byteArray,n)}function i(e,t){var n=(0,c.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=a(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new u.default(e.byteArrayParser,e.byteArray,{}),h.parseDicomDataSetExplicit(n.dataSet,e,e.position+n.length)),n}function o(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,f.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=i(e,n);t.items.push(a)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}function s(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=i(e,n);t.items.push(a)}}function l(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?o(e,t,n):s(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=r(n(5)),d=r(n(9)),c=r(n(11)),f=r(n(1)),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){for(var n={};e.position<e.byteArray.length;){var r=(0,d.default)(e,void 0,t);if(n[r.tag]=r,"xfffee00d"===r.tag)return new u.default(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new u.default(e.byteArrayParser,e.byteArray,n)}function i(e,t){var n=(0,c.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=a(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new u.default(e.byteArrayParser,e.byteArray,{}),h.parseDicomDataSetImplicit(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}function o(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,f.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=i(e,n);t.items.push(a)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}function s(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=i(e,n);t.items.push(a)}}function l(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?o(e,t,n):s(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=r(n(5)),d=r(n(18)),c=r(n(11)),f=r(n(1)),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(8))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(e[t]<<8)+e[t+1]},readInt16:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(t+2>e.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var n=(e[t]<<8)+e[t+1];return 32768&n&&(n=n-65535-1),n},readUint32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*e[t]+e[t+1])+e[t+2])+e[t+3]},readInt32:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(e[t]<<24)+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3]},readFloat:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(t+4>e.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var n=new Uint8Array(4);return n[3]=e[t],n[2]=e[t+1],n[1]=e[t+2],n[0]=e[t+3],new Float32Array(n.buffer)[0]},readDouble:function(e,t){if(t<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(t+8>e.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var n=new Uint8Array(8);return n[7]=e[t],n[6]=e[t+1],n[5]=e[t+2],n[4]=e[t+3],n[3]=e[t+4],n[2]=e[t+5],n[1]=e[t+6],n[0]=e[t+7],new Float64Array(n.buffer)[0]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){if(r.seek(128),"DICM"!==r.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var r=new i.default(s.default,e);return function(){n();for(var e=[],t={};r.position<r.byteArray.length;){var a=r.position,i=(0,l.default)(r,e);if(i.tag>"x0002ffff"){r.position=a;break}i.parser=s.default,t[i.tag]=i}var u=new o.default(r.byteArrayParser,r.byteArray,t);return u.warnings=r.warnings,u.position=r.position,u}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(12)),o=r(n(5)),s=r(n(20)),l=r(n(9))},function(e,t,n){"use strict";(function(t,r){function a(e){return U.from(e)}function i(e){return U.isBuffer(e)||e instanceof B}function o(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?A(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){k=k||n(4),e=e||{},this.objectMode=!!e.objectMode,t instanceof k&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new V,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(H||(H=n(36).StringDecoder),this.decoder=new H(e.encoding),this.encoding=e.encoding)}function l(e){if(k=k||n(4),!(this instanceof l))return new l(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),R.call(this)}function u(e,t,n,r,i){var o=e._readableState;if(null===t)o.reading=!1,p(e,o);else{var s;i||(s=c(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===U.prototype||(t=a(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):d(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?d(e,o,t,!1):y(e,o)):d(e,o,t,!1))):r||(o.reading=!1)}return f(o)}function d(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),y(e,t)}function c(e,t){var n;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=G?e=G:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function m(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function p(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(z("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?L(v,e):v(e))}function v(e){z("emit readable"),e.emit("readable"),T(e)}function y(e,t){t.readingMore||(t.readingMore=!0,L(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(z("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;z("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&D(e,"data")&&(t.flowing=!0,T(e))}}function w(e){z("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,L(x,e,t))}function x(e,t){t.reading||(z("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(z("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=j(e,t.buffer,t.decoder),n}function j(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?S(e,t):M(e,t),r}function S(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(o===i.length?a+=i:a+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(o));break}++r}return t.length-=r,a}function M(e,t){var n=U.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,o),0==(e-=o)){o===i.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(o));break}++a}return t.length-=a,n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,L(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var L=n(14);e.exports=l;var k,A=n(28);l.ReadableState=s;var D=(n(32).EventEmitter,function(e,t){return e.listeners(t).length}),R=n(33),U=n(21).Buffer,B=t.Uint8Array||function(){},N=n(6);N.inherits=n(7);var F=n(57),z=void 0;z=F&&F.debuglog?F.debuglog("stream"):function(){};var H,V=n(58),W=n(34);N.inherits(l,R);var q=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=W.destroy,l.prototype._undestroy=W.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=U.from(e,t),t=""),n=!0),u(this,e,t,!1,n)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return H||(H=n(36).StringDecoder),this._readableState.decoder=new H(e),this._readableState.encoding=e,this};var G=8388608;l.prototype.read=function(e){z("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return z("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):g(this),null;if(0===(e=m(e,t))&&t.ended)return 0===t.length&&O(this),null;var r=t.needReadable;z("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,z("length less than watermark",r)),t.ended||t.reading?(r=!1,z("reading or ended",r)):r&&(z("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=m(n,t)));var a;return null===(a=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==a&&this.emit("data",a),a},l.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function n(e,t){z("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function a(){z("onend"),e.end()}function i(){z("cleanup"),e.removeListener("close",u),e.removeListener("finish",d),e.removeListener("drain",p),e.removeListener("error",l),e.removeListener("unpipe",n),f.removeListener("end",a),f.removeListener("end",c),f.removeListener("data",s),g=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||p()}function s(t){z("ondata"),v=!1,!1!==e.write(t)||v||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==C(h.pipes,e))&&!g&&(z("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,v=!0),f.pause())}function l(t){z("onerror",t),c(),e.removeListener("error",l),0===D(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",d),c()}function d(){z("onfinish"),e.removeListener("close",u),c()}function c(){z("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,z("pipe count=%d opts=%j",h.pipesCount,t);var m=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?a:c;h.endEmitted?L(m):f.once("end",m),e.on("unpipe",n);var p=_(f);e.on("drain",p);var g=!1,v=!1;return f.on("data",s),o(e,"error",l),e.once("close",u),e.once("finish",d),e.emit("pipe",f),h.flowing||(z("pipe resume"),f.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,n);return this}var o=C(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},l.prototype.on=function(e,t){var n=R.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):L(w,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(z("resume"),e.flowing=!0,E(this,e)),this},l.prototype.pause=function(){return z("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(z("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(z("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){z("wrapped data"),t.decoder&&(a=t.decoder.write(a)),(!t.objectMode||null!==a&&void 0!==a)&&(t.objectMode||a&&a.length)&&(r.push(a)||(n=!0,e.pause()))});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<q.length;i++)e.on(q[i],r.emit.bind(r,q[i]));return r._read=function(t){z("wrapped _read",t),n&&(n=!1,e.resume())},r},l._fromList=P}).call(t,n(2),n(3))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),a=u.length,l=0;l<a;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){e.exports=n(32).EventEmitter},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;r||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}var o=n(14);e.exports={destroy:r,undestroy:a}},function(e,t,n){"use strict";(function(t,r,a){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){M(t,e)}}function s(e){return D.from(e)}function l(e){return D.isBuffer(e)||e instanceof R}function u(){}function d(e,t){I=I||n(4),e=e||{},this.objectMode=!!e.objectMode,t instanceof I&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===e.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){b(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function c(e){if(I=I||n(4),!(B.call(c,this)||this instanceof I))return new c(e);this._writableState=new d(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),A.call(this)}function f(e,t){var n=new Error("write after end");e.emit("error",n),O(t,n)}function h(e,t,n,r){var a=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),O(r,i),a=!1),a}function m(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=D.from(t,n)),t}function p(e,t,n,r,a,i){if(!n){var o=m(t,r,a);r!==o&&(n=!0,a="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else g(e,t,!1,s,r,a,i);return l}function g(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function v(e,t,n,r,a){--t.pendingcb,n?(O(a,r),O(j,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),j(e,t))}function y(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function b(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(y(n),t)v(e,n,r,t,a);else{var i=x(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?C(_,e,n,i,a):_(e,n,i,a)}}function _(e,t,n,r){n||w(e,t),t.pendingcb--,r(),j(e,t)}function w(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0,l=!0;n;)a[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;a.allBuffers=l,g(e,t,!0,t.length,a,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new i(t)}else{for(;n;){var u=n.chunk,d=n.encoding,c=n.callback;if(g(e,t,!1,t.objectMode?1:u.length,u,d,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function x(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),j(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,O(T,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function j(e,t){var n=x(t);return n&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function S(e,t,n){t.ending=!0,j(e,t),n&&(t.finished?O(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function M(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var O=n(14);e.exports=c;var I,C=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:O;c.WritableState=d;var L=n(6);L.inherits=n(7);var k={deprecate:n(61)},A=n(33),D=n(21).Buffer,R=a.Uint8Array||function(){},U=n(34);L.inherits(c,A),d.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(d.prototype,"buffer",{get:k.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var B;"function"==typeof o&&o.hasInstance&&"function"==typeof Function.prototype[o.hasInstance]?(B=Function.prototype[o.hasInstance],Object.defineProperty(c,o.hasInstance,{value:function(e){return!!B.call(this,e)||e&&e._writableState instanceof d}})):B=function(e){return e instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(e,t,n){var r=this._writableState,a=!1,i=l(e)&&!r.objectMode;return i&&!D.isBuffer(e)&&(e=s(e)),"function"==typeof t&&(n=t,t=null),i?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=u),r.ended?f(this,n):(i||h(this,r,e,n))&&(r.pendingcb++,a=p(this,r,i,e,t,n)),a},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},c.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},c.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||S(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),c.prototype.destroy=U.destroy,c.prototype._undestroy=U.undestroy,c.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(3),n(59).setImmediate,n(2))},function(e,t,n){function r(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function a(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=n(0).Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=a)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((a=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&a<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var r=(t+=e.toString(this.encoding,0,r)).length-1,a=t.charCodeAt(r);if(a>=55296&&a<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,a=this.encoding;t+=r.slice(0,n).toString(a)}return t}},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return a(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e,t,n){var r=e._transformState;r.transforming=!1;var a=r.writecb;if(!a)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),a(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,a=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(4),l=n(6);l.inherits=n(7),l.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}e.exports=r},function(e,t,n){"use strict";function r(e,t,n,r){var i=a,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^t[s])];return-1^e}var a=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();e.exports=r},function(e,t,n){(function(e,r){function a(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),l(r,e,r.depth)}function i(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,r){if(e.customInspect&&n&&j(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return b(a)||(a=l(e,a,r)),a}var i=u(e,n);if(i)return i;var o=Object.keys(n),p=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),P(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(n);if(0===o.length){if(j(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(P(n))return d(n)}var v="",y=!1,_=["{","}"];if(m(n)&&(y=!0,_=["[","]"]),j(n)&&(v=" [Function"+(n.name?": "+n.name:"")+"]"),E(n)&&(v=" "+RegExp.prototype.toString.call(n)),T(n)&&(v=" "+Date.prototype.toUTCString.call(n)),P(n)&&(v=" "+d(n)),0===o.length&&(!y||0==n.length))return _[0]+v+_[1];if(r<0)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=y?c(e,n,r,p,o):o.map(function(t){return f(e,n,r,p,t,y)}),e.seen.pop(),h(w,v,_)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)C(t,String(o))?i.push(f(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(f(e,t,n,r,a,!0))}),i}function f(e,t,n,r,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),C(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===M(e)}function x(e){return"object"==typeof e&&null!==e}function T(e){return x(e)&&"[object Date]"===M(e)}function P(e){return x(e)&&("[object Error]"===M(e)||e instanceof Error)}function j(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function M(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function I(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var L=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(L,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])g(s)||!x(s)?o+=" "+s:o+=" "+a(s);return o},t.deprecate=function(n,a){function i(){if(!o){if(r.throwDeprecation)throw new Error(a);r.traceDeprecation?console.trace(a):console.error(a),o=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return i};var k,A={};t.debuglog=function(e){if(w(k)&&(k=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(k)){var n=r.pid;A[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else A[e]=function(){};return A[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=p,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=_,t.isUndefined=w,t.isRegExp=E,t.isObject=x,t.isDate=T,t.isError=P,t.isFunction=j,t.isPrimitive=S,t.isBuffer=n(71);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=n(72),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(2),n(3))},function(e,t,n){"use strict";function r(e,t,n,r,s){if(r=r||t.basicOffsetTable,s=s||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=r[n],u=i(s,l);if(void 0===u)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var d=o(n,r,s,u);return(0,a.default)(e,t,u,d,s)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(22)),i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].offset===t)return n},o=function(e,t,n,r){if(e===t.length-1)return n.length-r;for(var a=t[e+1],i=r+1;i<n.length;i++)if(n[i].offset===a)return i-r;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(44);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(8);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=n(10);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=n(19);Object.defineProperty(t,"alloc",{enumerable:!0,get:function(){return r(s).default}});var l=n(51);Object.defineProperty(t,"version",{enumerable:!0,get:function(){return r(l).default}});var u=n(29);Object.defineProperty(t,"bigEndianByteArrayParser",{enumerable:!0,get:function(){return r(u).default}});var d=n(12);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function(){return r(d).default}});var c=n(13);Object.defineProperty(t,"sharedCopy",{enumerable:!0,get:function(){return r(c).default}});var f=n(5);Object.defineProperty(t,"DataSet",{enumerable:!0,get:function(){return r(f).default}});var h=n(25);Object.defineProperty(t,"findAndSetUNElementLength",{enumerable:!0,get:function(){return r(h).default}});var m=n(24);Object.defineProperty(t,"findEndOfEncapsulatedElement",{enumerable:!0,get:function(){return r(m).default}});var p=n(17);Object.defineProperty(t,"findItemDelimitationItemAndSetElementLength",{enumerable:!0,get:function(){return r(p).default}});var g=n(20);Object.defineProperty(t,"littleEndianByteArrayParser",{enumerable:!0,get:function(){return r(g).default}});var v=n(52);Object.defineProperty(t,"parseDicom",{enumerable:!0,get:function(){return r(v).default}});var y=n(9);Object.defineProperty(t,"readDicomElementExplicit",{enumerable:!0,get:function(){return r(y).default}});var b=n(18);Object.defineProperty(t,"readDicomElementImplicit",{enumerable:!0,get:function(){return r(b).default}});var _=n(42);Object.defineProperty(t,"readEncapsulatedImageFrame",{enumerable:!0,get:function(){return r(_).default}});var w=n(74);Object.defineProperty(t,"readEncapsulatedPixelData",{enumerable:!0,get:function(){return r(w).default}});var E=n(22);Object.defineProperty(t,"readEncapsulatedPixelDataFromFragments",{enumerable:!0,get:function(){return r(E).default}});var x=n(30);Object.defineProperty(t,"readPart10Header",{enumerable:!0,get:function(){return r(x).default}});var T=n(26);Object.defineProperty(t,"readSequenceItemsExplicit",{enumerable:!0,get:function(){return r(T).default}});var P=n(27);Object.defineProperty(t,"readSequenceItemsImplicit",{enumerable:!0,get:function(){return r(P).default}});var j=n(11);Object.defineProperty(t,"readSequenceItem",{enumerable:!0,get:function(){return r(j).default}});var S=n(1);Object.defineProperty(t,"readTag",{enumerable:!0,get:function(){return r(S).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(45);Object.defineProperty(t,"parseTM",{enumerable:!0,get:function(){return r(i).default}});var o=n(46);Object.defineProperty(t,"parseDA",{enumerable:!0,get:function(){return r(o).default}});var s=n(23);Object.defineProperty(t,"explicitElementToString",{enumerable:!0,get:function(){return r(s).default}});var l=n(47);Object.defineProperty(t,"explicitDataSetToJS",{enumerable:!0,get:function(){return r(l).default}});var u=n(48);Object.defineProperty(t,"createJPEGBasicOffsetTable",{enumerable:!0,get:function(){return r(u).default}})},function(e,t,n){"use strict";function r(e,t){if(e.length>=2){var n=parseInt(e.substring(0,2),10),r=e.length>=4?parseInt(e.substring(2,4),10):void 0,a=e.length>=6?parseInt(e.substring(4,6),10):void 0,i=e.length>=8?parseInt(e.substring(7,13),10):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==a&&isNaN(a)||void 0!==i&&isNaN(i)||n<0||n>23||r&&(r<0||r>59)||a&&(a<0||a>59)||i&&(i<0||i>999999)))throw"invalid TM '"+e+"'";return{hours:n,minutes:r,seconds:a,fractionalSeconds:i}}if(t)throw"invalid TM '"+e+"'"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}function a(e,t,n){return!isNaN(n)&&t>0&&t<=12&&e>0&&e<=r(t,n)}function i(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);if(t&&!0!==a(i,r,n))throw"invalid DA '"+e+"'";return{year:n,month:r,day:i}}if(t)throw"invalid DA '"+e+"'"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";t=t||{omitPrivateAttibutes:!0,maxElementLength:128};var n={};for(var o in e.elements){var s=e.elements[o];if(!0!==t.omitPrivateAttibutes||!i.isPrivateTag(o))if(s.items){for(var l=[],u=0;u<s.items.length;u++)l.push(r(s.items[u].dataSet,t));n[o]=l}else{var d;d=void 0,s.length<t.maxElementLength&&(d=(0,a.default)(e,s)),n[o]=void 0!==d?d:{dataOffset:s.dataOffset,length:s.length}}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(23)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(16))},function(e,t,n){"use strict";function r(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function a(e,t,n){var a=t.fragments[n];return!(!r(e,a.position+a.length-2)&&!r(e,a.position+a.length-3))}function i(e,t,n){for(var r=n;r<t.fragments.length;r++)if(a(e,t,r))return r}function o(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],a=0;;){r.push(t.fragments[a].offset);var o=i(e,t,a);if(void 0===o||o===t.fragments.length-1)return r;a=o+1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return 3*e.length/4-r(e)}function i(e){var t,n,a,i,o,s=e.length;i=r(e),o=new c(3*s/4-i),n=i>0?s-4:s;var l=0;for(t=0;t<n;t+=4)a=d[e.charCodeAt(t)]<<18|d[e.charCodeAt(t+1)]<<12|d[e.charCodeAt(t+2)]<<6|d[e.charCodeAt(t+3)],o[l++]=a>>16&255,o[l++]=a>>8&255,o[l++]=255&a;return 2===i?(a=d[e.charCodeAt(t)]<<2|d[e.charCodeAt(t+1)]>>4,o[l++]=255&a):1===i&&(a=d[e.charCodeAt(t)]<<10|d[e.charCodeAt(t+1)]<<4|d[e.charCodeAt(t+2)]>>2,o[l++]=a>>8&255,o[l++]=255&a),o}function o(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(o(r));return a.join("")}function l(e){for(var t,n=e.length,r=n%3,a="",i=[],o=0,l=n-r;o<l;o+=16383)i.push(s(e,o,o+16383>l?l:o+16383));return 1===r?(t=e[n-1],a+=u[t>>2],a+=u[t<<4&63],a+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],a+=u[t>>10],a+=u[t>>4&63],a+=u[t<<2&63],a+="="),i.push(a),i.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=l;for(var u=[],d=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=f.length;h<m;++h)u[h]=f[h],d[f.charCodeAt(h)]=h;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?a-1:0,f=n?-1:1,h=e[t+c];for(c+=f,i=h&(1<<-d)-1,h>>=-d,d+=s;d>0;i=256*i+e[t+c],c+=f,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=256*o+e[t+c],c+=f,d-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,d=(1<<u)-1,c=d>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=d?(s=0,o=d):o+c>=1?(s=(t*l-1)*Math.pow(2,a),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&s,h+=m,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+h]=255&o,h+=m,o/=256,u-=8);e[n+h-m]|=128*p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.7.6"},function(e,t,n){"use strict";(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(t,r){function a(e){if(void 0===e.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=e.elements.x00020010;return h.readFixedString(t,n.dataOffset,n.length)}function i(e){return"1.2.840.10008.1.2"!==e}function p(a,i){if("1.2.840.10008.1.2.1.99"===a){if(r&&r.inflater){var u=r.inflater(t,i);return new l.default(d.default,u,0)}if(void 0!==e&&this.module!==e){var c=n(54),h=(0,f.default)(t,i,t.length-i),m=c.inflateRawSync(h),p=(0,o.default)(t,m.length+i);return t.copy(p,0,0,i),m.copy(p,i),new l.default(d.default,p,0)}if("undefined"!=typeof pako){var g=t.slice(i),v=pako.inflateRaw(g),y=(0,o.default)(t,v.length+i);return y.set(t.slice(0,i),0),y.set(v,i),new l.default(d.default,y,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===a?new l.default(s.default,t,i):new l.default(d.default,t,i)}function g(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}function v(e){var t=a(e),n=i(t),o=p(t,e.position),s={},l=new u.default(o.byteArrayParser,o.byteArray,s);l.warnings=o.warnings;try{n?m.parseDicomDataSetExplicit(l,o,o.byteArray.length,r):m.parseDicomDataSetImplicit(l,o,o.byteArray.length,r)}catch(e){throw{exception:e,dataSet:l}}return l}if(void 0===t)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return function(){var e=(0,c.default)(t,r);return g(e,v(e))}()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=a(n(19)),s=a(n(29)),l=a(n(12)),u=a(n(5)),d=a(n(20)),c=a(n(30)),f=a(n(13)),h=r(n(10)),m=r(n(8))}).call(t,n(53)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){function a(t,n,r){function a(){for(var e;null!==(e=t.read());)s.push(e),l+=e.length;t.once("readable",a)}function i(e){t.removeListener("end",o),t.removeListener("readable",a),r(e)}function o(){var n=e.concat(s,l);s=[],r(null,n),t.close()}var s=[],l=0;t.on("error",i),t.on("end",o),t.end(n),a()}function i(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=p.Z_FINISH;return t._processChunk(n,r)}function o(e){if(!(this instanceof o))return new o(e);h.call(this,e,p.DEFLATE)}function s(e){if(!(this instanceof s))return new s(e);h.call(this,e,p.INFLATE)}function l(e){if(!(this instanceof l))return new l(e);h.call(this,e,p.GZIP)}function u(e){if(!(this instanceof u))return new u(e);h.call(this,e,p.GUNZIP)}function d(e){if(!(this instanceof d))return new d(e);h.call(this,e,p.DEFLATERAW)}function c(e){if(!(this instanceof c))return new c(e);h.call(this,e,p.INFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);h.call(this,e,p.UNZIP)}function h(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,m.call(this,n),n.flush&&n.flush!==p.Z_NO_FLUSH&&n.flush!==p.Z_PARTIAL_FLUSH&&n.flush!==p.Z_SYNC_FLUSH&&n.flush!==p.Z_FULL_FLUSH&&n.flush!==p.Z_FINISH&&n.flush!==p.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||p.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new p.Zlib(r);var a=this;this._hadError=!1,this._binding.onerror=function(e,n){a._binding=null,a._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],a.emit("error",r)};var i=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(i=n.level);var o=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(o=n.strategy),this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,i,n.memLevel||t.Z_DEFAULT_MEMLEVEL,o,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=o,this.once("end",this.close)}var m=n(55),p=n(63),g=n(41),v=n(73).ok;p.Z_MIN_WINDOWBITS=8,p.Z_MAX_WINDOWBITS=15,p.Z_DEFAULT_WINDOWBITS=15,p.Z_MIN_CHUNK=64,p.Z_MAX_CHUNK=1/0,p.Z_DEFAULT_CHUNK=16384,p.Z_MIN_MEMLEVEL=1,p.Z_MAX_MEMLEVEL=9,p.Z_DEFAULT_MEMLEVEL=8,p.Z_MIN_LEVEL=-1,p.Z_MAX_LEVEL=9,p.Z_DEFAULT_LEVEL=p.Z_DEFAULT_COMPRESSION,Object.keys(p).forEach(function(e){e.match(/^Z/)&&(t[e]=p[e])}),t.codes={Z_OK:p.Z_OK,Z_STREAM_END:p.Z_STREAM_END,Z_NEED_DICT:p.Z_NEED_DICT,Z_ERRNO:p.Z_ERRNO,Z_STREAM_ERROR:p.Z_STREAM_ERROR,Z_DATA_ERROR:p.Z_DATA_ERROR,Z_MEM_ERROR:p.Z_MEM_ERROR,Z_BUF_ERROR:p.Z_BUF_ERROR,Z_VERSION_ERROR:p.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=o,t.Inflate=s,t.Gzip=l,t.Gunzip=u,t.DeflateRaw=d,t.InflateRaw=c,t.Unzip=f,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new s(e)},t.createDeflateRaw=function(e){return new d(e)},t.createInflateRaw=function(e){return new c(e)},t.createGzip=function(e){return new l(e)},t.createGunzip=function(e){return new u(e)},t.createUnzip=function(e){return new f(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new o(t),e,n)},t.deflateSync=function(e,t){return i(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new l(t),e,n)},t.gzipSync=function(e,t){return i(new l(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new d(t),e,n)},t.deflateRawSync=function(e,t){return i(new d(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new f(t),e,n)},t.unzipSync=function(e,t){return i(new f(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new s(t),e,n)},t.inflateSync=function(e,t){return i(new s(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new u(t),e,n)},t.gunzipSync=function(e,t){return i(new u(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new c(t),e,n)},t.inflateRawSync=function(e,t){return i(new c(t),e)},g.inherits(h,m),h.prototype.params=function(e,n,a){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var i=this;this.flush(p.Z_SYNC_FLUSH,function(){i._binding.params(e,n),i._hadError||(i._level=e,i._strategy=n,a&&a())})}else r.nextTick(a)},h.prototype.reset=function(){return this._binding.reset()},h.prototype._flush=function(t){this._transform(new e(0),"",t)},h.prototype.flush=function(t,n){var a=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=p.Z_FULL_FLUSH),a.ended)n&&r.nextTick(n);else if(a.ending)n&&this.once("end",n);else if(a.needDrain){var i=this;this.once("drain",function(){i.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},h.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},h.prototype._transform=function(t,n,r){var a,i=this._writableState,o=(i.ending||i.ended)&&(!t||i.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));o?a=p.Z_FINISH:(a=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||p.Z_NO_FLUSH)),this._processChunk(t,a,r)},h.prototype._processChunk=function(t,n,r){function a(d,h){if(!l._hadError){var m=o-h;if(v(m>=0,"have should not go down"),m>0){var p=l._buffer.slice(l._offset,l._offset+m);l._offset+=m,u?l.push(p):(c.push(p),f+=p.length)}if((0===h||l._offset>=l._chunkSize)&&(o=l._chunkSize,l._offset=0,l._buffer=new e(l._chunkSize)),0===h){if(s+=i-d,i=d,!u)return!0;var g=l._binding.write(n,t,s,i,l._buffer,l._offset,l._chunkSize);return g.callback=a,void(g.buffer=t)}if(!u)return!1;r()}}var i=t&&t.length,o=this._chunkSize-this._offset,s=0,l=this,u="function"==typeof r;if(!u){var d,c=[],f=0;this.on("error",function(e){d=e});do{var h=this._binding.writeSync(n,t,s,i,this._buffer,this._offset,o)}while(!this._hadError&&a(h[0],h[1]));if(this._hadError)throw d;var m=e.concat(c,f);return this.close(),m}var p=this._binding.write(n,t,s,i,this._buffer,this._offset,o);p.buffer=t,p.callback=a},g.inherits(o,h),g.inherits(s,h),g.inherits(l,h),g.inherits(u,h),g.inherits(d,h),g.inherits(c,h),g.inherits(f,h)}).call(t,n(0).Buffer,n(3))},function(e,t,n){e.exports=n(56).Transform},function(e,t,n){(t=e.exports=n(31)).Stream=t,t.Readable=t,t.Writable=n(35),t.Duplex=n(4),t.Transform=n(37),t.PassThrough=n(62)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){e.copy(t,n)}var i=n(21).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),n=this.head,r=0;n;)a(n.data,t,r),r+=n.data.length,n=n.next;return t},e}()},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(60),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return u[l]=r,s(l),l++}function a(e){delete u[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}function o(e){if(d)setTimeout(o,0,e);else{var t=u[e];if(t){d=!0;try{i(t)}finally{a(e),d=!1}}}}if(!e.setImmediate){var s,l=1,u={},d=!1,c=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick(function(){o(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},s=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;s=function(t){var n=c.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():s=function(e){setTimeout(o,0,e)},f.setImmediate=r,f.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(3))},function(e,t,n){(function(t){function n(e,t){function n(){if(!a){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var a=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(2))},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}e.exports=r;var a=n(37),i=n(6);i.inherits=n(7),i.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(e,r){function a(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function i(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var o=n(38),s=n(64),l=n(65),u=n(67),d=n(70);for(var c in d)t[c]=d[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,a.prototype.init=function(e,n,r,a,i){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=a,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var o=l.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var o=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}o===t.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(o)},a.prototype.params=function(){throw new Error("deflateParams Not supported")},a.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},a.prototype.write=function(t,n,r,a,i,o,s){this._writeCheck(),this.write_in_progress=!0;var l=this;return e.nextTick(function(){l.write_in_progress=!1;var e=l._write(t,n,r,a,i,o,s);l.callback(e[0],e[1]),l.pending_close&&l.close()}),this},a.prototype.writeSync=function(e,t,n,r,a,i,o){return this._writeCheck(),this._write(e,t,n,r,a,i,o)},a.prototype._write=function(e,n,a,o,s,d,c){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),o=0,a=0),s._set?s.set=s._set:s.set=i;var f=this.strm;switch(f.avail_in=o,f.input=n,f.next_in=a,f.avail_out=c,f.output=s,f.next_out=d,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var h=l.deflate(f,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var h=u.inflate(f,e);break;default:throw new Error("Unknown mode "+this.mode)}return h!==t.Z_STREAM_END&&h!==t.Z_OK&&this._error(h),this.write_in_progress=!1,[f.avail_in,f.avail_out]},a.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?l.deflateEnd(this.strm):u.inflateEnd(this.strm),this.mode=t.NONE)},a.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=l.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=u.inflateReset(this.strm)}e!==t.Z_OK&&this._error(e)},a.prototype._error=function(e){this.onerror(o[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=a}).call(t,n(3),n(0).Buffer)},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e.msg=A[t],t}function a(e){return(e<<1)-(e>4?9:0)}function i(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(I.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function d(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,I.arraySet(t,e.input,e.next_in,a,n),1===e.state.wrap?e.adler=L(e.adler,t,a,n):2===e.state.wrap&&(e.adler=k(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)}function c(e,t){var n,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ue?e.strstart-(e.w_size-ue):0,u=e.window,d=e.w_mask,c=e.prev,f=e.strstart+le,h=u[i+o-1],m=u[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,u[n+o]===m&&u[n+o-1]===h&&u[n]===u[i]&&u[++n]===u[i+1]){i+=2,n++;do{}while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<f);if(r=le-(f-i),i=f-le,r>o){if(e.match_start=t,o=r,r>=s)break;h=u[i+o-1],m=u[i+o]}}}while((t=c[t&d])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function f(e){var t,n,r,a,i,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-ue)){I.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=n=e.hash_size;do{r=e.head[--t],e.head[t]=r>=o?r-o:0}while(--n);t=n=o;do{r=e.prev[--t],e.prev[t]=r>=o?r-o:0}while(--n);a+=o}if(0===e.strm.avail_in)break;if(n=d(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=se)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[i+se-1])&e.hash_mask,e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<se)););}while(e.lookahead<ue&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===D)return ye;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return ye;if(e.strstart-e.block_start>=e.w_size-ue&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===B?(s(e,!0),0===e.strm.avail_out?_e:we):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),ye)}function m(e,t){for(var n,r;;){if(e.lookahead<ue){if(f(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ue&&(e.match_length=c(e,n)),e.match_length>=se)if(r=C._tr_tally(e,e.strstart-e.match_start,e.match_length-se),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=se){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=e.strstart<se-1?e.strstart:se-1,t===B?(s(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function p(e,t){for(var n,r,a;;){if(e.lookahead<ue){if(f(e),e.lookahead<ue&&t===D)return ye;if(0===e.lookahead)break}if(n=0,e.lookahead>=se&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=se-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ue&&(e.match_length=c(e,n),e.match_length<=5&&(e.strategy===G||e.match_length===se&&e.strstart-e.match_start>4096)&&(e.match_length=se-1)),e.prev_length>=se&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-se,r=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-se),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+se-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=se-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return ye}else if(e.match_available){if((r=C._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return ye}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<se-1?e.strstart:se-1,t===B?(s(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function g(e,t){for(var n,r,a,i,o=e.window;;){if(e.lookahead<=le){if(f(e),e.lookahead<=le&&t===D)return ye;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=se&&e.strstart>0&&(a=e.strstart-1,(r=o[a])===o[++a]&&r===o[++a]&&r===o[++a])){i=e.strstart+le;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=le-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=se?(n=C._tr_tally(e,1,e.match_length-se),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===B?(s(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function v(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===D)return ye;break}if(e.match_length=0,n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return ye}return e.insert=0,t===B?(s(e,!0),0===e.strm.avail_out?_e:we):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?ye:be}function y(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function b(e){e.window_size=2*e.w_size,i(e.head),e.max_lazy_match=O[e.level].max_lazy,e.good_match=O[e.level].good_length,e.nice_match=O[e.level].nice_length,e.max_chain_length=O[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=se-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(2*ie),this.dyn_dtree=new I.Buf16(2*(2*re+1)),this.bl_tree=new I.Buf16(2*(2*ae+1)),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(oe+1),this.heap=new I.Buf16(2*ne+1),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(2*ne+1),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=J,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ce:ge,e.adler=2===t.wrap?0:1,t.last_flush=D,C._tr_init(t),F):r(e,H)}function E(e){var t=w(e);return t===F&&b(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?H:(e.state.gzhead=t,F):H}function T(e,t,n,a,i,o){if(!e)return H;var s=1;if(t===q&&(t=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),i<1||i>Q||n!==$||a<8||a>15||t<0||t>9||o<0||o>K)return r(e,H);8===a&&(a=9);var l=new _;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+se-1)/se),l.window=new I.Buf8(2*l.w_size),l.head=new I.Buf16(l.hash_size),l.prev=new I.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new I.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,E(e)}function P(e,t){return T(e,t,$,ee,te,X)}function j(e,t){var n,s,d,c;if(!e||!e.state||t>N||t<0)return e?r(e,H):H;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ve&&t!==B)return r(e,0===e.avail_out?W:H);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===ce)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=Z||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=k(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=fe):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=Z||s.level<2?4:0),l(s,Ee),s.status=ge);else{var f=$+(s.w_bits-8<<4)<<8,h=-1;f|=(h=s.strategy>=Z||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(f|=de),f+=31-f%31,s.status=ge,u(s,f),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===fe)if(s.gzhead.extra){for(d=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=he)}else s.status=he;if(s.status===he)if(s.gzhead.name){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.gzindex=0,s.status=me)}else s.status=me;if(s.status===me)if(s.gzhead.comment){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=k(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.status=pe)}else s.status=pe;if(s.status===pe&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ge)):s.status=ge),0!==s.pending){if(o(e),0===e.avail_out)return s.last_flush=-1,F}else if(0===e.avail_in&&a(t)<=a(n)&&t!==B)return r(e,W);if(s.status===ve&&0!==e.avail_in)return r(e,W);if(0!==e.avail_in||0!==s.lookahead||t!==D&&s.status!==ve){var m=s.strategy===Z?v(s,t):s.strategy===Y?g(s,t):O[s.level].func(s,t);if(m!==_e&&m!==we||(s.status=ve),m===ye||m===_e)return 0===e.avail_out&&(s.last_flush=-1),F;if(m===be&&(t===R?C._tr_align(s):t!==N&&(C._tr_stored_block(s,0,0,!1),t===U&&(i(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(e),0===e.avail_out))return s.last_flush=-1,F}return t!==B?F:s.wrap<=0?z:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),o(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?F:z)}function S(e){var t;return e&&e.state?(t=e.state.status)!==ce&&t!==fe&&t!==he&&t!==me&&t!==pe&&t!==ge&&t!==ve?r(e,H):(e.state=null,t===ge?r(e,V):F):H}function M(e,t){var n,r,a,o,s,l,u,d,c=t.length;if(!e||!e.state)return H;if(n=e.state,2===(o=n.wrap)||1===o&&n.status!==ce||n.lookahead)return H;for(1===o&&(e.adler=L(e.adler,t,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(i(n.head),n.strstart=0,n.block_start=0,n.insert=0),d=new I.Buf8(n.w_size),I.arraySet(d,t,c-n.w_size,n.w_size,0),t=d,c=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=c,e.next_in=0,e.input=t,f(n);n.lookahead>=se;){r=n.strstart,a=n.lookahead-(se-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+se-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--a);n.strstart=r,n.lookahead=se-1,f(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=se-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=o,F}var O,I=n(15),C=n(66),L=n(39),k=n(40),A=n(38),D=0,R=1,U=3,B=4,N=5,F=0,z=1,H=-2,V=-3,W=-5,q=-1,G=1,Z=2,Y=3,K=4,X=0,J=2,$=8,Q=9,ee=15,te=8,ne=286,re=30,ae=19,ie=2*ne+1,oe=15,se=3,le=258,ue=le+se+1,de=32,ce=42,fe=69,he=73,me=91,pe=103,ge=113,ve=666,ye=1,be=2,_e=3,we=4,Ee=3;O=[new y(0,0,0,0,h),new y(4,4,8,4,m),new y(4,5,16,8,m),new y(4,6,32,32,m),new y(4,4,16,16,p),new y(8,16,32,32,p),new y(8,16,128,128,p),new y(8,32,128,256,p),new y(32,128,258,1024,p),new y(32,258,258,4096,p)],t.deflateInit=P,t.deflateInit2=T,t.deflateReset=E,t.deflateResetKeep=w,t.deflateSetHeader=x,t.deflate=j,t.deflateEnd=S,t.deflateSetDictionary=M,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?ie[e]:ie[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>Z-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>Z-e.bi_valid,e.bi_valid+=n-Z):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function d(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n,r,a,i,o,s,l=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,c=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,m=t.stat_desc.max_length,p=0;for(i=0;i<=G;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<q;n++)r=e.heap[n],(i=l[2*l[2*r+1]+1]+1)>m&&(i=m,p++),l[2*r+1]=i,r>u||(e.bl_count[i]++,o=0,r>=h&&(o=f[r-h]),s=l[2*r],e.opt_len+=s*(i+o),c&&(e.static_len+=s*(d[2*r+1]+o)));if(0!==p){do{for(i=m-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[m]--,p-=2}while(p>0);for(i=m;0!==i;i--)for(r=e.bl_count[i];0!==r;)(a=e.heap[--n])>u||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}function h(e,t,n){var r,a,i=new Array(G+1),o=0;for(r=1;r<=G;r++)i[r]=o=o+n[r-1]<<1;for(a=0;a<=t;a++){var s=e[2*a+1];0!==s&&(e[2*a]=d(i[s]++,s))}}function m(){var e,t,n,r,i,o=new Array(G+1);for(n=0,r=0;r<F-1;r++)for(se[r]=n,e=0;e<1<<Q[r];e++)oe[n++]=r;for(oe[n-1]=r,i=0,r=0;r<16;r++)for(le[r]=i,e=0;e<1<<ee[r];e++)ie[i++]=r;for(i>>=7;r<V;r++)for(le[r]=i<<7,e=0;e<1<<ee[r]-7;e++)ie[256+i++]=r;for(t=0;t<=G;t++)o[t]=0;for(e=0;e<=143;)re[2*e+1]=8,e++,o[8]++;for(;e<=255;)re[2*e+1]=9,e++,o[9]++;for(;e<=279;)re[2*e+1]=7,e++,o[7]++;for(;e<=287;)re[2*e+1]=8,e++,o[8]++;for(h(re,H+1,o),e=0;e<V;e++)ae[2*e+1]=5,ae[2*e]=d(e,5);ue=new a(re,Q,z+1,H,G),de=new a(ae,ee,0,V,G),ce=new a(new Array(0),te,0,W,Y)}function p(e){var t;for(t=0;t<H;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<W;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*K]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),L.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&y(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!y(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function _(e,t,n){var r,a,i,s,d=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*d]<<8|e.pending_buf[e.d_buf+2*d+1],a=e.pending_buf[e.l_buf+d],d++,0===r?u(e,a,t):(i=oe[a],u(e,i+z+1,t),0!==(s=Q[i])&&(a-=se[i],l(e,a,s)),r--,i=o(r),u(e,i,n),0!==(s=ee[i])&&(r-=le[i],l(e,r,s)))}while(d<e.last_lit);u(e,K,t)}function w(e,t){var n,r,a,i=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=q,n=0;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)a=e.heap[++e.heap_len]=u<2?++u:0,i[2*a]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)b(e,i,n);a=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,b(e,i,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),h(i,u,e.bl_count)}function E(e,t,n){var r,a,i=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)a=o,o=t[2*(r+1)+1],++s<l&&a===o||(s<u?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*X]++):s<=10?e.bl_tree[2*J]++:e.bl_tree[2*$]++,s=0,i=a,0===o?(l=138,u=3):a===o?(l=6,u=3):(l=7,u=4))}function x(e,t,n){var r,a,i=-1,o=t[1],s=0,d=7,c=4;for(0===o&&(d=138,c=3),r=0;r<=n;r++)if(a=o,o=t[2*(r+1)+1],!(++s<d&&a===o)){if(s<c)do{u(e,a,e.bl_tree)}while(0!=--s);else 0!==a?(a!==i&&(u(e,a,e.bl_tree),s--),u(e,X,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,J,e.bl_tree),l(e,s-3,3)):(u(e,$,e.bl_tree),l(e,s-11,7));s=0,i=a,0===o?(d=138,c=3):a===o?(d=6,c=3):(d=7,c=4)}}function T(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=W-1;t>=3&&0===e.bl_tree[2*ne[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function P(e,t,n,r){var a;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),a=0;a<r;a++)l(e,e.bl_tree[2*ne[a]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,n-1)}function j(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return A;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(t=32;t<z;t++)if(0!==e.dyn_ltree[2*t])return D;return A}function S(e){fe||(m(),fe=!0),e.l_desc=new i(e.dyn_ltree,ue),e.d_desc=new i(e.dyn_dtree,de),e.bl_desc=new i(e.bl_tree,ce),e.bi_buf=0,e.bi_valid=0,p(e)}function M(e,t,n,r){l(e,(U<<1)+(r?1:0),3),v(e,t,n,!0)}function O(e){l(e,B<<1,3),u(e,K,re),c(e)}function I(e,t,n,r){var a,i,o=0;e.level>0?(e.strm.data_type===R&&(e.strm.data_type=j(e)),w(e,e.l_desc),w(e,e.d_desc),o=T(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?M(e,t,n,r):e.strategy===k||i===a?(l(e,(B<<1)+(r?1:0),3),_(e,re,ae)):(l(e,(N<<1)+(r?1:0),3),P(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),p(e),r&&g(e)}function C(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(oe[n]+z+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var L=n(15),k=4,A=0,D=1,R=2,U=0,B=1,N=2,F=29,z=256,H=z+1+F,V=30,W=19,q=2*H+1,G=15,Z=16,Y=7,K=256,X=16,J=17,$=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ee=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],te=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(H+2));r(re);var ae=new Array(2*V);r(ae);var ie=new Array(512);r(ie);var oe=new Array(256);r(oe);var se=new Array(F);r(se);var le=new Array(V);r(le);var ue,de,ce,fe=!1;t._tr_init=S,t._tr_stored_block=M,t._tr_flush_block=I,t._tr_tally=C,t._tr_align=O},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=U,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(pe),t.distcode=t.distdyn=new y.Buf32(ge),t.sane=1,t.back=-1,O):L}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):L}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?L:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):L}function l(e,t){var n,r;return e?(r=new a,e.state=r,r.window=null,(n=s(e,t))!==O&&(e.state=null),n):L}function u(e){return l(e,ve)}function d(e){if(ye){var t;for(g=new y.Buf32(512),v=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(E(T,e.lens,0,288,g,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;E(P,e.lens,0,32,v,0,e.work,{bits:5}),ye=!1}e.lencode=g,e.lenbits=9,e.distcode=v,e.distbits=5}function c(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new y.Buf8(i.wsize)),r>=i.wsize?(y.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),y.arraySet(i.window,t,n-r,a,i.wnext),(r-=a)?(y.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}function f(e,t){var n,a,i,o,s,l,u,f,h,m,p,g,v,pe,ge,ve,ye,be,_e,we,Ee,xe,Te,Pe,je=0,Se=new y.Buf8(4),Me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return L;(n=e.state).mode===Y&&(n.mode=K),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,a=e.input,l=e.avail_in,f=n.hold,h=n.bits,m=l,p=u,xe=O;e:for(;;)switch(n.mode){case U:if(0===n.wrap){n.mode=K;break}for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(2&n.wrap&&35615===f){n.check=0,Se[0]=255&f,Se[1]=f>>>8&255,n.check=_(n.check,Se,2,0),f=0,h=0,n.mode=B;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=fe;break}if((15&f)!==R){e.msg="unknown compression method",n.mode=fe;break}if(f>>>=4,h-=4,Ee=8+(15&f),0===n.wbits)n.wbits=Ee;else if(Ee>n.wbits){e.msg="invalid window size",n.mode=fe;break}n.dmax=1<<Ee,e.adler=n.check=1,n.mode=512&f?G:Y,f=0,h=0;break;case B:for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(n.flags=f,(255&n.flags)!==R){e.msg="unknown compression method",n.mode=fe;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=fe;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Se[0]=255&f,Se[1]=f>>>8&255,n.check=_(n.check,Se,2,0)),f=0,h=0,n.mode=N;case N:for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.head&&(n.head.time=f),512&n.flags&&(Se[0]=255&f,Se[1]=f>>>8&255,Se[2]=f>>>16&255,Se[3]=f>>>24&255,n.check=_(n.check,Se,4,0)),f=0,h=0,n.mode=F;case F:for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Se[0]=255&f,Se[1]=f>>>8&255,n.check=_(n.check,Se,2,0)),f=0,h=0,n.mode=z;case z:if(1024&n.flags){for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Se[0]=255&f,Se[1]=f>>>8&255,n.check=_(n.check,Se,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=H;case H:if(1024&n.flags&&((g=n.length)>l&&(g=l),g&&(n.head&&(Ee=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,a,o,g,Ee)),512&n.flags&&(n.check=_(n.check,a,g,o)),l-=g,o+=g,n.length-=g),n.length))break e;n.length=0,n.mode=V;case V:if(2048&n.flags){if(0===l)break e;g=0;do{Ee=a[o+g++],n.head&&Ee&&n.length<65536&&(n.head.name+=String.fromCharCode(Ee))}while(Ee&&g<l);if(512&n.flags&&(n.check=_(n.check,a,g,o)),l-=g,o+=g,Ee)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=W;case W:if(4096&n.flags){if(0===l)break e;g=0;do{Ee=a[o+g++],n.head&&Ee&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ee))}while(Ee&&g<l);if(512&n.flags&&(n.check=_(n.check,a,g,o)),l-=g,o+=g,Ee)break e}else n.head&&(n.head.comment=null);n.mode=q;case q:if(512&n.flags){for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=fe;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Y;break;case G:for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}e.adler=n.check=r(f),f=0,h=0,n.mode=Z;case Z:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,C;e.adler=n.check=1,n.mode=Y;case Y:if(t===S||t===M)break e;case K:if(n.last){f>>>=7&h,h-=7&h,n.mode=ue;break}for(;h<3;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}switch(n.last=1&f,f>>>=1,h-=1,3&f){case 0:n.mode=X;break;case 1:if(d(n),n.mode=ne,t===M){f>>>=2,h-=2;break e}break;case 2:n.mode=Q;break;case 3:e.msg="invalid block type",n.mode=fe}f>>>=2,h-=2;break;case X:for(f>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=fe;break}if(n.length=65535&f,f=0,h=0,n.mode=J,t===M)break e;case J:n.mode=$;case $:if(g=n.length){if(g>l&&(g=l),g>u&&(g=u),0===g)break e;y.arraySet(i,a,o,g,s),l-=g,o+=g,u-=g,s+=g,n.length-=g;break}n.mode=Y;break;case Q:for(;h<14;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(n.nlen=257+(31&f),f>>>=5,h-=5,n.ndist=1+(31&f),f>>>=5,h-=5,n.ncode=4+(15&f),f>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=fe;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.lens[Me[n.have++]]=7&f,f>>>=3,h-=3}for(;n.have<19;)n.lens[Me[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Te={bits:n.lenbits},xe=E(x,n.lens,0,19,n.lencode,0,n.work,Te),n.lenbits=Te.bits,xe){e.msg="invalid code lengths set",n.mode=fe;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;je=n.lencode[f&(1<<n.lenbits)-1],ge=je>>>24,ve=je>>>16&255,ye=65535&je,!(ge<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(ye<16)f>>>=ge,h-=ge,n.lens[n.have++]=ye;else{if(16===ye){for(Pe=ge+2;h<Pe;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f>>>=ge,h-=ge,0===n.have){e.msg="invalid bit length repeat",n.mode=fe;break}Ee=n.lens[n.have-1],g=3+(3&f),f>>>=2,h-=2}else if(17===ye){for(Pe=ge+3;h<Pe;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}h-=ge,Ee=0,g=3+(7&(f>>>=ge)),f>>>=3,h-=3}else{for(Pe=ge+7;h<Pe;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}h-=ge,Ee=0,g=11+(127&(f>>>=ge)),f>>>=7,h-=7}if(n.have+g>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=fe;break}for(;g--;)n.lens[n.have++]=Ee}}if(n.mode===fe)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=fe;break}if(n.lenbits=9,Te={bits:n.lenbits},xe=E(T,n.lens,0,n.nlen,n.lencode,0,n.work,Te),n.lenbits=Te.bits,xe){e.msg="invalid literal/lengths set",n.mode=fe;break}if(n.distbits=6,n.distcode=n.distdyn,Te={bits:n.distbits},xe=E(P,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Te),n.distbits=Te.bits,xe){e.msg="invalid distances set",n.mode=fe;break}if(n.mode=ne,t===M)break e;case ne:n.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,w(e,p),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,a=e.input,l=e.avail_in,f=n.hold,h=n.bits,n.mode===Y&&(n.back=-1);break}for(n.back=0;je=n.lencode[f&(1<<n.lenbits)-1],ge=je>>>24,ve=je>>>16&255,ye=65535&je,!(ge<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(ve&&0==(240&ve)){for(be=ge,_e=ve,we=ye;je=n.lencode[we+((f&(1<<be+_e)-1)>>be)],ge=je>>>24,ve=je>>>16&255,ye=65535&je,!(be+ge<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}f>>>=be,h-=be,n.back+=be}if(f>>>=ge,h-=ge,n.back+=ge,n.length=ye,0===ve){n.mode=le;break}if(32&ve){n.back=-1,n.mode=Y;break}if(64&ve){e.msg="invalid literal/length code",n.mode=fe;break}n.extra=15&ve,n.mode=ae;case ae:if(n.extra){for(Pe=n.extra;h<Pe;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ie;case ie:for(;je=n.distcode[f&(1<<n.distbits)-1],ge=je>>>24,ve=je>>>16&255,ye=65535&je,!(ge<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(0==(240&ve)){for(be=ge,_e=ve,we=ye;je=n.distcode[we+((f&(1<<be+_e)-1)>>be)],ge=je>>>24,ve=je>>>16&255,ye=65535&je,!(be+ge<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}f>>>=be,h-=be,n.back+=be}if(f>>>=ge,h-=ge,n.back+=ge,64&ve){e.msg="invalid distance code",n.mode=fe;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(Pe=n.extra;h<Pe;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=fe;break}n.mode=se;case se:if(0===u)break e;if(g=p-u,n.offset>g){if((g=n.offset-g)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=fe;break}g>n.wnext?(g-=n.wnext,v=n.wsize-g):v=n.wnext-g,g>n.length&&(g=n.length),pe=n.window}else pe=i,v=s-n.offset,g=n.length;g>u&&(g=u),u-=g,n.length-=g;do{i[s++]=pe[v++]}while(--g);0===n.length&&(n.mode=re);break;case le:if(0===u)break e;i[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;h<32;){if(0===l)break e;l--,f|=a[o++]<<h,h+=8}if(p-=u,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?_(n.check,i,p,s-p):b(n.check,i,p,s-p)),p=u,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=fe;break}f=0,h=0}n.mode=de;case de:if(n.wrap&&n.flags){for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=fe;break}f=0,h=0}n.mode=ce;case ce:xe=I;break e;case fe:xe=k;break e;case he:return A;case me:default:return L}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,(n.wsize||p!==e.avail_out&&n.mode<fe&&(n.mode<ue||t!==j))&&c(e,e.output,e.next_out,p-e.avail_out)?(n.mode=he,A):(m-=e.avail_in,p-=e.avail_out,e.total_in+=m,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?_(n.check,i,p,e.next_out-p):b(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Y?128:0)+(n.mode===ne||n.mode===J?256:0),(0===m&&0===p||t===j)&&xe===O&&(xe=D),xe)}function h(e){if(!e||!e.state)return L;var t=e.state;return t.window&&(t.window=null),e.state=null,O}function m(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?L:(n.head=t,t.done=!1,O):L}function p(e,t){var n,r,a=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==Z?L:n.mode===Z&&(r=1,(r=b(r,t,a,0))!==n.check)?k:c(e,t,a,a)?(n.mode=he,A):(n.havedict=1,O):L}var g,v,y=n(15),b=n(39),_=n(40),w=n(68),E=n(69),x=0,T=1,P=2,j=4,S=5,M=6,O=0,I=1,C=2,L=-2,k=-3,A=-4,D=-5,R=8,U=1,B=2,N=3,F=4,z=5,H=6,V=7,W=8,q=9,G=10,Z=11,Y=12,K=13,X=14,J=15,$=16,Q=17,ee=18,te=19,ne=20,re=21,ae=22,ie=23,oe=24,se=25,le=26,ue=27,de=28,ce=29,fe=30,he=31,me=32,pe=852,ge=592,ve=15,ye=!0;t.inflateReset=o,t.inflateReset2=s,t.inflateResetKeep=i,t.inflateInit=u,t.inflateInit2=l,t.inflate=f,t.inflateEnd=h,t.inflateGetHeader=m,t.inflateSetDictionary=p,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";e.exports=function(e,t){var n,r,a,i,o,s,l,u,d,c,f,h,m,p,g,v,y,b,_,w,E,x,T,P,j;n=e.state,r=e.next_in,P=e.input,a=r+(e.avail_in-5),i=e.next_out,j=e.output,o=i-(t-e.avail_out),s=i+(e.avail_out-257),l=n.dmax,u=n.wsize,d=n.whave,c=n.wnext,f=n.window,h=n.hold,m=n.bits,p=n.lencode,g=n.distcode,v=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{m<15&&(h+=P[r++]<<m,m+=8,h+=P[r++]<<m,m+=8),b=p[h&v];t:for(;;){if(_=b>>>24,h>>>=_,m-=_,0==(_=b>>>16&255))j[i++]=65535&b;else{if(!(16&_)){if(0==(64&_)){b=p[(65535&b)+(h&(1<<_)-1)];continue t}if(32&_){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}w=65535&b,(_&=15)&&(m<_&&(h+=P[r++]<<m,m+=8),w+=h&(1<<_)-1,h>>>=_,m-=_),m<15&&(h+=P[r++]<<m,m+=8,h+=P[r++]<<m,m+=8),b=g[h&y];n:for(;;){if(_=b>>>24,h>>>=_,m-=_,!(16&(_=b>>>16&255))){if(0==(64&_)){b=g[(65535&b)+(h&(1<<_)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(E=65535&b,_&=15,m<_&&(h+=P[r++]<<m,(m+=8)<_&&(h+=P[r++]<<m,m+=8)),(E+=h&(1<<_)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(h>>>=_,m-=_,_=i-o,E>_){if((_=E-_)>d&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(x=0,T=f,0===c){if(x+=u-_,_<w){w-=_;do{j[i++]=f[x++]}while(--_);x=i-E,T=j}}else if(c<_){if(x+=u+c-_,(_-=c)<w){w-=_;do{j[i++]=f[x++]}while(--_);if(x=0,c<w){w-=_=c;do{j[i++]=f[x++]}while(--_);x=i-E,T=j}}}else if(x+=c-_,_<w){w-=_;do{j[i++]=f[x++]}while(--_);x=i-E,T=j}for(;w>2;)j[i++]=T[x++],j[i++]=T[x++],j[i++]=T[x++],w-=3;w&&(j[i++]=T[x++],w>1&&(j[i++]=T[x++]))}else{x=i-E;do{j[i++]=j[x++],j[i++]=j[x++],j[i++]=j[x++],w-=3}while(w>2);w&&(j[i++]=j[x++],w>1&&(j[i++]=j[x++]))}break}}break}}while(r<a&&i<s);r-=w=m>>3,h&=(1<<(m-=w<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<s?s-i+257:257-(i-s),n.hold=h,n.bits=m}},function(e,t,n){"use strict";var r=n(15),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,l,u,d,c,f){var h,m,p,g,v,y,b,_,w,E=f.bits,x=0,T=0,P=0,j=0,S=0,M=0,O=0,I=0,C=0,L=0,k=null,A=0,D=new r.Buf16(16),R=new r.Buf16(16),U=null,B=0;for(x=0;x<=15;x++)D[x]=0;for(T=0;T<l;T++)D[t[n+T]]++;for(S=E,j=15;j>=1&&0===D[j];j--);if(S>j&&(S=j),0===j)return u[d++]=20971520,u[d++]=20971520,f.bits=1,0;for(P=1;P<j&&0===D[P];P++);for(S<P&&(S=P),I=1,x=1;x<=15;x++)if(I<<=1,(I-=D[x])<0)return-1;if(I>0&&(0===e||1!==j))return-1;for(R[1]=0,x=1;x<15;x++)R[x+1]=R[x]+D[x];for(T=0;T<l;T++)0!==t[n+T]&&(c[R[t[n+T]]++]=T);if(0===e?(k=U=c,y=19):1===e?(k=a,A-=257,U=i,B-=257,y=256):(k=o,U=s,y=-1),L=0,T=0,x=P,v=d,M=S,O=0,p=-1,C=1<<S,g=C-1,1===e&&C>852||2===e&&C>592)return 1;for(var N=0;;){N++,b=x-O,c[T]<y?(_=0,w=c[T]):c[T]>y?(_=U[B+c[T]],w=k[A+c[T]]):(_=96,w=0),h=1<<x-O,P=m=1<<M;do{u[v+(L>>O)+(m-=h)]=b<<24|_<<16|w|0}while(0!==m);for(h=1<<x-1;L&h;)h>>=1;if(0!==h?(L&=h-1,L+=h):L=0,T++,0==--D[x]){if(x===j)break;x=t[n+c[T]]}if(x>S&&(L&g)!==p){for(0===O&&(O=S),v+=P,I=1<<(M=x-O);M+O<j&&!((I-=D[M+O])<=0);)M++,I<<=1;if(C+=1<<M,1===e&&C>852||2===e&&C>592)return 1;u[p=L&g]=S<<24|M<<16|v-d|0}}return 0!==L&&(u[v+L]=x-O<<24|64<<16|0),f.bits=S,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function o(e){return!a(e)&&"function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer)))}function s(e){if(_.isFunction(e)){if(x)return e.name;var t=e.toString().match(P);return t&&t[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(x||!_.isFunction(e))return _.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function d(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function c(e,t,n,r,a){throw new T.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function f(e,t){e||c(e,!0,t,"==",T.ok)}function h(e,t,n,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),p(e,t,n,s))}return n?e===t:e==t}function m(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function p(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=m(e),i=m(t);if(a&&!i||!a&&i)return!1;if(a)return e=E.call(e),t=E.call(t),h(e,t,n);var o,s,l=j(e),u=j(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(o=l[s],!h(e[o],t[o],n,r))return!1;return!0}function g(e,t,n){h(e,t,!0)&&c(e,t,n,"notDeepStrictEqual",g)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&c(a,n,"Missing expected exception"+r);var i="string"==typeof r,o=!e&&_.isError(a),s=!e&&a&&!n;if((o&&i&&v(a,n)||s)&&c(a,n,"Got unwanted exception"+r),e&&a&&n&&!v(a,n)||!e&&a)throw a}var _=n(41),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,x="foo"===function(){}.name,T=e.exports=f,P=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=d(this),this.generatedMessage=!0);var t=e.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,a=s(t),i=r.indexOf("\n"+a);if(i>=0){var o=r.indexOf("\n",i+1);r=r.substring(o+1)}this.stack=r}}},_.inherits(T.AssertionError,Error),T.fail=c,T.ok=f,T.equal=function(e,t,n){e!=t&&c(e,t,n,"==",T.equal)},T.notEqual=function(e,t,n){e==t&&c(e,t,n,"!=",T.notEqual)},T.deepEqual=function(e,t,n){h(e,t,!1)||c(e,t,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(e,t,n){h(e,t,!0)||c(e,t,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(e,t,n){h(e,t,!1)&&c(e,t,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=g,T.strictEqual=function(e,t,n){e!==t&&c(e,t,n,"===",T.strictEqual)},T.notStrictEqual=function(e,t,n){e===t&&c(e,t,n,"!==",T.notStrictEqual)},T.throws=function(e,t,n){b(!0,e,t,n)},T.doesNotThrow=function(e,t,n){b(!1,e,t,n)},T.ifError=function(e){if(e)throw e};var j=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(s||(s=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?(0,i.default)(e,t,n):(0,o.default)(e,t,0,t.fragments.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(42)),o=r(n(22)),s=!1}])})},"dicomParser.js":function(e,t,n){!function e(r,a){"object"==typeof t&&"object"==typeof n?n.exports=a():"function"==typeof define&&define.amd?define("dicom-parser",[],a):"object"==typeof t?t["dicom-parser"]=a():r.dicomParser=a()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=43)}([function(e,t,n){"use strict";(function(e){function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=s.prototype:(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,r):"string"==typeof t?f(e,t,n):p(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function c(e,t){if(u(t),e=i(e,t<0?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n),a=(e=i(e,r)).write(t,n);return a!==r&&(e=e.slice(0,a)),e}function h(e,t){var n=t.length<0?0:0|g(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function m(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t).__proto__=s.prototype:e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var n=0|g(t.length);return 0===(e=i(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?i(e,0):h(e,t);if("Buffer"===t.type&&ee(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),s.alloc(+e)}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return K(e).length;default:if(r)return G(e).length;t=(""+t).toLowerCase(),r=!0}}function b(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return I(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return k(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:E(e,t,n,r,a);if("number"==typeof t)return t&=255,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):E(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function E(e,t,n,r,a){function i(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}var u;if(a){var d=-1;for(u=n;u<s;u++)if(i(e,u)===i(t,-1===d?0:u-d)){if(-1===d&&(d=u),u-d+1===l)return d*o}else-1!==d&&(u-=u-d),d=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var c=!0,f=0;f<l;f++)if(i(e,u+f)!==i(t,f)){c=!1;break}if(c)return u}return-1}function x(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function T(e,t,n,r){return X(G(t,e.length-n),e,n,r)}function P(e,t,n,r){return X(Z(t),e,n,r)}function j(e,t,n,r){return P(e,t,n,r)}function S(e,t,n,r){return X(K(t),e,n,r)}function M(e,t,n,r){return X(Y(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,n))}function I(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s<=n){var l,u,d,c;switch(s){case 1:i<128&&(o=i);break;case 2:128==(192&(l=e[a+1]))&&(c=(31&i)<<6|63&l)>127&&(o=c);break;case 3:l=e[a+1],u=e[a+2],128==(192&l)&&128==(192&u)&&(c=(15&i)<<12|(63&l)<<6|63&u)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:l=e[a+1],u=e[a+2],d=e[a+3],128==(192&l)&&128==(192&u)&&128==(192&d)&&(c=(15&i)<<18|(63&l)<<12|(63&u)<<6|63&d)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),a+=s}return C(r)}function C(e){var t=e.length;if(t<=te)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=te));return n}function L(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",i=t;i<n;++i)a+=q(e[i]);return a}function D(e,t,n){for(var r=e.slice(t,n),a="",i=0;i<r.length;i+=2)a+=String.fromCharCode(r[i]+256*r[i+1]);return a}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,r,a,i){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function B(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,i=Math.min(e.length-n,2);a<i;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function N(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,i=Math.min(e.length-n,4);a<i;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function F(e,t,n,r,a,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,r,a){return a||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function H(e,t,n,r,a){return a||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function V(e){if((e=W(e).replace(ne,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function q(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){t=t||1/0;for(var n,r=e.length,a=null,i=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&i.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&i.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function Z(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,r,a,i=[],o=0;o<e.length&&!((t-=2)<0);++o)r=(n=e.charCodeAt(o))>>8,a=n%256,i.push(a),i.push(r);return i}function K(e){return $.toByteArray(V(e))}function X(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e){return e!==e}var $=n(49),Q=n(50),ee=n(28);t.Buffer=s,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),t.kMaxLength=a(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return l(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,void 0!==o&&o.species&&s[o.species]===s&&Object.defineProperty(s,o.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return d(null,e,t,n)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function e(t){return!(null==t||!t._isBuffer)},s.compare=function e(t,n){if(!s.isBuffer(t)||!s.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return 0;for(var r=t.length,a=n.length,i=0,o=Math.min(r,a);i<o;++i)if(t[i]!==n[i]){r=t[i],a=n[i];break}return r<a?-1:a<r?1:0},s.isEncoding=function e(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function e(t,n){if(!ee(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===n)for(n=0,r=0;r<t.length;++r)n+=t[r].length;var a=s.allocUnsafe(n),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(a,i),i+=o.length}return a},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function e(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<t;n+=2)_(this,n,n+1);return this},s.prototype.swap32=function e(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<t;n+=4)_(this,n,n+3),_(this,n+1,n+2);return this},s.prototype.swap64=function e(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<t;n+=8)_(this,n,n+7),_(this,n+1,n+6),_(this,n+2,n+5),_(this,n+3,n+4);return this},s.prototype.toString=function e(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):b.apply(this,arguments)},s.prototype.equals=function e(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function e(){var n="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(n=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(n+=" ... ")),"<Buffer "+n+">"},s.prototype.compare=function e(t,n,r,a,i){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===a&&(a=0),void 0===i&&(i=this.length),n<0||r>t.length||a<0||i>this.length)throw new RangeError("out of range index");if(a>=i&&n>=r)return 0;if(a>=i)return-1;if(n>=r)return 1;if(n>>>=0,r>>>=0,a>>>=0,i>>>=0,this===t)return 0;for(var o=i-a,l=r-n,u=Math.min(o,l),d=this.slice(a,i),c=t.slice(n,r),f=0;f<u;++f)if(d[f]!==c[f]){o=d[f],l=c[f];break}return o<l?-1:l<o?1:0},s.prototype.includes=function e(t,n,r){return-1!==this.indexOf(t,n,r)},s.prototype.indexOf=function e(t,n,r){return w(this,t,n,r,!0)},s.prototype.lastIndexOf=function e(t,n,r){return w(this,t,n,r,!1)},s.prototype.write=function e(t,n,r,a){if(void 0===n)a="utf8",r=this.length,n=0;else if(void 0===r&&"string"==typeof n)a=n,r=this.length,n=0;else{if(!isFinite(n))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");n|=0,isFinite(r)?(r|=0,void 0===a&&(a="utf8")):(a=r,r=void 0)}var i=this.length-n;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");a||(a="utf8");for(var o=!1;;)switch(a){case"hex":return x(this,t,n,r);case"utf8":case"utf-8":return T(this,t,n,r);case"ascii":return P(this,t,n,r);case"latin1":case"binary":return j(this,t,n,r);case"base64":return S(this,t,n,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n,r);default:if(o)throw new TypeError("Unknown encoding: "+a);a=(""+a).toLowerCase(),o=!0}},s.prototype.toJSON=function e(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var te=4096;s.prototype.slice=function e(t,n){var r=this.length;t=~~t,n=void 0===n?r:~~n,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),n<0?(n+=r)<0&&(n=0):n>r&&(n=r),n<t&&(n=t);var a;if(s.TYPED_ARRAY_SUPPORT)(a=this.subarray(t,n)).__proto__=s.prototype;else{var i=n-t;a=new s(i,void 0);for(var o=0;o<i;++o)a[o]=this[o+t]}return a},s.prototype.readUIntLE=function e(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var a=this[t],i=1,o=0;++o<n&&(i*=256);)a+=this[t+o]*i;return a},s.prototype.readUIntBE=function e(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var a=this[t+--n],i=1;n>0&&(i*=256);)a+=this[t+--n]*i;return a},s.prototype.readUInt8=function e(t,n){return n||R(t,1,this.length),this[t]},s.prototype.readUInt16LE=function e(t,n){return n||R(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function e(t,n){return n||R(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function e(t,n){return n||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function e(t,n){return n||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function e(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var a=this[t],i=1,o=0;++o<n&&(i*=256);)a+=this[t+o]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*n)),a},s.prototype.readIntBE=function e(t,n,r){t|=0,n|=0,r||R(t,n,this.length);for(var a=n,i=1,o=this[t+--a];a>0&&(i*=256);)o+=this[t+--a]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*n)),o},s.prototype.readInt8=function e(t,n){return n||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function e(t,n){n||R(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function e(t,n){n||R(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function e(t,n){return n||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function e(t,n){return n||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function e(t,n){return n||R(t,4,this.length),Q.read(this,t,!0,23,4)},s.prototype.readFloatBE=function e(t,n){return n||R(t,4,this.length),Q.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function e(t,n){return n||R(t,8,this.length),Q.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function e(t,n){return n||R(t,8,this.length),Q.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function e(t,n,r,a){t=+t,n|=0,r|=0,a||U(this,t,n,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[n]=255&t;++o<r&&(i*=256);)this[n+o]=t/i&255;return n+r},s.prototype.writeUIntBE=function e(t,n,r,a){t=+t,n|=0,r|=0,a||U(this,t,n,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[n+i]=255&t;--i>=0&&(o*=256);)this[n+i]=t/o&255;return n+r},s.prototype.writeUInt8=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[n]=255&t,n+1},s.prototype.writeUInt16LE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):B(this,t,n,!0),n+2},s.prototype.writeUInt16BE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):B(this,t,n,!1),n+2},s.prototype.writeUInt32LE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n+3]=t>>>24,this[n+2]=t>>>16,this[n+1]=t>>>8,this[n]=255&t):N(this,t,n,!0),n+4},s.prototype.writeUInt32BE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):N(this,t,n,!1),n+4},s.prototype.writeIntLE=function e(t,n,r,a){if(t=+t,n|=0,!a){var i=Math.pow(2,8*r-1);U(this,t,n,r,i-1,-i)}var o=0,s=1,l=0;for(this[n]=255&t;++o<r&&(s*=256);)t<0&&0===l&&0!==this[n+o-1]&&(l=1),this[n+o]=(t/s>>0)-l&255;return n+r},s.prototype.writeIntBE=function e(t,n,r,a){if(t=+t,n|=0,!a){var i=Math.pow(2,8*r-1);U(this,t,n,r,i-1,-i)}var o=r-1,s=1,l=0;for(this[n+o]=255&t;--o>=0&&(s*=256);)t<0&&0===l&&0!==this[n+o+1]&&(l=1),this[n+o]=(t/s>>0)-l&255;return n+r},s.prototype.writeInt8=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[n]=255&t,n+1},s.prototype.writeInt16LE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8):B(this,t,n,!0),n+2},s.prototype.writeInt16BE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>8,this[n+1]=255&t):B(this,t,n,!1),n+2},s.prototype.writeInt32LE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[n]=255&t,this[n+1]=t>>>8,this[n+2]=t>>>16,this[n+3]=t>>>24):N(this,t,n,!0),n+4},s.prototype.writeInt32BE=function e(t,n,r){return t=+t,n|=0,r||U(this,t,n,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[n]=t>>>24,this[n+1]=t>>>16,this[n+2]=t>>>8,this[n+3]=255&t):N(this,t,n,!1),n+4},s.prototype.writeFloatLE=function e(t,n,r){return z(this,t,n,!0,r)},s.prototype.writeFloatBE=function e(t,n,r){return z(this,t,n,!1,r)},s.prototype.writeDoubleLE=function e(t,n,r){return H(this,t,n,!0,r)},s.prototype.writeDoubleBE=function e(t,n,r){return H(this,t,n,!1,r)},s.prototype.copy=function e(t,n,r,a){if(r||(r=0),a||0===a||(a=this.length),n>=t.length&&(n=t.length),n||(n=0),a>0&&a<r&&(a=r),a===r)return 0;if(0===t.length||0===this.length)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(a<0)throw new RangeError("sourceEnd out of bounds");a>this.length&&(a=this.length),t.length-n<a-r&&(a=t.length-n+r);var i=a-r,o;if(this===t&&r<n&&n<a)for(o=i-1;o>=0;--o)t[o+n]=this[o+r];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+n]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),n);return i},s.prototype.fill=function e(t,n,r,a){if("string"==typeof t){if("string"==typeof n?(a=n,n=0,r=this.length):"string"==typeof r&&(a=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==a&&"string"!=typeof a)throw new TypeError("encoding must be a string");if("string"==typeof a&&!s.isEncoding(a))throw new TypeError("Unknown encoding: "+a)}else"number"==typeof t&&(t&=255);if(n<0||this.length<n||this.length<r)throw new RangeError("Out of range index");if(r<=n)return this;n>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var o;if("number"==typeof t)for(o=n;o<r;++o)this[o]=t;else{var l=s.isBuffer(t)?t:G(new s(t,a).toString()),u=l.length;for(o=0;o<r-n;++o)this[o+n]=l[o%u]}return this};var ne=/[^+\/0-9A-Za-z-_]/g}).call(t,n(2))},function(e,t,n){"use strict";function r(e){if(void 0===e)throw"dicomParser.readTag: missing required parameter 'byteStream'";return"x"+("00000000"+(256*e.readUint16()*256+e.readUint16()).toString(16)).substr(-8)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){m&&p&&(m=!1,p.length?h=p.concat(h):g=-1,h.length&&s())}function s(){if(!m){var e=a(o);m=!0;for(var t=h.length;t;){for(p=h,h=[];++g<t;)p&&p[g].run();g=-1,t=h.length}p=null,m=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var d=e.exports={},c,f;!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h=[],m=!1,p,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new l(e,t)),1!==h.length||m||a(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);d.call(this,e),c.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(e){e.end()}function o(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}var s=n(14),l=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=r;var u=n(6);u.inherits=n(7);var d=n(31),c=n(35);u.inherits(r,d);for(var f=l(c.prototype),h=0;h<f.length;h++){var m=f[h];r.prototype[m]||(r.prototype[m]=c.prototype[m])}Object.defineProperty(r.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),r.prototype._destroy=function(e,t){this.push(null),this.end(),s(t,e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return void 0!==e.parser?e.parser:t}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(10),s=function(){function e(t,n,a){r(this,e),this.byteArrayParser=t,this.byteArray=n,this.elements=a}return i(e,[{key:"uint16",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readUint16(this.byteArray,r.dataOffset+2*n)}},{key:"int16",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readInt16(this.byteArray,r.dataOffset+2*n)}},{key:"uint32",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readUint32(this.byteArray,r.dataOffset+4*n)}},{key:"int32",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readInt32(this.byteArray,r.dataOffset+4*n)}},{key:"float",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readFloat(this.byteArray,r.dataOffset+4*n)}},{key:"double",value:function e(t,n){var r=this.elements[t];if(n=void 0!==n?n:0,r&&0!==r.length)return a(r,this.byteArrayParser).readDouble(this.byteArray,r.dataOffset+8*n)}},{key:"numStringValues",value:function e(t){var n=this.elements[t];if(n&&n.length>0){var r=(0,o.readFixedString)(this.byteArray,n.dataOffset,n.length).match(/\\/g);return null===r?1:r.length+1}}},{key:"string",value:function e(t,n){var r=this.elements[t];if(r&&r.length>0){var a=(0,o.readFixedString)(this.byteArray,r.dataOffset,r.length);return n>=0?a.split("\\")[n].trim():a.trim()}}},{key:"text",value:function e(t,n){var r=this.elements[t];if(r&&r.length>0){var a=(0,o.readFixedString)(this.byteArray,r.dataOffset,r.length);return n>=0?a.split("\\")[n].replace(/ +$/,""):a.replace(/ +$/,"")}}},{key:"floatString",value:function e(t,n){var r=this.elements[t];if(r&&r.length>0){n=void 0!==n?n:0;var a=this.string(t,n);if(void 0!==a)return parseFloat(a)}}},{key:"intString",value:function e(t,n){var r=this.elements[t];if(r&&r.length>0){n=void 0!==n?n:0;var a=this.string(t,n);if(void 0!==a)return parseInt(a)}}},{key:"attributeTag",value:function e(t){var n=this.elements[t];if(n&&4===n.length){var r=a(n,this.byteArrayParser).readUint16,i=this.byteArray,o=n.dataOffset;return"x"+("00000000"+(256*r(i,o)*256+r(i,o+2)).toString(16)).substr(-8)}}}]),e}();t.default=s},function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===g(e)}function r(e){return"boolean"==typeof e}function a(e){return null===e}function i(e){return null==e}function o(e){return"number"==typeof e}function s(e){return"string"==typeof e}function l(e){return"symbol"==typeof e}function u(e){return void 0===e}function d(e){return"[object RegExp]"===g(e)}function c(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===g(e)}function h(e){return"[object Error]"===g(e)||e instanceof Error}function m(e){return"function"==typeof e}function p(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function g(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=r,t.isNull=a,t.isNullOrUndefined=i,t.isNumber=o,t.isString=s,t.isSymbol=l,t.isUndefined=u,t.isRegExp=d,t.isObject=c,t.isDate=f,t.isError=h,t.isFunction=m,t.isPrimitive=p,t.isBuffer=e.isBuffer}).call(t,n(0).Buffer)},function(e,t){"function"==typeof Object.create?e.exports=function e(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function e(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?t.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetExplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetExplicit: invalid value for parameter 'maxP osition'";for(var a=e.elements;t.position<n;){var i=(0,o.default)(t,e.warnings,r.untilTag);if(a[i.tag]=i,i.tag===r.untilTag)return}if(t.position>n)throw"dicomParser:parseDicomDataSetExplicit: buffer overrun"}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(n=void 0===n?e.byteArray.length:n,void 0===t)throw"dicomParser.parseDicomDataSetImplicit: missing required parameter 'byteStream'";if(n<t.position||n>t.byteArray.length)throw"dicomParser.parseDicomDataSetImplicit: invalid value for parameter 'maxPosition'";for(var a=e.elements;t.position<n;){var i=(0,s.default)(t,r.untilTag,r.vrCallback);if(a[i.tag]=i,i.tag===r.untilTag)return}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseDicomDataSetExplicit=a,t.parseDicomDataSetImplicit=i;var o=r(n(9)),s=r(n(18))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementExplicit: missing required parameter 'byteStream'";var r={tag:(0,l.default)(e),vr:e.readFixedString(2)};return 2===d(r.vr)?(r.length=e.readUint16(),r.dataOffset=e.position):(e.seek(2),r.length=e.readUint32(),r.dataOffset=e.position),4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===n?r:"SQ"===r.vr?((0,u.default)(e,r,t),r):4294967295===r.length?"x7fe00010"===r.tag?((0,i.default)(e,r,t),r):"UN"===r.vr?((0,o.default)(e,r),r):((0,s.default)(e,r),r):(e.seek(r.length),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(24)),o=r(n(25)),s=r(n(17)),l=r(n(1)),u=r(n(26)),d=function e(t){return"OB"===t||"OW"===t||"SQ"===t||"OF"===t||"UT"===t||"UN"===t?4:2}},function(e,t,n){"use strict";function r(e,t,n){if(n<0)throw"dicomParser.readFixedString - length cannot be less than 0";if(t+n>e.length)throw"dicomParser.readFixedString: attempt to read past end of buffer";for(var r="",a,i=0;i<n;i++){if(0===(a=e[t+i]))return t+=n,r;r+=String.fromCharCode(a)}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.readFixedString=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(void 0===e)throw"dicomParser.readSequenceItem: missing required parameter 'byteStream'";var t={tag:(0,i.default)(e),length:e.readUint32(),dataOffset:e.position};if("xfffee000"!==t.tag)throw"dicomParser.readSequenceItem: item tag (FFFE,E000) not found at offset "+e.position;return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(1))},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=r(n(13)),s=n(10),l=function(){function t(n,r,i){if(a(this,t),void 0===n)throw"dicomParser.ByteStream: missing required parameter 'byteArrayParser'";if(void 0===r)throw"dicomParser.ByteStream: missing required parameter 'byteArray'";if(r instanceof Uint8Array==!1&&r instanceof e==!1)throw"dicomParser.ByteStream: parameter byteArray is not of type Uint8Array or Buffer";if(i<0)throw"dicomParser.ByteStream: parameter 'position' cannot be less than 0";if(i>=r.length)throw"dicomParser.ByteStream: parameter 'position' cannot be greater than or equal to 'byteArray' length";this.byteArrayParser=n,this.byteArray=r,this.position=i||0,this.warnings=[]}return i(t,[{key:"seek",value:function e(t){if(this.position+t<0)throw"dicomParser.ByteStream.prototype.seek: cannot seek to position < 0";this.position+=t}},{key:"readByteStream",value:function e(n){if(this.position+n>this.byteArray.length)throw"dicomParser.ByteStream.prototype.readByteStream: readByteStream - buffer overread";var r=(0,o.default)(this.byteArray,this.position,n);return this.position+=n,new t(this.byteArrayParser,r)}},{key:"readUint16",value:function e(){var t=this.byteArrayParser.readUint16(this.byteArray,this.position);return this.position+=2,t}},{key:"readUint32",value:function e(){var t=this.byteArrayParser.readUint32(this.byteArray,this.position);return this.position+=4,t}},{key:"readFixedString",value:function e(t){var n=(0,s.readFixedString)(this.byteArray,this.position,t);return this.position+=t,n}}]),t}();t.default=l}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(e){function n(t,n,r){if(void 0!==e&&t instanceof e)return t.slice(n,n+r);if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset+n,r);throw"dicomParser.from: unknown type for byteArray"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}).call(t,n(0).Buffer)},function(e,t,n){"use strict";(function(t){function n(e,n,r,a){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,s;switch(i){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function t(){e.call(null,n)});case 3:return t.nextTick(function t(){e.call(null,n,r)});case 4:return t.nextTick(function t(){e.call(null,n,r,a)});default:for(o=new Array(i-1),s=0;s<o.length;)o[s++]=arguments[s];return t.nextTick(function t(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(t,n(3))},function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,n,r,a){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),a);else for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){var t,n,r,a,i,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),a=0,t=0,n=e.length;t<n;t++)i=e[t],o.set(i,a),a+=i.length;return o}},i={arraySet:function(e,t,n,r,a){for(var i=0;i<r;i++)e[a+i]=t[n+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={AE:!0,AS:!0,AT:!1,CS:!0,DA:!0,DS:!0,DT:!0,FL:!1,FD:!1,IS:!0,LO:!0,LT:!0,OB:!1,OD:!1,OF:!1,OW:!1,PN:!0,SH:!0,SL:!1,SQ:!1,SS:!1,ST:!0,TM:!0,UI:!0,UL:!1,UN:void 0,UR:!0,US:!1,UT:!0},a=function e(t){return r[t]},i=function e(t){return parseInt(t[4])%2==1},o=function e(t){if(void 0!==t){var n=t.split("^");return{familyName:n[0],givenName:n[1],middleName:n[2],prefix:n[3],suffix:n[4]}}};t.isStringVr=a,t.isPrivateTag=i,t.parsePN=o},function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";for(var n=8,r=e.byteArray.length-8;e.position<=r;)if(65534===e.readUint16()&&57357===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(void 0===e)throw"dicomParser.readDicomElementImplicit: missing required parameter 'byteStream'";var r={tag:(0,s.default)(e),length:e.readUint32(),dataOffset:e.position};return 4294967295===r.length&&(r.hadUndefinedLength=!0),r.tag===t?r:l(r,e,n)?((0,o.default)(e,r),r):r.hadUndefinedLength?((0,i.default)(e,r),r):(e.seek(r.length),r)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(17)),o=r(n(27)),s=r(n(1)),l=function e(t,n,r){if(void 0!==r)return"SQ"===r(t.tag);if(n.position+4<=n.byteArray.length){var a=(0,s.default)(n);return n.seek(-4),"xfffee000"===a||"xfffee0dd"===a}return n.warnings.push("eof encountered before finding sequence item tag or sequence delimiter tag in peeking to determine VR"),!1}},function(e,t,n){"use strict";(function(e){function n(t,n){if(void 0!==e&&t instanceof e)return e.alloc(n);if(t instanceof Uint8Array)return new Uint8Array(n);throw"dicomParser.alloc: unknown type for byteArray"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n}).call(t,n(0).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readUint16: position cannot be less than 0";if(n+2>t.length)throw"littleEndianByteArrayParser.readUint16: attempt to read past end of buffer";return t[n]+256*t[n+1]},readInt16:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readInt16: position cannot be less than 0";if(n+2>t.length)throw"littleEndianByteArrayParser.readInt16: attempt to read past end of buffer";var r=t[n]+(t[n+1]<<8);return 32768&r&&(r=r-65535-1),r},readUint32:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readUint32: position cannot be less than 0";if(n+4>t.length)throw"littleEndianByteArrayParser.readUint32: attempt to read past end of buffer";return t[n]+256*t[n+1]+256*t[n+2]*256+256*t[n+3]*256*256},readInt32:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readInt32: position cannot be less than 0";if(n+4>t.length)throw"littleEndianByteArrayParser.readInt32: attempt to read past end of buffer";return t[n]+(t[n+1]<<8)+(t[n+2]<<16)+(t[n+3]<<24)},readFloat:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readFloat: position cannot be less than 0";if(n+4>t.length)throw"littleEndianByteArrayParser.readFloat: attempt to read past end of buffer";var r=new Uint8Array(4);return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],new Float32Array(r.buffer)[0]},readDouble:function e(t,n){if(n<0)throw"littleEndianByteArrayParser.readDouble: position cannot be less than 0";if(n+8>t.length)throw"littleEndianByteArrayParser.readDouble: attempt to read past end of buffer";var r=new Uint8Array(8);return r[0]=t[n],r[1]=t[n+1],r[2]=t[n+2],r[3]=t[n+3],r[4]=t[n+4],r[5]=t[n+5],r[6]=t[n+6],r[7]=t[n+7],new Float64Array(r.buffer)[0]}}},function(e,t,n){function r(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return o(e,t,n)}var i=n(0),o=i.Buffer;o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?e.exports=i:(r(i,t),t.Buffer=a),r(o,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=o(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){if(r=r||1,a=a||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'startFragmentIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedPixelDataFromFragments: missing required parameter 'numFragments'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be >= 0";if(n>=t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragmentIndex' must be < number of fragments";if(r<1)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'numFragments' must be > 0";if(n+r>t.fragments.length)throw"dicomParser.readEncapsulatedPixelDataFromFragments: parameter 'startFragment' + 'numFragments' < number of fragments";var d=new o.default(e.byteArrayParser,e.byteArray,t.dataOffset),c=(0,s.default)(d);if("xfffee000"!==c.tag)throw"dicomParser.readEncapsulatedPixelData: missing basic offset table xfffee000";d.seek(c.length);var f=d.position,h=8;if(1===r)return(0,l.default)(d.byteArray,f+a[n].offset+8,a[n].length);for(var m=u(a,n,r),p=(0,i.default)(d.byteArray,m),g=0,v=n;v<n+r;v++)for(var y=f+a[v].offset+8,b=0;b<a[v].length;b++)p[g++]=d.byteArray[y++];return p}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(19)),o=r(n(12)),s=r(n(11)),l=r(n(13)),u=function e(t,n,r){for(var a=0,i=n;i<n+r;i++)a+=t[i].length;return a}},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){function n(t,n){for(var r="",i=0;i<t;i++)0!==i&&(r+="/"),r+=n.call(e,a,i).toString();return r}if(void 0===e||void 0===t)throw"dicomParser.explicitElementToString: missing required parameters";if(void 0===t.vr)throw"dicomParser.explicitElementToString: cannot convert implicit element to string";var r=t.vr,a=t.tag,o;if(!0===i.isStringVr(r))o=e.string(a);else{if("AT"===r){var s=e.uint32(a);if(void 0===s)return;return s<0&&(s=4294967295+s+1),"x"+s.toString(16).toUpperCase()}"US"===r?o=n(t.length/2,e.uint16):"SS"===r?o=n(t.length/2,e.int16):"UL"===r?o=n(t.length/4,e.uint32):"SL"===r?o=n(t.length/4,e.int32):"FD"===r?o=n(t.length/8,e.double):"FL"===r&&(o=n(t.length/4,e.float))}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(16))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(void 0===e)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.findEndOfEncapsulatedElement: missing required parameter 'element'";if(t.encapsulatedPixelData=!0,t.basicOffsetTable=[],t.fragments=[],"xfffee000"!==(0,i.default)(e))throw"dicomParser.findEndOfEncapsulatedElement: basic offset table not found";for(var r=e.readUint32()/4,a=0;a<r;a++){var o=e.readUint32();t.basicOffsetTable.push(o)}for(var s=e.position;e.position<e.byteArray.length;){var l=(0,i.default)(e),u=e.readUint32();if("xfffee0dd"===l)return e.seek(u),void(t.length=e.position-t.dataOffset);if("xfffee000"!==l)return n&&n.push("unexpected tag "+l+" while searching for end of pixel data element with undefined length"),u>e.byteArray.length-e.position&&(u=e.byteArray.length-e.position),t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u),void(t.length=e.position-t.dataOffset);t.fragments.push({offset:e.position-s-8,position:e.position,length:u}),e.seek(u)}n&&n.push("pixel data element "+t.tag+" missing sequence delimiter tag xfffee0dd")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(1))},function(e,t,n){"use strict";function r(e,t){if(void 0===e)throw"dicomParser.findAndSetUNElementLength: missing required parameter 'byteStream'";for(var n=8,r=e.byteArray.length-8;e.position<=r;)if(65534===e.readUint16()&&57565===e.readUint16())return 0!==e.readUint32()&&e.warnings("encountered non zero length following item delimiter at position "+(e.position-4)+" while reading element of undefined length with tag "+t.tag),void(t.length=e.position-t.dataOffset);t.length=e.byteArray.length-t.dataOffset,e.seek(e.byteArray.length-e.position)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n={};e.position<e.byteArray.length;){var r=(0,c.default)(e,t);if(n[r.tag]=r,"xfffee00d"===r.tag)return new d.default(e.byteArrayParser,e.byteArray,n)}return t.push("eof encountered before finding item delimiter tag while reading sequence item of undefined length"),new d.default(e.byteArrayParser,e.byteArray,n)}function o(e,t){var n=(0,f.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=i(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new d.default(e.byteArrayParser,e.byteArray,{}),m.parseDicomDataSetExplicit(n.dataSet,e,e.position+n.length)),n}function s(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,h.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=o(e,n);t.items.push(a)}n.push("eof encountered before finding sequence delimitation tag while reading sequence of undefined length"),t.length=e.position-t.dataOffset}function l(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=o(e,n);t.items.push(a)}}function u(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsExplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?s(e,t,n):l(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var d=a(n(5)),c=a(n(9)),f=a(n(11)),h=a(n(1)),m=r(n(8))},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){for(var n={};e.position<e.byteArray.length;){var r=(0,c.default)(e,void 0,t);if(n[r.tag]=r,"xfffee00d"===r.tag)return new d.default(e.byteArrayParser,e.byteArray,n)}return e.warnings.push("eof encountered before finding sequence item delimiter in sequence item of undefined length"),new d.default(e.byteArrayParser,e.byteArray,n)}function o(e,t){var n=(0,f.default)(e);return 4294967295===n.length?(n.hadUndefinedLength=!0,n.dataSet=i(e,t),n.length=e.position-n.dataOffset):(n.dataSet=new d.default(e.byteArrayParser,e.byteArray,{}),m.parseDicomDataSetImplicit(n.dataSet,e,e.position+n.length,{vrCallback:t})),n}function s(e,t,n){for(;e.position+4<=e.byteArray.length;){var r=(0,h.default)(e);if(e.seek(-4),"xfffee0dd"===r)return t.length=e.position-t.dataOffset,e.seek(8),t;var a=o(e,n);t.items.push(a)}e.warnings.push("eof encountered before finding sequence delimiter in sequence of undefined length"),t.length=e.byteArray.length-t.dataOffset}function l(e,t,n){for(var r=t.dataOffset+t.length;e.position<r;){var a=o(e,n);t.items.push(a)}}function u(e,t,n){if(void 0===e)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'byteStream'";if(void 0===t)throw"dicomParser.readSequenceItemsImplicit: missing required parameter 'element'";t.items=[],4294967295===t.length?s(e,t,n):l(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var d=a(n(5)),c=a(n(18)),f=a(n(11)),h=a(n(1)),m=r(n(8))},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={readUint16:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readUint16: position cannot be less than 0";if(n+2>t.length)throw"bigEndianByteArrayParser.readUint16: attempt to read past end of buffer";return(t[n]<<8)+t[n+1]},readInt16:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readInt16: position cannot be less than 0";if(n+2>t.length)throw"bigEndianByteArrayParser.readInt16: attempt to read past end of buffer";var r=(t[n]<<8)+t[n+1];return 32768&r&&(r=r-65535-1),r},readUint32:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readUint32: position cannot be less than 0";if(n+4>t.length)throw"bigEndianByteArrayParser.readUint32: attempt to read past end of buffer";return 256*(256*(256*t[n]+t[n+1])+t[n+2])+t[n+3]},readInt32:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readInt32: position cannot be less than 0";if(n+4>t.length)throw"bigEndianByteArrayParser.readInt32: attempt to read past end of buffer";return(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3]},readFloat:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readFloat: position cannot be less than 0";if(n+4>t.length)throw"bigEndianByteArrayParser.readFloat: attempt to read past end of buffer";var r=new Uint8Array(4);return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],new Float32Array(r.buffer)[0]},readDouble:function e(t,n){if(n<0)throw"bigEndianByteArrayParser.readDouble: position cannot be less than 0";if(n+8>t.length)throw"bigEndianByteArrayParser.readDouble: attempt to read past end of buffer";var r=new Uint8Array(8);return r[7]=t[n],r[6]=t[n+1],r[5]=t[n+2],r[4]=t[n+3],r[3]=t[n+4],r[2]=t[n+5],r[1]=t[n+6],r[0]=t[n+7],new Float64Array(r.buffer)[0]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){function n(){if(a.seek(128),"DICM"!==a.readFixedString(4))throw"dicomParser.readPart10Header: DICM prefix not found at location 132 - this is not a valid DICOM P10 file."}function r(){n();for(var e=[],t={};a.position<a.byteArray.length;){var r=a.position,i=(0,l.default)(a,e);if(i.tag>"x0002ffff"){a.position=r;break}i.parser=s.default,t[i.tag]=i}var u=new o.default(a.byteArrayParser,a.byteArray,t);return u.warnings=a.warnings,u.position=a.position,u}if(void 0===e)throw"dicomParser.readPart10Header: missing required parameter 'byteArray'";var a=new i.default(s.default,e);return r()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(12)),o=r(n(5)),s=r(n(20)),l=r(n(9))},function(e,t,n){"use strict";(function(t,r){function a(e){return N.from(e)}function i(e){return N.isBuffer(e)||e instanceof F}function o(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?A(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function s(e,t){D=D||n(4),e=e||{},this.objectMode=!!e.objectMode,t instanceof D&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new W,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(G||(G=n(36).StringDecoder),this.decoder=new G(e.encoding),this.encoding=e.encoding)}function l(e){if(D=D||n(4),!(this instanceof l))return new l(e);this._readableState=new s(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),B.call(this)}function u(e,t,n,r,i){var o=e._readableState;if(null===t)o.reading=!1,p(e,o);else{var s;i||(s=c(o,t)),s?e.emit("error",s):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===N.prototype||(t=a(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):d(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?d(e,o,t,!1):y(e,o)):d(e,o,t,!1))):r||(o.reading=!1)}return f(o)}function d(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&g(e)),y(e,t)}function c(e,t){var n;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function h(e){return e>=Y?e=Y:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function m(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=h(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function p(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,g(e)}}function g(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(V("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?k(v,e):v(e))}function v(e){V("emit readable"),e.emit("readable"),T(e)}function y(e,t){t.readingMore||(t.readingMore=!0,k(b,e,t))}function b(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(V("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;V("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&U(e,"data")&&(t.flowing=!0,T(e))}}function w(e){V("readable nexttick read 0"),e.read(0)}function E(e,t){t.resumeScheduled||(t.resumeScheduled=!0,k(x,e,t))}function x(e,t){t.reading||(V("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),T(e),t.flowing&&!t.reading&&e.read(0)}function T(e){var t=e._readableState;for(V("flow",t.flowing);t.flowing&&null!==e.read(););}function P(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=j(e,t.buffer,t.decoder),n}function j(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?S(e,t):M(e,t),r}function S(e,t){var n=t.head,r=1,a=n.data;for(e-=a.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(o===i.length?a+=i:a+=i.slice(0,e),0===(e-=o)){o===i.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(o));break}++r}return t.length-=r,a}function M(e,t){var n=N.allocUnsafe(e),r=t.head,a=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(n,n.length-e,0,o),0===(e-=o)){o===i.length?(++a,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(o));break}++a}return t.length-=a,n}function O(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,k(I,t,e))}function I(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function C(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function L(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}var k=n(14);e.exports=l;var A=n(28),D;l.ReadableState=s;var R=n(32).EventEmitter,U=function(e,t){return e.listeners(t).length},B=n(33),N=n(21).Buffer,F=t.Uint8Array||function(){},z=n(6);z.inherits=n(7);var H=n(57),V=void 0;V=H&&H.debuglog?H.debuglog("stream"):function(){};var W=n(58),q=n(34),G;z.inherits(l,B);var Z=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(e,t){this.push(null),t(e)},l.prototype.push=function(e,t){var n=this._readableState,r;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=N.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},l.prototype.unshift=function(e){return u(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(e){return G||(G=n(36).StringDecoder),this._readableState.decoder=new G(e),this._readableState.encoding=e,this};var Y=8388608;l.prototype.read=function(e){V("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return V("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?O(this):g(this),null;if(0===(e=m(e,t))&&t.ended)return 0===t.length&&O(this),null;var r=t.needReadable;V("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&V("length less than watermark",r=!0),t.ended||t.reading?V("reading or ended",r=!1):r&&(V("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=m(n,t)));var a;return null===(a=e>0?P(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&O(this)),null!==a&&this.emit("data",a),a},l.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},l.prototype.pipe=function(e,t){function n(e,t){V("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function a(){V("onend"),e.end()}function i(){V("cleanup"),e.removeListener("close",u),e.removeListener("finish",d),e.removeListener("drain",p),e.removeListener("error",l),e.removeListener("unpipe",n),f.removeListener("end",a),f.removeListener("end",c),f.removeListener("data",s),g=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||p()}function s(t){V("ondata"),v=!1,!1!==e.write(t)||v||((1===h.pipesCount&&h.pipes===e||h.pipesCount>1&&-1!==L(h.pipes,e))&&!g&&(V("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,v=!0),f.pause())}function l(t){V("onerror",t),c(),e.removeListener("error",l),0===U(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",d),c()}function d(){V("onfinish"),e.removeListener("close",u),c()}function c(){V("unpipe"),f.unpipe(e)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e);break}h.pipesCount+=1,V("pipe count=%d opts=%j",h.pipesCount,t);var m=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?a:c;h.endEmitted?k(m):f.once("end",m),e.on("unpipe",n);var p=_(f);e.on("drain",p);var g=!1,v=!1;return f.on("data",s),o(e,"error",l),e.once("close",u),e.once("finish",d),e.emit("pipe",f),h.flowing||(V("pipe resume"),f.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,a=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<a;i++)r[i].emit("unpipe",this,n);return this}var o=L(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},l.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&g(this):k(w,this))}return n},l.prototype.addListener=l.prototype.on,l.prototype.resume=function(){var e=this._readableState;return e.flowing||(V("resume"),e.flowing=!0,E(this,e)),this},l.prototype.pause=function(){return V("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(V("pause"),this._readableState.flowing=!1,this.emit("pause")),this},l.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(V("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(a){V("wrapped data"),t.decoder&&(a=t.decoder.write(a)),(!t.objectMode||null!==a&&void 0!==a)&&(t.objectMode||a&&a.length)&&(r.push(a)||(n=!0,e.pause()))});for(var a in e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<Z.length;i++)e.on(Z[i],r.emit.bind(r,Z[i]));return r._read=function(t){V("wrapped _read",t),n&&(n=!1,e.resume())},r},l._fromList=P}).call(t,n(2),n(3))},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function a(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!a(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,a,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var d=new Error('Uncaught, unspecified "error" event. ('+t+")");throw d.context=t,d}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(i(n))for(s=Array.prototype.slice.call(arguments,1),a=(u=n.slice()).length,l=0;l<a;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var a;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(a=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[e].length>a&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),a||(a=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var a=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,a,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,a=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){a=s;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,n){e.exports=n(32).EventEmitter},function(e,t,n){"use strict";function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;r||a?t?t(e):!e||this._writableState&&this._writableState.errorEmitted||o(i,this,e):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(o(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)}))}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}var o=n(14);e.exports={destroy:r,undestroy:a}},function(e,t,n){"use strict";(function(t,r,a){function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){O(t,e)}}function l(e){return R.from(e)}function u(e){return R.isBuffer(e)||e instanceof U}function d(){}function c(e,t){L=L||n(4),e=e||{},this.objectMode=!!e.objectMode,t instanceof L&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,a=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){_(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function f(e){if(L=L||n(4),!(N.call(f,this)||this instanceof L))return new f(e);this._writableState=new c(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),D.call(this)}function h(e,t){var n=new Error("write after end");e.emit("error",n),I(t,n)}function m(e,t,n,r){var a=!0,i=!1;return null===n?i=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),I(r,i),a=!1),a}function p(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=R.from(t,n)),t}function g(e,t,n,r,a,i){if(!n){var o=p(t,r,a);r!==o&&(n=!0,a="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:a,isBuf:n,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else v(e,t,!1,s,r,a,i);return l}function v(e,t,n,r,a,i,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(a,t.onwrite):e._write(a,i,t.onwrite),t.sync=!1}function y(e,t,n,r,a){--t.pendingcb,n?(I(a,r),I(S,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(a(r),e._writableState.errorEmitted=!0,e.emit("error",r),S(e,t))}function b(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function _(e,t){var n=e._writableState,r=n.sync,a=n.writecb;if(b(n),t)y(e,n,r,t,a);else{var i=T(n);i||n.corked||n.bufferProcessing||!n.bufferedRequest||x(e,n),r?C(w,e,n,i,a):w(e,n,i,a)}}function w(e,t,n,r){n||E(e,t),t.pendingcb--,r(),S(e,t)}function E(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function x(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,a=new Array(r),i=t.corkedRequestsFree;i.entry=n;for(var o=0,l=!0;n;)a[o]=n,n.isBuf||(l=!1),n=n.next,o+=1;a.allBuffers=l,v(e,t,!0,t.length,a,"",i.finish),t.pendingcb++,t.lastBufferedRequest=null,i.next?(t.corkedRequestsFree=i.next,i.next=null):t.corkedRequestsFree=new s(t)}else{for(;n;){var u=n.chunk,d=n.encoding,c=n.callback;if(v(e,t,!1,t.objectMode?1:u.length,u,d,c),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function T(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function P(e,t){e._final(function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),S(e,t)})}function j(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,I(P,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function S(e,t){var n=T(t);return n&&(j(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function M(e,t,n){t.ending=!0,S(e,t),n&&(t.finished?I(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function O(e,t,n){var r=e.entry;for(e.entry=null;r;){var a=r.callback;t.pendingcb--,a(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var I=n(14);e.exports=f;var C=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:I,L;f.WritableState=c;var k=n(6);k.inherits=n(7);var A={deprecate:n(61)},D=n(33),R=n(21).Buffer,U=a.Uint8Array||function(){},B=n(34);k.inherits(f,D),c.prototype.getBuffer=function e(){for(var t=this.bufferedRequest,n=[];t;)n.push(t),t=t.next;return n},function(){try{Object.defineProperty(c.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var N;"function"==typeof o&&o.hasInstance&&"function"==typeof Function.prototype[o.hasInstance]?(N=Function.prototype[o.hasInstance],Object.defineProperty(f,o.hasInstance,{value:function(e){return!!N.call(this,e)||e&&e._writableState instanceof c}})):N=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(e,t,n){var r=this._writableState,a=!1,i=u(e)&&!r.objectMode;return i&&!R.isBuffer(e)&&(e=l(e)),"function"==typeof t&&(n=t,t=null),i?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=d),r.ended?h(this,n):(i||m(this,r,e,n))&&(r.pendingcb++,a=g(this,r,i,e,t,n)),a},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},f.prototype.setDefaultEncoding=function e(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},f.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||M(this,r,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=B.destroy,f.prototype._undestroy=B.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)}}).call(t,n(3),n(59).setImmediate,n(2))},function(e,t,n){function r(e){if(e&&!l(e))throw new Error("Unknown encoding: "+e)}function a(e){return e.toString(this.encoding)}function i(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function o(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=n(0).Buffer,l=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},u=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=i;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=o;break;default:return void(this.write=a)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};u.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";if(e=e.slice(n,e.length),!((a=(t=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(t.length-1))>=55296&&a<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var r=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,r),r-=this.charReceived);var r=(t+=e.toString(this.encoding,0,r)).length-1,a=t.charCodeAt(r);if(a>=55296&&a<=56319){var i=this.surrogateSize;return this.charLength+=i,this.charReceived+=i,this.charBuffer.copy(this.charBuffer,i,0,i),e.copy(this.charBuffer,0,0,i),t.substring(0,r)}return t},u.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(t<=2&&n>>4==14){this.charLength=3;break}if(t<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=t},u.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,a=this.encoding;t+=r.slice(0,n).toString(a)}return t}},function(e,t,n){"use strict";function r(e){this.afterTransform=function(t,n){return a(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function a(e,t,n){var r=e._transformState;r.transforming=!1;var a=r.writecb;if(!a)return e.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),a(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new r(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,a=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=i;var s=n(4),l=n(6);l.inherits=n(7),l.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var a=this._readableState;(r.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var n=this;s.prototype._destroy.call(this,e,function(e){t(e),n.emit("close")})}},function(e,t,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(e,t,n,r){for(var a=65535&e|0,i=e>>>16&65535|0,o=0;0!==n;){n-=o=n>2e3?2e3:n;do{i=i+(a=a+t[r++]|0)|0}while(--o);a%=65521,i%=65521}return a|i<<16|0}e.exports=r},function(e,t,n){"use strict";function r(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function a(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return-1^e}var i=r();e.exports=a},function(e,t,n){(function(e,r){function a(e,n){var r={seen:[],stylize:o};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),p(n)?r.showHidden=n:n&&t._extend(r,n),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=i),l(r,e,r.depth)}function i(e,t){var n=a.styles[t];return n?"["+a.colors[n][0]+"m"+e+"["+a.colors[n][1]+"m":e}function o(e,t){return e}function s(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function l(e,n,r){if(e.customInspect&&n&&j(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return b(a)||(a=l(e,a,r)),a}var i=u(e,n);if(i)return i;var o=Object.keys(n),p=s(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(n)),P(n)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return d(n);if(0===o.length){if(j(n)){var g=n.name?": "+n.name:"";return e.stylize("[Function"+g+"]","special")}if(E(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(P(n))return d(n)}var v="",y=!1,_=["{","}"];if(m(n)&&(y=!0,_=["[","]"]),j(n)&&(v=" [Function"+(n.name?": "+n.name:"")+"]"),E(n)&&(v=" "+RegExp.prototype.toString.call(n)),T(n)&&(v=" "+Date.prototype.toUTCString.call(n)),P(n)&&(v=" "+d(n)),0===o.length&&(!y||0==n.length))return _[0]+v+_[1];if(r<0)return E(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var w;return w=y?c(e,n,r,p,o):o.map(function(t){return f(e,n,r,p,t,y)}),e.seen.pop(),h(w,v,_)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return y(t)?e.stylize(""+t,"number"):p(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function d(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,n,r,a){for(var i=[],o=0,s=t.length;o<s;++o)C(t,String(o))?i.push(f(e,t,n,r,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(f(e,t,n,r,a,!0))}),i}function f(e,t,n,r,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),C(r,a)||(o="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(n)?l(e,u.value,null):l(e,u.value,n-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n")):s=e.stylize("[Circular]","special")),w(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function m(e){return Array.isArray(e)}function p(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function _(e){return"symbol"==typeof e}function w(e){return void 0===e}function E(e){return x(e)&&"[object RegExp]"===M(e)}function x(e){return"object"==typeof e&&null!==e}function T(e){return x(e)&&"[object Date]"===M(e)}function P(e){return x(e)&&("[object Error]"===M(e)||e instanceof Error)}function j(e){return"function"==typeof e}function S(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function M(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function I(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),D[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var L=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(a(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(e).replace(L,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}}),s=r[n];n<i;s=r[++n])g(s)||!x(s)?o+=" "+s:o+=" "+a(s);return o},t.deprecate=function(n,a){function i(){if(!o){if(r.throwDeprecation)throw new Error(a);r.traceDeprecation?console.trace(a):console.error(a),o=!0}return n.apply(this,arguments)}if(w(e.process))return function(){return t.deprecate(n,a).apply(this,arguments)};if(!0===r.noDeprecation)return n;var o=!1;return i};var k={},A;t.debuglog=function(e){if(w(A)&&(A=r.env.NODE_DEBUG||""),e=e.toUpperCase(),!k[e])if(new RegExp("\\b"+e+"\\b","i").test(A)){var n=r.pid;k[e]=function(){var r=t.format.apply(t,arguments);console.error("%s %d: %s",e,n,r)}}else k[e]=function(){};return k[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=m,t.isBoolean=p,t.isNull=g,t.isNullOrUndefined=v,t.isNumber=y,t.isString=b,t.isSymbol=_,t.isUndefined=w,t.isRegExp=E,t.isObject=x,t.isDate=T,t.isError=P,t.isFunction=j,t.isPrimitive=S,t.isBuffer=n(71);var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",I(),t.format.apply(t,arguments))},t.inherits=n(72),t._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(t,n(2),n(3))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n,r,a){if(r=r||t.basicOffsetTable,a=a||t.fragments,void 0===e)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'pixelDataElement'";if(void 0===n)throw"dicomParser.readEncapsulatedImageFrame: missing required parameter 'frameIndex'";if(void 0===r)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' does not have basicOffsetTable";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have undefined length";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedImageFrame: parameter 'pixelDataElement' refers to pixel data element that does not have fragments";if(0===r.length)throw"dicomParser.readEncapsulatedImageFrame: basicOffsetTable has zero entries";if(n<0)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be >= 0";if(n>=r.length)throw"dicomParser.readEncapsulatedImageFrame: parameter 'frameIndex' must be < basicOffsetTable.length";var l=r[n],u=o(a,l);if(void 0===u)throw"dicomParser.readEncapsulatedImageFrame: unable to find fragment that matches basic offset table entry";var d=s(n,r,a,u);return(0,i.default)(e,t,u,d,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(22)),o=function e(t,n){for(var r=0;r<t.length;r++)if(t[r].offset===n)return r},s=function e(t,n,r,a){if(t===n.length-1)return r.length-a;for(var i=n[t+1],o=a+1;o<r.length;o++)if(r[o].offset===i)return o-a;throw"dicomParser.calculateNumberOfFragmentsForFrame: could not find fragment with offset matching basic offset table"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(44);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function t(){return a[e]}})});var i=n(8);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function t(){return i[e]}})});var o=n(10);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function t(){return o[e]}})});var s=n(19);Object.defineProperty(t,"alloc",{enumerable:!0,get:function e(){return r(s).default}});var l=n(51);Object.defineProperty(t,"version",{enumerable:!0,get:function e(){return r(l).default}});var u=n(29);Object.defineProperty(t,"bigEndianByteArrayParser",{enumerable:!0,get:function e(){return r(u).default}});var d=n(12);Object.defineProperty(t,"ByteStream",{enumerable:!0,get:function e(){return r(d).default}});var c=n(13);Object.defineProperty(t,"sharedCopy",{enumerable:!0,get:function e(){return r(c).default}});var f=n(5);Object.defineProperty(t,"DataSet",{enumerable:!0,get:function e(){return r(f).default}});var h=n(25);Object.defineProperty(t,"findAndSetUNElementLength",{enumerable:!0,get:function e(){return r(h).default}});var m=n(24);Object.defineProperty(t,"findEndOfEncapsulatedElement",{enumerable:!0,get:function e(){return r(m).default}});var p=n(17);Object.defineProperty(t,"findItemDelimitationItemAndSetElementLength",{enumerable:!0,get:function e(){return r(p).default}});var g=n(20);Object.defineProperty(t,"littleEndianByteArrayParser",{enumerable:!0,get:function e(){return r(g).default}});var v=n(52);Object.defineProperty(t,"parseDicom",{enumerable:!0,get:function e(){return r(v).default}});var y=n(9);Object.defineProperty(t,"readDicomElementExplicit",{enumerable:!0,get:function e(){return r(y).default}});var b=n(18);Object.defineProperty(t,"readDicomElementImplicit",{enumerable:!0,get:function e(){return r(b).default}});var _=n(42);Object.defineProperty(t,"readEncapsulatedImageFrame",{enumerable:!0,get:function e(){return r(_).default}});var w=n(74);Object.defineProperty(t,"readEncapsulatedPixelData",{enumerable:!0,get:function e(){return r(w).default}});var E=n(22);Object.defineProperty(t,"readEncapsulatedPixelDataFromFragments",{enumerable:!0,get:function e(){return r(E).default}});var x=n(30);Object.defineProperty(t,"readPart10Header",{enumerable:!0,get:function e(){return r(x).default}});var T=n(26);Object.defineProperty(t,"readSequenceItemsExplicit",{enumerable:!0,get:function e(){return r(T).default}});var P=n(27);Object.defineProperty(t,"readSequenceItemsImplicit",{enumerable:!0,get:function e(){return r(P).default}});var j=n(11);Object.defineProperty(t,"readSequenceItem",{enumerable:!0,get:function e(){return r(j).default}});var S=n(1);Object.defineProperty(t,"readTag",{enumerable:!0,get:function e(){return r(S).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function t(){return a[e]}})});var i=n(45);Object.defineProperty(t,"parseTM",{enumerable:!0,get:function e(){return r(i).default}});var o=n(46);Object.defineProperty(t,"parseDA",{enumerable:!0,get:function e(){return r(o).default}});var s=n(23);Object.defineProperty(t,"explicitElementToString",{enumerable:!0,get:function e(){return r(s).default}});var l=n(47);Object.defineProperty(t,"explicitDataSetToJS",{enumerable:!0,get:function e(){return r(l).default}});var u=n(48);Object.defineProperty(t,"createJPEGBasicOffsetTable",{enumerable:!0,get:function e(){return r(u).default}})},function(e,t,n){"use strict";function r(e,t){if(e.length>=2){var n=parseInt(e.substring(0,2),10),r=e.length>=4?parseInt(e.substring(2,4),10):void 0,a=e.length>=6?parseInt(e.substring(4,6),10):void 0,i=e.length>=8?parseInt(e.substring(7,13),10):void 0;if(t&&(isNaN(n)||void 0!==r&&isNaN(r)||void 0!==a&&isNaN(a)||void 0!==i&&isNaN(i)||n<0||n>23||r&&(r<0||r>59)||a&&(a<0||a>59)||i&&(i<0||i>999999)))throw"invalid TM '"+e+"'";return{hours:n,minutes:r,seconds:a,fractionalSeconds:i}}if(t)throw"invalid TM '"+e+"'"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e,t){switch(e){case 2:return t%4==0&&t%100||t%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}}function a(e,t,n){return!isNaN(n)&&(t>0&&t<=12&&e>0&&e<=r(t,n))}function i(e,t){if(e&&8===e.length){var n=parseInt(e.substring(0,4),10),r=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);if(t&&!0!==a(i,r,n))throw"invalid DA '"+e+"'";return{year:n,month:r,day:i}}if(t)throw"invalid DA '"+e+"'"}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(void 0===e)throw"dicomParser.explicitDataSetToJS: missing required parameter dataSet";t=t||{omitPrivateAttibutes:!0,maxElementLength:128};var n={};for(var r in e.elements){var a=e.elements[r];if(!0!==t.omitPrivateAttibutes||!s.isPrivateTag(r))if(a.items){for(var l=[],u=0;u<a.items.length;u++)l.push(i(a.items[u].dataSet,t));n[r]=l}else{var d;d=void 0,a.length<t.maxElementLength&&(d=(0,o.default)(e,a)),n[r]=void 0!==d?d:{dataOffset:a.dataOffset,length:a.length}}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=a(n(23)),s=r(n(16))},function(e,t,n){"use strict";function r(e,t){return 255===e.byteArray[t]&&217===e.byteArray[t+1]}function a(e,t,n){var a=t.fragments[n];return!(!r(e,a.position+a.length-2)&&!r(e,a.position+a.length-3))}function i(e,t,n){for(var r=n;r<t.fragments.length;r++)if(a(e,t,r))return r}function o(e,t,n){if(void 0===e)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter dataSet";if(void 0===t)throw"dicomParser.createJPEGBasicOffsetTable: missing required parameter pixelDataElement";if("x7fe00010"!==t.tag)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to non pixel data tag (expected tag = x7fe00010'";if(!0!==t.encapsulatedPixelData)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(t.fragments.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'pixelDataElement' refers to pixel data element that does not have encapsulated pixel data";if(n&&n.length<=0)throw"dicomParser.createJPEGBasicOffsetTable: parameter 'fragments' must not be zero length";n=n||t.fragments;for(var r=[],a=0;;){r.push(t.fragments[a].offset);var o=i(e,t,a);if(void 0===o||o===t.fragments.length-1)return r;a=o+1}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function a(e){return 3*e.length/4-r(e)}function i(e){var t,n,a,i,o,s=e.length;i=r(e),o=new c(3*s/4-i),n=i>0?s-4:s;var l=0;for(t=0;t<n;t+=4)a=d[e.charCodeAt(t)]<<18|d[e.charCodeAt(t+1)]<<12|d[e.charCodeAt(t+2)]<<6|d[e.charCodeAt(t+3)],o[l++]=a>>16&255,o[l++]=a>>8&255,o[l++]=255&a;return 2===i?(a=d[e.charCodeAt(t)]<<2|d[e.charCodeAt(t+1)]>>4,o[l++]=255&a):1===i&&(a=d[e.charCodeAt(t)]<<10|d[e.charCodeAt(t+1)]<<4|d[e.charCodeAt(t+2)]>>2,o[l++]=a>>8&255,o[l++]=255&a),o}function o(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16)+(e[i+1]<<8)+e[i+2],a.push(o(r));return a.join("")}function l(e){for(var t,n=e.length,r=n%3,a="",i=[],o=16383,l=0,d=n-r;l<d;l+=16383)i.push(s(e,l,l+16383>d?d:l+16383));return 1===r?(t=e[n-1],a+=u[t>>2],a+=u[t<<4&63],a+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],a+=u[t>>10],a+=u[t>>4&63],a+=u[t<<2&63],a+="="),i.push(a),i.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=l;for(var u=[],d=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,m=f.length;h<m;++h)u[h]=f[h],d[f.charCodeAt(h)]=h;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,a){var i,o,s=8*a-r-1,l=(1<<s)-1,u=l>>1,d=-7,c=n?a-1:0,f=n?-1:1,h=e[t+c];for(c+=f,i=h&(1<<-d)-1,h>>=-d,d+=s;d>0;i=256*i+e[t+c],c+=f,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=256*o+e[t+c],c+=f,d-=8);if(0===i)i=1-u;else{if(i===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),i-=u}return(h?-1:1)*o*Math.pow(2,i-r)},t.write=function(e,t,n,r,a,i){var o,s,l,u=8*i-a-1,d=(1<<u)-1,c=d>>1,f=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:i-1,m=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+c>=1?f/l:f*Math.pow(2,1-c))*l>=2&&(o++,l/=2),o+c>=d?(s=0,o=d):o+c>=1?(s=(t*l-1)*Math.pow(2,a),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,a),o=0));a>=8;e[n+h]=255&s,h+=m,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+h]=255&o,h+=m,o/=256,u-=8);e[n+h-m]|=128*p}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default="1.7.6"},function(e,t,n){"use strict";(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function i(t,r){function a(e){if(void 0===e.elements.x00020010)throw"dicomParser.parseDicom: missing required meta header attribute 0002,0010";var n=e.elements.x00020010;return h.readFixedString(t,n.dataOffset,n.length)}function i(e){return"1.2.840.10008.1.2"!==e}function p(a,i){if("1.2.840.10008.1.2.1.99"===a){if(r&&r.inflater){var u=r.inflater(t,i);return new l.default(d.default,u,0)}if(void 0!==e&&this.module!==e){var c=n(54),h=(0,f.default)(t,i,t.length-i),m=c.inflateRawSync(h),p=(0,o.default)(t,m.length+i);return t.copy(p,0,0,i),m.copy(p,i),new l.default(d.default,p,0)}if("undefined"!=typeof pako){var g=t.slice(i),v=pako.inflateRaw(g),y=(0,o.default)(t,v.length+i);return y.set(t.slice(0,i),0),y.set(v,i),new l.default(d.default,y,0)}throw"dicomParser.parseDicom: no inflater available to handle deflate transfer syntax"}return"1.2.840.10008.1.2.2"===a?new l.default(s.default,t,i):new l.default(d.default,t,i)}function g(e,t){for(var n in e.elements)e.elements.hasOwnProperty(n)&&(t.elements[n]=e.elements[n]);return void 0!==e.warnings&&(t.warnings=e.warnings.concat(t.warnings)),t}function v(e){var t=a(e),n=i(t),o=p(t,e.position),s={},l=new u.default(o.byteArrayParser,o.byteArray,s);l.warnings=o.warnings;try{n?m.parseDicomDataSetExplicit(l,o,o.byteArray.length,r):m.parseDicomDataSetImplicit(l,o,o.byteArray.length,r)}catch(e){throw{exception:e,dataSet:l}}return l}function y(){var e=(0,c.default)(t,r);return g(e,v(e))}if(void 0===t)throw"dicomParser.parseDicom: missing required parameter 'byteArray'";return y()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=a(n(19)),s=a(n(29)),l=a(n(12)),u=a(n(5)),d=a(n(20)),c=a(n(30)),f=a(n(13)),h=r(n(10)),m=r(n(8))}).call(t,n(53)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){(function(e,r){function a(t,n,r){function a(){for(var e;null!==(e=t.read());)s.push(e),l+=e.length;t.once("readable",a)}function i(e){t.removeListener("end",o),t.removeListener("readable",a),r(e)}function o(){var n=e.concat(s,l);s=[],r(null,n),t.close()}var s=[],l=0;t.on("error",i),t.on("end",o),t.end(n),a()}function i(t,n){if("string"==typeof n&&(n=new e(n)),!e.isBuffer(n))throw new TypeError("Not a string or buffer");var r=p.Z_FINISH;return t._processChunk(n,r)}function o(e){if(!(this instanceof o))return new o(e);h.call(this,e,p.DEFLATE)}function s(e){if(!(this instanceof s))return new s(e);h.call(this,e,p.INFLATE)}function l(e){if(!(this instanceof l))return new l(e);h.call(this,e,p.GZIP)}function u(e){if(!(this instanceof u))return new u(e);h.call(this,e,p.GUNZIP)}function d(e){if(!(this instanceof d))return new d(e);h.call(this,e,p.DEFLATERAW)}function c(e){if(!(this instanceof c))return new c(e);h.call(this,e,p.INFLATERAW)}function f(e){if(!(this instanceof f))return new f(e);h.call(this,e,p.UNZIP)}function h(n,r){if(this._opts=n=n||{},this._chunkSize=n.chunkSize||t.Z_DEFAULT_CHUNK,m.call(this,n),n.flush&&n.flush!==p.Z_NO_FLUSH&&n.flush!==p.Z_PARTIAL_FLUSH&&n.flush!==p.Z_SYNC_FLUSH&&n.flush!==p.Z_FULL_FLUSH&&n.flush!==p.Z_FINISH&&n.flush!==p.Z_BLOCK)throw new Error("Invalid flush flag: "+n.flush);if(this._flushFlag=n.flush||p.Z_NO_FLUSH,n.chunkSize&&(n.chunkSize<t.Z_MIN_CHUNK||n.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+n.chunkSize);if(n.windowBits&&(n.windowBits<t.Z_MIN_WINDOWBITS||n.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+n.windowBits);if(n.level&&(n.level<t.Z_MIN_LEVEL||n.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+n.level);if(n.memLevel&&(n.memLevel<t.Z_MIN_MEMLEVEL||n.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+n.memLevel);if(n.strategy&&n.strategy!=t.Z_FILTERED&&n.strategy!=t.Z_HUFFMAN_ONLY&&n.strategy!=t.Z_RLE&&n.strategy!=t.Z_FIXED&&n.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+n.strategy);if(n.dictionary&&!e.isBuffer(n.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new p.Zlib(r);var a=this;this._hadError=!1,this._binding.onerror=function(e,n){a._binding=null,a._hadError=!0;var r=new Error(e);r.errno=n,r.code=t.codes[n],a.emit("error",r)};var i=t.Z_DEFAULT_COMPRESSION;"number"==typeof n.level&&(i=n.level);var o=t.Z_DEFAULT_STRATEGY;"number"==typeof n.strategy&&(o=n.strategy),this._binding.init(n.windowBits||t.Z_DEFAULT_WINDOWBITS,i,n.memLevel||t.Z_DEFAULT_MEMLEVEL,o,n.dictionary),this._buffer=new e(this._chunkSize),this._offset=0,this._closed=!1,this._level=i,this._strategy=o,this.once("end",this.close)}var m=n(55),p=n(63),g=n(41),v=n(73).ok;p.Z_MIN_WINDOWBITS=8,p.Z_MAX_WINDOWBITS=15,p.Z_DEFAULT_WINDOWBITS=15,p.Z_MIN_CHUNK=64,p.Z_MAX_CHUNK=1/0,p.Z_DEFAULT_CHUNK=16384,p.Z_MIN_MEMLEVEL=1,p.Z_MAX_MEMLEVEL=9,p.Z_DEFAULT_MEMLEVEL=8,p.Z_MIN_LEVEL=-1,p.Z_MAX_LEVEL=9,p.Z_DEFAULT_LEVEL=p.Z_DEFAULT_COMPRESSION,Object.keys(p).forEach(function(e){e.match(/^Z/)&&(t[e]=p[e])}),t.codes={Z_OK:p.Z_OK,Z_STREAM_END:p.Z_STREAM_END,Z_NEED_DICT:p.Z_NEED_DICT,Z_ERRNO:p.Z_ERRNO,Z_STREAM_ERROR:p.Z_STREAM_ERROR,Z_DATA_ERROR:p.Z_DATA_ERROR,Z_MEM_ERROR:p.Z_MEM_ERROR,Z_BUF_ERROR:p.Z_BUF_ERROR,Z_VERSION_ERROR:p.Z_VERSION_ERROR},Object.keys(t.codes).forEach(function(e){t.codes[t.codes[e]]=e}),t.Deflate=o,t.Inflate=s,t.Gzip=l,t.Gunzip=u,t.DeflateRaw=d,t.InflateRaw=c,t.Unzip=f,t.createDeflate=function(e){return new o(e)},t.createInflate=function(e){return new s(e)},t.createDeflateRaw=function(e){return new d(e)},t.createInflateRaw=function(e){return new c(e)},t.createGzip=function(e){return new l(e)},t.createGunzip=function(e){return new u(e)},t.createUnzip=function(e){return new f(e)},t.deflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new o(t),e,n)},t.deflateSync=function(e,t){return i(new o(t),e)},t.gzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new l(t),e,n)},t.gzipSync=function(e,t){return i(new l(t),e)},t.deflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new d(t),e,n)},t.deflateRawSync=function(e,t){return i(new d(t),e)},t.unzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new f(t),e,n)},t.unzipSync=function(e,t){return i(new f(t),e)},t.inflate=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new s(t),e,n)},t.inflateSync=function(e,t){return i(new s(t),e)},t.gunzip=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new u(t),e,n)},t.gunzipSync=function(e,t){return i(new u(t),e)},t.inflateRaw=function(e,t,n){return"function"==typeof t&&(n=t,t={}),a(new c(t),e,n)},t.inflateRawSync=function(e,t){return i(new c(t),e)},g.inherits(h,m),h.prototype.params=function(e,n,a){if(e<t.Z_MIN_LEVEL||e>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+e);if(n!=t.Z_FILTERED&&n!=t.Z_HUFFMAN_ONLY&&n!=t.Z_RLE&&n!=t.Z_FIXED&&n!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+n);if(this._level!==e||this._strategy!==n){var i=this;this.flush(p.Z_SYNC_FLUSH,function(){i._binding.params(e,n),i._hadError||(i._level=e,i._strategy=n,a&&a())})}else r.nextTick(a)},h.prototype.reset=function(){return this._binding.reset()},h.prototype._flush=function(t){this._transform(new e(0),"",t)},h.prototype.flush=function(t,n){var a=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=p.Z_FULL_FLUSH),a.ended)n&&r.nextTick(n);else if(a.ending)n&&this.once("end",n);else if(a.needDrain){var i=this;this.once("drain",function(){i.flush(n)})}else this._flushFlag=t,this.write(new e(0),"",n)},h.prototype.close=function(e){if(e&&r.nextTick(e),!this._closed){this._closed=!0,this._binding.close();var t=this;r.nextTick(function(){t.emit("close")})}},h.prototype._transform=function(t,n,r){var a,i=this._writableState,o=(i.ending||i.ended)&&(!t||i.length===t.length);if(null===!t&&!e.isBuffer(t))return r(new Error("invalid input"));o?a=p.Z_FINISH:(a=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||p.Z_NO_FLUSH));var s=this;this._processChunk(t,a,r)},h.prototype._processChunk=function(t,n,r){function a(f,h){if(!l._hadError){var m=o-h;if(v(m>=0,"have should not go down"),m>0){var p=l._buffer.slice(l._offset,l._offset+m);l._offset+=m,u?l.push(p):(d.push(p),c+=p.length)}if((0===h||l._offset>=l._chunkSize)&&(o=l._chunkSize,l._offset=0,l._buffer=new e(l._chunkSize)),0===h){if(s+=i-f,i=f,!u)return!0;var g=l._binding.write(n,t,s,i,l._buffer,l._offset,l._chunkSize);return g.callback=a,void(g.buffer=t)}if(!u)return!1;r()}}var i=t&&t.length,o=this._chunkSize-this._offset,s=0,l=this,u="function"==typeof r;if(!u){var d=[],c=0,f;this.on("error",function(e){f=e});do{var h=this._binding.writeSync(n,t,s,i,this._buffer,this._offset,o)}while(!this._hadError&&a(h[0],h[1]));if(this._hadError)throw f;var m=e.concat(d,c);return this.close(),m}var p=this._binding.write(n,t,s,i,this._buffer,this._offset,o);p.buffer=t,p.callback=a},g.inherits(o,h),g.inherits(s,h),g.inherits(l,h),g.inherits(u,h),g.inherits(d,h),g.inherits(c,h),g.inherits(f,h)}).call(t,n(0).Buffer,n(3))},function(e,t,n){e.exports=n(56).Transform},function(e,t,n){(t=e.exports=n(31)).Stream=t,t.Readable=t,t.Writable=n(35),t.Duplex=n(4),t.Transform=n(37),t.PassThrough=n(62)},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t,n){e.copy(t,n)}var i=n(21).Buffer;e.exports=function(){function e(){r(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function e(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function e(t){var n={data:t,next:this.head};0===this.length&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function e(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function e(){this.head=this.tail=null,this.length=0},e.prototype.join=function e(t){if(0===this.length)return"";for(var n=this.head,r=""+n.data;n=n.next;)r+=t+n.data;return r},e.prototype.concat=function e(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var n=i.allocUnsafe(t>>>0),r=this.head,o=0;r;)a(r.data,n,o),o+=r.data.length,r=r.next;return n},e}()},function(e,t,n){function r(e,t){this._id=e,this._clearFn=t}var a=Function.prototype.apply;t.setTimeout=function(){return new r(a.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new r(a.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function t(){e._onTimeout&&e._onTimeout()},t))},n(60),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,n){(function(e,t){!function(e,n){"use strict";function r(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return m[h]=r,v(h),h++}function a(e){delete m[e]}function i(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r);break}}function o(e){if(p)setTimeout(o,0,e);else{var t=m[e];if(t){p=!0;try{i(t)}finally{a(e),p=!1}}}}function s(){v=function(e){t.nextTick(function(){o(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function u(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&o(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),v=function(n){e.postMessage(t+n,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){o(e.data)},v=function(t){e.port2.postMessage(t)}}function c(){var e=g.documentElement;v=function(t){var n=g.createElement("script");n.onreadystatechange=function(){o(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function f(){v=function(e){setTimeout(o,0,e)}}if(!e.setImmediate){var h=1,m={},p=!1,g=e.document,v,y=Object.getPrototypeOf&&Object.getPrototypeOf(e);y=y&&y.setTimeout?y:e,"[object process]"==={}.toString.call(e.process)?s():l()?u():e.MessageChannel?d():g&&"onreadystatechange"in g.createElement("script")?c():f(),y.setImmediate=r,y.clearImmediate=a}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(3))},function(e,t,n){(function(t){function n(e,t){function n(){if(!a){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),a=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var a=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(t,n(2))},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);a.call(this,e)}e.exports=r;var a=n(37),i=n(6);i.inherits=n(7),i.inherits(r,a),r.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){(function(e,r){function a(e){if(e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.mode=e,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function i(e,t){for(var n=0;n<e.length;n++)this[t+n]=e[n]}var o=n(38),s=n(64),l=n(65),u=n(67),d=n(70);for(var c in d)t[c]=d[c];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7,a.prototype.init=function(e,n,r,a,i){switch(this.windowBits=e,this.level=n,this.memLevel=r,this.strategy=a,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var o=l.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:var o=u.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}o===t.Z_OK?(this.write_in_progress=!1,this.init_done=!0):this._error(o)},a.prototype.params=function(){throw new Error("deflateParams Not supported")},a.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===t.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},a.prototype.write=function(t,n,r,a,i,o,s){this._writeCheck(),this.write_in_progress=!0;var l=this;return e.nextTick(function(){l.write_in_progress=!1;var e=l._write(t,n,r,a,i,o,s);l.callback(e[0],e[1]),l.pending_close&&l.close()}),this},a.prototype.writeSync=function(e,t,n,r,a,i,o){return this._writeCheck(),this._write(e,t,n,r,a,i,o)},a.prototype._write=function(e,n,a,o,s,d,c){if(this.write_in_progress=!0,e!==t.Z_NO_FLUSH&&e!==t.Z_PARTIAL_FLUSH&&e!==t.Z_SYNC_FLUSH&&e!==t.Z_FULL_FLUSH&&e!==t.Z_FINISH&&e!==t.Z_BLOCK)throw new Error("Invalid flush value");null==n&&(n=new r(0),o=0,a=0),s._set?s.set=s._set:s.set=i;var f=this.strm;switch(f.avail_in=o,f.input=n,f.next_in=a,f.avail_out=c,f.output=s,f.next_out=d,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:var h=l.deflate(f,e);break;case t.UNZIP:case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:var h=u.inflate(f,e);break;default:throw new Error("Unknown mode "+this.mode)}return h!==t.Z_STREAM_END&&h!==t.Z_OK&&this._error(h),this.write_in_progress=!1,[f.avail_in,f.avail_out]},a.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?l.deflateEnd(this.strm):u.inflateEnd(this.strm),this.mode=t.NONE)},a.prototype.reset=function(){switch(this.mode){case t.DEFLATE:case t.DEFLATERAW:var e=l.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:var e=u.inflateReset(this.strm);break}e!==t.Z_OK&&this._error(e)},a.prototype._error=function(e){this.onerror(o[e]+": "+this.strm.msg,e),this.write_in_progress=!1,this.pending_close&&this.close()},t.Zlib=a}).call(t,n(3),n(0).Buffer)},function(e,t,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},function(e,t,n){"use strict";function r(e,t){return e.msg=k[t],t}function a(e){return(e<<1)-(e>4?9:0)}function i(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(O.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){I._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function d(e,t,n,r){var a=e.avail_in;return a>r&&(a=r),0===a?0:(e.avail_in-=a,O.arraySet(t,e.input,e.next_in,a,n),1===e.state.wrap?e.adler=C(e.adler,t,a,n):2===e.state.wrap&&(e.adler=L(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)}function c(e,t){var n=e.max_chain_length,r=e.strstart,a,i,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,u=e.window,d=e.w_mask,c=e.prev,f=e.strstart+ue,h=u[r+o-1],m=u[r+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(a=t,u[a+o]===m&&u[a+o-1]===h&&u[a]===u[r]&&u[++a]===u[r+1]){r+=2,a++;do{}while(u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&u[++r]===u[++a]&&r<f);if(i=ue-(f-r),r=f-ue,i>o){if(e.match_start=t,o=i,i>=s)break;h=u[r+o-1],m=u[r+o]}}}while((t=c[t&d])>l&&0!=--n);return o<=e.lookahead?o:e.lookahead}function f(e){var t=e.w_size,n,r,a,i,o;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-de)){O.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,n=r=e.hash_size;do{a=e.head[--n],e.head[n]=a>=t?a-t:0}while(--r);n=r=t;do{a=e.prev[--n],e.prev[n]=a>=t?a-t:0}while(--r);i+=t}if(0===e.strm.avail_in)break;if(r=d(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=le)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+le-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<le)););}while(e.lookahead<de&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(f(e),0===e.lookahead&&t===A)return be;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return be;if(e.strstart-e.block_start>=e.w_size-de&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?we:Ee):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),be)}function m(e,t){for(var n,r;;){if(e.lookahead<de){if(f(e),e.lookahead<de&&t===A)return be;if(0===e.lookahead)break}if(n=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-de&&(e.match_length=c(e,n)),e.match_length>=le)if(r=I._tr_tally(e,e.strstart-e.match_start,e.match_length-le),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=le){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=e.strstart<le-1?e.strstart:le-1,t===U?(s(e,!0),0===e.strm.avail_out?we:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:_e}function p(e,t){for(var n,r,a;;){if(e.lookahead<de){if(f(e),e.lookahead<de&&t===A)return be;if(0===e.lookahead)break}if(n=0,e.lookahead>=le&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=le-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-de&&(e.match_length=c(e,n),e.match_length<=5&&(e.strategy===q||e.match_length===le&&e.strstart-e.match_start>4096)&&(e.match_length=le-1)),e.prev_length>=le&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-le,r=I._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-le),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+le-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=le-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return be}else if(e.match_available){if((r=I._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return be}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=I._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<le-1?e.strstart:le-1,t===U?(s(e,!0),0===e.strm.avail_out?we:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:_e}function g(e,t){for(var n,r,a,i,o=e.window;;){if(e.lookahead<=ue){if(f(e),e.lookahead<=ue&&t===A)return be;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=le&&e.strstart>0&&(a=e.strstart-1,(r=o[a])===o[++a]&&r===o[++a]&&r===o[++a])){i=e.strstart+ue;do{}while(r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&r===o[++a]&&a<i);e.match_length=ue-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=le?(n=I._tr_tally(e,1,e.match_length-le),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?we:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:_e}function v(e,t){for(var n;;){if(0===e.lookahead&&(f(e),0===e.lookahead)){if(t===A)return be;break}if(e.match_length=0,n=I._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return be}return e.insert=0,t===U?(s(e,!0),0===e.strm.avail_out?we:Ee):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?be:_e}function y(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}function b(e){e.window_size=2*e.w_size,i(e.head),e.max_lazy_match=Te[e.level].max_lazy,e.good_match=Te[e.level].good_length,e.nice_match=Te[e.level].nice_length,e.max_chain_length=Te[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=le-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=J,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new O.Buf16(2*oe),this.dyn_dtree=new O.Buf16(2*(2*ae+1)),this.bl_tree=new O.Buf16(2*(2*ie+1)),i(this.dyn_ltree),i(this.dyn_dtree),i(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new O.Buf16(se+1),this.heap=new O.Buf16(2*re+1),i(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new O.Buf16(2*re+1),i(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=X,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?fe:ve,e.adler=2===t.wrap?0:1,t.last_flush=A,I._tr_init(t),N):r(e,z)}function E(e){var t=w(e);return t===N&&b(e.state),t}function x(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,N):z}function T(e,t,n,a,i,o){if(!e)return z;var s=1;if(t===W&&(t=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),i<1||i>$||n!==J||a<8||a>15||t<0||t>9||o<0||o>Y)return r(e,z);8===a&&(a=9);var l=new _;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=a,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+le-1)/le),l.window=new O.Buf8(2*l.w_size),l.head=new O.Buf16(l.hash_size),l.prev=new O.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new O.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,E(e)}function P(e,t){return T(e,t,J,Q,ee,K)}function j(e,t){var n,s,d,c;if(!e||!e.state||t>B||t<0)return e?r(e,z):z;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ye&&t!==U)return r(e,0===e.avail_out?V:z);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===fe)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=G||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=L(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=he):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=G||s.level<2?4:0),l(s,xe),s.status=ve);else{var f=J+(s.w_bits-8<<4)<<8,h=-1;f|=(h=s.strategy>=G||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(f|=ce),f+=31-f%31,s.status=ve,u(s,f),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===he)if(s.gzhead.extra){for(d=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=me)}else s.status=me;if(s.status===me)if(s.gzhead.name){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.gzindex=0,s.status=pe)}else s.status=pe;if(s.status===pe)if(s.gzhead.comment){d=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),o(e),d=s.pending,s.pending===s.pending_buf_size)){c=1;break}c=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,c)}while(0!==c);s.gzhead.hcrc&&s.pending>d&&(e.adler=L(e.adler,s.pending_buf,s.pending-d,d)),0===c&&(s.status=ge)}else s.status=ge;if(s.status===ge&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ve)):s.status=ve),0!==s.pending){if(o(e),0===e.avail_out)return s.last_flush=-1,N}else if(0===e.avail_in&&a(t)<=a(n)&&t!==U)return r(e,V);if(s.status===ye&&0!==e.avail_in)return r(e,V);if(0!==e.avail_in||0!==s.lookahead||t!==A&&s.status!==ye){var m=s.strategy===G?v(s,t):s.strategy===Z?g(s,t):Te[s.level].func(s,t);if(m!==we&&m!==Ee||(s.status=ye),m===be||m===we)return 0===e.avail_out&&(s.last_flush=-1),N;if(m===_e&&(t===D?I._tr_align(s):t!==B&&(I._tr_stored_block(s,0,0,!1),t===R&&(i(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(e),0===e.avail_out))return s.last_flush=-1,N}return t!==U?N:s.wrap<=0?F:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),o(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?N:F)}function S(e){var t;return e&&e.state?(t=e.state.status)!==fe&&t!==he&&t!==me&&t!==pe&&t!==ge&&t!==ve&&t!==ye?r(e,z):(e.state=null,t===ve?r(e,H):N):z}function M(e,t){var n=t.length,r,a,o,s,l,u,d,c;if(!e||!e.state)return z;if(r=e.state,2===(s=r.wrap)||1===s&&r.status!==fe||r.lookahead)return z;for(1===s&&(e.adler=C(e.adler,t,n,0)),r.wrap=0,n>=r.w_size&&(0===s&&(i(r.head),r.strstart=0,r.block_start=0,r.insert=0),c=new O.Buf8(r.w_size),O.arraySet(c,t,n-r.w_size,r.w_size,0),t=c,n=r.w_size),l=e.avail_in,u=e.next_in,d=e.input,e.avail_in=n,e.next_in=0,e.input=t,f(r);r.lookahead>=le;){a=r.strstart,o=r.lookahead-(le-1);do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[a+le-1])&r.hash_mask,r.prev[a&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=a,a++}while(--o);r.strstart=a,r.lookahead=le-1,f(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=le-1,r.match_available=0,e.next_in=u,e.input=d,e.avail_in=l,r.wrap=s,N}var O=n(15),I=n(66),C=n(39),L=n(40),k=n(38),A=0,D=1,R=3,U=4,B=5,N=0,F=1,z=-2,H=-3,V=-5,W=-1,q=1,G=2,Z=3,Y=4,K=0,X=2,J=8,$=9,Q=15,ee=8,te=29,ne=256,re=286,ae=30,ie=19,oe=2*re+1,se=15,le=3,ue=258,de=ue+le+1,ce=32,fe=42,he=69,me=73,pe=91,ge=103,ve=113,ye=666,be=1,_e=2,we=3,Ee=4,xe=3,Te;Te=[new y(0,0,0,0,h),new y(4,4,8,4,m),new y(4,5,16,8,m),new y(4,6,32,32,m),new y(4,4,16,16,p),new y(8,16,32,32,p),new y(8,16,128,128,p),new y(8,32,128,256,p),new y(32,128,258,1024,p),new y(32,258,258,4096,p)],t.deflateInit=P,t.deflateInit2=T,t.deflateReset=E,t.deflateResetKeep=w,t.deflateSetHeader=x,t.deflate=j,t.deflateEnd=S,t.deflateSetDictionary=M,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function i(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?le[e]:le[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>K-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>K-e.bi_valid,e.bi_valid+=n-K):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function d(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function c(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function f(e,t){var n=t.dyn_tree,r=t.max_code,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,l=t.stat_desc.max_length,u,d,c,f,h,m,p=0;for(f=0;f<=Y;f++)e.bl_count[f]=0;for(n[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<Z;u++)(f=n[2*n[2*(d=e.heap[u])+1]+1]+1)>l&&(f=l,p++),n[2*d+1]=f,d>r||(e.bl_count[f]++,h=0,d>=s&&(h=o[d-s]),m=n[2*d],e.opt_len+=m*(f+h),i&&(e.static_len+=m*(a[2*d+1]+h)));if(0!==p){do{for(f=l-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[l]--,p-=2}while(p>0);for(f=l;0!==f;f--)for(d=e.bl_count[f];0!==d;)(c=e.heap[--u])>r||(n[2*c+1]!==f&&(e.opt_len+=(f-n[2*c+1])*n[2*c],n[2*c+1]=f),d--)}}function h(e,t,n){var r=new Array(Y+1),a=0,i,o;for(i=1;i<=Y;i++)r[i]=a=a+n[i-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=d(r[s]++,s))}}function m(){var e,t,n,r,i,o=new Array(Y+1);for(n=0,r=0;r<H-1;r++)for(de[r]=n,e=0;e<1<<te[r];e++)ue[n++]=r;for(ue[n-1]=r,i=0,r=0;r<16;r++)for(ce[r]=i,e=0;e<1<<ne[r];e++)le[i++]=r;for(i>>=7;r<q;r++)for(ce[r]=i<<7,e=0;e<1<<ne[r]-7;e++)le[256+i++]=r;for(t=0;t<=Y;t++)o[t]=0;for(e=0;e<=143;)oe[2*e+1]=8,e++,o[8]++;for(;e<=255;)oe[2*e+1]=9,e++,o[9]++;for(;e<=279;)oe[2*e+1]=7,e++,o[7]++;for(;e<=287;)oe[2*e+1]=8,e++,o[8]++;for(h(oe,W+1,o),e=0;e<q;e++)se[2*e+1]=5,se[2*e]=d(e,5);fe=new a(oe,te,V+1,W,Y),he=new a(se,ne,0,q,Y),me=new a(new Array(0),re,0,G,X)}function p(e){var t;for(t=0;t<W;t++)e.dyn_ltree[2*t]=0;for(t=0;t<q;t++)e.dyn_dtree[2*t]=0;for(t=0;t<G;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*J]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function g(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){g(e),r&&(s(e,n),s(e,~n)),L.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],a=n<<1;a<=e.heap_len&&(a<e.heap_len&&y(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!y(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r}function _(e,t,n){var r,a,i=0,s,d;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*i]<<8|e.pending_buf[e.d_buf+2*i+1],a=e.pending_buf[e.l_buf+i],i++,0===r?u(e,a,t):(u(e,(s=ue[a])+V+1,t),0!==(d=te[s])&&l(e,a-=de[s],d),u(e,s=o(--r),n),0!==(d=ne[s])&&l(e,r-=ce[s],d))}while(i<e.last_lit);u(e,J,t)}function w(e,t){var n=t.dyn_tree,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,i=t.stat_desc.elems,o,s,l=-1,u;for(e.heap_len=0,e.heap_max=Z,o=0;o<i;o++)0!==n[2*o]?(e.heap[++e.heap_len]=l=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)n[2*(u=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[u]=0,e.opt_len--,a&&(e.static_len-=r[2*u+1]);for(t.max_code=l,o=e.heap_len>>1;o>=1;o--)b(e,n,o);u=i;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[2*u]=n[2*o]+n[2*s],e.depth[u]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[2*o+1]=n[2*s+1]=u,e.heap[1]=u++,b(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],f(e,t),h(n,l,e.bl_count)}function E(e,t,n){var r,a=-1,i,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*$]++):s<=10?e.bl_tree[2*Q]++:e.bl_tree[2*ee]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function x(e,t,n){var r,a=-1,i,o=t[1],s=0,d=7,c=4;for(0===o&&(d=138,c=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<d&&i===o)){if(s<c)do{u(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==a&&(u(e,i,e.bl_tree),s--),u(e,$,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,Q,e.bl_tree),l(e,s-3,3)):(u(e,ee,e.bl_tree),l(e,s-11,7));s=0,a=i,0===o?(d=138,c=3):i===o?(d=6,c=3):(d=7,c=4)}}function T(e){var t;for(E(e,e.dyn_ltree,e.l_desc.max_code),E(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ae[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function P(e,t,n,r){var a;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),a=0;a<r;a++)l(e,e.bl_tree[2*ae[a]+1],3);x(e,e.dyn_ltree,t-1),x(e,e.dyn_dtree,n-1)}function j(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return A;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return D;for(n=32;n<V;n++)if(0!==e.dyn_ltree[2*n])return D;return A}function S(e){pe||(m(),pe=!0),e.l_desc=new i(e.dyn_ltree,fe),e.d_desc=new i(e.dyn_dtree,he),e.bl_desc=new i(e.bl_tree,me),e.bi_buf=0,e.bi_valid=0,p(e)}function M(e,t,n,r){l(e,(U<<1)+(r?1:0),3),v(e,t,n,!0)}function O(e){l(e,B<<1,3),u(e,J,oe),c(e)}function I(e,t,n,r){var a,i,o=0;e.level>0?(e.strm.data_type===R&&(e.strm.data_type=j(e)),w(e,e.l_desc),w(e,e.d_desc),o=T(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?M(e,t,n,r):e.strategy===k||i===a?(l(e,(B<<1)+(r?1:0),3),_(e,oe,se)):(l(e,(N<<1)+(r?1:0),3),P(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),p(e),r&&g(e)}function C(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ue[n]+V+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var L=n(15),k=4,A=0,D=1,R=2,U=0,B=1,N=2,F=3,z=258,H=29,V=256,W=V+1+H,q=30,G=19,Z=2*W+1,Y=15,K=16,X=7,J=256,$=16,Q=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=512,oe=new Array(2*(W+2));r(oe);var se=new Array(2*q);r(se);var le=new Array(512);r(le);var ue=new Array(256);r(ue);var de=new Array(H);r(de);var ce=new Array(q);r(ce);var fe,he,me,pe=!1;t._tr_init=S,t._tr_stored_block=M,t._tr_flush_block=I,t._tr_tally=C,t._tr_align=O},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function a(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=D,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new g.Buf32(he),t.distcode=t.distdyn=new g.Buf32(me),t.sane=1,t.back=-1,S):I}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,i(e)):I}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?I:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):I}function l(e,t){var n,r;return e?(r=new a,e.state=r,r.window=null,(n=s(e,t))!==S&&(e.state=null),n):I}function u(e){return l(e,ge)}function d(e){if(ve){var t;for(ye=new g.Buf32(512),be=new g.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_(E,e.lens,0,288,ye,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_(x,e.lens,0,32,be,0,e.work,{bits:5}),ve=!1}e.lencode=ye,e.lenbits=9,e.distcode=be,e.distbits=5}function c(e,t,n,r){var a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new g.Buf8(i.wsize)),r>=i.wsize?(g.arraySet(i.window,t,n-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),g.arraySet(i.window,t,n-r,a,i.wnext),(r-=a)?(g.arraySet(i.window,t,n-r,r,0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0}function f(e,t){var n,a,i,o,s,l,u,f,h,m,p,he,me,pe,ge=0,ve,ye,be,_e,we,Ee,xe,Te,Pe=new g.Buf8(4),je,Se,Me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return I;(n=e.state).mode===G&&(n.mode=Z),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,a=e.input,l=e.avail_in,f=n.hold,h=n.bits,m=l,p=u,Te=S;e:for(;;)switch(n.mode){case D:if(0===n.wrap){n.mode=Z;break}for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(2&n.wrap&&35615===f){n.check=0,Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=y(n.check,Pe,2,0),f=0,h=0,n.mode=R;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&f)<<8)+(f>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&f)!==A){e.msg="unknown compression method",n.mode=de;break}if(f>>>=4,h-=4,xe=8+(15&f),0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&f?W:G,f=0,h=0;break;case R:for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(n.flags=f,(255&n.flags)!==A){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=f>>8&1),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=y(n.check,Pe,2,0)),f=0,h=0,n.mode=U;case U:for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.head&&(n.head.time=f),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,Pe[2]=f>>>16&255,Pe[3]=f>>>24&255,n.check=y(n.check,Pe,4,0)),f=0,h=0,n.mode=B;case B:for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.head&&(n.head.xflags=255&f,n.head.os=f>>8),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=y(n.check,Pe,2,0)),f=0,h=0,n.mode=N;case N:if(1024&n.flags){for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.length=f,n.head&&(n.head.extra_len=f),512&n.flags&&(Pe[0]=255&f,Pe[1]=f>>>8&255,n.check=y(n.check,Pe,2,0)),f=0,h=0}else n.head&&(n.head.extra=null);n.mode=F;case F:if(1024&n.flags&&((he=n.length)>l&&(he=l),he&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,a,o,he,xe)),512&n.flags&&(n.check=y(n.check,a,he,o)),l-=he,o+=he,n.length-=he),n.length))break e;n.length=0,n.mode=z;case z:if(2048&n.flags){if(0===l)break e;he=0;do{xe=a[o+he++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe))}while(xe&&he<l);if(512&n.flags&&(n.check=y(n.check,a,he,o)),l-=he,o+=he,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=H;case H:if(4096&n.flags){if(0===l)break e;he=0;do{xe=a[o+he++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe))}while(xe&&he<l);if(512&n.flags&&(n.check=y(n.check,a,he,o)),l-=he,o+=he,xe)break e}else n.head&&(n.head.comment=null);n.mode=V;case V:if(512&n.flags){for(;h<16;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}f=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=G;break;case W:for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}e.adler=n.check=r(f),f=0,h=0,n.mode=q;case q:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,O;e.adler=n.check=1,n.mode=G;case G:if(t===P||t===j)break e;case Z:if(n.last){f>>>=7&h,h-=7&h,n.mode=se;break}for(;h<3;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}switch(n.last=1&f,f>>>=1,h-=1,3&f){case 0:n.mode=Y;break;case 1:if(d(n),n.mode=ee,t===j){f>>>=2,h-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=de}f>>>=2,h-=2;break;case Y:for(f>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if((65535&f)!=(f>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&f,f=0,h=0,n.mode=K,t===j)break e;case K:n.mode=X;case X:if(he=n.length){if(he>l&&(he=l),he>u&&(he=u),0===he)break e;g.arraySet(i,a,o,he,s),l-=he,o+=he,u-=he,s+=he,n.length-=he;break}n.mode=G;break;case J:for(;h<14;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(n.nlen=257+(31&f),f>>>=5,h-=5,n.ndist=1+(31&f),f>>>=5,h-=5,n.ncode=4+(15&f),f>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=$;case $:for(;n.have<n.ncode;){for(;h<3;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.lens[Me[n.have++]]=7&f,f>>>=3,h-=3}for(;n.have<19;)n.lens[Me[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,je={bits:n.lenbits},Te=_(w,n.lens,0,19,n.lencode,0,n.work,je),n.lenbits=je.bits,Te){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.nlen+n.ndist;){for(;ge=n.lencode[f&(1<<n.lenbits)-1],ve=ge>>>24,ye=ge>>>16&255,be=65535&ge,!(ve<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(be<16)f>>>=ve,h-=ve,n.lens[n.have++]=be;else{if(16===be){for(Se=ve+2;h<Se;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f>>>=ve,h-=ve,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],he=3+(3&f),f>>>=2,h-=2}else if(17===be){for(Se=ve+3;h<Se;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}h-=ve,xe=0,he=3+(7&(f>>>=ve)),f>>>=3,h-=3}else{for(Se=ve+7;h<Se;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}h-=ve,xe=0,he=11+(127&(f>>>=ve)),f>>>=7,h-=7}if(n.have+he>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;he--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,je={bits:n.lenbits},Te=_(E,n.lens,0,n.nlen,n.lencode,0,n.work,je),n.lenbits=je.bits,Te){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,je={bits:n.distbits},Te=_(x,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,je),n.distbits=je.bits,Te){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ee,t===j)break e;case ee:n.mode=te;case te:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,b(e,p),s=e.next_out,i=e.output,u=e.avail_out,o=e.next_in,a=e.input,l=e.avail_in,f=n.hold,h=n.bits,n.mode===G&&(n.back=-1);break}for(n.back=0;ge=n.lencode[f&(1<<n.lenbits)-1],ve=ge>>>24,ye=ge>>>16&255,be=65535&ge,!(ve<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(ye&&0==(240&ye)){for(_e=ve,we=ye,Ee=be;ge=n.lencode[Ee+((f&(1<<_e+we)-1)>>_e)],ve=ge>>>24,ye=ge>>>16&255,be=65535&ge,!(_e+ve<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}f>>>=_e,h-=_e,n.back+=_e}if(f>>>=ve,h-=ve,n.back+=ve,n.length=be,0===ye){n.mode=oe;break}if(32&ye){n.back=-1,n.mode=G;break}if(64&ye){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ye,n.mode=ne;case ne:if(n.extra){for(Se=n.extra;h<Se;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.length+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=re;case re:for(;ge=n.distcode[f&(1<<n.distbits)-1],ve=ge>>>24,ye=ge>>>16&255,be=65535&ge,!(ve<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(0==(240&ye)){for(_e=ve,we=ye,Ee=be;ge=n.distcode[Ee+((f&(1<<_e+we)-1)>>_e)],ve=ge>>>24,ye=ge>>>16&255,be=65535&ge,!(_e+ve<=h);){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}f>>>=_e,h-=_e,n.back+=_e}if(f>>>=ve,h-=ve,n.back+=ve,64&ye){e.msg="invalid distance code",n.mode=de;break}n.offset=be,n.extra=15&ye,n.mode=ae;case ae:if(n.extra){for(Se=n.extra;h<Se;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}n.offset+=f&(1<<n.extra)-1,f>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=ie;case ie:if(0===u)break e;if(he=p-u,n.offset>he){if((he=n.offset-he)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}he>n.wnext?(he-=n.wnext,me=n.wsize-he):me=n.wnext-he,he>n.length&&(he=n.length),pe=n.window}else pe=i,me=s-n.offset,he=n.length;he>u&&(he=u),u-=he,n.length-=he;do{i[s++]=pe[me++]}while(--he);0===n.length&&(n.mode=te);break;case oe:if(0===u)break e;i[s++]=n.length,u--,n.mode=te;break;case se:if(n.wrap){for(;h<32;){if(0===l)break e;l--,f|=a[o++]<<h,h+=8}if(p-=u,e.total_out+=p,n.total+=p,p&&(e.adler=n.check=n.flags?y(n.check,i,p,s-p):v(n.check,i,p,s-p)),p=u,(n.flags?f:r(f))!==n.check){e.msg="incorrect data check",n.mode=de;break}f=0,h=0}n.mode=le;case le:if(n.wrap&&n.flags){for(;h<32;){if(0===l)break e;l--,f+=a[o++]<<h,h+=8}if(f!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}f=0,h=0}n.mode=ue;case ue:Te=M;break e;case de:Te=C;break e;case ce:return L;case fe:default:return I}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=f,n.bits=h,(n.wsize||p!==e.avail_out&&n.mode<de&&(n.mode<se||t!==T))&&c(e,e.output,e.next_out,p-e.avail_out)?(n.mode=ce,L):(m-=e.avail_in,p-=e.avail_out,e.total_in+=m,e.total_out+=p,n.total+=p,n.wrap&&p&&(e.adler=n.check=n.flags?y(n.check,i,p,e.next_out-p):v(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===G?128:0)+(n.mode===ee||n.mode===K?256:0),(0===m&&0===p||t===T)&&Te===S&&(Te=k),Te)}function h(e){if(!e||!e.state)return I;var t=e.state;return t.window&&(t.window=null),e.state=null,S}function m(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?I:(n.head=t,t.done=!1,S):I}function p(e,t){var n=t.length,r,a,i;return e&&e.state?0!==(r=e.state).wrap&&r.mode!==q?I:r.mode===q&&(a=1,(a=v(a,t,n,0))!==r.check)?C:(i=c(e,t,n,n))?(r.mode=ce,L):(r.havedict=1,S):I}var g=n(15),v=n(39),y=n(40),b=n(68),_=n(69),w=0,E=1,x=2,T=4,P=5,j=6,S=0,M=1,O=2,I=-2,C=-3,L=-4,k=-5,A=8,D=1,R=2,U=3,B=4,N=5,F=6,z=7,H=8,V=9,W=10,q=11,G=12,Z=13,Y=14,K=15,X=16,J=17,$=18,Q=19,ee=20,te=21,ne=22,re=23,ae=24,ie=25,oe=26,se=27,le=28,ue=29,de=30,ce=31,fe=32,he=852,me=592,pe=15,ge=15,ve=!0,ye,be;t.inflateReset=o,t.inflateReset2=s,t.inflateResetKeep=i,t.inflateInit=u,t.inflateInit2=l,t.inflate=f,t.inflateEnd=h,t.inflateGetHeader=m,t.inflateSetDictionary=p,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,n){"use strict";var r=30,a=12;e.exports=function e(t,n){var r,a,i,o,s,l,u,d,c,f,h,m,p,g,v,y,b,_,w,E,x,T,P,j,S;r=t.state,a=t.next_in,j=t.input,i=a+(t.avail_in-5),o=t.next_out,S=t.output,s=o-(n-t.avail_out),l=o+(t.avail_out-257),u=r.dmax,d=r.wsize,c=r.whave,f=r.wnext,h=r.window,m=r.hold,p=r.bits,g=r.lencode,v=r.distcode,y=(1<<r.lenbits)-1,b=(1<<r.distbits)-1;e:do{p<15&&(m+=j[a++]<<p,p+=8,m+=j[a++]<<p,p+=8),_=g[m&y];t:for(;;){if(w=_>>>24,m>>>=w,p-=w,0===(w=_>>>16&255))S[o++]=65535&_;else{if(!(16&w)){if(0==(64&w)){_=g[(65535&_)+(m&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}t.msg="invalid literal/length code",r.mode=30;break e}E=65535&_,(w&=15)&&(p<w&&(m+=j[a++]<<p,p+=8),E+=m&(1<<w)-1,m>>>=w,p-=w),p<15&&(m+=j[a++]<<p,p+=8,m+=j[a++]<<p,p+=8),_=v[m&b];n:for(;;){if(w=_>>>24,m>>>=w,p-=w,!(16&(w=_>>>16&255))){if(0==(64&w)){_=v[(65535&_)+(m&(1<<w)-1)];continue n}t.msg="invalid distance code",r.mode=30;break e}if(x=65535&_,w&=15,p<w&&(m+=j[a++]<<p,(p+=8)<w&&(m+=j[a++]<<p,p+=8)),(x+=m&(1<<w)-1)>u){t.msg="invalid distance too far back",r.mode=30;break e}if(m>>>=w,p-=w,w=o-s,x>w){if((w=x-w)>c&&r.sane){t.msg="invalid distance too far back",r.mode=30;break e}if(T=0,P=h,0===f){if(T+=d-w,w<E){E-=w;do{S[o++]=h[T++]}while(--w);T=o-x,P=S}}else if(f<w){if(T+=d+f-w,(w-=f)<E){E-=w;do{S[o++]=h[T++]}while(--w);if(T=0,f<E){E-=w=f;do{S[o++]=h[T++]}while(--w);T=o-x,P=S}}}else if(T+=f-w,w<E){E-=w;do{S[o++]=h[T++]}while(--w);T=o-x,P=S}for(;E>2;)S[o++]=P[T++],S[o++]=P[T++],S[o++]=P[T++],E-=3;E&&(S[o++]=P[T++],E>1&&(S[o++]=P[T++]))}else{T=o-x;do{S[o++]=S[T++],S[o++]=S[T++],S[o++]=S[T++],E-=3}while(E>2);E&&(S[o++]=S[T++],E>1&&(S[o++]=S[T++]))}break}}break}}while(a<i&&o<l);a-=E=p>>3,m&=(1<<(p-=E<<3))-1,t.next_in=a,t.next_out=o,t.avail_in=a<i?i-a+5:5-(a-i),t.avail_out=o<l?l-o+257:257-(o-l),r.hold=m,r.bits=p}},function(e,t,n){"use strict";var r=n(15),a=15,i=852,o=592,s=0,l=1,u=2,d=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function e(t,n,a,i,o,s,l,u){var m=u.bits,p=0,g=0,v=0,y=0,b=0,_=0,w=0,E=0,x=0,T=0,P,j,S,M,O,I=null,C=0,L,k=new r.Buf16(16),A=new r.Buf16(16),D=null,R=0,U,B,N;for(p=0;p<=15;p++)k[p]=0;for(g=0;g<i;g++)k[n[a+g]]++;for(b=m,y=15;y>=1&&0===k[y];y--);if(b>y&&(b=y),0===y)return o[s++]=20971520,o[s++]=20971520,u.bits=1,0;for(v=1;v<y&&0===k[v];v++);for(b<v&&(b=v),E=1,p=1;p<=15;p++)if(E<<=1,(E-=k[p])<0)return-1;if(E>0&&(0===t||1!==y))return-1;for(A[1]=0,p=1;p<15;p++)A[p+1]=A[p]+k[p];for(g=0;g<i;g++)0!==n[a+g]&&(l[A[n[a+g]]++]=g);if(0===t?(I=D=l,L=19):1===t?(I=d,C-=257,D=c,R-=257,L=256):(I=f,D=h,L=-1),T=0,g=0,p=v,O=s,_=b,w=0,S=-1,x=1<<b,M=x-1,1===t&&x>852||2===t&&x>592)return 1;for(var F=0;;){F++,U=p-w,l[g]<L?(B=0,N=l[g]):l[g]>L?(B=D[R+l[g]],N=I[C+l[g]]):(B=96,N=0),P=1<<p-w,v=j=1<<_;do{o[O+(T>>w)+(j-=P)]=U<<24|B<<16|N|0}while(0!==j);for(P=1<<p-1;T&P;)P>>=1;if(0!==P?(T&=P-1,T+=P):T=0,g++,0==--k[p]){if(p===y)break;p=n[a+l[g]]}if(p>b&&(T&M)!==S){for(0===w&&(w=b),O+=v,E=1<<(_=p-w);_+w<y&&!((E-=k[_+w])<=0);)_++,E<<=1;if(x+=1<<_,1===t&&x>852||2===t&&x>592)return 1;o[S=T&M]=b<<24|_<<16|O-s|0}}return 0!==T&&(o[O+T]=p-w<<24|64<<16|0),u.bits=b,0}},function(e,t,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){e.exports=function e(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function e(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function e(t,n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}},function(e,t,n){"use strict";(function(t){function r(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0}function a(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}function i(e){return Object.prototype.toString.call(e)}function o(e){return!a(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function s(e){if(_.isFunction(e)){if(x)return e.name;var t=e.toString().match(P);return t&&t[1]}}function l(e,t){return"string"==typeof e?e.length<t?e:e.slice(0,t):e}function u(e){if(x||!_.isFunction(e))return _.inspect(e);var t=s(e);return"[Function"+(t?": "+t:"")+"]"}function d(e){return l(u(e.actual),128)+" "+e.operator+" "+l(u(e.expected),128)}function c(e,t,n,r,a){throw new T.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:a})}function f(e,t){e||c(e,!0,t,"==",T.ok)}function h(e,t,n,s){if(e===t)return!0;if(a(e)&&a(t))return 0===r(e,t);if(_.isDate(e)&&_.isDate(t))return e.getTime()===t.getTime();if(_.isRegExp(e)&&_.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"==typeof e||null!==t&&"object"==typeof t){if(o(e)&&o(t)&&i(e)===i(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===r(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var l=(s=s||{actual:[],expected:[]}).actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(t)||(s.actual.push(e),s.expected.push(t),p(e,t,n,s))}return n?e===t:e==t}function m(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function p(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(_.isPrimitive(e)||_.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var a=m(e),i=m(t);if(a&&!i||!a&&i)return!1;if(a)return e=E.call(e),t=E.call(t),h(e,t,n);var o=j(e),s=j(t),l,u;if(o.length!==s.length)return!1;for(o.sort(),s.sort(),u=o.length-1;u>=0;u--)if(o[u]!==s[u])return!1;for(u=o.length-1;u>=0;u--)if(l=o[u],!h(e[l],t[l],n,r))return!1;return!0}function g(e,t,n){h(e,t,!0)&&c(e,t,n,"notDeepStrictEqual",g)}function v(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function y(e){var t;try{e()}catch(e){t=e}return t}function b(e,t,n,r){var a;if("function"!=typeof t)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),a=y(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!a&&c(a,n,"Missing expected exception"+r);var i="string"==typeof r,o=!e&&_.isError(a),s=!e&&a&&!n;if((o&&i&&v(a,n)||s)&&c(a,n,"Got unwanted exception"+r),e&&a&&n&&!v(a,n)||!e&&a)throw a}var _=n(41),w=Object.prototype.hasOwnProperty,E=Array.prototype.slice,x="foo"===function e(){}.name,T=e.exports=f,P=/\s*function\s+([^\(\s]*)\s*/;T.AssertionError=function e(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(this),this.generatedMessage=!0);var n=t.stackStartFunction||c;if(Error.captureStackTrace)Error.captureStackTrace(this,n);else{var r=new Error;if(r.stack){var a=r.stack,i=s(n),o=a.indexOf("\n"+i);if(o>=0){var l=a.indexOf("\n",o+1);a=a.substring(l+1)}this.stack=a}}},_.inherits(T.AssertionError,Error),T.fail=c,T.ok=f,T.equal=function e(t,n,r){t!=n&&c(t,n,r,"==",T.equal)},T.notEqual=function e(t,n,r){t==n&&c(t,n,r,"!=",T.notEqual)},T.deepEqual=function e(t,n,r){h(t,n,!1)||c(t,n,r,"deepEqual",T.deepEqual)},T.deepStrictEqual=function e(t,n,r){h(t,n,!0)||c(t,n,r,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function e(t,n,r){h(t,n,!1)&&c(t,n,r,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=g,T.strictEqual=function e(t,n,r){t!==n&&c(t,n,r,"===",T.strictEqual)},T.notStrictEqual=function e(t,n,r){t===n&&c(t,n,r,"!==",T.notStrictEqual)},T.throws=function(e,t,n){b(!0,e,t,n)},T.doesNotThrow=function(e,t,n){b(!1,e,t,n)},T.ifError=function(e){if(e)throw e};var j=Object.keys||function(e){var t=[];for(var n in e)w.call(e,n)&&t.push(n);return t}}).call(t,n(2))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){if(s||(s=!0,console&&console.log&&console.log("WARNING: dicomParser.readEncapsulatedPixelData() has been deprecated")),void 0===e)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'dataSet'";if(void 0===t)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'element'";if(void 0===n)throw"dicomParser.readEncapsulatedPixelData: missing required parameter 'frame'";if("x7fe00010"!==t.tag)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to non pixel data tag (expected tag = x7fe00010)";if(!0!==t.encapsulatedPixelData)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(!0!==t.hadUndefinedLength)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.basicOffsetTable)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(void 0===t.fragments)throw"dicomParser.readEncapsulatedPixelData: parameter 'element' refers to pixel data element that does not have encapsulated pixel data";if(n<0)throw"dicomParser.readEncapsulatedPixelData: parameter 'frame' must be >= 0";return 0!==t.basicOffsetTable.length?(0,i.default)(e,t,n):(0,o.default)(e,t,0,t.fragments.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=r(n(42)),o=r(n(22)),s=!1}])})}}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:cornerstone/main.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["ohif:cornerstone"]=g,{cornerstone:void 0,cornerstoneMath:void 0,cornerstoneTools:void 0,cornerstoneWADOImageLoader:void 0,dicomParser:void 0})}();

!function(){var e=Package.meteor.Meteor,r=Package.meteor.global,a=Package.meteor.meteorEnv,n=Package.underscore._,c,t;(function(){var e=function(e){return encodeURIComponent(e).replace(/\*/g,"%2A")};(c={})._encodeParams=function(r,a){var n=[],c=Array.isArray(r);for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var o=a?a+"["+(c?"":t)+"]":t,i=r[t];if("object"==typeof i)n.push(this._encodeParams(i,o));else{var l=e(o).replace("%5B","[").replace("%5D","]");n.push(l+"="+e(i))}}return n.join("&").replace(/%20/g,"+")},t=function(e,r,a,n){var t=e,o=r?r.slice(1):null;if("string"==typeof a&&(o=String(a)),n){o=o||"";var i=c._encodeParams(n);o&&i&&(o+="&"),o+=i}var l=t;return null!==o&&(l+="?"+o),l}}).call(this),function(){c._constructUrl=function(e,r,a){var n=/^(.*?)(\?.*)?$/.exec(e);return t(n[1],n[2],r,a)}}.call(this),"undefined"==typeof Package&&(Package={}),function(e,r){for(var a in r)a in e||(e[a]=r[a])}(Package.url={},{URL:c})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a=Package.underscore._,r=Package.url.URL,o=Package.modules.meteorInstall,c=Package["babel-runtime"].meteorBabelHelpers,i=Package.promise.Promise,s=Package["ecmascript-runtime-client"].Symbol,l=Package["ecmascript-runtime-client"].Map,p=Package["ecmascript-runtime-client"].Set,u,f,d,m=o({node_modules:{meteor:{http:{"httpcall_common.js":function(){function e(e,t){return e.length>t?e.slice(0,t)+"...":e}var t=500;u=function(t,n){var a="failed ["+t+"]";return n&&(a+=" "+e(("string"==typeof n?n:n.toString()).replace(/\n/g," "),500)),new Error(a)},f=function(e){var t=(e.headers["content-type"]||";").split(";")[0];if(a.include(["application/json","text/javascript","application/javascript","application/x-javascript"],t))try{e.data=JSON.parse(e.content)}catch(t){e.data=null}else e.data=null},(d={}).get=function(){return d.call.apply(this,["GET"].concat(a.toArray(arguments)))},d.post=function(){return d.call.apply(this,["POST"].concat(a.toArray(arguments)))},d.put=function(){return d.call.apply(this,["PUT"].concat(a.toArray(arguments)))},d.del=function(){return d.call.apply(this,["DELETE"].concat(a.toArray(arguments)))},d.patch=function(){return d.call.apply(this,["PATCH"].concat(a.toArray(arguments)))}},"httpcall_client.js":function(t,n,o){d.call=function(t,n,o,i){if(i||"function"!=typeof o||(i=o,o=null),o=o||{},"function"!=typeof i)throw new Error("Can't make a blocking HTTP call from the client; callback required.");t=(t||"").toUpperCase();var s={},l=o.content;o.data&&(l=JSON.stringify(o.data),s["Content-Type"]="application/json");var p,d;if(l||"GET"===t||"HEAD"===t?p=o.params:d=o.params,n=r._constructUrl(n,o.query,p),!1===o.followRedirects)throw new Error("Option followRedirects:false not supported on client.");if(a.has(o,"npmRequestOptions"))throw new Error("Option npmRequestOptions not supported on client.");var m,h;if(o.auth){var g=o.auth.indexOf(":");if(g<0)throw new Error('auth option should be of the form "username:password"');m=o.auth.substring(0,g),h=o.auth.substring(g+1)}d&&(l=r._encodeParams(d)),a.extend(s,o.headers||{}),i=function(e){return function(t,n){t&&n&&(t.response=n),e(t,n)}}(i),i=a.once(i);try{var y;if("undefined"!=typeof XMLHttpRequest)y=new XMLHttpRequest;else{if("undefined"==typeof ActiveXObject)throw new Error("Can't create XMLHttpRequest");y=new ActiveXObject("Microsoft.XMLHttp")}y.open(t,n,!0,m,h);for(var v in c.sanitizeForInObject(s))y.setRequestHeader(v,s[v]);var P=!1,w;if(o.timeout&&(w=e.setTimeout(function(){P=!0,y.abort()},o.timeout)),y.onreadystatechange=function(t){if(4===y.readyState)if(w&&e.clearTimeout(w),P)i(new Error("timeout"));else if(y.status){var n={};n.statusCode=y.status,n.content=y.responseText,n.headers={};var r=y.getAllResponseHeaders();""===r&&y.getResponseHeader("content-type")&&(r="content-type: "+y.getResponseHeader("content-type"));var o=r.split(/\r?\n/);a.each(o,function(e){var t=/^(.*?):(?:\s+)(.*)$/.exec(e);t&&3===t.length&&(n.headers[t[1].toLowerCase()]=t[2])}),f(n);var c=null;n.statusCode>=400&&(c=u(n.statusCode,n.content)),i(c,n)}else i(new Error("network"))},o.beforeSend&&!1===a.once(o.beforeSend).call(null,y,o))return y.abort();y.send(l)}catch(e){i(e)}}},"deprecated.js":function(){e.http=d}}}}},{extensions:[".js",".json"]});m("./node_modules/meteor/http/httpcall_common.js"),m("./node_modules/meteor/http/httpcall_client.js"),m("./node_modules/meteor/http/deprecated.js"),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package.http={},{HTTP:d})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,s;(function(){!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return ws.apply(null,arguments)}function t(e){ws=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function s(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t;for(t in e)return!1;return!0}function r(e){return void 0===e}function a(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function o(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function u(e,t){var n=[],s;for(s=0;s<e.length;++s)n.push(t(e[s],s));return n}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)l(t,n)&&(e[n]=t[n]);return l(t,"toString")&&(e.toString=t.toString),l(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t,n,s){return pt(e,t,n,s,!0).utc()}function c(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function f(e){return null==e._pf&&(e._pf=c()),e._pf}function m(e){if(null==e._isValid){var t=f(e),n=Ms.call(t.parsedDateParts,function(e){return null!=e}),s=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(s=s&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return s;e._isValid=s}return e._isValid}function _(e){var t=h(NaN);return null!=e?d(f(t),e):f(t).userInvalidated=!0,t}function y(e,t){var n,s,i;if(r(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),r(t._i)||(e._i=t._i),r(t._f)||(e._f=t._f),r(t._l)||(e._l=t._l),r(t._strict)||(e._strict=t._strict),r(t._tzm)||(e._tzm=t._tzm),r(t._isUTC)||(e._isUTC=t._isUTC),r(t._offset)||(e._offset=t._offset),r(t._pf)||(e._pf=f(t)),r(t._locale)||(e._locale=t._locale),ks.length>0)for(n=0;n<ks.length;n++)r(i=t[s=ks[n]])||(e[s]=i);return e}function g(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Ss&&(Ss=!0,e.updateOffset(this),Ss=!1)}function p(e){return e instanceof g||null!=e&&null!=e._isAMomentObject}function w(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function v(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=w(t)),n}function M(e,t,n){var s=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),r=0,a;for(a=0;a<s;a++)(n&&e[a]!==t[a]||!n&&v(e[a])!==v(t[a]))&&r++;return r+i}function k(t){!1===e.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function S(t,n){var s=!0;return d(function(){if(null!=e.deprecationHandler&&e.deprecationHandler(null,t),s){for(var i=[],r,a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){r+="\n["+a+"] ";for(var o in arguments[0])r+=o+": "+arguments[0][o]+", ";r=r.slice(0,-2)}else r=arguments[a];i.push(r)}k(t+"\nArguments: "+Array.prototype.slice.call(i).join("")+"\n"+(new Error).stack),s=!1}return n.apply(this,arguments)},n)}function D(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),Ds[t]||(k(n),Ds[t]=!0)}function Y(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e){var t,n;for(n in e)Y(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function x(e,t){var n=d({},e),i;for(i in t)l(t,i)&&(s(e[i])&&s(t[i])?(n[i]={},d(n[i],e[i]),d(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)l(e,i)&&!l(t,i)&&s(e[i])&&(n[i]=d({},n[i]));return n}function T(e){null!=e&&this.set(e)}function P(e,t,n){var s=this._calendar[e]||this._calendar.sameElse;return Y(s)?s.call(t,n):s}function b(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function W(){return this._invalidDate}function R(e){return this._ordinal.replace("%d",e)}function C(e,t,n,s){var i=this._relativeTime[n];return Y(i)?i(e,t,n,s):i.replace(/%d/i,e)}function F(e,t){var n=this._relativeTime[e>0?"future":"past"];return Y(n)?n(t):n.replace(/%s/i,t)}function U(e,t){var n=e.toLowerCase();Cs[n]=Cs[n+"s"]=Cs[t]=e}function H(e){return"string"==typeof e?Cs[e]||Cs[e.toLowerCase()]:void 0}function L(e){var t={},n,s;for(s in e)l(e,s)&&(n=H(s))&&(t[n]=e[s]);return t}function G(e,t){Fs[e]=t}function V(e){var t=[];for(var n in e)t.push({unit:n,priority:Fs[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}function N(t,n){return function(s){return null!=s?(E(this,t,s),e.updateOffset(this,n),this):j(this,t)}}function j(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function E(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function A(e){return e=H(e),Y(this[e])?this[e]():this}function I(e,t){if("object"==typeof e)for(var n=V(e=L(e)),s=0;s<n.length;s++)this[n[s].unit](e[n[s].unit]);else if(e=H(e),Y(this[e]))return this[e](t);return this}function Z(e,t,n){var s=""+Math.abs(e),i=t-s.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+s}function z(e,t,n,s){var i=s;"string"==typeof s&&(i=function(){return this[s]()}),e&&(Gs[e]=i),t&&(Gs[t[0]]=function(){return Z(i.apply(this,arguments),t[1],t[2])}),n&&(Gs[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function q(e){var t=e.match(Us),n,s;for(n=0,s=t.length;n<s;n++)Gs[t[n]]?t[n]=Gs[t[n]]:t[n]=$(t[n]);return function(n){var i="",r;for(r=0;r<s;r++)i+=Y(t[r])?t[r].call(n,e):t[r];return i}}function J(e,t){return e.isValid()?(t=B(t,e.localeData()),Ls[t]=Ls[t]||q(t),Ls[t](e)):e.localeData().invalidDate()}function B(e,t){function n(e){return t.longDateFormat(e)||e}var s=5;for(Hs.lastIndex=0;s>=0&&Hs.test(e);)e=e.replace(Hs,n),Hs.lastIndex=0,s-=1;return e}function Q(e,t,n){ni[e]=Y(t)?t:function(e,s){return e&&n?n:t}}function X(e,t){return l(ni,e)?ni[e](t._strict,t._locale):new RegExp(K(e))}function K(e){return ee(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,s,i){return t||n||s||i}))}function ee(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function te(e,t){var n,s=t;for("string"==typeof e&&(e=[e]),a(t)&&(s=function(e,n){n[t]=v(e)}),n=0;n<e.length;n++)si[e[n]]=s}function ne(e,t){te(e,function(e,n,s,i){s._w=s._w||{},t(e,s._w,s,i)})}function se(e,t,n){null!=t&&l(si,e)&&si[e](t,n._a,n,e)}function ie(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function re(e,t){return e?n(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||_i).test(t)?"format":"standalone"][e.month()]:n(this._months)?this._months:this._months.standalone}function ae(e,t){return e?n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[_i.test(t)?"format":"standalone"][e.month()]:n(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function oe(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],s=0;s<12;++s)r=h([2e3,s]),this._shortMonthsParse[s]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[s]=this.months(r,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=mi.call(this._shortMonthsParse,a))?i:null:-1!==(i=mi.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=mi.call(this._shortMonthsParse,a))?i:-1!==(i=mi.call(this._longMonthsParse,a))?i:null:-1!==(i=mi.call(this._longMonthsParse,a))?i:-1!==(i=mi.call(this._shortMonthsParse,a))?i:null}function ue(e,t,n){var s,i,r;if(this._monthsParseExact)return oe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),s=0;s<12;s++){if(i=h([2e3,s]),n&&!this._longMonthsParse[s]&&(this._longMonthsParse[s]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[s]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[s]||(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[s]=new RegExp(r.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[s].test(e))return s;if(n&&"MMM"===t&&this._shortMonthsParse[s].test(e))return s;if(!n&&this._monthsParse[s].test(e))return s}}function le(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=v(t);else if(t=e.localeData().monthsParse(t),!a(t))return e;return n=Math.min(e.date(),ie(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function de(t){return null!=t?(le(this,t),e.updateOffset(this,!0),this):j(this,"Month")}function he(){return ie(this.year(),this.month())}function ce(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=pi),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function fe(e){return this._monthsParseExact?(l(this,"_monthsRegex")||me.call(this),e?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=wi),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function me(){function e(e,t){return t.length-e.length}var t=[],n=[],s=[],i,r;for(i=0;i<12;i++)r=h([2e3,i]),t.push(this.monthsShort(r,"")),n.push(this.months(r,"")),s.push(this.months(r,"")),s.push(this.monthsShort(r,""));for(t.sort(e),n.sort(e),s.sort(e),i=0;i<12;i++)t[i]=ee(t[i]),n[i]=ee(n[i]);for(i=0;i<24;i++)s[i]=ee(s[i]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}function _e(e){return ye(e)?366:365}function ye(e){return e%4==0&&e%100!=0||e%400==0}function ge(){return ye(this.year())}function pe(e,t,n,s,i,r,a){var o=new Date(e,t,n,s,i,r,a);return e<100&&e>=0&&isFinite(o.getFullYear())&&o.setFullYear(e),o}function we(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ve(e,t,n){var s=7+t-n;return-((7+we(e,0,s).getUTCDay()-t)%7)+s-1}function Me(e,t,n,s,i){var r=1+7*(t-1)+(7+n-s)%7+ve(e,s,i),a,o;return r<=0?o=_e(a=e-1)+r:r>_e(e)?(a=e+1,o=r-_e(e)):(a=e,o=r),{year:a,dayOfYear:o}}function ke(e,t,n){var s=ve(e.year(),t,n),i=Math.floor((e.dayOfYear()-s-1)/7)+1,r,a;return i<1?r=i+Se(a=e.year()-1,t,n):i>Se(e.year(),t,n)?(r=i-Se(e.year(),t,n),a=e.year()+1):(a=e.year(),r=i),{week:r,year:a}}function Se(e,t,n){var s=ve(e,t,n),i=ve(e+1,t,n);return(_e(e)-s+i)/7}function De(e){return ke(e,this._week.dow,this._week.doy).week}function Ye(){return this._week.dow}function Oe(){return this._week.doy}function xe(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Te(e){var t=ke(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function Pe(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function be(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function We(e,t){return e?n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:n(this._weekdays)?this._weekdays:this._weekdays.standalone}function Re(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort}function Ce(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Fe(e,t,n){var s,i,r,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],s=0;s<7;++s)r=h([2e3,1]).day(s),this._minWeekdaysParse[s]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[s]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[s]=this.weekdays(r,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=mi.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=mi.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=mi.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=mi.call(this._weekdaysParse,a))?i:-1!==(i=mi.call(this._shortWeekdaysParse,a))?i:-1!==(i=mi.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=mi.call(this._shortWeekdaysParse,a))?i:-1!==(i=mi.call(this._weekdaysParse,a))?i:-1!==(i=mi.call(this._minWeekdaysParse,a))?i:null:-1!==(i=mi.call(this._minWeekdaysParse,a))?i:-1!==(i=mi.call(this._weekdaysParse,a))?i:-1!==(i=mi.call(this._shortWeekdaysParse,a))?i:null}function Ue(e,t,n){var s,i,r;if(this._weekdaysParseExact)return Fe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),s=0;s<7;s++){if(i=h([2e3,1]).day(s),n&&!this._fullWeekdaysParse[s]&&(this._fullWeekdaysParse[s]=new RegExp("^"+this.weekdays(i,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[s]=new RegExp("^"+this.weekdaysShort(i,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[s]=new RegExp("^"+this.weekdaysMin(i,"").replace(".",".?")+"$","i")),this._weekdaysParse[s]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[s]=new RegExp(r.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[s].test(e))return s;if(n&&"ddd"===t&&this._shortWeekdaysParse[s].test(e))return s;if(n&&"dd"===t&&this._minWeekdaysParse[s].test(e))return s;if(!n&&this._weekdaysParse[s].test(e))return s}}function He(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=Pe(e,this.localeData()),this.add(e-t,"d")):t}function Le(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Ge(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=be(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Ve(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ee.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Yi),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function Ne(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ee.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Oi),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function je(e){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Ee.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=xi),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Ee(){function e(e,t){return t.length-e.length}var t=[],n=[],s=[],i=[],r,a,o,u,l;for(r=0;r<7;r++)a=h([2e3,1]).day(r),o=this.weekdaysMin(a,""),u=this.weekdaysShort(a,""),l=this.weekdays(a,""),t.push(o),n.push(u),s.push(l),i.push(o),i.push(u),i.push(l);for(t.sort(e),n.sort(e),s.sort(e),i.sort(e),r=0;r<7;r++)n[r]=ee(n[r]),s[r]=ee(s[r]),i[r]=ee(i[r]);this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function Ae(){return this.hours()%12||12}function Ie(){return this.hours()||24}function Ze(e,t){z(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function ze(e,t){return t._meridiemParse}function $e(e){return"p"===(e+"").toLowerCase().charAt(0)}function qe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Je(e){return e?e.toLowerCase().replace("_","-"):e}function Be(e){for(var t=0,n,s,i,r;t<e.length;){for(n=(r=Je(e[t]).split("-")).length,s=(s=Je(e[t+1]))?s.split("-"):null;n>0;){if(i=Qe(r.slice(0,n).join("-")))return i;if(s&&s.length>=n&&M(r,s,!0)>=n-1)break;n--}t++}return null}function Qe(e){var t=null;if(!Wi[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=Ci._abbr,require("./locale/"+e),Xe(t)}catch(e){}return Wi[e]}function Xe(e,t){var n;return e&&(n=r(t)?tt(e):Ke(e,t))&&(Ci=n),Ci._abbr}function Ke(e,t){if(null!==t){var n=bi;if(t.abbr=e,null!=Wi[e])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Wi[e]._config;else if(null!=t.parentLocale){if(null==Wi[t.parentLocale])return Ri[t.parentLocale]||(Ri[t.parentLocale]=[]),Ri[t.parentLocale].push({name:e,config:t}),null;n=Wi[t.parentLocale]._config}return Wi[e]=new T(x(n,t)),Ri[e]&&Ri[e].forEach(function(e){Ke(e.name,e.config)}),Xe(e),Wi[e]}return delete Wi[e],null}function et(e,t){if(null!=t){var n,s=bi;null!=Wi[e]&&(s=Wi[e]._config),(n=new T(t=x(s,t))).parentLocale=Wi[e],Wi[e]=n,Xe(e)}else null!=Wi[e]&&(null!=Wi[e].parentLocale?Wi[e]=Wi[e].parentLocale:null!=Wi[e]&&delete Wi[e]);return Wi[e]}function tt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Ci;if(!n(e)){if(t=Qe(e))return t;e=[e]}return Be(e)}function nt(){return Os(Wi)}function st(e){var t,n=e._a;return n&&-2===f(e).overflow&&(t=n[ri]<0||n[ri]>11?ri:n[ai]<1||n[ai]>ie(n[ii],n[ri])?ai:n[oi]<0||n[oi]>24||24===n[oi]&&(0!==n[ui]||0!==n[li]||0!==n[di])?oi:n[ui]<0||n[ui]>59?ui:n[li]<0||n[li]>59?li:n[di]<0||n[di]>999?di:-1,f(e)._overflowDayOfYear&&(t<ii||t>ai)&&(t=ai),f(e)._overflowWeeks&&-1===t&&(t=hi),f(e)._overflowWeekday&&-1===t&&(t=ci),f(e).overflow=t),e}function it(e){var t,n,s=e._i,i=Fi.exec(s)||Ui.exec(s),r,a,o,u;if(i){for(f(e).iso=!0,t=0,n=Li.length;t<n;t++)if(Li[t][1].exec(i[1])){a=Li[t][0],r=!1!==Li[t][2];break}if(null==a)return void(e._isValid=!1);if(i[3]){for(t=0,n=Gi.length;t<n;t++)if(Gi[t][1].exec(i[3])){o=(i[2]||" ")+Gi[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(i[4]){if(!Hi.exec(i[4]))return void(e._isValid=!1);u="Z"}e._f=a+(o||"")+(u||""),ht(e)}else e._isValid=!1}function rt(e){var t,n,s,i,r,a,o={" GMT":" +0000"," EDT":" -0400"," EST":" -0500"," CDT":" -0500"," CST":" -0600"," MDT":" -0600"," MST":" -0700"," PDT":" -0700"," PST":" -0800"},u="YXWVUTSRQPONZABCDEFGHIKLM",l,d;if(t=e._i.replace(/\([^\)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s|\s$/g,""),n=Ni.exec(t)){if(s=n[1]?"ddd"+(5===n[1].length?", ":" "):"",i="D MMM "+(n[2].length>10?"YYYY ":"YY "),r="HH:mm"+(n[4]?":ss":""),n[1]){var h=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(n[2]).getDay()];if(n[1].substr(0,3)!==h)return f(e).weekdayMismatch=!0,void(e._isValid=!1)}switch(n[5].length){case 2:l=0===d?" +0000":((d=u.indexOf(n[5][1].toUpperCase())-12)<0?" -":" +")+(""+d).replace(/^-?/,"0").match(/..$/)[0]+"00";break;case 4:l=o[n[5]];break;default:l=o[" GMT"]}n[5]=l,e._i=n.splice(1).join(""),a=" ZZ",e._f=s+i+r+a,ht(e),f(e).rfc2822=!0}else e._isValid=!1}function at(t){var n=Vi.exec(t._i);null===n?(it(t),!1===t._isValid&&(delete t._isValid,rt(t),!1===t._isValid&&(delete t._isValid,e.createFromInputFallback(t)))):t._d=new Date(+n[1])}function ot(e,t,n){return null!=e?e:null!=t?t:n}function ut(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function lt(e){var t,n,s=[],i,r;if(!e._d){for(i=ut(e),e._w&&null==e._a[ai]&&null==e._a[ri]&&dt(e),null!=e._dayOfYear&&(r=ot(e._a[ii],i[ii]),(e._dayOfYear>_e(r)||0===e._dayOfYear)&&(f(e)._overflowDayOfYear=!0),n=we(r,0,e._dayOfYear),e._a[ri]=n.getUTCMonth(),e._a[ai]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[oi]&&0===e._a[ui]&&0===e._a[li]&&0===e._a[di]&&(e._nextDay=!0,e._a[oi]=0),e._d=(e._useUTC?we:pe).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[oi]=24)}}function dt(e){var t,n,s,i,r,a,o,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)r=1,a=4,n=ot(t.GG,e._a[ii],ke(wt(),1,4).year),s=ot(t.W,1),((i=ot(t.E,1))<1||i>7)&&(u=!0);else{r=e._locale._week.dow,a=e._locale._week.doy;var l=ke(wt(),r,a);n=ot(t.gg,e._a[ii],l.year),s=ot(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+r,(t.e<0||t.e>6)&&(u=!0)):i=r}s<1||s>Se(n,r,a)?f(e)._overflowWeeks=!0:null!=u?f(e)._overflowWeekday=!0:(o=Me(n,s,i,r,a),e._a[ii]=o.year,e._dayOfYear=o.dayOfYear)}function ht(t){if(t._f!==e.ISO_8601)if(t._f!==e.RFC_2822){t._a=[],f(t).empty=!0;var n=""+t._i,s,i,r,a,o,u=n.length,l=0;for(r=B(t._f,t._locale).match(Us)||[],s=0;s<r.length;s++)a=r[s],(i=(n.match(X(a,t))||[])[0])&&((o=n.substr(0,n.indexOf(i))).length>0&&f(t).unusedInput.push(o),n=n.slice(n.indexOf(i)+i.length),l+=i.length),Gs[a]?(i?f(t).empty=!1:f(t).unusedTokens.push(a),se(a,i,t)):t._strict&&!i&&f(t).unusedTokens.push(a);f(t).charsLeftOver=u-l,n.length>0&&f(t).unusedInput.push(n),t._a[oi]<=12&&!0===f(t).bigHour&&t._a[oi]>0&&(f(t).bigHour=void 0),f(t).parsedDateParts=t._a.slice(0),f(t).meridiem=t._meridiem,t._a[oi]=ct(t._locale,t._a[oi],t._meridiem),lt(t),st(t)}else rt(t);else it(t)}function ct(e,t,n){var s;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((s=e.isPM(n))&&t<12&&(t+=12),s||12!==t||(t=0),t):t}function ft(e){var t,n,s,i,r;if(0===e._f.length)return f(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)r=0,t=y({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],ht(t),m(t)&&(r+=f(t).charsLeftOver,r+=10*f(t).unusedTokens.length,f(t).score=r,(null==s||r<s)&&(s=r,n=t));d(e,n||t)}function mt(e){if(!e._d){var t=L(e._i);e._a=u([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),lt(e)}}function _t(e){var t=new g(st(yt(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function yt(e){var t=e._i,s=e._f;return e._locale=e._locale||tt(e._l),null===t||void 0===s&&""===t?_({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),p(t)?new g(st(t)):(o(t)?e._d=t:n(s)?ft(e):s?ht(e):gt(e),m(e)||(e._d=null),e))}function gt(t){var i=t._i;r(i)?t._d=new Date(e.now()):o(i)?t._d=new Date(i.valueOf()):"string"==typeof i?at(t):n(i)?(t._a=u(i.slice(0),function(e){return parseInt(e,10)}),lt(t)):s(i)?mt(t):a(i)?t._d=new Date(i):e.createFromInputFallback(t)}function pt(e,t,r,a,o){var u={};return!0!==r&&!1!==r||(a=r,r=void 0),(s(e)&&i(e)||n(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=o,u._l=r,u._i=e,u._f=t,u._strict=a,_t(u)}function wt(e,t,n,s){return pt(e,t,n,s,!1)}function vt(e,t){var s,i;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return wt();for(s=t[0],i=1;i<t.length;++i)t[i].isValid()&&!t[i][e](s)||(s=t[i]);return s}function Mt(){return vt("isBefore",[].slice.call(arguments,0))}function kt(){return vt("isAfter",[].slice.call(arguments,0))}function St(e){for(var t in e)if(-1===Ii.indexOf(t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,s=0;s<Ii.length;++s)if(e[Ii[s]]){if(n)return!1;parseFloat(e[Ii[s]])!==v(e[Ii[s]])&&(n=!0)}return!0}function Dt(){return this._isValid}function Yt(){return It(NaN)}function Ot(e){var t=L(e),n=t.year||0,s=t.quarter||0,i=t.month||0,r=t.week||0,a=t.day||0,o=t.hour||0,u=t.minute||0,l=t.second||0,d=t.millisecond||0;this._isValid=St(t),this._milliseconds=+d+1e3*l+6e4*u+1e3*o*60*60,this._days=+a+7*r,this._months=+i+3*s+12*n,this._data={},this._locale=tt(),this._bubble()}function xt(e){return e instanceof Ot}function Tt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Pt(e,t){z(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+Z(~~(e/60),2)+t+Z(~~e%60,2)})}function bt(e,t){var n=(t||"").match(e);if(null===n)return null;var s=((n[n.length-1]||[])+"").match(Zi)||["-",0,0],i=60*s[1]+v(s[2]);return 0===i?0:"+"===s[0]?i:-i}function Wt(t,n){var s,i;return n._isUTC?(s=n.clone(),i=(p(t)||o(t)?t.valueOf():wt(t).valueOf())-s.valueOf(),s._d.setTime(s._d.valueOf()+i),e.updateOffset(s,!1),s):wt(t).local()}function Rt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ct(t,n,s){var i=this._offset||0,r;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=bt(Ks,t)))return this}else Math.abs(t)<16&&!s&&(t*=60);return!this._isUTC&&n&&(r=Rt(this)),this._offset=t,this._isUTC=!0,null!=r&&this.add(r,"m"),i!==t&&(!n||this._changeInProgress?Jt(this,It(t-i,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?i:Rt(this)}function Ft(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function Ut(e){return this.utcOffset(0,e)}function Ht(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Rt(this),"m")),this}function Lt(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=bt(Xs,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function Gt(e){return!!this.isValid()&&(e=e?wt(e).utcOffset():0,(this.utcOffset()-e)%60==0)}function Vt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Nt(){if(!r(this._isDSTShifted))return this._isDSTShifted;var e={};if(y(e,this),(e=yt(e))._a){var t=e._isUTC?h(e._a):wt(e._a);this._isDSTShifted=this.isValid()&&M(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function jt(){return!!this.isValid()&&!this._isUTC}function Et(){return!!this.isValid()&&this._isUTC}function At(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function It(e,t){var n=e,s=null,i,r,o;return xt(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:a(e)?(n={},t?n[t]=e:n.milliseconds=e):(s=zi.exec(e))?(i="-"===s[1]?-1:1,n={y:0,d:v(s[ai])*i,h:v(s[oi])*i,m:v(s[ui])*i,s:v(s[li])*i,ms:v(Tt(1e3*s[di]))*i}):(s=$i.exec(e))?(i="-"===s[1]?-1:1,n={y:Zt(s[2],i),M:Zt(s[3],i),w:Zt(s[4],i),d:Zt(s[5],i),h:Zt(s[6],i),m:Zt(s[7],i),s:Zt(s[8],i)}):null==n?n={}:"object"==typeof n&&("from"in n||"to"in n)&&(o=$t(wt(n.from),wt(n.to)),(n={}).ms=o.milliseconds,n.M=o.months),r=new Ot(n),xt(e)&&l(e,"_locale")&&(r._locale=e._locale),r}function Zt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function zt(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function $t(e,t){var n;return e.isValid()&&t.isValid()?(t=Wt(t,e),e.isBefore(t)?n=zt(e,t):((n=zt(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function qt(e,t){return function(n,s){var i,r;return null===s||isNaN(+s)||(D(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=n,n=s,s=r),n="string"==typeof n?+n:n,i=It(n,s),Jt(this,i,e),this}}function Jt(t,n,s,i){var r=n._milliseconds,a=Tt(n._days),o=Tt(n._months);t.isValid()&&(i=null==i||i,r&&t._d.setTime(t._d.valueOf()+r*s),a&&E(t,"Date",j(t,"Date")+a*s),o&&le(t,j(t,"Month")+o*s),i&&e.updateOffset(t,a||o))}function Bt(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function Qt(t,n){var s=t||wt(),i=Wt(s,this).startOf("day"),r=e.calendarFormat(this,i)||"sameElse",a=n&&(Y(n[r])?n[r].call(this,s):n[r]);return this.format(a||this.localeData().calendar(r,this,wt(s)))}function Xt(){return new g(this)}function Kt(e,t){var n=p(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(r(t)?"millisecond":t))?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function en(e,t){var n=p(e)?e:wt(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(r(t)?"millisecond":t))?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function tn(e,t,n,s){return("("===(s=s||"()")[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===s[1]?this.isBefore(t,n):!this.isAfter(t,n))}function nn(e,t){var n=p(e)?e:wt(e),s;return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=H(t||"millisecond"))?this.valueOf()===n.valueOf():(s=n.valueOf(),this.clone().startOf(t).valueOf()<=s&&s<=this.clone().endOf(t).valueOf()))}function sn(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function rn(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function an(e,t,n){var s,i,r,a;return this.isValid()&&(s=Wt(e,this)).isValid()?(i=6e4*(s.utcOffset()-this.utcOffset()),"year"===(t=H(t))||"month"===t||"quarter"===t?(a=on(this,s),"quarter"===t?a/=3:"year"===t&&(a/=12)):(r=this-s,a="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-i)/864e5:"week"===t?(r-i)/6048e5:r),n?a:w(a)):NaN}function on(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(n,"months"),i,r;return r=t-s<0?(t-s)/(s-(i=e.clone().add(n-1,"months"))):(t-s)/((i=e.clone().add(n+1,"months"))-s),-(n+r)||0}function un(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ln(){if(!this.isValid())return null;var e=this.clone().utc();return e.year()<0||e.year()>9999?J(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Y(Date.prototype.toISOString)?this.toDate().toISOString():J(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function dn(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',s=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",r=t+'[")]';return this.format(n+s+i+r)}function hn(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=J(this,t);return this.localeData().postformat(n)}function cn(e,t){return this.isValid()&&(p(e)&&e.isValid()||wt(e).isValid())?It({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function fn(e){return this.from(wt(),e)}function mn(e,t){return this.isValid()&&(p(e)&&e.isValid()||wt(e).isValid())?It({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function _n(e){return this.to(wt(),e)}function yn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=tt(e))&&(this._locale=t),this)}function gn(){return this._locale}function pn(e){switch(e=H(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function wn(e){return void 0===(e=H(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function vn(){return this._d.valueOf()-6e4*(this._offset||0)}function Mn(){return Math.floor(this.valueOf()/1e3)}function kn(){return new Date(this.valueOf())}function Sn(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Dn(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Yn(){return this.isValid()?this.toISOString():null}function On(){return m(this)}function xn(){return d({},f(this))}function Tn(){return f(this).overflow}function Pn(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function bn(e,t){z(0,[e,e.length],0,t)}function Wn(e){return Un.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Rn(e){return Un.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Cn(){return Se(this.year(),1,4)}function Fn(){var e=this.localeData()._week;return Se(this.year(),e.dow,e.doy)}function Un(e,t,n,s,i){var r;return null==e?ke(this,s,i).year:(r=Se(e,s,i),t>r&&(t=r),Hn.call(this,e,t,n,s,i))}function Hn(e,t,n,s,i){var r=Me(e,t,n,s,i),a=we(r.year,0,r.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Ln(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Gn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function Vn(e,t){t[di]=v(1e3*("0."+e))}function Nn(){return this._isUTC?"UTC":""}function jn(){return this._isUTC?"Coordinated Universal Time":""}function En(e){return wt(1e3*e)}function An(){return wt.apply(null,arguments).parseZone()}function In(e){return e}function Zn(e,t,n,s){var i=tt(),r=h().set(s,t);return i[n](r,e)}function zn(e,t,n){if(a(e)&&(t=e,e=void 0),e=e||"",null!=t)return Zn(e,t,n,"month");var s,i=[];for(s=0;s<12;s++)i[s]=Zn(e,s,n,"month");return i}function $n(e,t,n,s){"boolean"==typeof e?(a(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,a(t)&&(n=t,t=void 0),t=t||"");var i=tt(),r=e?i._week.dow:0;if(null!=n)return Zn(t,(n+r)%7,s,"day");var o,u=[];for(o=0;o<7;o++)u[o]=Zn(t,(o+r)%7,s,"day");return u}function qn(e,t){return zn(e,t,"months")}function Jn(e,t){return zn(e,t,"monthsShort")}function Bn(e,t,n){return $n(e,t,n,"weekdays")}function Qn(e,t,n){return $n(e,t,n,"weekdaysShort")}function Xn(e,t,n){return $n(e,t,n,"weekdaysMin")}function Kn(){var e=this._data;return this._milliseconds=ir(this._milliseconds),this._days=ir(this._days),this._months=ir(this._months),e.milliseconds=ir(e.milliseconds),e.seconds=ir(e.seconds),e.minutes=ir(e.minutes),e.hours=ir(e.hours),e.months=ir(e.months),e.years=ir(e.years),this}function es(e,t,n,s){var i=It(t,n);return e._milliseconds+=s*i._milliseconds,e._days+=s*i._days,e._months+=s*i._months,e._bubble()}function ts(e,t){return es(this,e,t,1)}function ns(e,t){return es(this,e,t,-1)}function ss(e){return e<0?Math.floor(e):Math.ceil(e)}function is(){var e=this._milliseconds,t=this._days,n=this._months,s=this._data,i,r,a,o,u;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=864e5*ss(as(n)+t),t=0,n=0),s.milliseconds=e%1e3,i=w(e/1e3),s.seconds=i%60,r=w(i/60),s.minutes=r%60,a=w(r/60),s.hours=a%24,t+=w(a/24),u=w(rs(t)),n+=u,t-=ss(as(u)),o=w(n/12),n%=12,s.days=t,s.months=n,s.years=o,this}function rs(e){return 4800*e/146097}function as(e){return 146097*e/4800}function os(e){if(!this.isValid())return NaN;var t,n,s=this._milliseconds;if("month"===(e=H(e))||"year"===e)return t=this._days+s/864e5,n=this._months+rs(t),"month"===e?n:n/12;switch(t=this._days+Math.round(as(this._months)),e){case"week":return t/7+s/6048e5;case"day":return t+s/864e5;case"hour":return 24*t+s/36e5;case"minute":return 1440*t+s/6e4;case"second":return 86400*t+s/1e3;case"millisecond":return Math.floor(864e5*t)+s;default:throw new Error("Unknown unit "+e)}}function us(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12):NaN}function ls(e){return function(){return this.as(e)}}function ds(e){return e=H(e),this.isValid()?this[e+"s"]():NaN}function hs(e){return function(){return this.isValid()?this._data[e]:NaN}}function cs(){return w(this.days()/7)}function fs(e,t,n,s,i){return i.relativeTime(t||1,!!n,e,s)}function ms(e,t,n){var s=It(e).abs(),i=vr(s.as("s")),r=vr(s.as("m")),a=vr(s.as("h")),o=vr(s.as("d")),u=vr(s.as("M")),l=vr(s.as("y")),d=i<=Mr.ss&&["s",i]||i<Mr.s&&["ss",i]||r<=1&&["m"]||r<Mr.m&&["mm",r]||a<=1&&["h"]||a<Mr.h&&["hh",a]||o<=1&&["d"]||o<Mr.d&&["dd",o]||u<=1&&["M"]||u<Mr.M&&["MM",u]||l<=1&&["y"]||["yy",l];return d[2]=t,d[3]=+e>0,d[4]=n,fs.apply(null,d)}function _s(e){return void 0===e?vr:"function"==typeof e&&(vr=e,!0)}function ys(e,t){return void 0!==Mr[e]&&(void 0===t?Mr[e]:(Mr[e]=t,"s"===e&&(Mr.ss=t-1),!0))}function gs(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=ms(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function ps(){if(!this.isValid())return this.localeData().invalidDate();var e=kr(this._milliseconds)/1e3,t=kr(this._days),n=kr(this._months),s,i,r;i=w((s=w(e/60))/60),e%=60,s%=60;var a=r=w(n/12),o=n%=12,u=t,l=i,d=s,h=e,c=this.asSeconds();return c?(c<0?"-":"")+"P"+(a?a+"Y":"")+(o?o+"M":"")+(u?u+"D":"")+(l||d||h?"T":"")+(l?l+"H":"")+(d?d+"M":"")+(h?h+"S":""):"P0D"}var ws,vs,Ms=vs=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,s=0;s<n;s++)if(s in t&&e.call(this,t[s],s,t))return!0;return!1},ks=e.momentProperties=[],Ss=!1,Ds={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var Ys,Os=Ys=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)l(e,t)&&n.push(t);return n},xs={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ts={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Ps="Invalid date",bs="%d",Ws=/\d{1,2}/,Rs={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Cs={},Fs={},Us=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Hs=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Ls={},Gs={},Vs=/\d/,Ns=/\d\d/,js=/\d{3}/,Es=/\d{4}/,As=/[+-]?\d{6}/,Is=/\d\d?/,Zs=/\d\d\d\d?/,zs=/\d\d\d\d\d\d?/,$s=/\d{1,3}/,qs=/\d{1,4}/,Js=/[+-]?\d{1,6}/,Bs=/\d+/,Qs=/[+-]?\d+/,Xs=/Z|[+-]\d\d:?\d\d/gi,Ks=/Z|[+-]\d\d(?::?\d\d)?/gi,ei=/[+-]?\d+(\.\d{1,3})?/,ti=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ni={},si={},ii=0,ri=1,ai=2,oi=3,ui=4,li=5,di=6,hi=7,ci=8,fi,mi=fi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};z("M",["MM",2],"Mo",function(){return this.month()+1}),z("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),z("MMMM",0,0,function(e){return this.localeData().months(this,e)}),U("month","M"),G("month",8),Q("M",Is),Q("MM",Is,Ns),Q("MMM",function(e,t){return t.monthsShortRegex(e)}),Q("MMMM",function(e,t){return t.monthsRegex(e)}),te(["M","MM"],function(e,t){t[ri]=v(e)-1}),te(["MMM","MMMM"],function(e,t,n,s){var i=n._locale.monthsParse(e,s,n._strict);null!=i?t[ri]=i:f(n).invalidMonth=e});var _i=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,yi="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),gi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),pi=ti,wi=ti;z("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),z(0,["YY",2],0,function(){return this.year()%100}),z(0,["YYYY",4],0,"year"),z(0,["YYYYY",5],0,"year"),z(0,["YYYYYY",6,!0],0,"year"),U("year","y"),G("year",1),Q("Y",Qs),Q("YY",Is,Ns),Q("YYYY",qs,Es),Q("YYYYY",Js,As),Q("YYYYYY",Js,As),te(["YYYYY","YYYYYY"],ii),te("YYYY",function(t,n){n[ii]=2===t.length?e.parseTwoDigitYear(t):v(t)}),te("YY",function(t,n){n[ii]=e.parseTwoDigitYear(t)}),te("Y",function(e,t){t[ii]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return v(e)+(v(e)>68?1900:2e3)};var vi=N("FullYear",!0);z("w",["ww",2],"wo","week"),z("W",["WW",2],"Wo","isoWeek"),U("week","w"),U("isoWeek","W"),G("week",5),G("isoWeek",5),Q("w",Is),Q("ww",Is,Ns),Q("W",Is),Q("WW",Is,Ns),ne(["w","ww","W","WW"],function(e,t,n,s){t[s.substr(0,1)]=v(e)});var Mi={dow:0,doy:6};z("d",0,"do","day"),z("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),z("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),z("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),z("e",0,0,"weekday"),z("E",0,0,"isoWeekday"),U("day","d"),U("weekday","e"),U("isoWeekday","E"),G("day",11),G("weekday",11),G("isoWeekday",11),Q("d",Is),Q("e",Is),Q("E",Is),Q("dd",function(e,t){return t.weekdaysMinRegex(e)}),Q("ddd",function(e,t){return t.weekdaysShortRegex(e)}),Q("dddd",function(e,t){return t.weekdaysRegex(e)}),ne(["dd","ddd","dddd"],function(e,t,n,s){var i=n._locale.weekdaysParse(e,s,n._strict);null!=i?t.d=i:f(n).invalidWeekday=e}),ne(["d","e","E"],function(e,t,n,s){t[s]=v(e)});var ki="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Si="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Di="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Yi=ti,Oi=ti,xi=ti;z("H",["HH",2],0,"hour"),z("h",["hh",2],0,Ae),z("k",["kk",2],0,Ie),z("hmm",0,0,function(){return""+Ae.apply(this)+Z(this.minutes(),2)}),z("hmmss",0,0,function(){return""+Ae.apply(this)+Z(this.minutes(),2)+Z(this.seconds(),2)}),z("Hmm",0,0,function(){return""+this.hours()+Z(this.minutes(),2)}),z("Hmmss",0,0,function(){return""+this.hours()+Z(this.minutes(),2)+Z(this.seconds(),2)}),Ze("a",!0),Ze("A",!1),U("hour","h"),G("hour",13),Q("a",ze),Q("A",ze),Q("H",Is),Q("h",Is),Q("k",Is),Q("HH",Is,Ns),Q("hh",Is,Ns),Q("kk",Is,Ns),Q("hmm",Zs),Q("hmmss",zs),Q("Hmm",Zs),Q("Hmmss",zs),te(["H","HH"],oi),te(["k","kk"],function(e,t,n){var s=v(e);t[oi]=24===s?0:s}),te(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),te(["h","hh"],function(e,t,n){t[oi]=v(e),f(n).bigHour=!0}),te("hmm",function(e,t,n){var s=e.length-2;t[oi]=v(e.substr(0,s)),t[ui]=v(e.substr(s)),f(n).bigHour=!0}),te("hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[oi]=v(e.substr(0,s)),t[ui]=v(e.substr(s,2)),t[li]=v(e.substr(i)),f(n).bigHour=!0}),te("Hmm",function(e,t,n){var s=e.length-2;t[oi]=v(e.substr(0,s)),t[ui]=v(e.substr(s))}),te("Hmmss",function(e,t,n){var s=e.length-4,i=e.length-2;t[oi]=v(e.substr(0,s)),t[ui]=v(e.substr(s,2)),t[li]=v(e.substr(i))});var Ti=/[ap]\.?m?\.?/i,Pi=N("Hours",!0),bi={calendar:xs,longDateFormat:Ts,invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:Ws,relativeTime:Rs,months:yi,monthsShort:gi,week:Mi,weekdays:ki,weekdaysMin:Di,weekdaysShort:Si,meridiemParse:Ti},Wi={},Ri={},Ci,Fi=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ui=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Hi=/Z|[+-]\d\d(?::?\d\d)?/,Li=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Gi=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vi=/^\/?Date\((\-?\d+)/i,Ni=/^((?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d?\d\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(?:\d\d)?\d\d\s)(\d\d:\d\d)(\:\d\d)?(\s(?:UT|GMT|[ECMP][SD]T|[A-IK-Za-ik-z]|[+-]\d{4}))$/;e.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),e.ISO_8601=function(){},e.RFC_2822=function(){};var ji=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:_()}),Ei=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=wt.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:_()}),Ai=function(){return Date.now?Date.now():+new Date},Ii=["year","quarter","month","week","day","hour","minute","second","millisecond"];Pt("Z",":"),Pt("ZZ",""),Q("Z",Ks),Q("ZZ",Ks),te(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=bt(Ks,e)});var Zi=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var zi=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,$i=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;It.fn=Ot.prototype,It.invalid=Yt;var qi=qt(1,"add"),Ji=qt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Bi=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});z(0,["gg",2],0,function(){return this.weekYear()%100}),z(0,["GG",2],0,function(){return this.isoWeekYear()%100}),bn("gggg","weekYear"),bn("ggggg","weekYear"),bn("GGGG","isoWeekYear"),bn("GGGGG","isoWeekYear"),U("weekYear","gg"),U("isoWeekYear","GG"),G("weekYear",1),G("isoWeekYear",1),Q("G",Qs),Q("g",Qs),Q("GG",Is,Ns),Q("gg",Is,Ns),Q("GGGG",qs,Es),Q("gggg",qs,Es),Q("GGGGG",Js,As),Q("ggggg",Js,As),ne(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,s){t[s.substr(0,2)]=v(e)}),ne(["gg","GG"],function(t,n,s,i){n[i]=e.parseTwoDigitYear(t)}),z("Q",0,"Qo","quarter"),U("quarter","Q"),G("quarter",7),Q("Q",Vs),te("Q",function(e,t){t[ri]=3*(v(e)-1)}),z("D",["DD",2],"Do","date"),U("date","D"),G("date",9),Q("D",Is),Q("DD",Is,Ns),Q("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),te(["D","DD"],ai),te("Do",function(e,t){t[ai]=v(e.match(Is)[0],10)});var Qi=N("Date",!0);z("DDD",["DDDD",3],"DDDo","dayOfYear"),U("dayOfYear","DDD"),G("dayOfYear",4),Q("DDD",$s),Q("DDDD",js),te(["DDD","DDDD"],function(e,t,n){n._dayOfYear=v(e)}),z("m",["mm",2],0,"minute"),U("minute","m"),G("minute",14),Q("m",Is),Q("mm",Is,Ns),te(["m","mm"],ui);var Xi=N("Minutes",!1);z("s",["ss",2],0,"second"),U("second","s"),G("second",15),Q("s",Is),Q("ss",Is,Ns),te(["s","ss"],li);var Ki=N("Seconds",!1);z("S",0,0,function(){return~~(this.millisecond()/100)}),z(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),z(0,["SSS",3],0,"millisecond"),z(0,["SSSS",4],0,function(){return 10*this.millisecond()}),z(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),z(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),z(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),z(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),z(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),U("millisecond","ms"),G("millisecond",16),Q("S",$s,Vs),Q("SS",$s,Ns),Q("SSS",$s,js);var er;for(er="SSSS";er.length<=9;er+="S")Q(er,Bs);for(er="S";er.length<=9;er+="S")te(er,Vn);var tr=N("Milliseconds",!1);z("z",0,0,"zoneAbbr"),z("zz",0,0,"zoneName");var nr=g.prototype;nr.add=qi,nr.calendar=Qt,nr.clone=Xt,nr.diff=an,nr.endOf=wn,nr.format=hn,nr.from=cn,nr.fromNow=fn,nr.to=mn,nr.toNow=_n,nr.get=A,nr.invalidAt=Tn,nr.isAfter=Kt,nr.isBefore=en,nr.isBetween=tn,nr.isSame=nn,nr.isSameOrAfter=sn,nr.isSameOrBefore=rn,nr.isValid=On,nr.lang=Bi,nr.locale=yn,nr.localeData=gn,nr.max=Ei,nr.min=ji,nr.parsingFlags=xn,nr.set=I,nr.startOf=pn,nr.subtract=Ji,nr.toArray=Sn,nr.toObject=Dn,nr.toDate=kn,nr.toISOString=ln,nr.inspect=dn,nr.toJSON=Yn,nr.toString=un,nr.unix=Mn,nr.valueOf=vn,nr.creationData=Pn,nr.year=vi,nr.isLeapYear=ge,nr.weekYear=Wn,nr.isoWeekYear=Rn,nr.quarter=nr.quarters=Ln,nr.month=de,nr.daysInMonth=he,nr.week=nr.weeks=xe,nr.isoWeek=nr.isoWeeks=Te,nr.weeksInYear=Fn,nr.isoWeeksInYear=Cn,nr.date=Qi,nr.day=nr.days=He,nr.weekday=Le,nr.isoWeekday=Ge,nr.dayOfYear=Gn,nr.hour=nr.hours=Pi,nr.minute=nr.minutes=Xi,nr.second=nr.seconds=Ki,nr.millisecond=nr.milliseconds=tr,nr.utcOffset=Ct,nr.utc=Ut,nr.local=Ht,nr.parseZone=Lt,nr.hasAlignedHourOffset=Gt,nr.isDST=Vt,nr.isLocal=jt,nr.isUtcOffset=Et,nr.isUtc=At,nr.isUTC=At,nr.zoneAbbr=Nn,nr.zoneName=jn,nr.dates=S("dates accessor is deprecated. Use date instead.",Qi),nr.months=S("months accessor is deprecated. Use month instead",de),nr.years=S("years accessor is deprecated. Use year instead",vi),nr.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Ft),nr.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",Nt);var sr=T.prototype;sr.calendar=P,sr.longDateFormat=b,sr.invalidDate=W,sr.ordinal=R,sr.preparse=In,sr.postformat=In,sr.relativeTime=C,sr.pastFuture=F,sr.set=O,sr.months=re,sr.monthsShort=ae,sr.monthsParse=ue,sr.monthsRegex=fe,sr.monthsShortRegex=ce,sr.week=De,sr.firstDayOfYear=Oe,sr.firstDayOfWeek=Ye,sr.weekdays=We,sr.weekdaysMin=Ce,sr.weekdaysShort=Re,sr.weekdaysParse=Ue,sr.weekdaysRegex=Ve,sr.weekdaysShortRegex=Ne,sr.weekdaysMinRegex=je,sr.isPM=$e,sr.meridiem=qe,Xe("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===v(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),e.lang=S("moment.lang is deprecated. Use moment.locale instead.",Xe),e.langData=S("moment.langData is deprecated. Use moment.localeData instead.",tt);var ir=Math.abs,rr=ls("ms"),ar=ls("s"),or=ls("m"),ur=ls("h"),lr=ls("d"),dr=ls("w"),hr=ls("M"),cr=ls("y"),fr=hs("milliseconds"),mr=hs("seconds"),_r=hs("minutes"),yr=hs("hours"),gr=hs("days"),pr=hs("months"),wr=hs("years"),vr=Math.round,Mr={ss:44,s:45,m:45,h:22,d:26,M:11},kr=Math.abs,Sr=Ot.prototype;return Sr.isValid=Dt,Sr.abs=Kn,Sr.add=ts,Sr.subtract=ns,Sr.as=os,Sr.asMilliseconds=rr,Sr.asSeconds=ar,Sr.asMinutes=or,Sr.asHours=ur,Sr.asDays=lr,Sr.asWeeks=dr,Sr.asMonths=hr,Sr.asYears=cr,Sr.valueOf=us,Sr._bubble=is,Sr.get=ds,Sr.milliseconds=fr,Sr.seconds=mr,Sr.minutes=_r,Sr.hours=yr,Sr.days=gr,Sr.weeks=cs,Sr.months=pr,Sr.years=wr,Sr.humanize=gs,Sr.toISOString=ps,Sr.toString=ps,Sr.toJSON=ps,Sr.locale=yn,Sr.localeData=gn,Sr.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ps),Sr.lang=Bi,z("X",0,0,"unix"),z("x",0,0,"valueOf"),Q("x",Qs),Q("X",ei),te("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),te("x",function(e,t,n){n._d=new Date(v(e))}),e.version="2.18.1",t(wt),e.fn=nr,e.min=Mt,e.max=kt,e.now=Ai,e.utc=h,e.unix=En,e.months=qn,e.isDate=o,e.locale=Xe,e.invalid=_,e.duration=It,e.isMoment=p,e.weekdays=Bn,e.parseZone=An,e.localeData=tt,e.isDuration=xt,e.monthsShort=Jn,e.weekdaysMin=Xn,e.defineLocale=Ke,e.updateLocale=et,e.locales=nt,e.weekdaysShort=Qn,e.normalizeUnits=H,e.relativeTimeRounding=_s,e.relativeTimeThreshold=ys,e.calendarFormat=Bt,e.prototype=nr,e})}).call(this),function(){s=this.moment;try{delete this.moment}catch(e){}}.call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["momentjs:moment"]={},{moment:s})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,i=Package["babel-runtime"].meteorBabelHelpers,a=Package.promise.Promise,o=Package["ecmascript-runtime-client"].Symbol,s=Package["ecmascript-runtime-client"].Map,u=Package["ecmascript-runtime-client"].Set,l,c=r({node_modules:{meteor:{validatejs:{lib:{"validate.js":function(t,e,n){function r(t){return t&&t.__esModule?t:{default:t}}var o=r(t("babel-runtime/helpers/typeof"));(function(t,e,n){"use strict";var r=function(t,e,n){n=s.extend({},s.options,n);var a=s.runValidations(t,e,n),o,u;for(o in i.sanitizeForInObject(a))for(u in i.sanitizeForInObject(a[o]))if(s.isPromise(a[o][u]))throw new Error("Use validate.async if you want support for promises");return r.processValidationResults(a,n)},s=r;s.extend=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in i.sanitizeForInObject(e))t[n]=e[n]}),t},s.extend(r,{version:{major:0,minor:9,patch:0,metadata:"development",toString:function(){var t=s.format("%{major}.%{minor}.%{patch}",s.version);return s.isEmpty(s.version.metadata)||(t+="+"+s.version.metadata),t}},Promise:void 0!==a?a:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var r=[],a,o,u,l,c,f,d;(s.isDomElement(t)||s.isJqueryElement(t))&&(t=s.collectFormValues(t));for(a in i.sanitizeForInObject(e)){u=s.getDeepObjectValue(t,a),l=s.result(e[a],u,t,a,n,e);for(o in i.sanitizeForInObject(l)){if(!(c=s.validators[o]))throw d=s.format("Unknown validator %{name}",{name:o}),new Error(d);f=l[o],(f=s.result(f,u,t,a,n,e))&&r.push({attribute:a,value:u,validator:o,globalOptions:n,attributes:t,options:f,error:c.call(c,u,f,a,t,n)})}}return r},processValidationResults:function(t,e){var n;switch(t=s.pruneEmptyErrors(t,e),t=s.expandMultipleErrors(t,e),t=s.convertErrorMessages(t,e),e.format||"grouped"){case"detailed":break;case"flat":t=s.flattenErrorsToArray(t);break;case"grouped":t=s.groupErrorsByAttribute(t);for(n in i.sanitizeForInObject(t))t[n]=s.flattenErrorsToArray(t[n]);break;default:throw new Error(s.format("Unknown format %{format}",e))}return s.isEmpty(t)?void 0:t},async:function(t,e,n){var r=(n=s.extend({},s.async.options,n)).wrapErrors||function(t){return t};!1!==n.cleanAttributes&&(t=s.cleanAttributes(t,e));var i=s.runValidations(t,e,n);return new s.Promise(function(a,o){s.waitForResults(i).then(function(){var u=s.processValidationResults(i,n);u?o(new r(u,n,t,e)):a(t)},function(t){o(t)})})},single:function(t,e,n){return n=s.extend({},s.single.options,n,{format:"flat",fullMessages:!1}),s({single:t},{single:e},n)},waitForResults:function(t){return t.reduce(function(t,e){return s.isPromise(e.error)?t.then(function(){return e.error.then(function(t){e.error=t||null},function(t){if(t instanceof Error)throw t;s.error("Rejecting promises with the result is deprecated. Please use the resolve callback instead."),e.error=t})}):t},new s.Promise(function(t){t()}))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return s.isNumber(t)&&t%1==0},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!==t&&void 0!==t},isPromise:function(t){return!!t&&s.isFunction(t.then)},isJqueryElement:function(t){return t&&s.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!s.isFunction(t.querySelectorAll)||!s.isFunction(t.querySelector))&&(!(!s.isObject(document)||t!==document)||("object"===("undefined"==typeof HTMLElement?"undefined":(0,o.default)(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":(0,o.default)(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!s.isDefined(t))return!0;if(s.isFunction(t))return!1;if(s.isString(t))return s.EMPTY_STRING_REGEXP.test(t);if(s.isArray(t))return 0===t.length;if(s.isDate(t))return!1;if(s.isObject(t)){for(e in i.sanitizeForInObject(t))return!1;return!0}return!1},format:s.extend(function(t,e){return s.isString(t)?t.replace(s.format.FORMAT_REGEXP,function(t,n,r){return"%"===n?"%{"+r+"}":String(e[r])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return s.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):s.isArray(t)?t.map(function(t){return s.prettify(t)}).join(", "):s.isObject(t)?t.toString():(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,e,n){return e+" "+n.toLowerCase()}).toLowerCase()},stringifyValue:function(t){return s.prettify(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},contains:function(t,e){return!!s.isDefined(t)&&(s.isArray(t)?-1!==t.indexOf(e):e in t)},forEachKeyInKeypath:function(t,e,n){if(s.isString(e)){var r="",i,a=!1;for(i=0;i<e.length;++i)switch(e[i]){case".":a?(a=!1,r+="."):(t=n(t,r,!1),r="");break;case"\\":a?(a=!1,r+="\\"):a=!0;break;default:a=!1,r+=e[i];break}return n(t,r,!0)}},getDeepObjectValue:function(t,e){if(s.isObject(t))return s.forEachKeyInKeypath(t,e,function(t,e){if(s.isObject(t))return t[e]})},collectFormValues:function(t,e){var n={},r,i,a,o;if(s.isJqueryElement(t)&&(t=t[0]),!t)return n;for(e=e||{},a=t.querySelectorAll("input[name], textarea[name]"),r=0;r<a.length;++r)i=a.item(r),s.isDefined(i.getAttribute("data-ignored"))||(o=s.sanitizeFormValue(i.value,e),"number"===i.type?o=o?+o:null:"checkbox"===i.type?i.attributes.value?i.checked||(o=n[i.name]||null):o=i.checked:"radio"===i.type&&(i.checked||(o=n[i.name]||null)),n[i.name]=o);for(a=t.querySelectorAll("select[name]"),r=0;r<a.length;++r)i=a.item(r),o=s.sanitizeFormValue(i.options[i.selectedIndex].value,e),n[i.name]=o;return n},sanitizeFormValue:function(t,e){return e.trim&&s.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return s.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(t){return!s.isEmpty(t.error)})},expandMultipleErrors:function(t){var e=[];return t.forEach(function(t){s.isArray(t.error)?t.error.forEach(function(n){e.push(s.extend({},t,{error:n}))}):e.push(t)}),e},convertErrorMessages:function(t,e){e=e||{};var n=[];return t.forEach(function(t){var r=s.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);s.isString(r)?("^"===r[0]?r=r.slice(1):!1!==e.fullMessages&&(r=s.capitalize(s.prettify(t.attribute))+" "+r),r=r.replace(/\\\^/g,"^"),r=s.format(r,{value:s.stringifyValue(t.value)}),n.push(s.extend({},t,{error:r}))):n.push(t)}),n},groupErrorsByAttribute:function(t){var e={};return t.forEach(function(t){var n=e[t.attribute];n?n.push(t):e[t.attribute]=[t]}),e},flattenErrorsToArray:function(t){return t.map(function(t){return t.error})},cleanAttributes:function(t,e){function n(t,e,n){return s.isObject(t[e])?t[e]:t[e]=!!n||{}}function r(t){var e={},r,a;for(a in i.sanitizeForInObject(t))t[a]&&s.forEachKeyInKeypath(e,a,n);return e}function a(t,e){if(!s.isObject(t))return t;var n=s.extend({},t),r,o;for(o in i.sanitizeForInObject(t))r=e[o],s.isObject(r)?n[o]=a(n[o],r):r||delete n[o];return n}return s.isObject(e)&&s.isObject(t)?(e=r(e),a(t,e)):{}},exposeModule:function(t,e,n,r,i){n?(r&&r.exports&&(n=r.exports=t),n.validate=t):(e.validate=t,t.isFunction(i)&&i.amd&&i([],function(){return t}))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),r.validators={presence:function(t,e){if(e=s.extend({},this.options,e),s.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,n){if(!s.isEmpty(t)){var r=(e=s.extend({},this.options,e)).is,i=e.maximum,a=e.minimum,o,u=[],l=(t=(e.tokenizer||function(t){return t})(t)).length;return s.isNumber(l)?(s.isNumber(r)&&l!==r&&(o=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",u.push(s.format(o,{count:r}))),s.isNumber(a)&&l<a&&(o=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",u.push(s.format(o,{count:a}))),s.isNumber(i)&&l>i&&(o=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",u.push(s.format(o,{count:i}))),u.length>0?e.message||u:void 0):(s.error(s.format("Attribute %{attr} has a non numeric value for `length`",{attr:n})),e.message||this.notValid||"has an incorrect length")}},numericality:function(t,e){if(!s.isEmpty(t)){var n=[],r,a,o={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e}};if(!0!==(e=s.extend({},this.options,e)).noStrings&&s.isString(t)&&(t=+t),!s.isNumber(t))return e.message||e.notValid||this.notValid||"is not a number";if(e.onlyInteger&&!s.isInteger(t))return e.message||e.notInteger||this.notInteger||"must be an integer";for(r in i.sanitizeForInObject(o))if(a=e[r],s.isNumber(a)&&!o[r](t,a)){var u="not"+s.capitalize(r),l=e[u]||this[u]||"must be %{type} %{count}";n.push(s.format(l,{count:a,type:s.prettify(r)}))}return e.odd&&t%2!=1&&n.push(e.notOdd||this.notOdd||"must be odd"),e.even&&t%2!=0&&n.push(e.notEven||this.notEven||"must be even"),n.length?e.message||n:void 0}},datetime:s.extend(function(t,e){if(!s.isFunction(this.parse)||!s.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(!s.isEmpty(t)){var n,r=[],i=(e=s.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,a=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?e.message||this.notValid||"must be a valid date":(!isNaN(i)&&t<i&&(n=this.tooEarly||"must be no earlier than %{date}",n=s.format(n,{date:this.format(i,e)}),r.push(n)),!isNaN(a)&&t>a&&(n=this.tooLate||"must be no later than %{date}",n=s.format(n,{date:this.format(a,e)}),r.push(n)),r.length?e.message||r:void 0)}},{parse:null,format:null}),date:function(t,e){return e=s.extend({},e,{dateOnly:!0}),s.validators.datetime.call(s.validators.datetime,t,e)},format:function(t,e){(s.isString(e)||e instanceof RegExp)&&(e={pattern:e});var n=(e=s.extend({},this.options,e)).message||this.message||"is invalid",r=e.pattern,i;if(!s.isEmpty(t))return s.isString(t)?(s.isString(r)&&(r=new RegExp(e.pattern,e.flags)),(i=r.exec(t))&&i[0].length==t.length?void 0:n):n},inclusion:function(t,e){if(!s.isEmpty(t)&&(s.isArray(e)&&(e={within:e}),e=s.extend({},this.options,e),!s.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return s.format(n,{value:t})}},exclusion:function(t,e){if(!s.isEmpty(t)&&(s.isArray(e)&&(e={within:e}),e=s.extend({},this.options,e),s.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return s.format(n,{value:t})}},email:s.extend(function(t,e){var n=(e=s.extend({},this.options,e)).message||this.message||"is not a valid email";if(!s.isEmpty(t))return s.isString(t)&&this.PATTERN.exec(t)?void 0:n},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(t,e,n,r){if(!s.isEmpty(t)){s.isString(e)&&(e={attribute:e});var i=(e=s.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(s.isEmpty(e.attribute)||!s.isString(e.attribute))throw new Error("The attribute must be a non empty string");var a=s.getDeepObjectValue(r,e.attribute);return(e.comparator||function(t,e){return t===e})(t,a,e,n,r)?void 0:s.format(i,{attribute:s.prettify(e.attribute)})}},url:function(t,e){if(!s.isEmpty(t)){var n=(e=s.extend({},this.options,e)).message||this.message||"is not a valid url",r=e.schemes||this.schemes||["http","https"],i=e.allowLocal||this.allowLocal||!1;if(!s.isString(t))return n;var a="^(?:(?:"+r.join("|")+"):\\/\\/)(?:\\S+(?::\\S*)?@)?";a+="(?:";var o="(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))";return i?o="(?:localhost|"+o+")":a+="(?!10(?:\\.\\d{1,3}){3})(?!127(?:\\.\\d{1,3}){3})(?!169\\.254(?:\\.\\d{1,3}){2})(?!192\\.168(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",a+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|"+o+"(?::\\d{2,5})?(?:\\/[^\\s]*)?$",new RegExp(a,"i").exec(t)?void 0:n}}},r.exposeModule(r,this,t,e,n)}).call(this,void 0!==e?e:null,void 0!==n?n:null,"undefined"!=typeof define?define:null)}},"load.js":function(t,e,n){var r=void 0;n.watch(t("./lib/validate.js"),{validate:function(t){r=t}},0),r.validators.equals=function(t,e,n,r){if(e&&t!==e.value)return n+"must equal "+e.value},r.validators.doesNotEqual=function(t,e,n){if(e&&t===e.value)return n+"cannot equal "+e.value},r.validators.contains=function(t,e,n){if(e&&t.indexOf&&-1===t.indexOf(e.value))return n+"must contain "+e.value},r.validators.doesNotContain=function(t,e,n){if(e&&t.indexOf&&-1!==t.indexOf(e.value))return n+"cannot contain "+e.value},r.validators.startsWith=function(t,e,n){if(e&&t.startsWith&&!t.startsWith(e.value))return n+"must start with "+e.value},r.validators.endsWith=function(t,e,n){if(e&&t.endsWith&&!t.endsWith(e.value))return n+"must end with "+e.value},l=r}}}}},{extensions:[".js",".json"]});c("./node_modules/meteor/validatejs/lib/validate.js"),c("./node_modules/meteor/validatejs/load.js"),"undefined"==typeof Package&&(Package={}),function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Package.validatejs={},{validate:l})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,r=Package.meteor.meteorEnv,s=Package.jquery.$,n=Package.jquery.jQuery;(function(){(function(){!function(e,t){var r=[].slice,s={},n=e.amplify={publish:function(e){if("string"!=typeof e)throw new Error("You must provide a valid topic to publish.");var t=r.call(arguments,1),n,o,a,u=0,i;if(!s[e])return!0;for(a=(n=s[e].slice()).length;u<a&&(o=n[u],!1!==(i=o.callback.apply(o.context,t)));u++);return!1!==i},subscribe:function(e,t,r,n){if("string"!=typeof e)throw new Error("You must provide a valid topic to create a subscription.");3===arguments.length&&"number"==typeof r&&(n=r,r=t,t=null),2===arguments.length&&(r=t,t=null),n=n||10;for(var o=0,a=e.split(/\s/),u=a.length,i;o<u;o++){e=a[o],i=!1,s[e]||(s[e]=[]);for(var c=s[e].length-1,l={callback:r,context:t,priority:n};c>=0;c--)if(s[e][c].priority<=n){s[e].splice(c+1,0,l),i=!0;break}i||s[e].unshift(l)}return r},unsubscribe:function(e,t,r){if("string"!=typeof e)throw new Error("You must provide a valid topic to remove a subscription.");if(2===arguments.length&&(r=t,t=null),s[e])for(var n=s[e].length,o=0;o<n;o++)s[e][o].callback===r&&(t&&s[e][o].context!==t||(s[e].splice(o,1),o--,n--))}}}(this),function(e,t){function r(e,r){s.addType(e,function(o,a,u){var i,c,l,p,f=a,d=(new Date).getTime();if(!o){f={},p=[],l=0;try{for(o=r.length;o=r.key(l++);)n.test(o)&&((c=JSON.parse(r.getItem(o))).expires&&c.expires<=d?p.push(o):f[o.replace(n,"")]=c.data);for(;o=p.pop();)r.removeItem(o)}catch(e){}return f}if(o="__amplify__"+o,a===t){if(i=r.getItem(o),!((c=i?JSON.parse(i):{expires:-1}).expires&&c.expires<=d))return c.data;r.removeItem(o)}else if(null===a)r.removeItem(o);else{c=JSON.stringify({data:a,expires:u.expires?d+u.expires:null});try{r.setItem(o,c)}catch(t){s[e]();try{r.setItem(o,c)}catch(e){throw s.error()}}}return f})}var s=e.store=function(e,t,r){var n=s.type;return r&&r.type&&r.type in s.types&&(n=r.type),s.types[n](e,t,r||{})};s.types={},s.type=null,s.addType=function(e,t){s.type||(s.type=e),s.types[e]=t,s[e]=function(t,r,n){return n=n||{},n.type=e,s(t,r,n)}},s.error=function(){return"amplify.store quota exceeded"};var n=/^__amplify__/;for(var o in{localStorage:1,sessionStorage:1})try{window[o].setItem("__amplify__","x"),window[o].removeItem("__amplify__"),r(o,window[o])}catch(e){}if(!s.types.localStorage&&window.globalStorage)try{r("globalStorage",window.globalStorage[window.location.hostname]),"sessionStorage"===s.type&&(s.type="globalStorage")}catch(e){}!function(){if(!s.types.localStorage){var e=document.createElement("div"),r="amplify";e.style.display="none",document.getElementsByTagName("head")[0].appendChild(e);try{e.addBehavior("#default#userdata"),e.load(r)}catch(t){return void e.parentNode.removeChild(e)}s.addType("userData",function(n,o,a){e.load(r);var u,i,c,l,p,f=o,d=(new Date).getTime();if(!n){for(f={},p=[],l=0;u=e.XMLDocument.documentElement.attributes[l++];)(i=JSON.parse(u.value)).expires&&i.expires<=d?p.push(u.name):f[u.name]=i.data;for(;n=p.pop();)e.removeAttribute(n);return e.save(r),f}if(n=n.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-"),n=n.replace(/^-/,"_-"),o===t){if(u=e.getAttribute(n),!((i=u?JSON.parse(u):{expires:-1}).expires&&i.expires<=d))return i.data;e.removeAttribute(n)}else null===o?e.removeAttribute(n):(c=e.getAttribute(n),i=JSON.stringify({data:o,expires:a.expires?d+a.expires:null}),e.setAttribute(n,i));try{e.save(r)}catch(t){null===c?e.removeAttribute(n):e.setAttribute(n,c),s.userData();try{e.setAttribute(n,i),e.save(r)}catch(t){throw null===c?e.removeAttribute(n):e.setAttribute(n,c),s.error()}}return f})}}(),function(){function e(e){return e===t?t:JSON.parse(JSON.stringify(e))}var r={},n={};s.addType("memory",function(s,o,a){return s?o===t?e(r[s]):(n[s]&&(clearTimeout(n[s]),delete n[s]),null===o?(delete r[s],null):(r[s]=o,a.expires&&(n[s]=setTimeout(function(){delete r[s],delete n[s]},a.expires)),o)):e(r)})}()}(this.amplify=this.amplify||{}),function(e,t){"use strict";function r(){}function s(e){return"[object Function]"==={}.toString.call(e)}function n(e){var t=!1;return setTimeout(function(){t=!0},1),function(){var r=this,s=arguments;t?e.apply(r,s):setTimeout(function(){e.apply(r,s)},1)}}e.request=function(t,o,a){var u=t||{};"string"==typeof u&&(s(o)&&(a=o,o={}),u={resourceId:t,data:o||{},success:a});var i={abort:r},c=e.request.resources[u.resourceId],l=u.success||r,p=u.error||r;if(u.success=n(function(t,r){r=r||"success",e.publish("request.success",u,t,r),e.publish("request.complete",u,t,r),l(t,r)}),u.error=n(function(t,r){r=r||"error",e.publish("request.error",u,t,r),e.publish("request.complete",u,t,r),p(t,r)}),!c){if(!u.resourceId)throw"amplify.request: no resourceId provided";throw"amplify.request: unknown resourceId: "+u.resourceId}if(e.publish("request.before",u))return e.request.resources[u.resourceId](u,i),i;u.error(null,"abort")},e.request.types={},e.request.resources={},e.request.define=function(t,r,s){if("string"==typeof r){if(!(r in e.request.types))throw"amplify.request.define: unknown type: "+r;s.resourceId=t,e.request.resources[t]=e.request.types[r](s)}else e.request.resources[t]=r}}(amplify),function(e,t,r){"use strict";var s=["status","statusText","responseText","responseXML","readyState"],n=/\{([^\}]+)\}/g;e.request.types.ajax=function(r){return r=t.extend({type:"GET"},r),function(n,o){var a,u,i=r.url,c=o.abort,l=t.extend(!0,{},r,{data:n.data}),p=!1,f={readyState:0,setRequestHeader:function(e,t){return a.setRequestHeader(e,t)},getAllResponseHeaders:function(){return a.getAllResponseHeaders()},getResponseHeader:function(e){return a.getResponseHeader(e)},overrideMimeType:function(e){return a.overrideMimeType(e)},abort:function(){p=!0;try{a.abort()}catch(e){}u(null,"abort")},success:function(e,t){n.success(e,t)},error:function(e,t){n.error(e,t)}};u=function(e,r){t.each(s,function(e,t){try{f[t]=a[t]}catch(e){}}),/OK$/.test(f.statusText)&&(f.statusText="success"),void 0===e&&(e=null),p&&(r="abort"),/timeout|error|abort/.test(r)?f.error(e,r):f.success(e,r),u=t.noop},e.publish("request.ajax.preprocess",r,n,l,f),t.extend(l,{isJSONP:function(){return/jsonp/gi.test(this.dataType)},cacheURL:function(){if(!this.isJSONP())return this.url;var e="callback";this.hasOwnProperty("jsonp")&&(!1!==this.jsonp?e=this.jsonp:this.hasOwnProperty("jsonpCallback")&&(e=this.jsonpCallback));var t=new RegExp("&?"+e+"=[^&]*&?","gi");return this.url.replace(t,"")},success:function(e,t){u(e,t)},error:function(e,t){u(null,t)},beforeSend:function(t,s){return a=t,l=s,(!r.beforeSend||r.beforeSend.call(this,f,l))&&e.publish("request.before.ajax",r,n,l,f)}}),l.cache&&l.isJSONP()&&t.extend(l,{cache:!0}),t.ajax(l),o.abort=function(){f.abort(),c.call(this)}}},e.subscribe("request.ajax.preprocess",function(e,r,s){var o=[],a=s.data;"string"!=typeof a&&(a=t.extend(!0,{},e.data,a),s.url=s.url.replace(n,function(e,t){if(t in a)return o.push(t),a[t]}),t.each(o,function(e,t){delete a[t]}),s.data=a)}),e.subscribe("request.ajax.preprocess",function(e,r,s){var n=s.data,o=e.dataMap;o&&"string"!=typeof n&&(t.isFunction(o)?s.data=o(n):(t.each(e.dataMap,function(e,t){e in n&&(n[t]=n[e],delete n[e])}),s.data=n))});var o=e.request.cache={_key:function(e,t,r){function s(){return r.charCodeAt(o++)<<24|r.charCodeAt(o++)<<16|r.charCodeAt(o++)<<8|r.charCodeAt(o++)<<0}for(var n=(r=t+r).length,o=0,a=s();o<n;)a^=s();return"request-"+e+"-"+a},_default:function(){var e={};return function(t,r,s,n){var a=o._key(r.resourceId,s.cacheURL(),s.data),u=t.cache;if(a in e)return n.success(e[a]),!1;var i=n.success;n.success=function(t){e[a]=t,"number"==typeof u&&setTimeout(function(){delete e[a]},u),i.apply(this,arguments)}}}()};e.store&&(t.each(e.store.types,function(t){o[t]=function(r,s,n,a){var u=o._key(s.resourceId,n.cacheURL(),n.data),i=e.store[t](u);if(i)return n.success(i),!1;var c=a.success;a.success=function(s){e.store[t](u,s,{expires:r.cache.expires}),c.apply(this,arguments)}}}),o.persist=o[e.store.type]),e.subscribe("request.before.ajax",function(e){var t=e.cache;if(t)return t=t.type||t,o[t in o?t:"_default"].apply(this,arguments)}),e.request.decoders={jsend:function(e,t,r,s,n){"success"===e.status?s(e.data):"fail"===e.status?n(e.data,"fail"):"error"===e.status?(delete e.status,n(e,"error")):n(null,"error")}},e.subscribe("request.before.ajax",function(r,s,n,o){function a(e,t){i(e,t)}function u(e,t){c(e,t)}var i=o.success,c=o.error,l=t.isFunction(r.decoder)?r.decoder:r.decoder in e.request.decoders?e.request.decoders[r.decoder]:e.request.decoders._default;l&&(o.success=function(e,t){l(e,t,o,a,u)},o.error=function(e,t){l(e,t,o,a,u)})})}(amplify,n)}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),Package.amplify={}}();

"undefined"==typeof Package&&(Package={}),Package["ddp-rate-limiter"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,o=Package.meteor.meteorEnv,a=Package.random.Random;(function(){var o=Object.prototype.hasOwnProperty,r="_localstorage_test_"+a.id(),n,c;try{(c=t.localStorage)&&(c.setItem(r,r),n=c.getItem(r),c.removeItem(r))}catch(e){}r===n&&(e.isServer?e._localStorage=c:["getItem","setItem","removeItem"].forEach(function(e){this[e]=function(){return c[e].apply(c,arguments)}},e._localStorage={})),e._localStorage||(e.isClient&&e._debug("You are running a browser with no localStorage or userData support. Logging in from one tab will not cause another tab to be logged in."),e._localStorage=Object.create({setItem:function(e,t){this[e]=t},removeItem:function(e){delete this[e]},getItem:function(e){return o.call(this,e)?this[e]:null}}))}).call(this),"undefined"==typeof Package&&(Package={}),Package.localstorage={}}();

!function(){var n=Package.meteor.Meteor,e=Package.meteor.global,o=Package.meteor.meteorEnv,t=Package.underscore._,i=Package.tracker.Tracker,r=Package.tracker.Deps,a=Package.random.Random,c=Package["callback-hook"].Hook,s=Package["reactive-var"].ReactiveVar,u=Package["ddp-client"].DDP,l=Package.mongo.Mongo,g=Package.modules.meteorInstall,_=Package["babel-runtime"].meteorBabelHelpers,p=Package.promise.Promise,f=Package["ecmascript-runtime-client"].Symbol,h=Package["ecmascript-runtime-client"].Map,d=Package["ecmascript-runtime-client"].Set,k,m,L,E=g({node_modules:{meteor:{"accounts-base":{"client_main.js":function(e,o,t){var i=t;i.export({AccountsClient:function(){return r},AccountsTest:function(){return a}});var r=void 0;i.watch(e("./accounts_client.js"),{AccountsClient:function(n){r=n}},0);var a=void 0;i.watch(e("./url_client.js"),{AccountsTest:function(n){a=n}},1),i.watch(e("./localstorage_token.js")),k=new r,n.users=k.users},"accounts_client.js":function(e,o,i){function r(n){return n&&n.__esModule?n:{default:n}}var a=r(e("babel-runtime/helpers/classCallCheck")),c=r(e("babel-runtime/helpers/possibleConstructorReturn")),l=r(e("babel-runtime/helpers/inherits"));i.export({AccountsClient:function(){return _}});var g=void 0;i.watch(e("./accounts_common.js"),{AccountsCommon:function(n){g=n}},0);var _=function(n){function e(o){(0,a.default)(this,e);var t=(0,c.default)(this,n.call(this,o));return t._loggingIn=new s(!1),t._loggingOut=new s(!1),t._loginServicesHandle=t.connection.subscribe("meteor.loginServiceConfiguration"),t._pageLoadLoginCallbacks=[],t._pageLoadLoginAttemptInfo=null,t._initUrlMatching(),t._initLocalStorage(),t._loginFuncs={},t}return(0,l.default)(e,n),e.prototype.userId=function(){function n(){return this.connection.userId()}return n}(),e.prototype._setLoggingIn=function(){function n(n){this._loggingIn.set(n)}return n}(),e.prototype.loggingIn=function(){function n(){return this._loggingIn.get()}return n}(),e.prototype.loggingOut=function(){function n(){return this._loggingOut.get()}return n}(),e.prototype.registerClientLoginFunction=function(){function n(n,e){if(this._loginFuncs[n])throw new Error(n+" has been defined already");this._loginFuncs[n]=e}return n}(),e.prototype.callLoginFunction=function(){function n(n){if(!this._loginFuncs[n])throw new Error(n+" was not defined");for(var e=arguments.length,o=Array(e>1?e-1:0),t=1;t<e;t++)o[t-1]=arguments[t];return this._loginFuncs[n].apply(this,o)}return n}(),e.prototype.applyLoginFunction=function(){function n(n,e){if(!this._loginFuncs[n])throw new Error(n+" was not defined");return this._loginFuncs[n].apply(this,e)}return n}(),e.prototype.logout=function(){function n(n){var e=this;e._loggingOut.set(!0),e.connection.apply("logout",[],{wait:!0},function(o,t){e._loggingOut.set(!1),o?n&&n(o):(e.makeClientLoggedOut(),n&&n())})}return n}(),e.prototype.logoutOtherClients=function(){function n(n){var e=this;e.connection.apply("getNewToken",[],{wait:!0},function(n,o){n||e._storeLoginToken(e.userId(),o.token,o.tokenExpires)}),e.connection.apply("removeOtherTokens",[],{wait:!0},function(e){n&&n(e)})}return n}(),e}(g),p=_.prototype;n.loggingIn=function(){return k.loggingIn()},n.loggingOut=function(){return k.loggingOut()},p.callLoginMethod=function(n){var e=this;n=t.extend({methodName:"login",methodArguments:[{}],_suppressLoggingIn:!1},n),t.each(["validateResult","userCallback"],function(e){n[e]||(n[e]=function(){})});var o=t.once(function(o){o?e._onLoginFailureHook.each(function(n){return n({error:o}),!0}):e._onLoginHook.each(function(n){return n(),!0}),n.userCallback.apply(this,arguments)}),i=!1,r=function(n,t){!n&&t&&t.token&&(e._reconnectStopper&&e._reconnectStopper.stop(),e._reconnectStopper=u.onReconnect(function(n){if(n==e.connection){i=!0;var r=e._storedLoginToken();r&&(t={token:r,tokenExpires:e._storedLoginTokenExpires()}),t.tokenExpires||(t.tokenExpires=e._tokenExpiration(new Date)),e._tokenExpiresSoon(t.tokenExpires)?e.makeClientLoggedOut():e.callLoginMethod({methodArguments:[{resume:t.token}],_suppressLoggingIn:!0,userCallback:function(n){var i=e._storedLoginToken();n&&i&&i===t.token&&e.makeClientLoggedOut(),o(n)}})}}))},a=function(t,r){if(!i){if(e._setLoggingIn(!1),t||!r)return t=t||new Error("No result from call to "+n.methodName),void o(t);try{n.validateResult(r)}catch(n){return void o(n)}e.makeClientLoggedIn(r.id,r.token,r.tokenExpires),o()}};n._suppressLoggingIn||e._setLoggingIn(!0),e.connection.apply(n.methodName,n.methodArguments,{wait:!0,onResultReceived:r},a)},p.makeClientLoggedOut=function(){this.connection._userId&&this._onLogoutHook.each(function(n){return n(),!0}),this._unstoreLoginToken(),this.connection.setUserId(null),this._reconnectStopper&&this._reconnectStopper.stop()},p.makeClientLoggedIn=function(n,e,o){this._storeLoginToken(n,e,o),this.connection.setUserId(n)},n.logout=function(n){return k.logout(n)},n.logoutOtherClients=function(n){return k.logoutOtherClients(n)},p.loginServicesConfigured=function(){return this._loginServicesHandle.ready()},p.onPageLoadLogin=function(n){this._pageLoadLoginAttemptInfo?n(this._pageLoadLoginAttemptInfo):this._pageLoadLoginCallbacks.push(n)},p._pageLoadLogin=function(e){this._pageLoadLoginAttemptInfo?n._debug("Ignoring unexpected duplicate page load login attempt info"):(t.each(this._pageLoadLoginCallbacks,function(n){n(e)}),this._pageLoadLoginCallbacks=[],this._pageLoadLoginAttemptInfo=e)},Package.blaze&&(Package.blaze.Blaze.Template.registerHelper("currentUser",function(){return n.user()}),Package.blaze.Blaze.Template.registerHelper("loggingIn",function(){return n.loggingIn()}),Package.blaze.Blaze.Template.registerHelper("loggingOut",function(){return n.loggingOut()}),Package.blaze.Blaze.Template.registerHelper("loggingInOrOut",function(){return n.loggingIn()||n.loggingOut()}))},"accounts_common.js":function(e,o,i){function r(n){return n&&n.__esModule?n:{default:n}}var a=r(e("babel-runtime/helpers/classCallCheck"));i.export({AccountsCommon:function(){return s}});var s=function(){function e(n){(0,a.default)(this,e),this._options={},this.connection=void 0,this._initConnection(n||{}),this.users=new l.Collection("users",{_preventAutopublish:!0,connection:this.connection}),this._onLoginHook=new c({bindEnvironment:!1,debugPrintExceptions:"onLogin callback"}),this._onLoginFailureHook=new c({bindEnvironment:!1,debugPrintExceptions:"onLoginFailure callback"}),this._onLogoutHook=new c({bindEnvironment:!1,debugPrintExceptions:"onLogout callback"})}return e.prototype.userId=function(){function n(){throw new Error("userId method not implemented")}return n}(),e.prototype.user=function(){function n(){var n=this.userId();return n?this.users.findOne(n):null}return n}(),e.prototype.config=function(){function e(e){var o=this;if(n.isServer?__meteor_runtime_config__.accountsConfigCalled=!0:__meteor_runtime_config__.accountsConfigCalled||n._debug("Accounts.config was called on the client but not on the server; some configuration options may not take effect."),t.has(e,"oauthSecretKey")){if(n.isClient)throw new Error("The oauthSecretKey option may only be specified on the server");if(!Package["oauth-encryption"])throw new Error("The oauth-encryption package must be loaded to set oauthSecretKey");Package["oauth-encryption"].OAuthEncryption.loadKey(e.oauthSecretKey),e=t.omit(e,"oauthSecretKey")}var i=["sendVerificationEmail","forbidClientAccountCreation","passwordEnrollTokenExpirationInDays","restrictCreationByEmailDomain","loginExpirationInDays","passwordResetTokenExpirationInDays","ambiguousErrorMessages"];t.each(t.keys(e),function(n){if(!t.contains(i,n))throw new Error("Accounts.config: Invalid key: "+n)}),t.each(i,function(n){if(n in e){if(n in o._options)throw new Error("Can't set `"+n+"` more than once");o._options[n]=e[n]}})}return e}(),e.prototype.onLogin=function(){function n(n){return this._onLoginHook.register(n)}return n}(),e.prototype.onLoginFailure=function(){function n(n){return this._onLoginFailureHook.register(n)}return n}(),e.prototype.onLogout=function(){function n(n){return this._onLogoutHook.register(n)}return n}(),e.prototype._initConnection=function(){function e(e){n.isClient&&(e.connection?this.connection=e.connection:e.ddpUrl?this.connection=u.connect(e.ddpUrl):"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL?this.connection=u.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL):this.connection=n.connection)}return e}(),e.prototype._getTokenLifetimeMs=function(){function n(){return 24*((null===this._options.loginExpirationInDays?d:this._options.loginExpirationInDays)||_)*60*60*1e3}return n}(),e.prototype._getPasswordResetTokenLifetimeMs=function(){function n(){return 24*(this._options.passwordResetTokenExpirationInDays||p)*60*60*1e3}return n}(),e.prototype._getPasswordEnrollTokenLifetimeMs=function(){function n(){return 24*(this._options.passwordEnrollTokenExpirationInDays||f)*60*60*1e3}return n}(),e.prototype._tokenExpiration=function(){function n(n){return new Date(new Date(n).getTime()+this._getTokenLifetimeMs())}return n}(),e.prototype._tokenExpiresSoon=function(){function n(n){var e=.1*this._getTokenLifetimeMs(),o=1e3*h;return e>o&&(e=o),new Date>new Date(n)-e}return n}(),e}(),g=s.prototype;n.userId=function(){return k.userId()},n.user=function(){return k.user()};var _=90;g.DEFAULT_LOGIN_EXPIRATION_DAYS=_;var p=3,f=30,h=3600;m=6e5,L=1e4;var d=36500;g.LOGIN_UNEXPIRING_TOKEN_DAYS=d,n.startup(function(){var n=Package["service-configuration"].ServiceConfiguration;g.loginServiceConfiguration=n.configurations,g.ConfigError=n.ConfigError});var E="Accounts.LoginCancelledError";g.LoginCancelledError=n.makeErrorType(E,function(n){this.message=n}),g.LoginCancelledError.prototype.name=E,g.LoginCancelledError.numericError=145546287},"localstorage_token.js":function(e,o,t){var i=void 0;t.watch(e("./accounts_client.js"),{AccountsClient:function(n){i=n}},0);var r=i.prototype;n.loginWithToken=function(n,e){return k.loginWithToken(n,e)},r.loginWithToken=function(n,e){this.callLoginMethod({methodArguments:[{resume:n}],userCallback:e})},r._enableAutoLogin=function(){this._autoLoginEnabled=!0,this._pollStoredLoginToken()},r._isolateLoginTokenForTest=function(){this.LOGIN_TOKEN_KEY=this.LOGIN_TOKEN_KEY+a.id(),this.USER_ID_KEY=this.USER_ID_KEY+a.id()},r._storeLoginToken=function(e,o,t){n._localStorage.setItem(this.USER_ID_KEY,e),n._localStorage.setItem(this.LOGIN_TOKEN_KEY,o),t||(t=this._tokenExpiration(new Date)),n._localStorage.setItem(this.LOGIN_TOKEN_EXPIRES_KEY,t),this._lastLoginTokenWhenPolled=o},r._unstoreLoginToken=function(){n._localStorage.removeItem(this.USER_ID_KEY),n._localStorage.removeItem(this.LOGIN_TOKEN_KEY),n._localStorage.removeItem(this.LOGIN_TOKEN_EXPIRES_KEY),this._lastLoginTokenWhenPolled=null},r._storedLoginToken=function(){return n._localStorage.getItem(this.LOGIN_TOKEN_KEY)},r._storedLoginTokenExpires=function(){return n._localStorage.getItem(this.LOGIN_TOKEN_EXPIRES_KEY)},r._storedUserId=function(){return n._localStorage.getItem(this.USER_ID_KEY)},r._unstoreLoginTokenIfExpiresSoon=function(){var n=this._storedLoginTokenExpires();n&&this._tokenExpiresSoon(new Date(n))&&this._unstoreLoginToken()},r._initLocalStorage=function(){var e=this;e.LOGIN_TOKEN_KEY="Meteor.loginToken",e.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires",e.USER_ID_KEY="Meteor.userId";var o=__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;if(o||this.connection!==n.connection){var t=":"+this.connection._stream.rawUrl;o&&(t+=":"+o),e.LOGIN_TOKEN_KEY+=t,e.LOGIN_TOKEN_EXPIRES_KEY+=t,e.USER_ID_KEY+=t}if(e._autoLoginEnabled){e._unstoreLoginTokenIfExpiresSoon();var i=e._storedLoginToken();if(i){var r=e._storedUserId();r&&e.connection.setUserId(r),e.loginWithToken(i,function(o){o&&(n._debug("Error logging in with token: "+o),e.makeClientLoggedOut()),e._pageLoadLogin({type:"resume",allowed:!o,error:o,methodName:"login",methodArguments:[{resume:i}]})})}}e._lastLoginTokenWhenPolled=i,e._pollIntervalTimer&&clearInterval(e._pollIntervalTimer),e._pollIntervalTimer=setInterval(function(){e._pollStoredLoginToken()},3e3)},r._pollStoredLoginToken=function(){var n=this;if(n._autoLoginEnabled){var e=n._storedLoginToken();n._lastLoginTokenWhenPolled!=e&&(e?n.loginWithToken(e,function(e){e&&n.makeClientLoggedOut()}):n.logout()),n._lastLoginTokenWhenPolled=e}}},"url_client.js":function(e,o,i){function r(n,e,o){t.each(u,function(t){var i,r=new RegExp("^\\#\\/"+t+"\\/(.*)$"),a=e.match(r);a&&(i=a[1],"reset-password"===t?n._resetPasswordToken=i:"verify-email"===t?n._verifyEmailToken=i:"enroll-account"===t&&(n._enrollAccountToken=i),window.location.hash="",o.call(n,i,t))})}function a(e,o){var t=this;t._autoLoginEnabled=!1,n.startup(function(){t._accountsCallbacks[o]&&t._accountsCallbacks[o](e,function(){t._enableAutoLogin()})})}i.export({AccountsTest:function(){return g}});var c=void 0;i.watch(e("./accounts_client.js"),{AccountsClient:function(n){c=n}},0);var s=c.prototype,u=["reset-password","verify-email","enroll-account"],l=window.location.hash;s._initUrlMatching=function(){this._autoLoginEnabled=!0,this._accountsCallbacks={},this._attemptToMatchHash()},s._attemptToMatchHash=function(){r(this,l,a)};var g={attemptToMatchHash:function(n,e){return r(k,n,e)}};s.onResetPasswordLink=function(e){this._accountsCallbacks["reset-password"]&&n._debug("Accounts.onResetPasswordLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["reset-password"]=e},s.onEmailVerificationLink=function(e){this._accountsCallbacks["verify-email"]&&n._debug("Accounts.onEmailVerificationLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["verify-email"]=e},s.onEnrollmentLink=function(e){this._accountsCallbacks["enroll-account"]&&n._debug("Accounts.onEnrollmentLink was called more than once. Only one callback added will be executed."),this._accountsCallbacks["enroll-account"]=e}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/accounts-base/client_main.js");"undefined"==typeof Package&&(Package={}),function(n,e){for(var o in e)o in n||(n[o]=e[o])}(Package["accounts-base"]=E,{Accounts:k})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,i=Package.meteor.meteorEnv,s=Package.jquery.$,a=Package.jquery.jQuery,o=Package.tracker.Tracker,n=Package.tracker.Deps,r=Package["reactive-dict"].ReactiveDict,c=Package.session.Session,p=Package.underscore._,u=Package.ejson.EJSON,h;(function(){var e=function(t){return void 0===t?"undefined":u.stringify(t)},i=function(t){if(void 0!==t&&"undefined"!==t)return u.parse(t)},s=function(t){t&&t.changed()};(h=function(e){function i(){if(!(amplify.store("__PSDATAVERSION__"+c._dictName)>=1)){var t=amplify.store("__PSKEYS__"+c._dictName),e=amplify.store("__PSAKEYS__"+c._dictName);p.each([t,e],function(t){p.each(t,function(t){amplify.store(t,u.stringify(amplify.store(t)))})}),amplify.store("__PSDATAVERSION__"+c._dictName,2)}}function s(){if(!(amplify.store("__PSDATAVERSION__"+c._dictName)>=n)){var t=amplify.store("__PSKEYS__"+c._dictName),e=amplify.store("__PSAKEYS__"+c._dictName);p.each([t,e],function(t){p.each(t,function(t){var e=!1;try{u.parse(amplify.store(c._dictName+t))}catch(t){e=!0}if(!e){var i=u.parse(amplify.store(c._dictName+t)),s=u.toJSONValue(i);amplify.store(c._dictName+t,s)}})}),amplify.store("__PSDATAVERSION__"+c._dictName,4)}}if(!p.isString(e))throw new Error("dictName must be a string");this._dictName=e,"session"==e?(this._dictName="",this._dict=a):this._dict=new r(e);var n=4;this.psKeys={},this.psKeyList=[],this.psaKeys={},this.psaKeyList=[],this.default_method="temporary",t.settings&&t.settings.public&&t.settings.public.persistent_session&&(this.default_method=t.settings.public.persistent_session.default_method);var c=this;return t.isClient&&t.startup(function(){var t;i(),s();var e=amplify.store("__PSKEYS__"+c._dictName);if("object"==typeof e&&void 0!==e.length)for(var a=0;a<e.length;a++)p.has(c._dict.keys,e[a])||(t=c.get(e[a]),c.set(e[a],t,!0,!1));var o=amplify.store("__PSAKEYS__"+c._dictName);if("object"==typeof o&&void 0!==o.length)for(var a=0;a<o.length;a++)p.has(c._dict.keys,o[a])||(t=c.get(o[a]),c.setAuth(o[a],t,!0,!0))}),o.autorun(function(){t.userId&&(t.userId()||c.clearAuth())}),this}).prototype.store=function t(e,i,s){if(this.psKeyList=amplify.store("__PSKEYS__"+this._dictName)||[],this.psaKeyList=amplify.store("__PSAKEYS__"+this._dictName)||[],"get"==e)return amplify.store(this._dictName+i);this.psKeyList=p.without(this.psKeyList,i),this.psaKeyList=p.without(this.psaKeyList,i),delete this.psKeys[i],delete this.psaKeys[i],void 0===s||null===s||"temporary"==e?s=null:"persistent"==e?(this.psKeys[i]=u.toJSONValue(s),this.psKeyList=p.union(this.psKeyList,[i])):"authenticated"==e&&(this.psaKeys[i]=u.toJSONValue(s),this.psaKeyList=p.union(this.psaKeyList,[i])),amplify.store("__PSKEYS__",this.psKeyList),amplify.store("__PSAKEYS__",this.psaKeyList),amplify.store(this._dictName+i,u.toJSONValue(s))},h.prototype.old_get=function(){return this._dict.get.apply(this._dict,arguments)},h.prototype.get=function t(e){var i=this.old_get(e),s;return void 0!==this.store("get",e)&&(s=u.fromJSONValue(this.store("get",e))),void 0===s||null===s?i:s},h.prototype.old_set=function(){return this._dict.set.apply(this._dict,arguments)},h.prototype.set=function t(e,i,s,a){if("object"!=typeof e||void 0!==i){var o=e,n="temporary";(s||void 0===s&&("persistent"==this.default_method||"authenticated"==this.default_method))&&(n=a||void 0===s&&void 0===a&&"authenticated"==this.default_method?"authenticated":"persistent"),this.store(n,o,i),this.old_set(o,i)}else this._setObject(e,s,a)},h.prototype.all=function t(){this._dict.allDeps&&this._dict.allDeps.depend();var e={};return p.each(this._dict.keys,function(t,s){e[s]=i(t)}),e},h.prototype._setObject=function t(e,i,s){var a=this;p.each(e,function(t,e){a.set(e,t,i,s)})},h.prototype._ensureKey=function t(e){var i=this._dict;e in i.keyDeps||(i.keyDeps[e]=new o.Dependency,i.keyValueDeps[e]={})},h.prototype.equals=function t(i,s){var a=null;if(Package.mongo&&(a=Package.mongo.Mongo.ObjectID),!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||void 0===s||s instanceof Date||a&&s instanceof a||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var n=e(s);if(o.active&&(this._ensureKey(i),p.has(this._dict.keyValueDeps[i],n)||(this._dict.keyValueDeps[i][n]=new o.Dependency),this._dict.keyValueDeps[i][n].depend())){var r=this;o.onInvalidate(function(){r._dict.keyValueDeps[i][n].hasDependents()||delete r._dict.keyValueDeps[i][n]})}var c=this.get(i);return u.equals(c,s)},h.prototype.setTemporary=function t(e,i){this.set(e,i,!1,!1)},h.prototype.setTemp=function t(e,i){this.set(e,i,!1,!1)},h.prototype.setPersistent=function t(e,i){this.set(e,i,!0,!1)},h.prototype.setAuth=function t(e,i){this.set(e,i,!0,!0)},h.prototype.makeTemp=function t(e){this.store("temporary",e)},h.prototype.makePersistent=function t(e){var i=this.get(e);this.store("persistent",e,i)},h.prototype.makeAuth=function t(e){var i=this.get(e);this.store("authenticated",e,i)},h.prototype.old_clear=function(){return this._dict.clear.apply(this._dict,arguments)},h.prototype.clear=function t(e,i){var a=this,o=a._dict.keys;if(void 0===e&&void 0===i?i=o:void 0!==e&&(i=[e]),p.isArray(i)){var n=i,i={};p.each(n,function(t){i[t]=o[t]})}p.each(i,function(t,e){a.set(e,void 0,!1,!1),s(a._dict.keyDeps[e]),a._dict.keyValueDeps[e]&&(s(a._dict.keyValueDeps[e][t]),s(a._dict.keyValueDeps[e].undefined)),delete a._dict.keys[e]}),a._dict.allDeps&&a._dict.allDeps.changed()},h.prototype.clearTemp=function t(){this.clear(void 0,p.keys(p.omit(this._dict.keys,this.psKeys,this.psaKeys)))},h.prototype.clearPersistent=function t(){this.clear(void 0,this.psKeys)},h.prototype.clearAuth=function t(){this.clear(void 0,this.psaKeys)},h.prototype.update=function t(e,i){var s,a;p.indexOf(this.psaKeyList,e)>=0&&(a=!0),(a||p.indexOf(this.psKeyList,e)>=0)&&(s=!0),this.set(e,i,s,a)},h.prototype.old_setDefault=function(){return this._dict.setDefault.apply(this._dict,arguments)},h.prototype.setDefault=function t(e,i,s,a){var o=this;p.isObject(e)?p.each(e,function(t,e){o.setDefault(e,t,s,a)}):void 0===this.get(e)&&this.set(e,i,s,a)},h.prototype.setDefaultTemp=function t(e,i){p.isObject(e)&&(i=void 0),this.setDefault(e,i,!1,!1)},h.prototype.setDefaultPersistent=function t(e,i){p.isObject(e)&&(i=void 0),this.setDefault(e,i,!0,!1)},h.prototype.setDefaultAuth=function t(e,i){p.isObject(e)&&(i=void 0),this.setDefault(e,i,!0,!0)};var a=p.clone(c);p.extend(c,new h("session"))}).call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var i in e)i in t||(t[i]=e[i])}(Package["u2622:persistent-session"]={},{PersistentSession:h})}();

!function(){var e=Package.meteor.Meteor,a=Package.meteor.global,o=Package.meteor.meteorEnv,n=Package.http.HTTP,t=Package.jquery.$,r=Package.jquery.jQuery,c=Package["momentjs:moment"].moment,i=Package.validatejs.validate,s=Package["u2622:persistent-session"].PersistentSession,l=Package["ohif:cornerstone"].cornerstone,g=Package["ohif:cornerstone"].cornerstoneMath,m=Package["ohif:cornerstone"].cornerstoneTools,d=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,P=Package["ohif:cornerstone"].dicomParser,k=Package.modules.meteorInstall,h=Package["babel-runtime"].meteorBabelHelpers,p=Package.promise.Promise,u=Package["ecmascript-runtime-client"].Symbol,f=Package["ecmascript-runtime-client"].Map,v=Package["ecmascript-runtime-client"].Set,y=Package.webapp.WebApp,x=Package.logging.Log,w=Package.deps.Tracker,M=Package.deps.Deps,I=Package.session.Session,S=Package["ddp-client"].DDP,b=Package.mongo.Mongo,j=Package.ui.Blaze,T=Package.ui.UI,C=Package.ui.Handlebars,z=Package.spacebars.Spacebars,B=Package["templating-runtime"].Template,D=Package.check.check,O=Package.check.Match,H=Package.underscore._,A=Package.random.Random,E=Package.ejson.EJSON,L=Package["launch-screen"].LaunchScreen,R=Package.htmljs.HTML,U=k({node_modules:{meteor:{"icr:xnat-roi-scaling":{client:{lib:{"rescaleImportedPolygons.js":function(e,a,o){function n(e,a){var o=l.saveImageIdToolState(e);if(void 0!==o&&void 0!==o.freehand){for(var n=o.freehand.data,r=!1,s=0;s<n.length;s++)n[s].toBeScaled&&(t(n[s],a),n[s].toBeScaled=!1,r=!0);if(r){l.restoreImageIdToolState(e,o);var g=c.viewerbase.viewportUtils.getActiveViewportElement();i.updateImage(g)}}}function t(e,a){switch(e.toBeScaled){case"AIM":break;case"RTSTRUCT":try{r(e,a)}catch(e){console.error(e.message)}break;default:console.error("Unrecognised scaling type: "+e.toBeScaled);break}}function r(e,a){var o=[a.rowCosines.x,a.rowCosines.y,a.rowCosines.z],n=[a.columnCosines.x,a.columnCosines.y,a.columnCosines.z],t=[a.imagePositionPatient.x,a.imagePositionPatient.y,a.imagePositionPatient.z],r=a.rowPixelSpacing,c=a.columnPixelSpacing,i={ix:o.indexOf(Math.max.apply(Math,o)),iy:n.indexOf(Math.max.apply(Math,n))},s={x:Math.pow(o[0],2)+Math.pow(o[1],2)+Math.pow(o[2],2),y:Math.pow(n[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)};if(s.x<.99||s.y<.99)throw Error("Direction cosines do not sum to 1 in quadrature. There is likely a mistake in the DICOM metadata.directionCosineMagnitudes: "+s.x+", "+s.y);for(var l=[void 0,n[i.ix],o[i.ix],void 0,o[i.iy],n[i.iy]],g=0;g<e.handles.length;g++){var m=[e.handles[g].x-t[0],e.handles[g].y-t[1],e.handles[g].z-t[2]];l[0]=m[i.ix],l[3]=m[i.iy];var d=(l[0]-l[1]*l[3]/l[5])/(l[2]*r*(1-l[1]*l[4]/(l[2]*l[5]))),P=(l[3]-l[4]*d*r)/(l[5]*c);e.handles[g].x=d,e.handles[g].y=P,e.handles[g].z=0}}o.export({rescaleImportedPolygons:function(){return n}});var c=void 0;o.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},0);var i=void 0;o.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){i=e}},1);var s=void 0;o.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){s=e}},2);var l=s.globalImageIdSpecificToolStateManager}}},"main.js":function(e,a,o){o.export({RoiScaler:function(){return t}});var n=void 0;o.watch(e("./client/lib/rescaleImportedPolygons.js"),{rescaleImportedPolygons:function(e){n=e}},0);var t={rescaleImportedPolygons:n}}}}}},{extensions:[".js",".json"]});U("./node_modules/meteor/icr:xnat-roi-scaling/client/lib/rescaleImportedPolygons.js");var _=U("./node_modules/meteor/icr:xnat-roi-scaling/main.js");"undefined"==typeof Package&&(Package={}),Package["icr:xnat-roi-scaling"]=_}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,a=Package.meteor.meteorEnv,n=Package["ohif:cornerstone"].cornerstone,i=Package["ohif:cornerstone"].cornerstoneMath,r=Package["ohif:cornerstone"].cornerstoneTools,o=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,s=Package["ohif:cornerstone"].dicomParser,c=Package.modules.meteorInstall,m=Package["babel-runtime"].meteorBabelHelpers,u=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,g=Package["ecmascript-runtime-client"].Map,f=Package["ecmascript-runtime-client"].Set,d=c({node_modules:{meteor:{"ohif:cornerstone-settings":{client:{"main.js":function(e){e("../imports/client")}},imports:{client:{"index.js":function(e,t,a){var n=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){n=e}},0),a.watch(e("./renderer.js"));var i=void 0;a.watch(e("./lib/classes/MetadataProvider"),{MetadataProvider:function(e){i=e}},1),n.cornerstone.MetadataProvider=i,n.cornerstone.metadataProvider=new i},"renderer.js":function(e,t,a){var n=void 0;a.watch(e("meteor/meteor"),{Meteor:function(e){n=e}},0);var i=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},1);var r="settings.public.ui.cornerstoneRenderer";i.cornerstone.renderer=i.utils.ObjectPath.get(n,r)||""},lib:{"parsingUtils.js":function(e,t,a){a.export({parsingUtils:function(){return i}});var n=void 0;a.watch(e("meteor/ohif:cornerstone"),{dicomParser:function(e){n=e}},0);var i={isValidDataSet:function(e){return e instanceof n.DataSet},attributeTag:function(e,t){if(this.isValidDataSet(e)&&t in e.elements){var a=e.elements[t];if(a&&4===a.length){var n=e.byteArrayParser.readUint16,i=e.byteArray,r=a.dataOffset;return"x"+("00000000"+(256*n(i,r)*256+n(i,r+2)).toString(16)).substr(-8)}}return null},multiValue:function(e,t,a){if(this.isValidDataSet(e)&&t in e.elements){var i=e.elements[t];if(i&&i.length>0){var r=n.readFixedString(e.byteArray,i.dataOffset,i.length);if("string"==typeof r&&r.length>0)return"function"!=typeof a&&(a=null),r.split("\\").map(function(e){return e=e.trim(),null!==a?a(e):e})}}return null},floatArray:function(e,t){return this.multiValue(e,t,parseFloat)}}},classes:{"MetadataProvider.js":function(e,t,a){function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e("babel-runtime/helpers/typeof")),r=n(e("babel-runtime/helpers/classCallCheck"));a.export({MetadataProvider:function(){return u}});var o=void 0;a.watch(e("meteor/ohif:cornerstone"),{cornerstoneMath:function(e){o=e}},0);var s=void 0;a.watch(e("../parsingUtils"),{parsingUtils:function(e){s=e}},1);var c=void 0;a.watch(e("meteor/icr:xnat-roi-scaling"),{RoiScaler:function(e){c=e}},2);var m="function",u=function(){function e(){(0,r.default)(this,e),Object.defineProperty(this,"metadataLookup",{configurable:!1,enumerable:!1,writable:!1,value:new g}),Object.defineProperty(this,"_provider",{configurable:!1,enumerable:!1,writable:!0,value:null})}return e.prototype.addMetadata=function(){function e(e,t){var a=t.instance,n=t.series,i=t.study,r=t.numImages,o={};o.study={accessionNumber:i.accessionNumber,patientId:i.patientId,studyInstanceUid:i.studyInstanceUid,studyDate:i.studyDate,studyTime:i.studyTime,studyDescription:i.studyDescription,institutionName:i.institutionName,patientHistory:i.patientHistory},o.series={seriesDescription:n.seriesDescription,seriesNumber:n.seriesNumber,seriesDate:n.seriesDate,seriesTime:n.seriesTime,modality:n.modality,seriesInstanceUid:n.seriesInstanceUid,numImages:r},o.instance=a,o.patient={name:i.patientName,id:i.patientId,birthDate:i.patientBirthDate,sex:i.patientSex,age:i.patientAge},o.imagePlane=this.getImagePlane(a),this.metadataLookup.set(e,o)}return e}(),e.prototype.getMetadata=function(){function e(e){return this.metadataLookup.get(e)}return e}(),e.prototype.addSpecificMetadata=function(){function e(e,t,a){var n={};n[t]=a;var i=this.metadataLookup.get(e);this.metadataLookup.set(e,Object.assign(i,n))}return e}(),e.prototype.getFromImage=function(){function e(e,t,a,n,i){var r=void 0;return null==(r=e.data?this.getFromDataSet(e.data,t,a):e.instance[n])?i:r}return e}(),e.prototype.getFromDataSet=function(){function e(e,t,a){if(e){var n=e[t];if(n)return n.call(e,a)}}return e}(),e.prototype.getFrameIncrementPointer=function(){function e(e){var t=e.data;console.log("getFrameIncrementPointer: dataSet:"),console.log(e);var a="";return s.isValidDataSet(t)?a={x00181063:"frameTime",x00181065:"frameTimeVector"}[s.attributeTag(t,"x00280009")]:e.instance&&(a=e.instance.frameIncrementPointer),a||""}return e}(),e.prototype.getFrameTimeVector=function(){function e(e){var t=e.data;return s.isValidDataSet(t)?s.floatArray(t,"x00181065"):e.instance.frameTimeVector}return e}(),e.prototype.getFrameTime=function(){function e(e){var t=e.data;return s.isValidDataSet(t)?t.floatString("x00181063",-1):e.instance.frameTime}return e}(),e.prototype.updateMetadata=function(){function e(e){var t=this.metadataLookup.get(e.imageId);t&&(t.patient.age=t.patient.age||this.getFromDataSet(e.data,"string","x00101010"),t.instance.rows=t.instance.rows||e.rows,t.instance.columns=t.instance.columns||e.columns,t.instance.sopClassUid=t.instance.sopClassUid||this.getFromDataSet(e.data,"string","x00080016"),t.instance.sopInstanceUid=t.instance.sopInstanceUid||this.getFromDataSet(e.data,"string","x00080018"),t.instance.pixelSpacing=t.instance.pixelSpacing||this.getFromDataSet(e.data,"string","x00280030"),t.instance.frameOfReferenceUID=t.instance.frameOfReferenceUID||this.getFromDataSet(e.data,"string","x00200052"),t.instance.imageOrientationPatient=t.instance.imageOrientationPatient||this.getFromDataSet(e.data,"string","x00200037"),t.instance.imagePositionPatient=t.instance.imagePositionPatient||this.getFromDataSet(e.data,"string","x00200032"),t.instance.sliceThickness=t.instance.sliceThickness||this.getFromDataSet(e.data,"string","x00180050"),t.instance.sliceLocation=t.instance.sliceLocation||this.getFromDataSet(e.data,"string","x00201041"),t.instance.tablePosition=t.instance.tablePosition||this.getFromDataSet(e.data,"string","x00189327"),t.instance.spacingBetweenSlices=t.instance.spacingBetweenSlices||this.getFromDataSet(e.data,"string","x00180088"),t.instance.lossyImageCompression=t.instance.lossyImageCompression||this.getFromDataSet(e.data,"string","x00282110"),t.instance.lossyImageCompressionRatio=t.instance.lossyImageCompressionRatio||this.getFromDataSet(e.data,"string","x00282112"),t.instance.frameIncrementPointer=t.instance.frameIncrementPointer||this.getFromDataSet(e.data,"string","x00280009"),t.instance.frameTime=t.instance.frameTime||this.getFromDataSet(e.data,"string","x00181063"),t.instance.frameTimeVector=t.instance.frameTimeVector||this.getFromDataSet(e.data,"string","x00181065"),!e.data&&!e.instance||t.instance.multiframeMetadata||(t.instance.multiframeMetadata=this.getMultiframeModuleMetadata(e)),t.imagePlane=t.imagePlane||this.getImagePlane(t.instance),c.rescaleImportedPolygons(e.imageId,t.imagePlane))}return e}(),e.prototype.getImagePlane=function(){function e(e){if(e.rows&&e.columns&&e.pixelSpacing&&e.frameOfReferenceUID&&e.imageOrientationPatient&&e.imagePositionPatient){var t=e.imageOrientationPatient.split("\\"),a=e.imagePositionPatient.split("\\"),n=1,i=1;if(e.pixelSpacing){var r=e.pixelSpacing.split("\\");i=parseFloat(r[0]),n=parseFloat(r[1])}return{frameOfReferenceUID:e.frameOfReferenceUID,rows:e.rows,columns:e.columns,rowCosines:new o.Vector3(parseFloat(t[0]),parseFloat(t[1]),parseFloat(t[2])),columnCosines:new o.Vector3(parseFloat(t[3]),parseFloat(t[4]),parseFloat(t[5])),imagePositionPatient:new o.Vector3(parseFloat(a[0]),parseFloat(a[1]),parseFloat(a[2])),rowPixelSpacing:i,columnPixelSpacing:n}}}return e}(),e.prototype.getMultiframeModuleMetadata=function(){function e(e){var t={isMultiframeImage:!1,frameIncrementPointer:null,numberOfFrames:0,frameTime:0,frameTimeVector:null,averageFrameRate:0},a=void 0,n=this.getFromImage(e,"intString","x00280008","numberOfFrames",-1);if(n>1){t.isMultiframeImage=!0,t.numberOfFrames=n;var i=this.getFrameIncrementPointer(e);if("frameTimeVector"===i){var r=this.getFrameTimeVector(e);r instanceof Array&&r.length>0&&(t.frameIncrementPointer=i,t.frameTimeVector=r,a=r.reduce(function(e,t){return e+t})/r.length,t.averageFrameRate=1e3/a)}else"frameTime"!==i&&""!==i||(e.instance&&(a=this.getFrameTime(e)),a>0&&(t.frameIncrementPointer=i,t.frameTime=a,t.averageFrameRate=1e3/a))}return t}return e}(),e.prototype.getProvider=function(){function e(){var e=this._provider;return(0,i.default)(this._provider)!==m&&(e=this.provider.bind(this),this._provider=e),e}return e}(),e.prototype.provider=function(){function e(e,t){"imagePlaneModule"===e&&(e="imagePlane");var a=this.metadataLookup.get(t);if(a)return a.hasOwnProperty(e)?a[e]:void 0}return e}(),e}()}}}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:cornerstone-settings/client/main.js");"undefined"==typeof Package&&(Package={}),Package["ohif:cornerstone-settings"]=d}();

!function(){var e=Package.meteor.Meteor,o=Package.meteor.global,n=Package.meteor.meteorEnv,t=Package.modules.meteorInstall,a=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,i=Package["ecmascript-runtime-client"].Map,r=Package["ecmascript-runtime-client"].Set,s=Package.webapp.WebApp,g=Package.logging.Log,u=Package.deps.Tracker,f=Package.deps.Deps,d=Package.session.Session,v=Package["ddp-client"].DDP,p=Package.mongo.Mongo,m=Package.ui.Blaze,k=Package.ui.UI,P=Package.ui.Handlebars,h=Package.spacebars.Spacebars,w=Package["templating-runtime"].Template,y=Package.check.check,b=Package.check.Match,L=Package.underscore._,E=Package.jquery.$,R=Package.jquery.jQuery,T=Package.random.Random,j=Package.ejson.EJSON,S=Package["launch-screen"].LaunchScreen,I=Package.htmljs.HTML;t({node_modules:{meteor:{"ohif:log":{"main.js":function(e,o,n){var t=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){t=e}},0);var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1);var c=void 0;n.watch(e("loglevel"),{default:function(e){c=e}},2);var l=t.isProduction?"ERROR":"TRACE";a.log=c.getLogger("OHIF"),a.log.setLevel(l);var r=new i;a.log.time=function(e){var o=void 0===e?"default":e;r.set(o,(new Date).getTime())},a.log.timeEnd=function(e){var o=void 0===e?"default":e,n=(new Date).getTime(),t=r.get(o)||n;r.delete(o);var c=n-t;a.log.info(o+": "+c+"ms")}},node_modules:{loglevel:{"package.json":function(e,o){o.name="loglevel",o.version="1.4.1",o.main="lib/loglevel"},lib:{"loglevel.js":function(e,o,n){!function(e,o){"use strict";"function"==typeof define&&define.amd?define(o):"object"==typeof n&&n.exports?n.exports=o():e.log=o()}(this,function(){"use strict";function e(e){return typeof console!==i&&(void 0!==console[e]?o(console,e):void 0!==console.log?o(console,"log"):l)}function o(e,o){var n=e[o];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(o){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,o,n){return function(){typeof console!==i&&(t.call(this,o,n),this[e].apply(this,arguments))}}function t(e,o){for(var n=0;n<r.length;n++){var t=r[n];this[t]=n<e?l:this.methodFactory(t,e,o)}}function a(o,t,a){return e(o)||n.apply(this,arguments)}function c(e,o,n){function c(e){var o=(r[e]||"silent").toUpperCase();try{return void(window.localStorage[u]=o)}catch(e){}try{window.document.cookie=encodeURIComponent(u)+"="+o+";"}catch(e){}}function l(){var e;try{e=window.localStorage[u]}catch(e){}if(typeof e===i)try{var o=window.document.cookie,n=o.indexOf(encodeURIComponent(u)+"=");n&&(e=/^([^;]+)/.exec(o.slice(n))[1])}catch(e){}return void 0===s.levels[e]&&(e=void 0),e}var s=this,g,u="loglevel";e&&(u+=":"+e),s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=n||a,s.getLevel=function(){return g},s.setLevel=function(o,n){if("string"==typeof o&&void 0!==s.levels[o.toUpperCase()]&&(o=s.levels[o.toUpperCase()]),!("number"==typeof o&&o>=0&&o<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+o;if(g=o,!1!==n&&c(o),t.call(s,o,e),typeof console===i&&o<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){l()||s.setLevel(e,!1)},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var f=l();null==f&&(f=null==o?"WARN":o),s.setLevel(f,!1)}var l=function(){},i="undefined",r=["trace","debug","info","warn","error"],s=new c,g={};s.getLogger=function e(o){if("string"!=typeof o||""===o)throw new TypeError("You must supply a name when creating a logger.");var n=g[o];return n||(n=g[o]=new c(o,s.getLevel(),s.methodFactory)),n};var u=typeof window!==i?window.log:void 0;return s.noConflict=function(){return typeof window!==i&&window.log===s&&(window.log=u),s},s})}}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:log/main.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:log"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["reactive-var"].ReactiveVar,r=Package.modules.meteorInstall,i=Package["babel-runtime"].meteorBabelHelpers,a=Package.promise.Promise,c=Package["ecmascript-runtime-client"].Symbol,u=Package["ecmascript-runtime-client"].Map,s=Package["ecmascript-runtime-client"].Set,f=r({node_modules:{meteor:{"ohif:commands":{"main.js":function(t,e,n){n.export({context:function(){return a},commands:function(){return c}});var o=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){o=t}},0);var r=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){r=t}},1);var i=void 0;n.watch(t("meteor/ohif:commands/client/classes/CommandsManager"),{CommandsManager:function(t){i=t}},2);var a=new o(null);r.context=a;var c=new i(a);r.commands=c},client:{classes:{"CommandsManager.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var r=o(t("babel-runtime/helpers/typeof")),i=o(t("babel-runtime/helpers/classCallCheck"));n.export({CommandsManager:function(){return s}});var a=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){a=t}},0);var c=void 0;n.watch(t("meteor/underscore"),{_:function(t){c=t}},1);var u=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){u=t}},2);var s=function(){function t(){(0,i.default)(this,t),this.contexts={},this.last=new a("")}return t.prototype.getContext=function(){function t(t){var e=this.contexts[t];return e||u.log.warn('No context found with name "'+t+'"')}return t}(),t.prototype.getCurrentContext=function(){function t(){var t=u.context.get();return t?this.getContext(t):u.log.warn("There is no selected context")}return t}(),t.prototype.createContext=function(){function t(t){if(t)return this.contexts[t]?this.clear(t):void(this.contexts[t]={})}return t}(),t.prototype.set=function(){function t(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("object"===(void 0===e?"undefined":(0,r.default)(e))){var o=this.getContext(t);o&&(n||this.clear(t),Object.keys(e).forEach(function(t){return o[t]=e[t]}))}}return t}(),t.prototype.register=function(){function t(t,e,n){if("object"===(void 0===n?"undefined":(0,r.default)(n))){var o=this.getContext(t);o&&(o[e]=n)}}return t}(),t.prototype.setDisabledFunction=function(){function t(t,e,n){if(e&&"function"==typeof n){var o=this.getContext(t);if(o){var r=o[e];if(!r)return u.log.warn('Trying to set a disabled function to a command "'+e+'" that was not yet defined');r.disabled=n}}}return t}(),t.prototype.clear=function(){function t(t){t&&(this.contexts[t]={})}return t}(),t.prototype.getDefinition=function(){function t(t){var e=this.getCurrentContext();if(e)return e[t]}return t}(),t.prototype.isDisabled=function(){function t(t){var e=this.getDefinition(t);if(!e)return!1;var n=e.disabled;return!(!c.isFunction(n)||!n())||!(c.isFunction(n)||!n)}return t}(),t.prototype.run=function(){function t(t){var e=this.getDefinition(t);if(!e)return u.log.warn('Command "'+t+'" not found in current context');var n=e.action,o=e.params;if(!this.isDisabled(t)){if("function"!=typeof n)return u.log.warn('No action was defined for command "'+t+'"');var r=n(o);return this.last.get()===t?this.last.dep.changed():this.last.set(t),r}}return t}(),t}()}}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:commands/main.js");"undefined"==typeof Package&&(Package={}),Package["ohif:commands"]=f}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["templating-runtime"].Template,r=Package["reactive-var"].ReactiveVar,i=Package.session.Session,a=Package["iron:router"].Router,s=Package["iron:router"].RouteController,u=Package["u2622:persistent-session"].PersistentSession,c=Package.modules.meteorInstall,l=Package["babel-runtime"].meteorBabelHelpers,f=Package.promise.Promise,h=Package["iron:core"].Iron,p=Package["ecmascript-runtime-client"].Symbol,m=Package["ecmascript-runtime-client"].Map,d=Package["ecmascript-runtime-client"].Set,y=Package.blaze.Blaze,k=Package.blaze.UI,v=Package.blaze.Handlebars,g=Package.spacebars.Spacebars,b=Package.htmljs.HTML,w=c({node_modules:{meteor:{"ohif:hotkeys":{"main.js":function(e,t,n){n.export({hotkeys:function(){return i}});var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/ohif:hotkeys/client/classes/HotkeysManager"),{HotkeysManager:function(e){r=e}},1),n.watch(e("jquery.hotkeys"));var i=new r;o.hotkeys=i},client:{"index.js":function(e,t,n){n.watch(e("./components")),n.watch(e("./lib"))},classes:{"HotkeysContext.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var r=o(e("babel-runtime/helpers/typeof")),i=o(e("babel-runtime/helpers/classCallCheck"));n.export({HotkeysContext:function(){return s}});var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},0);var s=function(){function e(t,n,o){(0,i.default)(this,e),this.name=t,this.definitions=Object.assign({},n),this.enabled=o}return e.prototype.extend=function(){function e(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===(void 0===t?"undefined":(0,r.default)(t))&&(this.definitions=Object.assign({},t),Object.keys(t).forEach(function(n){var o=t[n];e.unregister(n),o&&e.register(n,o),e.definitions[n]=o}))}return e}(),e.prototype.register=function(){function e(e,t){var n=this;if(t){if(!e)return a.log.warn('No command was defined for hotkey "'+t+'"');var o="keydown.hotkey."+this.name+"."+e,r=function(t){return $(document).bind(o,t,function(t){n.enabled.get()&&(a.commands.run(e),t.preventDefault())})};t instanceof Array?t.forEach(function(e){return r(e)}):r(t)}}return e}(),e.prototype.unregister=function(){function e(e){var t="keydown.hotkey."+this.name+"."+e;this.definitions[e]&&($(document).unbind(t),delete this.definitions[e])}return e}(),e.prototype.initialize=function(){function e(){var e=this;Object.keys(this.definitions).forEach(function(t){var n=e.definitions[t];e.register(t,n)})}return e}(),e.prototype.destroy=function(){function e(){$(document).unbind("keydown.hotkey."+this.name)}return e}(),e}()},"HotkeysManager.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var r=o(e("babel-runtime/helpers/classCallCheck"));n.export({HotkeysManager:function(){return h}});var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var s=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){s=e}},2);var u=void 0;n.watch(e("meteor/session"),{Session:function(e){u=e}},3);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},4);var l=void 0;n.watch(e("meteor/ohif:hotkeys/client/classes/HotkeysContext"),{HotkeysContext:function(e){l=e}},5);var h=function(){function e(){var t=this;(0,r.default)(this,e),this.contexts={},this.defaults={},this.currentContextName=null,this.enabled=new a(!0),this.retrieveFunction=null,this.storeFunction=null,this.changeObserver=new s.Dependency,s.autorun(function(){var e=c.context.get();s.nonreactive(function(){return t.switchToContext(e)})})}return e.prototype.setRetrieveFunction=function(){function e(e){this.retrieveFunction=e}return e}(),e.prototype.setStoreFunction=function(){function e(e){this.storeFunction=e}return e}(),e.prototype.store=function(){function e(e,t){var n=this,o="hotkeysDefinitions."+e;return new f(function(e,r){n.storeFunction?n.storeFunction.call(n,o,t).then(e).catch(r):i.userId()?c.user.setData(o,t).then(e).catch(r):(u.setPersistent(o,t),e())})}return e}(),e.prototype.retrieve=function(){function e(e){var t=this,n="hotkeysDefinitions."+e;return new f(function(o,r){if(t.retrieveFunction)t.retrieveFunction(e).then(o).catch(r);else if(c.user)try{o(c.user.getData(n))}catch(e){r(e)}else o(u.get(n))})}return e}(),e.prototype.disable=function(){function e(){this.enabled.set(!1)}return e}(),e.prototype.enable=function(){function e(){this.enabled.set(!0)}return e}(),e.prototype.getContext=function(){function e(e){return this.contexts[e]}return e}(),e.prototype.getCurrentContext=function(){function e(){return this.getContext(this.currentContextName)}return e}(),e.prototype.load=function(){function e(e){var t=this;return new f(function(n,o){var r=t.getContext(e);if(!r)return o();t.retrieve(e).then(function(i){var a=i||t.defaults[e];if(!a)return t.changeObserver.changed(),o();r.destroy(),r.definitions=a,r.initialize(),t.changeObserver.changed(),n(a)}).catch(o)})}return e}(),e.prototype.set=function(){function e(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.enabled,r=new l(e,t,o),i=this.getCurrentContext();i&&i.name===e&&(i.destroy(),r.initialize()),this.contexts[e]=r,n&&(this.defaults[e]=t)}return e}(),e.prototype.register=function(){function e(e,t,n){if(t&&n){var o=this.getContext(e);o||this.set(e,{}),o.register(t,n)}}return e}(),e.prototype.unsetContext=function(){function e(e){e===this.currentContextName&&this.getCurrentContext().destroy(),delete this.contexts[e],delete this.defaults[e]}return e}(),e.prototype.resetDefauls=function(){function e(e){var t=this.getContext(e),n=this.defaults[e];if(t&&n)return t.extend(n),this.store(e,n).then(this.changeObserver.changed)}return e}(),e.prototype.switchToContext=function(){function e(e){var t=this.getCurrentContext();t&&t.destroy();var n=this.contexts[e];n&&(this.currentContextName=e,n.initialize(),this.load(e).catch(function(){}))}return e}(),e}()}},components:{"confirmReplacementPopover.html":function(e,t,n){n.exports=e("./template.confirmReplacementPopover.js")},"template.confirmReplacementPopover.js":function(){o.__checkName("hotkeysConfirmReplacementPopover"),o.hotkeysConfirmReplacementPopover=new o("Template.hotkeysConfirmReplacementPopover",function(){var e=this;return y._TemplateWith(function(){return g.dataMustache(e.lookup("extend"),e.lookup("."),g.kw({confirmLabel:"Yes",cancelLabel:"No",confirmClass:"btn-danger"}))},function(){return g.include(e.lookupTemplate("popoverForm"),function(){return["\n        ",b.P(b.B(y.View("lookup:..conflictedFunctionName",function(){return g.mustache(g.dot(e.lookup("."),"conflictedFunctionName"))}))," is already using the ",b.B(y.View("lookup:..hotkeyCombination",function(){return g.mustache(g.dot(e.lookup("."),"hotkeyCombination"))}))," shortcut."),"\n        ",b.P("Do you want to use the shortcut to the ",b.B(y.View("lookup:..newFunctionName",function(){return g.mustache(g.dot(e.lookup("."),"newFunctionName"))}))," function instead?"),"\n    "]})})})},"form.html":function(e,t,n){n.exports=e("./template.form.js")},"template.form.js":function(){o.__checkName("hotkeysForm"),o.hotkeysForm=new o("Template.hotkeysForm",function(){var e=this;return y._TemplateWith(function(){return g.dataMustache(e.lookup("extend"),e.lookup("."),g.kw({api:g.dot(e.lookup("instance"),"api"),class:"form-themed"}))},function(){return g.include(e.lookupTemplate("form"),function(){return["\n        ",b.DIV({class:"form-content"},"\n            ",y.Let({lists:function(){return g.call(e.lookup("getHotkeyInputInformationLists"))}},function(){return["\n                ",b.DIV({class:"row"},"\n                    ",b.DIV({class:"col-lg-6 hotkeys-left"},"\n                        ",y._TemplateWith(function(){return{inputs:g.call(g.dot(e.lookup("lists"),"left"))}},function(){return g.include(e.lookupTemplate("hotkeysFormTable"))}),"\n                    "),"\n                    ",b.DIV({class:"col-lg-6 hotkeys-right"},"\n                        ",y._TemplateWith(function(){return{inputs:g.call(g.dot(e.lookup("lists"),"right"))}},function(){return g.include(e.lookupTemplate("hotkeysFormTable"))}),"\n                    "),"\n                "),"\n            "]}),"\n        "),"\n        ",b.DIV({class:"form-buttons clearfix"},"\n            ",y._TemplateWith(function(){return{class:g.call("btn btn-danger pull-left"),action:g.call("resetDefaults")}},function(){return g.include(e.lookupTemplate("button"),function(){return"Reset to Defaults"})}),"\n            ",y._TemplateWith(function(){return{class:g.call("btn btn-primary pull-right"),action:g.call("save")}},function(){return g.include(e.lookupTemplate("button"),function(){return"Save"})}),"\n            ",y._TemplateWith(function(){return{class:g.call("btn btn-secondary pull-right m-r-1"),tagAttributes:g.call(g.dataMustache(e.lookup("extend"),"",g.kw({"data-dismiss":"modal"})))}},function(){return g.include(e.lookupTemplate("button"),function(){return"Close"})}),"\n        "),"\n    "]})})})},"form.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){r=e}},1);var i=void 0;n.watch(e("meteor/jquery"),{$:function(e){i=e}},2);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4),o.hotkeysForm.onCreated(function(){var e=o.instance(),t=e.data.contextName;e.api={save:function(){var n=e.$("form").first().data("component").value(),o=s.hotkeys.store(t,n);return o.then(function(){var n="The keyboard shortcut preferences were successfully saved.";s.ui.notifications.success({text:n}),s.hotkeys.load(t).then(function(t){return e.hotkeysDefinitions.set(t)})}),o},resetDefaults:function(){var e={class:"themed",title:"Reset Keyboard Shortcuts",message:"Are you sure you want to reset all the shortcuts to their defaults?"};return s.ui.showDialog("dialogConfirm",e).then(function(){return s.hotkeys.resetDefauls(t)})}};var n=function(e,t){return a.range(e,t+1)};e.allowedKeys=a.union([8,13,27,32,46],[12,106,107,109,110,111],n(219,221),n(186,191),n(112,130),n(33,40),n(48,57),n(65,90)),e.updateInputText=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=i(t.currentTarget),r=e.getKeysPressedArray(t);if(n){var a=jQuery.hotkeys.specialKeys[t.which]||String.fromCharCode(t.keyCode)||t.key;r.push(a.toUpperCase())}o.val(r.join("+"))},e.getKeysPressedArray=function(e){var t=[];return e.ctrlKey&&!e.altKey&&t.push("CTRL"),e.shiftKey&&!e.altKey&&t.push("SHIFT"),e.altKey&&!e.ctrlKey&&t.push("ALT"),t},e.getConflictingCommand=function(t,n){var o=e.$("form").first().data("component").value(),r="";return a.each(o,function(e,o){e&&e===n&&o!==t&&(r=o)}),r},e.disallowedCombinations={"":[],ALT:["SPACE"],SHIFT:[],CTRL:["F4","F5","F11","W","R","T","O","P","A","D","F","G","H","J","L","Z","X","C","V","B","N","PAGEDOWN","PAGEUP"],"CTRL+SHIFT":["Q","W","R","T","P","A","H","V","B","N"]};var u=s.hotkeys.getContext(t)||{};e.hotkeysDefinitions=new r(u.definitions),s.hotkeys.load(t).then(function(t){return e.hotkeysDefinitions.set(t)})}),o.hotkeysForm.events({"keydown .hotkey":function(e,t){27===e.keyCode&&e.stopPropagation(),t.allowedKeys.indexOf(e.keyCode)>-1?(t.updateInputText(e,!0),i(e.currentTarget).trigger("hotkeyChange")):t.updateInputText(e),e.preventDefault()},"hotkeyChange .hotkey":function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i(e.currentTarget),r=o.val(),a=r.split("+"),u=a.pop(),c=a.join("+"),l=["CTRL","ALT","SHIFT"].indexOf(u)>-1,f=o.data("component"),h=t.getConflictingCommand(this.key,r);if(l)f.error("It's not possible to define only modifier keys (CTRL, ALT and SHIFT) as a shortcut"),o.val("").focus();else if(t.disallowedCombinations[c].indexOf(u)>-1)f.error('The "'+r+'" shortcut combination is not allowed'),o.val("").focus();else if(h){if(n.blurTrigger)return;f.error(!1),f.toggleTooltip(!1);var p=o.closest(".hotkeys-left").length?"right":"left",m=s.commands.getContext(t.data.contextName),d={conflictedFunctionName:m[h].name,newFunctionName:m[this.key].name,hotkeyCombination:r},y={event:e,placement:p},k=t.$("form").first().data("component").item(h);f.state("error",!0),k.state("error",!0);var v=function(){t.popoverVisible=!1,f.state("error",!1),k.state("error",!1)},g="hotkeysConfirmReplacementPopover";t.popoverVisible=!0,s.ui.showPopover(g,d,y).then(function(){v(),f.value(r),k.value(""),o.blur()}).catch(function(){v(),o.val("").focus()})}else f.error(!1),n.blurTrigger||o.blur()},"blur .hotkey":function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i(e.currentTarget).trigger("hotkeyChange",{blurTrigger:!0})},"keyup .hotkey":function(e,t){t.popoverVisible||t.updateInputText(e)}}),o.hotkeysForm.helpers({getHotkeyInputInformationLists:function(){s.hotkeys.changeObserver.depend();var e=o.instance(),t=e.data.contextName,n=e.hotkeysDefinitions.get(),r=s.commands.getContext(t);if(!n||!r)return{};var i=[];return Object.keys(s.hotkeys.defaults[t]||{}).forEach(function(e){var t=r[e];t&&i.push({key:e,label:t.name,value:n[e]||""})}),{left:i.splice(0,Math.ceil(i.length/2)),right:i}}})},"formTable.html":function(e,t,n){n.exports=e("./template.formTable.js")},"template.formTable.js":function(){o.__checkName("hotkeysFormTable"),o.hotkeysFormTable=new o("Template.hotkeysFormTable",function(){var e=this;return b.TABLE({class:"full-width"},"\n        ",b.THEAD("\n            ",b.TR("\n                ",b.TH({class:"text-right p-r-1"},"Function"),"\n                ",b.TH({class:"text-center"},"Shortcut"),"\n            "),"\n        "),"\n        ",b.TBODY("\n            ",y.Each(function(){return{_sequence:g.call(g.dot(e.lookup("."),"inputs")),_variable:"input"}},function(){return["\n                ",b.TR("\n                    ",b.TD({class:"text-right p-r-1"},y.View("lookup:getLabel",function(){return g.mustache(e.lookup("getLabel"),e.lookup("input"))})),"\n                    ",b.TD({width:"200"},y._TemplateWith(function(){return g.dataMustache(e.lookup("extend"),g.kw({class:"hotkey text-center",key:g.dot(e.lookup("input"),"key"),value:g.dot(e.lookup("input"),"value")}))},function(){return g.include(e.lookupTemplate("inputText"))})),"\n                "),"\n            "]}),"\n        "),"\n    ")})},"formTable.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},1),o.hotkeysFormTable.helpers({getLabel:function(e){var t=e.label;if(0===e.key.indexOf("WLPreset")){var n=parseInt(e.key.replace("WLPreset","")),o=r.viewer.wlPresets[n];o.id&&(t+=" ("+o.id+")")}return t}})},"index.js":function(e,t,n){n.watch(e("./confirmReplacementPopover.html")),n.watch(e("./form.html")),n.watch(e("./form.js")),n.watch(e("./formTable.html")),n.watch(e("./formTable.js"))}},lib:{"index.js":function(e,t,n){n.watch(e("./routes"))},"routes.js":function(e,t,n){var o=void 0;n.watch(e("meteor/iron:router"),{Router:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},1);var i=void 0;n.watch(e("meteor/ohif:hotkeys"),{hotkeys:function(e){i=e}},2),o.onBeforeAction(function(){var e=r.get("lastRoute"),t=this.router.current().route.getName();t!==e&&(i.switchToContext(null),r.set("lastRoute",t)),this.next()})}}},node_modules:{"jquery.hotkeys":{"package.json":function(e,t){t.name="jquery.hotkeys",t.version="0.1.0",t.main="jquery.hotkeys.js"},"jquery.hotkeys.js":function(){!function(e){function t(t){if("string"==typeof t.data&&(t.data={keys:t.data}),t.data&&t.data.keys&&"string"==typeof t.data.keys){var n=t.handler,o=t.data.keys.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!(e.hotkeys.options.filterInputAcceptingElements&&e.hotkeys.textInputTypes.test(t.target.nodeName)||e.hotkeys.options.filterContentEditable&&e(t.target).attr("contenteditable")||e.hotkeys.options.filterTextInputs&&e.inArray(t.target.type,e.hotkeys.textAcceptingInputTypes)>-1)){var r="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],i=String.fromCharCode(t.which).toLowerCase(),a="",s={};e.each(["alt","ctrl","shift"],function(e,n){t[n+"Key"]&&r!==n&&(a+=n+"+")}),t.metaKey&&!t.ctrlKey&&"meta"!==r&&(a+="meta+"),t.metaKey&&"meta"!==r&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),r?s[a+r]=!0:(s[a+i]=!0,s[a+e.hotkeys.shiftNums[i]]=!0,"shift+"===a&&(s[e.hotkeys.shiftNums[i]]=!0));for(var u=0,c=o.length;u<c;u++)if(s[o[u]])return n.apply(this,arguments)}}}}e.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery||this.jQuery||window.jQuery)}}}}}}},{extensions:[".js",".json",".html"]}),T=w("./node_modules/meteor/ohif:hotkeys/main.js");w("./node_modules/meteor/ohif:hotkeys/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:hotkeys"]=T}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package.http.HTTP,a=Package.jquery.$,o=Package.jquery.jQuery,r=Package["momentjs:moment"].moment,s=Package.validatejs.validate,c=Package["u2622:persistent-session"].PersistentSession,u=Package["ohif:cornerstone"].cornerstone,l=Package["ohif:cornerstone"].cornerstoneMath,d=Package["ohif:cornerstone"].cornerstoneTools,m=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,p=Package["ohif:cornerstone"].dicomParser,f=Package.modules.meteorInstall,g=Package["babel-runtime"].meteorBabelHelpers,x=Package.promise.Promise,h=Package["ecmascript-runtime-client"].Symbol,v=Package["ecmascript-runtime-client"].Map,S=Package["ecmascript-runtime-client"].Set,y=Package.webapp.WebApp,w=Package.logging.Log,I=Package.deps.Tracker,D=Package.deps.Deps,T=Package.session.Session,b=Package["ddp-client"].DDP,P=Package.mongo.Mongo,C=Package.ui.Blaze,k=Package.ui.UI,R=Package.ui.Handlebars,V=Package.spacebars.Spacebars,M=Package["templating-runtime"].Template,O=Package.check.check,A=Package.check.Match,L=Package.underscore._,E=Package.random.Random,q=Package.ejson.EJSON,N=Package["launch-screen"].LaunchScreen,F=Package.htmljs.HTML,B,U,_=f({node_modules:{meteor:{"ohif:viewerbase":{client:{components:{basic:{layout:{"template.layout.js":function(){M.__checkName("layout"),M.layout=new M("Template.layout",function(){var e=this;return V.include(e.lookupTemplate("yield"))})}},loadingText:{"template.loadingText.js":function(){M.__checkName("loadingText"),M.loadingText=new M("Template.loadingText",function(){var e=this;return F.Raw('<div class="loadingTextDiv">\n        Loading... <i class="fa fa-spin fa-circle-o-notch fa-fw"></i>\n    </div>')})}},errorText:{"template.errorText.js":function(){M.__checkName("errorText"),M.errorText=new M("Template.errorText",function(){var e=this;return F.DIV({class:"errorTextDiv"},"\n        Error: ",C.View("lookup:error",function(){return V.mustache(e.lookup("error"))}),"\n    ")})}},removableBackdrop:{"template.removableBackdrop.js":function(){M.__checkName("removableBackdrop"),M.removableBackdrop=new M("Template.removableBackdrop",function(){var e=this;return F.Raw('<div class="removableBackdrop noselect" oncontextmenu="return false;" unselectable="on" onselectstart="return false;">\n    </div>')})}},aboutModal:{"template.aboutModal.js":function(){M.__checkName("aboutModal"),M.aboutModal=new M("Template.aboutModal",function(){var e=this;return C._TemplateWith(function(){return V.dataMustache(e.lookup("extend"),e.lookup("."),V.kw({id:"aboutModal",dialogClass:"modal-lg",title:"About"}))},function(){return V.include(e.lookupTemplate("dialogSimple"),function(){return["\n        ",F.A({target:"_blank",class:"forkOnGithub",href:function(){return V.mustache(e.lookup("githubUrl"))}},"\n            ",F.IMG({src:"https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67",alt:"Fork me on GitHub","data-canonical-src":"https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"}),"\n        "),"\n        ",F.DIV({class:"logo p-x-3 p-y-3 clearfix"},"\n            ",F.SVG({class:"logoImage pull-left"},"\n                ",F.USE({"xlink:href":function(){return V.mustache(e.lookup("absoluteUrl"),"packages/ohif_viewerbase/assets/icons.svg#icon-ohif-logo")}}),"\n            "),"\n            ",F.A({class:"logoText pull-left",target:"_blank",href:"http://ohif.org"},"\n                Open Health Imaging Foundation DICOM Viewer\n            "),"\n        "),"\n        ",F.DIV({class:"p-x-1 p-y-1 m-y-2"},"\n            ",F.A({class:"btn btn-default inline",target:"_blank",href:"https://groups.google.com/forum/#!forum/cornerstone-platform"},"\n                Visit the forum\n            "),"\n            ",F.A({class:"btn btn-default inline",target:"_blank",href:"https://github.com/OHIF/Viewers/issues"},"\n                Report an issue\n            "),"\n        "),"\n        ",F.DIV({class:"p-y-1 p-x-1"},"\n            ",F.H3("Version Information"),"\n            ",F.TABLE({class:"table table-responsive"},"\n                ",F.THEAD("\n                    ",F.TR("\n                        ",F.TH("Name"),"\n                        ",F.TH("Value"),"\n                    "),"\n                "),"\n                ",F.TBODY("\n                    ",F.TR("\n                        ",F.TD("Repository URL"),"\n                        ",F.TD("\n                            ",F.A({target:"_blank",href:function(){return V.mustache(e.lookup("githubUrl"))}},C.View("lookup:githubUrl",function(){return V.mustache(e.lookup("githubUrl"))})),"\n                        "),"\n                    "),"\n                    ",F.TR("\n                        ",F.TD("Last Commit Hash"),"\n                        ",F.TD("\n                            ",F.A({target:"_blank",href:function(){return[V.mustache(e.lookup("githubUrl")),"/commit/",V.mustache(e.lookup("gitRev"),"long")]}},"\n                            ",C.View("lookup:gitRev",function(){return V.mustache(e.lookup("gitRev"),"long")}),"\n                            "),"\n                        "),"\n                    "),"\n                    ",F.TR("\n                        ",F.TD("Latest Tag"),"\n                        ",F.TD("\n                            ",F.A({target:"_blank",href:function(){return[V.mustache(e.lookup("githubUrl")),"/releases/tag/",V.mustache(e.lookup("gitRev"),"tag")]}},"\n                            ",C.View("lookup:gitRev",function(){return V.mustache(e.lookup("gitRev"),"tag")}),"\n                            "),"\n                        "),"\n                    "),"\n                    ",F.TR("\n                        ",F.TD("Branch"),"\n                        ",F.TD("\n                            ",F.A({target:"_blank",href:function(){return[V.mustache(e.lookup("githubUrl")),"/tree/",V.mustache(e.lookup("gitRev"),"branch")]}},"\n                                ",C.View("lookup:gitRev",function(){return V.mustache(e.lookup("gitRev"),"branch")}),"\n                            "),"\n                        "),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    "]})})})},"aboutModal.js":function(){M.aboutModal.helpers({githubUrl:function(){return"https://github.com/OHIF/Viewers"}})}}},studyBrowser:{studyBrowser:{"template.studyBrowser.js":function(){M.__checkName("studyBrowser"),M.studyBrowser=new M("Template.studyBrowser",function(){var e=this;return F.DIV({class:"studyBrowser"},"\n        ",F.DIV({class:"scrollableStudyThumbnails"},"\n            ",C.Each(function(){return{_sequence:V.call(e.lookup("studies")),_variable:"study"}},function(){return["\n                ",C.Each(function(){return{_sequence:V.dataMustache(e.lookup("sort"),V.dataMustache(e.lookup("studyThumbnails"),e.lookup("study")),e.lookup("thumbnailSortBy"),e.lookup("thumbnailSortType")),_variable:"thumbnail"}},function(){return["\n                    ",C._TemplateWith(function(){return{thumbnail:V.call(e.lookup("thumbnail"))}},function(){return V.include(e.lookupTemplate("thumbnailEntry"))}),"\n                "]}),"\n            "]}),"\n        "),"\n    ")})},"studyBrowser.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1),i.studyBrowser.helpers({studies:function(){return a.viewer.Studies.findAllBy({selected:!0})}})}},thumbnailEntry:{"template.thumbnailEntry.js":function(){M.__checkName("thumbnailEntry"),M.thumbnailEntry=new M("Template.thumbnailEntry",function(){var e=this;return C.Let({stack:function(){return V.call(V.dot(e.lookup("."),"thumbnail","stack"))}},function(){return["\n        ",F.DIV({class:function(){return["thumbnailEntry noselect m-t-1 m-b-2 ",V.mustache(e.lookup("draggableClass"))," ",C.If(function(){return V.dataMustache(e.lookup("isDisplaySetActive"),V.dot(e.lookup("stack"),"displaySetInstanceUid"),e.lookup("viewportIndex"))},function(){return"active"})]}},"\n            ",F.DIV({class:"p-x-1"},"\n                ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."))},function(){return V.include(e.lookupTemplate("imageThumbnail"))}),"\n            "),"\n            ",F.DIV({class:function(){return["seriesDetails flex-h m-x-1 ",C.Unless(function(){return V.call(V.dot(e.lookup("stack"),"seriesDescription"))},function(){return"info-only"})]}},"\n                ",F.DIV({class:"seriesDescription flex-grow"},"\n                    ",C.View("lookup:stack.seriesDescription",function(){return V.mustache(V.dot(e.lookup("stack"),"seriesDescription"))}),"\n                "),"\n                ",F.DIV({class:"seriesInformation"},"\n                    ",F.DIV({class:"item item-series clearfix"},"\n                        ",F.DIV({class:"icon"},"S:"),"\n                        ",F.DIV({class:"value"},C.View("lookup:stack.seriesNumber",function(){return V.mustache(V.dot(e.lookup("stack"),"seriesNumber"))})),"\n                    "),"\n                    ",C.Unless(function(){return V.dataMustache(e.lookup("isUndefined"),e.lookup("instanceNumber"))},function(){return["\n                        ",F.DIV({class:"item item-series clearfix"},"\n                            ",F.DIV({class:"icon"},"I:"),"\n                            ",F.DIV({class:"value"},C.View("lookup:instanceNumber",function(){return V.mustache(e.lookup("instanceNumber"))})),"\n                        "),"\n                    "]}),"\n                    ",F.DIV({class:"item item-frames clearfix"},"\n                        ",F.DIV({class:"icon"},F.DIV()),"\n                        ",F.DIV({class:"value"},C.View("lookup:stack.numImageFrames",function(){return V.mustache(V.dot(e.lookup("stack"),"numImageFrames"))})),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    "]})})},"thumbnailEntry.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=void 0;n.watch(e("../../../lib/thumbnailDragHandlers"),{thumbnailDragHandlers:function(e){s=e}},4),i.thumbnailEntry.onCreated(function(){var e=i.instance(),t=a.isUndefined(e.data.viewportIndex);e.isDragAndDrop=t&&!1!==r.uiSettings.leftSidebarDragAndDrop}),i.thumbnailEntry.events({"mousedown .thumbnailEntry":function(e,t){var n=t.data.thumbnail.stack;t.isDragAndDrop&&0===e.button&&s.thumbnailDragStartHandler(e,n)},"touchstart .thumbnailEntry":function(e,t){var n=t.data.thumbnail.stack;t.isDragAndDrop&&s.thumbnailDragStartHandler(e,n)},"touchmove .thumbnailEntry":function(e,t){t.isDragAndDrop&&s.thumbnailDragHandler(e)},"touchend .thumbnailEntry":function(e,t){var n=t.data.thumbnail.stack;t.isDragAndDrop&&s.thumbnailDragEndHandler(e,n)},"click .thumbnailEntry":function(e,t){if(!t.isDragAndDrop){var n=t.data.thumbnail.stack,i=t.data.viewportIndex;a.isUndefined(i)&&(i=o.get("activeViewport")||0),r.viewerbase.layoutManager.rerenderViewportWithNewDisplaySet(i,n)}},"dblclick .thumbnailEntry":function(e,t){if(t.isDragAndDrop){var n=r.viewerbase.layoutManager.getNumberOfViewports(),i=o.get("activeViewport")||0;i>=n&&(i=n>0?n-1:0);var a=t.data.thumbnail.stack;r.viewerbase.layoutManager.rerenderViewportWithNewDisplaySet(i,a)}}}),i.thumbnailEntry.helpers({draggableClass:function(){return i.instance().isDragAndDrop?"draggable":""},instanceNumber:function(){var e=i.instance().data.thumbnail;if(e){var t=e.stack;if(t&&t.isMultiFrame){var n=t.images[0];if(n)return n.instanceNumber}}}})}},imageThumbnail:{"template.imageThumbnail.js":function(){M.__checkName("imageThumbnail"),M.imageThumbnail=new M("Template.imageThumbnail",function(){var e=this;return F.DIV({class:"imageThumbnail"},F.Raw('\n        <div class="imageThumbnailCanvas"></div>\n        '),F.DIV({class:"imageThumbnailLoadingIndicator thumbnailLoadingIndicator"},"\n            ",F.P("Loading ",C.View("lookup:percentComplete",function(){return V.mustache(e.lookup("percentComplete"))})),"\n        "),F.Raw('\n        <div class="imageThumbnailErrorLoadingIndicator thumbnailLoadingIndicator">\n            <p>Error</p>\n        </div>\n        '),C.If(function(){return V.call(e.lookup("showStackLoadingProgressBar"))},function(){return["\n            ",F.DIV({class:"imageThumbnailProgressBar"},"\n                ",F.DIV({class:"imageThumbnailProgressBarInner",style:function(){return["width:",V.mustache(e.lookup("stackPercentComplete")),"%"]}}),"\n            "),"\n        "]}),"\n    ")})},"imageThumbnail.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4);var c=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){c=e}},5),a.imageThumbnail.onCreated(function(){var e=a.instance();e.getThumbnailImageId=function(){var t="public.ui.useMiddleSeriesInstanceAsThumbnail",n=s.utils.ObjectPath.get(i.settings,t),a=e.data.thumbnail.stack,o=(a.numImageFrames||a.images.length||1)-1,r=n?Math.floor(o/2):0,c=void 0;return a.isMultiFrame?c=a.images[0]:(c=a.images[r],r=void 0),c.getImageId(r,!0)}}),a.imageThumbnail.onRendered(function(){var e=a.instance(),t=e.$(".imageThumbnail"),n=t.find(".imageThumbnailLoadingIndicator"),i=t.find(".imageThumbnailErrorLoadingIndicator"),r=t.find(".imageThumbnailCanvas"),s=r.get(0);e.refreshImage=function(){if(s){r.find(".static-image").remove(),c.enable(s,{renderer:""}),n.css("display","block");var t=function(e){try{c.getEnabledElement(s)}catch(e){return}c.displayImage(s,e),r.one("cornerstoneimagerendered",function(){var e=c.getEnabledElement(s),t=document.createElement("img");t.classList.add("static-image");var i=e.canvas.toDataURL("image/jpeg",1);t.src=i,c.disable(s),r.append(t),n.css("display","none")})},a=function(){n.css("display","none"),i.css("display","block")},o=e.getThumbnailImageId();c.loadAndCacheImage(o).then(t,a)}},e.autorun(function(){e.data.currentStudy&&e.data.currentStudy.dep.depend(),a.currentData(),o.afterFlush(function(){return e.refreshImage()})})}),a.imageThumbnail.onDestroyed(function(){var e=a.instance().$(".imageThumbnail").find(".imageThumbnailCanvas").get(0);c.disable(e)}),a.imageThumbnail.helpers({percentComplete:function(){var e=a.instance(),t=s.string.encodeId(e.getThumbnailImageId()),n=r.get("CornerstoneThumbnailLoadProgress"+t);if(n&&100!==n)return n+"%"},stackPercentComplete:function(){var e=a.instance().data.thumbnail.stack.displaySetInstanceUid,t=r.get("StackProgress:"+e);return t&&t.percentComplete},showStackLoadingProgressBar:function(){return s.uiSettings.showStackLoadingProgressBar}})}}},viewer:{imageViewerViewport:{"template.imageViewerViewport.js":function(){M.__checkName("imageViewerViewport"),M.imageViewerViewport=new M("Template.imageViewerViewport",function(){var e=this;return[F.Raw('<div class="imageViewerViewport" oncontextmenu="return false;" unselectable="on" onselectstart="return false;" tabindex="0">\n    </div>\n    <div class="viewportInstructions">\n        Please drag a stack here to view images.\n    </div>\n    '),V.include(e.lookupTemplate("viewportOverlay")),"\n    ",V.include(e.lookupTemplate("loadingIndicator")),"\n    ",V.include(e.lookupTemplate("viewportOrientationMarkers"))]})},"imageViewerViewport.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},4);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},5);var u=void 0,l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){u=e},cornerstoneTools:function(e){l=e}},6);var d=void 0;n.watch(e("../../../lib/StackManager"),{StackManager:function(e){d=e}},7);var m=void 0;n.watch(e("../../../lib/setActiveViewport"),{setActiveViewport:function(e){m=e}},8);var p=void 0;n.watch(e("../../../lib/imageViewerViewportData"),{imageViewerViewportData:function(e){p=e}},9);var f=void 0;n.watch(e("../../../lib/updateCrosshairsSynchronizer"),{updateCrosshairsSynchronizer:function(e){f=e}},10);var g=void 0;n.watch(e("../../../lib/toolManager"),{toolManager:function(e){g=e}},11);var x=void 0;n.watch(e("../../../lib/updateOrientationMarkers"),{updateOrientationMarkers:function(e){x=e}},12);var h=void 0;n.watch(e("../../../lib/instanceClassSpecificViewport"),{getInstanceClassDefaultViewport:function(e){h=e}},13);var v=void 0;n.watch(e("../../../lib/classes/OHIFError"),{OHIFError:function(e){v=e}},14);var S=["click","cornerstonetoolsmousedown","cornerstonetoolsmousedownactivate","cornerstonetoolsmouseclick","cornerstonetoolsmousedrag","cornerstonetoolsmouseup","cornerstonetoolsmousewheel","cornerstonetoolsdoubletap","cornerstonetoolstouchpress","cornerstonetoolsmultitouchstart","cornerstonetoolsmultitouchstartactive","cornerstonetoolsmultitouchdrag"],y=function(e,t){if(c.log.info("imageViewerViewport loadDisplaySetIntoViewport"),e.study&&e.displaySet&&e.element){var n=e.element,i=s(".imageViewerViewport").index(n),a=c.viewerbase.layoutManager;if(a.viewportData=a.viewportData||{},a.viewportData[i]=a.viewportData[i]||{},a.viewportData[i].viewportIndex=i,c.viewer.data){c.viewer.data.loadedSeriesData[i]={};var o=e.displaySet,v=d.findOrCreateStack(e.study,o);v.isClip&&v.frameRate>0&&(c.viewer.cine.framesPerSecond=parseFloat(v.frameRate),r.set("UpdateCINE",Math.random()));var y=v.imageIds,w=y[(v={currentImageIdIndex:e.currentImageIdIndex>0&&e.currentImageIdIndex<y.length?e.currentImageIdIndex:0,imageIds:y,displaySetInstanceUid:e.displaySetInstanceUid}).currentImageIdIndex];t.imageId=w,window.ViewportLoading[i]=w;var I={renderer:c.cornerstone.renderer};u.enable(n,I);var D=l.loadHandlerManager.getEndLoadHandler(),T=l.loadHandlerManager.getErrorLoadingHandler(),b=u.getViewport(n),P=e.studyInstanceUid,C=e.seriesInstanceUid,k=e.displaySetInstanceUid,R=e.currentImageIdIndex;a.viewportData[i]={imageId:w,studyInstanceUid:P,seriesInstanceUid:C,displaySetInstanceUid:k,currentImageIdIndex:R,viewport:b||e.viewport,viewportIndex:i};var V=void 0;try{V=u.loadAndCacheImage(w)}catch(e){if(c.log.info(e),!V)return void T(n,w,e)}var M=c.viewer.metadataProvider,O=M&&"function"==typeof M.updateMetadata,A=p.callbacks;"function"==typeof A.before&&(c.log.info("imageViewerViewport before loadAndCacheImage callback"),A.before(V,t)),V.then(function(d){var p=void 0;try{p=u.getEnabledElement(n)}catch(e){return void c.log.warn("Viewport destroyed before loaded image could be displayed")}var y=s(n);if(p.image=d,p.viewport=u.getDefaultViewport(p.canvas,d),O&&M.updateMetadata(d),o.images&&o.images.length){var w=o.images[0],I=h(w,p,d.imageId);I?(u.displayImage(n,d,I),p.fitToWindow=!1,u.resize(n,!1)):e.viewport?(u.displayImage(n,d,e.viewport),u.resize(n,!0)):(u.displayImage(n,d),u.resize(n,!0)),delete window.ViewportLoading[i],D(n,d),n.classList.remove("empty"),y.siblings(".viewportInstructions").hide(),y.siblings(".imageViewerViewportOverlay").show(),l.addStackStateManager(n,["stack","playClip","referenceLines"]),x(n),l.clearToolState(n,"stack"),l.addToolState(n,"stack",v);var T=w.getDataProperty("multiframeMetadata"),b=void 0;b=T&&T.averageFrameRate>0?T.averageFrameRate:c.viewer.cine.framesPerSecond;var P={loop:c.viewer.cine.loop,framesPerSecond:b};l.addToolState(n,"playClip",P),T&&T.isMultiframeImage&&T.averageFrameRate>0&&l.playClip(n),l.mouseInput.enable(n),l.touchInput.enable(n),l.mouseWheelInput.enable(n),l.keyboardInput.enable(n);var C=g.getActiveTool();g.setActiveTool(C,[n]);var k=function(e){var o=e.detail;a.viewportData[i]||c.log.warn("onImageRendered: LayoutManager has no viewport data for this viewport index?: "+i),r.set("CornerstoneImageRendered"+i,Math.random());var s=u.getViewport(n);a.viewportData[i].viewport=s,c.viewer.data.loadedSeriesData[i].viewport=s,"function"==typeof A.onImageRendered&&A.onImageRendered(e,o,i,t)};n.removeEventListener("cornerstoneimagerendered",k),n.addEventListener("cornerstoneimagerendered",k),r.set("CornerstoneImageRendered"+i,Math.random());var R=function(e){var n=e.detail;O&&M.updateMetadata(n.enabledElement.image),t.imageId=n.enabledElement.image.imageId,r.set("CornerstoneNewImage"+i,Math.random()),a.viewportData[i].imageId=n.enabledElement.image.imageId;var o=e.target,s=l.getToolState(o,"stack");if(s&&s.data&&s.data.length){x(o);var u=l.getToolState(o,"stack");if(u&&u.data.length&&u.data[0].imageIds.length>1){var d=u.data[0].imageIds.indexOf(t.imageId);a.viewportData[i].currentImageIdIndex=d,c.viewer.data.loadedSeriesData[i].currentImageIdIndex=d}"function"==typeof A.onNewImage&&A.onNewImage(e,n,i,t)}};n.removeEventListener("cornerstonenewimage",R),n.addEventListener("cornerstonenewimage",R),r.set("CornerstoneNewImage"+i,Math.random());var V=function(){r.set("CornerstoneNewImage"+i,Math.random())};n.removeEventListener("cornerstonestackscroll",V),v.imageIds.length>1&&n.addEventListener("cornerstonestackscroll",V);var L=function(e){var t=e&&e.detail,n=t&&t.element||e&&e.currentTarget;if(n){var a=s(n);if(a.focus(),t){var o=r.get("activeViewport");if(i!==o){c.log.info("imageViewerViewport sendActivationTrigger"),t.viewportIndex=i;var u=s.Event("OHIFActivateViewport",t);u.type="OHIFActivateViewport",a.trigger(u,t)}}}},E=function(){s(":focus").closest(".dropdown").length||L()};S.forEach(function(e){n.removeEventListener(e,L),n.addEventListener(e,L)}),y.off("mouseenter",E),y.on("mouseenter",E),c.viewer.data.loadedSeriesData=a.viewportData;var q=u.metaData.get("imagePlane",d.imageId);q&&q.frameOfReferenceUID&&(c.viewer.updateImageSynchronizer.add(n),c.viewer.refLinesEnabled&&l.referenceLines.tool.enable(n,c.viewer.updateImageSynchronizer),"crosshairs"===C&&f(q.frameOfReferenceUID)),i===r.get("activeViewport")&&m(n),e.renderedCallback&&"function"==typeof e.renderedCallback&&e.renderedCallback(n),a.updateSession(),"function"==typeof A.after&&(c.log.info("imageViewerViewport after callback"),A.after(d,t,n))}},function(e){T(n,w,e)})}}else c.log.warn("loadDisplaySetIntoViewport: No Study, Display Set, or Element provided")},w=function(e,t,n){var i=e.study;if(!i)throw new v("Study does not exist");var a=i.displaySets;if(a.length||(a=c.viewerbase.sortingManager.getDisplaySets(i),i.displaySets=a,i.setDisplaySets(a),i.forEachDisplaySet(function(e){c.viewerbase.stackManager.makeAndAddStack(i,e)})),!a)throw new v("Study has no display sets");a.every(function(n){return n.displaySetInstanceUid!==t||(e.displaySet=n,!1)}),e.displaySet||(e.displaySet=a[0]),y(e,n)};i.startup(function(){window.ViewportLoading=window.ViewportLoading||{},g.configureLoadProcess()}),a.imageViewerViewport.onRendered(function(){function e(e){var t=s(this),n=c.viewerbase.layoutManager,i=s(".imageViewerViewport");t.trigger("ohif.viewer.viewport.toggleEnlargement");var a=i.index(e.currentTarget);!n.isZoomed&&i.length<=1||(n.toggleEnlargement(a),o.afterFlush(function(){var e=void 0;e=n.isZoomed?0:n.zoomedViewportIndex||0;var t=s(".imageViewerViewport").get(e);m(t)}))}var t=a.currentData();c.log.info("imageViewerViewport onRendered");var n=this.find(".imageViewerViewport");this.element=n,this.$element=s(n),this.$element.siblings(".imageViewerLoadingIndicator").css("display","block");var i=r.get("activeViewport");t.viewportIndex===i&&this.$element.focus();var u=t.currentImageIdIndex,l=t.viewport,d=t.studyInstanceUid,f=t.seriesInstanceUid,g=t.renderedCallback,x=t.displaySetInstanceUid;u||(u=0),p.extendData(t);var h={element:n,viewport:l,currentImageIdIndex:u,displaySetInstanceUid:x,studyInstanceUid:d,seriesInstanceUid:f,renderedCallback:g,activeViewport:i};if(!x)return n.classList.add("empty"),this.$element.siblings(".imageViewerLoadingIndicator").css("display","none"),void this.$element.siblings(".viewportInstructions").show();var v=c.viewer.Studies.findBy({studyInstanceUid:d});h.study=v,w(h,x,t),["cornerstonetoolsmousedoubleclick","cornerstonetoolsdoubletap"].forEach(function(t){n.removeEventListener(t,e),n.addEventListener(t,e)})}),a.imageViewerViewport.onDestroyed(function(){c.log.info("imageViewerViewport onDestroyed");var e=this.find(".imageViewerViewport"),t=s(e);if(e&&!t.hasClass("empty")&&t.find("canvas").length){l.mouseInput.disable(e),l.touchInput.disable(e),l.mouseWheelInput.disable(e),c.viewer.updateImageSynchronizer.remove(e);var n=l.getToolState(e,"stackPrefetch");n=[],l.stackPrefetch.disable(e);try{u.getEnabledElement(e)&&l.stopClip(e)}catch(e){c.log.warn(e)}t.trigger("OHIFDestroyedViewport"),u.disable(e)}}),a.imageViewerViewport.events({"OHIFActivateViewport .imageViewerViewport":function(e){c.log.info("imageViewerViewport OHIFActivateViewport"),m(e.currentTarget)}})}},gridLayout:{"template.gridLayout.js":function(){M.__checkName("gridLayout"),M.gridLayout=new M("Template.gridLayout",function(){var e=this;return F.DIV({id:"imageViewerViewports"},"\n        ",C.Each(function(){return{_sequence:V.call(e.lookup("viewports")),_variable:"viewport"}},function(){return["\n            ",F.DIV({class:function(){return["viewportContainer ",V.mustache(e.lookup("getClass"),e.lookup("@index"))]},style:function(){return["height:",V.mustache(e.lookup("height")),"%;width:",V.mustache(e.lookup("width")),"%;"]}},"\n                ",F.DIV({class:"removable"},"\n                    ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("viewport"))},function(){return V.include(e.lookupTemplate("imageViewerViewport"))}),"\n                "),"\n                ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({viewport:e.lookup("viewport"),viewportIndex:e.lookup("@index")}))},function(){return V.include(e.lookupTemplate("seriesQuickSwitch"))}),"\n            "),"\n        "]}),"\n    ")})},"gridLayout.js":function(e,t,n){var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o="top",r="bottom",s="middle";a.gridLayout.helpers({height:function(){return 100/(a.instance().data.rows||1)},width:function(){return 100/(a.instance().data.columns||1)},getClass:function(e){var t=this.rows,n=this.columns;if(1===t)return"top bottom";var i=Math.floor(e/n);return 0===i?"top":i+1===t?"bottom":"middle"},viewports:function(){var e=a.instance(),t=e.data.rows,n=e.data.columns,i=t*n,o=e.data.viewportData,r=o.length;if(r<i)for(var s=i-r,c=0;c<s;c++)o.push({viewportIndex:r+c+1,rows:t,columns:n});else if(r>i)return o.slice(0,i);return o}})}},loadingIndicator:{"template.loadingIndicator.js":function(){M.__checkName("loadingIndicator"),M.loadingIndicator=new M("Template.loadingIndicator",function(){var e=this;return[F.DIV({class:"imageViewerLoadingIndicator loadingIndicator"},"\n        ",F.DIV({class:"indicatorContents"},"\n            ",F.P("Loading... ",F.Raw('<i class="fa fa-spin fa-circle-o-notch fa-fw"></i>')," ",C.View("lookup:percentComplete",function(){return V.mustache(e.lookup("percentComplete"))})),"\n        "),"\n    "),F.Raw('\n    <div class="imageViewerErrorLoadingIndicator loadingIndicator">\n        <div class="indicatorContents">\n            <h4>Error Loading Image</h4>\n            <p class="description">An error has occurred.</p>\n            <p class="details"></p>\n        </div>\n    </div>')]})},"loadingIndicator.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3),i.startup(function(){d.loadHandlerManager&&(d.loadHandlerManager.setStartLoadHandler(c),d.loadHandlerManager.setEndLoadHandler(u),d.loadHandlerManager.setErrorLoadingHandler(l))});var s=void 0,c=function(e){clearTimeout(s),s=setTimeout(function(){console.log("startLoading");var t=o(e);t.siblings(".imageViewerErrorLoadingIndicator").css("display","none"),t.find("canvas").not(".magnifyTool").addClass("faded"),t.siblings(".imageViewerLoadingIndicator").css("display","block")},r.viewer.loadIndicatorDelay)},u=function(e){clearTimeout(s);var t=o(e);t.siblings(".imageViewerErrorLoadingIndicator").css("display","none"),t.find("canvas").not(".magnifyTool").removeClass("faded"),t.siblings(".imageViewerLoadingIndicator").css("display","none")},l=function(e,t,n,i){clearTimeout(s);var a=o(e);if(a.find("canvas").not(".magnifyTool").removeClass("faded"),a.siblings(".imageViewerLoadingIndicator").css("display","none"),"stackPrefetch"!==i){var r=a.siblings(".imageViewerErrorLoadingIndicator");r.css("display","block");var c={network:"A network error has occurred"};c.hasOwnProperty(n)&&(n=c[n]),r.find(".description").text("An error has occurred while loading image: "+t),n&&r.find(".details").text("Details: "+n)}};a.loadingIndicator.helpers({percentComplete:function(){var e=T.get("CornerstoneLoadProgress"+this.viewportIndex);if(e&&100!==e)return e+"%"}})}},annotationDialogs:{"template.annotationDialogs.js":function(){M.__checkName("annotationDialogs"),M.annotationDialogs=new M("Template.annotationDialogs",function(){var e=this;return[F.getTag("dialog")({id:"annotationDialog",class:"annotationDialog noselect"},"\n        ",F.H5("Enter your annotation"),"\n        ",F.DIV({class:"annotationTextInputOptions"},"\n            ",F.LABEL({for:"annotationTextInput"},"New label"),"\n            ",F.INPUT({name:"annotationTextInput",class:"annotationTextInput",type:"text",tabindex:"-1",autocomplete:"off"}),"\n        "),"\n        ",F.A({class:"annotationDialogConfirm btn btn-sm btn-primary"},"OK"),"\n    "),"\n\n    ",F.getTag("dialog")({id:"relabelAnnotationDialog",class:"annotationDialog noselect",oncontextmenu:"return false"},"\n        ",F.H5("Edit your annotation"),"\n        ",F.DIV({class:"annotationTextInputOptions"},"\n            ",F.LABEL({for:"annotationTextInput"},"New label"),"\n            ",F.INPUT({name:"annotationTextInput",class:"annotationTextInput",type:"text",tabindex:"-1",autocomplete:"off"}),"\n        "),"\n        ",F.DIV("\n            ",F.A({class:"relabelRemove btn btn-sm btn-secondary"},"Remove marker"),"\n            ",F.A({class:"relabelConfirm btn btn-sm btn-primary"},"OK"),"\n        "),"\n    ")]})},"annotationDialogs.js":function(){M.annotationDialogs.onRendered(function(){var e=M.instance();["annotationDialog","relabelAnnotationDialog"].forEach(function(t){var n=e.$("#"+t);n.draggable(),U.registerDialog(n.get(0))})})}},viewportOrientationMarkers:{"template.viewportOrientationMarkers.js":function(){M.__checkName("viewportOrientationMarkers"),M.viewportOrientationMarkers=new M("Template.viewportOrientationMarkers",function(){var e=this;return F.Raw('<div class="viewportOrientationMarkers noselect">\n        <div class="topMid orientationMarker">\n        </div>\n        <div class="leftMid orientationMarker">\n        </div>\n    </div>')})}},viewportOverlay:{"template.viewportOverlay.js":function(){M.__checkName("viewportOverlay"),M.viewportOverlay=new M("Template.viewportOverlay",function(){var e=this;return F.DIV({class:function(){return["imageViewerViewportOverlay noselect ",C.If(function(){return V.dataMustache(e.lookup("gt"),e.lookup("numImages"),1)},function(){return"controlsVisible"})]}},"\n        ",C.Unless(function(){return V.call(e.lookup("tagDisplaySpecified"))},function(){return["\n            ",F.DIV({class:"topleft dicomTag"},"\n                ",F.DIV(C.View("lookup:formatPN",function(){return V.mustache(e.lookup("formatPN"),e.lookup("patientName"))})),"\n                ",F.DIV(C.View("lookup:patientId",function(){return V.mustache(e.lookup("patientId"))})),"\n                ",F.DIV({class:"priorIndicator"},C.View("lookup:prior",function(){return V.mustache(e.lookup("prior"))})),"\n            "),"\n            ",F.DIV({class:"topright dicomTag"},"\n                ",F.DIV(C.View("lookup:studyDescription",function(){return V.mustache(e.lookup("studyDescription"))})),"\n                ",F.DIV(C.View("lookup:formatDA",function(){return V.mustache(e.lookup("formatDA"),e.lookup("studyDate"))})," ",C.View("lookup:formatTM",function(){return V.mustache(e.lookup("formatTM"),e.lookup("studyTime"))})),"\n                ",F.DIV("Sync ",V.include(e.lookupTemplate("syncCheckbox"))),"\n                ",F.DIV("Smooth ",V.include(e.lookupTemplate("smoothCheckbox"))),"\n            "),"\n            ",F.DIV({class:"bottomright dicomTag"},"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("zoom"))},function(){return["Zoom: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("zoom"),0)}),"%"]})),"\n                ",F.DIV({class:"compressionIndicator"},C.View("lookup:compression",function(){return V.mustache(e.lookup("compression"))})),"\n                ",F.DIV(C.View("lookup:wwwc",function(){return V.mustache(e.lookup("wwwc"))})),"\n            "),"\n            ",F.DIV({class:"bottomleft dicomTag"},"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("seriesNumber"))},function(){return["Ser: ",C.View("lookup:seriesNumber",function(){return V.mustache(e.lookup("seriesNumber"))})]})),"\n                ",F.DIV(C.If(function(){return V.dataMustache(e.lookup("gt"),e.lookup("numImages"),1)},function(){return["Img: ",C.View("lookup:instanceNumber",function(){return V.mustache(e.lookup("instanceNumber"))})," (",C.View("lookup:imageIndex",function(){return V.mustache(e.lookup("imageIndex"))}),"/",C.View("lookup:numImages",function(){return V.mustache(e.lookup("numImages"))}),")"]})),"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("frameRate"))},function(){return[C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("frameRate"),2)})," FPS"]})),"\n                ",F.DIV(C.View("lookup:imageDimensions",function(){return V.mustache(e.lookup("imageDimensions"))})),"\n                ",F.DIV("\n                    ",F.SPAN(C.If(function(){return V.dataMustache(e.lookup("isValidNumber"),e.lookup("location"))},function(){return["Loc: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("location"),2)})," mm"]})),"\n                    ",F.SPAN(C.If(function(){return V.call(e.lookup("thickness"))},function(){return["Thick: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("thickness"),2)})," mm"]})),"\n                    ",F.SPAN(C.If(function(){return V.call(e.lookup("spacingBetweenSlices"))},function(){return["Spacing: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("spacingBetweenSlices"),2)})," mm"]})),"\n                "),"\n                ",F.DIV(C.View("lookup:seriesDescription",function(){return V.mustache(e.lookup("seriesDescription"))})),"\n            "),"\n        "]}),"\n\n        ",C.If(function(){return V.call(e.lookup("tagDisplayRightOnly"))},function(){return["\n            ",F.DIV({class:"topright dicomTag"},"\n                ",F.DIV(C.View("lookup:formatPN",function(){return V.mustache(e.lookup("formatPN"),e.lookup("patientName"))})),"\n                ",F.DIV(C.View("lookup:patientId",function(){return V.mustache(e.lookup("patientId"))})),"\n                ",F.DIV({class:"priorIndicator"},C.View("lookup:prior",function(){return V.mustache(e.lookup("prior"))})),"\n                ",F.DIV(C.View("lookup:studyDescription",function(){return V.mustache(e.lookup("studyDescription"))})),"\n                ",F.DIV(C.View("lookup:formatDA",function(){return V.mustache(e.lookup("formatDA"),e.lookup("studyDate"))})," ",C.View("lookup:formatTM",function(){return V.mustache(e.lookup("formatTM"),e.lookup("studyTime"))})),"\n            "),"\n            ",F.DIV({class:"bottomright dicomTag"},"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("seriesNumber"))},function(){return["Ser: ",C.View("lookup:seriesNumber",function(){return V.mustache(e.lookup("seriesNumber"))})]})),"\n                ",F.DIV(C.If(function(){return V.dataMustache(e.lookup("gt"),e.lookup("numImages"),1)},function(){return["Img: ",C.View("lookup:instanceNumber",function(){return V.mustache(e.lookup("instanceNumber"))})," (",C.View("lookup:imageIndex",function(){return V.mustache(e.lookup("imageIndex"))}),"/",C.View("lookup:numImages",function(){return V.mustache(e.lookup("numImages"))}),")"]})),"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("frameRate"))},function(){return[C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("frameRate"),2)})," FPS"]})),"\n                ",F.DIV(C.View("lookup:imageDimensions",function(){return V.mustache(e.lookup("imageDimensions"))})),"\n                ",F.DIV(C.View("lookup:seriesDescription",function(){return V.mustache(e.lookup("seriesDescription"))})),"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("zoom"))},function(){return["Zoom: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("zoom"),0)}),"%"]})),"\n                ",F.DIV({class:"compressionIndicator"},C.View("lookup:compression",function(){return V.mustache(e.lookup("compression"))})),"\n                ",F.DIV(C.View("lookup:wwwc",function(){return V.mustache(e.lookup("wwwc"))})),"\n            "),"\n        "]}),"\n\n        ",C.If(function(){return V.call(e.lookup("tagDisplayLeftOnly"))},function(){return["\n            ",F.DIV({class:"topleft dicomTag"},"\n                ",F.DIV(C.View("lookup:formatPN",function(){return V.mustache(e.lookup("formatPN"),e.lookup("patientName"))})),"\n                ",F.DIV(C.View("lookup:patientId",function(){return V.mustache(e.lookup("patientId"))})),"\n                ",F.DIV({class:"priorIndicator"},C.View("lookup:prior",function(){return V.mustache(e.lookup("prior"))})),"\n                ",F.DIV(C.View("lookup:studyDescription",function(){return V.mustache(e.lookup("studyDescription"))})),"\n                ",F.DIV(C.View("lookup:formatDA",function(){return V.mustache(e.lookup("formatDA"),e.lookup("studyDate"))})," ",C.View("lookup:formatTM",function(){return V.mustache(e.lookup("formatTM"),e.lookup("studyTime"))})),"\n            "),"\n            ",F.DIV({class:"bottomleft dicomTag"},"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("seriesNumber"))},function(){return["Ser: ",C.View("lookup:seriesNumber",function(){return V.mustache(e.lookup("seriesNumber"))})]})),"\n                ",F.DIV(C.If(function(){return V.dataMustache(e.lookup("gt"),e.lookup("numImages"),1)},function(){return["Img: ",C.View("lookup:instanceNumber",function(){return V.mustache(e.lookup("instanceNumber"))})," (",C.View("lookup:imageIndex",function(){return V.mustache(e.lookup("imageIndex"))}),"/",C.View("lookup:numImages",function(){return V.mustache(e.lookup("numImages"))}),")"]})),"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("frameRate"))},function(){return[C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("frameRate"),2)})," FPS"]})),"\n                ",F.DIV(C.View("lookup:imageDimensions",function(){return V.mustache(e.lookup("imageDimensions"))})),"\n                ",F.DIV(C.View("lookup:seriesDescription",function(){return V.mustache(e.lookup("seriesDescription"))})),"\n                ",F.DIV(C.If(function(){return V.call(e.lookup("zoom"))},function(){return["Zoom: ",C.View("lookup:formatNumberPrecision",function(){return V.mustache(e.lookup("formatNumberPrecision"),e.lookup("zoom"),0)}),"%"]})),"\n                ",F.DIV({class:"compressionIndicator"},C.View("lookup:compression",function(){return V.mustache(e.lookup("compression"))})),"\n                ",F.DIV(C.View("lookup:wwwc",function(){return V.mustache(e.lookup("wwwc"))})),"\n            "),"\n        "]}),"\n\n        ",C.If(function(){return V.dataMustache(e.lookup("gt"),e.lookup("numImages"),1)},function(){return["\n            ",C._TemplateWith(function(){return{imageIndex:V.call(e.lookup("imageIndex")),numImages:V.call(e.lookup("numImages"))}},function(){return V.include(e.lookupTemplate("imageControls"))}),"\n        "]}),"\n    ")})},"viewportOverlay.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/session"),{Session:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/underscore"),{_:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){s=e}},4);var c=void 0;n.watch(e("../../../lib/viewportOverlayUtils"),{viewportOverlayUtils:function(e){c=e}},5);var u=void 0;n.watch(e("../../../lib/getElementIfNotEmpty"),{getElementIfNotEmpty:function(e){u=e}},6);var l=void 0;n.watch(e("../../../lib/getStackDataIfNotEmpty"),{getStackDataIfNotEmpty:function(e){l=e}},7),i.viewportOverlay.onCreated(function(){var e=i.instance();e.getImageIndex=function(){var t=l(e.data.viewportIndex);if(t&&void 0!==t.currentImageIdIndex)return t.currentImageIdIndex}}),i.viewportOverlay.helpers({wwwc:function(){a.get("CornerstoneImageRendered"+this.viewportIndex);var e=u(this.viewportIndex);if(!e)return"";var t=s.getViewport(e);return t?"W "+t.voi.windowWidth.toFixed(0)+" L "+t.voi.windowCenter.toFixed(0):""},zoom:function(){a.get("CornerstoneImageRendered"+this.viewportIndex);var e=u(this.viewportIndex);if(e){var t=s.getViewport(e);if(t)return 100*t.scale}},imageDimensions:function(){a.get("CornerstoneNewImage"+this.viewportIndex);var e=c.getImage(this.viewportIndex);return e?e.width+" x "+e.height:""},patientName:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getPatient.call(this,"name")},patientId:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getPatient.call(this,"id")},patientBirthDate:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getPatient.call(this,"birthDate")},patientSex:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getPatient.call(this,"sex")},studyDate:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getStudy.call(this,"studyDate")},studyTime:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getStudy.call(this,"studyTime")},studyDescription:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getStudy.call(this,"studyDescription")},seriesDescription:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getSeries.call(this,"seriesDescription")},frameRate:function(){a.get("CornerstoneNewImage"+this.viewportIndex);var e=c.getInstance.call(this,"frameTime");if(e)return(1e3/e).toFixed(1)},seriesNumber:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getSeries.call(this,"seriesNumber")},instanceNumber:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getInstance.call(this,"instanceNumber")},thickness:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getInstance.call(this,"sliceThickness")},location:function(){a.get("CornerstoneNewImage"+this.viewportIndex);var e=c.getInstance.call(this,"sliceLocation");if(""!==e)return e;var t=c.getInstance.call(this,"tablePosition");return""!==t?t:c.getInstance.call(this,"imagePositionPatient")},spacingBetweenSlices:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getInstance.call(this,"spacingBetweenSlices")},compression:function(){if(a.get("CornerstoneNewImage"+this.viewportIndex),!this.imageId)return!1;var e=s.metaData.get("instance",this.imageId);return e?"01"===e.lossyImageCompression&&""!==e.lossyImageCompressionRatio?(e.lossyImageCompressionMethod||"Lossy: ")+parseFloat(e.lossyImageCompressionRatio).toFixed(2)+" : 1":"Lossless / Uncompressed":""},tagDisplayLeftOnly:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),"L"===c.getTagDisplay.call(this,"side")},tagDisplayRightOnly:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),"R"===c.getTagDisplay.call(this,"side")},tagDisplaySpecified:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getTagDisplay.call(this,"side")},imageNumber:function(){return a.get("CornerstoneNewImage"+this.viewportIndex),c.getInstance.call(this,"number")},imageIndex:function(){a.get("CornerstoneNewImage"+this.viewportIndex);var e=i.instance().getImageIndex();return o.isUndefined(e)?0:e+1},numImages:function(){a.get("CornerstoneNewImage"+this.viewportIndex);var e=l(this.viewportIndex);if(e&&e.imageIds)return e.imageIds.length},prior:function(){if(a.get("CornerstoneNewImage"+this.viewportIndex),this.imageId){var e=r.viewer.Studies.all();if(!(e.length<2)){var t=o.sortBy(e,function(e){return c.formatDateTime(e.studyDate,e.studyTime)}),n=s.metaData.get("study",this.imageId);if(n){var i=t[0];return c.formatDateTime(n.studyDate,n.studyTime)<=c.formatDateTime(i.studyDate,i.studyTime)?"Prior":void 0}}}}})}},viewerMain:{"template.viewerMain.js":function(){M.__checkName("viewerMain"),M.viewerMain=new M("Template.viewerMain",function(){var e=this;return F.Raw('<div class="viewerMain">\n        <div id="layoutManagerTarget">\n        </div>\n    </div>')})},"viewerMain.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=void 0;n.watch(e("../../../lib/unloadHandlers"),{unloadHandlers:function(e){s=e}},4);var c=void 0;n.watch(e("../../../lib/classes/ResizeViewportManager"),{ResizeViewportManager:function(e){c=e}},5);var u=void 0;n.watch(e("../../../lib/classes/LayoutManager"),{LayoutManager:function(e){u=e}},6);var l=void 0;n.watch(e("../../../lib/classes/StudyPrefetcher"),{StudyPrefetcher:function(e){l=e}},7);var d=void 0;n.watch(e("../../../lib/classes/StudyLoadingListener"),{StudyLoadingListener:function(e){d=e}},8),i.startup(function(){window.ResizeViewportManager=window.ResizeViewportManager||new c,o.set("OHIFViewerMainRendered",!1)}),a.viewerMain.onCreated(function(){window.addEventListener("resize",window.ResizeViewportManager.getResizeHandler()),window.addEventListener("beforeunload",s.beforeUnload)}),a.viewerMain.onRendered(function(){var e=a.instance(),t=e.data.studies,n=e.$("#layoutManagerTarget").get(0),i=l.getInstance();e.studyPrefetcher=i,e.studyLoadingListener=d.getInstance(),e.studyLoadingListener.clear(),e.studyLoadingListener.addStudies(t),r.viewerbase.layoutManager=new u(n,t),i.setStudies(t),o.set("OHIFViewerMainRendered",Math.random())}),a.viewerMain.onDestroyed(function(){var e=a.instance();r.log.info("viewerMain onDestroyed"),window.removeEventListener("resize",window.ResizeViewportManager.getResizeHandler()),window.removeEventListener("beforeunload",s.beforeUnload),r.viewer.updateImageSynchronizer.destroy(),delete r.viewerbase.layoutManager,B=null,o.set("OHIFViewerMainRendered",!1),e.studyPrefetcher.destroy(),e.studyLoadingListener.clear(),r.viewerbase.stackManager.clearStacks(),r.viewer.Studies.removeAll(),r.viewer.StudyMetadataList.removeAll()})}},toolContextMenu:{"toolContextMenu.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1);var o=void 0,r=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){o=e},cornerstoneTools:function(e){r=e}},2);var s=void 0;n.watch(e("../../../lib/toolManager"),{toolManager:function(e){s=e}},3);var c=["length","simpleAngle","probe","ellipticalRoi","rectangleRoi","arrowAnnotate"],u={length:"Length",simpleAngle:"Angle",probe:"Probe",ellipticalRoi:"Elliptical ROI",rectangleRoi:"Rectangle ROI",arrowAnnotate:"Annotation"},l=[{actionType:"Delete",action:function(e){var t=e.nearbyToolData,n=e.eventData.element;r.removeToolState(n,t.toolType,t.tool),o.updateImage(n)}}],d=function(e,t){var n=e.toolType,i=""+u[n];return"arrowAnnotate"===n&&(i=i+' "'+e.tool.text+'"'),t+" "+i},m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=s.getNearbyToolData(e.element,e.currentPoints.canvas,c);t&&"arrowAnnotate"===n.toolType||n&&(l.forEach(function(t){t.params={eventData:e,nearbyToolData:n},t.text=d(n,t.actionType)}),a.ui.showDropdown(l,{menuClasses:"dropdown-menu-left",event:e.event}))};i.viewerMain.events({"cornerstonetoolsmouseclick .imageViewerViewport":function(e){var t=e.originalEvent.detail;3===t.which&&m(t)},"cornerstonetoolstouchpress .imageViewerViewport":function(e){var t=e.originalEvent.detail;m(t,!0)}})}},imageControls:{"template.imageControls.js":function(){M.__checkName("imageControls"),M.imageControls=new M("Template.imageControls",function(){var e=this;return F.DIV({class:"imageControls"},"\n        ",F.DIV({class:"scrollbar"},"\n            ",F.INPUT({class:"imageSlider",type:"range",min:"1",value:function(){return V.mustache(e.lookup("imageIndex"))},max:function(){return V.mustache(e.lookup("numImages"))}}),"\n        "),"\n    ")})},"imageControls.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/underscore"),{_:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=void 0;n.watch(e("../../../lib/setActiveViewport"),{setActiveViewport:function(e){s=e}},4);var c=void 0;n.watch(e("../../../lib/switchToImageByIndex"),{switchToImageByIndex:function(e){c=e}},5);var u=40,l=void 0;i.imageControls.onRendered(function(){var e=i.instance(),t=e.$(".imageSlider"),n=t.closest(".imageViewerViewportOverlay").siblings(".imageViewerViewport");e.handleResize=o.throttle(function(){var e=n.height();t.width(e-20)},150),e.handleResize(),a(window).on("resize",e.handleResize)}),i.imageControls.onDestroyed(function(){var e=i.instance();a(window).off("resize",e.handleResize)}),i.imageControls.events({"rescale .scrollbar":function(e,t){t.handleResize()},"keydown input[type=range]":function(e){var t={DOWN:40,UP:38};e.which===t.DOWN?(r.commands.run("scrollDown"),e.preventDefault()):e.which===t.UP&&(r.commands.run("scrollUp"),e.preventDefault())},"input input[type=range], change input[type=range]":function(e){return clearTimeout(l),l=setTimeout(function(){var t=a(e.currentTarget),n=t.parents(".viewportContainer").find(".imageViewerViewport");s(n);var i=parseInt(t.val(),10)-1;c(i)},40),!1}})}},layoutButton:{"template.layoutButton.js":function(){M.__checkName("layoutButton"),M.layoutButton=new M("Template.layoutButton",function(){var e=this;return F.DIV({id:function(){return V.mustache(V.dot(e.lookup("."),"id"))},class:function(){return["toolbarSectionButton rp-x-1 ",V.mustache(V.dot(e.lookup("."),"classes"))," ",V.mustache(e.lookup("activeClass"))," js-dropdown-toggle"]},title:function(){return V.mustache(V.dot(e.lookup("."),"title"))},"data-target":"#layoutChooser"},"\n        ",F.DIV({class:"svgContainer"},"\n            ",C.If(function(){return V.call(V.dot(e.lookup("."),"svgLink"))},function(){return["\n                ",F.SVG("\n                    ",F.USE({"xlink:href":function(){return V.mustache(e.lookup("absoluteUrl"),V.dot(e.lookup("."),"svgLink"))}}),"\n                "),"\n            "]},function(){return["\n                ",F.I({class:function(){return V.mustache(e.lookup("iconClasses"))}}),"\n            "]}),"\n        "),"\n        ",F.DIV({class:"buttonLabel"},"\n            ",C.View("lookup:..title",function(){return V.mustache(V.dot(e.lookup("."),"title"))}),"\n        "),"\n    ")})},"layoutButton.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var o=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){o=e}},2),i.layoutButton.events({"mousedown .js-dropdown-toggle":function(e){var t=a(e.currentTarget),n=a(t.data("target"));n.css({top:t.offset().top+t.outerHeight()+"px",left:t.offset().left+"px"}),o.toggleDialog(n)}})}},layoutChooser:{"template.layoutChooser.js":function(){M.__checkName("layoutChooser"),M.layoutChooser=new M("Template.layoutChooser",function(){var e=this;return F.DIV({id:"layoutChooser",class:"layoutChooser dialog-animated"},"\n        ",F.TABLE("\n            ",F.TR("\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n            "),"\n            ",F.TR("\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n            "),"\n            ",F.TR("\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n            "),"\n            ",F.TR("\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n                ",F.TD(),"\n            "),"\n        "),"\n    ")})},"layoutChooser.js":function(e,t,n){var i=this,a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},1);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},2),n.watch(e("meteor/ohif:viewerbase"));var s=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){s=e}},3),a.layoutChooser.onRendered(function(){var e=a.instance();e.highlightCells=function(e){i.$(".layoutChooser table td").removeClass("hover");for(var t=(e=i.$(e)).parents(".layoutChooser table").get(0),n=e.closest("tr").index(),a=e.index(),o=t.rows.length-1;o>=0;o--){var r=t.rows[o];if(o<=n)for(var s=r.cells.length-1;s>=0;s--)s<=a&&r.cells[s].classList.add("hover")}},e.refreshHighlights=function(){if(r.viewerbase.layoutManager){var t=r.viewerbase.layoutManager.layoutProps,n=e.$("tr").eq(t.rows-1).children().eq(t.columns-1);e.highlightCells(n)}},e.autorun(function(){o.get("LayoutManagerUpdated"),e.refreshHighlights()})}),a.layoutChooser.events({"touchstart .layoutChooser table td, mouseenter .layoutChooser table td":function(e,t){t.highlightCells(e.currentTarget)},"mouseleave .layoutChooser":function(e,t){t.refreshHighlights()},"click .layoutChooser table td":function(e,t){var n=t.$(e.currentTarget),i={rows:n.closest("tr").index()+1,columns:n.index()+1};r.viewerbase.layoutManager.layoutTemplateName="gridLayout",r.viewerbase.layoutManager.layoutProps=i,r.viewerbase.layoutManager.updateViewports();var a=t.$(".layoutChooser");s.toggleDialog(a)}})}},cineDialog:{"template.cineDialog.js":function(){M.__checkName("cineDialog"),M.cineDialog=new M("Template.cineDialog",function(){var e=this;return F.getTag("dialog")({id:"cineDialog"},"\n        ",C._TemplateWith(function(){return{id:V.call("cineDialogForm"),class:V.call(V.dataMustache(e.lookup("getClassNames"),"dialog-animated noselect")),schema:V.call(V.dot(e.lookup("instance"),"schema")),api:V.call(V.dot(e.lookup("instance"),"api"))}},function(){return V.include(e.lookupTemplate("form"),function(){return["\n            ",C._TemplateWith(function(){return{key:V.call("intervalId")}},function(){return V.include(e.lookupTemplate("inputHidden"))}),"\n            ",F.DIV({class:"button-close-container"},"\n                ",F.DIV({class:"button-close"},F.SPAN({"aria-hidden":"true"},"x")),"\n            "),"\n            ",F.DIV({class:"cine-controls"},"\n                ",F.DIV({class:"btn-group"},"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),action:V.call("cineFirst"),title:V.call("Skip to first image"),disabled:V.call(V.dataMustache(e.lookup("buttonDisabled")))}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-fast-backward"}),"\n                    "]})}),"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),action:V.call("cinePrevious"),title:V.call("Previous image"),disabled:V.call(V.dataMustache(e.lookup("buttonDisabled")))}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-step-backward"}),"\n                    "]})}),"\n                    ",C._TemplateWith(function(){return{class:V.call(V.dataMustache(e.lookup("concat"),"btn ",V.dataMustache(e.lookup("valueIf"),e.lookup("isPlaying"),"active",""))),action:V.call("cineToggle"),title:V.call("Play / Stop"),disabled:V.call(V.dataMustache(e.lookup("buttonDisabled")))}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",C.If(function(){return V.call(e.lookup("isPlaying"))},function(){return["\n                            ",F.I({class:"fa fa-fw fa-stop"}),"\n                        "]},function(){return["\n                            ",F.I({class:"fa fa-fw fa-play"}),"\n                        "]}),"\n                    "]})}),"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),action:V.call("cineNext"),title:V.call("Next image"),disabled:V.call(V.dataMustache(e.lookup("buttonDisabled")))}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-step-forward"}),"\n                    "]})}),"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),action:V.call("cineLast"),title:V.call("Skip to last image"),disabled:V.call(V.dataMustache(e.lookup("buttonDisabled")))}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-fast-forward"}),"\n                    "]})}),"\n                "),"\n            "),"\n            ",F.DIV({class:"cine-options"},"\n                ",F.DIV({class:"fps-section"},"\n                    ",C._TemplateWith(function(){return{key:V.call("framesPerSecond"),class:V.call("p-a-0"),labelClass:V.call("form-group m-a-0"),labelAsDiv:V.call(!0)}},function(){return V.include(e.lookupTemplate("inputRange"),function(){return"\n                    "})}),"\n                "),"\n                ",F.SPAN({id:"fps"},C.View("lookup:framerate",function(){return V.mustache(e.lookup("framerate"))})," fps"),"\n            "),"\n            ",F.DIV({class:"cine-navigation"},"\n                ",F.DIV({class:"btn-group"},"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),disabled:V.call(V.dataMustache(e.lookup("displaySetDisabled"),!1)),action:V.call("displaySetPrevious"),title:V.call("Previous display set")}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-toggle-up"}),"\n                    "]})}),"\n                    ",C._TemplateWith(function(){return{class:V.call("btn"),disabled:V.call(V.dataMustache(e.lookup("displaySetDisabled"),!0)),action:V.call("displaySetNext"),title:V.call("Next display set")}},function(){return V.include(e.lookupTemplate("button"),function(){return["\n                        ",F.I({class:"fa fa-toggle-down"}),"\n                    "]})}),"\n                "),"\n            "),"\n        "]})}),"\n    ")})},"cineDialog.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/underscore"),{_:function(e){s=e}},4);var c=void 0;n.watch(e("meteor/jquery"),{$:function(e){c=e}},5);var u=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){u=e}},6);var l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){l=e}},7);var d=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){d=e}},8);var m=void 0;n.watch(e("../../../lib/switchToImageRelative"),{switchToImageRelative:function(e){m=e}},9);var p=void 0;n.watch(e("../../../lib/switchToImageByIndex"),{switchToImageByIndex:function(e){p=e}},10),i.cineDialog.onCreated(function(){var e=i.instance();e.schema=new a({intervalId:{type:Number,optional:!0},loop:{type:Boolean,label:"Loop",defaultValue:!0},framesPerSecond:{type:Number,label:"",defaultValue:24,min:1,max:90,optional:!0}}),e.updateFramerate=function(e){u.viewer.cine.framesPerSecond=e;var t=d.getActiveViewportElement();if(t){var n=l.getToolState(t,"playClip");n&&n.data&&n.data.length&&(void 0!==(n=n.data[0]).intervalId?(l.stopClip(t),l.playClip(t,u.viewer.cine.framesPerSecond)):n.framesPerSecond=u.viewer.cine.framesPerSecond,o.set("UpdateCINE",Math.random()))}},e.api={displaySetPrevious:function(){return u.viewerbase.layoutManager.moveDisplaySets(!1)},displaySetNext:function(){return u.viewerbase.layoutManager.moveDisplaySets(!0)},cineToggle:function(){return d.toggleCinePlay()},cineFirst:function(){return p(0)},cineLast:function(){return p(-1)},cinePrevious:function(){return m(-1)},cineNext:function(){return m(1)},cineSlowDown:function(){var t=u.viewer.cine.framesPerSecond-1;t>0&&e.updateFramerate(t)},cineSpeedUp:function(){var t=u.viewer.cine.framesPerSecond+1;t<=90&&e.updateFramerate(t)}},e.autorun(function(){o.get("activeViewport"),r.afterFlush(function(){var t=d.getActiveViewportElement();if(t){var n=l.getToolState(t,"playClip");if(n){var i=n.data[0],a=u.viewer.cine;s.extend(a,i),a.framesPerSecond=a.framesPerSecond||24,a.loop=!!s.isUndefined(a.loop)||a.loop;var r=e.$("form:first").data("component");r&&r.value(a),o.set("UpdateCINE",Math.random())}}})}),e.setResizeHandler=function(t){if("function"==typeof t){var n=window.onresize;e.origWindowResizeHandler="function"==typeof n?n:null,window.onresize=function(e){"function"==typeof n&&n.call(window,e),t.call(window,e)}}else window.onresize=e.origWindowResizeHandler||null,window.origWindowResizeHandler=null},e.setOptimalPosition=function(t,n){var i=c("#viewer"),a=c(".toolbarSection .toolbarSectionTools:first"),o=c("#cineDialog");if(o.width(c("#cineDialogForm").outerWidth()),!(a.length<1||o.length<1))if(o.data("wasDragged")||o.data("wasBounded"))e.setResizeHandler(null);else{var r={width:o.outerWidth()||0,height:o.outerHeight()||0},s={top:0,left:0},u={offset:a.offset()||s,width:a.outerWidth()||0,height:a.outerHeight()||0},l={left:u.offset.left+u.width+20,top:u.offset.top+u.height-r.height};n&&(n.left&&(l.left=n.left),n.top&&(l.top=n.top)),l.top<0?l.top=0:l.top+r.height>i.height()&&(l.top-=l.top+r.height-i.height()),l.left<0?l.left=0:l.left+r.width>i.width()&&(l.left-=l.left+r.width-i.width()),o.css(l)}}}),i.cineDialog.onRendered(function(){var e=i.instance(),t=e.$("#cineDialog"),n=u.uiSettings.displayEchoUltrasoundWorkflow;e.setOptimalPosition(null,{top:n?47:26}),e.setResizeHandler(e.setOptimalPosition),t.draggable({defaultElementCursor:"move"}).bounded(),window.dialogPolyfill.registerDialog(t.get(0)),t.find(".cine-navigation, .cine-controls, .cine-options").on("mousedown touchstart",function(e){return e.stopPropagation()})}),i.cineDialog.onDestroyed(function(){i.instance().setResizeHandler(null)}),i.cineDialog.events({"change [data-key=loop] input":function(e,t){var n=d.getActiveViewportElement();u.viewer.cine.loop=c(e.currentTarget).is(":checked");var i=l.getToolState(n,"playClip");i&&i.data&&i.data.length>0&&(i.data[0].loop=u.viewer.cine.loop)},"input [data-key=framesPerSecond] input, change [data-key=framesPerSecond] input":function(e,t){var n=parseFloat(c(e.currentTarget).val());t.updateFramerate(n)},"click .button-close":function(e,t){u.commands.run("toggleCineDialog")}}),i.cineDialog.helpers({isPlaying:function(){return d.isPlaying()},framerate:function(){return o.get("UpdateCINE"),u.viewer.cine.framesPerSecond.toFixed(1)},displaySetDisabled:function(e){if(o.get("LayoutManagerUpdated"),u.viewerbase.layoutManager)return u.viewerbase.layoutManager.canMoveDisplaySets(e)?"":"disabled"},buttonDisabled:function(){return d.hasMultipleFrames()},getClassNames:function(e){return e+" "+(u.uiSettings.displayEchoUltrasoundWorkflow?"single":"double")+"-row-style"}})}},downloadDialog:{"template.downloadDialog.js":function(){M.__checkName("imageDownloadDialog"),M.imageDownloadDialog=new M("Template.imageDownloadDialog",function(){var e=this;return C._TemplateWith(function(){return V.dataMustache(e.lookup("extend"),e.lookup("."),V.kw({title:"Download High Quality Image",class:"themed",dialogClass:"modal-lg",formClass:"form-themed",confirmLabel:"Download Image",confirmCallback:V.dot(e.lookup("instance"),"getConfirmCallback"),cancelLabel:"Cancel",id:"imageDownloadDialog",schema:V.dot(e.lookup("instance"),"schema")}))},function(){return V.include(e.lookupTemplate("dialogForm"),function(){return["\n        ",F.H5("Please specify the dimensions, filename, and desired type for the output image."),"\n        ",F.DIV({class:"card-round"},"\n            ",F.DIV({class:"row m-t-2"},"\n                ",F.DIV({class:"col-lg-4"},"\n                    ",F.TABLE({class:"full-width"},"\n                        ",F.TBODY("\n                            ",F.TR("\n                                ",F.TD({class:"text-right p-r-1 nowrap"},"Image width (px)"),"\n                                ",F.TD(C._TemplateWith(function(){return{key:V.call("width"),min:V.call("1"),max:V.call("16384")}},function(){return V.include(e.lookupTemplate("inputNumber"))})),"\n                                ",F.TD({class:"p-l-1",rowspan:"2"},"\n                                    ",F.BUTTON({class:function(){return["btn btn-secondary js-keep-aspect ",C.If(function(){return V.call(e.lookup("keepAspect"))},function(){return"active"})]},title:"Keep aspect ratio"},"\n                                        ",F.I({class:function(){return["fa fa-chain",C.Unless(function(){return V.call(e.lookup("keepAspect"))},function(){return"-broken"})]}}),"\n                                    "),"\n                                "),"\n                            "),"\n                            ",F.TR("\n                                ",F.TD({class:"text-right p-r-1 nowrap"},"Image height (px)"),"\n                                ",F.TD(C._TemplateWith(function(){return{key:V.call("height"),min:V.call("1"),max:V.call("16384")}},function(){return V.include(e.lookupTemplate("inputNumber"))})),"\n                            "),"\n                        "),"\n                    "),"\n                "),"\n                ",F.DIV({class:"col-lg-5"},"\n                    ",F.TABLE({class:"full-width"},"\n                        ",F.TBODY("\n                            ",F.TR("\n                                ",F.TD({class:"text-right p-r-1"},"File name"),"\n                                ",F.TD(C._TemplateWith(function(){return{key:V.call("name")}},function(){return V.include(e.lookupTemplate("inputText"))})),"\n                            "),"\n                            ",F.TR("\n                                ",F.TD({class:"text-right p-r-1"},"File type"),"\n                                ",F.TD(C._TemplateWith(function(){return{key:V.call("type"),hideSearch:V.call(!0)}},function(){return V.include(e.lookupTemplate("inputSelect"))})),"\n                            "),"\n                        "),"\n                    "),"\n                "),"\n                ",F.DIV({class:"col-lg-3"},"\n                    ",F.TABLE({class:"full-width"},"\n                        ",F.TBODY("\n                            ",F.TR("\n                                ",F.TD({class:"text-right",colspan:"2"},C._TemplateWith(function(){return{key:V.call("showAnnotations")}},function(){return V.include(e.lookupTemplate("inputCheckbox"))})),"\n                            "),"\n                            ",C.If(function(){return V.call(e.lookup("showQuality"))},function(){return["\n                                ",F.TR("\n                                    ",F.TD({class:"text-right p-r-1 nowrap"},"Image quality (%)"),"\n                                    ",F.TD(C._TemplateWith(function(){return{key:V.call("quality"),min:V.call("1"),max:V.call("100")}},function(){return V.include(e.lookupTemplate("inputNumber"))})),"\n                                "),"\n                            "]}),"\n                        "),"\n                    "),"\n                "),"\n            "),"\n        "),"\n        ",F.DIV({class:"viewport-element hidden"}),"\n        ",F.DIV({class:"image-preview card-round m-t-2 text-center"},"\n            ",F.H4({class:"m-t-0"},"Image Preview"),"\n            ",F.IMG({class:"viewport-preview"}),"\n        "),"\n    "]})})})},"downloadDialog.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},4);var c=void 0;n.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){c=e}},5);var u=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){u=e}},6);var l=void 0,d=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){l=e},cornerstoneTools:function(e){d=e}},7),u.viewerbase.getImageDownloadDialogAnnotationTools=function(){return["length","probe","simpleAngle","arrowAnnotate","ellipticalRoi","rectangleRoi","freehand"]},i.imageDownloadDialog.onCreated(function(){var e=i.instance();e.schema=new c({width:{type:Number},height:{type:Number},name:{type:String,defaultValue:"image"},type:{type:String,allowedValues:["jpeg","png"],valuesLabels:["JPEG","PNG"],defaultValue:"jpeg"},showAnnotations:{type:Boolean,label:"Show Annotations",defaultValue:!0},quality:{type:Number,defaultValue:100}}),e.changeObserver=new a.Dependency,e.keepAspect=new o(!0),e.showAnnotations=new o(!1),e.lastImage={},e.getConfirmCallback=function(){return function(){e.downloadImage()}}}),i.imageDownloadDialog.onRendered(function(){var e=i.instance(),t=u.viewerbase.viewportUtils;e.$viewportElement=e.$(".viewport-element"),e.viewportElement=e.$viewportElement[0],e.$viewportPreview=e.$(".viewport-preview"),e.viewportPreview=e.$viewportPreview[0],l.enable(e.viewportElement),e.downloadCanvas=s(e.viewportElement).find("canvas")[0],e.form=e.$("form").data("component"),e.setElementSize=function(t,n,i,a){s(t)[i](a),n[i]=a,n.style[i]=a+"px",e.form.item(i).$element.val(a)},e.toggleAnnotations=function(t){var n=t?"enable":"disable";u.viewerbase.getImageDownloadDialogAnnotationTools().forEach(function(t){return d[t][n](e.viewportElement)})},e.updateViewportPreview=function(){e.$viewportElement.one("cornerstoneimagerendered",function(t){a.afterFlush(function(){var n=l.getEnabledElement(t.currentTarget),i=e.form.value(),a=e.viewportPreview,o="image/"+i.type,r="png"===i.type?1:i.quality/100,c=e.downloadCanvas.toDataURL(o,r);a.src=c;var u=s(n.element),d=u.width(),m=u.height();if(d>512||m>512){var p=512/Math.max(d,m);m*=p,d*=p}a.width=d,a.height=m})})},e.downloadImage=function(){var t=e.form.value(),n=document.createElement("a");if(n.download=t.name+"."+t.type,n.href=e.viewportPreview.src,document.createEvent){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)}else n.fireEvent&&n.fireEvent("onclick")},e.autorun(function(){e.changeObserver.depend(),r.get("UpdateDownloadViewport");var n=t.getActiveViewportElement();if(n){var i=l.getEnabledElement(n),a=Object.assign({},i.viewport);delete a.scale,a.translation={x:0,y:0},l.loadImage(i.image.imageId).then(function(t){e.lastImage=t;var n=e.viewportElement,i=e.downloadCanvas,o=e.form.value();l.displayImage(n,t),l.setViewport(n,a),l.resize(n,!0),e.toggleAnnotations(o.showAnnotations);var r=Math.min(o.width||t.width,16384),s=Math.min(o.height||t.height,16384);e.setElementSize(n,i,"width",r),e.setElementSize(n,i,"height",s),l.fitToWindow(n),e.updateViewportPreview()})}})}),i.imageDownloadDialog.events({"click .js-keep-aspect":function(e,t){var n=t.keepAspect.get();t.keepAspect.set(!n),t.$("[data-key=width]").trigger("input")},"change [data-key=showAnnotations], change [data-key=type]":function(e,t){t.changeObserver.changed()},"input [data-key=quality]":function(e,t){t.changeObserver.changed()},"input [data-key=width]":function(e,t){var n=t.viewportElement,i=t.downloadCanvas,a=t.form.value(),o=t.lastImage,r=o.width,s=o.height,c=a.width;if(t.setElementSize(n,i,"width",c),t.keepAspect.get()){var u=c/r,l=Math.round(s*u);t.setElementSize(n,i,"height",l)}t.changeObserver.changed()},"input [data-key=height]":function(e,t){var n=t.viewportElement,i=t.downloadCanvas,a=t.form.value(),o=t.lastImage,r=o.width,s=o.height,c=a.height;if(t.setElementSize(n,i,"height",c),t.keepAspect.get()){var u=c/s,l=Math.round(r*u);t.setElementSize(n,i,"width",l)}t.changeObserver.changed()}}),i.imageDownloadDialog.helpers({keepAspect:function(){return i.instance().keepAspect.get()},showQuality:function(){var e=i.instance();return e.changeObserver.depend(),!e.form||"jpeg"===e.form.item("type").value()}})}},toolbarSectionButton:{"template.toolbarSectionButton.js":function(){M.__checkName("toolbarSectionButton"),M.toolbarSectionButton=new M("Template.toolbarSectionButton",function(){var e=this;return C.If(function(){return V.call(V.dot(e.lookup("."),"buttonTemplateName"))},function(){return["\n        ",C._TemplateWith(function(){return{template:V.call(V.dot(e.lookup("."),"buttonTemplateName")),data:V.call(e.lookup("."))}},function(){return V.include(function(){return V.call(M.__dynamic)})}),"\n    "]},function(){return["\n        ",F.DIV({id:function(){return V.mustache(V.dot(e.lookup("."),"id"))},tabindex:"1",class:function(){return["toolbarSectionButton rp-x-1 ",V.mustache(V.dot(e.lookup("."),"classes"))," ",V.mustache(e.lookup("activeClass"))," ",C.If(function(){return V.dataMustache(e.lookup("or"),V.dot(e.lookup("."),"disabled"),V.dataMustache(e.lookup("disableButton")))},function(){return"disabled"})," ",C.If(function(){return V.call(V.dot(e.lookup("."),"subTools"))},function(){return"expandable"})]},title:function(){return V.mustache(V.dot(e.lookup("."),"tooltipTitle"))}},"\n            ",F.DIV({class:"svgContainer"},"\n                ",C.Let({svg:function(){return V.call(e.lookup("svgLink"))},icon:function(){return V.call(e.lookup("iconClasses"))}},function(){return["\n                    ",C.If(function(){return V.call(e.lookup("svg"))},function(){return["\n                        ",F.SVG("\n                            ",F.USE({"xlink:href":function(){return V.mustache(e.lookup("absoluteUrl"),e.lookup("svg"))}}),"\n                        "),"\n                    "]},function(){return["\n                        ",F.I({class:function(){return V.mustache(e.lookup("icon"))}}),"\n                    "]}),"\n                "]}),"\n            "),"\n            ",F.DIV({class:"buttonLabel"},"\n                ",F.SPAN(C.View("lookup:..title",function(){return V.mustache(V.dot(e.lookup("."),"title"))})),"\n                ",C.If(function(){return V.call(V.dot(e.lookup("."),"subTools"))},function(){return["\n                    ",F.I({class:"fa fa-caret-down expanded-status","aria-hidden":"true"}),"\n                "]}),"\n            "),"\n            ",C.If(function(){return V.call(V.dot(e.lookup("."),"subTools"))},function(){return["\n                ",F.DIV({class:"toolbarSectionDrawerContainer"},"\n                    ",F.DIV({class:"toolbarSectionDrawer"},"\n                        ",C.Each(function(){return{_sequence:V.call(V.dot(e.lookup("."),"subTools")),_variable:"subTool"}},function(){return["\n                            ",C._TemplateWith(function(){return V.call(e.lookup("subTool"))},function(){return V.include(e.lookupTemplate("toolbarSectionButton"))}),"\n                        "]}),"\n                    "),"\n                "),"\n            "]}),"\n        "),"\n    "]})})},"toolbarSectionButton.js":function(e,t,n){var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},1);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},2);var s=void 0;n.watch(e("meteor/underscore"),{_:function(e){s=e}},3),o.toolbarSectionButton.onCreated(function(){var e=o.instance();e.isActive=function(t){i.commands.last.dep.depend();var n=e.data.subTools,a=e.data.id===t,o=n&&s.findWhere(n,{id:t}),c=-1!==(r.get("ToolManagerActiveCommandButtons")||[]).indexOf(e.data.id);return"function"==typeof e.data.active&&e.data.active()||a||o||c},e.getActiveToolSubProperty=function(e,t){var n=o.instance(),i=n.data.subTools,a=n.data[e],r=n.data.id;if(i&&t!==r&&n.isActive(t)){var c=s.findWhere(i,{id:t});return c?c[e]:a}return a},e.autorun(function(t){r.get("ToolManagerActiveToolUpdated");var n=i.commands.last.get();if(!t.firstRun){var a=e.data.id,o=i.viewerbase.toolManager.getActiveTool();if(n===a&&!e.isActive(o)){var s=function(t){t.addClass("active"),setTimeout(function(){if(!t.hasClass("expandable")||!t.find(".toolbarSectionButton.active").length){var n=i.viewerbase.toolManager.getActiveTool();e.isActive(n)||t.removeClass("active")}},100)},c=e.$(".toolbarSectionButton").first();s(c);var u=c.closest(".toolbarSectionButton.expandable");u.length&&s(u)}}})}),o.toolbarSectionButton.helpers({activeClass:function(){r.get("ToolManagerActiveToolUpdated");var e=o.instance(),t=i.viewerbase.toolManager.getActiveTool();return e.isActive(t)?"active":""},svgLink:function(){r.get("ToolManagerActiveToolUpdated");var e=o.instance(),t=i.viewerbase.toolManager.getActiveTool(),n=e.getActiveToolSubProperty("svgLink",t);return s.isFunction(n)?n():n},iconClasses:function(){r.get("ToolManagerActiveToolUpdated");var e=o.instance(),t=i.viewerbase.toolManager.getActiveTool(),n=e.getActiveToolSubProperty("iconClasses",t);return s.isFunction(n)?n():n},disableButton:function(){r.get("activeViewport"),r.get("LayoutManagerUpdated");var e=o.instance(),t=i.commands.isDisabled(e.data.id),n=e.data.disableFunction&&e.data.disableFunction();return t||n}}),o.toolbarSectionButton.events({"click .toolbarSectionButton:not(.expandable)":function(e,t){e.stopPropagation(),a(e.currentTarget).hasClass("disabled")||i.commands.run(t.data.id)}})}},toolbarSectionTools:{"template.toolbarSectionTools.js":function(){M.__checkName("toolbarSectionTools"),M.toolbarSectionTools=new M("Template.toolbarSectionTools",function(){var e=this;return F.DIV({class:"toolbarSectionTools pull-left m-t-1 rm-l-3"},"\n        ",C.Each(function(){return{_sequence:V.call(e.lookup("toolbarButtons")),_variable:"toolbarButton"}},function(){return["\n            ",C._TemplateWith(function(){return V.call(e.lookup("toolbarButton"))},function(){return V.include(e.lookupTemplate("toolbarSectionButton"))}),"\n        "]}),"\n    ")})},"toolbarSectionTools.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},1),i.toolbarSectionTools.events({"click .expandable":function(e,t){var n=a(e.currentTarget),i=n.hasClass("expanded");n.toggleClass("expanded",!i);var o=n.find(".toolbarSectionDrawerContainer:first");if(o.css("left",""),!i){var r=function(e){var t=e.originalEvent,i=t&&t.propertyName;if(i&&"transform"===i){n.off("transitionend",r);var s=o.outerWidth(),c=o.offset().left,u=a(document.body).outerWidth(),l=c+s;if(c<0)o.css("left","calc(50% - "+c+"px)");else if(l>u){var d=l-u;o.css("left","calc(50% - "+d+"px)")}}};n.on("transitionend",r)}},"focusout .expandable":function(e,t){var n=e.target,i=e.currentTarget;o.defer(function(){var e=a(":focus"),t=a(i).closest(".expandable"),o=t.find(":focus").length;if(!e.length||!o){if(i!==n&&e[0]===i)return;t.removeClass("expanded")}})}})}},confirmDeleteDialog:{"template.confirmDeleteDialog.js":function(){M.__checkName("confirmDeleteDialog"),M.confirmDeleteDialog=new M("Template.confirmDeleteDialog",function(){var e=this;return F.DIV({id:"confirmDeleteDialog",class:"dialog-animated",tabindex:"0"},"\n        ",C.If(function(){return V.call(e.lookup("title"))},function(){return["\n            ",F.H5(C.View("lookup:title",function(){return V.mustache(e.lookup("title"))})),"\n        "]},function(){return["\n            ",F.H5("Remove data from Timepoint?"),"\n        "]}),"\n        ",C.If(function(){return V.call(e.lookup("text"))},function(){return["\n            ",F.P(C.View("lookup:text",function(){return V.mustache(e.lookup("text"))})),"\n        "]},function(){return["\n            ",F.P("Are you sure you would like to remove the measurement data at this timepoint?"),"\n        "]}),F.Raw('\n        <button id="cancel" class="btn btn-link" tabindex="1">Cancel</button>\n        <button id="confirm" class="btn btn-primary" tabindex="0">OK</button>\n    '))})},"confirmDeleteDialog.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("../../../lib/dialogUtils"),{dialogUtils:function(e){a=e}},1);var o={ESC:27,ENTER:13};i.confirmDeleteDialog.events({"click #cancel, click #close":function(){a.closeHandler(!1)},"click #confirm":function(){a.closeHandler()},"keydown #confirmDeleteDialog":function(e){if(e.which===o.ESC)return a.closeHandler(!1),!1;!1!==this.keyPressAllowed&&e.which===o.ENTER&&a.closeHandler()}})}},textMarkerDialogs:{"template.textMarkerDialogs.js":function(){M.__checkName("textMarkerDialogs"),M.textMarkerDialogs=new M("Template.textMarkerDialogs",function(){var e=this;return[F.getTag("dialog")({id:"textMarkerOptionsDialog",oncontextmenu:"return false",class:"textMarkerDialog noselect"},"\n        ",F.H5("Spine Labels"),"\n        ",F.A({class:"closeTextMarkerDialogs"},V.include(e.lookupTemplate("iconCrossCircle"))),"\n        ",F.DIV({class:"optionsDiv"},"\n            ",F.DIV({class:"select2-wrapper optionBox"},"\n                ",F.LABEL({for:"startFrom"},"Label: "),"\n                ",F.SELECT({name:"start",id:"startFrom",tabindex:"-1",class:"select2"},"\n                    ",F.Comment(" Cervical spine !"),"\n                    ",F.OPTION({value:"C1",selected:""},"C1"),"\n                    ",F.OPTION({value:"C2"},"C2"),"\n                    ",F.OPTION({value:"C3"},"C3"),"\n                    ",F.OPTION({value:"C4"},"C4"),"\n                    ",F.OPTION({value:"C5"},"C5"),"\n                    ",F.OPTION({value:"C6"},"C6"),"\n                    ",F.OPTION({value:"C7"},"C7"),"\n\n                    ",F.Comment(" Thoracic spine !"),"\n                    ",F.OPTION({value:"T1"},"T1"),"\n                    ",F.OPTION({value:"T2"},"T2"),"\n                    ",F.OPTION({value:"T3"},"T3"),"\n                    ",F.OPTION({value:"T4"},"T4"),"\n                    ",F.OPTION({value:"T5"},"T5"),"\n                    ",F.OPTION({value:"T6"},"T6"),"\n                    ",F.OPTION({value:"T7"},"T7"),"\n                    ",F.OPTION({value:"T8"},"T8"),"\n                    ",F.OPTION({value:"T9"},"T9"),"\n                    ",F.OPTION({value:"T10"},"T10"),"\n                    ",F.OPTION({value:"T11"},"T11"),"\n                    ",F.OPTION({value:"T12"},"T12"),"\n\n                    ",F.Comment(" Lumbar spine !"),"\n                    ",F.OPTION({value:"L1"},"L1"),"\n                    ",F.OPTION({value:"L2"},"L2"),"\n                    ",F.OPTION({value:"L3"},"L3"),"\n                    ",F.OPTION({value:"L4"},"L4"),"\n                    ",F.OPTION({value:"L5"},"L5"),"\n                "),"\n            "),"\n            ",F.DIV({class:"optionBox"},"\n                ",F.DIV({class:"btn-group iconSwitch","data-toggle":"buttons"},"\n                    ",F.LABEL({for:"ascending",class:"btn btn-link",title:"Add labels from head to feet (down) or feet to head (up)","data-toggle":"tooltip","data-container":"body"},"\n                        ",F.INPUT({type:"checkbox",id:"ascending"})," ",F.SPAN({class:"on"},F.I({class:"fa fa-long-arrow-up","aria-hidden":"true"}))," ",F.SPAN({class:"off"},F.I({class:"fa fa-long-arrow-down","aria-hidden":"true"})),"\n                    "),"\n                "),"\n            "),"\n            ",F.BUTTON({id:"clearLabels",class:"btn viewerBtn btn-xs",type:"button"},"\n                Clear Labels ",F.I({class:"viewerIcon-clear"}),"\n            "),"\n        "),"        \n    "),"\n\n    ",F.getTag("dialog")({id:"textMarkerRelabelDialog",oncontextmenu:"return false",class:"textMarkerDialog noselect"},"\n        ",F.H5("Change Spine Label"),"\n        ",F.DIV({class:"relabelOptions"},"\n\n            ",F.DIV({class:"select2-wrapper optionBox"},"\n                ",F.LABEL({for:"relabelSelect"},"Label:"),"\n                ",F.SELECT({name:"relabelSelect",class:"relabelSelect"},"\n                    ",F.Comment(" Cervical spine !"),"\n                    ",F.OPTION({value:"C1"},"C1"),"\n                    ",F.OPTION({value:"C2"},"C2"),"\n                    ",F.OPTION({value:"C3"},"C3"),"\n                    ",F.OPTION({value:"C4"},"C4"),"\n                    ",F.OPTION({value:"C5"},"C5"),"\n                    ",F.OPTION({value:"C6"},"C6"),"\n                    ",F.OPTION({value:"C7"},"C7"),"\n\n                    ",F.Comment(" Thoracic spine !"),"\n                    ",F.OPTION({value:"T1"},"T1"),"\n                    ",F.OPTION({value:"T2"},"T2"),"\n                    ",F.OPTION({value:"T3"},"T3"),"\n                    ",F.OPTION({value:"T4"},"T4"),"\n                    ",F.OPTION({value:"T5"},"T5"),"\n                    ",F.OPTION({value:"T6"},"T6"),"\n                    ",F.OPTION({value:"T7"},"T7"),"\n                    ",F.OPTION({value:"T8"},"T8"),"\n                    ",F.OPTION({value:"T9"},"T9"),"\n                    ",F.OPTION({value:"T10"},"T10"),"\n                    ",F.OPTION({value:"T11"},"T11"),"\n                    ",F.OPTION({value:"T12"},"T12"),"\n\n                    ",F.Comment(" Lumbar spine !"),"\n                    ",F.OPTION({value:"L1"},"L1"),"\n                    ",F.OPTION({value:"L2"},"L2"),"\n                    ",F.OPTION({value:"L3"},"L3"),"\n                    ",F.OPTION({value:"L4"},"L4"),"\n                    ",F.OPTION({value:"L5"},"L5"),"\n                "),"\n            "),"\n        "),"\n        ",F.DIV({class:"relabelButtons"},"\n            ",F.BUTTON({class:"relabelRemove btn btn-xs btn-secondary viewerBtn"},"Delete"),"\n            ",F.BUTTON({class:"relabelConfirm btn btn-xs viewerBtn"},"Save"),"\n        "),"\n        ",F.DIV({class:"dialog arrow"},"\n        "),"\n    ")]})},"textMarkerDialogs.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var o=void 0;n.watch(e("../../../lib/toolManager"),{toolManager:function(e){o=e}},2);var r=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){r=e}},3),i.textMarkerDialogs.events({"change #startFrom":function(e){d.textMarker.getConfiguration().current=a(e.target).val()},"change #ascending":function(e){var t=d.textMarker.getConfiguration();t.ascending=a(e.target).is(":checked");var n=t.markers.indexOf(t.current);t.current=t.markers[n];var i=t.current;a("#startFrom").val(i).trigger("change")},"click #clearLabels":function(){var e=r.getActiveViewportElement(),t="textMarker",n=d.globalImageIdSpecificToolStateManager.toolState,i=d.getToolState(e,"stack");i&&i.data.length&&i.data[0].imageIds.length&&i.data[0].imageIds.forEach(function(e){if(n.hasOwnProperty(e)){var i=n[e];i.hasOwnProperty(t)&&delete i[t]}}),u.updateImage(e)},"click .closeTextMarkerDialogs":function(){var e=o.getDefaultTool();o.setActiveTool(e),document.getElementById("textMarkerOptionsDialog").close(),a("#spine").removeClass("active"),a("#"+e).addClass("active")}}),i.textMarkerDialogs.onRendered(function(){var e=a("#textMarkerOptionsDialog");e.draggable(),U.registerDialog(e.get(0));var t=a("#textMarkerRelabelDialog");t.draggable(),U.registerDialog(t.get(0)),a(document).on("click",function(e){a(e.target).closest(".select2-wrapper").length||setTimeout(function(){a("#startFrom, .relabelSelect").select2("close")},200)}),a(document).on("touchmove",function(e){a(e.target).closest(".select2-container").length||setTimeout(function(){a("#startFrom, .relabelSelect").select2("close")},200)}),a(function(){FastClick.attach(document.body);var e=a("#startFrom, .relabelSelect");e.select2({templateResult:function(e,t){return e.id?(t.className+=" needsclick",e.text):e.text},placeholder:"C1",minimumResultsForSearch:-1,theme:"viewerDropdown"}),e.each(function(e,t){a(t).data("select2").$container.find("*").addClass("needsclick")})})})}},seriesQuickSwitch:{"template.seriesQuickSwitch.js":function(){M.__checkName("seriesQuickSwitch"),M.seriesQuickSwitch=new M("Template.seriesQuickSwitch",function(){var e=this;return C.If(function(){return V.call(e.lookup("shallDisplay"))},function(){return["\n        ",F.DIV({class:function(){return["series-quick-switch ",V.mustache(e.lookup("side"))," clearfix noselect"]}},"\n            ",F.DIV({class:"series-switch rp-t-1 rp-x-1"},"\n                ",F.DIV({class:"title-label"},"Series"),"\n                ",F.DIV({class:"series-box r-font"},"\n                    ",C.Each(function(){return{_sequence:V.call(e.lookup("seriesItems")),_variable:"seriesItem"}},function(){return["\n                        ",F.DIV({class:function(){return["series-item ",V.mustache(V.dot(e.lookup("seriesItem"),"class"))]}},C.View("lookup:seriesItem.value",function(){return V.mustache(V.dot(e.lookup("seriesItem"),"value"))})),"\n                    "]}),"\n                    ",C._TemplateWith(function(){return{class:V.call("series-browser"),scrollStep:V.call(201)}},function(){return V.include(e.lookupTemplate("scrollArea"),function(){return["\n                        ",F.DIV({class:"clearfix thumbnails-wrapper"},"\n                            ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({studyMetadata:V.dot(e.lookup("instance"),"currentStudy")}))},function(){return V.include(e.lookupTemplate("studyBrowserSeries"))}),"\n                        "),"\n                    "]})}),"\n                "),"\n            "),"\n            ",F.DIV({class:"study-switch rp-t-1 rp-x-1"},"\n                ",F.DIV({class:"title-label"},"Study"),"\n                ",F.DIV({class:"study-box r-font"},"\n                    ",C._TemplateWith(function(){return{class:V.call("study-browser"),scrollStep:V.call(91)}},function(){return V.include(e.lookupTemplate("scrollArea"),function(){return["\n                        ",C._TemplateWith(function(){return{template:V.call(e.lookup("studyBrowserTemplate")),data:V.call(V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({currentStudy:V.dot(e.lookup("instance"),"currentStudy")})))}},function(){return V.include(function(){return V.call(M.__dynamic)})}),"\n                    "]})}),"\n                "),"\n            "),"\n        "),"\n    "]})})},"seriesQuickSwitch.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3),i.seriesQuickSwitch.onCreated(function(){var e=i.instance();e.currentStudy=new a,e.getViewportData=function(e){var t=r.viewerbase.layoutManager;return t&&t.viewportData&&t.viewportData[e]};var t=e.data.viewportIndex;e.study={},e.lastStudy={},e.autorun(function(){r.viewerbase.layoutManager.observer.depend();var n=e.getViewportData(t);n&&(e.study=r.viewer.Studies.findBy({studyInstanceUid:n.studyInstanceUid})),e.study||(e.study=r.viewer.Studies.getElementByIndex(0)),e.study&&e.study.studyInstanceUid!==e.lastStudy.studyInstanceUid&&(e.currentStudy.set(e.study),e.lastStudy=e.study)})}),i.seriesQuickSwitch.helpers({shallDisplay:function(){var e=i.instance().data,t=e.rows,n=e.columns;return r.viewer.displaySeriesQuickSwitch&&1===t&&n<=2},side:function(){var e=i.instance().data,t=e.columns,n=e.viewportIndex;return 1===t?"":0===n?"left":"right"},seriesItems:function(){var e=i.instance();r.viewerbase.layoutManager.observer.depend();var t=e.data.viewportIndex,n=r.viewerbase.layoutManager.viewportData[t],a=e.currentStudy.get(),o=[],s=a.displaySets;s.length||(s=r.viewerbase.sortingManager.getDisplaySets(a),a.displaySets=s,a.setDisplaySets(s),a.forEachDisplaySet(function(e){r.viewerbase.stackManager.makeAndAddStack(a,e)}));for(var c=s.length,u=0;u<c;u++){var l=s[u],d={class:""};if(o.push(d),8===u&&9!==c){d.class+=" count",d.value=c;break}l.displaySetInstanceUid===n.displaySetInstanceUid&&(d.class+=" active")}return o},studyBrowserTemplate:function(){return r.viewer.quickSwitchStudyBrowserTemplate||"studyBrowserQuickSwitch"}}),i.seriesQuickSwitch.events({"mouseenter .series-switch, rescale .series-switch":function(e,t){var n=o(e.currentTarget),i=n.offset().left+n.outerWidth();n.find(".series-browser").width(i-i%237);var a=t.$(".series-quick-switch");a.is(":hover")&&a.addClass("series-triggered")},"mouseleave .series-browser":function(e,t){o(e.currentTarget).children(".scrollable").stop().animate({scrollTop:0},300,"swing")},"mouseleave .series-quick-switch":function(e,t){o(e.currentTarget).removeClass("series-triggered")}})}},studySeriesQuickSwitch:{"template.studySeriesQuickSwitch.js":function(){M.__checkName("studySeriesQuickSwitch"),M.studySeriesQuickSwitch=new M("Template.studySeriesQuickSwitch",function(){var e=this;return F.DIV({class:function(){return["quickSwitchWrapper ",V.mustache(e.lookup("side"))]}},"\n        ",F.DIV({class:function(){return["quickSwitch js-quick-switch clearfix ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"right")},function(){return"rp-l-3"}),C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"left")},function(){return"rp-r-3"})]}},"\n            ",F.DIV({class:function(){return["switchSection switchSectionStudy rp-t-1 rp-x-1 ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"right")},function(){return"pull-left"},function(){return"pull-right"})]}},"\n                ",F.Raw('<div class="label">Study</div>'),"\n                ",F.DIV({class:"studySwitch"},"\n                    ",F.Raw('<div class="studyBox"></div>'),"\n                    ",F.DIV({class:"switchHover studyHover clearfix"},"\n                        ",F.DIV({class:function(){return["scrollArea ",C.If(function(){return V.dataMustache(e.lookup("isMac"))},function(){return"is-mac"})]}},"\n                            ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({timepointViewType:"key"}))},function(){return V.include(e.lookupTemplate("studyTimepointBrowser"))}),"\n                        "),"\n                    "),"\n                "),"\n            "),"\n            ",F.DIV({class:function(){return["switchSection switchSectionSeries rp-t-1 rp-x-1 ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"right")},function(){return"pull-left"},function(){return"pull-right"})]}},"\n                ",C.Let({thumbnailsList:function(){return V.call(V.dataMustache(e.lookup("studyThumbnails"),e.lookup("currentStudy")))}},function(){return["\n                    ",F.DIV({class:"label"},"Series"),"\n                    ",F.DIV({class:"seriesSwitch clearfix"},"\n                        ",C.Each(function(){return{_sequence:V.call(e.lookup("thumbnailsList")),_variable:"thumbnail"}},function(){return["\n                            ",C.If(function(){return V.dataMustache(e.lookup("lt"),e.lookup("@index"),8)},function(){return["\n                                ",F.DIV({class:function(){return["seriesItem ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"right")},function(){return"pull-left"},function(){return"pull-right"})," ",C.If(function(){return V.dataMustache(e.lookup("isDisplaySetActive"),V.dot(e.lookup("thumbnail"),"stack","displaySetInstanceUid"),e.lookup("viewportIndex"))},function(){return"active"})]}}),"\n                            "]},function(){return["\n                                ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("@index"),8)},function(){return["\n                                    ",F.DIV({class:function(){return["seriesItem count ",C.If(function(){return V.dataMustache(e.lookup("eq"),e.lookup("side"),"right")},function(){return"pull-left"},function(){return"pull-right"})]}},C.View("lookup:thumbnailsList.length",function(){return V.mustache(V.dot(e.lookup("thumbnailsList"),"length"))})),"\n                                "]}),"\n                            "]}),"\n                        "]}),"\n                        ",F.DIV({class:"switchHover seriesHover clearfix"},"\n                            ",F.DIV({class:function(){return["scrollArea ",C.If(function(){return V.dataMustache(e.lookup("isMac"))},function(){return"is-mac"})]}},"\n                                ",F.DIV({class:"thumbnailsWrapper"},"\n                                    ",C.Each(function(){return{_sequence:V.call(e.lookup("thumbnailsList")),_variable:"thumbnail"}},function(){return["\n                                        ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({thumbnail:e.lookup("thumbnail")}))},function(){return V.include(e.lookupTemplate("thumbnailEntry"))}),"\n                                    "]}),"\n                                "),"\n                            "),"\n                        "),"\n                    "),"\n                "]}),"\n            "),"\n        "),"\n    ")})},"studySeriesQuickSwitch.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/jquery"),{$:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4),i.studySeriesQuickSwitch.onCreated(function(){var e=i.instance();e.data.currentStudy=new a,e.getViewportData=function(e){var t=s.viewerbase.layoutManager;return t&&t.viewportData&&t.viewportData[e]};var t=e.data.viewportIndex;e.study={},e.lastStudy={},e.autorun(function(){o.get("LayoutManagerUpdated");var n=e.getViewportData(t);e.study=n?s.viewer.Studies.findBy({studyInstanceUid:n.studyInstanceUid}):s.viewer.Studies.getElementByIndex(0),e.study&&e.study.studyInstanceUid!==e.lastStudy.studyInstanceUid&&(e.data.currentStudy.set(e.study),e.lastStudy=e.study)})});var c=function(e){var t=e.scrollHeight,n=e.offsetHeight,i=e.scrollTop,a=r(e).find(".thumbnailsWrapper").css("transform"),o=0;a&&"none"!==a&&(o=parseInt(a.match(/-?[\d\.]+/g)[5])),t>n+i+o?e.classList.add("show-scroll-indicator-down"):e.classList.remove("show-scroll-indicator-down"),i>0?e.classList.add("show-scroll-indicator-up"):e.classList.remove("show-scroll-indicator-up")};i.studySeriesQuickSwitch.events({"mouseenter .js-quick-switch, mouseenter .js-quick-switch .switchSectionSeries":function(e,t){t.$(".quickSwitchWrapper").addClass("overlay"),r(e.currentTarget).addClass("hover"),t.$(".scrollArea").each(function(e,t){return c(t)})},"mouseleave .js-quick-switch":function(e,t){t.$(".js-quick-switch, .switchSectionSeries").removeClass("hover"),t.$(".quickSwitchWrapper").removeClass("overlay")},"click .thumbnailEntry":function(e,t){t.$(".js-quick-switch, .switchSectionSeries").removeClass("hover"),t.$(".quickSwitchWrapper").removeClass("overlay")},"click .study-browser-item":function(e,t){t.$(".switchSectionSeries").addClass("hover")},"scroll .scrollArea":function(e){c(e.currentTarget)}}),i.studySeriesQuickSwitch.helpers({currentStudy:function(){return i.instance().data.currentStudy.get()},isMac:function(){return window.navigator.appVersion.indexOf("Mac")}})}},studyTimepointBrowser:{"template.studyTimepoint.js":function(){M.__checkName("studyTimepoint"),M.studyTimepoint=new M("Template.studyTimepoint",function(){var e=this;return F.DIV({class:"studyTimepointWrapper"},"\n        ",F.DIV({class:"studyTimepoint"},"\n            ",C.Each(function(){return{_sequence:V.call(e.lookup("studies")),_variable:"study"}},function(){return["\n                ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({study:e.lookup("study"),active:V.dataMustache(e.lookup("isActive"),e.lookup("study"))}))},function(){return V.include(e.lookupTemplate("studyTimepointStudy"))}),"\n            "]}),"\n        "),"\n    ")})},"studyTimepoint.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},1),i.studyTimepoint.onCreated(function(){var e=i.instance(),t=e.data;e.isActive={},!0===t.isUnassociatedStudy&&1===t.studyInstanceUids.length&&(e.isActive[t.studyInstanceUids[0]]=!0)}),i.studyTimepoint.onRendered(function(){var e=i.instance().$(".studyTimepoint"),t=e.closest(".studyTimepointWrapper").closest(".timepoint-item"),n=e.is(":visible");n||t.addClass("active"),e.trigger("displayStateChanged"),n||t.removeClass("active")}),i.studyTimepoint.events({"selectionChanged .studyTimepoint":function(e,t,n){var i=a(n.selection),r=t.$(".studyTimepoint");if(n.isQuickSwitch){var s=o.viewer.Studies.findBy({studyInstanceUid:n.studyInstanceUid});t.data.currentStudy.set(s),r=r.closest(".studyTimepointBrowser")}if(r.find(".study-browser-item").not(i).removeClass("active"),n.isQuickSwitch)t.isActive={},i.addClass("active");else{var c=t.$(".studyTimepoint");t.$(".studyTimepointWrapper").css("max-height","inherit"),i.removeClass("loading"),i.toggleClass("active"),i.find(".study-browser-series").one("transitionend",function(){return c.trigger("displayStateChanged")})}t.isActive[n.studyInstanceUid]=i.hasClass("active")},"displayStateChanged .studyTimepoint":function(e,t){var n=a(e.currentTarget);n.closest(".studyTimepointWrapper").css("max-height",n.height())}}),i.studyTimepoint.helpers({isActive:function(e){var t=i.instance();if(e.studyInstanceUid)return t.isActive[e.studyInstanceUid]}})},"template.studyTimepointBrowser.js":function(){M.__checkName("studyTimepointBrowser"),M.studyTimepointBrowser=new M("Template.studyTimepointBrowser",function(){var e=this;return C.Let({timepointList:function(){return V.call(e.lookup("timepoints"))}},function(){return["\n        ",F.DIV({class:function(){return["studyTimepointBrowser noselect ",C.If(function(){return V.dataMustache(e.lookup("shallShowViewType"),e.lookup("timepointList"))},function(){return"viewTypeVisible"})]}},"\n            ",F.DIV({class:"timepointButtonContainer p-t-2"},"\n                ",C._TemplateWith(function(){return V.call(e.lookup("viewTypeButtonGroupData"))},function(){return V.include(e.lookupTemplate("roundedButtonGroup"))}),"\n            "),"\n            ",F.DIV({class:"studyTimepointScrollArea"},"\n                ",F.DIV({class:"p-x-1"},"\n                    ",C.If(function(){return V.call(V.dot(e.lookup("timepointList"),"length"))},function(){return["\n                        ",C.Each(function(){return{_sequence:V.call(e.lookup("timepointList")),_variable:"timepoint"}},function(){return["\n                            ",F.DIV({class:"timepoint-browser-item"},"\n                                ",F.DIV({class:"timepoint-item p-y-2"},"\n                                    ",F.DIV({class:"timepointHeader"},"\n                                        ",F.DIV({class:"timepoint-details clearfix"},"\n                                            ",F.DIV({class:"timepoint-title pull-left"},"\n                                                ",C.View("lookup:timepointApi.title",function(){return V.mustache(V.dot(e.lookup("timepointApi"),"title"),e.lookup("timepoint"))}),"\n                                            "),"\n                                            ",F.DIV({class:"timepoint-expand-icon pull-right"},"\n                                                ",F.I({class:"fa fa-chevron-down"}),"\n                                            "),"\n                                            ",F.DIV({class:"timepoint-date pull-right m-r-1"},C.View("lookup:formatDA",function(){return V.mustache(e.lookup("formatDA"),V.dot(e.lookup("timepoint"),"earliestDate"),"D-MMM-YYYY")})),"\n                                        "),"\n                                        ",F.DIV({class:"timepoint-summary"},C.View("lookup:modalitiesSummary",function(){return V.mustache(e.lookup("modalitiesSummary"),e.lookup("timepoint"))})),"\n                                    "),"\n                                    ",C._TemplateWith(function(){return{studies:V.call(V.dataMustache(e.lookup("studies"),e.lookup("timepoint"))),index:V.call(e.lookup("@index")),viewportIndex:V.call(V.dot(e.lookup("."),"viewportIndex")),currentStudy:V.call(V.dot(e.lookup("."),"currentStudy"))}},function(){return V.include(e.lookupTemplate("studyTimepoint"))}),"\n                                "),"\n                            "),"\n                            ",F.HR(),"\n                        "]}),"\n                        ",C.If(function(){return V.dataMustache(e.lookup("and"),V.dot(e.lookup("."),"currentStudy"),V.dataMustache(e.lookup("not"),e.lookup("showAdditionalTimepoints")),e.lookup("hasAdditionalTimepoints"))},function(){return["\n                            ",F.DIV({class:"study-item-box additional"},"\n                                Show additional timepoints\n                            "),"\n                        "]}),"\n                    "]},function(){return["\n                        ",F.DIV({class:"p-t-2"},"\n                            ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({studies:e.lookup("studies")}))},function(){return V.include(e.lookupTemplate("studyTimepoint"))}),"\n                        "),"\n                    "]}),"\n                "),"\n            "),"\n        "),"\n    "]})})},"studyTimepointBrowser.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var o=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){o=e}},1);var r=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){r=e}},2);var s=void 0;n.watch(e("meteor/underscore"),{_:function(e){s=e}},3);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},4);var u=void 0;n.watch(e("../../../lib/classes/OHIFError"),{OHIFError:function(e){u=e}},5),i.studyTimepointBrowser.onCreated(function(){var e=i.instance();e.timepointViewType=new o(e.data.timepointViewType),e.showAdditionalTimepoints=new o(!0),e.getCurrentStudy=function(){return e.data.currentStudy&&e.data.currentStudy.get()},e.getStudies=function(e){return e?e.studyInstanceUids.map(function(e){var t={studyInstanceUid:e},n=c.viewer.Studies.findBy(t);if(n)return n;var i=c.studylist.collections.Studies.findOne(t);if(i)return i;throw new u("No study data available for Study: "+e)}):c.viewer.Studies.all()}}),i.studyTimepointBrowser.onRendered(function(){var e=i.instance();e.autorun(function(){var t=e.timepointViewType.get();e.$(".timepoint-item, .study-browser-item").removeClass("active"),"key"!==t||e.data.currentStudy||e.$(".timepoint-item:first").addClass("active")});var t=void 0,n=[];e.refreshActiveStudies=function(){return r.afterFlush(function(){s.each(n,function(t){e.$(".study-browser-item[data-uid='"+t+"']").addClass("active")}),e.$(".timepoint-item:first").addClass("active")})},e.autorun(function(){var i=e.data.currentStudy&&e.data.currentStudy.get();i&&(i!==t&&(e.showAdditionalTimepoints.set(!1),t=i,n=[i.studyInstanceUid]),e.refreshActiveStudies())})}),i.studyTimepointBrowser.events({"click .timepointHeader":function(e,t){var n=a(e.currentTarget).closest(".timepoint-item");n.find(".studyTimepoint").trigger("displayStateChanged"),n.toggleClass("active")},"click .study-item-box.additional":function(e,t){t.showAdditionalTimepoints.set(!0)}}),i.studyTimepointBrowser.helpers({shallShowViewType:function(e){var t=i.instance();return e.length&&!t.data.timepointViewType},viewTypeButtonGroupData:function(){return{value:i.instance().timepointViewType,options:[{value:"key",text:"Key Timepoints"},{value:"all",text:"All Timepoints"}]}},showAdditionalTimepoints:function(){return i.instance().showAdditionalTimepoints.get()},hasAdditionalTimepoints:function(){var e=i.instance().data.timepointApi,t=e&&e.all();return t&&t.length>1},timepoints:function(){var e=i.instance(),t=e.getCurrentStudy(),n=e.data.timepointApi,a=void 0;a=t&&!e.showAdditionalTimepoints.get()?n.study(t.studyInstanceUid):n?"all"===e.timepointViewType.get()?n.all():n.key():[];var o=[],r=n.current();return r&&a.forEach(function(e){e.latestDate.getTime()<=r.latestDate.getTime()&&o.push(e)}),o},studies:function(e){return i.instance().getStudies(e)},modalitiesSummary:function(e){var t={};i.instance().getStudies(e).forEach(function(e){var n=e.modalities||"UN";t[n]=t[n]+1||1});var n=[];return s.each(t,function(e,t){n.push(e+" "+t)}),n.join(", ")}})},"template.studyTimepointStudy.js":function(){M.__checkName("studyTimepointStudy"),M.studyTimepointStudy=new M("Template.studyTimepointStudy",function(){var e=this;return C.Let({isSidebar:function(){return V.call(V.dataMustache(e.lookup("isUndefined"),e.lookup("viewportIndex")))}},function(){return["\n        ",F.DIV({class:function(){return["study-browser-item ",C.If(function(){return V.call(e.lookup("isSidebar"))},function(){return"studySidebarTimepoint"},function(){return"studyQuickSwitchTimepoint"})," ",C.If(function(){return V.call(V.dot(e.lookup("."),"active"))},function(){return"active"})," ",C.If(function(){return V.call(e.lookup("isLoading"))},function(){return"loading"})]},"data-uid":function(){return V.mustache(V.dot(e.lookup("."),"study","studyInstanceUid"))}},"\n            ",F.DIV({class:"study-item"},"\n                ",C.If(function(){return V.call(e.lookup("isLoading"))},function(){return["\n                    ",V.include(e.lookupTemplate("loadingText")),"\n                "]}),"\n                ",F.DIV({class:"study-item-box"},"\n                    ",F.DIV({class:"study-modality"},"\n                        ",F.DIV({class:"study-modality-text",style:function(){return V.mustache(e.lookup("modalityStyle"))}},"\n                            ",C.View("lookup:choose",function(){return V.mustache(e.lookup("choose"),V.dot(e.lookup("instance"),"modalities"),"UN")}),"\n                        "),"\n                    "),"\n                    ",F.DIV({class:"study-text"},"\n                        ",F.DIV({class:"study-date"},C.View("lookup:formatDA",function(){return V.mustache(e.lookup("formatDA"),V.dot(e.lookup("instance"),"studyDate"),"D-MMM-YYYY")})),"\n                        ",F.DIV({class:"study-description"},C.View("lookup:instance.studyDescription",function(){return V.mustache(V.dot(e.lookup("instance"),"studyDescription"))})),"\n                    "),"\n                "),"\n            "),"\n            ",C.If(function(){return V.call(e.lookup("isSidebar"))},function(){return["\n                ",F.DIV({class:"study-browser-series"},"\n                    ",F.DIV({class:"study-series-container"},"\n                        ",C.Each(function(){return{_sequence:V.dataMustache(e.lookup("studyThumbnails"),V.dot(e.lookup("."),"study")),_variable:"thumbnail"}},function(){return["\n                            ",C._TemplateWith(function(){return V.dataMustache(e.lookup("clone"),e.lookup("."),V.kw({thumbnail:e.lookup("thumbnail")}))},function(){return V.include(e.lookupTemplate("thumbnailEntry"))}),"\n                        "]}),"\n                    "),"\n                "),"\n            "]}),"\n        "),"\n    "]})})},"studyTimepointStudy.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/underscore"),{_:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},4);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},5),a.studyTimepointStudy.onCreated(function(){var e=a.instance();e.loading=new o(!1);var t=c.viewerbase.getStudyMetadata(e.data.study).getFirstInstance();t&&(e.modalities=t.getRawValue("x00080060"),e.studyDescription=t.getRawValue("x00081030"),e.studyDate=t.getRawValue("x00080020")),e.getStudyElement=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=".study-browser-item[data-uid='"+e.data.study.studyInstanceUid+"']";return t?s(n):e.$browser.find(n)},e.isQuickSwitch=function(){return!r.isUndefined(e.data.viewportIndex)},e.select=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e.data.study.studyInstanceUid,i=e.getStudyElement(),a=i.closest(".studyTimepoint"),o={selection:[i[0]],studyInstanceUid:n,isQuickSwitch:t};a.trigger("selectionChanged",o)},e.initializeStudyWrapper=function(){if(!e.isQuickSwitch()){var t=e.getStudyElement(),n=t.find(".study-browser-series");t.addClass("active"),n.css("max-height",""),n.css("max-height",n.height()),t.removeClass("active"),e.data.active&&i.setTimeout(function(){return t.addClass("active")},1)}}}),a.studyTimepointStudy.onRendered(function(){var e=a.instance();e.$browser=e.$(".study-browser-item").closest(".studyTimepointBrowser"),e.initializeStudyWrapper()}),a.studyTimepointStudy.events({"transitionend .study-browser-series":function(e,t){e.target===e.currentTarget&&s(e.currentTarget).closest(".studyTimepoint").trigger("displayStateChanged")},"click .studyQuickSwitchTimepoint .study-item-container":function(e,t){t.select(!0)},"loadStarted .study-browser-item":function(e,t){t.loading.set(!0)},"loadEnded .study-browser-item":function(e,t){t.loading.set(!1),t.initializeStudyWrapper()},"click .study-item-box":function(e,t){var n=t.data.study,a=n.studyInstanceUid,o=t.isQuickSwitch();if(n.seriesList)t.select(o);else{var r=c.viewer.Studies.findBy({studyInstanceUid:a});if(r)n.seriesList=r.seriesList,t.select(o);else{var s=t.getStudyElement(!0);s.trigger("loadStarted"),c.studies.retrieveStudyMetadata(a).then(function(e){t.data.study=e,c.viewer.Studies.insert(e),i.setTimeout(function(){s.trigger("loadEnded"),t.select(o)},1)}).catch(function(e){c.log.error("There was an error trying to retrieve the study's metadata for studyInstanceUid: "+a),c.log.error(e.stack),c.log.trace()})}}}}),a.studyTimepointStudy.helpers({isLoading:function(){var e=a.instance(),t=e.data.study,n=c.viewer.Studies.findBy({studyInstanceUid:t.studyInstanceUid});return e.loading.get()&&!n},modalities:function(){return(a.instance().modalities||"UN").replace(/\\/g," ")},modalityStyle:function(){var e=(a.instance().modalities||"UN").split(/\\/g).length;return 1===e?"font-size: 1em":2===e?"font-size: 0.75em":"line-height: "+1.2*Math.ceil(e/2)+"em"}})}},windowLevelPresets:{"template.form.js":function(){M.__checkName("windowLevelPresetsForm"),M.windowLevelPresetsForm=new M("Template.windowLevelPresetsForm",function(){var e=this;return C._TemplateWith(function(){return V.dataMustache(e.lookup("extend"),V.kw({api:V.dot(e.lookup("instance"),"api"),class:"form-themed"}))},function(){return V.include(e.lookupTemplate("form"),function(){return["\n        ",F.DIV({class:"form-content"},"\n            ",F.TABLE({class:"full-width"},"\n                ",F.THEAD("\n                    ",F.TR("\n                        ",F.TH({class:"p-x-1 text-center"},"Preset"),"\n                        ",F.TH({class:"p-x-1"},"Description"),"\n                        ",F.TH({class:"p-x-1"},"Window"),"\n                        ",F.TH({class:"p-x-1"},"Level"),"\n                    "),"\n                "),"\n                ",F.TBODY("\n                    ",C.Each(function(){return{_sequence:V.call(e.lookup("getPresetsInputInformationList")),_variable:"presetInputInformation"}},function(){return["\n                        ",C._TemplateWith(function(){return{base:V.call("baseTr"),key:V.call(V.dataMustache(e.lookup("concat"),e.lookup("@index")))}},function(){return V.include(e.lookupTemplate("group"),function(){return["\n                            ",F.TD({class:"p-x-1 text-center"},C.View("lookup:sum",function(){return V.mustache(e.lookup("sum"),e.lookup("@index"),1)})),"\n                            ",F.TD({class:"p-x-1"},C._TemplateWith(function(){return{key:V.call("id"),value:V.call(V.dot(e.lookup("presetInputInformation"),"id"))}},function(){return V.include(e.lookupTemplate("inputText"))})),"\n                            ",F.TD({class:"p-x-1"},C._TemplateWith(function(){return{key:V.call("ww"),value:V.call(V.dataMustache(e.lookup("filterNaN"),V.dot(e.lookup("presetInputInformation"),"ww"))),dataType:V.call("Number")}},function(){return V.include(e.lookupTemplate("inputText"))})),"\n                            ",F.TD({class:"p-x-1"},C._TemplateWith(function(){return{key:V.call("wc"),value:V.call(V.dataMustache(e.lookup("filterNaN"),V.dot(e.lookup("presetInputInformation"),"wc"))),dataType:V.call("Number")}},function(){return V.include(e.lookupTemplate("inputText"))})),"\n                        "]})}),"\n                    "]}),"\n                "),"\n            "),"\n        "),"\n        ",F.DIV({class:"form-buttons clearfix"},"\n            ",C._TemplateWith(function(){return{class:V.call("btn btn-danger pull-left"),action:V.call("resetDefaults")}},function(){return V.include(e.lookupTemplate("button"),function(){return"Reset to Defaults"})}),"\n            ",C._TemplateWith(function(){return{class:V.call("btn btn-primary pull-right"),action:V.call("save")}},function(){return V.include(e.lookupTemplate("button"),function(){return"Save"})}),"\n            ",C._TemplateWith(function(){return{class:V.call("btn btn-secondary pull-right m-r-1"),tagAttributes:V.call(V.dataMustache(e.lookup("extend"),"",V.kw({"data-dismiss":"modal"})))}},function(){return V.include(e.lookupTemplate("button"),function(){return"Close"})}),"\n        "),"\n    "]})})})},"form.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},2),i.windowLevelPresetsForm.onCreated(function(){var e=i.instance(),t=o.viewerbase.wlPresets;e.api={save:function(){var n=e.$("form").first().data("component").value(),i=t.store(n);return i.then(function(){return o.ui.notifications.success({text:"The Window/Levels preferences were successfully saved."})}),i},resetDefaults:function(){var e={class:"themed",title:"Reset Window/Levels Presets",message:"Are you sure you want to reset all the window level presets to their defaults?"};return o.ui.showDialog("dialogConfirm",e).then(function(){return t.resetDefaults()})}}}),i.windowLevelPresetsForm.helpers({getPresetsInputInformationList:function(){return o.viewerbase.wlPresets.changeObserver.depend(),a.toArray(o.viewer.wlPresets)}})}},syncCheckbox:{"template.syncCheckbox.js":function(){M.__checkName("syncCheckbox"),M.syncCheckbox=new M("Template.syncCheckbox",function(){var e=this;return F.INPUT(F.Attrs({class:"syncCheckbox js-sync-check",type:"checkbox",name:"sync",value:""},function(){return V.attrMustache(e.lookup("isChecked"))}))})},"syncCheckbox.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){a=e}},1);var o=void 0;n.watch(e("../../../lib/stackSynchronizer.js"),{stackSynchronizer:function(e){o=e}},2);var r=void 0;n.watch(e("../../../lib/getElementIfNotEmpty.js"),{getElementIfNotEmpty:function(e){r=e}},3),i.syncCheckbox.onCreated(function(){var e=i.instance();e.data.synced=new ReactiveVar(T.get("defaultStackSync")),e.autorun(function(){var t=T.get("defaultStackSync");e.data.synced.set(t)})}),i.syncCheckbox.helpers({isChecked:function(){T.get("CornerstoneImageRendered"+this.viewportIndex);var e=this.synced.get(),t=r(this.viewportIndex);if(t)return e?(o.add(t),"checked"):void o.remove(t)}}),i.syncCheckbox.events({"click .js-sync-check":function(e){this.synced.set(!this.synced.get())}})}},stackSyncDialog:{"template.stackSyncDialog.js":function(){M.__checkName("stackSyncDialog"),M.stackSyncDialog=new M("Template.stackSyncDialog",function(){var e=this;return F.getTag("dialog")({id:"stackSyncDialog",class:"stackSyncDialog noselect",oncontextmenu:"return false"},"\n        ",F.DIV("\n          ",F.H5({class:"stackSyncDescription"},"Stack Scroll Synchronization Settings"),"\n          ",F.A({class:"stackSyncDialogCancel btn btn-sm btn-secondary"},"\n            ",F.I({class:"fa fa-times-circle fa-2x"}),"\n          "),"\n        "),"\n        ",F.DIV({class:"stackSyncBody"},"\n          ",F.TABLE("\n            ",F.TR("\n              ",F.TH("Sync Method"),"\n              ",F.TH("\n                ",F.SELECT({class:"js-switchSyncMethod-select"},"\n                  ",F.OPTION({value:"Position"},"Image Position"),"\n                  ",F.OPTION({value:"Index"},"Frame Index"),"\n                "),"\n              "),"\n            "),"\n            ",F.TR("\n              ",F.TH("Sync scans by default"),"\n              ",F.TH(F.INPUT(F.Attrs({class:"js-syncScansByDefault-check",type:"checkbox",name:"sync",value:""},function(){return V.attrMustache(e.lookup("isChecked"))}))),"\n            "),"\n          "),"\n        "),"\n  ")})},"stackSyncDialog.js":function(e,t,n){var i=void 0;n.watch(e("../../../lib/stackSynchronizer.js"),{stackSynchronizer:function(e){i=e}},0),M.stackSyncDialog.onRendered(function(){var e=M.instance();["stackSyncDialog"].forEach(function(t){var n=e.$("#"+t);U.registerDialog(n.get(0))})}),M.stackSyncDialog.onCreated(function(){var e=M.instance();e.data.syncScansByDefault=new ReactiveVar(T.get("defaultStackSync")),e.autorun(function(){var t=e.data.syncScansByDefault.get();T.set("defaultStackSync",t)})}),M.stackSyncDialog.helpers({isChecked:function(){if(this.syncScansByDefault.get())return"checked"}}),M.stackSyncDialog.events({"click .js-syncScansByDefault-check":function(e){this.syncScansByDefault.set(!this.syncScansByDefault.get())},"change .js-switchSyncMethod-select":function(e){var t=e.currentTarget.value;i.changeSynchronizationStrategy(t)}})}},smoothCheckbox:{"template.smoothCheckbox.js":function(){M.__checkName("smoothCheckbox"),M.smoothCheckbox=new M("Template.smoothCheckbox",function(){var e=this;return F.INPUT(F.Attrs({class:"smoothCheckbox js-smooth-check",type:"checkbox",name:"smooth",value:""},function(){return V.attrMustache(e.lookup("isChecked"))}))})},"smoothCheckbox.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("../../../lib/viewportUtils"),{viewportUtils:function(e){a=e}},1);var o=void 0;n.watch(e("../../../lib/getElementIfNotEmpty.js"),{getElementIfNotEmpty:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){s=e}},4),i.smoothCheckbox.onCreated(function(){var e=i.instance();e.data.smooth=new ReactiveVar(!1),e.autorun(function(){var t=T.get("defaultStackSync");e.data.synced.set(t)})}),i.smoothCheckbox.helpers({isChecked:function(){T.get("CornerstoneImageRendered"+this.viewportIndex);var e=this.smooth.get(),t=o(this.viewportIndex);if(t){var n=s.getEnabledElement(t);if(e)return n.viewport.pixelReplication&&(n.viewport.pixelReplication=!1,s.updateImage(n.element)),"checked";n.viewport.pixelReplication||(n.viewport.pixelReplication=!0,s.updateImage(n.element))}}}),i.smoothCheckbox.events({"click .js-smooth-check":function(e){this.smooth.set(!this.smooth.get())}})}}}},"collections.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("../namespace"),{OHIF:function(e){a=e}},1);var o=void 0;n.watch(e("./lib/classes/TypeSafeCollection"),{TypeSafeCollection:function(e){o=e}},2);var r=new o;a.viewer.Studies=r;var s=new o;a.viewer.StudyMetadataList=s,i.subscribe("studyImportStatus")},"index.js":function(e,t,n){var i=void 0;n.watch(e("../namespace"),{Viewerbase:function(e){i=e}},0),n.watch(e("./collections")),n.watch(e("./lib/debugReactivity"));var a=void 0;n.watch(e("./lib/getElementIfNotEmpty"),{getElementIfNotEmpty:function(e){a=e}},1);var o=void 0;n.watch(e("./lib/getStackDataIfNotEmpty"),{getStackDataIfNotEmpty:function(e){o=e}},2);var r=void 0;n.watch(e("./lib/switchToImageRelative"),{switchToImageRelative:function(e){r=e}},3);var s=void 0;n.watch(e("./lib/switchToImageByIndex"),{switchToImageByIndex:function(e){s=e}},4);var c=void 0;n.watch(e("./lib/getFrameOfReferenceUID"),{getFrameOfReferenceUID:function(e){c=e}},5);var u=void 0;n.watch(e("./lib/getImageIdForImagePath"),{getImageIdForImagePath:function(e){u=e}},6);var l=void 0;n.watch(e("./lib/updateCrosshairsSynchronizer"),{updateCrosshairsSynchronizer:function(e){l=e}},7);var d=void 0;n.watch(e("./lib/getImageId"),{getImageId:function(e){d=e}},8);var m=void 0;n.watch(e("./lib/setActiveViewport"),{setActiveViewport:function(e){m=e}},9);var p=void 0;n.watch(e("./lib/setFocusToActiveViewport"),{setFocusToActiveViewport:function(e){p=e}},10);var f=void 0;n.watch(e("./lib/getWADORSImageId"),{getWADORSImageId:function(e){f=e}},11);var g=void 0;n.watch(e("./lib/updateAllViewports"),{updateAllViewports:function(e){g=e}},12);var x=void 0;n.watch(e("./lib/sortStudy"),{sortStudy:function(e){x=e}},13);var h=void 0;n.watch(e("./lib/updateMetaDataManager"),{updateMetaDataManager:function(e){h=e}},14);var v=void 0;n.watch(e("./lib/updateOrientationMarkers"),{updateOrientationMarkers:function(e){v=e}},15);var S=void 0;n.watch(e("./lib/isImage"),{isImage:function(e){S=e}},16);var y=void 0,w=void 0;n.watch(e("./lib/instanceClassSpecificViewport"),{getInstanceClassDefaultViewport:function(e){y=e},setInstanceClassDefaultViewportFunction:function(e){w=e}},17);var I=void 0;n.watch(e("./lib/displayReferenceLines"),{displayReferenceLines:function(e){I=e}},18);var D=void 0;n.watch(e("./lib/getStudyMetadata"),{getStudyMetadata:function(e){D=e}},19);var T=void 0;n.watch(e("./lib/imageViewerViewportData"),{imageViewerViewportData:function(e){T=e}},20);var b=void 0;n.watch(e("./lib/panelNavigation"),{panelNavigation:function(e){b=e}},21);var P=void 0;n.watch(e("./lib/prepareViewerData"),{prepareViewerData:function(e){P=e}},22);var C=void 0;n.watch(e("./lib/renderViewer"),{renderViewer:function(e){C=e}},23);var k=void 0;n.watch(e("./lib/WLPresets"),{WLPresets:function(e){k=e}},24);var R=void 0;n.watch(e("./lib/hotkeyUtils"),{hotkeyUtils:function(e){R=e}},25);var V=void 0;n.watch(e("./lib/viewportOverlayUtils"),{viewportOverlayUtils:function(e){V=e}},26);var M=void 0;n.watch(e("./lib/viewportUtils"),{viewportUtils:function(e){M=e}},27);var O=void 0;n.watch(e("./lib/thumbnailDragHandlers"),{thumbnailDragHandlers:function(e){O=e}},28);var A=void 0;n.watch(e("./lib/dialogUtils"),{dialogUtils:function(e){A=e}},29);var L=void 0;n.watch(e("./lib/unloadHandlers"),{unloadHandlers:function(e){L=e}},30);var E=void 0;n.watch(e("./lib/sortingManager"),{sortingManager:function(e){E=e}},31);var q=void 0;n.watch(e("./lib/crosshairsSynchronizers"),{crosshairsSynchronizers:function(e){q=e}},32);var N=void 0;n.watch(e("./lib/annotateTextUtils"),{annotateTextUtils:function(e){N=e}},33);var F=void 0;n.watch(e("./lib/textMarkerUtils"),{textMarkerUtils:function(e){F=e}},34);var B=void 0;n.watch(e("./lib/createStacks"),{createStacks:function(e){B=e}},35);var U=void 0;n.watch(e("./lib/StackManager"),{StackManager:function(e){U=e}},36);var _=void 0;n.watch(e("./lib/toolManager"),{toolManager:function(e){_=e}},37);var j=void 0;n.watch(e("./lib/helpers/"),{helpers:function(e){j=e}},38);var H=void 0;n.watch(e("./lib/sopClassDictionary"),{sopClassDictionary:function(e){H=e}},39);var z=void 0;n.watch(e("./lib/DICOMTagDescriptions"),{DICOMTagDescriptions:function(e){z=e}},40);var W=void 0;n.watch(e("./lib/classes/ImageSet"),{ImageSet:function(e){W=e}},41);var G=void 0;n.watch(e("./lib/classes/LayoutManager"),{LayoutManager:function(e){G=e}},42);var $=void 0;n.watch(e("./lib/classes/StudyPrefetcher"),{StudyPrefetcher:function(e){$=e}},43);var X=void 0;n.watch(e("./lib/classes/ResizeViewportManager"),{ResizeViewportManager:function(e){X=e}},44);var Y=void 0;n.watch(e("./lib/classes/StudyLoadingListener"),{StudyLoadingListener:function(e){Y=e}},45);var Q=void 0;n.watch(e("./lib/classes/StudyLoadingListener"),{StackLoadingListener:function(e){Q=e}},46);var Z=void 0;n.watch(e("./lib/classes/StudyLoadingListener"),{DICOMFileLoadingListener:function(e){Z=e}},47);var K=void 0;n.watch(e("./lib/classes/metadata/StudyMetadata"),{StudyMetadata:function(e){K=e}},48);var J=void 0;n.watch(e("./lib/classes/metadata/SeriesMetadata"),{SeriesMetadata:function(e){J=e}},49);var ee=void 0;n.watch(e("./lib/classes/metadata/InstanceMetadata"),{InstanceMetadata:function(e){ee=e}},50);var te=void 0;n.watch(e("./lib/classes/metadata/StudySummary"),{StudySummary:function(e){te=e}},51);var ne=void 0;n.watch(e("./lib/classes/TypeSafeCollection"),{TypeSafeCollection:function(e){ne=e}},52);var ie=void 0;n.watch(e("./lib/classes/OHIFError"),{OHIFError:function(e){ie=e}},53);var ae=void 0;n.watch(e("./lib/classes/StackImagePositionOffsetSynchronizer"),{StackImagePositionOffsetSynchronizer:function(e){ae=e}},54);var oe=void 0;n.watch(e("./lib/classes/StudyMetadataSource"),{StudyMetadataSource:function(e){oe=e}},55),i.getElementIfNotEmpty=a,i.getStackDataIfNotEmpty=o,i.switchToImageRelative=r,i.switchToImageByIndex=s,i.getFrameOfReferenceUID=c,i.getImageIdForImagePath=u,i.updateCrosshairsSynchronizer=l,i.getImageId=d,i.setActiveViewport=m,i.setFocusToActiveViewport=p,i.getWADORSImageId=f,i.updateAllViewports=g,i.sortStudy=x,i.updateMetaDataManager=h,i.updateOrientationMarkers=v,i.isImage=S,i.getInstanceClassDefaultViewport=y,i.setInstanceClassDefaultViewportFunction=w,i.displayReferenceLines=I,i.getStudyMetadata=D,i.imageViewerViewportData=T,i.panelNavigation=b,i.prepareViewerData=P,i.renderViewer=C,i.wlPresets=k,i.hotkeyUtils=R,i.viewportOverlayUtils=V,i.viewportUtils=M,i.thumbnailDragHandlers=O,i.dialogUtils=A,i.unloadHandlers=L,i.sortingManager=E,i.crosshairsSynchronizers=q,i.annotateTextUtils=N,i.textMarkerUtils=F,i.createStacks=B,i.stackManager=U,i.toolManager=_,i.helpers=j,i.sopClassDictionary=H,i.DICOMTagDescriptions=z,i.ImageSet=W,i.LayoutManager=G,i.StudyPrefetcher=$,i.ResizeViewportManager=X,i.StudyLoadingListener=Y,i.StackLoadingListener=Q,i.DICOMFileLoadingListener=Z,i.metadata={StudyMetadata:K,SeriesMetadata:J,InstanceMetadata:ee,StudySummary:te},i.TypeSafeCollection=ne,i.OHIFError=ie,i.StackImagePositionOffsetSynchronizer=ae,i.StudyMetadataSource=oe},lib:{"DICOMTagDescriptions.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/typeof"));n.export({DICOMTagDescriptions:function(){return c}});var o="number",r="string",s=/^x[0-9a-fx]{8}$/,c=Object.create(Object.prototype,{_descriptions:{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)},tagNumberToString:{configurable:!1,enumerable:!0,writable:!1,value:function(){function e(e){var t=void 0;return this.isValidTagNumber(e)&&(t="x"+("00000000"+e.toString(16)).substr(-8)),t}return e}()},isValidTagNumber:{configurable:!1,enumerable:!0,writable:!1,value:function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===o&&e>=0&&e<=4294967295}return e}()},isValidTag:{configurable:!1,enumerable:!0,writable:!1,value:function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===r?s.test(e):this.isValidTagNumber(e)}return e}()},find:{configurable:!1,enumerable:!0,writable:!1,value:function(){function e(e){var t=void 0;return(void 0===e?"undefined":(0,a.default)(e))!==r&&(e=this.tagNumberToString(e)),(void 0===e?"undefined":(0,a.default)(e))===r&&(t=this._descriptions[e]),t}return e}()},init:{configurable:!1,enumerable:!0,writable:!1,value:function(){function e(e){var t=Object.prototype.hasOwnProperty,n=this._descriptions;for(var i in g.sanitizeForInObject(e))if(t.call(e,i)){if(!this.isValidTag(i)){console.info('DICOMTagDescriptions: Invalid tag "'+i+'"...');continue}if(i in n){console.info('DICOMTagDescriptions: Duplicated tag "'+i+'"...');continue}var a=e[i],o=Object.create(null);if(o.tag=i,o.keyword=a,Object.freeze(o),n[i]=o,a in n){var r=n[a];console.info("DICOMTagDescriptions: Using <"+r.tag+","+r.keyword+"> instead of <"+o.tag+","+o.keyword+'> for keyword "'+a+'"...')}else n[a]=o}Object.freeze(n),Object.freeze(this)}return e}()}}),u={x00020000:"FileMetaInfoGroupLength",x00020001:"FileMetaInfoVersion",x00020002:"MediaStorageSOPClassUID",x00020003:"MediaStorageSOPInstanceUID",x00020010:"TransferSyntaxUID",x00020012:"ImplementationClassUID",x00020013:"ImplementationVersionName",x00020016:"SourceApplicationEntityTitle",x00020100:"PrivateInformationCreatorUID",x00020102:"PrivateInformation",x00041130:"FileSetID",x00041141:"FileSetDescriptorFileID",x00041142:"SpecificCharacterSetOfFile",x00041200:"FirstDirectoryRecordOffset",x00041202:"LastDirectoryRecordOffset",x00041212:"FileSetConsistencyFlag",x00041220:"DirectoryRecordSequence",x00041400:"OffsetOfNextDirectoryRecord",x00041410:"RecordInUseFlag",x00041420:"LowerLevelDirectoryEntityOffset",x00041430:"DirectoryRecordType",x00041432:"PrivateRecordUID",x00041500:"ReferencedFileID",x00041504:"MRDRDirectoryRecordOffset",x00041510:"ReferencedSOPClassUIDInFile",x00041511:"ReferencedSOPInstanceUIDInFile",x00041512:"ReferencedTransferSyntaxUIDInFile",x0004151a:"ReferencedRelatedSOPClassUIDInFile",x00041600:"NumberOfReferences",x00080000:"IdentifyingGroupLength",x00080001:"LengthToEnd",x00080005:"SpecificCharacterSet",x00080006:"LanguageCodeSequence",x00080008:"ImageType",x00080010:"RecognitionCode",x00080012:"InstanceCreationDate",x00080013:"InstanceCreationTime",x00080014:"InstanceCreatorUID",x00080016:"SOPClassUID",x00080018:"SOPInstanceUID",x0008001a:"RelatedGeneralSOPClassUID",x0008001b:"OriginalSpecializedSOPClassUID",x00080020:"StudyDate",x00080021:"SeriesDate",x00080022:"AcquisitionDate",x00080023:"ContentDate",x00080024:"OverlayDate",x00080025:"CurveDate",x0008002a:"AcquisitionDateTime",x00080030:"StudyTime",x00080031:"SeriesTime",x00080032:"AcquisitionTime",x00080033:"ContentTime",x00080034:"OverlayTime",x00080035:"CurveTime",x00080040:"DataSetType",x00080041:"DataSetSubtype",x00080042:"NuclearMedicineSeriesType",x00080050:"AccessionNumber",x00080052:"QueryRetrieveLevel",x00080054:"RetrieveAETitle",x00080056:"InstanceAvailability",x00080058:"FailedSOPInstanceUIDList",x00080060:"Modality",x00080061:"ModalitiesInStudy",x00080062:"SOPClassesInStudy",x00080064:"ConversionType",x00080068:"PresentationIntentType",x00080070:"Manufacturer",x00080080:"InstitutionName",x00080081:"InstitutionAddress",x00080082:"InstitutionCodeSequence",x00080090:"ReferringPhysicianName",x00080092:"ReferringPhysicianAddress",x00080094:"ReferringPhysicianTelephoneNumber",x00080096:"ReferringPhysicianIDSequence",x00080100:"CodeValue",x00080102:"CodingSchemeDesignator",x00080103:"CodingSchemeVersion",x00080104:"CodeMeaning",x00080105:"MappingResource",x00080106:"ContextGroupVersion",x00080107:"ContextGroupLocalVersion",x0008010b:"ContextGroupExtensionFlag",x0008010c:"CodingSchemeUID",x0008010d:"ContextGroupExtensionCreatorUID",x0008010f:"ContextIdentifier",x00080110:"CodingSchemeIDSequence",x00080112:"CodingSchemeRegistry",x00080114:"CodingSchemeExternalID",x00080115:"CodingSchemeName",x00080116:"CodingSchemeResponsibleOrganization",x00080117:"ContextUID",x00080201:"TimezoneOffsetFromUTC",x00081000:"NetworkID",x00081010:"StationName",x00081030:"StudyDescription",x00081032:"ProcedureCodeSequence",x0008103e:"SeriesDescription",x00081040:"InstitutionalDepartmentName",x00081048:"PhysiciansOfRecord",x00081049:"PhysiciansOfRecordIDSequence",x00081050:"PerformingPhysicianName",x00081052:"PerformingPhysicianIDSequence",x00081060:"NameOfPhysicianReadingStudy",x00081062:"PhysicianReadingStudyIDSequence",x00081070:"OperatorsName",x00081072:"OperatorIDSequence",x00081080:"AdmittingDiagnosesDescription",x00081084:"AdmittingDiagnosesCodeSequence",x00081090:"ManufacturersModelName",x00081100:"ReferencedResultsSequence",x00081110:"ReferencedStudySequence",x00081111:"ReferencedPerformedProcedureStepSequence",x00081115:"ReferencedSeriesSequence",x00081120:"ReferencedPatientSequence",x00081125:"ReferencedVisitSequence",x00081130:"ReferencedOverlaySequence",x0008113a:"ReferencedWaveformSequence",x00081140:"ReferencedImageSequence",x00081145:"ReferencedCurveSequence",x0008114a:"ReferencedInstanceSequence",x00081150:"ReferencedSOPClassUID",x00081155:"ReferencedSOPInstanceUID",x0008115a:"SOPClassesSupported",x00081160:"ReferencedFrameNumber",x00081161:"SimpleFrameList",x00081162:"CalculatedFrameList",x00081163:"TimeRange",x00081164:"FrameExtractionSequence",x00081195:"TransactionUID",x00081197:"FailureReason",x00081198:"FailedSOPSequence",x00081199:"ReferencedSOPSequence",x00081200:"OtherReferencedStudiesSequence",x00081250:"RelatedSeriesSequence",x00082110:"LossyImageCompressionRetired",x00082111:"DerivationDescription",x00082112:"SourceImageSequence",x00082120:"StageName",x00082122:"StageNumber",x00082124:"NumberOfStages",x00082127:"ViewName",x00082128:"ViewNumber",x00082129:"NumberOfEventTimers",x0008212a:"NumberOfViewsInStage",x00082130:"EventElapsedTimes",x00082132:"EventTimerNames",x00082133:"EventTimerSequence",x00082134:"EventTimeOffset",x00082135:"EventCodeSequence",x00082142:"StartTrim",x00082143:"StopTrim",x00082144:"RecommendedDisplayFrameRate",x00082200:"TransducerPosition",x00082204:"TransducerOrientation",x00082208:"AnatomicStructure",x00082218:"AnatomicRegionSequence",x00082220:"AnatomicRegionModifierSequence",x00082228:"PrimaryAnatomicStructureSequence",x00082229:"AnatomicStructureOrRegionSequence",x00082230:"AnatomicStructureModifierSequence",x00082240:"TransducerPositionSequence",x00082242:"TransducerPositionModifierSequence",x00082244:"TransducerOrientationSequence",x00082246:"TransducerOrientationModifierSeq",x00082253:"AnatomicEntrancePortalCodeSeqTrial",x00082255:"AnatomicApproachDirCodeSeqTrial",x00082256:"AnatomicPerspectiveDescrTrial",x00082257:"AnatomicPerspectiveCodeSeqTrial",x00083001:"AlternateRepresentationSequence",x00083010:"IrradiationEventUID",x00084000:"IdentifyingComments",x00089007:"FrameType",x00089092:"ReferencedImageEvidenceSequence",x00089121:"ReferencedRawDataSequence",x00089123:"CreatorVersionUID",x00089124:"DerivationImageSequence",x00089154:"SourceImageEvidenceSequence",x00089205:"PixelPresentation",x00089206:"VolumetricProperties",x00089207:"VolumeBasedCalculationTechnique",x00089208:"ComplexImageComponent",x00089209:"AcquisitionContrast",x00089215:"DerivationCodeSequence",x00089237:"GrayscalePresentationStateSequence",x00089410:"ReferencedOtherPlaneSequence",x00089458:"FrameDisplaySequence",x00089459:"RecommendedDisplayFrameRateInFloat",x00089460:"SkipFrameRangeFlag",x00100000:"PatientGroupLength",x00100010:"PatientName",x00100020:"PatientID",x00100021:"IssuerOfPatientID",x00100022:"TypeOfPatientID",x00100030:"PatientBirthDate",x00100032:"PatientBirthTime",x00100040:"PatientSex",x00100050:"PatientInsurancePlanCodeSequence",x00100101:"PatientPrimaryLanguageCodeSeq",x00100102:"PatientPrimaryLanguageCodeModSeq",x00101000:"OtherPatientIDs",x00101001:"OtherPatientNames",x00101002:"OtherPatientIDsSequence",x00101005:"PatientBirthName",x00101010:"PatientAge",x00101020:"PatientSize",x00101030:"PatientWeight",x00101040:"PatientAddress",x00101050:"InsurancePlanIdentification",x00101060:"PatientMotherBirthName",x00101080:"MilitaryRank",x00101081:"BranchOfService",x00101090:"MedicalRecordLocator",x00102000:"MedicalAlerts",x00102110:"Allergies",x00102150:"CountryOfResidence",x00102152:"RegionOfResidence",x00102154:"PatientTelephoneNumbers",x00102160:"EthnicGroup",x00102180:"Occupation",x001021a0:"SmokingStatus",x001021b0:"AdditionalPatientHistory",x001021c0:"PregnancyStatus",x001021d0:"LastMenstrualDate",x001021f0:"PatientReligiousPreference",x00102201:"PatientSpeciesDescription",x00102202:"PatientSpeciesCodeSequence",x00102203:"PatientSexNeutered",x00102210:"AnatomicalOrientationType",x00102292:"PatientBreedDescription",x00102293:"PatientBreedCodeSequence",x00102294:"BreedRegistrationSequence",x00102295:"BreedRegistrationNumber",x00102296:"BreedRegistryCodeSequence",x00102297:"ResponsiblePerson",x00102298:"ResponsiblePersonRole",x00102299:"ResponsibleOrganization",x00104000:"PatientComments",x00109431:"ExaminedBodyThickness",x00111010:"PatientStatus",x00120010:"ClinicalTrialSponsorName",x00120020:"ClinicalTrialProtocolID",x00120021:"ClinicalTrialProtocolName",x00120030:"ClinicalTrialSiteID",x00120031:"ClinicalTrialSiteName",x00120040:"ClinicalTrialSubjectID",x00120042:"ClinicalTrialSubjectReadingID",x00120050:"ClinicalTrialTimePointID",x00120051:"ClinicalTrialTimePointDescription",x00120060:"ClinicalTrialCoordinatingCenter",x00120062:"PatientIdentityRemoved",x00120063:"DeidentificationMethod",x00120064:"DeidentificationMethodCodeSequence",x00120071:"ClinicalTrialSeriesID",x00120072:"ClinicalTrialSeriesDescription",x00120084:"DistributionType",x00120085:"ConsentForDistributionFlag",x00180000:"AcquisitionGroupLength",x00180010:"ContrastBolusAgent",x00180012:"ContrastBolusAgentSequence",x00180014:"ContrastBolusAdministrationRoute",x00180015:"BodyPartExamined",x00180020:"ScanningSequence",x00180021:"SequenceVariant",x00180022:"ScanOptions",x00180023:"MRAcquisitionType",x00180024:"SequenceName",x00180025:"AngioFlag",x00180026:"InterventionDrugInformationSeq",x00180027:"InterventionDrugStopTime",x00180028:"InterventionDrugDose",x00180029:"InterventionDrugSequence",x0018002a:"AdditionalDrugSequence",x00180030:"Radionuclide",x00180031:"Radiopharmaceutical",x00180032:"EnergyWindowCenterline",x00180033:"EnergyWindowTotalWidth",x00180034:"InterventionDrugName",x00180035:"InterventionDrugStartTime",x00180036:"InterventionSequence",x00180037:"TherapyType",x00180038:"InterventionStatus",x00180039:"TherapyDescription",x0018003a:"InterventionDescription",x00180040:"CineRate",x00180042:"InitialCineRunState",x00180050:"SliceThickness",x00180060:"KVP",x00180070:"CountsAccumulated",x00180071:"AcquisitionTerminationCondition",x00180072:"EffectiveDuration",x00180073:"AcquisitionStartCondition",x00180074:"AcquisitionStartConditionData",x00180075:"AcquisitionEndConditionData",x00180080:"RepetitionTime",x00180081:"EchoTime",x00180082:"InversionTime",x00180083:"NumberOfAverages",x00180084:"ImagingFrequency",x00180085:"ImagedNucleus",x00180086:"EchoNumber",x00180087:"MagneticFieldStrength",x00180088:"SpacingBetweenSlices",x00180089:"NumberOfPhaseEncodingSteps",x00180090:"DataCollectionDiameter",x00180091:"EchoTrainLength",x00180093:"PercentSampling",x00180094:"PercentPhaseFieldOfView",x00180095:"PixelBandwidth",x00181000:"DeviceSerialNumber",x00181002:"DeviceUID",x00181003:"DeviceID",x00181004:"PlateID",x00181005:"GeneratorID",x00181006:"GridID",x00181007:"CassetteID",x00181008:"GantryID",x00181010:"SecondaryCaptureDeviceID",x00181011:"HardcopyCreationDeviceID",x00181012:"DateOfSecondaryCapture",x00181014:"TimeOfSecondaryCapture",x00181016:"SecondaryCaptureDeviceManufacturer",x00181017:"HardcopyDeviceManufacturer",x00181018:"SecondaryCaptureDeviceModelName",x00181019:"SecondaryCaptureDeviceSoftwareVers",x0018101a:"HardcopyDeviceSoftwareVersion",x0018101b:"HardcopyDeviceModelName",x00181020:"SoftwareVersion",x00181022:"VideoImageFormatAcquired",x00181023:"DigitalImageFormatAcquired",x00181030:"ProtocolName",x00181040:"ContrastBolusRoute",x00181041:"ContrastBolusVolume",x00181042:"ContrastBolusStartTime",x00181043:"ContrastBolusStopTime",x00181044:"ContrastBolusTotalDose",x00181045:"SyringeCounts",x00181046:"ContrastFlowRate",x00181047:"ContrastFlowDuration",x00181048:"ContrastBolusIngredient",x00181049:"ContrastBolusConcentration",x00181050:"SpatialResolution",x00181060:"TriggerTime",x00181061:"TriggerSourceOrType",x00181062:"NominalInterval",x00181063:"FrameTime",x00181064:"CardiacFramingType",x00181065:"FrameTimeVector",x00181066:"FrameDelay",x00181067:"ImageTriggerDelay",x00181068:"MultiplexGroupTimeOffset",x00181069:"TriggerTimeOffset",x0018106a:"SynchronizationTrigger",x0018106c:"SynchronizationChannel",x0018106e:"TriggerSamplePosition",x00181070:"RadiopharmaceuticalRoute",x00181071:"RadiopharmaceuticalVolume",x00181072:"RadiopharmaceuticalStartTime",x00181073:"RadiopharmaceuticalStopTime",x00181074:"RadionuclideTotalDose",x00181075:"RadionuclideHalfLife",x00181076:"RadionuclidePositronFraction",x00181077:"RadiopharmaceuticalSpecActivity",x00181078:"RadiopharmaceuticalStartDateTime",x00181079:"RadiopharmaceuticalStopDateTime",x00181080:"BeatRejectionFlag",x00181081:"LowRRValue",x00181082:"HighRRValue",x00181083:"IntervalsAcquired",x00181084:"IntervalsRejected",x00181085:"PVCRejection",x00181086:"SkipBeats",x00181088:"HeartRate",x00181090:"CardiacNumberOfImages",x00181094:"TriggerWindow",x00181100:"ReconstructionDiameter",x00181110:"DistanceSourceToDetector",x00181111:"DistanceSourceToPatient",x00181114:"EstimatedRadiographicMagnification",x00181120:"GantryDetectorTilt",x00181121:"GantryDetectorSlew",x00181130:"TableHeight",x00181131:"TableTraverse",x00181134:"TableMotion",x00181135:"TableVerticalIncrement",x00181136:"TableLateralIncrement",x00181137:"TableLongitudinalIncrement",x00181138:"TableAngle",x0018113a:"TableType",x00181140:"RotationDirection",x00181141:"AngularPosition",x00181142:"RadialPosition",x00181143:"ScanArc",x00181144:"AngularStep",x00181145:"CenterOfRotationOffset",x00181146:"RotationOffset",x00181147:"FieldOfViewShape",x00181149:"FieldOfViewDimensions",x00181150:"ExposureTime",x00181151:"XRayTubeCurrent",x00181152:"Exposure",x00181153:"ExposureInMicroAmpSec",x00181154:"AveragePulseWidth",x00181155:"RadiationSetting",x00181156:"RectificationType",x0018115a:"RadiationMode",x0018115e:"ImageAreaDoseProduct",x00181160:"FilterType",x00181161:"TypeOfFilters",x00181162:"IntensifierSize",x00181164:"ImagerPixelSpacing",x00181166:"Grid",x00181170:"GeneratorPower",x00181180:"CollimatorGridName",x00181181:"CollimatorType",x00181182:"FocalDistance",x00181183:"XFocusCenter",x00181184:"YFocusCenter",x00181190:"FocalSpots",x00181191:"AnodeTargetMaterial",x001811a0:"BodyPartThickness",x001811a2:"CompressionForce",x00181200:"DateOfLastCalibration",x00181201:"TimeOfLastCalibration",x00181210:"ConvolutionKernel",x00181240:"UpperLowerPixelValues",x00181242:"ActualFrameDuration",x00181243:"CountRate",x00181244:"PreferredPlaybackSequencing",x00181250:"ReceiveCoilName",x00181251:"TransmitCoilName",x00181260:"PlateType",x00181261:"PhosphorType",x00181300:"ScanVelocity",x00181301:"WholeBodyTechnique",x00181302:"ScanLength",x00181310:"AcquisitionMatrix",x00181312:"InPlanePhaseEncodingDirection",x00181314:"FlipAngle",x00181315:"VariableFlipAngleFlag",x00181316:"SAR",x00181318:"DB-Dt",x00181400:"AcquisitionDeviceProcessingDescr",x00181401:"AcquisitionDeviceProcessingCode",x00181402:"CassetteOrientation",x00181403:"CassetteSize",x00181404:"ExposuresOnPlate",x00181405:"RelativeXRayExposure",x00181450:"ColumnAngulation",x00181460:"TomoLayerHeight",x00181470:"TomoAngle",x00181480:"TomoTime",x00181490:"TomoType",x00181491:"TomoClass",x00181495:"NumberOfTomosynthesisSourceImages",x00181500:"PositionerMotion",x00181508:"PositionerType",x00181510:"PositionerPrimaryAngle",x00181511:"PositionerSecondaryAngle",x00181520:"PositionerPrimaryAngleIncrement",x00181521:"PositionerSecondaryAngleIncrement",x00181530:"DetectorPrimaryAngle",x00181531:"DetectorSecondaryAngle",x00181600:"ShutterShape",x00181602:"ShutterLeftVerticalEdge",x00181604:"ShutterRightVerticalEdge",x00181606:"ShutterUpperHorizontalEdge",x00181608:"ShutterLowerHorizontalEdge",x00181610:"CenterOfCircularShutter",x00181612:"RadiusOfCircularShutter",x00181620:"VerticesOfPolygonalShutter",x00181622:"ShutterPresentationValue",x00181623:"ShutterOverlayGroup",x00181624:"ShutterPresentationColorCIELabVal",x00181700:"CollimatorShape",x00181702:"CollimatorLeftVerticalEdge",x00181704:"CollimatorRightVerticalEdge",x00181706:"CollimatorUpperHorizontalEdge",x00181708:"CollimatorLowerHorizontalEdge",x00181710:"CenterOfCircularCollimator",x00181712:"RadiusOfCircularCollimator",x00181720:"VerticesOfPolygonalCollimator",x00181800:"AcquisitionTimeSynchronized",x00181801:"TimeSource",x00181802:"TimeDistributionProtocol",x00181803:"NTPSourceAddress",x00182001:"PageNumberVector",x00182002:"FrameLabelVector",x00182003:"FramePrimaryAngleVector",x00182004:"FrameSecondaryAngleVector",x00182005:"SliceLocationVector",x00182006:"DisplayWindowLabelVector",x00182010:"NominalScannedPixelSpacing",x00182020:"DigitizingDeviceTransportDirection",x00182030:"RotationOfScannedFilm",x00183100:"IVUSAcquisition",x00183101:"IVUSPullbackRate",x00183102:"IVUSGatedRate",x00183103:"IVUSPullbackStartFrameNumber",x00183104:"IVUSPullbackStopFrameNumber",x00183105:"LesionNumber",x00184000:"AcquisitionComments",x00185000:"OutputPower",x00185010:"TransducerData",x00185012:"FocusDepth",x00185020:"ProcessingFunction",x00185021:"PostprocessingFunction",x00185022:"MechanicalIndex",x00185024:"BoneThermalIndex",x00185026:"CranialThermalIndex",x00185027:"SoftTissueThermalIndex",x00185028:"SoftTissueFocusThermalIndex",x00185029:"SoftTissueSurfaceThermalIndex",x00185030:"DynamicRange",x00185040:"TotalGain",x00185050:"DepthOfScanField",x00185100:"PatientPosition",x00185101:"ViewPosition",x00185104:"ProjectionEponymousNameCodeSeq",x00185210:"ImageTransformationMatrix",x00185212:"ImageTranslationVector",x00186000:"Sensitivity",x00186011:"SequenceOfUltrasoundRegions",x00186012:"RegionSpatialFormat",x00186014:"RegionDataType",x00186016:"RegionFlags",x00186018:"RegionLocationMinX0",x0018601a:"RegionLocationMinY0",x0018601c:"RegionLocationMaxX1",x0018601e:"RegionLocationMaxY1",x00186020:"ReferencePixelX0",x00186022:"ReferencePixelY0",x00186024:"PhysicalUnitsXDirection",x00186026:"PhysicalUnitsYDirection",x00186028:"ReferencePixelPhysicalValueX",x0018602a:"ReferencePixelPhysicalValueY",x0018602c:"PhysicalDeltaX",x0018602e:"PhysicalDeltaY",x00186030:"TransducerFrequency",x00186031:"TransducerType",x00186032:"PulseRepetitionFrequency",x00186034:"DopplerCorrectionAngle",x00186036:"SteeringAngle",x00186038:"DopplerSampleVolumeXPosRetired",x00186039:"DopplerSampleVolumeXPosition",x0018603a:"DopplerSampleVolumeYPosRetired",x0018603b:"DopplerSampleVolumeYPosition",x0018603c:"TMLinePositionX0Retired",x0018603d:"TMLinePositionX0",x0018603e:"TMLinePositionY0Retired",x0018603f:"TMLinePositionY0",x00186040:"TMLinePositionX1Retired",x00186041:"TMLinePositionX1",x00186042:"TMLinePositionY1Retired",x00186043:"TMLinePositionY1",x00186044:"PixelComponentOrganization",x00186046:"PixelComponentMask",x00186048:"PixelComponentRangeStart",x0018604a:"PixelComponentRangeStop",x0018604c:"PixelComponentPhysicalUnits",x0018604e:"PixelComponentDataType",x00186050:"NumberOfTableBreakPoints",x00186052:"TableOfXBreakPoints",x00186054:"TableOfYBreakPoints",x00186056:"NumberOfTableEntries",x00186058:"TableOfPixelValues",x0018605a:"TableOfParameterValues",x00186060:"RWaveTimeVector",x00187000:"DetectorConditionsNominalFlag",x00187001:"DetectorTemperature",x00187004:"DetectorType",x00187005:"DetectorConfiguration",x00187006:"DetectorDescription",x00187008:"DetectorMode",x0018700a:"DetectorID",x0018700c:"DateOfLastDetectorCalibration",x0018700e:"TimeOfLastDetectorCalibration",x00187010:"DetectorExposuresSinceCalibration",x00187011:"DetectorExposuresSinceManufactured",x00187012:"DetectorTimeSinceLastExposure",x00187014:"DetectorActiveTime",x00187016:"DetectorActiveOffsetFromExposure",x0018701a:"DetectorBinning",x00187020:"DetectorElementPhysicalSize",x00187022:"DetectorElementSpacing",x00187024:"DetectorActiveShape",x00187026:"DetectorActiveDimensions",x00187028:"DetectorActiveOrigin",x0018702a:"DetectorManufacturerName",x0018702b:"DetectorManufacturersModelName",x00187030:"FieldOfViewOrigin",x00187032:"FieldOfViewRotation",x00187034:"FieldOfViewHorizontalFlip",x00187040:"GridAbsorbingMaterial",x00187041:"GridSpacingMaterial",x00187042:"GridThickness",x00187044:"GridPitch",x00187046:"GridAspectRatio",x00187048:"GridPeriod",x0018704c:"GridFocalDistance",x00187050:"FilterMaterial",x00187052:"FilterThicknessMinimum",x00187054:"FilterThicknessMaximum",x00187060:"ExposureControlMode",x00187062:"ExposureControlModeDescription",x00187064:"ExposureStatus",x00187065:"PhototimerSetting",x00188150:"ExposureTimeInMicroSec",x00188151:"XRayTubeCurrentInMicroAmps",x00189004:"ContentQualification",x00189005:"PulseSequenceName",x00189006:"MRImagingModifierSequence",x00189008:"EchoPulseSequence",x00189009:"InversionRecovery",x00189010:"FlowCompensation",x00189011:"MultipleSpinEcho",x00189012:"MultiPlanarExcitation",x00189014:"PhaseContrast",x00189015:"TimeOfFlightContrast",x00189016:"Spoiling",x00189017:"SteadyStatePulseSequence",x00189018:"EchoPlanarPulseSequence",x00189019:"TagAngleFirstAxis",x00189020:"MagnetizationTransfer",x00189021:"T2Preparation",x00189022:"BloodSignalNulling",x00189024:"SaturationRecovery",x00189025:"SpectrallySelectedSuppression",x00189026:"SpectrallySelectedExcitation",x00189027:"SpatialPresaturation",x00189028:"Tagging",x00189029:"OversamplingPhase",x00189030:"TagSpacingFirstDimension",x00189032:"GeometryOfKSpaceTraversal",x00189033:"SegmentedKSpaceTraversal",x00189034:"RectilinearPhaseEncodeReordering",x00189035:"TagThickness",x00189036:"PartialFourierDirection",x00189037:"CardiacSynchronizationTechnique",x00189041:"ReceiveCoilManufacturerName",x00189042:"MRReceiveCoilSequence",x00189043:"ReceiveCoilType",x00189044:"QuadratureReceiveCoil",x00189045:"MultiCoilDefinitionSequence",x00189046:"MultiCoilConfiguration",x00189047:"MultiCoilElementName",x00189048:"MultiCoilElementUsed",x00189049:"MRTransmitCoilSequence",x00189050:"TransmitCoilManufacturerName",x00189051:"TransmitCoilType",x00189052:"SpectralWidth",x00189053:"ChemicalShiftReference",x00189054:"VolumeLocalizationTechnique",x00189058:"MRAcquisitionFrequencyEncodeSteps",x00189059:"Decoupling",x00189060:"DecoupledNucleus",x00189061:"DecouplingFrequency",x00189062:"DecouplingMethod",x00189063:"DecouplingChemicalShiftReference",x00189064:"KSpaceFiltering",x00189065:"TimeDomainFiltering",x00189066:"NumberOfZeroFills",x00189067:"BaselineCorrection",x00189069:"ParallelReductionFactorInPlane",x00189070:"CardiacRRIntervalSpecified",x00189073:"AcquisitionDuration",x00189074:"FrameAcquisitionDateTime",x00189075:"DiffusionDirectionality",x00189076:"DiffusionGradientDirectionSequence",x00189077:"ParallelAcquisition",x00189078:"ParallelAcquisitionTechnique",x00189079:"InversionTimes",x00189080:"MetaboliteMapDescription",x00189081:"PartialFourier",x00189082:"EffectiveEchoTime",x00189083:"MetaboliteMapCodeSequence",x00189084:"ChemicalShiftSequence",x00189085:"CardiacSignalSource",x00189087:"DiffusionBValue",x00189089:"DiffusionGradientOrientation",x00189090:"VelocityEncodingDirection",x00189091:"VelocityEncodingMinimumValue",x00189093:"NumberOfKSpaceTrajectories",x00189094:"CoverageOfKSpace",x00189095:"SpectroscopyAcquisitionPhaseRows",x00189096:"ParallelReductFactorInPlaneRetired",x00189098:"TransmitterFrequency",x00189100:"ResonantNucleus",x00189101:"FrequencyCorrection",x00189103:"MRSpectroscopyFOV-GeometrySequence",x00189104:"SlabThickness",x00189105:"SlabOrientation",x00189106:"MidSlabPosition",x00189107:"MRSpatialSaturationSequence",x00189112:"MRTimingAndRelatedParametersSeq",x00189114:"MREchoSequence",x00189115:"MRModifierSequence",x00189117:"MRDiffusionSequence",x00189118:"CardiacTriggerSequence",x00189119:"MRAveragesSequence",x00189125:"MRFOV-GeometrySequence",x00189126:"VolumeLocalizationSequence",x00189127:"SpectroscopyAcquisitionDataColumns",x00189147:"DiffusionAnisotropyType",x00189151:"FrameReferenceDateTime",x00189152:"MRMetaboliteMapSequence",x00189155:"ParallelReductionFactorOutOfPlane",x00189159:"SpectroscopyOutOfPlanePhaseSteps",x00189166:"BulkMotionStatus",x00189168:"ParallelReductionFactSecondInPlane",x00189169:"CardiacBeatRejectionTechnique",x00189170:"RespiratoryMotionCompTechnique",x00189171:"RespiratorySignalSource",x00189172:"BulkMotionCompensationTechnique",x00189173:"BulkMotionSignalSource",x00189174:"ApplicableSafetyStandardAgency",x00189175:"ApplicableSafetyStandardDescr",x00189176:"OperatingModeSequence",x00189177:"OperatingModeType",x00189178:"OperatingMode",x00189179:"SpecificAbsorptionRateDefinition",x00189180:"GradientOutputType",x00189181:"SpecificAbsorptionRateValue",x00189182:"GradientOutput",x00189183:"FlowCompensationDirection",x00189184:"TaggingDelay",x00189185:"RespiratoryMotionCompTechDescr",x00189186:"RespiratorySignalSourceID",x00189195:"ChemicalShiftsMinIntegrateLimitHz",x00189196:"ChemicalShiftsMaxIntegrateLimitHz",x00189197:"MRVelocityEncodingSequence",x00189198:"FirstOrderPhaseCorrection",x00189199:"WaterReferencedPhaseCorrection",x00189200:"MRSpectroscopyAcquisitionType",x00189214:"RespiratoryCyclePosition",x00189217:"VelocityEncodingMaximumValue",x00189218:"TagSpacingSecondDimension",x00189219:"TagAngleSecondAxis",x00189220:"FrameAcquisitionDuration",x00189226:"MRImageFrameTypeSequence",x00189227:"MRSpectroscopyFrameTypeSequence",x00189231:"MRAcqPhaseEncodingStepsInPlane",x00189232:"MRAcqPhaseEncodingStepsOutOfPlane",x00189234:"SpectroscopyAcqPhaseColumns",x00189236:"CardiacCyclePosition",x00189239:"SpecificAbsorptionRateSequence",x00189240:"RFEchoTrainLength",x00189241:"GradientEchoTrainLength",x00189295:"ChemicalShiftsMinIntegrateLimitPPM",x00189296:"ChemicalShiftsMaxIntegrateLimitPPM",x00189301:"CTAcquisitionTypeSequence",x00189302:"AcquisitionType",x00189303:"TubeAngle",x00189304:"CTAcquisitionDetailsSequence",x00189305:"RevolutionTime",x00189306:"SingleCollimationWidth",x00189307:"TotalCollimationWidth",x00189308:"CTTableDynamicsSequence",x00189309:"TableSpeed",x00189310:"TableFeedPerRotation",x00189311:"SpiralPitchFactor",x00189312:"CTGeometrySequence",x00189313:"DataCollectionCenterPatient",x00189314:"CTReconstructionSequence",x00189315:"ReconstructionAlgorithm",x00189316:"ConvolutionKernelGroup",x00189317:"ReconstructionFieldOfView",x00189318:"ReconstructionTargetCenterPatient",x00189319:"ReconstructionAngle",x00189320:"ImageFilter",x00189321:"CTExposureSequence",x00189322:"ReconstructionPixelSpacing",x00189323:"ExposureModulationType",x00189324:"EstimatedDoseSaving",x00189325:"CTXRayDetailsSequence",x00189326:"CTPositionSequence",x00189327:"TablePosition",x00189328:"ExposureTimeInMilliSec",x00189329:"CTImageFrameTypeSequence",x00189330:"XRayTubeCurrentInMilliAmps",x00189332:"ExposureInMilliAmpSec",x00189333:"ConstantVolumeFlag",x00189334:"FluoroscopyFlag",x00189335:"SourceToDataCollectionCenterDist",x00189337:"ContrastBolusAgentNumber",x00189338:"ContrastBolusIngredientCodeSeq",x00189340:"ContrastAdministrationProfileSeq",x00189341:"ContrastBolusUsageSequence",x00189342:"ContrastBolusAgentAdministered",x00189343:"ContrastBolusAgentDetected",x00189344:"ContrastBolusAgentPhase",x00189345:"CTDIvol",x00189346:"CTDIPhantomTypeCodeSequence",x00189351:"CalciumScoringMassFactorPatient",x00189352:"CalciumScoringMassFactorDevice",x00189353:"EnergyWeightingFactor",x00189360:"CTAdditionalXRaySourceSequence",x00189401:"ProjectionPixelCalibrationSequence",x00189402:"DistanceSourceToIsocenter",x00189403:"DistanceObjectToTableTop",x00189404:"ObjectPixelSpacingInCenterOfBeam",x00189405:"PositionerPositionSequence",x00189406:"TablePositionSequence",x00189407:"CollimatorShapeSequence",x00189412:"XA-XRFFrameCharacteristicsSequence",x00189417:"FrameAcquisitionSequence",x00189420:"XRayReceptorType",x00189423:"AcquisitionProtocolName",x00189424:"AcquisitionProtocolDescription",x00189425:"ContrastBolusIngredientOpaque",x00189426:"DistanceReceptorPlaneToDetHousing",x00189427:"IntensifierActiveShape",x00189428:"IntensifierActiveDimensions",x00189429:"PhysicalDetectorSize",x00189430:"PositionOfIsocenterProjection",x00189432:"FieldOfViewSequence",x00189433:"FieldOfViewDescription",x00189434:"ExposureControlSensingRegionsSeq",x00189435:"ExposureControlSensingRegionShape",x00189436:"ExposureControlSensRegionLeftEdge",x00189437:"ExposureControlSensRegionRightEdge",x00189440:"CenterOfCircExposControlSensRegion",x00189441:"RadiusOfCircExposControlSensRegion",x00189447:"ColumnAngulationPatient",x00189449:"BeamAngle",x00189451:"FrameDetectorParametersSequence",x00189452:"CalculatedAnatomyThickness",x00189455:"CalibrationSequence",x00189456:"ObjectThicknessSequence",x00189457:"PlaneIdentification",x00189461:"FieldOfViewDimensionsInFloat",x00189462:"IsocenterReferenceSystemSequence",x00189463:"PositionerIsocenterPrimaryAngle",x00189464:"PositionerIsocenterSecondaryAngle",x00189465:"PositionerIsocenterDetRotAngle",x00189466:"TableXPositionToIsocenter",x00189467:"TableYPositionToIsocenter",x00189468:"TableZPositionToIsocenter",x00189469:"TableHorizontalRotationAngle",x00189470:"TableHeadTiltAngle",x00189471:"TableCradleTiltAngle",x00189472:"FrameDisplayShutterSequence",x00189473:"AcquiredImageAreaDoseProduct",x00189474:"CArmPositionerTabletopRelationship",x00189476:"XRayGeometrySequence",x00189477:"IrradiationEventIDSequence",x00189504:"XRay3DFrameTypeSequence",x00189506:"ContributingSourcesSequence",x00189507:"XRay3DAcquisitionSequence",x00189508:"PrimaryPositionerScanArc",x00189509:"SecondaryPositionerScanArc",x00189510:"PrimaryPositionerScanStartAngle",x00189511:"SecondaryPositionerScanStartAngle",x00189514:"PrimaryPositionerIncrement",x00189515:"SecondaryPositionerIncrement",x00189516:"StartAcquisitionDateTime",x00189517:"EndAcquisitionDateTime",x00189524:"ApplicationName",x00189525:"ApplicationVersion",x00189526:"ApplicationManufacturer",x00189527:"AlgorithmType",x00189528:"AlgorithmDescription",x00189530:"XRay3DReconstructionSequence",x00189531:"ReconstructionDescription",x00189538:"PerProjectionAcquisitionSequence",x00189601:"DiffusionBMatrixSequence",x00189602:"DiffusionBValueXX",x00189603:"DiffusionBValueXY",x00189604:"DiffusionBValueXZ",x00189605:"DiffusionBValueYY",x00189606:"DiffusionBValueYZ",x00189607:"DiffusionBValueZZ",x00189701:"DecayCorrectionDateTime",x00189715:"StartDensityThreshold",x00189722:"TerminationTimeThreshold",x00189725:"DetectorGeometry",x00189727:"AxialDetectorDimension",x00189735:"PETPositionSequence",x00189739:"NumberOfIterations",x00189740:"NumberOfSubsets",x00189751:"PETFrameTypeSequence",x00189756:"ReconstructionType",x00189758:"DecayCorrected",x00189759:"AttenuationCorrected",x00189760:"ScatterCorrected",x00189761:"DeadTimeCorrected",x00189762:"GantryMotionCorrected",x00189763:"PatientMotionCorrected",x00189765:"RandomsCorrected",x00189767:"SensitivityCalibrated",x00189801:"DepthsOfFocus",x00189804:"ExclusionStartDatetime",x00189805:"ExclusionDuration",x00189807:"ImageDataTypeSequence",x00189808:"DataType",x0018980b:"AliasedDataType",x0018a001:"ContributingEquipmentSequence",x0018a002:"ContributionDateTime",x0018a003:"ContributionDescription",x00200000:"RelationshipGroupLength",x0020000d:"StudyInstanceUID",x0020000e:"SeriesInstanceUID",x00200010:"StudyID",x00200011:"SeriesNumber",x00200012:"AcquisitionNumber",x00200013:"InstanceNumber",x00200014:"IsotopeNumber",x00200015:"PhaseNumber",x00200016:"IntervalNumber",x00200017:"TimeSlotNumber",x00200018:"AngleNumber",x00200019:"ItemNumber",x00200020:"PatientOrientation",x00200022:"OverlayNumber",x00200024:"CurveNumber",x00200026:"LookupTableNumber",x00200030:"ImagePosition",x00200032:"ImagePositionPatient",x00200035:"ImageOrientation",x00200037:"ImageOrientationPatient",x00200050:"Location",x00200052:"FrameOfReferenceUID",x00200060:"Laterality",x00200062:"ImageLaterality",x00200070:"ImageGeometryType",x00200080:"MaskingImage",x00200100:"TemporalPositionIdentifier",x00200105:"NumberOfTemporalPositions",x00200110:"TemporalResolution",x00200200:"SynchronizationFrameOfReferenceUID",x00201000:"SeriesInStudy",x00201001:"AcquisitionsInSeries",x00201002:"ImagesInAcquisition",x00201003:"ImagesInSeries",x00201004:"AcquisitionsInStudy",x00201005:"ImagesInStudy",x00201020:"Reference",x00201040:"PositionReferenceIndicator",x00201041:"SliceLocation",x00201070:"OtherStudyNumbers",x00201200:"NumberOfPatientRelatedStudies",x00201202:"NumberOfPatientRelatedSeries",x00201204:"NumberOfPatientRelatedInstances",x00201206:"NumberOfStudyRelatedSeries",x00201208:"NumberOfStudyRelatedInstances",x00201209:"NumberOfSeriesRelatedInstances",x002031xx:"SourceImageIDs",x00203401:"ModifyingDeviceID",x00203402:"ModifiedImageID",x00203403:"ModifiedImageDate",x00203404:"ModifyingDeviceManufacturer",x00203405:"ModifiedImageTime",x00203406:"ModifiedImageDescription",x00204000:"ImageComments",x00205000:"OriginalImageIdentification",x00205002:"OriginalImageIdentNomenclature",x00209056:"StackID",x00209057:"InStackPositionNumber",x00209071:"FrameAnatomySequence",x00209072:"FrameLaterality",x00209111:"FrameContentSequence",x00209113:"PlanePositionSequence",x00209116:"PlaneOrientationSequence",x00209128:"TemporalPositionIndex",x00209153:"TriggerDelayTime",x00209156:"FrameAcquisitionNumber",x00209157:"DimensionIndexValues",x00209158:"FrameComments",x00209161:"ConcatenationUID",x00209162:"InConcatenationNumber",x00209163:"InConcatenationTotalNumber",x00209164:"DimensionOrganizationUID",x00209165:"DimensionIndexPointer",x00209167:"FunctionalGroupPointer",x00209213:"DimensionIndexPrivateCreator",x00209221:"DimensionOrganizationSequence",x00209222:"DimensionIndexSequence",x00209228:"ConcatenationFrameOffsetNumber",x00209238:"FunctionalGroupPrivateCreator",x00209241:"NominalPercentageOfCardiacPhase",x00209245:"NominalPercentOfRespiratoryPhase",x00209246:"StartingRespiratoryAmplitude",x00209247:"StartingRespiratoryPhase",x00209248:"EndingRespiratoryAmplitude",x00209249:"EndingRespiratoryPhase",x00209250:"RespiratoryTriggerType",x00209251:"RRIntervalTimeNominal",x00209252:"ActualCardiacTriggerDelayTime",x00209253:"RespiratorySynchronizationSequence",x00209254:"RespiratoryIntervalTime",x00209255:"NominalRespiratoryTriggerDelayTime",x00209256:"RespiratoryTriggerDelayThreshold",x00209257:"ActualRespiratoryTriggerDelayTime",x00209301:"ImagePositionVolume",x00209302:"ImageOrientationVolume",x00209308:"ApexPosition",x00209421:"DimensionDescriptionLabel",x00209450:"PatientOrientationInFrameSequence",x00209453:"FrameLabel",x00209518:"AcquisitionIndex",x00209529:"ContributingSOPInstancesRefSeq",x00209536:"ReconstructionIndex",x00220001:"LightPathFilterPassThroughWavelen",x00220002:"LightPathFilterPassBand",x00220003:"ImagePathFilterPassThroughWavelen",x00220004:"ImagePathFilterPassBand",x00220005:"PatientEyeMovementCommanded",x00220006:"PatientEyeMovementCommandCodeSeq",x00220007:"SphericalLensPower",x00220008:"CylinderLensPower",x00220009:"CylinderAxis",x0022000a:"EmmetropicMagnification",x0022000b:"IntraOcularPressure",x0022000c:"HorizontalFieldOfView",x0022000d:"PupilDilated",x0022000e:"DegreeOfDilation",x00220010:"StereoBaselineAngle",x00220011:"StereoBaselineDisplacement",x00220012:"StereoHorizontalPixelOffset",x00220013:"StereoVerticalPixelOffset",x00220014:"StereoRotation",x00220015:"AcquisitionDeviceTypeCodeSequence",x00220016:"IlluminationTypeCodeSequence",x00220017:"LightPathFilterTypeStackCodeSeq",x00220018:"ImagePathFilterTypeStackCodeSeq",x00220019:"LensesCodeSequence",x0022001a:"ChannelDescriptionCodeSequence",x0022001b:"RefractiveStateSequence",x0022001c:"MydriaticAgentCodeSequence",x0022001d:"RelativeImagePositionCodeSequence",x00220020:"StereoPairsSequence",x00220021:"LeftImageSequence",x00220022:"RightImageSequence",x00220030:"AxialLengthOfTheEye",x00220031:"OphthalmicFrameLocationSequence",x00220032:"ReferenceCoordinates",x00220035:"DepthSpatialResolution",x00220036:"MaximumDepthDistortion",x00220037:"AlongScanSpatialResolution",x00220038:"MaximumAlongScanDistortion",x00220039:"OphthalmicImageOrientation",x00220041:"DepthOfTransverseImage",x00220042:"MydriaticAgentConcUnitsSeq",x00220048:"AcrossScanSpatialResolution",x00220049:"MaximumAcrossScanDistortion",x0022004e:"MydriaticAgentConcentration",x00220055:"IlluminationWaveLength",x00220056:"IlluminationPower",x00220057:"IlluminationBandwidth",x00220058:"MydriaticAgentSequence",x00280000:"ImagePresentationGroupLength",x00280002:"SamplesPerPixel",x00280003:"SamplesPerPixelUsed",x00280004:"PhotometricInterpretation",x00280005:"ImageDimensions",x00280006:"PlanarConfiguration",x00280008:"NumberOfFrames",x00280009:"FrameIncrementPointer",x0028000a:"FrameDimensionPointer",x00280010:"Rows",x00280011:"Columns",x00280012:"Planes",x00280014:"UltrasoundColorDataPresent",x00280030:"PixelSpacing",x00280031:"ZoomFactor",x00280032:"ZoomCenter",x00280034:"PixelAspectRatio",x00280040:"ImageFormat",x00280050:"ManipulatedImage",x00280051:"CorrectedImage",x0028005f:"CompressionRecognitionCode",x00280060:"CompressionCode",x00280061:"CompressionOriginator",x00280062:"CompressionLabel",x00280063:"CompressionDescription",x00280065:"CompressionSequence",x00280066:"CompressionStepPointers",x00280068:"RepeatInterval",x00280069:"BitsGrouped",x00280070:"PerimeterTable",x00280071:"PerimeterValue",x00280080:"PredictorRows",x00280081:"PredictorColumns",x00280082:"PredictorConstants",x00280090:"BlockedPixels",x00280091:"BlockRows",x00280092:"BlockColumns",x00280093:"RowOverlap",x00280094:"ColumnOverlap",x00280100:"BitsAllocated",x00280101:"BitsStored",x00280102:"HighBit",x00280103:"PixelRepresentation",x00280104:"SmallestValidPixelValue",x00280105:"LargestValidPixelValue",x00280106:"SmallestImagePixelValue",x00280107:"LargestImagePixelValue",x00280108:"SmallestPixelValueInSeries",x00280109:"LargestPixelValueInSeries",x00280110:"SmallestImagePixelValueInPlane",x00280111:"LargestImagePixelValueInPlane",x00280120:"PixelPaddingValue",x00280121:"PixelPaddingRangeLimit",x00280200:"ImageLocation",x00280300:"QualityControlImage",x00280301:"BurnedInAnnotation",x00280400:"TransformLabel",x00280401:"TransformVersionNumber",x00280402:"NumberOfTransformSteps",x00280403:"SequenceOfCompressedData",x00280404:"DetailsOfCoefficients",x002804x2:"CoefficientCoding",x002804x3:"CoefficientCodingPointers",x00280700:"DCTLabel",x00280701:"DataBlockDescription",x00280702:"DataBlock",x00280710:"NormalizationFactorFormat",x00280720:"ZonalMapNumberFormat",x00280721:"ZonalMapLocation",x00280722:"ZonalMapFormat",x00280730:"AdaptiveMapFormat",x00280740:"CodeNumberFormat",x002808x0:"CodeLabel",x002808x2:"NumberOfTables",x002808x3:"CodeTableLocation",x002808x4:"BitsForCodeWord",x002808x8:"ImageDataLocation",x00280a02:"PixelSpacingCalibrationType",x00280a04:"PixelSpacingCalibrationDescription",x00281040:"PixelIntensityRelationship",x00281041:"PixelIntensityRelationshipSign",x00281050:"WindowCenter",x00281051:"WindowWidth",x00281052:"RescaleIntercept",x00281053:"RescaleSlope",x00281054:"RescaleType",x00281055:"WindowCenterAndWidthExplanation",x00281056:"VOI_LUTFunction",x00281080:"GrayScale",x00281090:"RecommendedViewingMode",x00281100:"GrayLookupTableDescriptor",x00281101:"RedPaletteColorTableDescriptor",x00281102:"GreenPaletteColorTableDescriptor",x00281103:"BluePaletteColorTableDescriptor",x00281111:"LargeRedPaletteColorTableDescr",x00281112:"LargeGreenPaletteColorTableDescr",x00281113:"LargeBluePaletteColorTableDescr",x00281199:"PaletteColorTableUID",x00281200:"GrayLookupTableData",x00281201:"RedPaletteColorTableData",x00281202:"GreenPaletteColorTableData",x00281203:"BluePaletteColorTableData",x00281211:"LargeRedPaletteColorTableData",x00281212:"LargeGreenPaletteColorTableData",x00281213:"LargeBluePaletteColorTableData",x00281214:"LargePaletteColorLookupTableUID",x00281221:"SegmentedRedColorTableData",x00281222:"SegmentedGreenColorTableData",x00281223:"SegmentedBlueColorTableData",x00281300:"BreastImplantPresent",x00281350:"PartialView",x00281351:"PartialViewDescription",x00281352:"PartialViewCodeSequence",x0028135a:"SpatialLocationsPreserved",x00281402:"DataPathAssignment",x00281404:"BlendingLUT1Sequence",x00281406:"BlendingWeightConstant",x00281408:"BlendingLookupTableData",x0028140c:"BlendingLUT2Sequence",x0028140e:"DataPathID",x0028140f:"RGBLUTTransferFunction",x00281410:"AlphaLUTTransferFunction",x00282000:"ICCProfile",x00282110:"LossyImageCompression",x00282112:"LossyImageCompressionRatio",x00282114:"LossyImageCompressionMethod",x00283000:"ModalityLUTSequence",x00283002:"LUTDescriptor",x00283003:"LUTExplanation",x00283004:"ModalityLUTType",x00283006:"LUTData",x00283010:"VOILUTSequence",x00283110:"SoftcopyVOILUTSequence",x00284000:"ImagePresentationComments",x00285000:"BiPlaneAcquisitionSequence",x00286010:"RepresentativeFrameNumber",x00286020:"FrameNumbersOfInterest",x00286022:"FrameOfInterestDescription",x00286023:"FrameOfInterestType",x00286030:"MaskPointers",x00286040:"RWavePointer",x00286100:"MaskSubtractionSequence",x00286101:"MaskOperation",x00286102:"ApplicableFrameRange",x00286110:"MaskFrameNumbers",x00286112:"ContrastFrameAveraging",x00286114:"MaskSubPixelShift",x00286120:"TIDOffset",x00286190:"MaskOperationExplanation",x00287fe0:"PixelDataProviderURL",x00289001:"DataPointRows",x00289002:"DataPointColumns",x00289003:"SignalDomainColumns",x00289099:"LargestMonochromePixelValue",x00289108:"DataRepresentation",x00289110:"PixelMeasuresSequence",x00289132:"FrameVOILUTSequence",x00289145:"PixelValueTransformationSequence",x00289235:"SignalDomainRows",x00289411:"DisplayFilterPercentage",x00289415:"FramePixelShiftSequence",x00289416:"SubtractionItemID",x00289422:"PixelIntensityRelationshipLUTSeq",x00289443:"FramePixelDataPropertiesSequence",x00289444:"GeometricalProperties",x00289445:"GeometricMaximumDistortion",x00289446:"ImageProcessingApplied",x00289454:"MaskSelectionMode",x00289474:"LUTFunction",x00289478:"MaskVisibilityPercentage",x00289501:"PixelShiftSequence",x00289502:"RegionPixelShiftSequence",x00289503:"VerticesOfTheRegion",x00289506:"PixelShiftFrameRange",x00289507:"LUTFrameRange",x00289520:"ImageToEquipmentMappingMatrix",x00289537:"EquipmentCoordinateSystemID",x00320000:"StudyGroupLength",x0032000a:"StudyStatusID",x0032000c:"StudyPriorityID",x00320012:"StudyIDIssuer",x00320032:"StudyVerifiedDate",x00320033:"StudyVerifiedTime",x00320034:"StudyReadDate",x00320035:"StudyReadTime",x00321000:"ScheduledStudyStartDate",x00321001:"ScheduledStudyStartTime",x00321010:"ScheduledStudyStopDate",x00321011:"ScheduledStudyStopTime",x00321020:"ScheduledStudyLocation",x00321021:"ScheduledStudyLocationAETitle",x00321030:"ReasonForStudy",x00321031:"RequestingPhysicianIDSequence",x00321032:"RequestingPhysician",x00321033:"RequestingService",x00321040:"StudyArrivalDate",x00321041:"StudyArrivalTime",x00321050:"StudyCompletionDate",x00321051:"StudyCompletionTime",x00321055:"StudyComponentStatusID",x00321060:"RequestedProcedureDescription",x00321064:"RequestedProcedureCodeSequence",x00321070:"RequestedContrastAgent",x00324000:"StudyComments",x00380004:"ReferencedPatientAliasSequence",x00380008:"VisitStatusID",x00380010:"AdmissionID",x00380011:"IssuerOfAdmissionID",x00380016:"RouteOfAdmissions",x0038001a:"ScheduledAdmissionDate",x0038001b:"ScheduledAdmissionTime",x0038001c:"ScheduledDischargeDate",x0038001d:"ScheduledDischargeTime",x0038001e:"ScheduledPatientInstitResidence",x00380020:"AdmittingDate",x00380021:"AdmittingTime",x00380030:"DischargeDate",x00380032:"DischargeTime",x00380040:"DischargeDiagnosisDescription",x00380044:"DischargeDiagnosisCodeSequence",x00380050:"SpecialNeeds",x00380060:"ServiceEpisodeID",x00380061:"IssuerOfServiceEpisodeID",x00380062:"ServiceEpisodeDescription",x00380100:"PertinentDocumentsSequence",x00380300:"CurrentPatientLocation",x00380400:"PatientInstitutionResidence",x00380500:"PatientState",x00380502:"PatientClinicalTrialParticipSeq",x00384000:"VisitComments",x003a0004:"WaveformOriginality",x003a0005:"NumberOfWaveformChannels",x003a0010:"NumberOfWaveformSamples",x003a001a:"SamplingFrequency",x003a0020:"MultiplexGroupLabel",x003a0200:"ChannelDefinitionSequence",x003a0202:"WaveformChannelNumber",x003a0203:"ChannelLabel",x003a0205:"ChannelStatus",x003a0208:"ChannelSourceSequence",x003a0209:"ChannelSourceModifiersSequence",x003a020a:"SourceWaveformSequence",x003a020c:"ChannelDerivationDescription",x003a0210:"ChannelSensitivity",x003a0211:"ChannelSensitivityUnitsSequence",x003a0212:"ChannelSensitivityCorrectionFactor",x003a0213:"ChannelBaseline",x003a0214:"ChannelTimeSkew",x003a0215:"ChannelSampleSkew",x003a0218:"ChannelOffset",x003a021a:"WaveformBitsStored",x003a0220:"FilterLowFrequency",x003a0221:"FilterHighFrequency",x003a0222:"NotchFilterFrequency",x003a0223:"NotchFilterBandwidth",x003a0230:"WaveformDataDisplayScale",x003a0231:"WaveformDisplayBkgCIELabValue",x003a0240:"WaveformPresentationGroupSequence",x003a0241:"PresentationGroupNumber",x003a0242:"ChannelDisplaySequence",x003a0244:"ChannelRecommendDisplayCIELabValue",x003a0245:"ChannelPosition",x003a0246:"DisplayShadingFlag",x003a0247:"FractionalChannelDisplayScale",x003a0248:"AbsoluteChannelDisplayScale",x003a0300:"MultiplexAudioChannelsDescrCodeSeq",x003a0301:"ChannelIdentificationCode",x003a0302:"ChannelMode",x00400001:"ScheduledStationAETitle",x00400002:"ScheduledProcedureStepStartDate",x00400003:"ScheduledProcedureStepStartTime",x00400004:"ScheduledProcedureStepEndDate",x00400005:"ScheduledProcedureStepEndTime",x00400006:"ScheduledPerformingPhysiciansName",x00400007:"ScheduledProcedureStepDescription",x00400008:"ScheduledProtocolCodeSequence",x00400009:"ScheduledProcedureStepID",x0040000a:"StageCodeSequence",x0040000b:"ScheduledPerformingPhysicianIDSeq",x00400010:"ScheduledStationName",x00400011:"ScheduledProcedureStepLocation",x00400012:"PreMedication",x00400020:"ScheduledProcedureStepStatus",x00400031:"LocalNamespaceEntityID",x00400032:"UniversalEntityID",x00400033:"UniversalEntityIDType",x00400035:"IdentifierTypeCode",x00400036:"AssigningFacilitySequence",x00400100:"ScheduledProcedureStepSequence",x00400220:"ReferencedNonImageCompositeSOPSeq",x00400241:"PerformedStationAETitle",x00400242:"PerformedStationName",x00400243:"PerformedLocation",x00400244:"PerformedProcedureStepStartDate",x00400245:"PerformedProcedureStepStartTime",x00400250:"PerformedProcedureStepEndDate",x00400251:"PerformedProcedureStepEndTime",x00400252:"PerformedProcedureStepStatus",x00400253:"PerformedProcedureStepID",x00400254:"PerformedProcedureStepDescription",x00400255:"PerformedProcedureTypeDescription",x00400260:"PerformedProtocolCodeSequence",x00400261:"PerformedProtocolType",x00400270:"ScheduledStepAttributesSequence",x00400275:"RequestAttributesSequence",x00400280:"CommentsOnPerformedProcedureStep",x00400281:"ProcStepDiscontinueReasonCodeSeq",x00400293:"QuantitySequence",x00400294:"Quantity",x00400295:"MeasuringUnitsSequence",x00400296:"BillingItemSequence",x00400300:"TotalTimeOfFluoroscopy",x00400301:"TotalNumberOfExposures",x00400302:"EntranceDose",x00400303:"ExposedArea",x00400306:"DistanceSourceToEntrance",x00400307:"DistanceSourceToSupport",x0040030e:"ExposureDoseSequence",x00400310:"CommentsOnRadiationDose",x00400312:"XRayOutput",x00400314:"HalfValueLayer",x00400316:"OrganDose",x00400318:"OrganExposed",x00400320:"BillingProcedureStepSequence",x00400321:"FilmConsumptionSequence",x00400324:"BillingSuppliesAndDevicesSequence",x00400330:"ReferencedProcedureStepSequence",x00400340:"PerformedSeriesSequence",x00400400:"CommentsOnScheduledProcedureStep",x00400440:"ProtocolContextSequence",x00400441:"ContentItemModifierSequence",x0040050a:"SpecimenAccessionNumber",x00400512:"ContainerIdentifier",x0040051a:"ContainerDescription",x00400550:"SpecimenSequence",x00400551:"SpecimenIdentifier",x00400552:"SpecimenDescriptionSequenceTrial",x00400553:"SpecimenDescriptionTrial",x00400554:"SpecimenUID",x00400555:"AcquisitionContextSequence",x00400556:"AcquisitionContextDescription",x0040059a:"SpecimenTypeCodeSequence",x00400600:"SpecimenShortDescription",x004006fa:"SlideIdentifier",x0040071a:"ImageCenterPointCoordinatesSeq",x0040072a:"XOffsetInSlideCoordinateSystem",x0040073a:"YOffsetInSlideCoordinateSystem",x0040074a:"ZOffsetInSlideCoordinateSystem",x004008d8:"PixelSpacingSequence",x004008da:"CoordinateSystemAxisCodeSequence",x004008ea:"MeasurementUnitsCodeSequence",x004009f8:"VitalStainCodeSequenceTrial",x00401001:"RequestedProcedureID",x00401002:"ReasonForRequestedProcedure",x00401003:"RequestedProcedurePriority",x00401004:"PatientTransportArrangements",x00401005:"RequestedProcedureLocation",x00401006:"PlacerOrderNumber-Procedure",x00401007:"FillerOrderNumber-Procedure",x00401008:"ConfidentialityCode",x00401009:"ReportingPriority",x0040100a:"ReasonForRequestedProcedureCodeSeq",x00401010:"NamesOfIntendedRecipientsOfResults",x00401011:"IntendedRecipientsOfResultsIDSeq",x00401101:"PersonIdentificationCodeSequence",x00401102:"PersonAddress",x00401103:"PersonTelephoneNumbers",x00401400:"RequestedProcedureComments",x00402001:"ReasonForImagingServiceRequest",x00402004:"IssueDateOfImagingServiceRequest",x00402005:"IssueTimeOfImagingServiceRequest",x00402006:"PlacerOrderNumberImagingServiceRequestRetired",x00402007:"FillerOrderNumberImagingServiceRequestRetired",x00402008:"OrderEnteredBy",x00402009:"OrderEntererLocation",x00402010:"OrderCallbackPhoneNumber",x00402016:"PlacerOrderNum-ImagingServiceReq",x00402017:"FillerOrderNum-ImagingServiceReq",x00402400:"ImagingServiceRequestComments",x00403001:"ConfidentialityOnPatientDataDescr",x00404001:"GenPurposeScheduledProcStepStatus",x00404002:"GenPurposePerformedProcStepStatus",x00404003:"GenPurposeSchedProcStepPriority",x00404004:"SchedProcessingApplicationsCodeSeq",x00404005:"SchedProcedureStepStartDateAndTime",x00404006:"MultipleCopiesFlag",x00404007:"PerformedProcessingAppsCodeSeq",x00404009:"HumanPerformerCodeSequence",x00404010:"SchedProcStepModificationDateTime",x00404011:"ExpectedCompletionDateAndTime",x00404015:"ResultingGenPurposePerfProcStepSeq",x00404016:"RefGenPurposeSchedProcStepSeq",x00404018:"ScheduledWorkitemCodeSequence",x00404019:"PerformedWorkitemCodeSequence",x00404020:"InputAvailabilityFlag",x00404021:"InputInformationSequence",x00404022:"RelevantInformationSequence",x00404023:"RefGenPurSchedProcStepTransUID",x00404025:"ScheduledStationNameCodeSequence",x00404026:"ScheduledStationClassCodeSequence",x00404027:"SchedStationGeographicLocCodeSeq",x00404028:"PerformedStationNameCodeSequence",x00404029:"PerformedStationClassCodeSequence",x00404030:"PerformedStationGeogLocCodeSeq",x00404031:"RequestedSubsequentWorkItemCodeSeq",x00404032:"NonDICOMOutputCodeSequence",x00404033:"OutputInformationSequence",x00404034:"ScheduledHumanPerformersSequence",x00404035:"ActualHumanPerformersSequence",x00404036:"HumanPerformersOrganization",x00404037:"HumanPerformerName",x00404040:"RawDataHandling",x00408302:"EntranceDoseInMilliGy",x00409094:"RefImageRealWorldValueMappingSeq",x00409096:"RealWorldValueMappingSequence",x00409098:"PixelValueMappingCodeSequence",x00409210:"LUTLabel",x00409211:"RealWorldValueLastValueMapped",x00409212:"RealWorldValueLUTData",x00409216:"RealWorldValueFirstValueMapped",x00409224:"RealWorldValueIntercept",x00409225:"RealWorldValueSlope",x0040a010:"RelationshipType",x0040a027:"VerifyingOrganization",x0040a030:"VerificationDateTime",x0040a032:"ObservationDateTime",x0040a040:"ValueType",x0040a043:"ConceptNameCodeSequence",x0040a050:"ContinuityOfContent",x0040a073:"VerifyingObserverSequence",x0040a075:"VerifyingObserverName",x0040a078:"AuthorObserverSequence",x0040a07a:"ParticipantSequence",x0040a07c:"CustodialOrganizationSequence",x0040a080:"ParticipationType",x0040a082:"ParticipationDateTime",x0040a084:"ObserverType",x0040a088:"VerifyingObserverIdentCodeSequence",x0040a090:"EquivalentCDADocumentSequence",x0040a0b0:"ReferencedWaveformChannels",x0040a120:"DateTime",x0040a121:"Date",x0040a122:"Time",x0040a123:"PersonName",x0040a124:"UID",x0040a130:"TemporalRangeType",x0040a132:"ReferencedSamplePositions",x0040a136:"ReferencedFrameNumbers",x0040a138:"ReferencedTimeOffsets",x0040a13a:"ReferencedDateTime",x0040a160:"TextValue",x0040a168:"ConceptCodeSequence",x0040a170:"PurposeOfReferenceCodeSequence",x0040a180:"AnnotationGroupNumber",x0040a195:"ModifierCodeSequence",x0040a300:"MeasuredValueSequence",x0040a301:"NumericValueQualifierCodeSequence",x0040a30a:"NumericValue",x0040a353:"AddressTrial",x0040a354:"TelephoneNumberTrial",x0040a360:"PredecessorDocumentsSequence",x0040a370:"ReferencedRequestSequence",x0040a372:"PerformedProcedureCodeSequence",x0040a375:"CurrentRequestedProcEvidenceSeq",x0040a385:"PertinentOtherEvidenceSequence",x0040a390:"HL7StructuredDocumentRefSeq",x0040a491:"CompletionFlag",x0040a492:"CompletionFlagDescription",x0040a493:"VerificationFlag",x0040a494:"ArchiveRequested",x0040a496:"PreliminaryFlag",x0040a504:"ContentTemplateSequence",x0040a525:"IdenticalDocumentsSequence",x0040a730:"ContentSequence",x0040b020:"AnnotationSequence",x0040db00:"TemplateIdentifier",x0040db06:"TemplateVersion",x0040db07:"TemplateLocalVersion",x0040db0b:"TemplateExtensionFlag",x0040db0c:"TemplateExtensionOrganizationUID",x0040db0d:"TemplateExtensionCreatorUID",x0040db73:"ReferencedContentItemIdentifier",x0040e001:"HL7InstanceIdentifier",x0040e004:"HL7DocumentEffectiveTime",x0040e006:"HL7DocumentTypeCodeSequence",x0040e010:"RetrieveURI",x0040e011:"RetrieveLocationUID",x00420010:"DocumentTitle",x00420011:"EncapsulatedDocument",x00420012:"MIMETypeOfEncapsulatedDocument",x00420013:"SourceInstanceSequence",x00420014:"ListOfMIMETypes",x00440001:"ProductPackageIdentifier",x00440002:"SubstanceAdministrationApproval",x00440003:"ApprovalStatusFurtherDescription",x00440004:"ApprovalStatusDateTime",x00440007:"ProductTypeCodeSequence",x00440008:"ProductName",x00440009:"ProductDescription",x0044000a:"ProductLotIdentifier",x0044000b:"ProductExpirationDateTime",x00440010:"SubstanceAdministrationDateTime",x00440011:"SubstanceAdministrationNotes",x00440012:"SubstanceAdministrationDeviceID",x00440013:"ProductParameterSequence",x00440019:"SubstanceAdminParameterSeq",x00460012:"LensDescription",x00460014:"RightLensSequence",x00460015:"LeftLensSequence",x00460018:"CylinderSequence",x00460028:"PrismSequence",x00460030:"HorizontalPrismPower",x00460032:"HorizontalPrismBase",x00460034:"VerticalPrismPower",x00460036:"VerticalPrismBase",x00460038:"LensSegmentType",x00460040:"OpticalTransmittance",x00460042:"ChannelWidth",x00460044:"PupilSize",x00460046:"CornealSize",x00460060:"DistancePupillaryDistance",x00460062:"NearPupillaryDistance",x00460064:"OtherPupillaryDistance",x00460075:"RadiusOfCurvature",x00460076:"KeratometricPower",x00460077:"KeratometricAxis",x00460092:"BackgroundColor",x00460094:"Optotype",x00460095:"OptotypePresentation",x00460100:"AddNearSequence",x00460101:"AddIntermediateSequence",x00460102:"AddOtherSequence",x00460104:"AddPower",x00460106:"ViewingDistance",x00460125:"ViewingDistanceType",x00460135:"VisualAcuityModifiers",x00460137:"DecimalVisualAcuity",x00460139:"OptotypeDetailedDefinition",x00460146:"SpherePower",x00460147:"CylinderPower",x00500004:"CalibrationImage",x00500010:"DeviceSequence",x00500014:"DeviceLength",x00500015:"ContainerComponentWidth",x00500016:"DeviceDiameter",x00500017:"DeviceDiameterUnits",x00500018:"DeviceVolume",x00500019:"InterMarkerDistance",x0050001b:"ContainerComponentID",x00500020:"DeviceDescription",x00540010:"EnergyWindowVector",x00540011:"NumberOfEnergyWindows",x00540012:"EnergyWindowInformationSequence",x00540013:"EnergyWindowRangeSequence",x00540014:"EnergyWindowLowerLimit",x00540015:"EnergyWindowUpperLimit",x00540016:"RadiopharmaceuticalInformationSeq",x00540017:"ResidualSyringeCounts",x00540018:"EnergyWindowName",x00540020:"DetectorVector",x00540021:"NumberOfDetectors",x00540022:"DetectorInformationSequence",x00540030:"PhaseVector",x00540031:"NumberOfPhases",x00540032:"PhaseInformationSequence",x00540033:"NumberOfFramesInPhase",x00540036:"PhaseDelay",x00540038:"PauseBetweenFrames",x00540039:"PhaseDescription",x00540050:"RotationVector",x00540051:"NumberOfRotations",x00540052:"RotationInformationSequence",x00540053:"NumberOfFramesInRotation",x00540060:"RRIntervalVector",x00540061:"NumberOfRRIntervals",x00540062:"GatedInformationSequence",x00540063:"DataInformationSequence",x00540070:"TimeSlotVector",x00540071:"NumberOfTimeSlots",x00540072:"TimeSlotInformationSequence",x00540073:"TimeSlotTime",x00540080:"SliceVector",x00540081:"NumberOfSlices",x00540090:"AngularViewVector",x00540100:"TimeSliceVector",x00540101:"NumberOfTimeSlices",x00540200:"StartAngle",x00540202:"TypeOfDetectorMotion",x00540210:"TriggerVector",x00540211:"NumberOfTriggersInPhase",x00540220:"ViewCodeSequence",x00540222:"ViewModifierCodeSequence",x00540300:"RadionuclideCodeSequence",x00540302:"AdministrationRouteCodeSequence",x00540304:"RadiopharmaceuticalCodeSequence",x00540306:"CalibrationDataSequence",x00540308:"EnergyWindowNumber",x00540400:"ImageID",x00540410:"PatientOrientationCodeSequence",x00540412:"PatientOrientationModifierCodeSeq",x00540414:"PatientGantryRelationshipCodeSeq",x00540500:"SliceProgressionDirection",x00541000:"SeriesType",x00541001:"Units",x00541002:"CountsSource",x00541004:"ReprojectionMethod",x00541100:"RandomsCorrectionMethod",x00541101:"AttenuationCorrectionMethod",x00541102:"DecayCorrection",x00541103:"ReconstructionMethod",x00541104:"DetectorLinesOfResponseUsed",x00541105:"ScatterCorrectionMethod",x00541200:"AxialAcceptance",x00541201:"AxialMash",x00541202:"TransverseMash",x00541203:"DetectorElementSize",x00541210:"CoincidenceWindowWidth",x00541220:"SecondaryCountsType",x00541300:"FrameReferenceTime",x00541310:"PrimaryCountsAccumulated",x00541311:"SecondaryCountsAccumulated",x00541320:"SliceSensitivityFactor",x00541321:"DecayFactor",x00541322:"DoseCalibrationFactor",x00541323:"ScatterFractionFactor",x00541324:"DeadTimeFactor",x00541330:"ImageIndex",x00541400:"CountsIncluded",x00541401:"DeadTimeCorrectionFlag",x00603000:"HistogramSequence",x00603002:"HistogramNumberOfBins",x00603004:"HistogramFirstBinValue",x00603006:"HistogramLastBinValue",x00603008:"HistogramBinWidth",x00603010:"HistogramExplanation",x00603020:"HistogramData",x00620001:"SegmentationType",x00620002:"SegmentSequence",x00620003:"SegmentedPropertyCategoryCodeSeq",x00620004:"SegmentNumber",x00620005:"SegmentLabel",x00620006:"SegmentDescription",x00620008:"SegmentAlgorithmType",x00620009:"SegmentAlgorithmName",x0062000a:"SegmentIdentificationSequence",x0062000b:"ReferencedSegmentNumber",x0062000c:"RecommendedDisplayGrayscaleValue",x0062000d:"RecommendedDisplayCIELabValue",x0062000e:"MaximumFractionalValue",x0062000f:"SegmentedPropertyTypeCodeSequence",x00620010:"SegmentationFractionalType",x00640002:"DeformableRegistrationSequence",x00640003:"SourceFrameOfReferenceUID",x00640005:"DeformableRegistrationGridSequence",x00640007:"GridDimensions",x00640008:"GridResolution",x00640009:"VectorGridData",x0064000f:"PreDeformationMatrixRegistSeq",x00640010:"PostDeformationMatrixRegistSeq",x00660001:"NumberOfSurfaces",x00660002:"SurfaceSequence",x00660003:"SurfaceNumber",x00660004:"SurfaceComments",x00660009:"SurfaceProcessing",x0066000a:"SurfaceProcessingRatio",x0066000e:"FiniteVolume",x00660010:"Manifold",x00660011:"SurfacePointsSequence",x00660015:"NumberOfSurfacePoints",x00660016:"PointCoordinatesData",x00660017:"PointPositionAccuracy",x00660018:"MeanPointDistance",x00660019:"MaximumPointDistance",x0066001b:"AxisOfRotation",x0066001c:"CenterOfRotation",x0066001e:"NumberOfVectors",x0066001f:"VectorDimensionality",x00660020:"VectorAccuracy",x00660021:"VectorCoordinateData",x00660023:"TrianglePointIndexList",x00660024:"EdgePointIndexList",x00660025:"VertexPointIndexList",x00660026:"TriangleStripSequence",x00660027:"TriangleFanSequence",x00660028:"LineSequence",x00660029:"PrimitivePointIndexList",x0066002a:"SurfaceCount",x0066002f:"AlgorithmFamilyCodeSequ",x00660031:"AlgorithmVersion",x00660032:"AlgorithmParameters",x00660034:"FacetSequence",x00660036:"AlgorithmName",x00700001:"GraphicAnnotationSequence",x00700002:"GraphicLayer",x00700003:"BoundingBoxAnnotationUnits",x00700004:"AnchorPointAnnotationUnits",x00700005:"GraphicAnnotationUnits",x00700006:"UnformattedTextValue",x00700008:"TextObjectSequence",x00700009:"GraphicObjectSequence",x00700010:"BoundingBoxTopLeftHandCorner",x00700011:"BoundingBoxBottomRightHandCorner",x00700012:"BoundingBoxTextHorizJustification",x00700014:"AnchorPoint",x00700015:"AnchorPointVisibility",x00700020:"GraphicDimensions",x00700021:"NumberOfGraphicPoints",x00700022:"GraphicData",x00700023:"GraphicType",x00700024:"GraphicFilled",x00700040:"ImageRotationRetired",x00700041:"ImageHorizontalFlip",x00700042:"ImageRotation",x00700050:"DisplayedAreaTopLeftTrial",x00700051:"DisplayedAreaBottomRightTrial",x00700052:"DisplayedAreaTopLeft",x00700053:"DisplayedAreaBottomRight",x0070005a:"DisplayedAreaSelectionSequence",x00700060:"GraphicLayerSequence",x00700062:"GraphicLayerOrder",x00700066:"GraphicLayerRecDisplayGraysclValue",x00700067:"GraphicLayerRecDisplayRGBValue",x00700068:"GraphicLayerDescription",x00700080:"ContentLabel",x00700081:"ContentDescription",x00700082:"PresentationCreationDate",x00700083:"PresentationCreationTime",x00700084:"ContentCreatorName",x00700086:"ContentCreatorIDCodeSequence",x00700100:"PresentationSizeMode",x00700101:"PresentationPixelSpacing",x00700102:"PresentationPixelAspectRatio",x00700103:"PresentationPixelMagRatio",x00700306:"ShapeType",x00700308:"RegistrationSequence",x00700309:"MatrixRegistrationSequence",x0070030a:"MatrixSequence",x0070030c:"FrameOfRefTransformationMatrixType",x0070030d:"RegistrationTypeCodeSequence",x0070030f:"FiducialDescription",x00700310:"FiducialIdentifier",x00700311:"FiducialIdentifierCodeSequence",x00700312:"ContourUncertaintyRadius",x00700314:"UsedFiducialsSequence",x00700318:"GraphicCoordinatesDataSequence",x0070031a:"FiducialUID",x0070031c:"FiducialSetSequence",x0070031e:"FiducialSequence",x00700401:"GraphicLayerRecomDisplayCIELabVal",x00700402:"BlendingSequence",x00700403:"RelativeOpacity",x00700404:"ReferencedSpatialRegistrationSeq",x00700405:"BlendingPosition",x00720002:"HangingProtocolName",x00720004:"HangingProtocolDescription",x00720006:"HangingProtocolLevel",x00720008:"HangingProtocolCreator",x0072000a:"HangingProtocolCreationDateTime",x0072000c:"HangingProtocolDefinitionSequence",x0072000e:"HangingProtocolUserIDCodeSequence",x00720010:"HangingProtocolUserGroupName",x00720012:"SourceHangingProtocolSequence",x00720014:"NumberOfPriorsReferenced",x00720020:"ImageSetsSequence",x00720022:"ImageSetSelectorSequence",x00720024:"ImageSetSelectorUsageFlag",x00720026:"SelectorAttribute",x00720028:"SelectorValueNumber",x00720030:"TimeBasedImageSetsSequence",x00720032:"ImageSetNumber",x00720034:"ImageSetSelectorCategory",x00720038:"RelativeTime",x0072003a:"RelativeTimeUnits",x0072003c:"AbstractPriorValue",x0072003e:"AbstractPriorCodeSequence",x00720040:"ImageSetLabel",x00720050:"SelectorAttributeVR",x00720052:"SelectorSequencePointer",x00720054:"SelectorSeqPointerPrivateCreator",x00720056:"SelectorAttributePrivateCreator",x00720060:"SelectorATValue",x00720062:"SelectorCSValue",x00720064:"SelectorISValue",x00720066:"SelectorLOValue",x00720068:"SelectorLTValue",x0072006a:"SelectorPNValue",x0072006c:"SelectorSHValue",x0072006e:"SelectorSTValue",x00720070:"SelectorUTValue",x00720072:"SelectorDSValue",x00720074:"SelectorFDValue",x00720076:"SelectorFLValue",x00720078:"SelectorULValue",x0072007a:"SelectorUSValue",x0072007c:"SelectorSLValue",x0072007e:"SelectorSSValue",x00720080:"SelectorCodeSequenceValue",x00720100:"NumberOfScreens",x00720102:"NominalScreenDefinitionSequence",x00720104:"NumberOfVerticalPixels",x00720106:"NumberOfHorizontalPixels",x00720108:"DisplayEnvironmentSpatialPosition",x0072010a:"ScreenMinimumGrayscaleBitDepth",x0072010c:"ScreenMinimumColorBitDepth",x0072010e:"ApplicationMaximumRepaintTime",x00720200:"DisplaySetsSequence",x00720202:"DisplaySetNumber",x00720203:"DisplaySetLabel",x00720204:"DisplaySetPresentationGroup",x00720206:"DisplaySetPresentationGroupDescr",x00720208:"PartialDataDisplayHandling",x00720210:"SynchronizedScrollingSequence",x00720212:"DisplaySetScrollingGroup",x00720214:"NavigationIndicatorSequence",x00720216:"NavigationDisplaySet",x00720218:"ReferenceDisplaySets",x00720300:"ImageBoxesSequence",x00720302:"ImageBoxNumber",x00720304:"ImageBoxLayoutType",x00720306:"ImageBoxTileHorizontalDimension",x00720308:"ImageBoxTileVerticalDimension",x00720310:"ImageBoxScrollDirection",x00720312:"ImageBoxSmallScrollType",x00720314:"ImageBoxSmallScrollAmount",x00720316:"ImageBoxLargeScrollType",x00720318:"ImageBoxLargeScrollAmount",x00720320:"ImageBoxOverlapPriority",x00720330:"CineRelativeToRealTime",x00720400:"FilterOperationsSequence",x00720402:"FilterByCategory",x00720404:"FilterByAttributePresence",x00720406:"FilterByOperator",x00720432:"SynchronizedImageBoxList",x00720434:"TypeOfSynchronization",x00720500:"BlendingOperationType",x00720510:"ReformattingOperationType",x00720512:"ReformattingThickness",x00720514:"ReformattingInterval",x00720516:"ReformattingOpInitialViewDir",x00720520:"RenderingType3D",x00720600:"SortingOperationsSequence",x00720602:"SortByCategory",x00720604:"SortingDirection",x00720700:"DisplaySetPatientOrientation",x00720702:"VOIType",x00720704:"PseudoColorType",x00720706:"ShowGrayscaleInverted",x00720710:"ShowImageTrueSizeFlag",x00720712:"ShowGraphicAnnotationFlag",x00720714:"ShowPatientDemographicsFlag",x00720716:"ShowAcquisitionTechniquesFlag",x00720717:"DisplaySetHorizontalJustification",x00720718:"DisplaySetVerticalJustification",x00741000:"UnifiedProcedureStepState",x00741002:"UPSProgressInformationSequence",x00741004:"UnifiedProcedureStepProgress",x00741006:"UnifiedProcedureStepProgressDescr",x00741008:"UnifiedProcedureStepComURISeq",x0074100a:"ContactURI",x0074100c:"ContactDisplayName",x00741020:"BeamTaskSequence",x00741022:"BeamTaskType",x00741024:"BeamOrderIndex",x00741030:"DeliveryVerificationImageSequence",x00741032:"VerificationImageTiming",x00741034:"DoubleExposureFlag",x00741036:"DoubleExposureOrdering",x00741038:"DoubleExposureMeterset",x0074103a:"DoubleExposureFieldDelta",x00741040:"RelatedReferenceRTImageSequence",x00741042:"GeneralMachineVerificationSequence",x00741044:"ConventionalMachineVerificationSeq",x00741046:"IonMachineVerificationSequence",x00741048:"FailedAttributesSequence",x0074104a:"OverriddenAttributesSequence",x0074104c:"ConventionalControlPointVerifySeq",x0074104e:"IonControlPointVerificationSeq",x00741050:"AttributeOccurrenceSequence",x00741052:"AttributeOccurrencePointer",x00741054:"AttributeItemSelector",x00741056:"AttributeOccurrencePrivateCreator",x00741200:"ScheduledProcedureStepPriority",x00741202:"StudyListLabel",x00741204:"ProcedureStepLabel",x00741210:"ScheduledProcessingParametersSeq",x00741212:"PerformedProcessingParametersSeq",x00741216:"UPSPerformedProcedureSequence",x00741220:"RelatedProcedureStepSequence",x00741222:"ProcedureStepRelationshipType",x00741230:"DeletionLock",x00741234:"ReceivingAE",x00741236:"RequestingAE",x00741238:"ReasonForCancellation",x00741242:"SCPStatus",x00741244:"SubscriptionListStatus",x00741246:"UPSListStatus",x00880130:"StorageMediaFileSetID",x00880140:"StorageMediaFileSetUID",x00880200:"IconImageSequence",x00880904:"TopicTitle",x00880906:"TopicSubject",x00880910:"TopicAuthor",x00880912:"TopicKeywords",x01000410:"SOPInstanceStatus",x01000420:"SOPAuthorizationDateAndTime",x01000424:"SOPAuthorizationComment",x01000426:"AuthorizationEquipmentCertNumber",x04000005:"MACIDNumber",x04000010:"MACCalculationTransferSyntaxUID",x04000015:"MACAlgorithm",x04000020:"DataElementsSigned",x04000100:"DigitalSignatureUID",x04000105:"DigitalSignatureDateTime",x04000110:"CertificateType",x04000115:"CertificateOfSigner",x04000120:"Signature",x04000305:"CertifiedTimestampType",x04000310:"CertifiedTimestamp",x04000401:"DigitalSignaturePurposeCodeSeq",x04000402:"ReferencedDigitalSignatureSeq",x04000403:"ReferencedSOPInstanceMACSeq",x04000404:"MAC",x04000500:"EncryptedAttributesSequence",x04000510:"EncryptedContentTransferSyntaxUID",x04000520:"EncryptedContent",x04000550:"ModifiedAttributesSequence",x04000561:"OriginalAttributesSequence",x04000562:"AttributeModificationDateTime",x04000563:"ModifyingSystem",x04000564:"SourceOfPreviousValues",x04000565:"ReasonForTheAttributeModification",x1000xxx0:"EscapeTriplet",x1000xxx1:"RunLengthTriplet",x1000xxx2:"HuffmanTableSize",x1000xxx3:"HuffmanTableTriplet",x1000xxx4:"ShiftTableSize",x1000xxx5:"ShiftTableTriplet",x1010xxxx:"ZonalMap",x20000010:"NumberOfCopies",x2000001e:"PrinterConfigurationSequence",x20000020:"PrintPriority",x20000030:"MediumType",x20000040:"FilmDestination",x20000050:"FilmSessionLabel",x20000060:"MemoryAllocation",x20000061:"MaximumMemoryAllocation",x20000062:"ColorImagePrintingFlag",x20000063:"CollationFlag",x20000065:"AnnotationFlag",x20000067:"ImageOverlayFlag",x20000069:"PresentationLUTFlag",x2000006a:"ImageBoxPresentationLUTFlag",x200000a0:"MemoryBitDepth",x200000a1:"PrintingBitDepth",x200000a2:"MediaInstalledSequence",x200000a4:"OtherMediaAvailableSequence",x200000a8:"SupportedImageDisplayFormatSeq",x20000500:"ReferencedFilmBoxSequence",x20000510:"ReferencedStoredPrintSequence",x20100010:"ImageDisplayFormat",x20100030:"AnnotationDisplayFormatID",x20100040:"FilmOrientation",x20100050:"FilmSizeID",x20100052:"PrinterResolutionID",x20100054:"DefaultPrinterResolutionID",x20100060:"MagnificationType",x20100080:"SmoothingType",x201000a6:"DefaultMagnificationType",x201000a7:"OtherMagnificationTypesAvailable",x201000a8:"DefaultSmoothingType",x201000a9:"OtherSmoothingTypesAvailable",x20100100:"BorderDensity",x20100110:"EmptyImageDensity",x20100120:"MinDensity",x20100130:"MaxDensity",x20100140:"Trim",x20100150:"ConfigurationInformation",x20100152:"ConfigurationInformationDescr",x20100154:"MaximumCollatedFilms",x2010015e:"Illumination",x20100160:"ReflectedAmbientLight",x20100376:"PrinterPixelSpacing",x20100500:"ReferencedFilmSessionSequence",x20100510:"ReferencedImageBoxSequence",x20100520:"ReferencedBasicAnnotationBoxSeq",x20200010:"ImageBoxPosition",x20200020:"Polarity",x20200030:"RequestedImageSize",x20200040:"RequestedDecimate-CropBehavior",x20200050:"RequestedResolutionID",x202000a0:"RequestedImageSizeFlag",x202000a2:"DecimateCropResult",x20200110:"BasicGrayscaleImageSequence",x20200111:"BasicColorImageSequence",x20200130:"ReferencedImageOverlayBoxSequence",x20200140:"ReferencedVOILUTBoxSequence",x20300010:"AnnotationPosition",x20300020:"TextString",x20400010:"ReferencedOverlayPlaneSequence",x20400011:"ReferencedOverlayPlaneGroups",x20400020:"OverlayPixelDataSequence",x20400060:"OverlayMagnificationType",x20400070:"OverlaySmoothingType",x20400072:"OverlayOrImageMagnification",x20400074:"MagnifyToNumberOfColumns",x20400080:"OverlayForegroundDensity",x20400082:"OverlayBackgroundDensity",x20400090:"OverlayMode",x20400100:"ThresholdDensity",x20400500:"ReferencedImageBoxSequenceRetired",x20500010:"PresentationLUTSequence",x20500020:"PresentationLUTShape",x20500500:"ReferencedPresentationLUTSequence",x21000010:"PrintJobID",x21000020:"ExecutionStatus",x21000030:"ExecutionStatusInfo",x21000040:"CreationDate",x21000050:"CreationTime",x21000070:"Originator",x21000140:"DestinationAE",x21000160:"OwnerID",x21000170:"NumberOfFilms",x21000500:"ReferencedPrintJobSequencePullStoredPrint",x21100010:"PrinterStatus",x21100020:"PrinterStatusInfo",x21100030:"PrinterName",x21100099:"PrintQueueID",x21200010:"QueueStatus",x21200050:"PrintJobDescriptionSequence",x21200070:"ReferencedPrintJobSequence",x21300010:"PrintManagementCapabilitiesSeq",x21300015:"PrinterCharacteristicsSequence",x21300030:"FilmBoxContentSequence",x21300040:"ImageBoxContentSequence",x21300050:"AnnotationContentSequence",x21300060:"ImageOverlayBoxContentSequence",x21300080:"PresentationLUTContentSequence",x213000a0:"ProposedStudySequence",x213000c0:"OriginalImageSequence",x22000001:"LabelFromInfoExtractedFromInstance",x22000002:"LabelText",x22000003:"LabelStyleSelection",x22000004:"MediaDisposition",x22000005:"BarcodeValue",x22000006:"BarcodeSymbology",x22000007:"AllowMediaSplitting",x22000008:"IncludeNonDICOMObjects",x22000009:"IncludeDisplayApplication",x2200000a:"SaveCompInstancesAfterMediaCreate",x2200000b:"TotalNumberMediaPiecesCreated",x2200000c:"RequestedMediaApplicationProfile",x2200000d:"ReferencedStorageMediaSequence",x2200000e:"FailureAttributes",x2200000f:"AllowLossyCompression",x22000020:"RequestPriority",x30020002:"RTImageLabel",x30020003:"RTImageName",x30020004:"RTImageDescription",x3002000a:"ReportedValuesOrigin",x3002000c:"RTImagePlane",x3002000d:"XRayImageReceptorTranslation",x3002000e:"XRayImageReceptorAngle",x30020010:"RTImageOrientation",x30020011:"ImagePlanePixelSpacing",x30020012:"RTImagePosition",x30020020:"RadiationMachineName",x30020022:"RadiationMachineSAD",x30020024:"RadiationMachineSSD",x30020026:"RTImageSID",x30020028:"SourceToReferenceObjectDistance",x30020029:"FractionNumber",x30020030:"ExposureSequence",x30020032:"MetersetExposure",x30020034:"DiaphragmPosition",x30020040:"FluenceMapSequence",x30020041:"FluenceDataSource",x30020042:"FluenceDataScale",x30020051:"FluenceMode",x30020052:"FluenceModeID",x30040001:"DVHType",x30040002:"DoseUnits",x30040004:"DoseType",x30040006:"DoseComment",x30040008:"NormalizationPoint",x3004000a:"DoseSummationType",x3004000c:"GridFrameOffsetVector",x3004000e:"DoseGridScaling",x30040010:"RTDoseROISequence",x30040012:"DoseValue",x30040014:"TissueHeterogeneityCorrection",x30040040:"DVHNormalizationPoint",x30040042:"DVHNormalizationDoseValue",x30040050:"DVHSequence",x30040052:"DVHDoseScaling",x30040054:"DVHVolumeUnits",x30040056:"DVHNumberOfBins",x30040058:"DVHData",x30040060:"DVHReferencedROISequence",x30040062:"DVHROIContributionType",x30040070:"DVHMinimumDose",x30040072:"DVHMaximumDose",x30040074:"DVHMeanDose",x30060002:"StructureSetLabel",x30060004:"StructureSetName",x30060006:"StructureSetDescription",x30060008:"StructureSetDate",x30060009:"StructureSetTime",x30060010:"ReferencedFrameOfReferenceSequence",x30060012:"RTReferencedStudySequence",x30060014:"RTReferencedSeriesSequence",x30060016:"ContourImageSequence",x30060020:"StructureSetROISequence",x30060022:"ROINumber",x30060024:"ReferencedFrameOfReferenceUID",x30060026:"ROIName",x30060028:"ROIDescription",x3006002a:"ROIDisplayColor",x3006002c:"ROIVolume",x30060030:"RTRelatedROISequence",x30060033:"RTROIRelationship",x30060036:"ROIGenerationAlgorithm",x30060038:"ROIGenerationDescription",x30060039:"ROIContourSequence",x30060040:"ContourSequence",x30060042:"ContourGeometricType",x30060044:"ContourSlabThickness",x30060045:"ContourOffsetVector",x30060046:"NumberOfContourPoints",x30060048:"ContourNumber",x30060049:"AttachedContours",x30060050:"ContourData",x30060080:"RTROIObservationsSequence",x30060082:"ObservationNumber",x30060084:"ReferencedROINumber",x30060085:"ROIObservationLabel",x30060086:"RTROIIdentificationCodeSequence",x30060088:"ROIObservationDescription",x300600a0:"RelatedRTROIObservationsSequence",x300600a4:"RTROIInterpretedType",x300600a6:"ROIInterpreter",x300600b0:"ROIPhysicalPropertiesSequence",x300600b2:"ROIPhysicalProperty",x300600b4:"ROIPhysicalPropertyValue",x300600b6:"ROIElementalCompositionSequence",x300600b7:"ROIElementalCompAtomicNumber",x300600b8:"ROIElementalCompAtomicMassFraction",x300600c0:"FrameOfReferenceRelationshipSeq",x300600c2:"RelatedFrameOfReferenceUID",x300600c4:"FrameOfReferenceTransformType",x300600c6:"FrameOfReferenceTransformMatrix",x300600c8:"FrameOfReferenceTransformComment",x30080010:"MeasuredDoseReferenceSequence",x30080012:"MeasuredDoseDescription",x30080014:"MeasuredDoseType",x30080016:"MeasuredDoseValue",x30080020:"TreatmentSessionBeamSequence",x30080021:"TreatmentSessionIonBeamSequence",x30080022:"CurrentFractionNumber",x30080024:"TreatmentControlPointDate",x30080025:"TreatmentControlPointTime",x3008002a:"TreatmentTerminationStatus",x3008002b:"TreatmentTerminationCode",x3008002c:"TreatmentVerificationStatus",x30080030:"ReferencedTreatmentRecordSequence",x30080032:"SpecifiedPrimaryMeterset",x30080033:"SpecifiedSecondaryMeterset",x30080036:"DeliveredPrimaryMeterset",x30080037:"DeliveredSecondaryMeterset",x3008003a:"SpecifiedTreatmentTime",x3008003b:"DeliveredTreatmentTime",x30080040:"ControlPointDeliverySequence",x30080041:"IonControlPointDeliverySequence",x30080042:"SpecifiedMeterset",x30080044:"DeliveredMeterset",x30080045:"MetersetRateSet",x30080046:"MetersetRateDelivered",x30080047:"ScanSpotMetersetsDelivered",x30080048:"DoseRateDelivered",x30080050:"TreatmentSummaryCalcDoseRefSeq",x30080052:"CumulativeDoseToDoseReference",x30080054:"FirstTreatmentDate",x30080056:"MostRecentTreatmentDate",x3008005a:"NumberOfFractionsDelivered",x30080060:"OverrideSequence",x30080061:"ParameterSequencePointer",x30080062:"OverrideParameterPointer",x30080063:"ParameterItemIndex",x30080064:"MeasuredDoseReferenceNumber",x30080065:"ParameterPointer",x30080066:"OverrideReason",x30080068:"CorrectedParameterSequence",x3008006a:"CorrectionValue",x30080070:"CalculatedDoseReferenceSequence",x30080072:"CalculatedDoseReferenceNumber",x30080074:"CalculatedDoseReferenceDescription",x30080076:"CalculatedDoseReferenceDoseValue",x30080078:"StartMeterset",x3008007a:"EndMeterset",x30080080:"ReferencedMeasuredDoseReferenceSeq",x30080082:"ReferencedMeasuredDoseReferenceNum",x30080090:"ReferencedCalculatedDoseRefSeq",x30080092:"ReferencedCalculatedDoseRefNumber",x300800a0:"BeamLimitingDeviceLeafPairsSeq",x300800b0:"RecordedWedgeSequence",x300800c0:"RecordedCompensatorSequence",x300800d0:"RecordedBlockSequence",x300800e0:"TreatmentSummaryMeasuredDoseRefSeq",x300800f0:"RecordedSnoutSequence",x300800f2:"RecordedRangeShifterSequence",x300800f4:"RecordedLateralSpreadingDeviceSeq",x300800f6:"RecordedRangeModulatorSequence",x30080100:"RecordedSourceSequence",x30080105:"SourceSerialNumber",x30080110:"TreatmentSessionAppSetupSeq",x30080116:"ApplicationSetupCheck",x30080120:"RecordedBrachyAccessoryDeviceSeq",x30080122:"ReferencedBrachyAccessoryDeviceNum",x30080130:"RecordedChannelSequence",x30080132:"SpecifiedChannelTotalTime",x30080134:"DeliveredChannelTotalTime",x30080136:"SpecifiedNumberOfPulses",x30080138:"DeliveredNumberOfPulses",x3008013a:"SpecifiedPulseRepetitionInterval",x3008013c:"DeliveredPulseRepetitionInterval",x30080140:"RecordedSourceApplicatorSequence",x30080142:"ReferencedSourceApplicatorNumber",x30080150:"RecordedChannelShieldSequence",x30080152:"ReferencedChannelShieldNumber",x30080160:"BrachyControlPointDeliveredSeq",x30080162:"SafePositionExitDate",x30080164:"SafePositionExitTime",x30080166:"SafePositionReturnDate",x30080168:"SafePositionReturnTime",x30080200:"CurrentTreatmentStatus",x30080202:"TreatmentStatusComment",x30080220:"FractionGroupSummarySequence",x30080223:"ReferencedFractionNumber",x30080224:"FractionGroupType",x30080230:"BeamStopperPosition",x30080240:"FractionStatusSummarySequence",x30080250:"TreatmentDate",x30080251:"TreatmentTime",x300a0002:"RTPlanLabel",x300a0003:"RTPlanName",x300a0004:"RTPlanDescription",x300a0006:"RTPlanDate",x300a0007:"RTPlanTime",x300a0009:"TreatmentProtocols",x300a000a:"PlanIntent",x300a000b:"TreatmentSites",x300a000c:"RTPlanGeometry",x300a000e:"PrescriptionDescription",x300a0010:"DoseReferenceSequence",x300a0012:"DoseReferenceNumber",x300a0013:"DoseReferenceUID",x300a0014:"DoseReferenceStructureType",x300a0015:"NominalBeamEnergyUnit",x300a0016:"DoseReferenceDescription",x300a0018:"DoseReferencePointCoordinates",x300a001a:"NominalPriorDose",x300a0020:"DoseReferenceType",x300a0021:"ConstraintWeight",x300a0022:"DeliveryWarningDose",x300a0023:"DeliveryMaximumDose",x300a0025:"TargetMinimumDose",x300a0026:"TargetPrescriptionDose",x300a0027:"TargetMaximumDose",x300a0028:"TargetUnderdoseVolumeFraction",x300a002a:"OrganAtRiskFullVolumeDose",x300a002b:"OrganAtRiskLimitDose",x300a002c:"OrganAtRiskMaximumDose",x300a002d:"OrganAtRiskOverdoseVolumeFraction",x300a0040:"ToleranceTableSequence",x300a0042:"ToleranceTableNumber",x300a0043:"ToleranceTableLabel",x300a0044:"GantryAngleTolerance",x300a0046:"BeamLimitingDeviceAngleTolerance",x300a0048:"BeamLimitingDeviceToleranceSeq",x300a004a:"BeamLimitingDevicePositionTol",x300a004b:"SnoutPositionTolerance",x300a004c:"PatientSupportAngleTolerance",x300a004e:"TableTopEccentricAngleTolerance",x300a004f:"TableTopPitchAngleTolerance",x300a0050:"TableTopRollAngleTolerance",x300a0051:"TableTopVerticalPositionTolerance",x300a0052:"TableTopLongitudinalPositionTol",x300a0053:"TableTopLateralPositionTolerance",x300a0055:"RTPlanRelationship",x300a0070:"FractionGroupSequence",x300a0071:"FractionGroupNumber",x300a0072:"FractionGroupDescription",x300a0078:"NumberOfFractionsPlanned",x300a0079:"NumberFractionPatternDigitsPerDay",x300a007a:"RepeatFractionCycleLength",x300a007b:"FractionPattern",x300a0080:"NumberOfBeams",x300a0082:"BeamDoseSpecificationPoint",x300a0084:"BeamDose",x300a0086:"BeamMeterset",x300a0088:"BeamDosePointDepth",x300a0089:"BeamDosePointEquivalentDepth",x300a008a:"BeamDosePointSSD",x300a00a0:"NumberOfBrachyApplicationSetups",x300a00a2:"BrachyAppSetupDoseSpecPoint",x300a00a4:"BrachyApplicationSetupDose",x300a00b0:"BeamSequence",x300a00b2:"TreatmentMachineName",x300a00b3:"PrimaryDosimeterUnit",x300a00b4:"SourceAxisDistance",x300a00b6:"BeamLimitingDeviceSequence",x300a00b8:"RTBeamLimitingDeviceType",x300a00ba:"SourceToBeamLimitingDeviceDistance",x300a00bb:"IsocenterToBeamLimitingDeviceDist",x300a00bc:"NumberOfLeafJawPairs",x300a00be:"LeafPositionBoundaries",x300a00c0:"BeamNumber",x300a00c2:"BeamName",x300a00c3:"BeamDescription",x300a00c4:"BeamType",x300a00c6:"RadiationType",x300a00c7:"HighDoseTechniqueType",x300a00c8:"ReferenceImageNumber",x300a00ca:"PlannedVerificationImageSequence",x300a00cc:"ImagingDeviceSpecificAcqParams",x300a00ce:"TreatmentDeliveryType",x300a00d0:"NumberOfWedges",x300a00d1:"WedgeSequence",x300a00d2:"WedgeNumber",x300a00d3:"WedgeType",x300a00d4:"WedgeID",x300a00d5:"WedgeAngle",x300a00d6:"WedgeFactor",x300a00d7:"TotalWedgeTrayWaterEquivThickness",x300a00d8:"WedgeOrientation",x300a00d9:"IsocenterToWedgeTrayDistance",x300a00da:"SourceToWedgeTrayDistance",x300a00db:"WedgeThinEdgePosition",x300a00dc:"BolusID",x300a00dd:"BolusDescription",x300a00e0:"NumberOfCompensators",x300a00e1:"MaterialID",x300a00e2:"TotalCompensatorTrayFactor",x300a00e3:"CompensatorSequence",x300a00e4:"CompensatorNumber",x300a00e5:"CompensatorID",x300a00e6:"SourceToCompensatorTrayDistance",x300a00e7:"CompensatorRows",x300a00e8:"CompensatorColumns",x300a00e9:"CompensatorPixelSpacing",x300a00ea:"CompensatorPosition",x300a00eb:"CompensatorTransmissionData",x300a00ec:"CompensatorThicknessData",x300a00ed:"NumberOfBoli",x300a00ee:"CompensatorType",x300a00f0:"NumberOfBlocks",x300a00f2:"TotalBlockTrayFactor",x300a00f3:"TotalBlockTrayWaterEquivThickness",x300a00f4:"BlockSequence",x300a00f5:"BlockTrayID",x300a00f6:"SourceToBlockTrayDistance",x300a00f7:"IsocenterToBlockTrayDistance",x300a00f8:"BlockType",x300a00f9:"AccessoryCode",x300a00fa:"BlockDivergence",x300a00fb:"BlockMountingPosition",x300a00fc:"BlockNumber",x300a00fe:"BlockName",x300a0100:"BlockThickness",x300a0102:"BlockTransmission",x300a0104:"BlockNumberOfPoints",x300a0106:"BlockData",x300a0107:"ApplicatorSequence",x300a0108:"ApplicatorID",x300a0109:"ApplicatorType",x300a010a:"ApplicatorDescription",x300a010c:"CumulativeDoseReferenceCoefficient",x300a010e:"FinalCumulativeMetersetWeight",x300a0110:"NumberOfControlPoints",x300a0111:"ControlPointSequence",x300a0112:"ControlPointIndex",x300a0114:"NominalBeamEnergy",x300a0115:"DoseRateSet",x300a0116:"WedgePositionSequence",x300a0118:"WedgePosition",x300a011a:"BeamLimitingDevicePositionSequence",x300a011c:"LeafJawPositions",x300a011e:"GantryAngle",x300a011f:"GantryRotationDirection",x300a0120:"BeamLimitingDeviceAngle",x300a0121:"BeamLimitingDeviceRotateDirection",x300a0122:"PatientSupportAngle",x300a0123:"PatientSupportRotationDirection",x300a0124:"TableTopEccentricAxisDistance",x300a0125:"TableTopEccentricAngle",x300a0126:"TableTopEccentricRotateDirection",x300a0128:"TableTopVerticalPosition",x300a0129:"TableTopLongitudinalPosition",x300a012a:"TableTopLateralPosition",x300a012c:"IsocenterPosition",x300a012e:"SurfaceEntryPoint",x300a0130:"SourceToSurfaceDistance",x300a0134:"CumulativeMetersetWeight",x300a0140:"TableTopPitchAngle",x300a0142:"TableTopPitchRotationDirection",x300a0144:"TableTopRollAngle",x300a0146:"TableTopRollRotationDirection",x300a0148:"HeadFixationAngle",x300a014a:"GantryPitchAngle",x300a014c:"GantryPitchRotationDirection",x300a014e:"GantryPitchAngleTolerance",x300a0180:"PatientSetupSequence",x300a0182:"PatientSetupNumber",x300a0183:"PatientSetupLabel",x300a0184:"PatientAdditionalPosition",x300a0190:"FixationDeviceSequence",x300a0192:"FixationDeviceType",x300a0194:"FixationDeviceLabel",x300a0196:"FixationDeviceDescription",x300a0198:"FixationDevicePosition",x300a0199:"FixationDevicePitchAngle",x300a019a:"FixationDeviceRollAngle",x300a01a0:"ShieldingDeviceSequence",x300a01a2:"ShieldingDeviceType",x300a01a4:"ShieldingDeviceLabel",x300a01a6:"ShieldingDeviceDescription",x300a01a8:"ShieldingDevicePosition",x300a01b0:"SetupTechnique",x300a01b2:"SetupTechniqueDescription",x300a01b4:"SetupDeviceSequence",x300a01b6:"SetupDeviceType",x300a01b8:"SetupDeviceLabel",x300a01ba:"SetupDeviceDescription",x300a01bc:"SetupDeviceParameter",x300a01d0:"SetupReferenceDescription",x300a01d2:"TableTopVerticalSetupDisplacement",x300a01d4:"TableTopLongitudinalSetupDisplace",x300a01d6:"TableTopLateralSetupDisplacement",x300a0200:"BrachyTreatmentTechnique",x300a0202:"BrachyTreatmentType",x300a0206:"TreatmentMachineSequence",x300a0210:"SourceSequence",x300a0212:"SourceNumber",x300a0214:"SourceType",x300a0216:"SourceManufacturer",x300a0218:"ActiveSourceDiameter",x300a021a:"ActiveSourceLength",x300a0222:"SourceEncapsulationNomThickness",x300a0224:"SourceEncapsulationNomTransmission",x300a0226:"SourceIsotopeName",x300a0228:"SourceIsotopeHalfLife",x300a0229:"SourceStrengthUnits",x300a022a:"ReferenceAirKermaRate",x300a022b:"SourceStrength",x300a022c:"SourceStrengthReferenceDate",x300a022e:"SourceStrengthReferenceTime",x300a0230:"ApplicationSetupSequence",x300a0232:"ApplicationSetupType",x300a0234:"ApplicationSetupNumber",x300a0236:"ApplicationSetupName",x300a0238:"ApplicationSetupManufacturer",x300a0240:"TemplateNumber",x300a0242:"TemplateType",x300a0244:"TemplateName",x300a0250:"TotalReferenceAirKerma",x300a0260:"BrachyAccessoryDeviceSequence",x300a0262:"BrachyAccessoryDeviceNumber",x300a0263:"BrachyAccessoryDeviceID",x300a0264:"BrachyAccessoryDeviceType",x300a0266:"BrachyAccessoryDeviceName",x300a026a:"BrachyAccessoryDeviceNomThickness",x300a026c:"BrachyAccessoryDevNomTransmission",x300a0280:"ChannelSequence",x300a0282:"ChannelNumber",x300a0284:"ChannelLength",x300a0286:"ChannelTotalTime",x300a0288:"SourceMovementType",x300a028a:"NumberOfPulses",x300a028c:"PulseRepetitionInterval",x300a0290:"SourceApplicatorNumber",x300a0291:"SourceApplicatorID",x300a0292:"SourceApplicatorType",x300a0294:"SourceApplicatorName",x300a0296:"SourceApplicatorLength",x300a0298:"SourceApplicatorManufacturer",x300a029c:"SourceApplicatorWallNomThickness",x300a029e:"SourceApplicatorWallNomTrans",x300a02a0:"SourceApplicatorStepSize",x300a02a2:"TransferTubeNumber",x300a02a4:"TransferTubeLength",x300a02b0:"ChannelShieldSequence",x300a02b2:"ChannelShieldNumber",x300a02b3:"ChannelShieldID",x300a02b4:"ChannelShieldName",x300a02b8:"ChannelShieldNominalThickness",x300a02ba:"ChannelShieldNominalTransmission",x300a02c8:"FinalCumulativeTimeWeight",x300a02d0:"BrachyControlPointSequence",x300a02d2:"ControlPointRelativePosition",x300a02d4:"ControlPoint3DPosition",x300a02d6:"CumulativeTimeWeight",x300a02e0:"CompensatorDivergence",x300a02e1:"CompensatorMountingPosition",x300a02e2:"SourceToCompensatorDistance",x300a02e3:"TotalCompTrayWaterEquivThickness",x300a02e4:"IsocenterToCompensatorTrayDistance",x300a02e5:"CompensatorColumnOffset",x300a02e6:"IsocenterToCompensatorDistances",x300a02e7:"CompensatorRelStoppingPowerRatio",x300a02e8:"CompensatorMillingToolDiameter",x300a02ea:"IonRangeCompensatorSequence",x300a02eb:"CompensatorDescription",x300a0302:"RadiationMassNumber",x300a0304:"RadiationAtomicNumber",x300a0306:"RadiationChargeState",x300a0308:"ScanMode",x300a030a:"VirtualSourceAxisDistances",x300a030c:"SnoutSequence",x300a030d:"SnoutPosition",x300a030f:"SnoutID",x300a0312:"NumberOfRangeShifters",x300a0314:"RangeShifterSequence",x300a0316:"RangeShifterNumber",x300a0318:"RangeShifterID",x300a0320:"RangeShifterType",x300a0322:"RangeShifterDescription",x300a0330:"NumberOfLateralSpreadingDevices",x300a0332:"LateralSpreadingDeviceSequence",x300a0334:"LateralSpreadingDeviceNumber",x300a0336:"LateralSpreadingDeviceID",x300a0338:"LateralSpreadingDeviceType",x300a033a:"LateralSpreadingDeviceDescription",x300a033c:"LateralSpreadingDevWaterEquivThick",x300a0340:"NumberOfRangeModulators",x300a0342:"RangeModulatorSequence",x300a0344:"RangeModulatorNumber",x300a0346:"RangeModulatorID",x300a0348:"RangeModulatorType",x300a034a:"RangeModulatorDescription",x300a034c:"BeamCurrentModulationID",x300a0350:"PatientSupportType",x300a0352:"PatientSupportID",x300a0354:"PatientSupportAccessoryCode",x300a0356:"FixationLightAzimuthalAngle",x300a0358:"FixationLightPolarAngle",x300a035a:"MetersetRate",x300a0360:"RangeShifterSettingsSequence",x300a0362:"RangeShifterSetting",x300a0364:"IsocenterToRangeShifterDistance",x300a0366:"RangeShifterWaterEquivThickness",x300a0370:"LateralSpreadingDeviceSettingsSeq",x300a0372:"LateralSpreadingDeviceSetting",x300a0374:"IsocenterToLateralSpreadingDevDist",x300a0380:"RangeModulatorSettingsSequence",x300a0382:"RangeModulatorGatingStartValue",x300a0384:"RangeModulatorGatingStopValue",x300a038a:"IsocenterToRangeModulatorDistance",x300a0390:"ScanSpotTuneID",x300a0392:"NumberOfScanSpotPositions",x300a0394:"ScanSpotPositionMap",x300a0396:"ScanSpotMetersetWeights",x300a0398:"ScanningSpotSize",x300a039a:"NumberOfPaintings",x300a03a0:"IonToleranceTableSequence",x300a03a2:"IonBeamSequence",x300a03a4:"IonBeamLimitingDeviceSequence",x300a03a6:"IonBlockSequence",x300a03a8:"IonControlPointSequence",x300a03aa:"IonWedgeSequence",x300a03ac:"IonWedgePositionSequence",x300a0401:"ReferencedSetupImageSequence",x300a0402:"SetupImageComment",x300a0410:"MotionSynchronizationSequence",x300a0412:"ControlPointOrientation",x300a0420:"GeneralAccessorySequence",x300a0421:"GeneralAccessoryID",x300a0422:"GeneralAccessoryDescription",x300a0423:"GeneralAccessoryType",x300a0424:"GeneralAccessoryNumber",x300c0002:"ReferencedRTPlanSequence",x300c0004:"ReferencedBeamSequence",x300c0006:"ReferencedBeamNumber",x300c0007:"ReferencedReferenceImageNumber",x300c0008:"StartCumulativeMetersetWeight",x300c0009:"EndCumulativeMetersetWeight",x300c000a:"ReferencedBrachyAppSetupSeq",x300c000c:"ReferencedBrachyAppSetupNumber",x300c000e:"ReferencedSourceNumber",x300c0020:"ReferencedFractionGroupSequence",x300c0022:"ReferencedFractionGroupNumber",x300c0040:"ReferencedVerificationImageSeq",x300c0042:"ReferencedReferenceImageSequence",x300c0050:"ReferencedDoseReferenceSequence",x300c0051:"ReferencedDoseReferenceNumber",x300c0055:"BrachyReferencedDoseReferenceSeq",x300c0060:"ReferencedStructureSetSequence",x300c006a:"ReferencedPatientSetupNumber",x300c0080:"ReferencedDoseSequence",x300c00a0:"ReferencedToleranceTableNumber",x300c00b0:"ReferencedBolusSequence",x300c00c0:"ReferencedWedgeNumber",x300c00d0:"ReferencedCompensatorNumber",x300c00e0:"ReferencedBlockNumber",x300c00f0:"ReferencedControlPointIndex",x300c00f2:"ReferencedControlPointSequence",x300c00f4:"ReferencedStartControlPointIndex",x300c00f6:"ReferencedStopControlPointIndex",x300c0100:"ReferencedRangeShifterNumber",x300c0102:"ReferencedLateralSpreadingDevNum",x300c0104:"ReferencedRangeModulatorNumber",x300e0002:"ApprovalStatus",x300e0004:"ReviewDate",x300e0005:"ReviewTime",x300e0008:"ReviewerName",x40000000:"TextGroupLength",x40000010:"Arbitrary",x40004000:"TextComments",x40080040:"ResultsID",x40080042:"ResultsIDIssuer",x40080050:"ReferencedInterpretationSequence",x40080100:"InterpretationRecordedDate",x40080101:"InterpretationRecordedTime",x40080102:"InterpretationRecorder",x40080103:"ReferenceToRecordedSound",x40080108:"InterpretationTranscriptionDate",x40080109:"InterpretationTranscriptionTime",x4008010a:"InterpretationTranscriber",x4008010b:"InterpretationText",x4008010c:"InterpretationAuthor",x40080111:"InterpretationApproverSequence",x40080112:"InterpretationApprovalDate",x40080113:"InterpretationApprovalTime",x40080114:"PhysicianApprovingInterpretation",x40080115:"InterpretationDiagnosisDescription",x40080117:"InterpretationDiagnosisCodeSeq",x40080118:"ResultsDistributionListSequence",x40080119:"DistributionName",x4008011a:"DistributionAddress",x40080200:"InterpretationID",x40080202:"InterpretationIDIssuer",x40080210:"InterpretationTypeID",x40080212:"InterpretationStatusID",x40080300:"Impressions",x40084000:"ResultsComments",x4ffe0001:"MACParametersSequence",x50xx0005:"CurveDimensions",x50xx0010:"NumberOfPoints",x50xx0020:"TypeOfData",x50xx0022:"CurveDescription",x50xx0030:"AxisUnits",x50xx0040:"AxisLabels",x50xx0103:"DataValueRepresentation",x50xx0104:"MinimumCoordinateValue",x50xx0105:"MaximumCoordinateValue",x50xx0106:"CurveRange",x50xx0110:"CurveDataDescriptor",x50xx0112:"CoordinateStartValue",x50xx0114:"CoordinateStepValue",x50xx1001:"CurveActivationLayer",x50xx2000:"AudioType",x50xx2002:"AudioSampleFormat",x50xx2004:"NumberOfChannels",x50xx2006:"NumberOfSamples",x50xx2008:"SampleRate",x50xx200a:"TotalTime",x50xx200c:"AudioSampleData",x50xx200e:"AudioComments",x50xx2500:"CurveLabel",x50xx2600:"CurveReferencedOverlaySequence",x50xx2610:"ReferencedOverlayGroup",x50xx3000:"CurveData",x52009229:"SharedFunctionalGroupsSequence",x52009230:"PerFrameFunctionalGroupsSequence",x54000100:"WaveformSequence",x54000110:"ChannelMinimumValue",x54000112:"ChannelMaximumValue",x54001004:"WaveformBitsAllocated",x54001006:"WaveformSampleInterpretation",x5400100a:"WaveformPaddingValue",x54001010:"WaveformData",x56000010:"FirstOrderPhaseCorrectionAngle",x56000020:"SpectroscopyData",x60000000:"OverlayGroupLength",x60xx0010:"OverlayRows",x60xx0011:"OverlayColumns",x60xx0012:"OverlayPlanes",x60xx0015:"NumberOfFramesInOverlay",x60xx0022:"OverlayDescription",x60xx0040:"OverlayType",x60xx0045:"OverlaySubtype",x60xx0050:"OverlayOrigin",x60xx0051:"ImageFrameOrigin",x60xx0052:"OverlayPlaneOrigin",x60xx0060:"OverlayCompressionCode",x60xx0061:"OverlayCompressionOriginator",x60xx0062:"OverlayCompressionLabel",x60xx0063:"OverlayCompressionDescription",x60xx0066:"OverlayCompressionStepPointers",x60xx0068:"OverlayRepeatInterval",x60xx0069:"OverlayBitsGrouped",x60xx0100:"OverlayBitsAllocated",x60xx0102:"OverlayBitPosition",x60xx0110:"OverlayFormat",x60xx0200:"OverlayLocation",x60xx0800:"OverlayCodeLabel",x60xx0802:"OverlayNumberOfTables",x60xx0803:"OverlayCodeTableLocation",x60xx0804:"OverlayBitsForCodeWord",x60xx1001:"OverlayActivationLayer",x60xx1100:"OverlayDescriptorGray",x60xx1101:"OverlayDescriptorRed",x60xx1102:"OverlayDescriptorGreen",x60xx1103:"OverlayDescriptorBlue",x60xx1200:"OverlaysGray",x60xx1201:"OverlaysRed",x60xx1202:"OverlaysGreen",x60xx1203:"OverlaysBlue",x60xx1301:"ROIArea",x60xx1302:"ROIMean",x60xx1303:"ROIStandardDeviation",x60xx1500:"OverlayLabel",x60xx3000:"OverlayData",x60xx4000:"OverlayComments",x7fxx0000:"PixelDataGroupLength",x7fxx0010:"PixelData",x7fxx0011:"VariableNextDataGroup",x7fxx0020:"VariableCoefficientsSDVN",x7fxx0030:"VariableCoefficientsSDHN",x7fxx0040:"VariableCoefficientsSDDN",xfffafffa:"DigitalSignaturesSequence",xfffcfffc:"DataSetTrailingPadding",xfffee000:"StartOfItem",xfffee00d:"EndOfItems",xfffee0dd:"EndOfSequence"};c.init(u),u=null},"StackManager.js":function(e,t,n){function i(e,t,n){var i=a.viewer.metadataProvider,r=n.images.length,s=[],c=void 0;n.images.forEach(function(e,u){var l=e.getData(),d={instance:l,series:n,study:t,numImages:r,imageIndex:u+1},m=l.numberOfFrames;if(m>1){a.log.info("Multiframe image detected");for(var p=0;p<m;p++)d.frame=p,c=o(l,p),s.push(c),i.addMetadata(c,d)}else c=o(l),s.push(c),i.addMetadata(c,d)});var u={displaySetInstanceUid:n.displaySetInstanceUid,imageIds:s,frameRate:n.frameRate,isClip:n.isClip};return e[n.displaySetInstanceUid]=u,u}n.export({StackManager:function(){return l}});var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},0);var o=void 0;n.watch(e("./getImageId"),{getImageId:function(e){o=e}},1);var r=void 0;n.watch(e("./classes/OHIFError"),{OHIFError:function(e){r=e}},2);var s={},c={},u=[];c={createAndAddStack:i};var l={clearStacks:function(){s={}},makeAndAddStack:function(e,t){return c.createAndAddStack(s,e,t,u)},findStack:function(e){return s[e]},findOrCreateStack:function(e,t){var n=this.findStack(t.displaySetInstanceUid);return n&&n.imageIds||(n=this.makeAndAddStack(e,t)),n},getAllStacks:function(){return s},addStackUpdatedCallback:function(e){if("function"!=typeof e)throw new r("callback must be provided as a function");u.push(e)},getConfiguration:function(){return c},setConfiguration:function(e){c=e}}},"WLPresets.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({WLPresets:function(){return h}});var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},1);var s=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){s=e}},2);var c=void 0;n.watch(e("meteor/underscore"),{_:function(e){c=e}},3);var u=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){u=e}},4);var l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){l=e}},5);var d=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){d=e}},6);var m="Custom",p="Default",f="WindowLevelPresetsDefinitions";u.viewer.defaultWLPresets={0:{id:"SoftTissue",wc:40,ww:400},1:{id:"Lung",wc:-600,ww:1500},2:{id:"Liver",wc:90,ww:150},3:{id:"Bone",wc:480,ww:2500},4:{id:"Brain",wc:40,ww:80},5:{},6:{},7:{},8:{},9:{}};var h=new(function(){function e(){(0,a.default)(this,e),this.defaults={},this.retrieveFunction=null,this.storeFunction=null,this.changeObserver=new s.Dependency}return e.prototype.setRetrieveFunction=function(){function e(e){this.retrieveFunction=e}return e}(),e.prototype.setStoreFunction=function(){function e(e){this.storeFunction=e}return e}(),e.prototype.updateElementWLPresetData=function(){function e(e){var t=l.getElementData(e,"wlPreset"),n=l.getEnabledElement(e),i=n.viewport,a=n.image,o=i.voi,r=o.windowCenter,s=o.windowWidth,c=void 0,d=void 0;if(s===a.windowWidth&&r===a.windowCenter)d=p;else{var f=u.viewer.wlPresets;for(var x in g.sanitizeForInObject(f))if(f.hasOwnProperty(x)){var h=f[x];if(r===h.wc&&s===h.ww){d=(c=h).id;break}}}if(t.name=d||m,t.ww=s,t.wc=r,t.name===m){var v=t.custom||(t.custom=Object.create(null));v.ww=s,v.wc=r}}return e}(),e.prototype.applyWLPreset=function(){function e(e,t){var n=u.viewer.wlPresets,i=l.getElementData(t,"wlPreset"),a=l.getViewport(t),o=n[e]||c.findWhere(n,{id:e});if(e===m&&i.custom)a.voi.windowWidth=i.custom.ww,a.voi.windowCenter=i.custom.wc;else if(o&&!c.isEmpty(o)&&o.id)e=o.id,a.voi.windowWidth=o.ww,a.voi.windowCenter=o.wc;else{var s=l.getEnabledElement(t);a.voi.windowWidth=s.image.windowWidth,a.voi.windowCenter=s.image.windowCenter,e=p}i.name=e,i.ww=a.voi.windowWidth,i.wc=a.voi.windowCenter,l.setViewport(t,a),u.log.info("WLPresets::Applying WL Preset: "+e),r.set("OHIFWlPresetApplied",e)}return e}(),e.prototype.store=function(){function e(e){var t=this;return new x(function(n,i){t.storeFunction?t.storeFunction.call(t,f,e).then(n).catch(i):o.userId()?u.user.setData(f,e).then(n).catch(i):(r.setPersistent(f,e),n())}).then(function(){return t.setOHIFWLPresets.call(t,e)})}return e}(),e.prototype.retrieve=function(){function e(){var e=this;return new x(function(t,n){if(e.retrieveFunction)e.retrieveFunction.call(e).then(t).catch(n);else if(u.user)try{t(u.user.getData(f))}catch(e){n(e)}else t(r.get(f))})}return e}(),e.prototype.load=function(){function e(){var e=this;return new x(function(t,n){e.retrieve().then(function(t){t?e.setOHIFWLPresets.call(e,t):e.loadDefaults.call(e)}).catch(function(){return e.loadDefaults.call(e)})})}return e}(),e.prototype.applyWLPresetToActiveElement=function(){function e(e){var t=d.getActiveViewportElement();t&&this.applyWLPreset(e,t)}return e}(),e.prototype.setOHIFWLPresets=function(){function e(e){var t=Object.prototype.hasOwnProperty,n=Object.create(null);for(var i in g.sanitizeForInObject(e))t.call(e,i)&&(n[i]=e[i]);u.viewer.wlPresets=n,this.changeObserver.changed()}return e}(),e.prototype.loadDefaults=function(){function e(){this.setOHIFWLPresets(u.viewer.defaultWLPresets)}return e}(),e.prototype.resetDefaults=function(){function e(){return this.store(u.viewer.defaultWLPresets)}return e}(),e}());o.startup(function(){h.loadDefaults(),h.load()})},"annotateTextUtils.js":function(e,t,n){n.export({annotateTextUtils:function(){return o}});var i=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){i=e}},0);var o={getTextCallback:function(e){var t=function(e){13!==e.which&&27!==e.which||n()},n=function(){o.get(0).close(),e(r.val()),r.val("");var t=i.getActiveViewportElement();a(t).focus()},o=a("#annotationDialog");if(!0!==o.get(0).open){var r=a(".annotationTextInput");r.focus(),o.get(0).showModal();var s=o.find(".annotationDialogConfirm");s.off("click"),s.on("click",function(){n()}),o.off("keydown"),o.on("keydown",t)}},changeTextCallback:function(e,t,n){var o=a("#relabelAnnotationDialog");if(!0!==o.get(0).open){C._globalHelpers.isTouchDevice()?o.css({top:0,left:0,right:0,bottom:0,margin:"auto"}):o.css({top:t.currentPoints.page.y-o.outerHeight()-20,left:t.currentPoints.page.x-o.outerWidth()/2});var r=o.find(".annotationTextInput"),s=o.find(".relabelConfirm"),c=o.find(".relabelRemove");r.val(e.text),r.focus(),o.get(0).showModal(),s.off("click"),s.on("click",function(){o.get(0).close(),n(e,r.val())}),c.off("click"),c.on("click",function(){o.get(0).close(),n(e,void 0,!0)}),o.off("keydown"),o.on("keydown",u);var u=function(e){13===e.which&&l()},l=function(){o.get(0).close(),n(e,r.val()),r.val("");var t=i.getActiveViewportElement();a(t).focus()}}}}},"createStacks.js":function(e,t,n){n.export({createStacks:function(){return l}});var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("./classes/ImageSet"),{ImageSet:function(e){a=e}},1);var o=void 0;n.watch(e("./isImage"),{isImage:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},3);var s=function(e){return e.getRawValue("x00280008")>1},c=function(e,t){var n=t[0],o=new a(t),c=e.getData();return o.setAttributes({displaySetInstanceUid:o.uid,seriesDate:c.seriesDate,seriesTime:c.seriesTime,seriesInstanceUid:e.getSeriesInstanceUID(),seriesNumber:n.getRawValue("x00200011"),seriesDescription:n.getRawValue("x0008103e"),numImageFrames:t.length,frameRate:n.getRawValue("x00181063"),modality:n.getRawValue("x00080060"),isMultiFrame:s(n)}),!r.utils.ObjectPath.get(i,"settings.public.ui.sortSeriesByIncomingOrder")&&o.sortBy(function(e,t){return(parseInt(e.getRawValue("x00200013",0))||0)-(parseInt(t.getRawValue("x00200013",0))||0)}),o.setAttribute("instanceNumber",o.getImage(0).getRawValue("x00200013")),o},u=function(e){return"CR"===e||"MG"===e||"DX"===e},l=function(e){var t=[];return e&&e.getSeriesCount()?(e.forEachSeries(function(n){if(n.getInstanceCount()){var i=[];if(n.forEachInstance(function(a){if(o(a.getRawValue("x00080016"))||a.getRawValue("x00280010")){var r=void 0;s(a)?((r=c(n,[a])).setAttributes({isClip:!0,studyInstanceUid:e.getStudyInstanceUID(),numImageFrames:a.getRawValue("x00280008"),instanceNumber:a.getRawValue("x00200013"),acquisitionDatetime:a.getRawValue("x0008002a")}),t.push(r)):u(a.modality)?((r=c(n,[a])).setAttributes({studyInstanceUid:e.getStudyInstanceUID(),instanceNumber:a.getRawValue("x00200013"),acquisitionDatetime:a.getRawValue("x0008002a")}),t.push(r)):i.push(a)}}),i.length){var a=c(n,i);a.setAttribute("studyInstanceUid",e.getStudyInstanceUID()),t.push(a)}}}),t):t}},"crosshairsSynchronizers.js":function(e,t,n){n.export({crosshairsSynchronizers:function(){return i}});var i={synchronizers:{}}},"debugReactivity.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0),i.startup(function(){var e=!1;if(!1){var t=function(){Object.keys(M).forEach(function(e){if(!(e.indexOf("_")>-1)){var t=M[e],n=t.rendered,i=0;t.rendered=function(){console.log(e,"render count: ",++i),n&&n.apply(this,arguments)}}})};i.autorun(function(e){e.onInvalidate(function(){console.trace()})});var n=i.Collection.prototype.find;i.Collection.prototype.find=function(){var e=n.apply(this,arguments),t=this._name||this._debugName;return e.observe({added:function(e){console.log(t,"added",e)},changed:function(e){console.log(t,"changed",e)},removed:function(e){console.log(t,"removed",e)}}),e},t()}})},"dialogUtils.js":function(e,t,n){n.export({dialogUtils:function(){return u}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},2);var r=void 0;n.watch(e("./setFocusToActiveViewport"),{setFocusToActiveViewport:function(e){r=e}},3);var s=void 0,c=function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&"function"==typeof s&&s(),o("#confirmDeleteDialog").css("display","none"),o(".removableBackdrop").remove(),s=void 0,r()},u={showConfirmDialog:function(e,t){t=t||{},i.renderWithData(a.removableBackdrop,t,document.body);var n=o("#confirmDeleteDialog");n.remove();var r=document.getElementById("viewer");i.renderWithData(a.confirmDeleteDialog,t,r),o(".removableBackdrop").one("mousedown touchstart",function(){c(!1)}),(n=o("#confirmDeleteDialog")).css("display","block"),n.focus(),e&&"function"==typeof e&&(s=e)},closeHandler:c}},"displayReferenceLines.js":function(e,t,n){function i(e){var t=u.getEnabledElement(e);if(t&&t.image){var n=t.image.imageId,i=u.metaData.get("imagePlane",n);d.referenceLines.tool.disable(e),o.viewer.refLinesEnabled&&i&&i.frameOfReferenceUID?(o.log.info("displayReferenceLines for image with id: "+n),a(".imageViewerViewport").not(e).each(function(e,t){var n=void 0;if(a(t).find("canvas").length){try{n=u.getEnabledElement(t).image.imageId}catch(e){return}if(!n)return;d.referenceLines.tool.enable(t,o.viewer.updateImageSynchronizer)}})):o.log.info("displayReferenceLines refLinesEnabled is not enabled, no imagePlane or no frameOfReferenceUID")}else o.log.info("displayReferenceLines enabled element is undefined or it's image is not rendered")}n.export({displayReferenceLines:function(){return i}});var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0)},"getElementIfNotEmpty.js":function(e,t,n){function i(e){var t=a(".imageViewerViewport"),n=t.get(e),i=t.eq(e).find("canvas");if(n&&!a(n).hasClass("empty")&&0!==i.length){try{var o=u.getEnabledElement(n)}catch(e){return}return n}}n.export({getElementIfNotEmpty:function(){return i}});var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},0)},"getFrameOfReferenceUID.js":function(e,t,n){function i(e){var t;try{t=u.getEnabledElement(e)}catch(e){return}if(t&&t.image){var n=t.image.imageId,i=u.metaData.get("imagePlane",n);if(i&&i.frameOfReferenceUID)return i.frameOfReferenceUID}}n.export({getFrameOfReferenceUID:function(){return i}})},"getImageId.js":function(e,t,n){function i(e,t,n){var i=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(i)?e.replace(i,"$1"+t+"="+n+"$2"):e+a+t+"="+n}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if("function"==typeof e.getImageId)return e.getImageId();if(e.url)return void 0!==t&&(e.url=i(e.url,"frame",t)),e.url;var a=n?"thumbnailRendering":"imageRendering";if(e[a]&&"wadouri"!==e[a]&&e.wadorsuri)return o(e,t,n);var r="dicomweb:"+e.wadouri;return void 0!==t&&(r+="&frame="+t),r}}n.export({getImageId:function(){return a}});var o=void 0;n.watch(e("./getWADORSImageId"),{getWADORSImageId:function(e){o=e}},0)},"getImageIdForImagePath.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/slicedToArray"));n.export({getImageIdForImagePath:function(){return r}});var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("_"),i=(0,a.default)(n,4),r=i[0],s=i[1],c=i[2],u=i[3],l=o.viewer.Studies.findBy({studyInstanceUid:r}),d=o.viewerbase.getStudyMetadata(l).getSeriesByUID(s).getInstanceByUID(c);return o.viewerbase.getImageId(d,u,t)}},"getStackDataIfNotEmpty.js":function(e,t,n){function i(e){var t=a(e);if(t){var n=d.getToolState(t,"stack");if(n&&n.data&&n.data.length){var i=n.data[0];if(i)return i}}}n.export({getStackDataIfNotEmpty:function(){return i}});var a=void 0;n.watch(e("./getElementIfNotEmpty.js"),{getElementIfNotEmpty:function(e){a=e}},0)},"getStudyMetadata.js":function(e,t,n){n.export({getStudyMetadata:function(){return a}});var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var a=function(e){var t=e;return!e||t instanceof i.viewerbase.metadata.StudyMetadata||(t=new i.metadata.StudyMetadata(e,e.studyInstanceUid)),t}},"getWADORSImageId.js":function(e,t,n){function i(e,t){var n=o(e,t);if(n){var i="wadors:"+n;return a.log.info("WADO-RS ImageID: "+i),i}}n.export({getWADORSImageId:function(){return i}});var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},0);var o=void 0;n.watch(e("./getWADORSImageUrl"),{getWADORSImageUrl:function(e){o=e}},1)},"getWADORSImageUrl.js":function(e,t,n){function i(e,t){var n=e.wadorsuri;if(n)return t=(t||0)+1,n=n.replace(/(%2Fframes%2F)(\d+)/,"$1"+t)}n.export({getWADORSImageUrl:function(){return i}})},"hotkeyUtils.js":function(e,t,n){function i(e){l.viewer.refLinesEnabled=e}function a(e){l.viewer.hotkeys=e}function o(e){var t=e||l.viewer.hotkeys;l.hotkeys.set("viewer",t,!0),l.context.set("viewer")}n.export({hotkeyUtils:function(){return h}});var r=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){r=e}},0);var s=void 0;n.watch(e("meteor/session"),{Session:function(e){s=e}},1);var c=void 0;n.watch(e("meteor/jquery"),{$:function(e){c=e}},2);var u=void 0;n.watch(e("meteor/underscore"),{_:function(e){u=e}},3);var l=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},4);var d=void 0;n.watch(e("./toolManager"),{toolManager:function(e){d=e}},5);var m=void 0;n.watch(e("./switchToImageRelative"),{switchToImageRelative:function(e){m=e}},6);var p=void 0;n.watch(e("./switchToImageByIndex"),{switchToImageByIndex:function(e){p=e}},7);var f=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){f=e}},8);var g=void 0;n.watch(e("./panelNavigation"),{panelNavigation:function(e){g=e}},9);var x=void 0;n.watch(e("./WLPresets"),{WLPresets:function(e){x=e}},10),r.startup(function(){l.viewer.loadIndicatorDelay=200,l.viewer.defaultTool="wwwc",l.viewer.refLinesEnabled=!0,l.viewer.isPlaying={},l.viewer.cine={framesPerSecond:24,loop:!0},l.viewer.defaultHotkeys={defaultTool:"ESC",zoom:"Z",wwwc:"W",pan:"P",angle:"A",stackScroll:"S",magnify:"M",length:"",annotate:"",dragProbe:"",ellipticalRoi:"",rectangleRoi:"",flipH:"H",flipV:"V",rotateR:"R",rotateL:"L",invert:"I",zoomIn:"",zoomOut:"",zoomToFit:"",resetViewport:"",clearTools:"",scrollDown:"DOWN",scrollUp:"UP",scrollLastImage:"END",scrollFirstImage:"HOME",previousDisplaySet:"PAGEUP",nextDisplaySet:"PAGEDOWN",nextPanel:"RIGHT",previousPanel:"LEFT",toggleOverlayTags:"SHIFT",toggleCinePlay:"SPACE",toggleCineDialog:"",toggleDownloadDialog:"",WLPreset0:"1",WLPreset1:"2",WLPreset2:"3",WLPreset3:"4",WLPreset4:"5",WLPreset5:"6",WLPreset6:"7",WLPreset7:"8",WLPreset8:"9",WLPreset9:"0"},l.viewer.hotkeys=l.viewer.defaultHotkeys;var e="viewer";l.commands.createContext("viewer");var t=function(){var e=s.get("activeViewport")||0;return c(".imageViewerViewport").eq(e).hasClass("empty")},n=function(e){return u.each(e,function(e,t){l.commands.register("viewer",t,{name:e,action:d.setActiveTool,params:t})})};l.commands.register("viewer","defaultTool",{name:"Default Tool",action:function(){return d.setActiveTool(d.getDefaultTool())}}),n({wwwc:"W/L",zoom:"Zoom",angle:"Angle Measurement",dragProbe:"Pixel Probe",ellipticalRoi:"Elliptical ROI",rectangleRoi:"Rectangle ROI",freehand:"Freehand",freehandSculpter:"Freehand Sculpter",brush:"Brush",adaptiveBrush:"Adaptive Brush",eraser:"Eraser",magnify:"Magnify",annotate:"Annotate",stackScroll:"Scroll Stack",pan:"Pan",length:"Length Measurement",wwwcRegion:"W/L by Region",crosshairs:"Crosshairs"}),function(e){u.each(e,function(e,n){l.commands.register("viewer",n,{name:e,action:f[n],disabled:t})})}({zoomIn:"Zoom In",zoomOut:"Zoom Out",zoomToFit:"Zoom to Fit",invert:"Invert",flipH:"Flip Horizontally",flipV:"Flip Vertically",rotateR:"Rotate Right",rotateL:"Rotate Left",exportROIs:"export ROIs",importROIs:"import ROIs",toggleFreehandStats:"toggleFreehandStats",freehandHelp:"freehandHelp",ioHelp:"ioHelp",showHelp:"showHelp",volumeManagement:"volumeManagement",showSyncSettings:"showSyncSettings",toggleSmoothing:"toggleSmoothing",resetViewport:"Reset",clearTools:"Clear Tools"});for(var i=function(e){return x.applyWLPresetToActiveElement(e)},a=0;a<10;a++)l.commands.register("viewer","WLPreset"+a,{name:"W/L Preset "+(a+1),action:i,params:a});var o=function(e){return!!l.viewerbase.layoutManager&&l.viewerbase.layoutManager.canMoveDisplaySets(e)};l.commands.set("viewer",{scrollDown:{name:"Scroll Down",action:function(){return!t()&&m(1)}},scrollUp:{name:"Scroll Up",action:function(){return!t()&&m(-1)}},scrollFirstImage:{name:"Scroll to First Image",action:function(){return!t()&&p(0)}},scrollLastImage:{name:"Scroll to Last Image",action:function(){return!t()&&p(-1)}},previousDisplaySet:{name:"Previous Series",action:function(){return l.viewerbase.layoutManager.moveDisplaySets(!1)},disabled:function(){return!o(!1)}},nextDisplaySet:{name:"Next Series",action:function(){return l.viewerbase.layoutManager.moveDisplaySets(!0)},disabled:function(){return!o(!0)}},nextPanel:{name:"Next Panel",action:function(){return g.loadNextActivePanel()}},previousPanel:{name:"Previous Panel",action:function(){return g.loadPreviousActivePanel()}}},!0),l.commands.set("viewer",{toggleOverlayTags:{name:"Toggle Image Annotations",action:function(){var e=c(".imageViewerViewportOverlay .dicomTag");e.toggle("none"===e.eq(0).css("display"))}},toggleCinePlay:{name:"Play/Pause Cine",action:f.toggleCinePlay,disabled:l.viewerbase.viewportUtils.hasMultipleFrames},toggleCineDialog:{name:"Show/Hide Cine Controls",action:f.toggleCineDialog,disabled:l.viewerbase.viewportUtils.hasMultipleFrames},toggleDownloadDialog:{name:"Show/Hide Download Dialog",action:f.toggleDownloadDialog,disabled:function(){return!f.isDownloadEnabled()}}},!0),l.viewer.hotkeyFunctions={},l.viewer.loadedSeriesData={},h.enableHotkeys()}),c.fn.reverse=[].reverse;var h={setOHIFRefLines:i,setOHIFHotkeys:a,enableHotkeys:o}},"imageViewerViewportData.js":function(e,t,n){n.export({imageViewerViewportData:function(){return i}});var i={callbacks:{},extendData:function(){}}},"instanceClassSpecificViewport.js":function(e,t,n){n.export({getInstanceClassDefaultViewport:function(){return a},setInstanceClassDefaultViewportFunction:function(){return o}});var i={},a=function(e,t,n){var a=e.sopClassUid;if(i[a])return i[a](e,t,n)},o=function(e,t){i[e]=t}},"isImage.js":function(e,t,n){function i(e){return e===a.ComputedRadiographyImageStorage||e===a.DigitalXRayImageStorageForPresentation||e===a.DigitalXRayImageStorageForProcessing||e===a.DigitalMammographyXRayImageStorageForPresentation||e===a.DigitalMammographyXRayImageStorageForProcessing||e===a.DigitalIntraOralXRayImageStorageForPresentation||e===a.DigitalIntraOralXRayImageStorageForProcessing||e===a.CTImageStorage||e===a.EnhancedCTImageStorage||e===a.LegacyConvertedEnhancedCTImageStorage||e===a.UltrasoundMultiframeImageStorage||e===a.MRImageStorage||e===a.EnhancedMRImageStorage||e===a.EnhancedMRColorImageStorage||e===a.LegacyConvertedEnhancedMRImageStorage||e===a.UltrasoundImageStorage||e===a.SecondaryCaptureImageStorage||e===a.MultiframeSingleBitSecondaryCaptureImageStorage||e===a.MultiframeGrayscaleByteSecondaryCaptureImageStorage||e===a.MultiframeGrayscaleWordSecondaryCaptureImageStorage||e===a.MultiframeTrueColorSecondaryCaptureImageStorage||e===a.XRayAngiographicImageStorage||e===a.EnhancedXAImageStorage||e===a.XRayRadiofluoroscopicImageStorage||e===a.EnhancedXRFImageStorage||e===a.XRay3DAngiographicImageStorage||e===a.XRay3DCraniofacialImageStorage||e===a.BreastTomosynthesisImageStorage||e===a.BreastProjectionXRayImageStorageForPresentation||e===a.BreastProjectionXRayImageStorageForProcessing||e===a.IntravascularOpticalCoherenceTomographyImageStorageForPresentation||e===a.IntravascularOpticalCoherenceTomographyImageStorageForProcessing||e===a.NuclearMedicineImageStorage||e===a.VLEndoscopicImageStorage||e===a.VideoEndoscopicImageStorage||e===a.VLMicroscopicImageStorage||e===a.VideoMicroscopicImageStorage||e===a.VLSlideCoordinatesMicroscopicImageStorage||e===a.VLPhotographicImageStorage||e===a.VideoPhotographicImageStorage||e===a.OphthalmicPhotography8BitImageStorage||e===a.OphthalmicPhotography16BitImageStorage||e===a.OphthalmicTomographyImageStorage||e===a.VLWholeSlideMicroscopyImageStorage||e===a.PositronEmissionTomographyImageStorage||e===a.EnhancedPETImageStorage||e===a.LegacyConvertedEnhancedPETImageStorage||e===a.RTImageStorage}n.export({isImage:function(){return i}});var a=void 0;n.watch(e("./sopClassDictionary"),{sopClassDictionary:function(e){a=e}},0)},"panelNavigation.js":function(e,t,n){n.export({panelNavigation:function(){return s}});var i=void 0;n.watch(e("meteor/session"),{Session:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},2);var r=void 0;n.watch(e("./setActiveViewport"),{setActiveViewport:function(e){r=e}},3);var s={loadPreviousActivePanel:function(){o.log.info("nextActivePanel");var e=i.get("activeViewport");e--;var t=a(".imageViewerViewport"),n=t.length;e<0&&(e=n-1);var s=t.get(e);s&&r(s)},loadNextActivePanel:function(){o.log.info("nextActivePanel");var e=i.get("activeViewport");e++;var t=a(".imageViewerViewport");e>=t.length&&(e=0);var n=t.get(e);n&&r(n)}}},"prepareViewerData.js":function(e,t,n){n.export({prepareViewerData:function(){return o}});var i=void 0;n.watch(e("meteor/underscore"),{_:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1);var o=function(e){var t=e.studyInstanceUids,n=e.seriesInstanceUids,i=e.timepointId,o=e.timepointsFilter,s=void 0===o?{}:o;return d.globalImageIdSpecificToolStateManager.restoreToolState({}),new x(function(e,o){var c=function(t){a.studies.retrieveStudiesMetadata(t.studyInstanceUids,t.seriesInstanceUids).then(function(n){n.forEach(function(e){var t=a.studylist.collections.Studies.findOne({studyInstanceUid:e.studyInstanceUid});t&&Object.assign(e,t)}),e({studies:n,viewerData:t})}).catch(o)};t&&t.length?c({studyInstanceUids:t,seriesInstanceUids:n}):a.studylist.timepointApi.retrieveTimepoints(s).then(function(){var e=r(i);c(e)}).catch(o)})},r=function(e){var t=a.studylist.timepointApi.timepoints.findOne({timepointId:e});if(!t)throw new Error("Unable to find a time point with the given ID");var n=s(t);if(!n.studyInstanceUids)throw new Error("No studies found that are related to this timepoint");return Object.assign(n,{currentTimepointId:e})},s=function(e){var t=i.clone(e.studyInstanceUids);if(c(e))return{studyInstanceUids:t,timepointIds:[e.timepointId]};var n=a.studylist.timepointApi.timepoints.findOne({timepointType:"baseline",patientId:e.patientId,latestDate:{$lte:e.latestDate}}),o=[];n?(t=t.concat(n.studyInstanceUids),o.push(n.timepointId)):a.log.warn("No Baseline found while opening a Follow-up Timepoint");var r={latestDate:{$lt:e.latestDate}},s={sort:{latestDate:-1}},u=a.studylist.timepointApi.timepoints.findOne(r,s);return u&&u.timepointId!==n.timepointId&&(t=t.concat(u.studyInstanceUids),o.push(u.timepointId)),t=i.uniq(t),o.push(e.timepointId),{studyInstanceUids:t,timepointIds:o}},c=function(e){return"baseline"===e.timepointType}},"renderViewer.js":function(e,t,n){n.export({renderViewer:function(){return a}});var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"app",a=i.viewerbase.prepareViewerData(t);i.ui.showDialog("dialogLoading",{promise:a}),a.then(function(t){var a=t.studies,o=t.viewerData;i.viewer.data=o,e.render(n,{data:{template:"viewer",studies:a}})}).catch(function(t){e.render(n,{data:{template:"errorText",error:t}})})}},"setActiveViewport.js":function(e,t,n){function i(e){var t=o(".imageViewerViewport"),n=void 0;n="number"==typeof e?e:t.index(e);var i=t.eq(n);if(i.length){s.log.info("setActiveViewport setting viewport index: "+n),i.parents(".viewportContainer").hasClass("active")||i.trigger("OHIFBeforeActivateViewport"),a.set("activeViewport",n);var l=r.id();if(a.set("viewportActivated",l),a.set("LayoutManagerUpdated",l),o("#imageViewerViewports .viewportContainer").removeClass("active"),i.parents(".viewportContainer").addClass("active"),i.find("canvas").length){var d=i.get(0);u(d),c.getInstance().prefetch(),s.viewer.stackImagePositionOffsetSynchronizer&&s.viewer.stackImagePositionOffsetSynchronizer.update()}i.triggerHandler("focus"),i.trigger("OHIFAfterActivateViewport")}else s.log.info("setActiveViewport element does not exist")}n.export({setActiveViewport:function(){return i}});var a=void 0;n.watch(e("meteor/session"),{Session:function(e){a=e}},0);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},1);var r=void 0;n.watch(e("meteor/random"),{Random:function(e){r=e}},2);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},3);var c=void 0;n.watch(e("./classes/StudyPrefetcher"),{StudyPrefetcher:function(e){c=e}},4);var u=void 0;n.watch(e("./displayReferenceLines"),{displayReferenceLines:function(e){u=e}},5)},"setFocusToActiveViewport.js":function(e,t,n){n.export({setFocusToActiveViewport:function(){return o}});var i=void 0;n.watch(e("meteor/session"),{Session:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},1);var o=function(){var e=a(".imageViewerViewport"),t=i.get("activeViewport");e.eq(t).focus()}},"sopClassDictionary.js":function(e,t,n){n.export({sopClassDictionary:function(){return i}});var i={ComputedRadiographyImageStorage:"1.2.840.10008.5.1.4.1.1.1",DigitalXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.1",DigitalXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.1.1",DigitalMammographyXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.2",DigitalMammographyXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.2.1",DigitalIntraOralXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.1.3",DigitalIntraOralXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.1.3.1",CTImageStorage:"1.2.840.10008.5.1.4.1.1.2",EnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.1",LegacyConvertedEnhancedCTImageStorage:"1.2.840.10008.5.1.4.1.1.2.2",UltrasoundMultiframeImageStorage:"1.2.840.10008.5.1.4.1.1.3.1",MRImageStorage:"1.2.840.10008.5.1.4.1.1.4",EnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.1",MRSpectroscopyStorage:"1.2.840.10008.5.1.4.1.1.4.2",EnhancedMRColorImageStorage:"1.2.840.10008.5.1.4.1.1.4.3",LegacyConvertedEnhancedMRImageStorage:"1.2.840.10008.5.1.4.1.1.4.4",UltrasoundImageStorage:"1.2.840.10008.5.1.4.1.1.6.1",EnhancedUSVolumeStorage:"1.2.840.10008.5.1.4.1.1.6.2",SecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7",MultiframeSingleBitSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.1",MultiframeGrayscaleByteSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.2",MultiframeGrayscaleWordSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.3",MultiframeTrueColorSecondaryCaptureImageStorage:"1.2.840.10008.5.1.4.1.1.7.4",Sop12LeadECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.1",GeneralECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.2",AmbulatoryECGWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.1.3",HemodynamicWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.2.1",CardiacElectrophysiologyWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.3.1",BasicVoiceAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.1",GeneralAudioWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.4.2",ArterialPulseWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.5.1",RespiratoryWaveformStorage:"1.2.840.10008.5.1.4.1.1.9.6.1",GrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.1",ColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.2",PseudoColorSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.3",BlendingSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.4",XAXRFGrayscaleSoftcopyPresentationStateStorage:"1.2.840.10008.5.1.4.1.1.11.5",XRayAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.12.1",EnhancedXAImageStorage:"1.2.840.10008.5.1.4.1.1.12.1.1",XRayRadiofluoroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.12.2",EnhancedXRFImageStorage:"1.2.840.10008.5.1.4.1.1.12.2.1",XRay3DAngiographicImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.1",XRay3DCraniofacialImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.2",BreastTomosynthesisImageStorage:"1.2.840.10008.5.1.4.1.1.13.1.3",BreastProjectionXRayImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.13.1.4",BreastProjectionXRayImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.13.1.5",IntravascularOpticalCoherenceTomographyImageStorageForPresentation:"1.2.840.10008.5.1.4.1.1.14.1",IntravascularOpticalCoherenceTomographyImageStorageForProcessing:"1.2.840.10008.5.1.4.1.1.14.2",NuclearMedicineImageStorage:"1.2.840.10008.5.1.4.1.1.20",RawDataStorage:"1.2.840.10008.5.1.4.1.1.66",SpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.1",SpatialFiducialsStorage:"1.2.840.10008.5.1.4.1.1.66.2",DeformableSpatialRegistrationStorage:"1.2.840.10008.5.1.4.1.1.66.3",SegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.4",SurfaceSegmentationStorage:"1.2.840.10008.5.1.4.1.1.66.5",RealWorldValueMappingStorage:"1.2.840.10008.5.1.4.1.1.67",SurfaceScanMeshStorage:"1.2.840.10008.5.1.4.1.1.68.1",SurfaceScanPointCloudStorage:"1.2.840.10008.5.1.4.1.1.68.2",VLEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1",VideoEndoscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.1.1",VLMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2",VideoMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.2.1",VLSlideCoordinatesMicroscopicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.3",VLPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4",VideoPhotographicImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.4.1",OphthalmicPhotography8BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.1",OphthalmicPhotography16BitImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.2",StereometricRelationshipStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.3",OphthalmicTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.5.4",VLWholeSlideMicroscopyImageStorage:"1.2.840.10008.5.1.4.1.1.77.1.6",LensometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.1",AutorefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.2",KeratometryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.3",SubjectiveRefractionMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.4",VisualAcuityMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.5",SpectaclePrescriptionReportStorage:"1.2.840.10008.5.1.4.1.1.78.6",OphthalmicAxialMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.78.7",IntraocularLensCalculationsStorage:"1.2.840.10008.5.1.4.1.1.78.8",MacularGridThicknessandVolumeReport:"1.2.840.10008.5.1.4.1.1.79.1",OphthalmicVisualFieldStaticPerimetryMeasurementsStorage:"1.2.840.10008.5.1.4.1.1.80.1",OphthalmicThicknessMapStorage:"1.2.840.10008.5.1.4.1.1.81.1",CornealTopographyMapStorage:"1.2.840.10008.5.1.4.1.1.82.1",BasicTextSR:"1.2.840.10008.5.1.4.1.1.88.11",EnhancedSR:"1.2.840.10008.5.1.4.1.1.88.22",ComprehensiveSR:"1.2.840.10008.5.1.4.1.1.88.33",Comprehensive3DSR:"1.2.840.10008.5.1.4.1.1.88.34",ProcedureLog:"1.2.840.10008.5.1.4.1.1.88.40",MammographyCADSR:"1.2.840.10008.5.1.4.1.1.88.50",KeyObjectSelection:"1.2.840.10008.5.1.4.1.1.88.59",ChestCADSR:"1.2.840.10008.5.1.4.1.1.88.65",XRayRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.67",RadiopharmaceuticalRadiationDoseSR:"1.2.840.10008.5.1.4.1.1.88.68",ColonCADSR:"1.2.840.10008.5.1.4.1.1.88.69",ImplantationPlanSRDocumentStorage:"1.2.840.10008.5.1.4.1.1.88.70",EncapsulatedPDFStorage:"1.2.840.10008.5.1.4.1.1.104.1",EncapsulatedCDAStorage:"1.2.840.10008.5.1.4.1.1.104.2",PositronEmissionTomographyImageStorage:"1.2.840.10008.5.1.4.1.1.128",EnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.130",LegacyConvertedEnhancedPETImageStorage:"1.2.840.10008.5.1.4.1.1.128.1",BasicStructuredDisplayStorage:"1.2.840.10008.5.1.4.1.1.131",RTImageStorage:"1.2.840.10008.5.1.4.1.1.481.1",RTDoseStorage:"1.2.840.10008.5.1.4.1.1.481.2",RTStructureSetStorage:"1.2.840.10008.5.1.4.1.1.481.3",RTBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.4",RTPlanStorage:"1.2.840.10008.5.1.4.1.1.481.5",RTBrachyTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.6",RTTreatmentSummaryRecordStorage:"1.2.840.10008.5.1.4.1.1.481.7",RTIonPlanStorage:"1.2.840.10008.5.1.4.1.1.481.8",RTIonBeamsTreatmentRecordStorage:"1.2.840.10008.5.1.4.1.1.481.9",RTBeamsDeliveryInstructionStorage:"1.2.840.10008.5.1.4.34.7",GenericImplantTemplateStorage:"1.2.840.10008.5.1.4.43.1",ImplantAssemblyTemplateStorage:"1.2.840.10008.5.1.4.44.1",ImplantTemplateGroupStorage:"1.2.840.10008.5.1.4.45.1"}},"sortStudy.js":function(e,t,n){function i(e){if(!e||!e.seriesList)throw new a("Insufficient study data was provided to sortStudy");e.seriesList.sort(function(e,t){return e.seriesNumber-t.seriesNumber}),e.seriesList.forEach(function(e){e.instances.sort(function(e,t){return e.instanceNumber-t.instanceNumber})})}n.export({sortStudy:function(){return i}});var a=void 0;n.watch(e("./classes/OHIFError"),{OHIFError:function(e){a=e}},0)},"sortingManager.js":function(e,t,n){n.export({sortingManager:function(){return a}});var i=void 0;n.watch(e("./createStacks"),{createStacks:function(e){i=e}},0);var a={getDisplaySets:function(e,t,n){return("function"!=typeof n?i:n)(e,t)}}},"stackSynchronizer.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({stackSynchronizer:function(){return r}});var o=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){o=e}},0),T.set("defaultStackSync",!1);var r=new(function(){function e(){(0,a.default)(this,e),this.Index=new o.Synchronizer("cornerstonenewimage",o.stackImageIndexSynchronizer),this.Position=new o.Synchronizer("cornerstonenewimage",o.stackImagePositionSynchronizer),this.synchronizationStrategy="Position"}return e.prototype.changeSynchronizationStrategy=function(){function e(e){if("Index"!==e&&"Position"!==e)throw new Error("Invalid stack synchronization strategy: "+e);if(e!==this.synchronizationStrategy){console.log("changingSyncStrategy: "+e);for(var t=this[this.synchronizationStrategy].getSourceElements(),n=[],i=0;i<t.length;i++)n.push(t[i]);for(var a=0;a<n.length;a++)this[this.synchronizationStrategy].remove(n[a]);for(var o=0;o<n.length;o++)this[e].add(n[o]);this.synchronizationStrategy=e}else console.log("Trying to change to same strategy, abort")}return e}(),e.prototype.add=function(){function e(e){this[this.synchronizationStrategy].add(e)}return e}(),e.prototype.remove=function(){function e(e){this[this.synchronizationStrategy].remove(e)}return e}(),e}())},"switchToImageByIndex.js":function(e,t,n){function i(e){var t=a.getActiveViewportElement();d.scrollToIndex(t,e)}n.export({switchToImageByIndex:function(){return i}});var a=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){a=e}},0)},"switchToImageRelative.js":function(e,t,n){function i(e){var t=a.getActiveViewportElement();d.scroll(t,e)}n.export({switchToImageRelative:function(){return i}});var a=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){a=e}},0)},"textMarkerUtils.js":function(e,t,n){n.export({textMarkerUtils:function(){return s}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var o=void 0;n.watch(e("./toolManager"),{toolManager:function(e){o=e}},1);var r=void 0;n.watch(e("./viewportUtils"),{viewportUtils:function(e){r=e}},2);var s={changeTextCallback:function(e,t,n){var s=function(e){13!==e.which&&27!==e.which||u()},c=function(){if("spine"!==o.getActiveTool()){var e=r.getActiveViewportElement();d.textMarker.deactivate(e,1)}},u=function(){l.get(0).close(),n(e,m.val()),c();var t=r.getActiveViewportElement();a(t).focus()},l=a("#textMarkerRelabelDialog");i._globalHelpers.isTouchDevice()?(l.css({top:0,left:0,right:0,bottom:0,margin:"auto"}),l.find(".dialog.arrow").hide()):(l.css({top:t.currentPoints.page.y-l.outerHeight()-20,left:t.currentPoints.page.x-l.outerWidth()/2}),l.find(".dialog.arrow").show());var m=l.find(".relabelSelect"),p=l.find(".relabelConfirm"),f=l.find(".relabelRemove");f.off("click"),f.on("click",function(){l.get(0).close(),n(e,void 0,!0),c()}),l.get(0).showModal(),a(".relabelSelect").val(e.text).trigger("change"),p.off("click"),p.on("click",function(){u()}),l.off("keydown"),l.on("keydown",s)}}},"thumbnailDragHandlers.js":function(e,t,n){n.export({thumbnailDragHandlers:function(){return u}});var i=void 0;n.watch(e("meteor/jquery"),{$:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},1);var o=function(e,t){var n=e.cloneNode(!0);return i(n).find("canvas").each(function(t,n){var a=n.getContext("2d"),o=i(e).find("canvas").get(t);a.drawImage(o,0,0)}),n.id=t,n.style.visibility="hidden",n},r=function(e,t){e.originalEvent.preventDefault();var n=e.currentTarget,r=i(n),u=a.ui.styleProperty.check("transform","translate(1px, 1px)"),l=o(n,"DragClone"),d=i(l);d.addClass("imageThumbnailClone"),l.style.pointerEvents="none",document.body.appendChild(l);var m=void 0,p=void 0;if("touchstart"===e.type)m=e.originalEvent.touches[0].pageX,p=e.originalEvent.touches[0].pageY;else{m=e.pageX,p=e.pageY;var f={};f.mousemove=function(e){return s(e)},f.mouseup=function(e){return c(e,t,f)},i(document).on("mousemove",f.mousemove),i(document).on("mouseup",f.mouseup)}var g=r.offset(),x={x:m-g.left,y:p-g.top};if(d.data("diff",x),d.css({visibility:"hidden","z-index":1e5}),u){var h=i("#viewer").height()+i(".header").outerHeight();d.data("heightDiff",h);var v="translate("+(m-x.x)+"px, "+(p-x.y-h)+"px)";a.ui.styleProperty.set(d.get(0),"transform",v)}else d.css({left:m-x.x,position:"fixed",top:p-x.y})},s=function(e){var t=void 0,n=void 0;"touchmove"===e.type?(t=e.originalEvent.changedTouches[0].pageX,n=e.originalEvent.changedTouches[0].pageY):(t=e.pageX,n=e.pageY);var o=i("#DragClone"),r=o.data("diff"),s=a.ui.styleProperty.check("transform","translate(1px, 1px)");if(o.css({visibility:"visible","z-index":1e5}),s){var c=o.data("heightDiff"),u="translate("+(t-r.x)+"px, "+(n-r.y-c)+"px)";a.ui.styleProperty.set(o.get(0),"transform",u)}else o.css({left:t-r.x,position:"fixed",top:n-r.y});var l=document.elementFromPoint(t,n);if(l){i(".imageViewerViewport canvas").removeClass("faded");var d=i(l).parents(".imageViewerViewport");d.length?(d.find("canvas").not(".magnifyTool").addClass("faded"),document.body.style.cursor="copy"):l.classList.contains("imageViewerViewport")&&l.classList.contains("empty")?document.body.style.cursor="copy":document.body.style.cursor="no-drop"}},c=function(e,t,n){n&&(i(document).off("mousemove",n.mousemove),i(document).off("mouseup",n.mouseup)),document.body.style.cursor="auto";var o=i("#DragClone");if(o.length){var r=o.offset(),s=r.top,c=r.left,u=o.data("diff"),l=document.elementFromPoint(c+u.x,s+u.y);if(i(".imageThumbnailClone").remove(),i(".imageViewerViewport canvas").removeClass("faded"),l){l.classList.remove("faded");var d=void 0,m=i(l).closest(".imageViewerViewport");if(m.length)d=m.get(0);else{if(!l.classList.contains("imageViewerViewport")||!l.classList.contains("empty"))return!1;d=l}if(!t)return!1;var p=i(".imageViewerViewport").index(d);return a.viewerbase.layoutManager.rerenderViewportWithNewDisplaySet(p,t),!1}}},u={thumbnailDragEndHandler:c,thumbnailDragStartHandler:r,thumbnailDragHandler:s}},"toolManager.js":function(e,t,n){n.export({toolManager:function(){return D}});var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/session"),{Session:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/random"),{Random:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/jquery"),{$:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4);var c=void 0,u=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){c=e},cornerstoneTools:function(e){u=e}},5);var l=void 0;n.watch(e("./getFrameOfReferenceUID"),{getFrameOfReferenceUID:function(e){l=e}},6);var d=void 0;n.watch(e("./updateCrosshairsSynchronizer"),{updateCrosshairsSynchronizer:function(e){d=e}},7);var m=void 0;n.watch(e("./crosshairsSynchronizers"),{crosshairsSynchronizers:function(e){m=e}},8);var p=void 0;n.watch(e("./annotateTextUtils"),{annotateTextUtils:function(e){p=e}},9);var f=void 0;n.watch(e("./textMarkerUtils"),{textMarkerUtils:function(e){f=e}},10);var g=void 0;n.watch(e("./helpers/isTouchDevice"),{isTouchDevice:function(e){g=e}},11);var x={left:"wwwc",right:"zoom",middle:"pan"},h=void 0,v=void 0,S={},y={zoomTouchPinch:{enabled:!0},panMultiTouch:{enabled:!0,numPointers:2},stackScrollMultiTouch:{enabled:!0,numPointers:3},doubleTapZoom:{enabled:!0}},w={activate:[],deactivate:["length","angle","annotate","ellipticalRoi","rectangleRoi","freehand","spine"],enable:[],disable:[],disabledToolButtons:[],shadowConfig:{shadow:!1,shadowColor:"#000000",shadowOffsetX:0,shadowOffsetY:0},textBoxConfig:{centering:{x:!0,y:!0}}},I=!1,D={init:function(){D.addTool("wwwc",{mouse:u.wwwc,touch:u.wwwcTouchDrag}),D.addTool("zoom",{mouse:u.zoom,touch:u.zoomTouchDrag}),D.addTool("wwwcRegion",{mouse:u.wwwcRegion,touch:u.wwwcRegionTouch}),D.addTool("dragProbe",{mouse:u.dragProbe,touch:u.dragProbeTouch}),D.addTool("pan",{mouse:u.pan,touch:u.panTouchDrag,multiTouch:u.panMultiTouch}),D.addTool("stackScroll",{mouse:u.stackScroll,touch:u.stackScrollTouchDrag,multiTouch:u.stackScrollMultiTouch}),D.addTool("length",{mouse:u.length,touch:u.lengthTouch}),D.addTool("angle",{mouse:u.simpleAngle,touch:u.simpleAngleTouch}),D.addTool("magnify",{mouse:u.magnify,touch:u.magnifyTouchDrag}),D.addTool("ellipticalRoi",{mouse:u.ellipticalRoi,touch:u.ellipticalRoiTouch}),D.addTool("rectangleRoi",{mouse:u.rectangleRoi,touch:u.rectangleRoiTouch}),D.addTool("freehand",{mouse:u.freehand}),D.addTool("freehandSculpter",{mouse:u.freehandSculpter}),D.addTool("brush",{mouse:u.brush}),D.addTool("adaptiveBrush",{mouse:u.adaptiveBrush}),D.addTool("eraser",{mouse:u.eraser}),D.addTool("annotate",{mouse:u.arrowAnnotate,touch:u.arrowAnnotateTouch}),D.addTool("rotate",{mouse:u.rotate,touch:u.rotateTouchDrag}),D.addTool("spine",{mouse:u.textMarker,touch:u.textMarkerTouch}),D.addTool("crosshairs",{mouse:u.crosshairs,touch:u.crosshairsTouch}),s.viewer.defaultTool&&(x.left=s.viewer.defaultTool);var e=(v=i.settings&&i.settings.public&&i.settings.public.defaultMouseButtonTools)&&v.left||"wwwc",t=v&&v.right||"zoom",n=v&&v.middle||"pan";x={left:e,right:t,middle:n},this.configureTools(),I=!0},configureTools:function(){var e=u,t=e.textStyle,n=e.toolStyle,a=e.toolColors,o=e.length,s=e.arrowAnnotate,c=e.zoom,l=e.ellipticalRoi,d=e.textMarker,m=e.magnify;t.setBackgroundColor("transparent");var g="Roboto, OpenSans, HelveticaNeue-Light, Helvetica Neue Light, Helvetica Neue, Helvetica, Arial, Lucida Grande, sans-serif";t.setFont("15px "+g),n.setToolWidth(2),a.setToolColor("rgb(255, 255, 0)"),a.setActiveColor("rgb(0, 255, 0)");var x=D.getToolDefaultStates().shadowConfig,h=o.getConfiguration(),v=l.getConfiguration();o.setConfiguration(Object.assign({},h,x,{drawHandlesOnHover:!0})),l.setConfiguration(Object.assign({},v,x));var S=r("#startFrom"),w=r("#ascending"),I={markers:["L5","L4","L3","L2","L1","T12","T11","T10","T9","T8","T7","T6","T5","T4","T3","T2","T1","C7","C6","C5","C4","C3","C2","C1"],current:S.val(),ascending:w.is(":checked"),loop:!0,changeTextCallback:f.changeTextCallback,shadow:x.shadow,shadowColor:x.shadowColor,shadowOffsetX:x.shadowOffsetX,shadowOffsetY:x.shadowOffsetY};d.setConfiguration(I);var T={getTextCallback:p.getTextCallback,changeTextCallback:p.changeTextCallback,drawHandles:!1,arrowFirst:!0};s.setConfiguration(T);var b={minScale:.05,maxScale:10};c.setConfiguration(b);var P={magnifySize:300,magnificationLevel:3};if(m.setConfiguration(P),i.settings&&i.settings.public&&i.settings.public.defaultGestures&&(y.zoomTouchPinch=i.settings.public.defaultGestures.zoomTouchPinch||y.zoomTouchPinch,y.stackScrollMultiTouch=i.settings.public.defaultGestures.stackScrollMultiTouch||y.stackScrollMultiTouch,y.panMultiTouch=i.settings.public.defaultGestures.panMultiTouch||y.panMultiTouch,y.doubleTapZoom=i.settings.public.defaultGestures.doubleTapZoom||y.doubleTapZoom),!0===y.stackScrollMultiTouch.enabled&&y.stackScrollMultiTouch.numPointers){var C={testPointers:function(e){return e.numPointers===y.stackScrollMultiTouch.numPointers}};u.stackScrollMultiTouch.setConfiguration(C)}if(!0===y.panMultiTouch.enabled&&y.panMultiTouch.numPointers){var k={testPointers:function(e){return e.numPointers===y.panMultiTouch.numPointers}};u.panMultiTouch.setConfiguration(k)}},getKeysByValue:function(e,t){return Object.keys(e).filter(function(n){return e[n]===t})},configureLoadProcess:function(){function e(e){var t=e.detail;D.getKeysByValue(window.ViewportLoading,t.imageId).forEach(function(e){a.set("CornerstoneLoadProgress"+e,t.percentComplete)});var n=s.string.encodeId(t.imageId);a.set("CornerstoneThumbnailLoadProgress"+n,t.percentComplete)}c.events.removeEventListener("cornerstoneimageloadprogress",e),c.events.addEventListener("cornerstoneimageloadprogress",e)},setGestures:function(e){y=e},getGestures:function(){return y},addTool:function(e,t){S[e]=t},getTools:function(){return S},setToolDefaultStates:function(e){w=e},getToolDefaultStates:function(){return w},setActiveToolForElement:function(e,t,n){var i=r(t).find("canvas");if(!t.classList.contains("empty")&&i.length){n||(n="left"),S[h.left].mouse.deactivate(t,1),S[h.middle].mouse.deactivate(t,2),S[h.right].mouse.deactivate(t,4),S[h.left].touch&&S[h.left].touch.deactivate(t),S[h.right].multiTouch&&S[h.right].multiTouch.disable(t),Object.keys(w).forEach(function(e){var n=w[e];n&&n.length&&"disabledToolButtons"!==e&&n.forEach(function(n){("deactivate"!==e||n!==h.left&&n!==h.middle&&n!==h.right)&&(S[n].mouse[e](t,"activate"===e||"deactivate"===e?1:void 0),S[n].touch&&S[n].touch[e](t),S[n].multiTouch&&S[n].multiTouch[e](t))})});var a=u.getToolState(t,"stack");if(a&&a.data&&a.data.length){var o=a.data[0].imageIds,s=h.left;"left"===n&&(s=e);var c=S[s],p=h.middle;"middle"===n&&(p=e);var f=u[p],g=h.right;"right"===n&&(g=e);var x=S[g];if(u.zoomWheel.deactivate(t),u.stackScrollWheel.deactivate(t),u.panMultiTouch.disable(t),u.zoomTouchPinch.disable(t),u.stackScrollMultiTouch.disable(t),u.doubleTapZoom.disable(t),o.length>1){if(u.stackScrollWheel.activate(t),!0===y.stackScrollMultiTouch.enabled&&y.stackScrollMultiTouch.numPointers>=3){var v={testPointers:function(e){return e.numPointers===y.stackScrollMultiTouch.numPointers}};u.stackScrollMultiTouch.setConfiguration(v),u.stackScrollMultiTouch.activate(t)}}else u.zoomWheel.activate(t);if(!0===y.panMultiTouch.enabled&&y.panMultiTouch.numPointers>=3){var I={testPointers:function(e){return e.numPointers===y.panMultiTouch.numPointers}};u.panMultiTouch.setConfiguration(I),u.panMultiTouch.activate(t)}var D=void 0;if("crosshairs"===s){var T=l(t);T&&(d(T),D=m.synchronizers[T]),s===p&&p===g?x.mouse.activate(t,7):s===p?(f.activate(t,3),x.mouse.activate(t,4)):p===g?(x.mouse.activate(t,6),c.mouse.activate(t,1,D)):s===g?(f.activate(t,2),x.mouse.activate(t,5)):(c.mouse.activate(t,1,D),f.activate(t,2),x.mouse.activate(t,4))}else s===p&&p===g?x.mouse.activate(t,7):s===p?(f.activate(t,3),x.mouse.activate(t,4)):p===g?(x.mouse.activate(t,6),c.mouse.activate(t,1)):s===g?(f.activate(t,2),x.mouse.activate(t,5)):(setTimeout(function(){return c.mouse.activate(t,1)}),f.activate(t,2),x.mouse.activate(t,4));c.touch&&(D?c.touch.activate(t,D):c.touch.activate(t));var b={testPointers:function(e){return 2===e.numPointers}};x.multiTouch?(x.multiTouch.setConfiguration(b),x.multiTouch.activate(t)):!0===y.panMultiTouch.enabled&&2===y.panMultiTouch.numPointers?(u.panMultiTouch.setConfiguration(b),u.panMultiTouch.activate(t)):!0===y.stackScrollMultiTouch.enabled&&2===y.stackScrollMultiTouch.numPointers&&(u.stackScrollMultiTouch.setConfiguration(b),u.stackScrollMultiTouch.activate(t)),!0===y.zoomTouchPinch.enabled&&u.zoomTouchPinch.activate(t),!0===y.doubleTapZoom.enabled&&u.doubleTapZoom.activate(t),"eraser"===e&&(u.length.enable(t,1),u.ellipticalRoi.enable(t,1),u.rectangleRoi.enable(t,1),u.simpleAngle.enable(t,1),u.arrowAnnotate.enable(t,1),u.freehand.enable(t,1),u.eraser.enable(t,1))}}},setActiveTool:function(e,t,n){I||D.init();var i=void 0;i=r(t&&t.length?t:".imageViewerViewport");var s=function(e,t){try{return c.getEnabledElement(t),e}catch(e){return!0}};h||(h=x),n||(n="left");var u=h[n],l=document.getElementById("textMarkerOptionsDialog");l&&("spine"===e&&"spine"!==u&&"open"!==l.getAttribute("open")?l.show():"spine"!==u&&"open"===l.getAttribute("open")&&l.close()),e||(e=x[n]),i.each(function(t,i){!1!==s(i)&&D.setActiveToolForElement(e,i,n)}),h[n]=e,a.set("ToolManagerActiveToolUpdated",o.id())},getNearbyToolData:function(e,t,n){var i=this.getTools(),a=g(),o={},r=!1;return n.forEach(function(n){var s=u.getToolState(e,n);if(s)return s.data.forEach(function(s,c){var u=n,l=void 0;"simpleAngle"===n?u="angle":"arrowAnnotate"===n&&(u="annotate"),(l=a?i[u].touch:i[u].mouse).pointNearTool(e,s,t)&&(r=!0,o.tool=s,o.index=c,o.toolType=n)}),!r&&void 0}),r?o:void 0},getActiveTool:function(e){return I||D.init(),h||(h=x),e||(e="left"),h[e]},setDefaultTool:function(e,t){t||(t="left"),x[t]=e},getDefaultTool:function(e){return e||(e="left"),x[e]},setConfigureTools:function(e){"function"==typeof e&&(this.configureTools=e)},activateCommandButton:function(e){var t=a.get("ToolManagerActiveCommandButtons")||[];-1===t.indexOf(e)&&(t.push(e),a.set("ToolManagerActiveCommandButtons",t))},deactivateCommandButton:function(e){var t=a.get("ToolManagerActiveCommandButtons")||[],n=t.indexOf(e);-1!==n&&(t.splice(n,1),a.set("ToolManagerActiveCommandButtons",t))}}},"unloadHandlers.js":function(e,t,n){n.export({unloadHandlers:function(){return a}});var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var a={beforeUnload:function(e){if(i.ui.unsavedChanges.probe("viewer.*")>0){var t="You have unsaved changes!";return e.returnValue=t,t}}}},"updateAllViewports.js":function(e,t,n){function i(){a(".imageViewerViewport").not(".empty").each(function(e,t){u.updateImage(t)})}n.export({updateAllViewports:function(){return i}});var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},0)},"updateCrosshairsSynchronizer.js":function(e,t,n){function i(e){var t=r.synchronizers[e];t?t.destroy():(r.synchronizers[e]=new d.Synchronizer("cornerstonenewimage",d.updateImageSynchronizer),t=r.synchronizers[e]),a(".imageViewerViewport").each(function(n,i){var a=o(i);e===a&&t.add(i)})}n.export({updateCrosshairsSynchronizer:function(){return i}});var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},0);var o=void 0;n.watch(e("./getFrameOfReferenceUID"),{getFrameOfReferenceUID:function(e){o=e}},1);var r=void 0;n.watch(e("./crosshairsSynchronizers"),{crosshairsSynchronizers:function(e){r=e}},2)},"updateMetaDataManager.js":function(e,t,n){function i(e){var t=e.radiopharmaceuticalInfo;if("PT"===e.modality&&t)return(new s).addTag("00181072",t.radiopharmaceuticalStartTime).addTag("00181074",t.radionuclideTotalDose).addTag("00181075",t.radionuclideHalfLife).toJSON()}function a(e){e.seriesList.forEach(function(t){t.instances.forEach(function(n){if("wadors"===n.imageRendering||"wadors"===n.thumbnailRendering)for(var i=c(e,t,n),a=n.numberOfFrames||1,o=0;o<a;o++){var s=r(n,o);m.wadors.metaDataManager.add(s,i)}})})}n.export({updateMetaDataManager:function(){return a}});var o=void 0;n.watch(e("meteor/underscore"),{_:function(e){o=e}},0);var r=void 0;n.watch(e("./getWADORSImageId"),{getWADORSImageId:function(e){r=e}},1);var s=void 0;n.watch(e("./classes/metadata/WadoRsMetaDataBuilder"),{WadoRsMetaDataBuilder:function(e){s=e}},2);var c=function(e,t,n){return(new s).addTag("00080016",n.sopClassUid).addTag("00080018",n.sopInstanceUid).addTag("00080021",t.seriesDate).addTag("00080031",t.seriesTime).addTag("00080060",n.modality).addTag("00101010",e.patientAge).addTag("00101020",e.patientSize).addTag("00101030",e.patientWeight).addTag("00180050",n.sliceThickness).addTag("0020000e",t.seriesInstanceUid).addTag("00200011",t.seriesNumber).addTag("0020000d",e.studyInstanceUid).addTag("00200013",n.instanceNumber).addTag("00200032",n.imagePositionPatient,!0).addTag("00200037",n.imageOrientationPatient,!0).addTag("00200052",n.frameOfReferenceUID).addTag("00201041",n.sliceLocation).addTag("00280002",n.samplesPerPixel).addTag("00280004",n.photometricInterpretation).addTag("00280006",n.planarConfiguration).addTag("00280010",n.rows).addTag("00280011",n.columns).addTag("00280030",n.pixelSpacing,!0).addTag("00280034",n.pixelAspectRatio,!0).addTag("00280100",n.bitsAllocated).addTag("00280101",n.bitsStored).addTag("00280102",n.highBit).addTag("00280103",n.pixelRepresentation).addTag("00280106",n.smallestPixelValue).addTag("00280107",n.largestPixelValue).addTag("00281050",n.windowCenter,!0).addTag("00281051",n.windowWidth,!0).addTag("00281052",n.rescaleIntercept).addTag("00281053",n.rescaleSlope).addTag("00281054",n.rescaleType).addTag("00281101",n.redPaletteColorLookupTableDescriptor).addTag("00281102",n.greenPaletteColorLookupTableDescriptor).addTag("00281103",n.bluePaletteColorLookupTableDescriptor).addTag("00281201",n.redPaletteColorLookupTableData).addTag("00281202",n.greenPaletteColorLookupTableData).addTag("00281203",n.bluePaletteColorLookupTableData).addTag("00540016",i(n)).toJSON()}},"updateOrientationMarkers.js":function(e,t,n){function i(e,t){t||(t=u.getViewport(e));var n=u.getEnabledElement(e),i=u.metaData.get("imagePlane",n.image.imageId);if(i&&i.rowCosines&&i.columnCosines){var o=d.orientation.getOrientationString(i.rowCosines),r=d.orientation.getOrientationString(i.columnCosines),s=d.orientation.invertOrientationString(o),c={top:d.orientation.invertOrientationString(r),left:s};t.vflip&&(c.top=d.orientation.invertOrientationString(c.top)),t.hflip&&(c.left=d.orientation.invertOrientationString(c.left));var l=a(e).siblings(".viewportOrientationMarkers"),m=l.find(".topMid"),p=l.find(".leftMid");90===t.rotation||-270===t.rotation?(m.text(c.left),p.text(d.orientation.invertOrientationString(c.top))):-90===t.rotation||270===t.rotation?(m.text(d.orientation.invertOrientationString(c.left)),p.text(c.top)):180===t.rotation||-180===t.rotation?(m.text(d.orientation.invertOrientationString(c.top)),p.text(d.orientation.invertOrientationString(c.left))):(m.text(c.top),p.text(c.left))}}n.export({updateOrientationMarkers:function(){return i}});var a=void 0;n.watch(e("meteor/jquery"),{$:function(e){a=e}},0)},"viewportOverlayUtils.js":function(e,t,n){n.export({viewportOverlayUtils:function(){return o}});var i=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){i=e}},0);var a=void 0;n.watch(e("./getElementIfNotEmpty"),{getElementIfNotEmpty:function(e){a=e}},1);var o={getPatient:function(e){if(!this.imageId)return!1;var t=i.metaData.get("patient",this.imageId);return t?t[e]:""},getStudy:function(e){if(!this.imageId)return!1;var t=i.metaData.get("study",this.imageId);return t?t[e]:""},getSeries:function(e){if(!this.imageId)return!1;var t=i.metaData.get("series",this.imageId);return t?t[e]:""},getInstance:function(e){if(!this.imageId)return!1;var t=i.metaData.get("instance",this.imageId);return t?t[e]:""},getTagDisplay:function(e){if(!this.imageId)return!1;var t=i.metaData.get("tagDisplay",this.imageId);return t?t[e]:""},getImage:function(e){var t=a(e);if(!t)return!1;var n=void 0;try{n=i.getEnabledElement(t)}catch(e){return!1}return!(!n||!n.image)&&n.image},formatDateTime:function(e,t){return e+" "+t}}},"viewportUtils.js":function(e,t,n){n.export({viewportUtils:function(){return j}});var i=void 0;n.watch(e("meteor/session"),{Session:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/random"),{Random:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/underscore"),{_:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4);var c=void 0,u=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){c=e},cornerstoneTools:function(e){u=e}},5);var l=void 0;n.watch(e("./updateOrientationMarkers"),{updateOrientationMarkers:function(e){l=e}},6);var d=void 0;n.watch(e("./instanceClassSpecificViewport"),{getInstanceClassDefaultViewport:function(e){d=e}},7);var m=void 0;n.watch(e("./stackSynchronizer.js"),{stackSynchronizer:function(e){m=e}},8);var p=function(e){var t=void 0;try{t=c.getEnabledElement(e)}catch(e){s.log.warn(e)}return t},f=function(){var e=i.get("activeViewport")||0;return o(".imageViewerViewport").get(e)},g=function(){var e=f();return p(e)},x=function(){var e=f();if(e){var t=c.getViewport(e),n=.15,i=10;t.scale=Math.min(t.scale+.15,10),c.setViewport(e,t)}},h=function(){var e=f();if(e){var t=c.getViewport(e),n=.15,i=.05;t.scale=Math.max(t.scale-.15,.05),c.setViewport(e,t)}},v=function(){var e=f();e&&c.fitToWindow(e)},S=function(){var e=f();if(e){var t=c.getViewport(e);t.rotation-=90,c.setViewport(e,t),l(e,t)}},y=function(){var e=f();if(e){var t=c.getViewport(e);t.rotation+=90,c.setViewport(e,t),l(e,t)}},w=function(){var e=f();if(e){var t=c.getViewport(e);t.invert=!1===t.invert,c.setViewport(e,t)}},I=function(){var e=f(),t=c.getViewport(e);t.vflip=!1===t.vflip,c.setViewport(e,t),l(e,t)},D=function(){var e=f(),t=c.getViewport(e);t.hflip=!1===t.hflip,c.setViewport(e,t),l(e,t)},T=function(e){var t=c.getEnabledElement(e);if(!1===t.fitToWindow){var n=t.image.imageId,i=c.metaData.get("instance",n);t.viewport=c.getDefaultViewport(t.canvas,t.image);var a=d(i,t,n);c.setViewport(e,a)}else c.reset(e)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e?T(f()):"all"===e?o(".imageViewerViewport").each(function(e,t){T(t)}):T(o(".imageViewerViewport").get(e))},P=function(){var e=f(),t=c.getEnabledElement(e).image.imageId,n=u.globalImageIdSpecificToolStateManager,i=n.saveImageIdToolState(t);if(i){Object.keys(i).forEach(function(e){"freehand"!==e&&delete i[e]});var a=void 0;if(i.freehand&&i.freehand.data&&(a=i.freehand.data),a)for(var o=a.length-1;o>=0;o--)!1===a[o].imageAnnotationData.locked&&(u.freehand.decrementVolumePolygonCount(a[o].seriesInstanceUid,"default",a[o].volumeIndex),a.splice(o,1));0===a.length&&delete i.freehand,n.restoreImageIdToolState(t,i),c.updateImage(e)}},C=function(){var e=s.viewer.stackImagePositionOffsetSynchronizer;e&&(e.isActive()?e.deactivate():e.activate())},k=function(e,t){var n=o(e);if(n.is("dialog"))e.hasAttribute("open")?(t&&t(),e.close()):e.show();else{var i=n.hasClass("dialog-open");n.toggleClass("dialog-closed",i),n.toggleClass("dialog-open",!i)}},R=function(){var e=f();A()?u.stopClip(e):u.playClip(e),i.set("UpdateCINE",Math.random())},V=function(){var e=document.getElementById("cineDialog");k(e,E),i.set("UpdateCINE",a.id())},M=function(){q();var e=o("#imageDownloadDialog");e.length?e.find(".close:first").click():s.ui.showDialog("imageDownloadDialog")},O=function(){return!!f()},A=function(){i.get("UpdateCINE"),i.get("LayoutManagerUpdated");var e=f();if(e&&o(e).find("canvas").length){var t=u.getToolState(e,"playClip");if(!t)return!1;var n=t.data[0];return!!n&&!r.isUndefined(n.intervalId)}},L=function(){i.get("activeViewport"),i.get("LayoutManagerUpdated");var e=f();if(!e||!o(e).find("canvas").length)return!0;var t=u.getToolState(e,"stack");if(!t||!t.data||!t.data.length)return!0;var n=t.data[0];return 1===(n.imageIds&&n.imageIds.length?n.imageIds.length:1)},E=function(){o(".imageViewerViewport").not(".empty").each(function(e,t){o(t).find("canvas").length&&u.stopClip(t)})},q=function(){var e=f();o(e).find("canvas").length&&u.stopClip(e)},N=function(){var e=0;i.get("viewportActivated"),i.get("LayoutManagerUpdated");var t=s.viewer.stackImagePositionOffsetSynchronizer;return t&&(e=t.getLinkableViewports().length),e<=1},F=function(){var e=!0;i.get("LayoutManagerUpdated");var t=s.viewer.stackImagePositionOffsetSynchronizer,n=r.pluck(t.syncedViewports,"element");return o(".imageViewerViewport").each(function(t,i){r.contains(n,i)||(e=!1)}),e},B=function(){function e(){console.log("cancelButton"),t.get(0).close()}var t=o("#stackSyncDialog"),n=t.find(".stackSyncDialogCancel");n.off("click"),n.on("click",function(){e()}),t.off("keydown"),t.on("keydown",function(t){(t.which=27)&&e()}),t.get(0).showModal()},U=function(){m.changeSynchronizationStrategy("Index")},_=function(){m.changeSynchronizationStrategy("Position")};window.addEventListener("cornerstonetoolsclipstopped",function(){i.set("UpdateCINE",Math.random())});var j={getEnabledElementForActiveElement:g,getEnabledElement:p,getActiveViewportElement:f,zoomIn:x,zoomOut:h,zoomToFit:v,rotateL:S,rotateR:y,invert:w,flipV:I,flipH:D,resetViewport:b,clearTools:P,linkStackScroll:C,toggleDialog:k,toggleCinePlay:R,toggleCineDialog:V,toggleDownloadDialog:M,isPlaying:A,isDownloadEnabled:O,hasMultipleFrames:L,stopAllClips:E,isStackScrollLinkingDisabled:N,isStackScrollLinkingActive:F,showSyncSettings:B}},classes:{"ImageSet.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/typeof")),o=i(e("babel-runtime/helpers/classCallCheck"));n.export({ImageSet:function(){return u}});var r=void 0;n.watch(e("meteor/random"),{Random:function(e){r=e}},0);var s=void 0;n.watch(e("./OHIFError"),{OHIFError:function(e){s=e}},1);var c="object",u=function(){function e(t){if((0,o.default)(this,e),!0!==Array.isArray(t))throw new s("ImageSet expects an array of images");Object.defineProperty(this,"images",{enumerable:!1,configurable:!1,writable:!1,value:t}),Object.defineProperty(this,"uid",{enumerable:!1,configurable:!1,writable:!1,value:r.id()})}return e.prototype.getUID=function(){function e(){return this.uid}return e}(),e.prototype.setAttribute=function(){function e(e,t){this[e]=t}return e}(),e.prototype.getAttribute=function(){function e(e){return this[e]}return e}(),e.prototype.setAttributes=function(){function e(e){if((void 0===e?"undefined":(0,a.default)(e))===c&&null!==e){var t=this,n=Object.prototype.hasOwnProperty;for(var i in g.sanitizeForInObject(e))n.call(e,i)&&(t[i]=e[i])}}return e}(),e.prototype.getImage=function(){function e(e){return this.images[e]}return e}(),e.prototype.sortBy=function(){function e(e){return this.images.sort(e)}return e}(),e}()},"LayoutManager.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({LayoutManager:function(){return m}});var o=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},1);var s=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){s=e}},2);var c=void 0;n.watch(e("meteor/templating"),{Template:function(e){c=e}},3);var u=void 0;n.watch(e("meteor/underscore"),{_:function(e){u=e}},4);var l=void 0;n.watch(e("meteor/jquery"),{$:function(e){l=e}},5);var d=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){d=e}},6);var m=function(){function e(t,n){var i=this;(0,a.default)(this,e),d.log.info("LayoutManager constructor"),this.observer=new s.Dependency,this.parentNode=t,this.studies=n,this.viewportData=[],this.layoutTemplateName="gridLayout",this.layoutProps={rows:1,columns:1},this.layoutClassName=this.getLayoutClass(),this.isZoomed=!1;var o=function(){return s.afterFlush(function(){r.set("LayoutManagerUpdated",Math.random()),i.observer.changed()})};this.updateSession=u.throttle(o,300)}return e.prototype.getNumberOfViewports=function(){function e(){return this.layoutProps.rows*this.layoutProps.columns}return e}(),e.prototype.setDefaultViewportData=function(){function e(){d.log.info("LayoutManager setDefaultViewportData");var e=this,t=this.getNumberOfViewports(),n=e.viewportData,i=this.getDisplaySetSequenceMap(),a=this.isDisplaySetsSequenced(i),o=0;if(t>n.length&&n.length&&a)e.viewportData=n,o=n.length;else{if(t<=n.length)return void(e.viewportData=n.slice(0,t));e.viewportData=[]}var r=[];this.studies.forEach(function(e){e.displaySets.forEach(function(e){return e.images.length&&r.push(e)})});var s=void 0,c=e.viewportData.length;if(c){var u=i.values().next().value[0].displaySetIndex+c,l=u+(t-c);s=r.slice(u,l)}else s=r.slice(0,t);var m=[];for(s.forEach(function(e,t){var n=e.images,i=e.studyInstanceUid,a=e.seriesInstanceUid,r=e.displaySetInstanceUid,s=n[0]&&n[0].getSOPInstanceUID?n[0].getSOPInstanceUID():"",c={viewportIndex:o+t,studyInstanceUid:i,seriesInstanceUid:a,displaySetInstanceUid:r,sopInstanceUid:s};m.push(c)}),e.viewportData=e.viewportData.concat(m);e.viewportData.length<t;)e.viewportData.push({})}return e}(),e.prototype.getLayoutClass=function(){function e(){var e=this.layoutProps;return"layout-"+e.rows+"-"+e.columns}return e}(),e.prototype.updateLayoutClass=function(){function e(){var e=this.getLayoutClass();this.layoutClassName!==e&&this.parentNode.classList.remove(this.layoutClassName),this.layoutClassName=e,this.parentNode.classList.add(e)}return e}(),e.prototype.updateViewports=function(){function e(){d.log.info("LayoutManager updateViewports"),this.viewportData&&this.viewportData.length&&this.viewportData.length===this.getNumberOfViewports()||this.setDefaultViewportData();var e=this.layoutProps,t=l.extend({viewportData:[]},e);this.viewportData.forEach(function(n){var i=l.extend(n,e);t.viewportData.push(i)});var n=c[this.layoutTemplateName];l(this.parentNode).html(""),this.updateLayoutClass(),o.renderWithData(n,t,this.parentNode),this.updateSession(),this.isZoomed=!1}return e}(),e.prototype.rerenderViewportWithNewDisplaySet=function(){function e(e,t){var n=u.clone(t);d.log.info("LayoutManager rerenderViewportWithNewDisplaySet: "+e);var i=l(".imageViewerViewport").eq(e),a=i.parents(".viewportContainer").get(0);n.viewportIndex=e,this.viewportData[e]={viewportIndex:e,displaySetInstanceUid:n.displaySetInstanceUid,seriesInstanceUid:n.seriesInstanceUid,studyInstanceUid:n.studyInstanceUid,renderedCallback:n.renderedCallback,currentImageIdIndex:n.currentImageIdIndex||0},i.find("canvas").not(".magnifyTool").removeClass("faded");var r=i.parents(".removable"),s=document.createElement("div");s.className="removable",r.remove(),a.appendChild(s),o.renderWithData(c.imageViewerViewport,n,s),this.updateSession()}return e}(),e.prototype.enlargeViewport=function(){function e(e){if(d.log.info("LayoutManager enlargeViewport: "+e),this.viewportData&&this.viewportData.length){this.previousViewportData=this.viewportData.slice(0);var t=l.extend({},this.viewportData[e]);t.rows=1,t.columns=1,t.viewportIndex=0;var n={viewportData:[t],rows:1,columns:1},i=c.gridLayout;l(this.parentNode).html(""),o.renderWithData(i,n,this.parentNode),this.isZoomed=!0,this.zoomedViewportIndex=e,this.viewportData=n.viewportData,this.updateSession()}}return e}(),e.prototype.resetPreviousLayout=function(){function e(){d.log.info("LayoutManager resetPreviousLayout"),this.isZoomed&&(this.previousViewportData[this.zoomedViewportIndex]=l.extend({},this.viewportData[0]),this.previousViewportData[this.zoomedViewportIndex].viewportIndex=this.zoomedViewportIndex,this.viewportData=this.previousViewportData,this.updateViewports())}return e}(),e.prototype.toggleEnlargement=function(){function e(e){d.log.info("LayoutManager toggleEnlargement: "+e),this.isZoomed?this.resetPreviousLayout():this.getNumberOfViewports()>1&&this.enlargeViewport(e)}return e}(),e.prototype.getDisplaySetSequenceMap=function(){function e(){var e=this;d.log.info("LayoutManager getDisplaySetSequenceMap");var t=this.viewportData,n=new v;return t.forEach(function(t,i){var a=u.findWhere(e.studies,{studyInstanceUid:t.studyInstanceUid})||e.studies[0],o=a.displaySets,r=u.findWhere(o,{displaySetInstanceUid:t.displaySetInstanceUid}),s=u.indexOf(o,r);s=s<0?9999:s;var c=n.get(a);c||(c=[],n.set(a,c)),c.push({viewportIndex:i,displaySetIndex:s})}),n}return e}(),e.prototype.isDisplaySetsSequenced=function(){function e(e){d.log.info("LayoutManager isDisplaySetsSequenced");var t=!0;return(e||this.getDisplaySetSequenceMap()).forEach(function(e,n){var i=null,a=null;e.forEach(function(e,n){var o=e.viewportIndex,r=e.displaySetIndex;9999===r||null===a||null===i||null===r||o-1===a&&r-1===i||(t=!1),a=o,i=r})}),t}return e}(),e.prototype.canMoveDisplaySets=function(){function e(e){d.log.info("LayoutManager canMoveDisplaySets");var t=d.uiSettings.displaySetNavigationMultipleViewports,n=d.uiSettings.displaySetNavigationLoopOverSeries,i=this.getDisplaySetSequenceMap(),a=this.isDisplaySetsSequenced(i),o=t?null:r.get("activeViewport");if(e&&!n){var s=!0;if(i.forEach(function(e,n){var i=e[null!==o?o:e.length-1];if(i){var a=i.displaySetIndex,r=e.length,c=n.displaySets.length,u=c-(t?c%r||r:1);9999!==a&&a!==u&&(s=!1)}}),(!t||a)&&s)return!1}if(!e&&!n){var c=!0;if(o>=0&&i.forEach(function(e,t){var n=e[null!==o?o:0];if(n){var i=n.displaySetIndex,a=e.length;9999!==i&&i-a!=-a&&(c=!1)}}),(!t||a)&&c)return!1}return!0}return e}(),e.prototype.moveSingleViewportDisplaySets=function(){function e(e,t){d.log.info("LayoutManager moveSingleViewportDisplaySets: "+e);var n=d.uiSettings.displaySetNavigationLoopOverSeries,i=this.viewportData[e],a=(u.findWhere(this.studies,{studyInstanceUid:i.studyInstanceUid})||this.studies[0]).displaySets,o=u.findWhere(a,{displaySetInstanceUid:i.displaySetInstanceUid}),r=u.indexOf(a,o);if(t){if(++r>=a.length){if(!n)return;r=0}}else if(--r<0){if(!n)return;r=a.length-1}var s=a[r];this.rerenderViewportWithNewDisplaySet(e,s)}return e}(),e.prototype.moveMultipleViewportDisplaySets=function(){function e(e){var t=this;d.log.info("LayoutManager moveMultipleViewportDisplaySets");var n=d.uiSettings.displaySetNavigationLoopOverSeries,i=this.getDisplaySetSequenceMap(),a=this.isDisplaySetsSequenced(i),o=[];i.forEach(function(t,i){t.sort(function(e,t){return e.displaySetIndex>t.displaySetIndex});var r=i.displaySets,s=t[0].displaySetIndex,c=t.length,u=s%c,l=u?s-u:s;l+=c*(e?1:-1);var d=r.length;if(l>=d){var m=d-(d%c||c);if(s+c!==m+c)l=m;else{if(!n)return;l=0}}else if(l<0)if(s>0)l=0;else{if(!n)return;l=d-1-(d-1)%c}else a||(l=0);t.forEach(function(e,t){var n=e.viewportIndex,i=r[l+t]||{};o.push(i)})});var r=d.utils.sortBy({name:"studyInstanceUid"},{name:"instanceNumber"},{name:"seriesNumber"});o.sort(function(e,t){return r(e,t)}),o.forEach(function(e,n){t.rerenderViewportWithNewDisplaySet(n,e)})}return e}(),e.prototype.moveDisplaySets=function(){function e(e){if(d.log.info("LayoutManager moveDisplaySets"),d.uiSettings.displaySetNavigationMultipleViewports)this.moveMultipleViewportDisplaySets(e);else{var t=r.get("activeViewport");this.moveSingleViewportDisplaySets(t,e)}}return e}(),e.prototype.isStudyLoadedIntoViewport=function(){function e(e,t){return void 0!==this.viewportData.find(function(n){return n.studyInstanceUid===e&&n.viewportIndex===t})}return e}(),e.prototype.isMultipleLayout=function(){function e(){return 1!==this.layoutProps.row&&1!==this.layoutProps.columns}return e}(),e}()},"OHIFError.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/possibleConstructorReturn")),r=i(e("babel-runtime/helpers/inherits"));n.export({OHIFError:function(){return s}});var s=function(e){function t(n){(0,a.default)(this,t);var i=(0,o.default)(this,e.call(this));return i.message=n,i.stack=(new Error).stack,i.name=i.constructor.name,i}return(0,r.default)(t,e),t}(Error)},"ResizeViewportManager.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({ResizeViewportManager:function(){return l}});var o=void 0;n.watch(e("meteor/session"),{Session:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/jquery"),{$:function(e){r=e}},1);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},2);var c=void 0;n.watch(e("../instanceClassSpecificViewport"),{getInstanceClassDefaultViewport:function(e){c=e}},3);var l=function(){function e(){(0,a.default)(this,e),this._resizeHandler=null}return e.prototype.repositionStudySeriesQuickSwitch=function(){function e(){if(s.log.info("ResizeViewportManager repositionStudySeriesQuickSwitch"),o.get("ViewerOpened")){var e=s.viewerbase.layoutManager.viewportData.length;if(e&&!(e<=1)){var t=r("#viewer"),n=t.find(".sidebar-left.sidebar-open"),i=t.find(".sidebar-right.sidebar-open"),a=r(".quickSwitchWrapper.left"),c=r(".quickSwitchWrapper.right"),u=n.length>0,l=i.length>0;c.removeClass("left-sidebar-only"),a.removeClass("right-sidebar-only");var d=0;u&&(d=n.width()/r(window).width()*100,l||c.addClass("left-sidebar-only")),l&&!u&&a.addClass("right-sidebar-only");var m=r("#imageViewerViewports").width()/e/r(window).width()*100+d,p=100-m;a.css("right",p+"%"),c.css("left",m+"%")}}}return e}(),e.prototype.relocateDialogs=function(){function e(){s.log.info("ResizeViewportManager relocateDialogs");var e=r("#annotationDialog, #textMarkerOptionsDialog");e.css({top:"",left:"",bottom:0,right:0}),r(".draggableDialog").not(e).css({top:0,left:0,bottom:0,right:0})}return e}(),e.prototype.resizeScrollbars=function(){function e(e){s.log.info("ResizeViewportManager resizeScrollbars"),r(e).siblings(".imageViewerViewportOverlay").find(".scrollbar").trigger("rescale")}return e}(),e.prototype.resizeViewportElement=function(){function e(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0;try{n=u.getEnabledElement(e)}catch(e){return}if(u.resize(e,t),!1===n.fitToWindow){var i=n.image.imageId,a=u.metaData.get("instance",i),o=c(a,n,i);u.setViewport(e,o)}}return e}(),e.prototype.resizeViewportElements=function(){function e(){var e=this;this.relocateDialogs(),setTimeout(function(){e.repositionStudySeriesQuickSwitch(),r(".imageViewerViewport").not(".empty").each(function(t,n){e.resizeViewportElement(n),e.resizeScrollbars(n)})},1)}return e}(),e.prototype.setResizeViewportElement=function(){function e(e){this.resizeViewportElements=e}return e}(),e.prototype.handleResize=function(){function e(){var e=this;clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(function(){s.log.info("ResizeViewportManager resizeViewportElements"),e.resizeViewportElements()},100)}return e}(),e.prototype.getResizeHandler=function(){function e(){var e=this._resizeHandler;return null===e&&(e=this.handleResize.bind(this),this._resizeHandler=e),e}return e}(),e}()},"StackImagePositionOffsetSynchronizer.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/createClass"));n.export({StackImagePositionOffsetSynchronizer:function(){return m}});var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},0);var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},1);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},2);var u=void 0,l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){u=e},cornerstoneTools:function(e){l=e}},3);var d=void 0;n.watch(e("../toolManager"),{toolManager:function(e){d=e}},4);var m=function(){function e(){(0,a.default)(this,e),this.active=!1,this.syncedViewports=[],this.synchronizer=new l.Synchronizer("cornerstonenewimage",l.stackImagePositionOffsetSynchronizer)}return e.prototype.isActive=function(){function e(){return this.active}return e}(),e.prototype.activate=function(){function e(){var e=this.getLinkableViewports();this.syncViewports(e)}return e}(),e.prototype.activateByViewportIndexes=function(){function e(e){var t=this.getViewportByIndexes(e);this.syncViewports(t)}return e}(),e.prototype.deactivate=function(){function e(){if(this.isActive()){for(;this.syncedViewports.length;){var e=this.syncedViewports[0];this.removeViewport(e)}this.active=!1,d.deactivateCommandButton("linkStackScroll")}}return e}(),e.prototype.update=function(){function e(){if(this.isActive()){var e=this.getActiveViewportElement();this.isViewportSynced(e)||(this.deactivate(),this.activate())}}return e}(),e.prototype.syncViewports=function(){function t(t){var n=this,i=[];this.isActive()||t.length<=1||(t.forEach(function(t,a){n.synchronizer.add(t.element),n.syncedViewports.push(t),i.push(t.index),n.disabledListener||(n.disabledListener=n.elementDisabledHandler(n)),t.element.addEventListener(e.ELEMENT_DISABLED_EVENT,n.disabledListener)}),this.active=!0,d.activateCommandButton("linkStackScroll"),r.set("StackImagePositionOffsetSynchronizerLinkedViewports",i))}return t}(),e.prototype.isViewportSynced=function(){function e(e){return!!this.getViewportByElement(e)}return e}(),e.prototype.getActiveViewportElement=function(){function e(){var e=r.get("activeViewport")||0;return s(".imageViewerViewport").get(e)}return e}(),e.prototype.removeViewport=function(){function t(t){var n=this.syncedViewports.indexOf(t);-1!==n&&(this.syncedViewports.splice(n,1),this.synchronizer.remove(t.element),this.removeLinkedViewportFromSession(t),t.element.removeEventListener(e.ELEMENT_DISABLED_EVENT,this.disabledListener))}return t}(),e.prototype.getViewportByElement=function(){function e(e){for(var t=this.syncedViewports.length,n=0;n<t;n++){var i=this.syncedViewports[n];if(i.element===e)return i}}return e}(),e.prototype.removeViewportByElement=function(){function e(e){var t=this.getViewportByElement(e);t&&this.removeViewport(t)}return e}(),e.prototype.removeLinkedViewportFromSession=function(){function e(e){var t=r.get("StackImagePositionOffsetSynchronizerLinkedViewports"),n=t.indexOf(e.index);-1!==n&&(t.splice(n,1),r.set("StackImagePositionOffsetSynchronizerLinkedViewports",t))}return e}(),e.prototype.elementDisabledHandler=function(){function e(e){return function(t){return e.removeViewportByElement(t.detail.element)}}return e}(),e.prototype.getViewportByIndexes=function(){function e(e){var t=[],n=s(".imageViewerViewport");return e.forEach(function(e){var i=n.get(e);i&&t.push({index:e,element:i})}),t}return e}(),e.prototype.isViewportsLinkable=function(){function e(e,t){var n=this.getViewportImageNormal(e),i=this.getViewportImageNormal(t);if(n&&i){var a=i.angleTo(n);return a<Math.PI/12||a===Math.PI}return!1}return e}(),e.prototype.getLinkableViewports=function(){function e(){var e=this,t=this.getActiveViewportElement(),n=[];return s(".imageViewerViewport").each(function(i,a){e.isViewportsLinkable(t,a)&&n.push({index:i,element:a})}),n}return e}(),e.prototype.getViewportImageNormal=function(){function e(e){if(e){e=s(e).get(0);try{var t=u.getEnabledElement(e);if(!t.image)return;var n=t.image.imageId,i=u.metaData.get("imagePlane",n);if(!i||!i.rowCosines||!i.columnCosines)return;return i.rowCosines.clone().cross(i.columnCosines)}catch(e){var a=e.message||e;c.log.info("StackImagePositionOffsetSynchronizer getViewportImageNormal: "+a)}}}return e}(),(0,o.default)(e,null,[{key:"ELEMENT_DISABLED_EVENT",get:function(){return"cornerstoneelementdisabled.StackImagePositionOffsetSynchronizer"}}]),e}()},"StudyLoadingListener.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/possibleConstructorReturn")),o=i(e("babel-runtime/helpers/inherits")),r=i(e("babel-runtime/helpers/classCallCheck"));n.export({StudyLoadingListener:function(){return g},StackLoadingListener:function(){return f},DICOMFileLoadingListener:function(){return p}});var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},0);var c=void 0;n.watch(e("meteor/session"),{Session:function(e){c=e}},1);var u=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){u=e}},2);var l=void 0,d=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){l=e},cornerstoneWADOImageLoader:function(e){d=e}},3);var m=function(){function e(t,n){(0,r.default)(this,e),n=n||{},this.id=e.getNewId(),this.stack=t,this.startListening(),this.statsItemsLimit=n.statsItemsLimit||2,this.stats={items:[],total:0,elapsedTime:0,speed:0},this._addStatsData(0),this._updateProgress()}return e.prototype._addStatsData=function(){function e(e){var t=new Date,n=this.stats,i=n.items,a={value:e,date:t};for(i.push(a),n.total+=a.value;i.length>this.statsItemsLimit;){var o=i.shift();n.total-=o.value}if(i.length>1){var r=i[0];n.elapsedTime=(a.date.getTime()-r.date.getTime())/1e3,n.speed=(n.total-r.value)/n.elapsedTime}}return e}(),e.prototype._getProgressSessionId=function(){function e(){return"StackProgress:"+this.stack.displaySetInstanceUid}return e}(),e.prototype._clearSession=function(){function e(){var e=this._getProgressSessionId();c.set(e,void 0),delete c.keys.progressSessionId}return e}(),e.prototype.startListening=function(){function e(){throw new Error("`startListening` must be implemented by child clases")}return e}(),e.prototype.stopListening=function(){function e(){throw new Error("`stopListening` must be implemented by child clases")}return e}(),e.prototype.destroy=function(){function e(){this.stopListening(),this._clearSession()}return e}(),e.getNewId=function(){function e(){var e=(new Date).getTime().toString().slice(-8),t=parseInt(1e9*Math.random());return e.toString()+t.toString()}return e}(),e}(),p=function(e){function t(n){(0,r.default)(this,t);var i=(0,a.default)(this,e.call(this,n));return i._dataSetUrl=i._getDataSetUrl(n),i._lastLoaded=0,i._checkCachedData(),i}return(0,o.default)(t,e),t.prototype._checkCachedData=function(){function e(){var e=d.wadouri.dataSetCacheManager.get(this._dataSetUrl);if(e){var t=e.byteArray.length;this._updateProgress({percentComplete:100,loaded:t,total:t})}}return e}(),t.prototype._getImageLoadProgressEventName=function(){function e(){return"cornerstoneimageloadprogress."+this.id}return e}(),t.prototype.startListening=function(){function e(){var e=this._getImageLoadProgressEventName(),t=this._imageLoadProgressEventHandle.bind(this);this.stopListening(),l.events.addEventListener(e,t)}return e}(),t.prototype.stopListening=function(){function e(){var e=this._getImageLoadProgressEventName();l.events.removeEventListener(e)}return e}(),t.prototype._imageLoadProgressEventHandle=function(){function e(e){var t=e.detail,n=this._convertImageIdToDataSetUrl(t.imageId),i=t.loaded-this._lastLoaded;!this._dataSetUrl!==n&&(this._addStatsData(i),this._updateProgress(t),this._lastLoaded=t.loaded)}return e}(),t.prototype._updateProgress=function(){function e(e){var t=this._getProgressSessionId();e=e||{},c.set(t,{multiFrame:!1,percentComplete:e.percentComplete,bytesLoaded:e.loaded,bytesTotal:e.total,bytesPerSecond:this.stats.speed})}return e}(),t.prototype._convertImageIdToDataSetUrl=function(){function e(e){return e=e.replace(/^(dicomweb:|wadouri:)/i,""),e=e.replace(/frame=\d+&?/i,""),e=e.replace(/&$/,"")}return e}(),t.prototype._getDataSetUrl=function(){function e(e){var t=e.imageIds[0];return this._convertImageIdToDataSetUrl(t)}return e}(),t}(m),f=function(e){function t(n){(0,r.default)(this,t);var i=(0,a.default)(this,e.call(this,n,{statsItemsLimit:20}));return i.imageDataMap=i._convertImageIdsArrayToMap(n.imageIds),i.framesStatus=i._createArray(n.imageIds.length,!1),i.loadedCount=0,i._checkCachedData(),i}return(0,o.default)(t,e),t.prototype._convertImageIdsArrayToMap=function(){function e(e){for(var t=new v,n=0;n<e.length;n++)t.set(e[n],{index:n,loaded:!1});return t}return e}(),t.prototype._createArray=function(){function e(e,t){for(var n=[],i=0;i<e;i++)n[i]=t;return n}return e}(),t.prototype._checkCachedData=function(){function e(){}return e}(),t.prototype._getImageLoadedEventName=function(){function e(){return"cornerstoneimageloaded."+this.id}return e}(),t.prototype._getImageCachePromiseRemoveEventName=function(){function e(){return"cornerstoneimagecachepromiseremoved."+this.id}return e}(),t.prototype.startListening=function(){function e(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName(),n=this._imageLoadedEventHandle.bind(this),i=this._imageCachePromiseRemovedEventHandle.bind(this);this.stopListening(),l.events.addEventListener(e,n),l.events.addEventListener(t,i)}return e}(),t.prototype.stopListening=function(){function e(){var e=this._getImageLoadedEventName(),t=this._getImageCachePromiseRemoveEventName();l.events.removeEventListener(e),l.events.removeEventListener(t)}return e}(),t.prototype._updateFrameStatus=function(){function e(e,t){var n=this.imageDataMap.get(e);n&&n.loaded!==t&&(t&&this._addStatsData(1),n.loaded=t,this.framesStatus[n.index]=t,this.loadedCount+=t?1:-1,this._updateProgress())}return e}(),t.prototype._imageLoadedEventHandle=function(){function e(e){this._updateFrameStatus(e.detail.image.imageId,!0)}return e}(),t.prototype._imageCachePromiseRemovedEventHandle=function(){function e(e){this._updateFrameStatus(e.detail.imageId,!1)}return e}(),t.prototype._updateProgress=function(){function e(){var e=this.stack.imageIds.length,t=this.loadedCount,n=e-t,i=Math.round(t/e*100),a=this._getProgressSessionId();c.set(a,{multiFrame:!0,totalFramesCount:e,loadedFramesCount:t,loadingFramesCount:n,percentComplete:i,framesPerSecond:this.stats.speed,framesStatus:this.framesStatus})}return e}(),t.prototype._logProgress=function(){function e(){for(var e=this.stack.imageIds.length,t=this.stack.displaySetInstanceUid,n="[",i=0;i<e;i++)n+=""+(this.framesStatus[i]?"|":".");n+="]",u.log.info(t+": "+n)}return e}(),t}(m),g=function(){function e(){(0,r.default)(this,e),this.listeners={}}return e.prototype.addStack=function(){function e(e,t){var n=e.displaySetInstanceUid;if(!this.listeners[n]){var i=this._createListener(e,t);i&&(this.listeners[n]=i)}}return e}(),e.prototype.addStudy=function(){function e(e){var t=this;e.displaySets.forEach(function(n){var i=u.viewerbase.stackManager.findOrCreateStack(e,n);t.addStack(i,{isMultiFrame:n.isMultiFrame})})}return e}(),e.prototype.addStudies=function(){function e(e){if(e&&e.length)for(var t=0;t<e.length;t++)this.addStudy(e[t])}return e}(),e.prototype.clear=function(){function e(){for(var e=Object.keys(this.listeners),t=e.length,n=0;n<t;n++){var i=e[n];this.listeners[i].destroy()}this.listeners={}}return e}(),e.prototype._createListener=function(){function e(e,t){return"wadors"!==this._getSchema(e)&&t.isMultiFrame?new p(e):new f(e)}return e}(),e.prototype._getSchema=function(){function e(e){var t=e.imageIds[0],n=t.indexOf(":");return t.substring(0,n)}return e}(),e.getInstance=function(){function t(){return e._instance||(e._instance=new e),e._instance}return t}(),e}()},"StudyMetadataSource.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({StudyMetadataSource:function(){return r}});var o=void 0;n.watch(e("./OHIFError"),{OHIFError:function(e){o=e}},0);var r=function(){function e(){(0,a.default)(this,e)}return e.prototype.getByInstanceUID=function(){function e(e){throw new o("StudyMetadataSource::getByInstanceUID is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}return e}(),e.prototype.loadStudy=function(){function e(e){throw new o("StudyMetadataSource::loadStudy is not overriden. Please, override it in a specialized class. See OHIFStudyMetadataSource for example")}return e}(),e}()},"StudyPrefetcher.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({StudyPrefetcher:function(){return g}});var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/session"),{Session:function(e){r=e}},1);var s=void 0;n.watch(e("meteor/jquery"),{$:function(e){s=e}},2);var c=void 0;n.watch(e("meteor/underscore"),{_:function(e){c=e}},3);var l=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},4);var m=void 0;n.watch(e("./OHIFError"),{OHIFError:function(e){m=e}},5);var p=void 0;n.watch(e("../StackManager.js"),{StackManager:function(e){p=e}},6);var f=void 0;n.watch(e("../getImageId.js"),{getImageId:function(e){f=e}},7);var g=function(){function e(t){(0,a.default)(this,e),this.studies=t||[],this.prefetchDisplaySetsTimeout=300,this.lastActiveViewportElement=null,this.cacheFullHandlerBound=c.bind(this.cacheFullHandler,this),u.events.addEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandlerBound)}return e.prototype.destroy=function(){function e(){this.stopPrefetching(),u.events.removeEventListener("cornerstoneimagecachefull.StudyPrefetcher",this.cacheFullHandlerBound)}return e}(),e.getInstance=function(){function t(){return e.instance||(e.instance=new e),e.instance}return t}(),e.prototype.setStudies=function(){function e(e){this.stopPrefetching(),this.studies=e}return e}(),e.prototype.prefetch=function(){function e(){this.studies&&this.studies.length&&(this.stopPrefetching(),this.prefetchActiveViewport(),this.prefetchDisplaySets())}return e}(),e.prototype.stopPrefetching=function(){function e(){this.disableViewportPrefetch(),d.requestPoolManager.clearRequestStack("prefetch")}return e}(),e.prototype.prefetchActiveViewport=function(){function e(){var e=l.viewerbase.viewportUtils.getActiveViewportElement();this.enablePrefetchOnElement(e),this.attachActiveViewportListeners(e)}return e}(),e.prototype.disableViewportPrefetch=function(){function e(){s(".imageViewerViewport").each(function(){s(this).find("canvas").length&&d.stackPrefetch.disable(this)})}return e}(),e.prototype.hasStack=function(){function e(e){var t=d.getToolState(e,"stack");return t&&t.data.length&&t.data[0].imageIds.length>1}return e}(),e.prototype.enablePrefetchOnElement=function(){function e(e){if(s(e).find("canvas").length&&this.hasStack(e)){var t=r.get("activeViewport"),n=l.viewer.data.loadedSeriesData[t].displaySetInstanceUid;if(!p.findStack(n))throw new m("Requested stack "+n+" was not created");d.stackPrefetch.enable(e)}}return e}(),e.prototype.attachActiveViewportListeners=function(){function t(t){function n(){e.prefetchDisplaySetsAsync()}this.lastActiveViewportElement&&this.lastActiveViewportElement.removeEventListener("cornerstonenewimage.StudyPrefetcher",n),t.removeEventListener("cornerstonenewimage.StudyPrefetcher",n),this.hasStack(t)&&t.addEventListener("cornerstonenewimage.StudyPrefetcher",n),this.lastActiveViewportElement=t}return t}(),e.prototype.prefetchDisplaySetsAsync=function(){function e(e){var t=this;e=e||this.prefetchDisplaySetsTimeout,clearTimeout(this.prefetchDisplaySetsHandler),this.prefetchDisplaySetsHandler=setTimeout(function(){t.prefetchDisplaySets()},e)}return e}(),e.prototype.prefetchDisplaySets=function(){function e(){var e=o.settings.public.prefetch,t=this.getDisplaySetsToPrefetch(e),n=this.getImageIdsFromDisplaySets(t);this.prefetchImageIds(n)}return e}(),e.prototype.prefetchImageIds=function(){function e(e){var t=this.filterCachedImageIds(e),n=d.requestPoolManager,i="prefetch",a=!1,o=function(){};t.forEach(function(e){n.addRequest({},e,"prefetch",!1,o,o)}),n.startGrabbing()}return e}(),e.prototype.getActiveViewportImage=function(){function e(){var e=l.viewerbase.viewportUtils.getActiveViewportElement();if(e)return u.getEnabledElement(e).image}return e}(),e.prototype.getStudy=function(){function e(e){var t=u.metaData.get("study",e.imageId);return l.viewer.Studies.find(function(e){return e.studyInstanceUid===t.studyInstanceUid})}return e}(),e.prototype.getSeries=function(){function e(e,t){var n=u.metaData.get("series",t.imageId);return l.viewerbase.getStudyMetadata(e).getSeriesByUID(n.seriesInstanceUid)}return e}(),e.prototype.getInstance=function(){function e(e,t){var n=u.metaData.get("instance",t.imageId);return e.getInstanceByUID(n.sopInstanceUid)}return e}(),e.prototype.getActiveDisplaySet=function(){function e(e,t){return c.find(e,function(e){return c.some(e.images,function(e){return e.sopInstanceUid===t.sopInstanceUid})})}return e}(),e.prototype.getDisplaySetsToPrefetch=function(){function e(e){var t=this.getActiveViewportImage();if(!t||!e||!e.displaySetCount)return[];var n=this.getStudy(t),i=this.getSeries(n,t),a=this.getInstance(i,t),o=n.displaySets,r=this.getActiveDisplaySet(o,a),s={topdown:"getFirstDisplaySets",downward:"getNextDisplaySets",closest:"getClosestDisplaySets"},c=e.order,u=this[s[c]];return u?u.call(this,o,r,e.displaySetCount):(c&&l.log.warn("Invalid prefetch order configuration ("+c+")"),[])}return e}(),e.prototype.getFirstDisplaySets=function(){function e(e,t,n){for(var i=e.length,a=[],o=0;o<i&&n;o++){var r=e[o];r!==t&&(a.push(r),n--)}return a}return e}(),e.prototype.getNextDisplaySets=function(){function e(e,t,n){var i=e.indexOf(t)+1,a=Math.min(i+n,e.length);return e.slice(i,a)}return e}(),e.prototype.getClosestDisplaySets=function(){function e(e,t,n){for(var i=e.indexOf(t),a=e.length,o=[],r=i-1,s=i+1;(r>=0||s<a)&&n;)r>=0&&(o.push(e[r]),n--,r--),s<a&&n&&(o.push(e[s]),n--,s++);return o}return e}(),e.prototype.getImageIdsFromDisplaySets=function(){function e(e){var t=this,n=[];return e.forEach(function(e){n=n.concat(t.getImageIdsFromDisplaySet(e))}),n}return e}(),e.prototype.getImageIdsFromDisplaySet=function(){function e(e){var t=[];return e.images.forEach(function(e){var n=e.numFrames;if(n>1)for(var i=0;i<n;i++){var a=f(e,i);t.push(a)}else{var o=f(e);t.push(o)}}),t}return e}(),e.prototype.filterCachedImageIds=function(){function e(e){var t=this;return c.filter(e,function(e){return!t.isImageCached(e)})}return e}(),e.prototype.isImageCached=function(){function e(e){var t=u.imageCache.imageCache[e];return t&&t.sizeInBytes}return e}(),e.prototype.cacheFullHandler=function(){function e(){l.log.warn("Cache full"),this.stopPrefetching()}return e}(),e}()},"TypeSafeCollection.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return e instanceof Object||"object"===(void 0===e?"undefined":(0,d.default)(e))&&null!==e}function o(e){return"string"==typeof e}function r(e){return"function"==typeof e}function s(e,t){var n=void 0;if(a(e)&&o(t)){var i=t.split(x),r=i.length;if(r>0){var c=i[0],u=r>1?i.slice(1).join(x):null;n=e[c],null!==u&&(n=s(n,u))}}return n}function c(e,t){var n=!1;for(var i in g.sanitizeForInObject(e))if(I.call(e,i)){if(e[i]!==s(t,i)){n=!1;break}!0!==n&&(n=!0)}return n}function u(e){var t=!0;if(e instanceof Array&&e.length>0)for(var n=e.length-1;n>=0;n--){var i=e[n];if(i instanceof Array){var a=i[0],r=i[1];if(o(a)&&(r===h||r===v))continue}t=!1;break}return t}function l(e,t){if(!(e instanceof Array&&u(t)))throw new Error("Invalid Arguments");var n=t.length;e.sort(function(){function e(e,i){for(var a=0;a<n;){var o=t[a],r=o[0],c=o[1]===v?-1:1,u=s(e,r),l=s(i,r);if(u<l)return-1*c;if(u>l)return 1*c;if(++a>=n)return 0}}return e}())}var d=i(e("babel-runtime/helpers/typeof")),m=i(e("babel-runtime/helpers/classCallCheck"));n.export({TypeSafeCollection:function(){return w}});var p=void 0;n.watch(e("meteor/random"),{Random:function(e){p=e}},0);var f=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){f=e}},1);var x=".",h="asc",v="desc",S=0,y=2147483647,w=function(){function e(){(0,m.default)(this,e),this._operationCount=new f(S),this._elementList=[],this._handlers=Object.create(null)}return e.prototype._invalidate=function(){function e(){var e=this._operationCount.get();this._operationCount.set(e<y?e+1:S)}return e}(),e.prototype._elements=function(){function e(e){return!0===e||this._operationCount.get(),this._elementList}return e}(),e.prototype._elementWithPayload=function(){function e(e,t){return this._elements(t).find(function(t){return t.payload===e})}return e}(),e.prototype._elementWithId=function(){function e(e,t){return this._elements(t).find(function(t){return t.id===e})}return e}(),e.prototype._trigger=function(){function e(e,t){var n=this._handlers;if(e in n){if(!((n=n[e])instanceof Array))return;for(var i=0,a=n.length;i<a;++i){var o=n[i];r(o)&&o.call(null,t)}}}return e}(),e.prototype.onInsert=function(){function e(e){if(r(e)){var t=this._handlers.insert;t instanceof Array||(t=[],this._handlers.insert=t),t.push(e)}}return e}(),e.prototype.updateById=function(){function e(e,t){var n=!1,i=this._elementWithPayload(t,!0);return i?i.id===e&&(n=!0,this._invalidate()):(i=this._elementWithId(e,!0))&&(i.payload=t,n=!0,this._invalidate()),n}return e}(),e.prototype.update=function(){function e(e){var t=!1;return this._elementWithPayload(e,!0)&&(t=!0,this._invalidate()),t}return e}(),e.prototype.insert=function(){function e(e){var t=null;return this._elementWithPayload(e,!0)||(t=p.id(),this._elements(!0).push({id:t,payload:e}),this._invalidate(),this._trigger("insert",{id:t,data:e})),t}return e}(),e.prototype.removeAll=function(){function e(){for(var e=this._elements(!0),t=e.length,n=t-1;n>=0;n--){var i=e[n];delete i.id,delete i.payload,e[n]=null}e.splice(0,t),this._invalidate()}return e}(),e.prototype.remove=function(){function e(e){var t=this.findAllEntriesBy(e),n=t.length,i=[];if(n>0){for(var a=this._elements(!0),o=n-1;o>=0;o--){var r=t[o];a.splice(r[2],1),i.push(r[0])}this._invalidate()}return i}return e}(),e.prototype.getElementId=function(){function e(e){var t=this._elementWithPayload(e);return t&&t.id}return e}(),e.prototype.findById=function(){function e(e){var t=this._elementWithId(e);return t&&t.payload}return e}(),e.prototype.indexOfElement=function(){function e(e){return this._elements().indexOf(this._elementWithPayload(e,!0))}return e}(),e.prototype.indexOfId=function(){function e(e){return this._elements().indexOf(this._elementWithId(e,!0))}return e}(),e.prototype.getElementByIndex=function(){function e(e){var t=this._elements()[e>=0?e:-1];return t&&t.payload}return e}(),e.prototype.find=function(){function e(e){var t=this,n=void 0;return r(e)&&(n=this._elements().find(function(n,i){return e.call(t,n.payload,n.id,i)})),n&&n.payload}return e}(),e.prototype.findBy=function(){function e(e,t){var n=void 0;if(a(t)){var i=this.all(t);i.length>0&&(n=a(e)?i.find(function(t){return c(e,t)}):i[0])}else a(e)&&(n=this._elements().find(function(t){return c(e,t.payload)}))&&(n=n.payload);return n}return e}(),e.prototype.findAllEntriesBy=function(){function e(e){var t=[];return a(e)&&this._elements().forEach(function(n,i){c(e,n.payload)&&t.push([n.payload,n.id,i])}),t}return e}(),e.prototype.findAllBy=function(){function e(e,t){var n=this.findAllEntriesBy(e).map(function(e){return e[0]});return a(t)&&"sort"in t&&l(n,t.sort),n}return e}(),e.prototype.forEach=function(){function e(e){var t=this;r(e)&&this._elements().forEach(function(n,i){e.call(t,n.payload,n.id,i)})}return e}(),e.prototype.count=function(){function e(){return this._elements().length}return e}(),e.prototype.all=function(){function e(e){var t=this._elements().map(function(e){return e.payload});return a(e)&&"sort"in e&&l(t,e.sort),t}return e}(),e}(),I=Object.prototype.hasOwnProperty},metadata:{"InstanceMetadata.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/typeof")),o=i(e("babel-runtime/helpers/classCallCheck")),r=i(e("babel-runtime/helpers/possibleConstructorReturn")),s=i(e("babel-runtime/helpers/inherits"));n.export({InstanceMetadata:function(){return g}});var c=void 0;n.watch(e("./Metadata"),{Metadata:function(e){c=e}},0);var u=void 0;n.watch(e("../OHIFError"),{OHIFError:function(e){u=e}},1);var l="undefined",d="number",m="string",p="x0020000d",f="x0020000e",g=function(e){function t(n,i){(0,o.default)(this,t);var a=(0,r.default)(this,e.call(this,n,i));return Object.defineProperties(a,{_sopInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_imageId:{configurable:!0,enumerable:!1,writable:!0,value:null}}),a._definePublicProperties(),a}return(0,s.default)(t,e),t.prototype._definePublicProperties=function(){function e(){Object.defineProperty(this,"sopInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSOPInstanceUID()}})}return e}(),t.prototype.getStudyInstanceUID=function(){function e(){return this.getTagValue(p,null)}return e}(),t.prototype.getSeriesInstanceUID=function(){function e(){return this.getTagValue(f,null)}return e}(),t.prototype.getSOPInstanceUID=function(){function e(){return this._sopInstanceUID}return e}(),t.prototype.getStringValue=function(){function e(e,n,i){var o=this.getTagValue(e,i);return(void 0===o?"undefined":(0,a.default)(o))!==m&&(void 0===o?"undefined":(0,a.default)(o))!==l&&(o=o.toString()),t.getIndexedValue(o,n,i)}return e}(),t.prototype.getFloatValue=function(){function e(e,n,i){var o=this.getTagValue(e,i);return(o=t.getIndexedValue(o,n,i))instanceof Array?(o.forEach(function(e,t){o[t]=parseFloat(e)}),o):(void 0===o?"undefined":(0,a.default)(o))===m?parseFloat(o):o}return e}(),t.prototype.getIntValue=function(){function e(e,n,i){var o=this.getTagValue(e,i);return(o=t.getIndexedValue(o,n,i))instanceof Array?(o.forEach(function(e,t){o[t]=parseFloat(e)}),o):(void 0===o?"undefined":(0,a.default)(o))===m?parseInt(o):o}return e}(),t.prototype.getRawValue=function(){function e(e,t){return this.getTagValue(e,t)}return e}(),t.prototype.getTagValue=function(){function e(e,t){throw new u("InstanceMetadata::getTagValue is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}return e}(),t.prototype.equals=function(){function e(e){var n=this;return e===n||e instanceof t&&e.getSOPInstanceUID()===n.getSOPInstanceUID()}return e}(),t.prototype.tagExists=function(){function e(e){throw new u("InstanceMetadata::tagExists is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}return e}(),t.prototype.getImageId=function(){function e(e){throw new u("InstanceMetadata::getImageId is not overriden. Please, override it in a specialized class. See OHIFInstanceMetadata for example")}return e}(),t.getIndexedValue=function(){function e(e,t,n){var i=n;if((void 0===e?"undefined":(0,a.default)(e))===m&&(i=e,-1!==e.indexOf("\\"))){var o=e.split("\\");if(c.isValidIndex(t)){var r=o[t];i=(void 0===r?"undefined":(0,a.default)(r))!==m?n:r}else i=o}return i}return e}(),t}(c)},"Metadata.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/typeof")),o=i(e("babel-runtime/helpers/classCallCheck"));n.export({Metadata:function(){return l}});var r="string",s="number",c="function",u="object",l=function(){function e(t,n){(0,o.default)(this,e),Object.defineProperty(this,"_data",{configurable:!1,enumerable:!1,writable:!1,value:t}),Object.defineProperty(this,"_uid",{configurable:!1,enumerable:!1,writable:!1,value:n}),Object.defineProperty(this,"_custom",{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)})}return e.prototype.getData=function(){function e(){return this._data}return e}(),e.prototype.getDataProperty=function(){function e(e){var t=void 0,n=this._data;return(n instanceof Object||(void 0===n?"undefined":(0,a.default)(n))===u&&null!==n)&&(t=n[e]),t}return e}(),e.prototype.getObjectID=function(){function e(){return this._uid}return e}(),e.prototype.setCustomAttribute=function(){function e(e,t){this._custom[e]=t}return e}(),e.prototype.getCustomAttribute=function(){function e(e){return this._custom[e]}return e}(),e.prototype.customAttributeExists=function(){function e(e){return e in this._custom}return e}(),e.prototype.setCustomAttributes=function(){function e(e){var t=Object.prototype.hasOwnProperty,n=this._custom;for(var i in g.sanitizeForInObject(e))t.call(e,i)&&(n[i]=e[i])}return e}(),e.isValidUID=function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===r&&e.length>0}return e}(),e.isValidIndex=function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===s&&e>=0&&(0|e)===e}return e}(),e.isValidCallback=function(){function e(e){return(void 0===e?"undefined":(0,a.default)(e))===c}return e}(),e}()},"SeriesMetadata.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/possibleConstructorReturn")),r=i(e("babel-runtime/helpers/inherits"));n.export({SeriesMetadata:function(){return u}});var s=void 0;n.watch(e("./Metadata"),{Metadata:function(e){s=e}},0);var c=void 0;n.watch(e("./InstanceMetadata"),{InstanceMetadata:function(e){c=e}},1);var u=function(e){function t(n,i){(0,a.default)(this,t);var r=(0,o.default)(this,e.call(this,n,i));return Object.defineProperties(r,{_seriesInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_instances:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}return(0,r.default)(t,e),t.prototype._definePublicProperties=function(){function e(){Object.defineProperty(this,"seriesInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getSeriesInstanceUID()}})}return e}(),t.prototype.getSeriesInstanceUID=function(){function e(){return this._seriesInstanceUID}return e}(),t.prototype.addInstance=function(){function e(e){var t=!1;return e instanceof c&&void 0===this.getInstanceByUID(e.getSOPInstanceUID())&&(this._instances.push(e),t=!0),t}return e}(),t.prototype.getFirstInstance=function(){function e(){var e=this._firstInstance;if(!(e instanceof c)){e=null;var t=this.getInstanceByIndex(0);t instanceof c&&(this._firstInstance=t,e=t)}return e}return e}(),t.prototype.getInstanceByIndex=function(){function e(e){var t=void 0;return s.isValidIndex(e)&&(t=this._instances[e]),t}return e}(),t.prototype.getInstanceByUID=function(){function e(e){var t=void 0;return s.isValidUID(e)&&(t=this._instances.find(function(t){return t.getSOPInstanceUID()===e})),t}return e}(),t.prototype.getInstanceCount=function(){function e(){return this._instances.length}return e}(),t.prototype.forEachInstance=function(){function e(e){s.isValidCallback(e)&&this._instances.forEach(function(t,n){e.call(null,t,n)})}return e}(),t.prototype.indexOfInstance=function(){function e(e){return this._instances.indexOf(e)}return e}(),t.prototype.findInstance=function(){function e(e){if(s.isValidCallback(e))return this._instances.find(function(t,n){return e.call(null,t,n)})}return e}(),t.prototype.equals=function(){function e(e){var n=this;return e===n||e instanceof t&&e.getSeriesInstanceUID()===n.getSeriesInstanceUID()}return e}(),t}(s)},"StudyMetadata.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/possibleConstructorReturn")),r=i(e("babel-runtime/helpers/inherits"));n.export({StudyMetadata:function(){return m}});var s=void 0;n.watch(e("./Metadata"),{Metadata:function(e){s=e}},0);var c=void 0;n.watch(e("./SeriesMetadata"),{SeriesMetadata:function(e){c=e}},1);var u=void 0;n.watch(e("./InstanceMetadata"),{InstanceMetadata:function(e){u=e}},2);var l=void 0;n.watch(e("../ImageSet"),{ImageSet:function(e){l=e}},3);var d=void 0;n.watch(e("../OHIFError"),{OHIFError:function(e){d=e}},4);var m=function(e){function t(n,i){(0,a.default)(this,t);var r=(0,o.default)(this,e.call(this,n,i));return Object.defineProperties(r,{_studyInstanceUID:{configurable:!0,enumerable:!1,writable:!0,value:null},_series:{configurable:!1,enumerable:!1,writable:!1,value:[]},_displaySets:{configurable:!1,enumerable:!1,writable:!1,value:[]},_firstSeries:{configurable:!1,enumerable:!1,writable:!0,value:null},_firstInstance:{configurable:!1,enumerable:!1,writable:!0,value:null}}),r._definePublicProperties(),r}return(0,r.default)(t,e),t.prototype._definePublicProperties=function(){function e(){Object.defineProperty(this,"studyInstanceUID",{configurable:!1,enumerable:!1,get:function(){return this.getStudyInstanceUID()}})}return e}(),t.prototype.getDisplaySets=function(){function e(){return this._displaySets.slice()}return e}(),t.prototype.setDisplaySets=function(){function e(e){var t=this;e.forEach(function(e){return t.addDisplaySet(e)})}return e}(),t.prototype.addDisplaySet=function(){function e(e){return e instanceof l&&(this._displaySets.push(e),!0)}return e}(),t.prototype.forEachDisplaySet=function(){function e(e){s.isValidCallback(e)&&this._displaySets.forEach(function(t,n){e.call(null,t,n)})}return e}(),t.prototype.findDisplaySet=function(){function e(e){if(s.isValidCallback(e))return this._displaySets.find(function(t,n){return e.call(null,t,n)})}return e}(),t.prototype.getDisplaySetCount=function(){function e(){return this._displaySets.length}return e}(),t.prototype.getStudyInstanceUID=function(){function e(){return this._studyInstanceUID}return e}(),t.prototype.getSeries=function(){function e(){return this._series.slice()}return e}(),t.prototype.addSeries=function(){function e(e){var t=!1;return e instanceof c&&void 0===this.getSeriesByUID(e.getSeriesInstanceUID())&&(this._series.push(e),t=!0),t}return e}(),t.prototype.getSeriesByIndex=function(){function e(e){var t=void 0;return s.isValidIndex(e)&&(t=this._series[e]),t}return e}(),t.prototype.getSeriesByUID=function(){function e(e){var t=void 0;return s.isValidUID(e)&&(t=this._series.find(function(t){return t.getSeriesInstanceUID()===e})),t}return e}(),t.prototype.getSeriesCount=function(){function e(){return this._series.length}return e}(),t.prototype.getInstanceCount=function(){function e(){return this._series.reduce(function(e,t){return e+t.getInstanceCount()},0)}return e}(),t.prototype.forEachSeries=function(){function e(e){s.isValidCallback(e)&&this._series.forEach(function(t,n){e.call(null,t,n)})}return e}(),t.prototype.indexOfSeries=function(){function e(e){return this._series.indexOf(e)}return e}(),t.prototype.sortSeriesByDisplaySets=function(){function e(){var e=this,t={};this.forEachDisplaySet(function(e,n){if(!(e instanceof l))throw new d("StudyMetadata::sortSeriesByDisplaySets display set at index "+n+" is not an instance of ImageSet");void 0===t[e.seriesInstanceUid]&&(t[e.seriesInstanceUid]=n)}),this.getSeries().forEach(function(n,i){if(!(n instanceof c))throw new d("StudyMetadata::sortSeriesByDisplaySets series at index "+i+" is not an instance of SeriesMetadata");var a=t[n.getSeriesInstanceUID()];e._series[a]=n})}return e}(),t.prototype.equals=function(){function e(e){var n=this;return e===n||e instanceof t&&e.getStudyInstanceUID()===n.getStudyInstanceUID()}return e}(),t.prototype.getFirstSeries=function(){function e(){var e=this._firstSeries;if(!(e instanceof c)){e=null;var t=this.getSeriesByIndex(0);t instanceof c&&(this._firstSeries=t,e=t)}return e}return e}(),t.prototype.getFirstInstance=function(){function e(){var e=this._firstInstance;if(!(e instanceof u)){e=null;var t=this.getFirstSeries();if(t instanceof c){var n=t.getFirstInstance();n instanceof u&&(this._firstInstance=n,e=n)}}return e}return e}(),t.prototype.findSeriesAndInstanceByInstance=function(){function e(e){var t=void 0;if(s.isValidCallback(e)){var n=void 0,i=this._series.find(function(t){return(n=t.findInstance(e))instanceof u});i instanceof c&&(t={series:i,instance:n})}return t||{}}return e}(),t.prototype.findSeriesByInstance=function(){function e(e){return this.findSeriesAndInstanceByInstance(e).series}return e}(),t.prototype.findInstance=function(){function e(e){return this.findSeriesAndInstanceByInstance(e).instance}return e}(),t}(s)},"StudySummary.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck")),o=i(e("babel-runtime/helpers/possibleConstructorReturn")),r=i(e("babel-runtime/helpers/inherits"));n.export({StudySummary:function(){return d}});var s=void 0;n.watch(e("./Metadata"),{Metadata:function(e){s=e}},0);var c=void 0;n.watch(e("../OHIFError"),{OHIFError:function(e){c=e}},1);var u=void 0;n.watch(e("../../DICOMTagDescriptions"),{DICOMTagDescriptions:function(e){u=e}},2);var l="x0020000d",d=function(e){function t(n,i,r){(0,a.default)(this,t);var s=Object.create(null),c=(0,o.default)(this,e.call(this,s,r));return void 0!==n&&c.addTags(n),void 0!==i&&c.setCustomAttributes(i),c}return(0,r.default)(t,e),t.prototype.getStudyInstanceUID=function(){function e(){return this.getTagValue(l)||null}return e}(),t.prototype.addTags=function(){function e(e){var t=Object.prototype.hasOwnProperty,n=this._data;for(var i in g.sanitizeForInObject(e))if(t.call(e,i)){var a=u.find(i);a?n[a.tag]=e[i]:n[i]=e[i]}}return e}(),t.prototype.tagExists=function(){function e(e){var t=this._data,n=u.find(e);return n?n.tag in t:e in t}return e}(),t.prototype.getTagValue=function(){function e(e){var t=this._data,n=u.find(e);return n?t[n.tag]:t[e]}return e}(),t}(s)},"WadoRsMetaDataBuilder.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/classCallCheck"));n.export({WadoRsMetaDataBuilder:function(){return o}});var o=function(){function e(){(0,a.default)(this,e),this.tags={}}return e.prototype.addTag=function(){function e(e,t,n){return this.tags[e]={tag:e,value:t,multi:n},this}return e}(),e.prototype.toJSON=function(){function e(){var e=this,t={};return Object.keys(this.tags).forEach(function(n){if(e.tags.hasOwnProperty(n)){var i=e.tags[n],a=!!i.multi,o=i.value;null==o||1===o.length&&null==o[0]||("string"==typeof o&&a&&(o=o.split("\\")),L.isArray(o)||(o=[o]),t[n]={Value:o})}}),t}return e}(),e}()}}},helpers:{"capitalizeFirstLetter.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0),i.registerHelper("capitalizeFirstLetter",function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)})},"formatDA.js":function(e,t,n){n.export({formatDA:function(){return o}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/momentjs:moment"),{moment:function(e){a=e}},1);var o=function(e,t,n){if(e){var i=a(e,"YYYYMMDD"),o="MMM D, YYYY";return n&&(o=t),i.format(o)}};i._getGlobalHelper("formatDA")||i.registerHelper("formatDA",o)},"formatJSDate.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/momentjs:moment"),{moment:function(e){a=e}},1),i.registerHelper("formatJSDate",function(e,t,n){if(e){var i=a(new Date(e)),o="MMM D, YYYY";return n&&(o=t),i.format(o)}})},"formatNumberPrecision.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0),i.registerHelper("formatNumberPrecision",function(e,t){if(null!=e)return parseFloat(e).toFixed(t)})},"formatPN.js":function(e,t,n){n.export({formatPN:function(){return a}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=function(e){if(e)return e.replace("^",", ")};i._getGlobalHelper("formatPN")||i.registerHelper("formatPN",a)},"formatTM.js":function(e,t,n){n.export({formatTM:function(){return o}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/momentjs:moment"),{moment:function(e){a=e}},1);var o=function(e,t){if(e){var n=a(e,"HHmmss.SSS"),i="HH:mm:ss";return t&&t.format&&(i=t.format),n.format(i)}};i._getGlobalHelper("formatTM")||i.registerHelper("formatTM",o)},"getUsername.js":function(e,t,n){var i=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){a=e}},1),a.registerHelper("getUsername",function(e){var t=i.users.findOne({userId:e});if(t&&t.name)return t.name})},"ifTypeIs.js":function(e,t,n){function i(e){return e&&e.__esModule?e:{default:e}}var a=i(e("babel-runtime/helpers/typeof")),o=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){o=e}},0),o.registerHelper("ifTypeIs",function(e,t,n){return(void 0===e?"undefined":(0,a.default)(e))===t?n:""})},"inc.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0),i.registerHelper("inc",function(e){return parseInt(e)+1})},"index.js":function(e,t,n){n.export({helpers:function(){return s}});var i=void 0;n.watch(e("./isTouchDevice"),{isTouchDevice:function(e){i=e}},0);var a=void 0;n.watch(e("./formatPN"),{formatPN:function(e){a=e}},1);var o=void 0;n.watch(e("./formatDA"),{formatDA:function(e){o=e}},2);var r=void 0;n.watch(e("./formatTM"),{formatTM:function(e){r=e}},3),n.watch(e("./formatJSDate")),n.watch(e("./jsDateFromNow")),n.watch(e("./formatNumberPrecision")),n.watch(e("./inc")),n.watch(e("./isDisplaySetActive")),n.watch(e("./getUsername")),n.watch(e("./capitalizeFirstLetter")),n.watch(e("./objectToPairs")),n.watch(e("./objectEach")),n.watch(e("./ifTypeIs")),n.watch(e("./prettyPrintStringify")),n.watch(e("./sorting")),n.watch(e("./studyThumbnails"));var s={isTouchDevice:i,formatPN:a,formatDA:o,formatTM:r}},"isDisplaySetActive.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/session"),{Session:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/jquery"),{$:function(e){o=e}},2);var r=void 0;n.watch(e("meteor/underscore"),{_:function(e){r=e}},3);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4),n.watch(e("meteor/ohif:viewerbase")),i.registerHelper("isDisplaySetActive",function(e,t){if(a.get("LayoutManagerUpdated"),s.viewerbase.layoutManager){var n=!1;if(r.isUndefined(t))for(var i=s.viewerbase.layoutManager.getNumberOfViewports(),o=s.viewerbase.layoutManager.viewportData,c=0;c<i;c++){var u=o[c];if(u&&u.displaySetInstanceUid===e){n=!0;break}}else{var l=s.viewerbase.layoutManager.viewportData[t];l&&l.displaySetInstanceUid===e&&(n=!0)}return n}})},"isTouchDevice.js":function(e,t,n){n.export({isTouchDevice:function(){return a}});var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0};i.registerHelper("isTouchDevice",a)},"jsDateFromNow.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/session"),{Session:function(e){a=e}},1);var o=void 0;n.watch(e("meteor/momentjs:moment"),{moment:function(e){o=e}},2),i.registerHelper("jsDateFromNow",function(e,t,n){if(e)return a.get("timeAgoVariable"),o(new Date(e)).fromNow()})},"objectEach.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},1),i.registerHelper("objectEach",function(e){return a.map(e,function(e,t){return a.extend({key:t},e)})})},"objectToPairs.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},1),i.registerHelper("objectToPairs",function(e){return a.map(e,function(e,t){return{key:t,value:e}})})},"prettyPrintStringify.js":function(e,t,n){var i=void 0;n.watch(e("meteor/blaze"),{Blaze:function(e){i=e}},0),i.registerHelper("prettyPrintStringify",function(e){if(e){var t=JSON.stringify(e,null,2);return t=t.replace(/['"]+/g,""),t=t.replace("{",""),t=t.replace("}",""),t=t.replace(",","\n")}})},"sorting.js":function(e,t,n){function i(e,t){t=t.split(".");for(var n=0;n<t.length;n++){if(!e||!o.has(e,t[n]))return;e=e[t[n]]}return e}var a=void 0;n.watch(e("meteor/templating"),{Template:function(e){a=e}},0);var o=void 0;n.watch(e("meteor/underscore"),{_:function(e){o=e}},1),a.registerHelper("sort",function(e,t,n){if(!t)return e;var a=o.groupBy(e,function(e){if(t){var n=i(e,t);if(n)return n}return e}),r=o.sortBy(a,function(e){if(t){var n=i(e[0],t);if(n)return n}return e});return"desc"===n?o.flatten(r.reverse(),!0):o.flatten(r,!0)})},"studyThumbnails.js":function(e,t,n){var i=void 0;n.watch(e("meteor/templating"),{Template:function(e){i=e}},0);var a=void 0;n.watch(e("meteor/underscore"),{_:function(e){a=e}},1),i.registerHelper("studyThumbnails",function(e){if(e){var t=e.displaySets,n=[];return a.each(t,function(e,t){n.push({thumbnailIndex:t,stack:e})}),n}})}}}},"main.js":function(e,t,n){var i=n;i.export({OHIF:function(){return a},Viewerbase:function(){return o}});var a=void 0,o=void 0;i.watch(e("./namespace.js"),{OHIF:function(e){a=e},Viewerbase:function(e){o=e}},0),i.watch(e("./client/"))},"namespace.js":function(e,t,n){n.export({OHIF:function(){return i},Viewerbase:function(){return a}});var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var a={};i.viewerbase=a}}}}},{extensions:[".js",".json",".styl",".html"]}),U=function(){function e(e){for(;e;){if("DIALOG"==e.nodeName)return e;e=e.parentElement}return null}var t=window.CustomEvent;t&&"object"!=typeof t||((t=function e(t,n){n=n||{};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,!!n.bubbles,!!n.cancelable,n.detail||null),i}).prototype=window.Event.prototype);var n={};n.reposition=function(e){var t=(document.body.scrollTop||document.documentElement.scrollTop)+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(0,t)+"px",e.dialogPolyfillInfo.isTopOverridden=!0},n.inNodeList=function(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return!0;return!1},n.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var i=document.styleSheets[t],a=null;try{a=i.cssRules}catch(e){}if(a)for(var o=0;o<a.length;++o){var r=a[o],s=null;try{s=document.querySelectorAll(r.selectorText)}catch(e){}if(s&&n.inNodeList(s,e)){var c=r.style.getPropertyValue("top"),u=r.style.getPropertyValue("bottom");if(c&&"auto"!=c||u&&"auto"!=u)return!0}}}return!1},n.needsCentering=function(e){return"absolute"==window.getComputedStyle(e).position&&(!("auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom)&&!n.isInlinePositionSetByStylesheet(e))},n.showDialog=function(e){if(this.open)throw"InvalidStateError: showDialog called on open dialog";if(this.open=!0,this.setAttribute("open","open"),e){var t=null,i=null,a=function(e){if(e.children)for(var n=0;n<e.children.length;n++){var o=e.children[n];if(null!==t||o.disabled||"BUTTON"!=o.nodeName&&"INPUT"!=o.nodeName&&"KEYGEN"!=o.nodeName&&"SELECT"!=o.nodeName&&"TEXTAREA"!=o.nodeName||(t=o),o.autofocus)return void(i=o);if(a(o),null!==i)return}};a(this),null!==i?i.focus():null!==t&&t.focus()}n.needsCentering(this)&&n.reposition(this),e&&(this.dialogPolyfillInfo.modal=!0,n.dm.pushDialog(this));try{null!==i?i.focus():null!==t&&t.focus()}catch(e){}this.style.zoom=1},n.close=function(e){if(!this.open&&!window.HTMLDialogElement)throw"InvalidStateError: close called on closed dialog";this.open=!1,this.removeAttribute("open"),void 0!==e&&(this.returnValue=e),this.dialogPolyfillInfo.isTopOverridden&&(this.style.top="auto"),this.dialogPolyfillInfo.modal&&n.dm.removeDialog(this);var t;return document.createEvent?(t=document.createEvent("HTMLEvents")).initEvent("close",!0,!0):t=new Event("close"),this.dispatchEvent(t),this.returnValue},n.registerDialog=function(e){e.show,e.show=n.showDialog.bind(e,!1),e.showModal=n.showDialog.bind(e,!0),e.close=n.close.bind(e),e.dialogPolyfillInfo={},e.open=!1};var i=1e5,a=1e5;return n.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.style.width="100%",this.overlay.style.height="100%",this.overlay.style.position="fixed",this.overlay.style.left="0px",this.overlay.style.top="0px",this.overlay.style.backgroundColor="rgba(0,0,0,0.0)",this.focusPageLast=this.createFocusable(),this.overlay.appendChild(this.focusPageLast),this.overlay.addEventListener("click",function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),document.body.dispatchEvent(t)}),document.addEventListener("submit",function(t){var n=t.target.getAttribute("method");if("dialog"==(n=n?n.toLowerCase():"")){t.preventDefault();var i=e(t.target);if(i){var a;[document.activeElement,t.explicitOriginalTarget].some(function(e){if(e&&"INPUT"==e.nodeName&&e.form==t.target)return a=e.value,!0}),i.close(a)}}},!0)},n.DialogManager.prototype.createFocusable=function(e){var t=document.createElement("span");return t.tabIndex=e||0,t.style.opacity=0,t.style.position="static",t},n.DialogManager.prototype.blockDocument=function(){document.body.contains(this.overlay)||(document.body.appendChild(this.overlay),void 0===this.needsDocumentElementFocus&&(document.documentElement.focus(),this.needsDocumentElementFocus=document.activeElement!=document.documentElement),this.needsDocumentElementFocus&&(document.documentElement.tabIndex=1))},n.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),this.needsDocumentElementFocus&&(document.documentElement.tabIndex="")},n.DialogManager.prototype.updateStacking=function(){if(0!=this.pendingDialogStack.length){this.blockDocument();for(var e=1e5,t=0;t<this.pendingDialogStack.length;t++){t==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=e++);var n=this.pendingDialogStack[t];n.dialogPolyfillInfo.backdrop.style.zIndex=e++,n.style.zIndex=e++}}else this.unblockDocument()},n.DialogManager.prototype.handleKey=function(e){var n=this.pendingDialogStack.length;if(0!=n){var i=this.pendingDialogStack[n-1],a=i.dialogPolyfillInfo;switch(e.keyCode){case 9:var o=document.activeElement;!e.shiftKey?o==document.documentElement||o==document.body||o==a.backdrop?a.focusFirst.focus():o==a.focusLast&&a.focusFirst.focus():o==a.focusFirst?a.focusLast.focus():o==this.focusPageLast&&a.focusLast.focus();break;case 27:e.preventDefault(),e.stopPropagation();var r=new t("cancel",{bubbles:!1,cancelable:!0});i.dispatchEvent(r)&&i.close();break}}},n.DialogManager.prototype.pushDialog=function(e){if(this.pendingDialogStack.length>=1e5)throw"Too many modal dialogs";var t=document.createElement("div");t.className="backdrop";var n=function(t){var n=document.createEvent("MouseEvents");n.initMouseEvent(t.type,t.bubbles,t.cancelable,window,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),e.dispatchEvent(n)};t.addEventListener("click",n),e.parentNode.insertBefore(t,e.nextSibling),e.dialogPolyfillInfo.backdrop=t,e.dialogPolyfillInfo.clickEventListener=n,this.pendingDialogStack.push(e),this.updateStacking(),e.dialogPolyfillInfo.focusFirst=this.createFocusable(),e.dialogPolyfillInfo.focusLast=this.createFocusable(),e.appendChild(e.dialogPolyfillInfo.focusLast),e.insertBefore(e.dialogPolyfillInfo.focusFirst,e.firstChild)},n.DialogManager.prototype.removeDialog=function(e){var t=this.pendingDialogStack.indexOf(e);if(-1!=t){this.pendingDialogStack.splice(t,1);var n=e.dialogPolyfillInfo.backdrop,i=e.dialogPolyfillInfo.clickEventListener;n.removeEventListener("click",i),n.parentNode.removeChild(n),e.dialogPolyfillInfo.backdrop=null,e.dialogPolyfillInfo.clickEventListener=null,this.updateStacking(),e.removeChild(e.dialogPolyfillInfo.focusFirst),e.removeChild(e.dialogPolyfillInfo.focusLast),e.dialogPolyfillInfo.focusFirst=null,e.dialogPolyfillInfo.focusLast=null}},n.dm=new n.DialogManager,document.addEventListener("keydown",n.dm.handleKey.bind(n.dm)),n}();_("./node_modules/meteor/ohif:viewerbase/client/components/basic/layout/template.layout.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/basic/loadingText/template.loadingText.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/basic/errorText/template.errorText.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/basic/removableBackdrop/template.removableBackdrop.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/basic/aboutModal/template.aboutModal.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/basic/aboutModal/aboutModal.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/studyBrowser/template.studyBrowser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/studyBrowser/studyBrowser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/thumbnailEntry/template.thumbnailEntry.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/thumbnailEntry/thumbnailEntry.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/imageThumbnail/template.imageThumbnail.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/studyBrowser/imageThumbnail/imageThumbnail.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/imageViewerViewport/template.imageViewerViewport.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/imageViewerViewport/imageViewerViewport.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/gridLayout/template.gridLayout.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/gridLayout/gridLayout.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/loadingIndicator/template.loadingIndicator.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/loadingIndicator/loadingIndicator.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/annotationDialogs/template.annotationDialogs.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/annotationDialogs/annotationDialogs.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/viewportOrientationMarkers/template.viewportOrientationMarkers.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/viewportOverlay/template.viewportOverlay.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/viewportOverlay/viewportOverlay.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/viewerMain/template.viewerMain.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/viewerMain/viewerMain.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/toolContextMenu/toolContextMenu.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/imageControls/template.imageControls.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/imageControls/imageControls.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/layoutButton/template.layoutButton.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/layoutButton/layoutButton.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/layoutChooser/template.layoutChooser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/layoutChooser/layoutChooser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/cineDialog/template.cineDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/cineDialog/cineDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/downloadDialog/template.downloadDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/downloadDialog/downloadDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/toolbarSectionButton/template.toolbarSectionButton.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/toolbarSectionButton/toolbarSectionButton.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/toolbarSectionTools/template.toolbarSectionTools.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/toolbarSectionTools/toolbarSectionTools.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/confirmDeleteDialog/template.confirmDeleteDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/confirmDeleteDialog/confirmDeleteDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/textMarkerDialogs/template.textMarkerDialogs.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/textMarkerDialogs/textMarkerDialogs.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/seriesQuickSwitch/template.seriesQuickSwitch.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/seriesQuickSwitch/seriesQuickSwitch.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studySeriesQuickSwitch/template.studySeriesQuickSwitch.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studySeriesQuickSwitch/studySeriesQuickSwitch.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/template.studyTimepoint.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/studyTimepoint.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/template.studyTimepointBrowser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/studyTimepointBrowser.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/template.studyTimepointStudy.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/studyTimepointBrowser/studyTimepointStudy.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/windowLevelPresets/template.form.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/windowLevelPresets/form.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/syncCheckbox/template.syncCheckbox.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/syncCheckbox/syncCheckbox.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/stackSyncDialog/template.stackSyncDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/stackSyncDialog/stackSyncDialog.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/smoothCheckbox/template.smoothCheckbox.js"),_("./node_modules/meteor/ohif:viewerbase/client/components/viewer/smoothCheckbox/smoothCheckbox.js");var j=_("./node_modules/meteor/ohif:viewerbase/main.js");"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["ohif:viewerbase"]=j,{dialogPolyfill:U})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,a=Package.meteor.meteorEnv,n=Package["ohif:viewerbase"].dialogPolyfill,i=Package.modules.meteorInstall,r=Package["babel-runtime"].meteorBabelHelpers,s=Package.promise.Promise,o=Package["ecmascript-runtime-client"].Symbol,u=Package["ecmascript-runtime-client"].Map,c=Package["ecmascript-runtime-client"].Set,l=i({node_modules:{meteor:{"ohif:metadata":{"main.js":function(e,t,a){var n=a;n.export({OHIF:function(){return i},Metadata:function(){return r}});var i=void 0,r=void 0;n.watch(e("./namespace.js"),{OHIF:function(e){i=e},Metadata:function(e){r=e}},0),n.watch(e("./client/"))},"namespace.js":function(e,t,a){a.export({OHIF:function(){return n},Metadata:function(){return i}});var n=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){n=e}},0);var i={};n.metadata=i},client:{"OHIFInstanceMetadata.js":function(e,t,a){function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/possibleConstructorReturn")),s=n(e("babel-runtime/helpers/inherits"));a.export({OHIFInstanceMetadata:function(){return l}});var o=void 0;a.watch(e("meteor/ohif:viewerbase"),{Viewerbase:function(e){o=e}},0);var u=o.metadata.InstanceMetadata,c=o.DICOMTagDescriptions,l=function(e){function t(a,n,s,o){(0,i.default)(this,t);var u=(0,r.default)(this,e.call(this,a,o));return u.init(n,s),u}return(0,s.default)(t,e),t.prototype.init=function(){function e(e,t){var a=this.getData();Object.defineProperties(this,{_sopInstanceUID:{configurable:!1,enumerable:!1,writable:!1,value:a.sopInstanceUid},_study:{configurable:!1,enumerable:!1,writable:!1,value:t},_series:{configurable:!1,enumerable:!1,writable:!1,value:e},_instance:{configurable:!1,enumerable:!1,writable:!1,value:a},_cache:{configurable:!1,enumerable:!1,writable:!1,value:Object.create(null)}})}return e}(),t.prototype.getTagValue=function(){function e(e,a,n){if(e in this._cache&&!0!==n)return this._cache[e];var i=t.getPropertyName(e),r=void 0;return i in this._instance?r=this._instance[i]:i in this._series?r=this._series[i]:i in this._study&&(r=this._study[i]),void 0!==r?(this._cache[e]=r,r):a}return e}(),t.prototype.tagExists=function(){function e(e){var a=t.getPropertyName(e);return a in this._instance||a in this._series||a in this._study}return e}(),t.prototype.getImageId=function(){function e(e,t){return null===this._imageId&&(this._imageId=o.getImageId(this.getData(),e,t)),this._imageId}return e}(),t.getPropertyName=function(){function e(e){var t=void 0,a=c.find(e);return void 0!==a&&(t=(t=a.keyword.replace(/^SOP/,"sop").replace(/UID$/,"Uid").replace(/ID$/,"Id")).charAt(0).toLowerCase()+t.substr(1)),t}return e}(),t}(u)},"OHIFSeriesMetadata.js":function(e,t,a){function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/possibleConstructorReturn")),s=n(e("babel-runtime/helpers/inherits"));a.export({OHIFSeriesMetadata:function(){return c}});var o=void 0;a.watch(e("meteor/ohif:viewerbase"),{Viewerbase:function(e){o=e}},0);var u=void 0;a.watch(e("./OHIFInstanceMetadata"),{OHIFInstanceMetadata:function(e){u=e}},1);var c=function(e){function t(a,n,s){(0,i.default)(this,t);var o=(0,r.default)(this,e.call(this,a,s));return o.init(n),o}return(0,s.default)(t,e),t.prototype.init=function(){function e(e){var t=this,a=this.getData();Object.defineProperty(this,"_seriesInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:a.seriesInstanceUid}),a.instances.forEach(function(n){t.addInstance(new u(n,a,e))})}return e}(),t}(o.metadata.SeriesMetadata)},"OHIFStudyMetadata.js":function(e,t,a){function n(e){return e&&e.__esModule?e:{default:e}}var i=n(e("babel-runtime/helpers/classCallCheck")),r=n(e("babel-runtime/helpers/possibleConstructorReturn")),s=n(e("babel-runtime/helpers/inherits"));a.export({OHIFStudyMetadata:function(){return c}});var o=void 0;a.watch(e("meteor/ohif:viewerbase"),{Viewerbase:function(e){o=e}},0);var u=void 0;a.watch(e("./OHIFSeriesMetadata"),{OHIFSeriesMetadata:function(e){u=e}},1);var c=function(e){function t(a,n){(0,i.default)(this,t);var s=(0,r.default)(this,e.call(this,a,n));return s.init(),s}return(0,s.default)(t,e),t.prototype.init=function(){function e(){var e=this,t=this.getData();Object.defineProperty(this,"_studyInstanceUID",{configurable:!1,enumerable:!1,writable:!1,value:t.studyInstanceUid}),t.seriesList.forEach(function(a){e.addSeries(new u(a,t))})}return e}(),t}(o.metadata.StudyMetadata)},"index.js":function(e,t,a){var n=void 0;a.watch(e("../namespace"),{Metadata:function(e){n=e}},0);var i=void 0;a.watch(e("./OHIFStudyMetadata"),{OHIFStudyMetadata:function(e){i=e}},1);var r=void 0;a.watch(e("./OHIFSeriesMetadata"),{OHIFSeriesMetadata:function(e){r=e}},2);var s=void 0;a.watch(e("./OHIFInstanceMetadata"),{OHIFInstanceMetadata:function(e){s=e}},3),n.StudyMetadata=i,n.SeriesMetadata=r,n.InstanceMetadata=s}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/ohif:metadata/main.js");"undefined"==typeof Package&&(Package={}),Package["ohif:metadata"]=l}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,r=Package.meteor.meteorEnv,n;(function(){(function(){!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r;"undefined"!=typeof window?r=window:void 0!==e?r=e:"undefined"!=typeof self&&(r=self),r.JSZip=t()}}(function(){var t,e,r;return function t(e,r,n){function i(s,o){if(!r[s]){if(!e[s]){var d="function"==typeof require&&require;if(!o&&d)return d(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+s+"'")}var l=r[s]={exports:{}};e[s][0].call(l.exports,function(t){var r=e[s][1][t];return i(r||t)},l,l.exports,t,e,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(t,e){for(var r="",i,a,s,o,d,l,h,f=0;f<t.length;)o=(i=t.charCodeAt(f++))>>2,d=(3&i)<<4|(a=t.charCodeAt(f++))>>4,l=(15&a)<<2|(s=t.charCodeAt(f++))>>6,h=63&s,isNaN(a)?l=h=64:isNaN(s)&&(h=64),r=r+n.charAt(o)+n.charAt(d)+n.charAt(l)+n.charAt(h);return r},r.decode=function(t,e){var r="",i,a,s,o,d,l,h,f=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");f<t.length;)i=(o=n.indexOf(t.charAt(f++)))<<2|(d=n.indexOf(t.charAt(f++)))>>4,a=(15&d)<<4|(l=n.indexOf(t.charAt(f++)))>>2,s=(3&l)<<6|(h=n.indexOf(t.charAt(f++))),r+=String.fromCharCode(i),64!=l&&(r+=String.fromCharCode(a)),64!=h&&(r+=String.fromCharCode(s));return r}},{}],2:[function(t,e,r){"use strict";function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},e.exports=n},{}],3:[function(t,e,r){"use strict";r.STORE={magic:"\0\0",compress:function(t,e){return t},uncompress:function(t){return t},compressInputType:null,uncompressInputType:null},r.DEFLATE=t("./flate")},{"./flate":8}],4:[function(t,e,r){"use strict";var n=t("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];e.exports=function t(e,r){if(void 0===e||!e.length)return 0;var a="string"!==n.getTypeOf(e);void 0===r&&(r=0);var s=0,o=0,d=0;r^=-1;for(var l=0,h=e.length;l<h;l++)d=a?e[l]:e.charCodeAt(l),r=r>>>8^(s=i[o=255&(r^d)]);return-1^r}},{"./utils":21}],5:[function(t,e,r){"use strict";function n(t){this.data=null,this.length=0,this.index=0}var i=t("./utils");n.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e=0,r;for(this.checkOffset(t),r=this.index+t-1;r>=this.index;r--)e=(e<<8)+this.byteAt(r);return this.index+=t,e},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.exports=n},{"./utils":21}],6:[function(t,e,r){"use strict";r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],7:[function(t,e,r){"use strict";var n=t("./utils");r.string2binary=function(t){return n.string2binary(t)},r.string2Uint8Array=function(t){return n.transformTo("uint8array",t)},r.uint8Array2String=function(t){return n.transformTo("string",t)},r.string2Blob=function(t){var e=n.transformTo("arraybuffer",t);return n.arrayBuffer2Blob(e)},r.arrayBuffer2Blob=function(t){return n.arrayBuffer2Blob(t)},r.transformTo=function(t,e){return n.transformTo(t,e)},r.getTypeOf=function(t){return n.getTypeOf(t)},r.checkSupport=function(t){return n.checkSupport(t)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(t){return n.pretty(t)},r.findCompression=function(t){return n.findCompression(t)},r.isRegExp=function(t){return n.isRegExp(t)}},{"./utils":21}],8:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=t("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\0",r.compress=function(t,e){return i.deflateRaw(t,{level:e.level||-1})},r.uncompress=function(t){return i.inflateRaw(t)}},{pako:24}],9:[function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);this.files={},this.comment=null,this.root="",t&&this.load(t,e),this.clone=function(){var t=new n;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}var i=t("./base64");n.prototype=t("./object"),n.prototype.load=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.utils=t("./deprecatedPublicUtils"),n.base64={encode:function(t){return i.encode(t)},decode:function(t){return i.decode(t)}},n.compressions=t("./compressions"),e.exports=n},{"./base64":1,"./compressions":3,"./defaults":6,"./deprecatedPublicUtils":7,"./load":10,"./object":13,"./support":17}],10:[function(t,e,r){"use strict";var n=t("./base64"),i=t("./zipEntries");e.exports=function(t,e){var r,a,s,o;for((e=e||{}).base64&&(t=n.decode(t)),r=(a=new i(t,e)).files,s=0;s<r.length;s++)o=r[s],this.file(o.fileName,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileComment.length?o.fileComment:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:e.createFolders});return a.zipComment.length&&(this.comment=a.zipComment),this}},{"./base64":1,"./zipEntries":22}],11:[function(t,e,r){(function(t){"use strict";e.exports=function(e,r){return new t(e,r)},e.exports.test=function(e){return t.isBuffer(e)}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],12:[function(t,e,r){"use strict";function n(t){this.data=t,this.length=this.data.length,this.index=0}var i=t("./uint8ArrayReader");(n.prototype=new i).readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./uint8ArrayReader":18}],13:[function(t,e,r){"use strict";var n=t("./support"),i=t("./utils"),a=t("./crc32"),s=t("./signature"),o=t("./defaults"),d=t("./base64"),l=t("./compressions"),h=t("./compressedObject"),f=t("./nodeBuffer"),u=t("./utf8"),c=t("./stringWriter"),p=t("./uint8ArrayWriter"),_=function(t){if(t._data instanceof h&&(t._data=t._data.getContent(),t.options.binary=!0,t.options.base64=!1,"uint8array"===i.getTypeOf(t._data))){var e=t._data;t._data=new Uint8Array(e.length),0!==e.length&&t._data.set(e,0)}return t._data},m=function(t){var e=_(t);return"string"===i.getTypeOf(e)?!t.options.binary&&n.nodebuffer?f(e,"utf-8"):t.asBinary():e},g=function(t){var e=_(this);return null===e||void 0===e?"":(this.options.base64&&(e=d.decode(e)),e=t&&this.options.binary?B.utf8decode(e):i.transformTo("string",e),t||this.options.binary||(e=i.transformTo("string",B.utf8encode(e))),e)},b=function(t,e,r){this.name=t,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=e,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};b.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var t=m(this);return i.transformTo("nodebuffer",t)},asUint8Array:function(){var t=m(this);return i.transformTo("uint8array",t)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var w=function(t,e){var r="",n;for(n=0;n<e;n++)r+=String.fromCharCode(255&t),t>>>=8;return r},v=function(){var t={},e,r;for(e=0;e<arguments.length;e++)for(r in arguments[e])arguments[e].hasOwnProperty(r)&&void 0===t[r]&&(t[r]=arguments[e][r]);return t},y=function(t){return!0!==(t=t||{}).base64||null!==t.binary&&void 0!==t.binary||(t.binary=!0),t=v(t,o),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},k=function(t,e,r){var n=i.getTypeOf(e),a;if("string"==typeof(r=y(r)).unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(t=z(t)),r.createFolders&&(a=x(t))&&A.call(this,a,!0),r.dir||null===e||void 0===e)r.base64=!1,r.binary=!1,e=null,n=null;else if("string"===n)r.binary&&!r.base64&&!0!==r.optimizedBinaryString&&(e=i.string2binary(e));else{if(r.base64=!1,r.binary=!0,!(n||e instanceof h))throw new Error("The data of '"+t+"' is in an unsupported format !");"arraybuffer"===n&&(e=i.transformTo("uint8array",e))}var s=new b(t,e,r);return this.files[t]=s,s},x=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},z=function(t){return"/"!=t.slice(-1)&&(t+="/"),t},A=function(t,e){return e=void 0!==e&&e,t=z(t),this.files[t]||k.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]},E=function(t,e,r){var n=new h,s;return t._data instanceof h?(n.uncompressedSize=t._data.uncompressedSize,n.crc32=t._data.crc32,0===n.uncompressedSize||t.dir?(e=l.STORE,n.compressedContent="",n.crc32=0):t._data.compressionMethod===e.magic?n.compressedContent=t._data.getCompressedContent():(s=t._data.getContent(),n.compressedContent=e.compress(i.transformTo(e.compressInputType,s),r))):((s=m(t))&&0!==s.length&&!t.dir||(e=l.STORE,s=""),n.uncompressedSize=s.length,n.crc32=a(s),n.compressedContent=e.compress(i.transformTo(e.compressInputType,s),r)),n.compressedSize=n.compressedContent.length,n.compressionMethod=e.magic,n},S=function(t,e){var r=t;return t||(r=e?16893:33204),(65535&r)<<16},C=function(t,e){return 63&(t||0)},I=function(t,e,r,n,o){var d=r.compressedContent,l=i.transformTo("string",u.utf8encode(e.name)),h=e.comment||"",f=i.transformTo("string",u.utf8encode(h)),c=l.length!==e.name.length,p=f.length!==h.length,_=e.options,m,g,b="",v="",y="",k,x;k=e._initialMetadata.dir!==e.dir?e.dir:_.dir,x=e._initialMetadata.date!==e.date?e.date:_.date;var z=0,A=0;k&&(z|=16),"UNIX"===o?(A=798,z|=S(e.unixPermissions,k)):(A=20,z|=C(e.dosPermissions,k)),m=x.getHours(),m<<=6,m|=x.getMinutes(),m<<=5,m|=x.getSeconds()/2,g=x.getFullYear()-1980,g<<=4,g|=x.getMonth()+1,g<<=5,g|=x.getDate(),c&&(v=w(1,1)+w(a(l),4)+l,b+="up"+w(v.length,2)+v),p&&(y=w(1,1)+w(this.crc32(f),4)+f,b+="uc"+w(y.length,2)+y);var E="";return E+="\n\0",E+=c||p?"\0\b":"\0\0",E+=r.compressionMethod,E+=w(m,2),E+=w(g,2),E+=w(r.crc32,4),E+=w(r.compressedSize,4),E+=w(r.uncompressedSize,4),E+=w(l.length,2),E+=w(b.length,2),{fileRecord:s.LOCAL_FILE_HEADER+E+l+b,dirRecord:s.CENTRAL_FILE_HEADER+w(A,2)+E+w(f.length,2)+"\0\0\0\0"+w(z,4)+w(n,4)+l+b+f,compressedObject:r}},B={load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(t){var e=[],r,n,i,a;for(r in this.files)this.files.hasOwnProperty(r)&&(i=this.files[r],a=new b(i.name,i._data,v(i.options)),n=r.slice(this.root.length,r.length),r.slice(0,this.root.length)===this.root&&t(n,a)&&e.push(a));return e},file:function(t,e,r){if(1===arguments.length){if(i.isRegExp(t)){var n=t;return this.filter(function(t,e){return!e.dir&&n.test(t)})}return this.filter(function(e,r){return!r.dir&&e===t})[0]||null}return t=this.root+t,k.call(this,t,e,r),this},folder:function(t){if(!t)return this;if(i.isRegExp(t))return this.filter(function(e,r){return r.dir&&t.test(e)});var e=this.root+t,r=A.call(this,e),n=this.clone();return n.root=r.name,n},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var r=this.filter(function(e,r){return r.name.slice(0,t.length)===t}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(t){t=v(t||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip"}),i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var e=[],r=0,n=0,a,o,h=i.transformTo("string",this.utf8encode(t.comment||this.comment||""));for(var f in this.files)if(this.files.hasOwnProperty(f)){var u=this.files[f],_=u.options.compression||t.compression.toUpperCase(),m=l[_];if(!m)throw new Error(_+" is not a valid compression method !");var g=u.options.compressionOptions||t.compressionOptions||{},b=E.call(this,u,m,g),y=I.call(this,f,u,b,r,t.platform);r+=y.fileRecord.length+b.compressedSize,n+=y.dirRecord.length,e.push(y)}var k="";k=s.CENTRAL_DIRECTORY_END+"\0\0\0\0"+w(e.length,2)+w(e.length,2)+w(n,4)+w(r,4)+w(h.length,2)+h;var x=t.type.toLowerCase();for(a="uint8array"===x||"arraybuffer"===x||"blob"===x||"nodebuffer"===x?new p(r+n+k.length):new c(r+n+k.length),o=0;o<e.length;o++)a.append(e[o].fileRecord),a.append(e[o].compressedObject.compressedContent);for(o=0;o<e.length;o++)a.append(e[o].dirRecord);a.append(k);var z=a.finalize();switch(t.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(t.type.toLowerCase(),z);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",z),t.mimeType);case"base64":return t.base64?d.encode(z):z;default:return z}},crc32:function(t,e){return a(t,e)},utf8encode:function(t){return i.transformTo("string",u.utf8encode(t))},utf8decode:function(t){return u.utf8decode(t)}};e.exports=B},{"./base64":1,"./compressedObject":2,"./compressions":3,"./crc32":4,"./defaults":6,"./nodeBuffer":11,"./signature":14,"./stringWriter":16,"./support":17,"./uint8ArrayWriter":19,"./utf8":20,"./utils":21}],14:[function(t,e,r){"use strict";r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],15:[function(t,e,r){"use strict";function n(t,e){this.data=t,e||(this.data=a.string2binary(this.data)),this.length=this.data.length,this.index=0}var i=t("./dataReader"),a=t("./utils");(n.prototype=new i).byteAt=function(t){return this.data.charCodeAt(t)},n.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)},n.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5,"./utils":21}],16:[function(t,e,r){"use strict";var n=t("./utils"),i=function(){this.data=[]};i.prototype={append:function(t){t=n.transformTo("string",t),this.data.push(t)},finalize:function(){return this.data.join("")}},e.exports=i},{"./utils":21}],17:[function(t,e,r){(function(t){"use strict";if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,r.nodebuffer=void 0!==t,r.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)r.blob=!1;else{var e=new ArrayBuffer(0);try{r.blob=0===new Blob([e],{type:"application/zip"}).size}catch(t){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);n.append(e),r.blob=0===n.getBlob("application/zip").size}catch(t){r.blob=!1}}}}).call(this,"undefined"!=typeof Buffer?Buffer:void 0)},{}],18:[function(t,e,r){"use strict";function n(t){t&&(this.data=t,this.length=this.data.length,this.index=0)}var i=t("./dataReader");(n.prototype=new i).byteAt=function(t){return this.data[t]},n.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),r=t.charCodeAt(1),n=t.charCodeAt(2),i=t.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===e&&this.data[a+1]===r&&this.data[a+2]===n&&this.data[a+3]===i)return a;return-1},n.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.index,this.index+t);return this.index+=t,e},e.exports=n},{"./dataReader":5}],19:[function(t,e,r){"use strict";var n=t("./utils"),i=function(t){this.data=new Uint8Array(t),this.index=0};i.prototype={append:function(t){0!==t.length&&(t=n.transformTo("uint8array",t),this.data.set(t,this.index),this.index+=t.length)},finalize:function(){return this.data}},e.exports=i},{"./utils":21}],20:[function(t,e,r){"use strict";for(var n=t("./utils"),i=t("./support"),a=t("./nodeBuffer"),s=new Array(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;s[254]=s[254]=1;var d=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;a<o;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),d+=r<128?1:r<2048?2:r<65536?3:4;for(e=i.uint8array?new Uint8Array(d):new Array(d),s=0,a=0;s<d;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},l=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+s[t[r]]>e?r:e},h=function(t){var e,r,i,a,o,d=t.length,l=new Array(2*d);for(i=0,r=0;r<d;)if((a=t[r++])<128)l[i++]=a;else if((o=s[a])>4)l[i++]=65533,r+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&r<d;)a=a<<6|63&t[r++],o--;o>1?l[i++]=65533:a<65536?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return l.length!==i&&(l.subarray?l=l.subarray(0,i):l.length=i),n.applyFromCharCode(l)};r.utf8encode=function t(e){return i.nodebuffer?a(e,"utf-8"):d(e)},r.utf8decode=function t(e){if(i.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");for(var r=[],a=0,s=(e=n.transformTo(i.uint8array?"uint8array":"array",e)).length,o=65536;a<s;){var d=l(e,Math.min(a+65536,s));i.uint8array?r.push(h(e.subarray(a,d))):r.push(h(e.slice(a,d))),a=d}return r.join("")}},{"./nodeBuffer":11,"./support":17,"./utils":21}],21:[function(t,e,r){"use strict";function n(t){return t}function i(t,e){for(var r=0;r<t.length;++r)e[r]=255&t.charCodeAt(r);return e}function a(t){var e=65536,n=[],i=t.length,a=r.getTypeOf(t),s=0,o=!0;try{switch(a){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,l(0));break}}catch(t){o=!1}if(!o){for(var d="",h=0;h<t.length;h++)d+=String.fromCharCode(t[h]);return d}for(;s<i&&e>1;)try{"array"===a||"nodebuffer"===a?n.push(String.fromCharCode.apply(null,t.slice(s,Math.min(s+e,i)))):n.push(String.fromCharCode.apply(null,t.subarray(s,Math.min(s+e,i)))),s+=e}catch(t){e=Math.floor(e/2)}return n.join("")}function s(t,e){for(var r=0;r<t.length;r++)e[r]=t[r];return e}var o=t("./support"),d=t("./compressions"),l=t("./nodeBuffer");r.string2binary=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r));return e},r.arrayBuffer2Blob=function(t,e){r.checkSupport("blob"),e=e||"application/zip";try{return new Blob([t],{type:e})}catch(r){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(t),n.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=a;var h={};h.string={string:n,array:function(t){return i(t,new Array(t.length))},arraybuffer:function(t){return h.string.uint8array(t).buffer},uint8array:function(t){return i(t,new Uint8Array(t.length))},nodebuffer:function(t){return i(t,l(t.length))}},h.array={string:a,array:n,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(t)}},h.arraybuffer={string:function(t){return a(new Uint8Array(t))},array:function(t){return s(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:n,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return l(new Uint8Array(t))}},h.uint8array={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:n,nodebuffer:function(t){return l(t)}},h.nodebuffer={string:a,array:function(t){return s(t,new Array(t.length))},arraybuffer:function(t){return h.nodebuffer.uint8array(t).buffer},uint8array:function(t){return s(t,new Uint8Array(t.length))},nodebuffer:n},r.transformTo=function(t,e){if(e||(e=""),!t)return e;r.checkSupport(t);var n=r.getTypeOf(e);return h[n][t](e)},r.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.nodebuffer&&l.test(t)?"nodebuffer":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(t){if(!o[t.toLowerCase()])throw new Error(t+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(t){var e="",r,n;for(n=0;n<(t||"").length;n++)e+="\\x"+((r=t.charCodeAt(n))<16?"0":"")+r.toString(16).toUpperCase();return e},r.findCompression=function(t){for(var e in d)if(d.hasOwnProperty(e)&&d[e].magic===t)return d[e];return null},r.isRegExp=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)}},{"./compressions":3,"./nodeBuffer":11,"./support":17}],22:[function(t,e,r){"use strict";function n(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var i=t("./stringReader"),a=t("./nodeBufferReader"),s=t("./uint8ArrayReader"),o=t("./utils"),d=t("./signature"),l=t("./zipEntry"),h=t("./support"),f=t("./object");n.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+o.pretty(e)+", expected "+o.pretty(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength),this.zipComment=f.utf8decode(this.zipComment)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t=this.zip64EndOfCentralSize-44,e=0,r,n,i;0<t;)r=this.reader.readInt(2),n=this.reader.readInt(4),i=this.reader.readString(n),this.zip64ExtensibleData[r]={id:r,length:n,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===d.CENTRAL_FILE_HEADER;)(t=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(-1===t){var e=!0;try{this.reader.setIndex(0),this.checkSignature(d.LOCAL_FILE_HEADER),e=!1}catch(t){}throw e?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory")}if(this.reader.setIndex(t),this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,-1===(t=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},prepareReader:function(t){var e=o.getTypeOf(t);"string"!==e||h.uint8array?this.reader="nodebuffer"===e?new a(t):new s(o.transformTo("uint8array",t)):this.reader=new i(t,this.loadOptions.optimizedBinaryString)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=n},{"./nodeBufferReader":12,"./object":13,"./signature":14,"./stringReader":15,"./support":17,"./uint8ArrayReader":18,"./utils":21,"./zipEntry":23}],23:[function(t,e,r){"use strict";function n(t,e){this.options=t,this.loadOptions=e}var i=t("./stringReader"),a=t("./utils"),s=t("./compressedObject"),o=t("./object"),d=0,l=3;n.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(t,e,r){return function(){var n=t.index;t.setIndex(e);var i=t.readData(r);return t.setIndex(n),i}},prepareContent:function(t,e,r,n,i){return function(){var t=a.transformTo(n.uncompressInputType,this.getCompressedContent()),e=n.uncompress(t);if(e.length!==i)throw new Error("Bug : uncompressed data size mismatch");return e}},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(e=a.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.decompressed=new s,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(t,t.index,this.compressedSize,e),this.decompressed.getContent=this.prepareContent(t,t.index,this.compressedSize,e,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=a.transformTo("string",this.decompressed.getContent()),o.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readInt(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileName.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=new i(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e=t.index,r,n,i;for(this.extraFields=this.extraFields||{};t.index<e+this.extraFieldsLength;)r=t.readInt(2),n=t.readInt(2),i=t.readString(n),this.extraFields[r]={id:r,length:n,value:i}},handleUTF8:function(){if(this.useUTF8())this.fileName=o.utf8decode(this.fileName),this.fileComment=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();null!==t&&(this.fileName=t);var e=this.findExtraFieldUnicodeComment();null!==e&&(this.fileComment=e)}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileName)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=new i(t.value);return 1!==e.readInt(1)?null:o.crc32(this.fileComment)!==e.readInt(4)?null:o.utf8decode(e.readString(t.length-5))}return null}},e.exports=n},{"./compressedObject":2,"./object":13,"./stringReader":15,"./utils":21}],24:[function(t,e,r){"use strict";var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=n},{"./lib/deflate":25,"./lib/inflate":26,"./lib/utils/common":27,"./lib/zlib/constants":30}],25:[function(t,e,r){"use strict";function n(t,e){var r=new b(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}function a(t,e){return e=e||{},e.gzip=!0,n(t,e)}var s=t("./zlib/deflate.js"),o=t("./utils/common"),d=t("./utils/strings"),l=t("./zlib/messages"),h=t("./zlib/zstream"),f=0,u=4,c=0,p=1,_=-1,m=0,g=8,b=function(t){this.options=o.assign({level:-1,method:8,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=s.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(0!==r)throw new Error(l[r]);e.header&&s.deflateSetHeader(this.strm,e.header)};b.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,a;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,r.input="string"==typeof t?d.string2buf(t):t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new o.Buf8(n),r.next_out=0,r.avail_out=n),1!==(i=s.deflate(r,a))&&0!==i)return this.onEnd(i),this.ended=!0,!1;(0===r.avail_out||0===r.avail_in&&4===a)&&("string"===this.options.to?this.onData(d.buf2binstring(o.shrinkBuf(r.output,r.next_out))):this.onData(o.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||0===r.avail_out)&&1!==i);return 4!==a||(i=s.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,0===i)},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){0===t&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Deflate=b,r.deflate=n,r.deflateRaw=i,r.gzip=a},{"./utils/common":27,"./utils/strings":28,"./zlib/deflate.js":32,"./zlib/messages":37,"./zlib/zstream":39}],26:[function(t,e,r){"use strict";function n(t,e){var r=new u(e);if(r.push(t,!0),r.err)throw r.msg;return r.result}function i(t,e){return e=e||{},e.raw=!0,n(t,e)}var a=t("./zlib/inflate.js"),s=t("./utils/common"),o=t("./utils/strings"),d=t("./zlib/constants"),l=t("./zlib/messages"),h=t("./zlib/zstream"),f=t("./zlib/gzheader"),u=function(t){this.options=s.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var r=a.inflateInit2(this.strm,e.windowBits);if(r!==d.Z_OK)throw new Error(l[r]);this.header=new f,a.inflateGetHeader(this.strm,this.header)};u.prototype.push=function(t,e){var r=this.strm,n=this.options.chunkSize,i,l,h,f,u;if(this.ended)return!1;l=e===~~e?e:!0===e?d.Z_FINISH:d.Z_NO_FLUSH,r.input="string"==typeof t?o.binstring2buf(t):t,r.next_in=0,r.avail_in=r.input.length;do{if(0===r.avail_out&&(r.output=new s.Buf8(n),r.next_out=0,r.avail_out=n),(i=a.inflate(r,d.Z_NO_FLUSH))!==d.Z_STREAM_END&&i!==d.Z_OK)return this.onEnd(i),this.ended=!0,!1;r.next_out&&(0===r.avail_out||i===d.Z_STREAM_END||0===r.avail_in&&l===d.Z_FINISH)&&("string"===this.options.to?(h=o.utf8border(r.output,r.next_out),f=r.next_out-h,u=o.buf2string(r.output,h),r.next_out=f,r.avail_out=n-f,f&&s.arraySet(r.output,r.output,h,f,0),this.onData(u)):this.onData(s.shrinkBuf(r.output,r.next_out)))}while(r.avail_in>0&&i!==d.Z_STREAM_END);return i===d.Z_STREAM_END&&(l=d.Z_FINISH),l!==d.Z_FINISH||(i=a.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===d.Z_OK)},u.prototype.onData=function(t){this.chunks.push(t)},u.prototype.onEnd=function(t){t===d.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},r.Inflate=u,r.inflate=n,r.inflateRaw=i,r.ungzip=n},{"./utils/common":27,"./utils/strings":28,"./zlib/constants":30,"./zlib/gzheader":33,"./zlib/inflate.js":35,"./zlib/messages":37,"./zlib/zstream":39}],27:[function(t,e,r){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var r=e.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}}return t},r.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,r,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(r,r+n),i);else for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){var e,r,n,i,a,s;for(n=0,e=0,r=t.length;e<r;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,r=t.length;e<r;e++)a=t[e],s.set(a,i),i+=a.length;return s}},a={arraySet:function(t,e,r,n,i){for(var a=0;a<n;a++)t[i+a]=e[r+a]},flattenChunks:function(t){return[].concat.apply([],t)}};r.setTyped=function(t){t?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(n)},{}],28:[function(t,e,r){"use strict";function n(t,e){if(e<65537&&(t.subarray&&s||!t.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var r="",n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r}var i=t("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var o=new i.Buf8(256),d=0;d<256;d++)o[d]=d>=252?6:d>=248?5:d>=240?4:d>=224?3:d>=192?2:1;o[254]=o[254]=1,r.string2buf=function(t){var e,r,n,a,s,o=t.length,d=0;for(a=0;a<o;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),d+=r<128?1:r<2048?2:r<65536?3:4;for(e=new i.Buf8(d),s=0,a=0;s<d;a++)55296==(64512&(r=t.charCodeAt(a)))&&a+1<o&&56320==(64512&(n=t.charCodeAt(a+1)))&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?e[s++]=r:r<2048?(e[s++]=192|r>>>6,e[s++]=128|63&r):r<65536?(e[s++]=224|r>>>12,e[s++]=128|r>>>6&63,e[s++]=128|63&r):(e[s++]=240|r>>>18,e[s++]=128|r>>>12&63,e[s++]=128|r>>>6&63,e[s++]=128|63&r);return e},r.buf2binstring=function(t){return n(t,t.length)},r.binstring2buf=function(t){for(var e=new i.Buf8(t.length),r=0,n=e.length;r<n;r++)e[r]=t.charCodeAt(r);return e},r.buf2string=function(t,e){var r,i,a,s,d=e||t.length,l=new Array(2*d);for(i=0,r=0;r<d;)if((a=t[r++])<128)l[i++]=a;else if((s=o[a])>4)l[i++]=65533,r+=s-1;else{for(a&=2===s?31:3===s?15:7;s>1&&r<d;)a=a<<6|63&t[r++],s--;s>1?l[i++]=65533:a<65536?l[i++]=a:(a-=65536,l[i++]=55296|a>>10&1023,l[i++]=56320|1023&a)}return n(l,i)},r.utf8border=function(t,e){var r;for((e=e||t.length)>t.length&&(e=t.length),r=e-1;r>=0&&128==(192&t[r]);)r--;return r<0?e:0===r?e:r+o[t[r]]>e?r:e}},{"./common":27}],29:[function(t,e,r){"use strict";function n(t,e,r,n){for(var i=65535&t|0,a=t>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(i=i+e[n++]|0)|0}while(--s);i%=65521,a%=65521}return i|a<<16|0}e.exports=n},{}],30:[function(t,e,r){e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],31:[function(t,e,r){"use strict";function n(){for(var t,e=[],r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[r]=t}return e}function i(t,e,r,n){var i=a,s=n+r;t^=-1;for(var o=n;o<s;o++)t=t>>>8^i[255&(t^e[o])];return-1^t}var a=n();e.exports=i},{}],32:[function(t,e,r){"use strict";function n(t,e){return t.msg=O[e],e}function i(t){return(t<<1)-(t>4?9:0)}function a(t){for(var e=t.length;--e>=0;)t[e]=0}function s(t){var e=t.state,r=e.pending;r>t.avail_out&&(r=t.avail_out),0!==r&&(S.arraySet(t.output,e.pending_buf,e.pending_out,r,t.next_out),t.next_out+=r,e.pending_out+=r,t.total_out+=r,t.avail_out-=r,e.pending-=r,0===e.pending&&(e.pending_out=0))}function o(t,e){C._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,s(t.strm)}function d(t,e){t.pending_buf[t.pending++]=e}function l(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function h(t,e,r,n){var i=t.avail_in;return i>n&&(i=n),0===i?0:(t.avail_in-=i,S.arraySet(e,t.input,t.next_in,i,r),1===t.state.wrap?t.adler=I(t.adler,e,i,r):2===t.state.wrap&&(t.adler=B(t.adler,e,i,r)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var r=t.max_chain_length,n=t.strstart,i,a,s=t.prev_length,o=t.nice_match,d=t.strstart>t.w_size-dt?t.strstart-(t.w_size-dt):0,l=t.window,h=t.w_mask,f=t.prev,u=t.strstart+ot,c=l[n+s-1],p=l[n+s];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(i=e,l[i+s]===p&&l[i+s-1]===c&&l[i]===l[n]&&l[++i]===l[n+1]){n+=2,i++;do{}while(l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&l[++n]===l[++i]&&n<u);if(a=ot-(u-n),n=u-ot,a>s){if(t.match_start=e,s=a,a>=o)break;c=l[n+s-1],p=l[n+s]}}}while((e=f[e&h])>d&&0!=--r);return s<=t.lookahead?s:t.lookahead}function u(t){var e=t.w_size,r,n,i,a,s;do{if(a=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-dt)){S.arraySet(t.window,t.window,e,e,0),t.match_start-=e,t.strstart-=e,t.block_start-=e,r=n=t.hash_size;do{i=t.head[--r],t.head[r]=i>=e?i-e:0}while(--n);r=n=e;do{i=t.prev[--r],t.prev[r]=i>=e?i-e:0}while(--n);a+=e}if(0===t.strm.avail_in)break;if(n=h(t.strm,t.window,t.strstart+t.lookahead,a),t.lookahead+=n,t.lookahead+t.insert>=st)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[s+st-1])&t.hash_mask,t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<st)););}while(t.lookahead<dt&&0!==t.strm.avail_in)}function c(t,e){var r=65535;for(r>t.pending_buf_size-5&&(r=t.pending_buf_size-5);;){if(t.lookahead<=1){if(u(t),0===t.lookahead&&e===R)return gt;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+r;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,o(t,!1),0===t.strm.avail_out))return gt;if(t.strstart-t.block_start>=t.w_size-dt&&(o(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===L?(o(t,!0),0===t.strm.avail_out?wt:vt):(t.strstart>t.block_start&&(o(t,!1),t.strm.avail_out),gt)}function p(t,e){for(var r,n;;){if(t.lookahead<dt){if(u(t),t.lookahead<dt&&e===R)return gt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==r&&t.strstart-r<=t.w_size-dt&&(t.match_length=f(t,r)),t.match_length>=st)if(n=C._tr_tally(t,t.strstart-t.match_start,t.match_length-st),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=st){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(o(t,!1),0===t.strm.avail_out))return gt}return t.insert=t.strstart<st-1?t.strstart:st-1,e===L?(o(t,!0),0===t.strm.avail_out?wt:vt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?gt:bt}function _(t,e){for(var r,n,i;;){if(t.lookahead<dt){if(u(t),t.lookahead<dt&&e===R)return gt;if(0===t.lookahead)break}if(r=0,t.lookahead>=st&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=st-1,0!==r&&t.prev_length<t.max_lazy_match&&t.strstart-r<=t.w_size-dt&&(t.match_length=f(t,r),t.match_length<=5&&(t.strategy===H||t.match_length===st&&t.strstart-t.match_start>4096)&&(t.match_length=st-1)),t.prev_length>=st&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-st,n=C._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-st),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+st-1])&t.hash_mask,r=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=st-1,t.strstart++,n&&(o(t,!1),0===t.strm.avail_out))return gt}else if(t.match_available){if((n=C._tr_tally(t,0,t.window[t.strstart-1]))&&o(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return gt}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=C._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<st-1?t.strstart:st-1,e===L?(o(t,!0),0===t.strm.avail_out?wt:vt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?gt:bt}function m(t,e){for(var r,n,i,a,s=t.window;;){if(t.lookahead<=ot){if(u(t),t.lookahead<=ot&&e===R)return gt;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=st&&t.strstart>0&&(i=t.strstart-1,(n=s[i])===s[++i]&&n===s[++i]&&n===s[++i])){a=t.strstart+ot;do{}while(n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&n===s[++i]&&i<a);t.match_length=ot-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=st?(r=C._tr_tally(t,1,t.match_length-st),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(r=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),r&&(o(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===L?(o(t,!0),0===t.strm.avail_out?wt:vt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?gt:bt}function g(t,e){for(var r;;){if(0===t.lookahead&&(u(t),0===t.lookahead)){if(e===R)return gt;break}if(t.match_length=0,r=C._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,r&&(o(t,!1),0===t.strm.avail_out))return gt}return t.insert=0,e===L?(o(t,!0),0===t.strm.avail_out?wt:vt):t.last_lit&&(o(t,!1),0===t.strm.avail_out)?gt:bt}function b(t){t.window_size=2*t.w_size,a(t.head),t.max_lazy_match=xt[t.level].max_lazy,t.good_match=xt[t.level].good_length,t.nice_match=xt[t.level].nice_length,t.max_chain_length=xt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=st-1,t.match_available=0,t.ins_h=0}function w(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*it),this.dyn_dtree=new S.Buf16(2*(2*rt+1)),this.bl_tree=new S.Buf16(2*(2*nt+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(at+1),this.heap=new S.Buf16(2*et+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*et+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=W,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?ht:_t,t.adler=2===e.wrap?0:1,e.last_flush=R,C._tr_init(e),U):n(t,P)}function y(t){var e=v(t);return e===U&&b(t.state),e}function k(t,e){return t&&t.state?2!==t.state.wrap?P:(t.state.gzhead=e,U):P}function x(t,e,r,i,a,s){if(!t)return P;var o=1;if(e===j&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>G||r!==q||i<8||i>15||e<0||e>9||s<0||s>V)return n(t,P);8===i&&(i=9);var d=new w;return t.state=d,d.strm=t,d.wrap=o,d.gzhead=null,d.w_bits=i,d.w_size=1<<d.w_bits,d.w_mask=d.w_size-1,d.hash_bits=a+7,d.hash_size=1<<d.hash_bits,d.hash_mask=d.hash_size-1,d.hash_shift=~~((d.hash_bits+st-1)/st),d.window=new S.Buf8(2*d.w_size),d.head=new S.Buf16(d.hash_size),d.prev=new S.Buf16(d.w_size),d.lit_bufsize=1<<a+6,d.pending_buf_size=4*d.lit_bufsize,d.pending_buf=new S.Buf8(d.pending_buf_size),d.d_buf=d.lit_bufsize>>1,d.l_buf=3*d.lit_bufsize,d.level=e,d.strategy=s,d.method=r,y(t)}function z(t,e){return x(t,e,q,J,Q,Y)}function A(t,e){var r,o,h,f;if(!t||!t.state||e>N||e<0)return t?n(t,P):P;if(o=t.state,!t.output||!t.input&&0!==t.avail_in||o.status===mt&&e!==L)return n(t,0===t.avail_out?M:P);if(o.strm=t,r=o.last_flush,o.last_flush=e,o.status===ht)if(2===o.wrap)t.adler=0,d(o,31),d(o,139),d(o,8),o.gzhead?(d(o,(o.gzhead.text?1:0)+(o.gzhead.hcrc?2:0)+(o.gzhead.extra?4:0)+(o.gzhead.name?8:0)+(o.gzhead.comment?16:0)),d(o,255&o.gzhead.time),d(o,o.gzhead.time>>8&255),d(o,o.gzhead.time>>16&255),d(o,o.gzhead.time>>24&255),d(o,9===o.level?2:o.strategy>=X||o.level<2?4:0),d(o,255&o.gzhead.os),o.gzhead.extra&&o.gzhead.extra.length&&(d(o,255&o.gzhead.extra.length),d(o,o.gzhead.extra.length>>8&255)),o.gzhead.hcrc&&(t.adler=B(t.adler,o.pending_buf,o.pending,0)),o.gzindex=0,o.status=ft):(d(o,0),d(o,0),d(o,0),d(o,0),d(o,0),d(o,9===o.level?2:o.strategy>=X||o.level<2?4:0),d(o,yt),o.status=_t);else{var u=q+(o.w_bits-8<<4)<<8,c=-1;u|=(c=o.strategy>=X||o.level<2?0:o.level<6?1:6===o.level?2:3)<<6,0!==o.strstart&&(u|=lt),u+=31-u%31,o.status=_t,l(o,u),0!==o.strstart&&(l(o,t.adler>>>16),l(o,65535&t.adler)),t.adler=1}if(o.status===ft)if(o.gzhead.extra){for(h=o.pending;o.gzindex<(65535&o.gzhead.extra.length)&&(o.pending!==o.pending_buf_size||(o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending!==o.pending_buf_size));)d(o,255&o.gzhead.extra[o.gzindex]),o.gzindex++;o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),o.gzindex===o.gzhead.extra.length&&(o.gzindex=0,o.status=ut)}else o.status=ut;if(o.status===ut)if(o.gzhead.name){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.name.length?255&o.gzhead.name.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),0===f&&(o.gzindex=0,o.status=ct)}else o.status=ct;if(o.status===ct)if(o.gzhead.comment){h=o.pending;do{if(o.pending===o.pending_buf_size&&(o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),s(t),h=o.pending,o.pending===o.pending_buf_size)){f=1;break}f=o.gzindex<o.gzhead.comment.length?255&o.gzhead.comment.charCodeAt(o.gzindex++):0,d(o,f)}while(0!==f);o.gzhead.hcrc&&o.pending>h&&(t.adler=B(t.adler,o.pending_buf,o.pending-h,h)),0===f&&(o.status=pt)}else o.status=pt;if(o.status===pt&&(o.gzhead.hcrc?(o.pending+2>o.pending_buf_size&&s(t),o.pending+2<=o.pending_buf_size&&(d(o,255&t.adler),d(o,t.adler>>8&255),t.adler=0,o.status=_t)):o.status=_t),0!==o.pending){if(s(t),0===t.avail_out)return o.last_flush=-1,U}else if(0===t.avail_in&&i(e)<=i(r)&&e!==L)return n(t,M);if(o.status===mt&&0!==t.avail_in)return n(t,M);if(0!==t.avail_in||0!==o.lookahead||e!==R&&o.status!==mt){var p=o.strategy===X?g(o,e):o.strategy===K?m(o,e):xt[o.level].func(o,e);if(p!==wt&&p!==vt||(o.status=mt),p===gt||p===wt)return 0===t.avail_out&&(o.last_flush=-1),U;if(p===bt&&(e===T?C._tr_align(o):e!==N&&(C._tr_stored_block(o,0,0,!1),e===D&&(a(o.head),0===o.lookahead&&(o.strstart=0,o.block_start=0,o.insert=0))),s(t),0===t.avail_out))return o.last_flush=-1,U}return e!==L?U:o.wrap<=0?F:(2===o.wrap?(d(o,255&t.adler),d(o,t.adler>>8&255),d(o,t.adler>>16&255),d(o,t.adler>>24&255),d(o,255&t.total_in),d(o,t.total_in>>8&255),d(o,t.total_in>>16&255),d(o,t.total_in>>24&255)):(l(o,t.adler>>>16),l(o,65535&t.adler)),s(t),o.wrap>0&&(o.wrap=-o.wrap),0!==o.pending?U:F)}function E(t){var e;return t&&t.state?(e=t.state.status)!==ht&&e!==ft&&e!==ut&&e!==ct&&e!==pt&&e!==_t&&e!==mt?n(t,P):(t.state=null,e===_t?n(t,Z):U):P}var S=t("../utils/common"),C=t("./trees"),I=t("./adler32"),B=t("./crc32"),O=t("./messages"),R=0,T=1,D=3,L=4,N=5,U=0,F=1,P=-2,Z=-3,M=-5,j=-1,H=1,X=2,K=3,V=4,Y=0,W=2,q=8,G=9,J=15,Q=8,$=29,tt=256,et=286,rt=30,nt=19,it=2*et+1,at=15,st=3,ot=258,dt=ot+st+1,lt=32,ht=42,ft=69,ut=73,ct=91,pt=103,_t=113,mt=666,gt=1,bt=2,wt=3,vt=4,yt=3,kt=function(t,e,r,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=r,this.max_chain=n,this.func=i},xt;xt=[new kt(0,0,0,0,c),new kt(4,4,8,4,p),new kt(4,5,16,8,p),new kt(4,6,32,32,p),new kt(4,4,16,16,_),new kt(8,16,32,32,_),new kt(8,16,128,128,_),new kt(8,32,128,256,_),new kt(32,128,258,1024,_),new kt(32,258,258,4096,_)],r.deflateInit=z,r.deflateInit2=x,r.deflateReset=y,r.deflateResetKeep=v,r.deflateSetHeader=k,r.deflate=A,r.deflateEnd=E,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./messages":37,"./trees":38}],33:[function(t,e,r){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},{}],34:[function(t,e,r){"use strict";var n=30,i=12;e.exports=function t(e,r){var n,i,a,s,o,d,l,h,f,u,c,p,_,m,g,b,w,v,y,k,x,z,A,E,S;n=e.state,i=e.next_in,E=e.input,a=i+(e.avail_in-5),s=e.next_out,S=e.output,o=s-(r-e.avail_out),d=s+(e.avail_out-257),l=n.dmax,h=n.wsize,f=n.whave,u=n.wnext,c=n.window,p=n.hold,_=n.bits,m=n.lencode,g=n.distcode,b=(1<<n.lenbits)-1,w=(1<<n.distbits)-1;t:do{_<15&&(p+=E[i++]<<_,_+=8,p+=E[i++]<<_,_+=8),v=m[p&b];e:for(;;){if(y=v>>>24,p>>>=y,_-=y,0===(y=v>>>16&255))S[s++]=65535&v;else{if(!(16&y)){if(0==(64&y)){v=m[(65535&v)+(p&(1<<y)-1)];continue e}if(32&y){n.mode=12;break t}e.msg="invalid literal/length code",n.mode=30;break t}k=65535&v,(y&=15)&&(_<y&&(p+=E[i++]<<_,_+=8),k+=p&(1<<y)-1,p>>>=y,_-=y),_<15&&(p+=E[i++]<<_,_+=8,p+=E[i++]<<_,_+=8),v=g[p&w];r:for(;;){if(y=v>>>24,p>>>=y,_-=y,!(16&(y=v>>>16&255))){if(0==(64&y)){v=g[(65535&v)+(p&(1<<y)-1)];continue r}e.msg="invalid distance code",n.mode=30;break t}if(x=65535&v,y&=15,_<y&&(p+=E[i++]<<_,(_+=8)<y&&(p+=E[i++]<<_,_+=8)),(x+=p&(1<<y)-1)>l){e.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=y,_-=y,y=s-o,x>y){if((y=x-y)>f&&n.sane){e.msg="invalid distance too far back",n.mode=30;break t}if(z=0,A=c,0===u){if(z+=h-y,y<k){k-=y;do{S[s++]=c[z++]}while(--y);z=s-x,A=S}}else if(u<y){if(z+=h+u-y,(y-=u)<k){k-=y;do{S[s++]=c[z++]}while(--y);if(z=0,u<k){k-=y=u;do{S[s++]=c[z++]}while(--y);z=s-x,A=S}}}else if(z+=u-y,y<k){k-=y;do{S[s++]=c[z++]}while(--y);z=s-x,A=S}for(;k>2;)S[s++]=A[z++],S[s++]=A[z++],S[s++]=A[z++],k-=3;k&&(S[s++]=A[z++],k>1&&(S[s++]=A[z++]))}else{z=s-x;do{S[s++]=S[z++],S[s++]=S[z++],S[s++]=S[z++],k-=3}while(k>2);k&&(S[s++]=S[z++],k>1&&(S[s++]=S[z++]))}break}}break}}while(i<a&&s<d);i-=k=_>>3,p&=(1<<(_-=k<<3))-1,e.next_in=i,e.next_out=s,e.avail_in=i<a?a-i+5:5-(i-a),e.avail_out=s<d?d-s+257:257-(s-d),n.hold=p,n.bits=_}},{}],35:[function(t,e,r){"use strict";function n(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new _.Buf16(320),this.work=new _.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=D,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new _.Buf32(ut),e.distcode=e.distdyn=new _.Buf32(ct),e.sane=1,e.back=-1,E):I}function s(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,a(t)):I}function o(t,e){var r,n;return t&&t.state?(n=t.state,e<0?(r=0,e=-e):(r=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?I:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,s(t))):I}function d(t,e){var r,n;return t?(n=new i,t.state=n,n.window=null,(r=o(t,e))!==E&&(t.state=null),r):I}function l(t){return d(t,_t)}function h(t){if(mt){var e;for(gt=new _.Buf32(512),bt=new _.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(w(y,t.lens,0,288,gt,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;w(k,t.lens,0,32,bt,0,t.work,{bits:5}),mt=!1}t.lencode=gt,t.lenbits=9,t.distcode=bt,t.distbits=5}function f(t,e,r,n){var i,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new _.Buf8(a.wsize)),n>=a.wsize?(_.arraySet(a.window,e,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((i=a.wsize-a.wnext)>n&&(i=n),_.arraySet(a.window,e,r-n,i,a.wnext),(n-=i)?(_.arraySet(a.window,e,r-n,n,0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function u(t,e){var r,i,a,s,o,d,l,u,c,p,ut,ct,pt,_t,mt=0,gt,bt,wt,vt,yt,kt,xt,zt,At=new _.Buf8(4),Et,St,Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return I;(r=t.state).mode===K&&(r.mode=V),o=t.next_out,a=t.output,l=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,p=d,ut=l,zt=E;t:for(;;)switch(r.mode){case D:if(0===r.wrap){r.mode=V;break}for(;c<16;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(2&r.wrap&&35615===u){r.check=0,At[0]=255&u,At[1]=u>>>8&255,r.check=g(r.check,At,2,0),u=0,c=0,r.mode=L;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=lt;break}if((15&u)!==T){t.msg="unknown compression method",r.mode=lt;break}if(u>>>=4,c-=4,xt=8+(15&u),0===r.wbits)r.wbits=xt;else if(xt>r.wbits){t.msg="invalid window size",r.mode=lt;break}r.dmax=1<<xt,t.adler=r.check=1,r.mode=512&u?H:K,u=0,c=0;break;case L:for(;c<16;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.flags=u,(255&r.flags)!==T){t.msg="unknown compression method",r.mode=lt;break}if(57344&r.flags){t.msg="unknown header flags set",r.mode=lt;break}r.head&&(r.head.text=u>>8&1),512&r.flags&&(At[0]=255&u,At[1]=u>>>8&255,r.check=g(r.check,At,2,0)),u=0,c=0,r.mode=N;case N:for(;c<32;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.time=u),512&r.flags&&(At[0]=255&u,At[1]=u>>>8&255,At[2]=u>>>16&255,At[3]=u>>>24&255,r.check=g(r.check,At,4,0)),u=0,c=0,r.mode=U;case U:for(;c<16;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.head&&(r.head.xflags=255&u,r.head.os=u>>8),512&r.flags&&(At[0]=255&u,At[1]=u>>>8&255,r.check=g(r.check,At,2,0)),u=0,c=0,r.mode=F;case F:if(1024&r.flags){for(;c<16;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),512&r.flags&&(At[0]=255&u,At[1]=u>>>8&255,r.check=g(r.check,At,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=P;case P:if(1024&r.flags&&((ct=r.length)>d&&(ct=d),ct&&(r.head&&(xt=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),_.arraySet(r.head.extra,i,s,ct,xt)),512&r.flags&&(r.check=g(r.check,i,ct,s)),d-=ct,s+=ct,r.length-=ct),r.length))break t;r.length=0,r.mode=Z;case Z:if(2048&r.flags){if(0===d)break t;ct=0;do{xt=i[s+ct++],r.head&&xt&&r.length<65536&&(r.head.name+=String.fromCharCode(xt))}while(xt&&ct<d);if(512&r.flags&&(r.check=g(r.check,i,ct,s)),d-=ct,s+=ct,xt)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=M;case M:if(4096&r.flags){if(0===d)break t;ct=0;do{xt=i[s+ct++],r.head&&xt&&r.length<65536&&(r.head.comment+=String.fromCharCode(xt))}while(xt&&ct<d);if(512&r.flags&&(r.check=g(r.check,i,ct,s)),d-=ct,s+=ct,xt)break t}else r.head&&(r.head.comment=null);r.mode=j;case j:if(512&r.flags){for(;c<16;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(65535&r.check)){t.msg="header crc mismatch",r.mode=lt;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=K;break;case H:for(;c<32;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}t.adler=r.check=n(u),u=0,c=0,r.mode=X;case X:if(0===r.havedict)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,C;t.adler=r.check=1,r.mode=K;case K:if(e===z||e===A)break t;case V:if(r.last){u>>>=7&c,c-=7&c,r.mode=st;break}for(;c<3;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}switch(r.last=1&u,u>>>=1,c-=1,3&u){case 0:r.mode=Y;break;case 1:if(h(r),r.mode=$,e===A){u>>>=2,c-=2;break t}break;case 2:r.mode=G;break;case 3:t.msg="invalid block type",r.mode=lt}u>>>=2,c-=2;break;case Y:for(u>>>=7&c,c-=7&c;c<32;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=lt;break}if(r.length=65535&u,u=0,c=0,r.mode=W,e===A)break t;case W:r.mode=q;case q:if(ct=r.length){if(ct>d&&(ct=d),ct>l&&(ct=l),0===ct)break t;_.arraySet(a,i,s,ct,o),d-=ct,s+=ct,l-=ct,o+=ct,r.length-=ct;break}r.mode=K;break;case G:for(;c<14;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(r.nlen=257+(31&u),u>>>=5,c-=5,r.ndist=1+(31&u),u>>>=5,c-=5,r.ncode=4+(15&u),u>>>=4,c-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=lt;break}r.have=0,r.mode=J;case J:for(;r.have<r.ncode;){for(;c<3;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.lens[Ct[r.have++]]=7&u,u>>>=3,c-=3}for(;r.have<19;)r.lens[Ct[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Et={bits:r.lenbits},zt=w(v,r.lens,0,19,r.lencode,0,r.work,Et),r.lenbits=Et.bits,zt){t.msg="invalid code lengths set",r.mode=lt;break}r.have=0,r.mode=Q;case Q:for(;r.have<r.nlen+r.ndist;){for(;mt=r.lencode[u&(1<<r.lenbits)-1],gt=mt>>>24,bt=mt>>>16&255,wt=65535&mt,!(gt<=c);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(wt<16)u>>>=gt,c-=gt,r.lens[r.have++]=wt;else{if(16===wt){for(St=gt+2;c<St;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u>>>=gt,c-=gt,0===r.have){t.msg="invalid bit length repeat",r.mode=lt;break}xt=r.lens[r.have-1],ct=3+(3&u),u>>>=2,c-=2}else if(17===wt){for(St=gt+3;c<St;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}c-=gt,xt=0,ct=3+(7&(u>>>=gt)),u>>>=3,c-=3}else{for(St=gt+7;c<St;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}c-=gt,xt=0,ct=11+(127&(u>>>=gt)),u>>>=7,c-=7}if(r.have+ct>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=lt;break}for(;ct--;)r.lens[r.have++]=xt}}if(r.mode===lt)break;if(0===r.lens[256]){t.msg="invalid code -- missing end-of-block",r.mode=lt;break}if(r.lenbits=9,Et={bits:r.lenbits},zt=w(y,r.lens,0,r.nlen,r.lencode,0,r.work,Et),r.lenbits=Et.bits,zt){t.msg="invalid literal/lengths set",r.mode=lt;break}if(r.distbits=6,r.distcode=r.distdyn,Et={bits:r.distbits},zt=w(k,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Et),r.distbits=Et.bits,zt){t.msg="invalid distances set",r.mode=lt;break}if(r.mode=$,e===A)break t;case $:r.mode=tt;case tt:if(d>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,b(t,ut),o=t.next_out,a=t.output,l=t.avail_out,s=t.next_in,i=t.input,d=t.avail_in,u=r.hold,c=r.bits,r.mode===K&&(r.back=-1);break}for(r.back=0;mt=r.lencode[u&(1<<r.lenbits)-1],gt=mt>>>24,bt=mt>>>16&255,wt=65535&mt,!(gt<=c);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(bt&&0==(240&bt)){for(vt=gt,yt=bt,kt=wt;mt=r.lencode[kt+((u&(1<<vt+yt)-1)>>vt)],gt=mt>>>24,bt=mt>>>16&255,wt=65535&mt,!(vt+gt<=c);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=vt,c-=vt,r.back+=vt}if(u>>>=gt,c-=gt,r.back+=gt,r.length=wt,0===bt){r.mode=at;break}if(32&bt){r.back=-1,r.mode=K;break}if(64&bt){t.msg="invalid literal/length code",r.mode=lt;break}r.extra=15&bt,r.mode=et;case et:if(r.extra){for(St=r.extra;c<St;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=rt;case rt:for(;mt=r.distcode[u&(1<<r.distbits)-1],gt=mt>>>24,bt=mt>>>16&255,wt=65535&mt,!(gt<=c);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(0==(240&bt)){for(vt=gt,yt=bt,kt=wt;mt=r.distcode[kt+((u&(1<<vt+yt)-1)>>vt)],gt=mt>>>24,bt=mt>>>16&255,wt=65535&mt,!(vt+gt<=c);){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}u>>>=vt,c-=vt,r.back+=vt}if(u>>>=gt,c-=gt,r.back+=gt,64&bt){t.msg="invalid distance code",r.mode=lt;break}r.offset=wt,r.extra=15&bt,r.mode=nt;case nt:if(r.extra){for(St=r.extra;c<St;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=lt;break}r.mode=it;case it:if(0===l)break t;if(ct=ut-l,r.offset>ct){if((ct=r.offset-ct)>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=lt;break}ct>r.wnext?(ct-=r.wnext,pt=r.wsize-ct):pt=r.wnext-ct,ct>r.length&&(ct=r.length),_t=r.window}else _t=a,pt=o-r.offset,ct=r.length;ct>l&&(ct=l),l-=ct,r.length-=ct;do{a[o++]=_t[pt++]}while(--ct);0===r.length&&(r.mode=tt);break;case at:if(0===l)break t;a[o++]=r.length,l--,r.mode=tt;break;case st:if(r.wrap){for(;c<32;){if(0===d)break t;d--,u|=i[s++]<<c,c+=8}if(ut-=l,t.total_out+=ut,r.total+=ut,ut&&(t.adler=r.check=r.flags?g(r.check,a,ut,o-ut):m(r.check,a,ut,o-ut)),ut=l,(r.flags?u:n(u))!==r.check){t.msg="incorrect data check",r.mode=lt;break}u=0,c=0}r.mode=ot;case ot:if(r.wrap&&r.flags){for(;c<32;){if(0===d)break t;d--,u+=i[s++]<<c,c+=8}if(u!==(4294967295&r.total)){t.msg="incorrect length check",r.mode=lt;break}u=0,c=0}r.mode=dt;case dt:zt=S;break t;case lt:zt=B;break t;case ht:return O;case ft:default:return I}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=d,r.hold=u,r.bits=c,(r.wsize||ut!==t.avail_out&&r.mode<lt&&(r.mode<st||e!==x))&&f(t,t.output,t.next_out,ut-t.avail_out)?(r.mode=ht,O):(p-=t.avail_in,ut-=t.avail_out,t.total_in+=p,t.total_out+=ut,r.total+=ut,r.wrap&&ut&&(t.adler=r.check=r.flags?g(r.check,a,ut,t.next_out-ut):m(r.check,a,ut,t.next_out-ut)),t.data_type=r.bits+(r.last?64:0)+(r.mode===K?128:0)+(r.mode===$||r.mode===W?256:0),(0===p&&0===ut||e===x)&&zt===E&&(zt=R),zt)}function c(t){if(!t||!t.state)return I;var e=t.state;return e.window&&(e.window=null),t.state=null,E}function p(t,e){var r;return t&&t.state?0==(2&(r=t.state).wrap)?I:(r.head=e,e.done=!1,E):I}var _=t("../utils/common"),m=t("./adler32"),g=t("./crc32"),b=t("./inffast"),w=t("./inftrees"),v=0,y=1,k=2,x=4,z=5,A=6,E=0,S=1,C=2,I=-2,B=-3,O=-4,R=-5,T=8,D=1,L=2,N=3,U=4,F=5,P=6,Z=7,M=8,j=9,H=10,X=11,K=12,V=13,Y=14,W=15,q=16,G=17,J=18,Q=19,$=20,tt=21,et=22,rt=23,nt=24,it=25,at=26,st=27,ot=28,dt=29,lt=30,ht=31,ft=32,ut=852,ct=592,pt=15,_t=15,mt=!0,gt,bt;r.inflateReset=s,r.inflateReset2=o,r.inflateResetKeep=a,r.inflateInit=l,r.inflateInit2=d,r.inflate=u,r.inflateEnd=c,r.inflateGetHeader=p,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":27,"./adler32":29,"./crc32":31,"./inffast":34,"./inftrees":36}],36:[function(t,e,r){"use strict";var n=t("../utils/common"),i=15,a=852,s=592,o=0,d=1,l=2,h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function t(e,r,i,a,s,o,d,l){var p=l.bits,_=0,m=0,g=0,b=0,w=0,v=0,y=0,k=0,x=0,z=0,A,E,S,C,I,B=null,O=0,R,T=new n.Buf16(16),D=new n.Buf16(16),L=null,N=0,U,F,P;for(_=0;_<=15;_++)T[_]=0;for(m=0;m<a;m++)T[r[i+m]]++;for(w=p,b=15;b>=1&&0===T[b];b--);if(w>b&&(w=b),0===b)return s[o++]=20971520,s[o++]=20971520,l.bits=1,0;for(g=1;g<b&&0===T[g];g++);for(w<g&&(w=g),k=1,_=1;_<=15;_++)if(k<<=1,(k-=T[_])<0)return-1;if(k>0&&(0===e||1!==b))return-1;for(D[1]=0,_=1;_<15;_++)D[_+1]=D[_]+T[_];for(m=0;m<a;m++)0!==r[i+m]&&(d[D[r[i+m]]++]=m);if(0===e?(B=L=d,R=19):1===e?(B=h,O-=257,L=f,N-=257,R=256):(B=u,L=c,R=-1),z=0,m=0,_=g,I=o,v=w,y=0,S=-1,x=1<<w,C=x-1,1===e&&x>852||2===e&&x>592)return 1;for(var Z=0;;){Z++,U=_-y,d[m]<R?(F=0,P=d[m]):d[m]>R?(F=L[N+d[m]],P=B[O+d[m]]):(F=96,P=0),A=1<<_-y,g=E=1<<v;do{s[I+(z>>y)+(E-=A)]=U<<24|F<<16|P|0}while(0!==E);for(A=1<<_-1;z&A;)A>>=1;if(0!==A?(z&=A-1,z+=A):z=0,m++,0==--T[_]){if(_===b)break;_=r[i+d[m]]}if(_>w&&(z&C)!==S){for(0===y&&(y=w),I+=g,k=1<<(v=_-y);v+y<b&&!((k-=T[v+y])<=0);)v++,k<<=1;if(x+=1<<v,1===e&&x>852||2===e&&x>592)return 1;s[S=z&C]=w<<24|v<<16|I-o|0}}return 0!==z&&(s[I+z]=_-y<<24|64<<16|0),l.bits=w,0}},{"../utils/common":27}],37:[function(t,e,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],38:[function(t,e,r){"use strict";function n(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t){return t<256?st[t]:st[256+(t>>>7)]}function a(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function s(t,e,r){t.bi_valid>Y-r?(t.bi_buf|=e<<t.bi_valid&65535,a(t,t.bi_buf),t.bi_buf=e>>Y-t.bi_valid,t.bi_valid+=r-Y):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=r)}function o(t,e,r){s(t,r[2*e],r[2*e+1])}function d(t,e){var r=0;do{r|=1&t,t>>>=1,r<<=1}while(--e>0);return r>>>1}function l(t){16===t.bi_valid?(a(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var r=e.dyn_tree,n=e.max_code,i=e.stat_desc.static_tree,a=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,o=e.stat_desc.extra_base,d=e.stat_desc.max_length,l,h,f,u,c,p,_=0;for(u=0;u<=V;u++)t.bl_count[u]=0;for(r[2*t.heap[t.heap_max]+1]=0,l=t.heap_max+1;l<K;l++)(u=r[2*r[2*(h=t.heap[l])+1]+1]+1)>d&&(u=d,_++),r[2*h+1]=u,h>n||(t.bl_count[u]++,c=0,h>=o&&(c=s[h-o]),p=r[2*h],t.opt_len+=p*(u+c),a&&(t.static_len+=p*(i[2*h+1]+c)));if(0!==_){do{for(u=d-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[d]--,_-=2}while(_>0);for(u=d;0!==u;u--)for(h=t.bl_count[u];0!==h;)(f=t.heap[--l])>n||(r[2*f+1]!==u&&(t.opt_len+=(u-r[2*f+1])*r[2*f],r[2*f+1]=u),h--)}}function f(t,e,r){var n=new Array(V+1),i=0,a,s;for(a=1;a<=V;a++)n[a]=i=i+r[a-1]<<1;for(s=0;s<=e;s++){var o=t[2*s+1];0!==o&&(t[2*s]=d(n[o]++,o))}}function u(){var t,e,r,n,i,a=new Array(V+1);for(r=0,n=0;n<Z-1;n++)for(dt[n]=r,t=0;t<1<<$[n];t++)ot[r++]=n;for(ot[r-1]=n,i=0,n=0;n<16;n++)for(lt[n]=i,t=0;t<1<<tt[n];t++)st[i++]=n;for(i>>=7;n<H;n++)for(lt[n]=i<<7,t=0;t<1<<tt[n]-7;t++)st[256+i++]=n;for(e=0;e<=V;e++)a[e]=0;for(t=0;t<=143;)it[2*t+1]=8,t++,a[8]++;for(;t<=255;)it[2*t+1]=9,t++,a[9]++;for(;t<=279;)it[2*t+1]=7,t++,a[7]++;for(;t<=287;)it[2*t+1]=8,t++,a[8]++;for(f(it,j+1,a),t=0;t<H;t++)at[2*t+1]=5,at[2*t]=d(t,5);ft=new ht(it,$,M+1,j,V),ut=new ht(at,tt,0,H,V),ct=new ht(new Array(0),et,0,X,W)}function c(t){var e;for(e=0;e<j;e++)t.dyn_ltree[2*e]=0;for(e=0;e<H;e++)t.dyn_dtree[2*e]=0;for(e=0;e<X;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*q]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function p(t){t.bi_valid>8?a(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function _(t,e,r,n){p(t),n&&(a(t,r),a(t,~r)),B.arraySet(t.pending_buf,t.window,e,r,t.pending),t.pending+=r}function m(t,e,r,n){var i=2*e,a=2*r;return t[i]<t[a]||t[i]===t[a]&&n[e]<=n[r]}function g(t,e,r){for(var n=t.heap[r],i=r<<1;i<=t.heap_len&&(i<t.heap_len&&m(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!m(e,n,t.heap[i],t.depth));)t.heap[r]=t.heap[i],r=i,i<<=1;t.heap[r]=n}function b(t,e,r){var n,a,d=0,l,h;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*d]<<8|t.pending_buf[t.d_buf+2*d+1],a=t.pending_buf[t.l_buf+d],d++,0===n?o(t,a,e):(o(t,(l=ot[a])+M+1,e),0!==(h=$[l])&&s(t,a-=dt[l],h),o(t,l=i(--n),r),0!==(h=tt[l])&&s(t,n-=lt[l],h))}while(d<t.last_lit);o(t,q,e)}function w(t,e){var r=e.dyn_tree,n=e.stat_desc.static_tree,i=e.stat_desc.has_stree,a=e.stat_desc.elems,s,o,d=-1,l;for(t.heap_len=0,t.heap_max=K,s=0;s<a;s++)0!==r[2*s]?(t.heap[++t.heap_len]=d=s,t.depth[s]=0):r[2*s+1]=0;for(;t.heap_len<2;)r[2*(l=t.heap[++t.heap_len]=d<2?++d:0)]=1,t.depth[l]=0,t.opt_len--,i&&(t.static_len-=n[2*l+1]);for(e.max_code=d,s=t.heap_len>>1;s>=1;s--)g(t,r,s);l=a;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],g(t,r,1),o=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=o,r[2*l]=r[2*s]+r[2*o],t.depth[l]=(t.depth[s]>=t.depth[o]?t.depth[s]:t.depth[o])+1,r[2*s+1]=r[2*o+1]=l,t.heap[1]=l++,g(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),f(r,d,t.bl_count)}function v(t,e,r){var n,i=-1,a,s=e[1],o=0,d=7,l=4;for(0===s&&(d=138,l=3),e[2*(r+1)+1]=65535,n=0;n<=r;n++)a=s,s=e[2*(n+1)+1],++o<d&&a===s||(o<l?t.bl_tree[2*a]+=o:0!==a?(a!==i&&t.bl_tree[2*a]++,t.bl_tree[2*G]++):o<=10?t.bl_tree[2*J]++:t.bl_tree[2*Q]++,o=0,i=a,0===s?(d=138,l=3):a===s?(d=6,l=3):(d=7,l=4))}function y(t,e,r){var n,i=-1,a,d=e[1],l=0,h=7,f=4;for(0===d&&(h=138,f=3),n=0;n<=r;n++)if(a=d,d=e[2*(n+1)+1],!(++l<h&&a===d)){if(l<f)do{o(t,a,t.bl_tree)}while(0!=--l);else 0!==a?(a!==i&&(o(t,a,t.bl_tree),l--),o(t,G,t.bl_tree),s(t,l-3,2)):l<=10?(o(t,J,t.bl_tree),s(t,l-3,3)):(o(t,Q,t.bl_tree),s(t,l-11,7));l=0,i=a,0===d?(h=138,f=3):a===d?(h=6,f=3):(h=7,f=4)}}function k(t){var e;for(v(t,t.dyn_ltree,t.l_desc.max_code),v(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=X-1;e>=3&&0===t.bl_tree[2*rt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function x(t,e,r,n){var i;for(s(t,e-257,5),s(t,r-1,5),s(t,n-4,4),i=0;i<n;i++)s(t,t.bl_tree[2*rt[i]+1],3);y(t,t.dyn_ltree,e-1),y(t,t.dyn_dtree,r-1)}function z(t){var e=4093624447,r;for(r=0;r<=31;r++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*r])return R;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return T;for(r=32;r<M;r++)if(0!==t.dyn_ltree[2*r])return T;return R}function A(t){_t||(u(),_t=!0),t.l_desc=new pt(t.dyn_ltree,ft),t.d_desc=new pt(t.dyn_dtree,ut),t.bl_desc=new pt(t.bl_tree,ct),t.bi_buf=0,t.bi_valid=0,c(t)}function E(t,e,r,n){s(t,(L<<1)+(n?1:0),3),_(t,e,r,!0)}function S(t){s(t,N<<1,3),o(t,q,it),l(t)}function C(t,e,r,n){var i,a,o=0;t.level>0?(t.strm.data_type===D&&(t.strm.data_type=z(t)),w(t,t.l_desc),w(t,t.d_desc),o=k(t),i=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=i&&(i=a)):i=a=r+5,r+4<=i&&-1!==e?E(t,e,r,n):t.strategy===O||a===i?(s(t,(N<<1)+(n?1:0),3),b(t,it,at)):(s(t,(U<<1)+(n?1:0),3),x(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),b(t,t.dyn_ltree,t.dyn_dtree)),c(t),n&&p(t)}function I(t,e,r){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===e?t.dyn_ltree[2*r]++:(t.matches++,e--,t.dyn_ltree[2*(ot[r]+M+1)]++,t.dyn_dtree[2*i(e)]++),t.last_lit===t.lit_bufsize-1}var B=t("../utils/common"),O=4,R=0,T=1,D=2,L=0,N=1,U=2,F=3,P=258,Z=29,M=256,j=M+1+Z,H=30,X=19,K=2*j+1,V=15,Y=16,W=7,q=256,G=16,J=17,Q=18,$=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],tt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],et=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],nt=512,it=new Array(2*(j+2));n(it);var at=new Array(2*H);n(at);var st=new Array(512);n(st);var ot=new Array(256);n(ot);var dt=new Array(Z);n(dt);var lt=new Array(H);n(lt);var ht=function(t,e,r,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=t&&t.length},ft,ut,ct,pt=function(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e},_t=!1;r._tr_init=A,r._tr_stored_block=E,r._tr_flush_block=C,r._tr_tally=I,r._tr_align=S},{"../utils/common":27}],39:[function(t,e,r){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},{}]},{},[9])(9)})}).call(this),function(){var t=t=window.saveAs||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,a=function(r){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},s=t.webkitRequestFileSystem,o=t.requestFileSystem||s||t.mozRequestFileSystem,d=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},l="application/octet-stream",h=0,f=500,u=function(e){var n=function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()};t.chrome?n():setTimeout(n,500)},c=function(t,e,r){for(var n=(e=[].concat(e)).length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(t){d(t)}}},p=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},_=function(e,d){var f=this,_=(e=p(e)).type,m=!1,g,b,w=function(){c(f,"writestart progress write writeend".split(" "))},v=function(){!m&&g||(g=r().createObjectURL(e)),b?b.location.href=g:void 0==t.open(g,"_blank")&&"undefined"!=typeof safari&&(t.location.href=g),f.readyState=f.DONE,w(),u(g)},y=function(t){return function(){if(f.readyState!==f.DONE)return t.apply(this,arguments)}},k={create:!0,exclusive:!1},x;if(f.readyState=f.INIT,d||(d="download"),i)return g=r().createObjectURL(e),n.href=g,n.download=d,a(n),f.readyState=f.DONE,w(),void u(g);t.chrome&&_&&_!==l&&(x=e.slice||e.webkitSlice,e=x.call(e,0,e.size,l),m=!0),s&&"download"!==d&&(d+=".download"),(_===l||s)&&(b=t),o?(h+=e.size,o(t.TEMPORARY,h,y(function(t){t.root.getDirectory("saved",k,y(function(t){var r=function(){t.getFile(d,k,y(function(t){t.createWriter(y(function(r){r.onwriteend=function(e){b.location.href=t.toURL(),f.readyState=f.DONE,c(f,"writeend",e),u(t)},r.onerror=function(){var t=r.error;t.code!==t.ABORT_ERR&&v()},"writestart progress write abort".split(" ").forEach(function(t){r["on"+t]=f["on"+t]}),r.write(e),f.abort=function(){r.abort(),f.readyState=f.DONE},f.readyState=f.WRITING}),v)}),v)};t.getFile(d,{create:!1},y(function(t){t.remove(),r()}),y(function(t){t.code===t.NOT_FOUND_ERR?r():v()}))}),v)}),v)):v()},m=_.prototype,g=function(t,e){return new _(t,e)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e){return navigator.msSaveOrOpenBlob(p(t),e)}:(m.abort=function(){var t=this;t.readyState=t.DONE,c(t,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=t=window.saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return t}),window.saveAs=t}.call(this),function(){"undefined"!=typeof window&&(n=void 0!==window.JSZip?window.JSZip:require("JSZip"))}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),function(t,e){for(var r in e)r in t||(t[r]=e[r])}(Package["silentcicero:jszip"]={},{JSZip:n})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package.underscore._,i;(function(){(function(){var e=function(e,t){var n=this;if(n._eventEmitter.maxListeners&&t>n._eventEmitter.maxListeners)return"warning: possible EventEmitter memory leak detected. "+t+' listeners added on event "'+e+'". Use emitter.setMaxListeners() to increase limit. ('+n._eventEmitter.maxListeners+")"};(i=function(e){var t=this;if(!(t instanceof i))throw new Error('use "new" to construct an EventEmitter');e=e||{},t._eventEmitter={onListeners:{},onceListeners:{},maxListeners:e.maxListeners||10}}).prototype.setMaxListeners=function(e){this._eventEmitter.maxListeners=e};var t=function(t,n,r){return void 0===t[n]&&(t[n]=[]),e.apply(this,[n,t[n].push(r)])};i.prototype.on=function(e,n){var r=t.apply(this,[this._eventEmitter.onListeners,e,n]);return r&&console.warn(new Error(r).stack),this},i.prototype.once=function(e,n){var r=t.apply(this,[this._eventEmitter.onceListeners,e,n]);return r&&console.warn(new Error(r).stack),this};var n=function(e,t){var n=this,i=0;return void 0!==e&&r.each(e,function(e){i++,e.apply(n,t)}),i};i.prototype.emit=function(e){var t=this,i=r.rest(arguments),o=0,s=t._eventEmitter.onceListeners[e];return t._eventEmitter.onceListeners[e]=[],o+=n.call(t,t._eventEmitter.onListeners[e],i),(o+=n.call(t,s,i))>0};var o=function(e,t){for(var n=!1,r=[],i=0;i<e.length;i++)n||e[i]!==t?r.push(e[i]):n=!0;return r};i.prototype.off=function(e,t){var n=this;e?"function"==typeof t?(void 0!==n._eventEmitter.onListeners[e]&&(n._eventEmitter.onListeners[e]=o(n._eventEmitter.onListeners[e],t)),void 0!==n._eventEmitter.onceListeners[e]&&(n._eventEmitter.onceListeners[e]=o(n._eventEmitter.onceListeners[e],t))):(n._eventEmitter.onListeners[e]=[],n._eventEmitter.onceListeners[e]=[]):(n._eventEmitter.onListeners={},n._eventEmitter.onceListeners={})},i.prototype.addListener=i.prototype.on,i.prototype.removeListener=i.prototype.off,i.prototype.removeAllListeners=i.prototype.off,i.prototype.one=i.prototype.once,i.prototype.trigger=i.prototype.emit}).call(this)}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["raix:eventemitter"]={},{EventEmitter:i})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,i=Package.meteor.meteorEnv,n=Package["aldeed:simple-schema"].SimpleSchema,r=Package["aldeed:simple-schema"].MongoObject,o=Package.underscore._,a=Package.check.check,s=Package.check.Match,c=Package.mongo.Mongo,l=Package.minimongo.LocalCollection,m=Package.minimongo.Minimongo,u=Package.ejson.EJSON,d=Package["raix:eventemitter"].EventEmitter,f;(function(){function t(t,n,r,l,m){function u(e,i,n,r,a,s){E.clean(e,{mutate:!0,filter:n,autoConvert:r,getAutoValues:i,isModifier:"insert"!==t,removeEmptyStrings:a,trimStrings:s,extendAutoValueContext:o.extend({isInsert:"insert"===t,isUpdate:"update"===t&&!0!==v.upsert,isUpsert:_,userId:l,isFromTrustedCode:m,docId:I,isLocalCollection:k},v.extendAutoValueContext||{})})}var d=this,f,p,h,v,_,g,y,S;if(!n.length)throw new Error(t+" requires an argument");if("insert"===t)f=n[0],v=n[1],p=n[2],n="function"==typeof v?[f,v]:"function"==typeof p?[f,p]:[f];else{if("update"!==t)throw new Error("invalid type argument");g=n[0],f=n[1],v=n[2],p=n[3]}var C=o.isEmpty(f);p||"function"!=typeof v||(p=v,v={}),v=v||{},S="function"==typeof n[y=n.length-1],_="update"===t&&!0===v.upsert;var E=d.simpleSchema(f,v,g),k=null===d._connection;(e.isServer||k)&&!1===v.getAutoValues&&(r=!1);var w=v.validationContext;w?"string"==typeof w&&(w=E.namedContext(w)):w=E.namedContext(),e.isClient&&!p&&(p=function(i){i&&e._debug(t+" failed: "+(i.reason||i.stack))}),e.isClient&&S&&(p=n[y]=s(w,p));var x=E.allowsKey("_id");"insert"===t&&!f._id&&x&&(f._id=d._makeNewID());var I;"insert"===t?I=f._id:"update"===t&&g&&(I="string"==typeof g||g instanceof c.ObjectID?g:g._id);var P;f._id&&!x&&(P=f._id,delete f._id),u(f,r,!1!==v.filter,!1!==v.autoConvert,!1!==v.removeEmptyStrings,!1!==v.trimStrings);var A={};for(var M in f)f.hasOwnProperty(M)&&(A[M]=f[M]);if(e.isServer&&_&&o.isObject(g)){var O=A.$set||{};A.$set=o.clone(g),x||delete A.$set._id,o.extend(A.$set,O)}if(e.isClient&&!k&&u(A,!0,!1,!1,!1,!1),!C&&o.isEmpty(A))throw new Error("After filtering out keys not in the schema, your "+("update"===t?"modifier":"object")+" is now empty");var V;if(V=!1===v.validate||w.validate(A,{modifier:"update"===t||"upsert"===t,upsert:_,extendedCustomContext:o.extend({isInsert:"insert"===t,isUpdate:"update"===t&&!0!==v.upsert,isUpsert:_,userId:l,isFromTrustedCode:m,docId:I,isLocalCollection:k},v.extendedCustomContext||{})}))return P&&(f._id=P),"insert"===t?n[0]=f:n[1]=f,e.isServer&&S&&(n[y]=a(w,n[y])),n;if(h=i(w),!p)throw h;p(h,!1)}function i(t){var i,r=n.version>=2?t.validationErrors():t.invalidKeys();i=r.length?t.keyErrorMessage(r[0].name):"Failed validation";var o=new Error(i);return o.invalidKeys=r,o.validationContext=t,e.isServer&&(o.sanitizedError=new e.Error(400,i,u.stringify(o.invalidKeys))),o}function r(e,t){var i=t.split("c2_")[1].split(" ")[0],n=t.split("dup key:")[1].split('"')[1];e[h]([{name:i,type:"notUnique",value:n}])}function a(e,t){return function n(a){var s=o.toArray(arguments);return a&&("MongoError"===a.name&&11001===a.code||a.message.indexOf(!0))&&-1!==a.message.indexOf("c2_")&&(r(e,a.message),s[0]=i(e)),t.apply(this,s)}}function s(t,n){return function a(s){var c=o.toArray(arguments);if(s instanceof e.Error&&400===s.error&&"INVALID"===s.reason&&"string"==typeof s.details){var l=u.parse(s.details);t[h](l),c[0]=i(t)}else s instanceof e.Error&&409===s.error&&s.reason&&-1!==s.reason.indexOf("E11000")&&-1!==s.reason.indexOf("c2_")&&(r(t,s.reason),c[0]=i(t));return n.apply(this,c)}}function m(e){Package&&Package.insecure&&!v[e._name]&&(e.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null}),v[e._name]=!0)}function p(i,n){if(!_[i._name]){var r=null===i._connection;i.deny({insert:function(e,t){return i.simpleSchema(t).clean(t,{mutate:!0,isModifier:!1,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!0,isUpdate:!1,isUpsert:!1,userId:e,isFromTrustedCode:!1,docId:t._id,isLocalCollection:r}}),!1},update:function(e,t,n,o){return i.simpleSchema(o).clean(o,{mutate:!0,isModifier:!0,filter:!1,autoConvert:!1,removeEmptyStrings:!1,trimStrings:!1,extendAutoValueContext:{isInsert:!1,isUpdate:!0,isUpsert:!1,userId:e,isFromTrustedCode:!1,docId:t&&t._id,isLocalCollection:r}}),!1},fetch:["_id"],transform:null}),i.deny(o.extend({insert:function(n,r){return t.call(i,"insert",[r,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(t){if(t)throw new e.Error(400,"INVALID",u.stringify(t.invalidKeys))}],!1,n,!1),!1},update:function(n,r,o,a){return t.call(i,"update",[{_id:r&&r._id},a,{trimStrings:!1,removeEmptyStrings:!1,filter:!1,autoConvert:!1},function(t){if(t)throw new e.Error(400,"INVALID",u.stringify(t.invalidKeys))}],!1,n,!1),!1},fetch:["_id"]},!0===n.transform?{}:{transform:null})),_[i._name]=!0}}f=new d,void 0===c&&((c={}).Collection=e.Collection);var h=n.version>=2?"addValidationErrors":"addInvalidKeys";c.Collection.prototype.attachSchema=function e(t,i){function r(e){if("object"==typeof c){var r=-1;e._c2._simpleSchemas=e._c2._simpleSchemas||[],e._c2._simpleSchemas.forEach(function(e,t){o.isEqual(e.selector,c)&&(r=t)}),-1===r?e._c2._simpleSchemas.push({schema:new n(t),selector:c}):!0!==i.replace?e._c2._simpleSchemas[r].schema.version>=2?e._c2._simpleSchemas[r].schema.extend(t):e._c2._simpleSchemas[r].schema=new n([e._c2._simpleSchemas[r].schema,t]):e._c2._simpleSchemas[r].schema=t,delete e._c2._simpleSchema}else e._c2._simpleSchema=t,delete e._c2._simpleSchemas}var a=this;if(i=i||{},t instanceof n||(t=new n(t)),a._c2=a._c2||{},a._c2._simpleSchema&&!0!==i.replace)if(t.version>=2){var s=new n(a._c2._simpleSchema);s.extend(t),t=s}else t=new n([a._c2._simpleSchema,t]);var c=i.selector;r(a),a._collection instanceof l&&(a._collection._c2=a._collection._c2||{},r(a._collection)),p(a,i),m(a),f.emit("schema.attached",a,t,i)},o.each([c.Collection,l],function(e){e.prototype.simpleSchema=function(e,t,i){if(!this._c2)return null;if(this._c2._simpleSchema)return this._c2._simpleSchema;var n=this._c2._simpleSchemas;if(n&&n.length>0){if(!e)throw new Error("collection.simpleSchema() requires doc argument when there are multiple schemas");for(var r,o,a,s=0;s<n.length;s++)if(r=n[s],o=Object.keys(r.selector)[0],a=void 0,e.$set&&void 0!==e.$set[o]?a=e.$set[o]:void 0!==e[o]?a=e[o]:t&&t.selector?a=t.selector[o]:i&&i[o]&&(a=i[o]),void 0!==a&&a===r.selector[o])return r.schema}return null}}),o.each(["insert","update"],function(i){var n=c.Collection.prototype[i];c.Collection.prototype[i]=function(){var r=this,a,s=o.toArray(arguments);if((a="insert"===i?s[1]:s[2])&&"function"!=typeof a||(a={}),r._c2&&!0!==a.bypassCollection2){var c=null;try{c=e.userId()}catch(e){}if(!(s=t.call(r,i,s,!0,c,e.isServer)))return"insert"===i?r._makeNewID():void 0}else"insert"===i&&"function"!=typeof s[1]&&s.splice(1,1);return n.apply(r,s)}});var v={},_={}}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var i in t)i in e||(e[i]=t[i])}(Package["aldeed:collection2-core"]={},{Collection2:f})}();

!function(){var e=Package.meteor.Meteor,a=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["aldeed:collection2-core"].Collection2,c=Package.underscore._,i=Package.minimongo.LocalCollection,t=Package.minimongo.Minimongo,s=Package.check.check,l=Package.check.Match,m=Package.modules.meteorInstall,r=Package["babel-runtime"].meteorBabelHelpers,u=Package.promise.Promise,g=Package["aldeed:simple-schema"].SimpleSchema,d=Package["aldeed:simple-schema"].MongoObject,k=Package.mongo.Mongo,p=Package["ecmascript-runtime-client"].Symbol,P=Package["ecmascript-runtime-client"].Map,h=Package["ecmascript-runtime-client"].Set;m({node_modules:{meteor:{"aldeed:schema-index":{lib:{"indexing.js":function(){g.extendOptions({index:l.Optional(l.OneOf(Number,String,Boolean)),unique:l.Optional(Boolean),sparse:l.Optional(Boolean)}),(!g.version||g.version<2)&&g.messages({notUnique:"[label] must be unique"}),e.isServer&&o.on("schema.attached",function(a,n){function o(n,o,c,i){e.startup(function(){a._collection._ensureIndex(n,{background:!0,name:o,unique:c,sparse:i})})}function i(n){e.startup(function(){try{a._collection._dropIndex(n)}catch(e){}})}n.version>=2&&n.messageBox.messages({notUnique:"{{label}} must be unique"});var t=2===n.version?"mergedSchema":"schema";c.each(n[t](),function(e,a){if("index"in e||!0===e.unique){var n={},c;"index"in e?!0===(c=e.index)&&(c=1):c=1;var t="c2_"+a;n[a.replace(/\.\$\./g,".")]=c;var s=!!e.unique&&(1===c||-1===c),l=e.sparse||!1;!l&&s&&e.optional&&(l=!0),!1===c?i(t):o(n,t,s,l)}})})}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/aldeed:schema-index/lib/indexing.js"),"undefined"==typeof Package&&(Package={}),Package["aldeed:schema-index"]={}}();

!function(){var e=Package.meteor.Meteor,a=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["aldeed:collection2-core"].Collection2,t=Package.underscore._,i=Package.minimongo.LocalCollection,c=Package.minimongo.Minimongo,l=Package.check.check,s=Package.check.Match,d=Package["aldeed:simple-schema"].SimpleSchema,g=Package["aldeed:simple-schema"].MongoObject,r=Package.mongo.Mongo;(function(){d.extendOptions({denyInsert:s.Optional(Boolean),denyUpdate:s.Optional(Boolean)}),(!d.version||d.version<2)&&d.messages({insertNotAllowed:"[label] cannot be set during an insert",updateNotAllowed:"[label] cannot be set during an update"}),o.on("schema.attached",function(e,a){a.version>=2&&a.messageBox.messages({insertNotAllowed:"{{label}} cannot be set during an insert",updateNotAllowed:"{{label}} cannot be set during an update"}),a.addValidator(function(){if(this.isSet){var e=this.definition;return e.denyInsert&&this.isInsert?"insertNotAllowed":e.denyUpdate&&(this.isUpdate||this.isUpsert)?"updateNotAllowed":void 0}})})}).call(this),"undefined"==typeof Package&&(Package={}),Package["aldeed:schema-deny"]={}}();

"undefined"==typeof Package&&(Package={}),Package["aldeed:collection2"]={};

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,i=Package.meteor.meteorEnv,o=Package.jquery.$,n=Package.jquery.jQuery;(function(){if(void 0===n)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(n),function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,o=this;t(this).one("bsTransitionEnd",function(){i=!0});var n=function(){i||t(o).trigger(t.support.transition.end)};return setTimeout(n,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(n),function(t){"use strict";function e(e){return this.each(function(){var i=t(this),n=i.data("bs.alert");n||i.data("bs.alert",n=new o(this)),"string"==typeof e&&n[e].call(i)})}var i='[data-dismiss="alert"]',o=function(e){t(e).on("click",i,this.close)};o.VERSION="3.3.6",o.TRANSITION_DURATION=150,o.prototype.close=function(e){function i(){a.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=(s=n.attr("href"))&&s.replace(/.*(?=#[^\s]*$)/,""));var a=t(s);e&&e.preventDefault(),a.length||(a=n.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",i).emulateTransitionEnd(o.TRANSITION_DURATION):i())};var n=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=o,t.fn.alert.noConflict=function(){return t.fn.alert=n,this},t(document).on("click.bs.alert.data-api",i,o.prototype.close)}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.button"),s="object"==typeof e&&e;n||o.data("bs.button",n=new i(this,s)),"toggle"==e?n.toggle():e&&n.setState(e)})}var i=function(e,o){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,o),this.isLoading=!1};i.VERSION="3.3.6",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",o=this.$element,n=o.is("input")?"val":"html",s=o.data();e+="Text",null==s.resetText&&o.data("resetText",o[n]()),setTimeout(t.proxy(function(){o[n](null==s[e]?this.options[e]:s[e]),"loadingText"==e?(this.isLoading=!0,o.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,o.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(t=!1),e.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(t=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),t&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var o=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=o,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var o=t(i.target);o.hasClass("btn")||(o=o.closest(".btn")),e.call(o,"toggle"),t(i.target).is('input[type="radio"]')||t(i.target).is('input[type="checkbox"]')||i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.carousel"),s=t.extend({},i.DEFAULTS,o.data(),"object"==typeof e&&e),a="string"==typeof e?e:s.slide;n||o.data("bs.carousel",n=new i(this,s)),"number"==typeof e?n.to(e):a?n[a]():s.interval&&n.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e);if(("prev"==t&&0===i||"next"==t&&i==this.$items.length-1)&&!this.options.wrap)return e;var o=(i+("prev"==t?-1:1))%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(t>this.$items.length-1||t<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){if(!this.sliding)return this.slide("next")},i.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},i.prototype.slide=function(e,o){var n=this.$element.find(".item.active"),s=o||this.getItemForDirection(e,n),a=this.interval,r="next"==e?"left":"right",l=this;if(s.hasClass("active"))return this.sliding=!1;var h=s[0],d=t.Event("slide.bs.carousel",{relatedTarget:h,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=t(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var c=t.Event("slid.bs.carousel",{relatedTarget:h,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(c)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var o=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=o,this};var n=function(i){var o,n=t(this),s=t(n.attr("data-target")||(o=n.attr("href"))&&o.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var a=t.extend({},s.data(),n.data()),r=n.attr("data-slide-to");r&&(a.interval=!1),e.call(s,a),r&&s.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",n).on("click.bs.carousel.data-api","[data-slide-to]",n),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(n),function(t){"use strict";function e(e){var i,o=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(o)}function i(e){return this.each(function(){var i=t(this),n=i.data("bs.collapse"),s=t.extend({},o.DEFAULTS,i.data(),"object"==typeof e&&e);!n&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),n||i.data("bs.collapse",n=new o(this,s)),"string"==typeof e&&n[e]()})}var o=function(e,i){this.$element=t(e),this.options=t.extend({},o.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};o.VERSION="3.3.6",o.TRANSITION_DURATION=350,o.DEFAULTS={toggle:!0},o.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},o.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,n=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(n&&n.length&&(e=n.data("bs.collapse"))&&e.transitioning)){var s=t.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){n&&n.length&&(i.call(n,"hide"),e||n.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(o.TRANSITION_DURATION)[a](this.$element[0][l])}}}},o.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!t.support.transition)return n.call(this);this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(o.TRANSITION_DURATION)}}},o.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},o.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,o){var n=t(o);this.addAriaAndCollapsedClass(e(n),n)},this)).end()},o.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var n=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=o,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(o){var n=t(this);n.attr("data-target")||o.preventDefault();var s=e(n),a=s.data("bs.collapse")?"toggle":n.data();i.call(s,a)})}(n),function(t){"use strict";function e(e){var i=e.attr("data-target");i||(i=(i=e.attr("href"))&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var o=i&&t(i);return o&&o.length?o:e.parent()}function i(i){i&&3===i.which||(t(n).remove(),t(s).each(function(){var o=t(this),n=e(o),s={relatedTarget:this};n.hasClass("open")&&(i&&"click"==i.type&&/input|textarea/i.test(i.target.tagName)&&t.contains(n[0],i.target)||(n.trigger(i=t.Event("hide.bs.dropdown",s)),i.isDefaultPrevented()||(o.attr("aria-expanded","false"),n.removeClass("open").trigger(t.Event("hidden.bs.dropdown",s)))))}))}function o(e){return this.each(function(){var i=t(this),o=i.data("bs.dropdown");o||i.data("bs.dropdown",o=new a(this)),"string"==typeof e&&o[e].call(i)})}var n=".dropdown-backdrop",s='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.6",a.prototype.toggle=function(o){var n=t(this);if(!n.is(".disabled, :disabled")){var s=e(n),a=s.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var r={relatedTarget:this};if(s.trigger(o=t.Event("show.bs.dropdown",r)),o.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger(t.Event("shown.bs.dropdown",r))}return!1}},a.prototype.keydown=function(i){if(/(38|40|27|32)/.test(i.which)&&!/input|textarea/i.test(i.target.tagName)){var o=t(this);if(i.preventDefault(),i.stopPropagation(),!o.is(".disabled, :disabled")){var n=e(o),a=n.hasClass("open");if(!a&&27!=i.which||a&&27==i.which)return 27==i.which&&n.find(s).trigger("focus"),o.trigger("click");var r=" li:not(.disabled):visible a",l=n.find(".dropdown-menu"+r);if(l.length){var h=l.index(i.target);38==i.which&&h>0&&h--,40==i.which&&h<l.length-1&&h++,~h||(h=0),l.eq(h).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=o,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",s,a.prototype.toggle).on("keydown.bs.dropdown.data-api",s,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(n),function(t){"use strict";function e(e,o){return this.each(function(){var n=t(this),s=n.data("bs.modal"),a=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);s||n.data("bs.modal",s=new i(this,a)),"string"==typeof e?s[e](o):a.show&&s.show(o)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.6",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var o=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var n=t.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),n&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(i.TRANSITION_DURATION):o.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var o=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){o.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var o=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=o,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var o=t(this),n=o.attr("href"),s=t(o.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),a=s.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(n)&&n},s.data(),o.data());o.is("a")&&i.preventDefault(),s.one("show.bs.modal",function(t){t.isDefaultPrevented()||s.one("hidden.bs.modal",function(){o.is(":visible")&&o.trigger("focus")})}),e.call(s,a,this)})}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tooltip"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.tooltip",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,o){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(o),this.$viewport=this.options.viewport&&t(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),s=n.length;s--;){var a=n[s];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var r="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return(e=t.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,o){i[t]!=o&&(e[t]=o)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusin"==e.type?"focus":"hover"]=!0),i.tip().hasClass("in")||"in"==i.hoverState)i.hoverState="in";else{if(clearTimeout(i.timeout),i.hoverState="in",!i.options.delay||!i.options.delay.show)return i.show();i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)}},i.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),e instanceof t.Event&&(i.inState["focusout"==e.type?"focus":"hover"]=!1),!i.isInStateTrue()){if(clearTimeout(i.timeout),i.hoverState="out",!i.options.delay||!i.options.delay.hide)return i.hide();i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)}},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var o=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!o)return;var n=this,s=this.tip(),a=this.getUID(this.type);this.setContent(),s.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,h=l.test(r);h&&(r=r.replace(l,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var d=this.getPosition(),p=s[0].offsetWidth,c=s[0].offsetHeight;if(h){var f=r,u=this.getPosition(this.$viewport);r="bottom"==r&&d.bottom+c>u.bottom?"top":"top"==r&&d.top-c<u.top?"bottom":"right"==r&&d.right+p>u.width?"left":"left"==r&&d.left-p<u.left?"right":r,s.removeClass(f).addClass(r)}var g=this.getCalculatedOffset(r,d,p,c);this.applyPlacement(g,r);var m=function(){var t=n.hoverState;n.$element.trigger("shown.bs."+n.type),n.hoverState=null,"out"==t&&n.leave(n)};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(i.TRANSITION_DURATION):m()}},i.prototype.applyPlacement=function(e,i){var o=this.tip(),n=o[0].offsetWidth,s=o[0].offsetHeight,a=parseInt(o.css("margin-top"),10),r=parseInt(o.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(r)&&(r=0),e.top+=a,e.left+=r,t.offset.setOffset(o[0],t.extend({using:function(t){o.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),o.addClass("in");var l=o[0].offsetWidth,h=o[0].offsetHeight;"top"==i&&h!=s&&(e.top=e.top+s-h);var d=this.getViewportAdjustedDelta(i,e,l,h);d.left?e.left+=d.left:e.top+=d.top;var p=/top|bottom/.test(i),c=p?2*d.left-n+l:2*d.top-s+h,f=p?"offsetWidth":"offsetHeight";o.offset(e),this.replaceArrow(c,o[0][f],p)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function o(){"in"!=n.hoverState&&s.detach(),n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}var n=this,s=t(this.$tip),a=t.Event("hide.bs."+this.type);if(this.$element.trigger(a),!a.isDefaultPrevented())return s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),this.hoverState=null,this},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){var i=(e=e||this.$element)[0],o="BODY"==i.tagName,n=i.getBoundingClientRect();null==n.width&&(n=t.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var s=o?{top:0,left:0}:e.offset(),a={scroll:o?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=o?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},n,a,r,s)},i.prototype.getCalculatedOffset=function(t,e,i,o){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-o,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-o/2,left:e.left-i}:{top:e.top+e.height/2-o/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,o){var n={top:0,left:0};if(!this.$viewport)return n;var s=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-s-a.scroll,l=e.top+s-a.scroll+o;r<a.top?n.top=a.top-r:l>a.top+a.height&&(n.top=a.top+a.height-l)}else{var h=e.left-s,d=e.left+s+i;h<a.left?n.left=a.left-h:d>a.right&&(n.left=a.left+a.width-d)}return n},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},i.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&((i=t(e.currentTarget).data("bs."+this.type))||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),e?(i.inState.click=!i.inState.click,i.isInStateTrue()?i.enter(i):i.leave(i)):i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null})};var o=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=o,this}}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.popover"),s="object"==typeof e&&e;!n&&/destroy|hide/.test(e)||(n||o.data("bs.popover",n=new i(this,s)),"string"==typeof e&&n[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.6",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var o=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=o,this}}(n),function(t){"use strict";function e(i,o){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,o),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var o=t(this),n=o.data("bs.scrollspy"),s="object"==typeof i&&i;n||o.data("bs.scrollspy",n=new e(this,s)),"string"==typeof i&&n[i]()})}e.VERSION="3.3.6",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",o=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",o=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),n=e.data("target")||e.attr("href"),s=/^#./.test(n)&&t(n);return s&&s.length&&s.is(":visible")&&[[s[i]().top+o,n]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t=this.$scrollElement.scrollTop()+this.options.offset,e=this.getScrollHeight(),i=this.options.offset+e-this.$scrollElement.height(),o=this.offsets,n=this.targets,s=this.activeTarget,a;if(this.scrollHeight!=e&&this.refresh(),t>=i)return s!=(a=n[n.length-1])&&this.activate(a);if(s&&t<o[0])return this.activeTarget=null,this.clear();for(a=o.length;a--;)s!=n[a]&&t>=o[a]&&(void 0===o[a+1]||t<o[a+1])&&this.activate(n[a])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',o=t(i).parents("li").addClass("active");o.parent(".dropdown-menu").length&&(o=o.closest("li.dropdown").addClass("active")),o.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var o=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=o,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.tab");n||o.data("bs.tab",n=new i(this)),"string"==typeof e&&n[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),o=e.data("target");if(o||(o=(o=e.attr("href"))&&o.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=i.find(".active:last a"),s=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(s),e.trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){var r=t(o);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},i.prototype.activate=function(e,o,n){function s(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),n&&n()}var a=o.find("> .active"),r=n&&t.support.transition&&(a.length&&a.hasClass("fade")||!!o.find("> .fade").length);a.length&&r?a.one("bsTransitionEnd",s).emulateTransitionEnd(i.TRANSITION_DURATION):s(),a.removeClass("in")};var o=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=o,this};var n=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',n).on("click.bs.tab.data-api",'[data-toggle="pill"]',n)}(n),function(t){"use strict";function e(e){return this.each(function(){var o=t(this),n=o.data("bs.affix"),s="object"==typeof e&&e;n||o.data("bs.affix",n=new i(this,s)),"string"==typeof e&&n[e]()})}var i=function(e,o){this.options=t.extend({},i.DEFAULTS,o),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.6",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,o){var n=this.$target.scrollTop(),s=this.$element.offset(),a=this.$target.height();if(null!=i&&"top"==this.affixed)return n<i&&"top";if("bottom"==this.affixed)return null!=i?!(n+this.unpin<=s.top)&&"bottom":!(n+a<=t-o)&&"bottom";var r=null==this.affixed,l=r?n:s.top,h=r?a:e;return null!=i&&n<=i?"top":null!=o&&l+h>=t-o&&"bottom"},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),o=this.options.offset,n=o.top,s=o.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof o&&(s=n=o),"function"==typeof n&&(n=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var r=this.getState(a,e,n,s);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),h=t.Event(l+".bs.affix");if(this.$element.trigger(h),h.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:a-e-s})}};var o=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=o,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),o=i.data();o.offset=o.offset||{},null!=o.offsetBottom&&(o.offset.bottom=o.offsetBottom),null!=o.offsetTop&&(o.offset.top=o.offsetTop),e.call(i,o)})})}(n)}).call(this),"undefined"==typeof Package&&(Package={}),Package["twbs:bootstrap"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,a=Package.meteor.meteorEnv,i=Package["momentjs:moment"].moment,s=Package.jquery.$,n=Package.jquery.jQuery;(function(){!function(t,e){if("function"==typeof define&&define.amd)define(["moment","jquery","exports"],function(a,i,s){t.daterangepicker=e(t,s,a,i)});else if("undefined"!=typeof exports){var a=require("moment"),s="undefined"!=typeof window?window.jQuery:void 0;if(!s)try{(s=require("jquery")).fn||(s.fn={})}catch(t){if(!s)throw new Error("jQuery dependency not found")}e(t,exports,a,s)}else t.daterangepicker=e(t,{},t.moment||i,t.jQuery||t.Zepto||t.ender||t.$)}(this||{},function(t,e,a,i){var s=function(t,e,s){if(this.parentEl="body",this.element=i(t),this.startDate=a().startOf("day"),this.endDate=a().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.autoApply=!1,this.singleDatePicker=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePicker24Hour=!1,this.timePickerIncrement=1,this.timePickerSeconds=!1,this.linkedCalendars=!0,this.autoUpdateInput=!0,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.drops="down",this.element.hasClass("dropup")&&(this.drops="up"),this.buttonClasses="btn btn-sm",this.applyClass="btn-success",this.cancelClass="btn-default",this.locale={format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:a.weekdaysMin(),monthNames:a.monthsShort(),firstDay:a.localeData().firstDayOfWeek()},this.callback=function(){},this.isShowing=!1,this.leftCalendar={},this.rightCalendar={},"object"==typeof e&&null!==e||(e={}),"string"!=typeof(e=i.extend(this.element.data(),e)).template&&(e.template='<div class="daterangepicker dropdown-menu"><div class="calendar left"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_start" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="calendar right"><div class="daterangepicker_input"><input class="input-mini" type="text" name="daterangepicker_end" value="" /><i class="fa fa-calendar glyphicon glyphicon-calendar"></i><div class="calendar-time"><div></div><i class="fa fa-clock-o glyphicon glyphicon-time"></i></div></div><div class="calendar-table"></div></div><div class="ranges"><div class="range_inputs"><button class="applyBtn" disabled="disabled" type="button"></button> <button class="cancelBtn" type="button"></button></div></div></div>'),this.parentEl=i(e.parentEl&&i(e.parentEl).length?e.parentEl:this.parentEl),this.container=i(e.template).appendTo(this.parentEl),"object"==typeof e.locale&&("string"==typeof e.locale.format&&(this.locale.format=e.locale.format),"string"==typeof e.locale.separator&&(this.locale.separator=e.locale.separator),"object"==typeof e.locale.daysOfWeek&&(this.locale.daysOfWeek=e.locale.daysOfWeek.slice()),"object"==typeof e.locale.monthNames&&(this.locale.monthNames=e.locale.monthNames.slice()),"number"==typeof e.locale.firstDay&&(this.locale.firstDay=e.locale.firstDay),"string"==typeof e.locale.applyLabel&&(this.locale.applyLabel=e.locale.applyLabel),"string"==typeof e.locale.cancelLabel&&(this.locale.cancelLabel=e.locale.cancelLabel),"string"==typeof e.locale.weekLabel&&(this.locale.weekLabel=e.locale.weekLabel),"string"==typeof e.locale.customRangeLabel&&(this.locale.customRangeLabel=e.locale.customRangeLabel)),"string"==typeof e.startDate&&(this.startDate=a(e.startDate,this.locale.format)),"string"==typeof e.endDate&&(this.endDate=a(e.endDate,this.locale.format)),"string"==typeof e.minDate&&(this.minDate=a(e.minDate,this.locale.format)),"string"==typeof e.maxDate&&(this.maxDate=a(e.maxDate,this.locale.format)),"object"==typeof e.startDate&&(this.startDate=a(e.startDate)),"object"==typeof e.endDate&&(this.endDate=a(e.endDate)),"object"==typeof e.minDate&&(this.minDate=a(e.minDate)),"object"==typeof e.maxDate&&(this.maxDate=a(e.maxDate)),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate.clone()),"string"==typeof e.applyClass&&(this.applyClass=e.applyClass),"string"==typeof e.cancelClass&&(this.cancelClass=e.cancelClass),"object"==typeof e.dateLimit&&(this.dateLimit=e.dateLimit),"string"==typeof e.opens&&(this.opens=e.opens),"string"==typeof e.drops&&(this.drops=e.drops),"boolean"==typeof e.showWeekNumbers&&(this.showWeekNumbers=e.showWeekNumbers),"string"==typeof e.buttonClasses&&(this.buttonClasses=e.buttonClasses),"object"==typeof e.buttonClasses&&(this.buttonClasses=e.buttonClasses.join(" ")),"boolean"==typeof e.showDropdowns&&(this.showDropdowns=e.showDropdowns),"boolean"==typeof e.singleDatePicker&&(this.singleDatePicker=e.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),"boolean"==typeof e.timePicker&&(this.timePicker=e.timePicker),"boolean"==typeof e.timePickerSeconds&&(this.timePickerSeconds=e.timePickerSeconds),"number"==typeof e.timePickerIncrement&&(this.timePickerIncrement=e.timePickerIncrement),"boolean"==typeof e.timePicker24Hour&&(this.timePicker24Hour=e.timePicker24Hour),"boolean"==typeof e.autoApply&&(this.autoApply=e.autoApply),"boolean"==typeof e.autoUpdateInput&&(this.autoUpdateInput=e.autoUpdateInput),"boolean"==typeof e.linkedCalendars&&(this.linkedCalendars=e.linkedCalendars),"function"==typeof e.isInvalidDate&&(this.isInvalidDate=e.isInvalidDate),0!=this.locale.firstDay)for(var n=this.locale.firstDay;n>0;)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),n--;var r,h,o;if(void 0===e.startDate&&void 0===e.endDate&&i(this.element).is("input[type=text]")){var l=i(this.element).val(),c=l.split(this.locale.separator);r=h=null,2==c.length?(r=a(c[0],this.locale.format),h=a(c[1],this.locale.format)):this.singleDatePicker&&""!==l&&(r=a(l,this.locale.format),h=a(l,this.locale.format)),null!==r&&null!==h&&(this.setStartDate(r),this.setEndDate(h))}if("object"==typeof e.ranges){for(o in e.ranges){r="string"==typeof e.ranges[o][0]?a(e.ranges[o][0],this.locale.format):a(e.ranges[o][0]),h="string"==typeof e.ranges[o][1]?a(e.ranges[o][1],this.locale.format):a(e.ranges[o][1]),this.minDate&&r.isBefore(this.minDate)&&(r=this.minDate.clone());var d=this.maxDate;if(this.dateLimit&&r.clone().add(this.dateLimit).isAfter(d)&&(d=r.clone().add(this.dateLimit)),d&&h.isAfter(d)&&(h=d.clone()),!(this.minDate&&h.isBefore(this.minDate)||d&&r.isAfter(d))){var m=document.createElement("textarea");m.innerHTML=o;var f=m.value;this.ranges[f]=[r,h]}}var p="<ul>";for(o in this.ranges)p+="<li>"+o+"</li>";p+="<li>"+this.locale.customRangeLabel+"</li>",p+="</ul>",this.container.find(".ranges").prepend(p)}if("function"==typeof s&&(this.callback=s),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day"),this.container.find(".calendar-time").hide()),this.timePicker&&this.autoApply&&(this.autoApply=!1),this.autoApply&&"object"!=typeof e.ranges?this.container.find(".ranges").hide():this.autoApply&&this.container.find(".applyBtn, .cancelBtn").addClass("hide"),this.singleDatePicker&&(this.container.addClass("single"),this.container.find(".calendar.left").addClass("single"),this.container.find(".calendar.left").show(),this.container.find(".calendar.right").hide(),this.container.find(".daterangepicker_input input, .daterangepicker_input i").hide(),this.timePicker||this.container.find(".ranges").hide()),void 0!==e.ranges||this.singleDatePicker||this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),void 0!==e.ranges&&"right"==this.opens){var u=this.container.find(".ranges"),g=u.clone();u.remove(),this.container.find(".calendar.left").parent().prepend(g)}this.container.find(".applyBtn, .cancelBtn").addClass(this.buttonClasses),this.applyClass.length&&this.container.find(".applyBtn").addClass(this.applyClass),this.cancelClass.length&&this.container.find(".cancelBtn").addClass(this.cancelClass),this.container.find(".applyBtn").html(this.locale.applyLabel),this.container.find(".cancelBtn").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",i.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",i.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",i.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",i.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",i.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",i.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.monthselect",i.proxy(this.monthOrYearChanged,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.secondselect,select.ampmselect",i.proxy(this.timeChanged,this)).on("click.daterangepicker",".daterangepicker_input input",i.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_input input",i.proxy(this.formInputsChanged,this)),this.container.find(".ranges").on("click.daterangepicker","button.applyBtn",i.proxy(this.clickApply,this)).on("click.daterangepicker","button.cancelBtn",i.proxy(this.clickCancel,this)).on("click.daterangepicker","li",i.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",i.proxy(this.hoverRange,this)).on("mouseleave.daterangepicker","li",i.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":i.proxy(this.show,this),"focus.daterangepicker":i.proxy(this.show,this),"keyup.daterangepicker":i.proxy(this.elementChanged,this),"keydown.daterangepicker":i.proxy(this.keydown,this)}):this.element.on("click.daterangepicker",i.proxy(this.toggle,this)),this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))};return s.prototype={constructor:s,setStartDate:function(t){"string"==typeof t&&(this.startDate=a(t,this.locale.format)),"object"==typeof t&&(this.startDate=a(t)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.timePicker&&this.timePickerIncrement&&this.startDate.minute(Math.round(this.startDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.minDate&&this.startDate.isBefore(this.minDate)&&(this.startDate=this.minDate),this.maxDate&&this.startDate.isAfter(this.maxDate)&&(this.startDate=this.maxDate),this.isShowing||this.updateElement(),this.updateMonthsInView()},setEndDate:function(t){"string"==typeof t&&(this.endDate=a(t,this.locale.format)),"object"==typeof t&&(this.endDate=a(t)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.timePicker&&this.timePickerIncrement&&this.endDate.minute(Math.round(this.endDate.minute()/this.timePickerIncrement)*this.timePickerIncrement),this.endDate.isBefore(this.startDate)&&(this.endDate=this.startDate.clone()),this.maxDate&&this.endDate.isAfter(this.maxDate)&&(this.endDate=this.maxDate),this.dateLimit&&this.startDate.clone().add(this.dateLimit).isBefore(this.endDate)&&(this.endDate=this.startDate.clone().add(this.dateLimit)),this.isShowing||this.updateElement(),this.updateMonthsInView()},isInvalidDate:function(){return!1},updateView:function(){this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"),this.endDate?this.container.find(".right .calendar-time select").removeAttr("disabled").removeClass("disabled"):this.container.find(".right .calendar-time select").attr("disabled","disabled").addClass("disabled")),this.endDate?(this.container.find('input[name="daterangepicker_end"]').removeClass("active"),this.container.find('input[name="daterangepicker_start"]').addClass("active")):(this.container.find('input[name="daterangepicker_end"]').addClass("active"),this.container.find('input[name="daterangepicker_start"]').removeClass("active")),this.updateMonthsInView(),this.updateCalendars(),this.updateFormInputs()},updateMonthsInView:function(){if(this.endDate){if(!this.singleDatePicker&&this.leftCalendar.month&&this.rightCalendar.month&&(this.startDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.startDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM"))&&(this.endDate.format("YYYY-MM")==this.leftCalendar.month.format("YYYY-MM")||this.endDate.format("YYYY-MM")==this.rightCalendar.month.format("YYYY-MM")))return;this.leftCalendar.month=this.startDate.clone().date(2),this.linkedCalendars||this.endDate.month()==this.startDate.month()&&this.endDate.year()==this.startDate.year()?this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"):this.rightCalendar.month=this.endDate.clone().date(2)}else this.leftCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&this.rightCalendar.month.format("YYYY-MM")!=this.startDate.format("YYYY-MM")&&(this.leftCalendar.month=this.startDate.clone().date(2),this.rightCalendar.month=this.startDate.clone().date(2).add(1,"month"))},updateCalendars:function(){if(this.timePicker){var t,e,a;if(this.endDate)t=parseInt(this.container.find(".left .hourselect").val(),10),e=parseInt(this.container.find(".left .minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0,this.timePicker24Hour||("PM"===(i=this.container.find(".left .ampmselect").val())&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0));else if(t=parseInt(this.container.find(".right .hourselect").val(),10),e=parseInt(this.container.find(".right .minuteselect").val(),10),a=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0,!this.timePicker24Hour){var i=this.container.find(".right .ampmselect").val();"PM"===i&&t<12&&(t+=12),"AM"===i&&12===t&&(t=0)}this.leftCalendar.month.hour(t).minute(e).second(a),this.rightCalendar.month.hour(t).minute(e).second(a)}if(this.renderCalendar("left"),this.renderCalendar("right"),this.container.find(".ranges li").removeClass("active"),null!=this.endDate){var s=!0,n=0;for(var r in this.ranges){if(this.timePicker){if(this.startDate.isSame(this.ranges[r][0])&&this.endDate.isSame(this.ranges[r][1])){s=!1,this.chosenLabel=this.container.find(".ranges li:eq("+n+")").addClass("active").html();break}}else if(this.startDate.format("YYYY-MM-DD")==this.ranges[r][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[r][1].format("YYYY-MM-DD")){s=!1,this.chosenLabel=this.container.find(".ranges li:eq("+n+")").addClass("active").html();break}n++}s&&(this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars())}},renderCalendar:function(t){var e="left"==t?this.leftCalendar:this.rightCalendar,s=e.month.month(),n=e.month.year(),r=e.month.hour(),h=e.month.minute(),o=e.month.second(),l=a([n,s]).daysInMonth(),c=a([n,s,1]),d=a([n,s,l]),m=a(c).subtract(1,"month").month(),f=a(c).subtract(1,"month").year(),p=a([f,m]).daysInMonth(),u=c.day();(e=[]).firstDay=c,e.lastDay=d;for(var g=0;g<6;g++)e[g]=[];var D=p-u+this.locale.firstDay+1;D>p&&(D-=7),u==this.locale.firstDay&&(D=p-6);for(var k=a([f,m,D,12,h,o]),y,v,g=0,y=0,v=0;g<42;g++,y++,k=a(k).add(24,"hour"))g>0&&y%7==0&&(y=0,v++),e[v][y]=k.clone().hour(r).minute(h).second(o),k.hour(12),this.minDate&&e[v][y].format("YYYY-MM-DD")==this.minDate.format("YYYY-MM-DD")&&e[v][y].isBefore(this.minDate)&&"left"==t&&(e[v][y]=this.minDate.clone()),this.maxDate&&e[v][y].format("YYYY-MM-DD")==this.maxDate.format("YYYY-MM-DD")&&e[v][y].isAfter(this.maxDate)&&"right"==t&&(e[v][y]=this.maxDate.clone());"left"==t?this.leftCalendar.calendar=e:this.rightCalendar.calendar=e;var b="left"==t?this.minDate:this.startDate,C=this.maxDate,Y="left"==t?this.startDate:this.endDate,P='<table class="table-condensed">';P+="<thead>",P+="<tr>",this.showWeekNumbers&&(P+="<th></th>"),b&&!b.isBefore(e.firstDay)||this.linkedCalendars&&"left"!=t?P+="<th></th>":P+='<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';var w=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");if(this.showDropdowns){for(var M=e[1][1].month(),x=e[1][1].year(),I=C&&C.year()||x+5,L=b&&b.year()||x-50,A=x==L,S=x==I,_='<select class="monthselect">',B=0;B<12;B++)(!A||B>=b.month())&&(!S||B<=C.month())?_+="<option value='"+B+"'"+(B===M?" selected='selected'":"")+">"+this.locale.monthNames[B]+"</option>":_+="<option value='"+B+"'"+(B===M?" selected='selected'":"")+" disabled='disabled'>"+this.locale.monthNames[B]+"</option>";_+="</select>";for(var E='<select class="yearselect">',j=L;j<=I;j++)E+='<option value="'+j+'"'+(j===x?' selected="selected"':"")+">"+j+"</option>";w=_+(E+="</select>")}if(P+='<th colspan="5" class="month">'+w+"</th>",C&&!C.isAfter(e.lastDay)||this.linkedCalendars&&"right"!=t&&!this.singleDatePicker?P+="<th></th>":P+='<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>',P+="</tr>",P+="<tr>",this.showWeekNumbers&&(P+='<th class="week">'+this.locale.weekLabel+"</th>"),i.each(this.locale.daysOfWeek,function(t,e){P+="<th>"+e+"</th>"}),P+="</tr>",P+="</thead>",P+="<tbody>",null==this.endDate&&this.dateLimit){var W=this.startDate.clone().add(this.dateLimit).endOf("day");C&&!W.isBefore(C)||(C=W)}for(var v=0;v<6;v++){P+="<tr>",this.showWeekNumbers&&(P+='<td class="week">'+e[v][0].week()+"</td>");for(var y=0;y<7;y++){var O=[];e[v][y].isSame(new Date,"day")&&O.push("today"),e[v][y].isoWeekday()>5&&O.push("weekend"),e[v][y].month()!=e[1][1].month()&&O.push("off"),this.minDate&&e[v][y].isBefore(this.minDate,"day")&&O.push("off","disabled"),C&&e[v][y].isAfter(C,"day")&&O.push("off","disabled"),this.isInvalidDate(e[v][y])&&O.push("off","disabled"),e[v][y].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&O.push("active","start-date"),null!=this.endDate&&e[v][y].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&O.push("active","end-date"),null!=this.endDate&&e[v][y]>this.startDate&&e[v][y]<this.endDate&&O.push("in-range");for(var H="",N=!1,g=0;g<O.length;g++)H+=O[g]+" ","disabled"==O[g]&&(N=!0);N||(H+="available"),P+='<td class="'+H.replace(/^\s+|\s+$/g,"")+'" data-title="r'+v+"c"+y+'">'+e[v][y].date()+"</td>"}P+="</tr>"}P+="</tbody>",P+="</table>",this.container.find(".calendar."+t+" .calendar-table").html(P)},renderTimePicker:function(t){var e,a,i,s=this.maxDate;!this.dateLimit||this.maxDate&&!this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)||(s=this.startDate.clone().add(this.dateLimit)),"left"==t?(a=this.startDate.clone(),i=this.minDate):"right"==t&&(a=this.endDate?this.endDate.clone():this.startDate.clone(),i=this.startDate),e='<select class="hourselect">';for(var n=this.timePicker24Hour?0:1,r=this.timePicker24Hour?23:12,h=n;h<=r;h++){var o=h;this.timePicker24Hour||(o=a.hour()>=12?12==h?12:h+12:12==h?0:h);var l=a.clone().hour(o),c=!1;i&&l.minute(59).isBefore(i)&&(c=!0),s&&l.minute(0).isAfter(s)&&(c=!0),o!=a.hour()||c?e+=c?'<option value="'+h+'" disabled="disabled" class="disabled">'+h+"</option>":'<option value="'+h+'">'+h+"</option>":e+='<option value="'+h+'" selected="selected">'+h+"</option>"}e+="</select> ",e+=': <select class="minuteselect">';for(var h=0;h<60;h+=this.timePickerIncrement){var d=h<10?"0"+h:h,l=a.clone().minute(h),c=!1;i&&l.second(59).isBefore(i)&&(c=!0),s&&l.second(0).isAfter(s)&&(c=!0),a.minute()!=h||c?e+=c?'<option value="'+h+'" disabled="disabled" class="disabled">'+d+"</option>":'<option value="'+h+'">'+d+"</option>":e+='<option value="'+h+'" selected="selected">'+d+"</option>"}if(e+="</select> ",this.timePickerSeconds){e+=': <select class="secondselect">';for(var h=0;h<60;h++){var d=h<10?"0"+h:h,l=a.clone().second(h),c=!1;i&&l.isBefore(i)&&(c=!0),s&&l.isAfter(s)&&(c=!0),a.second()!=h||c?e+=c?'<option value="'+h+'" disabled="disabled" class="disabled">'+d+"</option>":'<option value="'+h+'">'+d+"</option>":e+='<option value="'+h+'" selected="selected">'+d+"</option>"}e+="</select> "}if(!this.timePicker24Hour){e+='<select class="ampmselect">';var m="",f="";i&&a.clone().hour(12).minute(0).second(0).isBefore(i)&&(m=' disabled="disabled" class="disabled"'),s&&a.clone().hour(0).minute(0).second(0).isAfter(s)&&(f=' disabled="disabled" class="disabled"'),a.hour()>=12?e+='<option value="AM"'+m+'>AM</option><option value="PM" selected="selected"'+f+">PM</option>":e+='<option value="AM" selected="selected"'+m+'>AM</option><option value="PM"'+f+">PM</option>",e+="</select>"}this.container.find(".calendar."+t+" .calendar-time div").html(e)},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").is(":focus")||this.container.find("input[name=daterangepicker_end]").is(":focus")||(this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.locale.format)),this.endDate&&this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.locale.format)),this.singleDatePicker||this.endDate&&(this.startDate.isBefore(this.endDate)||this.startDate.isSame(this.endDate))?this.container.find("button.applyBtn").removeAttr("disabled"):this.container.find("button.applyBtn").attr("disabled","disabled"))},move:function(){var t={top:0,left:0},e,a=i(window).width();this.parentEl.is("body")||(t={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},a=this.parentEl[0].clientWidth+this.parentEl.offset().left),e="up"==this.drops?this.element.offset().top-this.container.outerHeight()-t.top:this.element.offset().top+this.element.outerHeight()-t.top,this.container["up"==this.drops?"addClass":"removeClass"]("dropup"),"left"==this.opens?(this.container.css({top:e,right:a-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):"center"==this.opens?(this.container.css({top:e,left:this.element.offset().left-t.left+this.element.outerWidth()/2-this.container.outerWidth()/2,right:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9})):(this.container.css({top:e,left:this.element.offset().left-t.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>i(window).width()&&this.container.css({left:"auto",right:0}))},show:function(t){this.isShowing||(this._outsideClickProxy=i.proxy(function(t){this.outsideClick(t)},this),i(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("touchend.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),i(window).on("resize.daterangepicker",i.proxy(function(t){this.move(t)},this)),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.updateView(),this.container.show(),this.move(),this.element.trigger("show.daterangepicker",this),this.isShowing=!0)},hide:function(t){this.isShowing&&(this.endDate||(this.startDate=this.oldStartDate.clone(),this.endDate=this.oldEndDate.clone()),this.startDate.isSame(this.oldStartDate)&&this.endDate.isSame(this.oldEndDate)||this.callback(this.startDate,this.endDate,this.chosenLabel),this.updateElement(),i(document).off(".daterangepicker"),i(window).off(".daterangepicker"),this.container.hide(),this.element.trigger("hide.daterangepicker",this),this.isShowing=!1)},toggle:function(t){this.isShowing?this.hide():this.show()},outsideClick:function(t){var e=i(t.target);"focusin"==t.type||e.closest(this.element).length||e.closest(this.container).length||e.closest(".calendar-table").length||this.hide()},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},hoverRange:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")){var e=t.target.innerHTML;if(e==this.locale.customRangeLabel)this.updateView();else{var a=this.ranges[e];this.container.find("input[name=daterangepicker_start]").val(a[0].format(this.locale.format)),this.container.find("input[name=daterangepicker_end]").val(a[1].format(this.locale.format))}}},clickRange:function(t){var e=t.target.innerHTML;if(this.chosenLabel=e,e==this.locale.customRangeLabel)this.showCalendars();else{var a=this.ranges[e];this.startDate=a[0],this.endDate=a[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.hideCalendars(),this.clickApply()}},clickPrev:function(t){i(t.target).parents(".calendar").hasClass("left")?(this.leftCalendar.month.subtract(1,"month"),this.linkedCalendars&&this.rightCalendar.month.subtract(1,"month")):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(t){i(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.month.add(1,"month"):(this.rightCalendar.month.add(1,"month"),this.linkedCalendars&&this.leftCalendar.month.add(1,"month")),this.updateCalendars()},hoverDate:function(t){if(!this.container.find("input[name=daterangepicker_start]").is(":focus")&&!this.container.find("input[name=daterangepicker_end]").is(":focus")&&i(t.target).hasClass("available")){var e=i(t.target).attr("data-title"),a=e.substr(1,1),s=e.substr(3,1),n=i(t.target).parents(".calendar").hasClass("left")?this.leftCalendar.calendar[a][s]:this.rightCalendar.calendar[a][s];this.endDate?this.container.find("input[name=daterangepicker_start]").val(n.format(this.locale.format)):this.container.find("input[name=daterangepicker_end]").val(n.format(this.locale.format));var r=this.leftCalendar,h=this.rightCalendar,o=this.startDate;this.endDate||this.container.find(".calendar td").each(function(t,e){if(!i(e).hasClass("week")){var a=i(e).attr("data-title"),s=a.substr(1,1),l=a.substr(3,1),c=i(e).parents(".calendar").hasClass("left")?r.calendar[s][l]:h.calendar[s][l];c.isAfter(o)&&c.isBefore(n)?i(e).addClass("in-range"):i(e).removeClass("in-range")}})}},clickDate:function(t){if(i(t.target).hasClass("available")){var e=i(t.target).attr("data-title"),a=e.substr(1,1),s=e.substr(3,1),n=i(t.target).parents(".calendar"),r=n.hasClass("left")?this.leftCalendar.calendar[a][s]:this.rightCalendar.calendar[a][s];if(this.endDate||r.isBefore(this.startDate)){if(this.timePicker){var h=parseInt(this.container.find(".left .hourselect").val(),10);this.timePicker24Hour||("PM"===(c=n.find(".ampmselect").val())&&h<12&&(h+=12),"AM"===c&&12===h&&(h=0));var o=parseInt(this.container.find(".left .minuteselect").val(),10),l=this.timePickerSeconds?parseInt(this.container.find(".left .secondselect").val(),10):0;r=r.clone().hour(h).minute(o).second(l)}this.endDate=null,this.setStartDate(r.clone())}else{if(this.timePicker){var h=parseInt(this.container.find(".right .hourselect").val(),10);if(!this.timePicker24Hour){var c=this.container.find(".right .ampmselect").val();"PM"===c&&h<12&&(h+=12),"AM"===c&&12===h&&(h=0)}var o=parseInt(this.container.find(".right .minuteselect").val(),10),l=this.timePickerSeconds?parseInt(this.container.find(".right .secondselect").val(),10):0;r=r.clone().hour(h).minute(o).second(l)}this.setEndDate(r.clone()),this.autoApply&&this.clickApply()}this.singleDatePicker&&(this.setEndDate(this.startDate),this.timePicker||this.clickApply()),this.updateView()}},clickApply:function(t){this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(t){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.hide(),this.element.trigger("cancel.daterangepicker",this)},monthOrYearChanged:function(t){var e=i(t.target).closest(".calendar").hasClass("left"),a=e?"left":"right",s=this.container.find(".calendar."+a),n=parseInt(s.find(".monthselect").val(),10),r=s.find(".yearselect").val();e||(r<this.startDate.year()||r==this.startDate.year()&&n<this.startDate.month())&&(n=this.startDate.month(),r=this.startDate.year()),this.minDate&&(r<this.minDate.year()||r==this.minDate.year()&&n<this.minDate.month())&&(n=this.minDate.month(),r=this.minDate.year()),this.maxDate&&(r>this.maxDate.year()||r==this.maxDate.year()&&n>this.maxDate.month())&&(n=this.maxDate.month(),r=this.maxDate.year()),e?(this.leftCalendar.month.month(n).year(r),this.linkedCalendars&&(this.rightCalendar.month=this.leftCalendar.month.clone().add(1,"month"))):(this.rightCalendar.month.month(n).year(r),this.linkedCalendars&&(this.leftCalendar.month=this.rightCalendar.month.clone().subtract(1,"month"))),this.updateCalendars()},timeChanged:function(t){var e=i(t.target).closest(".calendar"),a=e.hasClass("left"),s=parseInt(e.find(".hourselect").val(),10),n=parseInt(e.find(".minuteselect").val(),10),r=this.timePickerSeconds?parseInt(e.find(".secondselect").val(),10):0;if(!this.timePicker24Hour){var h=e.find(".ampmselect").val();"PM"===h&&s<12&&(s+=12),"AM"===h&&12===s&&(s=0)}if(a){var o=this.startDate.clone();o.hour(s),o.minute(n),o.second(r),this.setStartDate(o),this.singleDatePicker?this.endDate=this.startDate.clone():this.endDate&&this.endDate.format("YYYY-MM-DD")==o.format("YYYY-MM-DD")&&this.endDate.isBefore(o)&&this.setEndDate(o.clone())}else if(this.endDate){var l=this.endDate.clone();l.hour(s),l.minute(n),l.second(r),this.setEndDate(l)}this.updateCalendars(),this.updateFormInputs(),this.renderTimePicker("left"),this.renderTimePicker("right")},formInputsChanged:function(t){var e=i(t.target).closest(".calendar").hasClass("right"),s=a(this.container.find('input[name="daterangepicker_start"]').val(),this.locale.format),n=a(this.container.find('input[name="daterangepicker_end"]').val(),this.locale.format);s.isValid()&&n.isValid()&&(e&&n.isBefore(s)&&(s=n.clone()),this.setStartDate(s),this.setEndDate(n),e?this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format)):this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format))),this.updateCalendars(),this.timePicker&&(this.renderTimePicker("left"),this.renderTimePicker("right"))},elementChanged:function(){if(this.element.is("input")&&this.element.val().length&&!(this.element.val().length<this.locale.format.length)){var t=this.element.val().split(this.locale.separator),e=null,i=null;2===t.length&&(e=a(t[0],this.locale.format),i=a(t[1],this.locale.format)),(this.singleDatePicker||null===e||null===i)&&(i=e=a(this.element.val(),this.locale.format)),e.isValid()&&i.isValid()&&(this.setStartDate(e),this.setEndDate(i),this.updateView())}},keydown:function(t){9!==t.keyCode&&13!==t.keyCode||this.hide()},updateElement:function(){this.element.is("input")&&!this.singleDatePicker&&this.autoUpdateInput?(this.element.val(this.startDate.format(this.locale.format)+this.locale.separator+this.endDate.format(this.locale.format)),this.element.trigger("change")):this.element.is("input")&&this.autoUpdateInput&&(this.element.val(this.startDate.format(this.locale.format)),this.element.trigger("change"))},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData()}},i.fn.daterangepicker=function(t,e){return this.each(function(){var a=i(this);a.data("daterangepicker")&&a.data("daterangepicker").remove(),a.data("daterangepicker",new s(a,t,e))}),this},s})}).call(this),"undefined"==typeof Package&&(Package={}),Package["dangrossman:bootstrap-daterangepicker"]={}}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["templating-runtime"].Template,r=Package.jquery.$,a=Package.jquery.jQuery,l=Package["aldeed:simple-schema"].SimpleSchema,i=Package["aldeed:simple-schema"].MongoObject,u=Package.modules.meteorInstall,c=Package["babel-runtime"].meteorBabelHelpers,s=Package.promise.Promise,m=Package["aldeed:collection2-core"].Collection2,f=Package["ecmascript-runtime-client"].Symbol,p=Package["ecmascript-runtime-client"].Map,d=Package["ecmascript-runtime-client"].Set,v=Package.blaze.Blaze,h=Package.blaze.UI,b=Package.blaze.Handlebars,g=Package.spacebars.Spacebars,I=Package.mongo.Mongo,k=Package.htmljs.HTML,T=u({node_modules:{meteor:{"ohif:servers":{both:{"index.js":function(e,t,n){n.watch(e("./base.js")),n.watch(e("./collections")),n.watch(e("./lib"))},"base.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),o.servers={collections:{}}},collections:{"currentServer.js":function(e,t,n){n.export({CurrentServer:function(){return a}});var o=void 0;n.watch(e("meteor/mongo"),{Mongo:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},1);var a=new o.Collection("currentServer");a._debugName="CurrentServer",r.servers.collections.currentServer=a},"index.js":function(e,t,n){n.export({CurrentServer:function(){return o},Servers:function(){return r}});var o=void 0;n.watch(e("./currentServer.js"),{CurrentServer:function(e){o=e}},0);var r=void 0;n.watch(e("./servers.js"),{Servers:function(e){r=e}},1)},"servers.js":function(e,t,n){n.export({Servers:function(){return a}});var o=void 0;n.watch(e("meteor/mongo"),{Mongo:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},1);var a=new o.Collection("servers");a._debugName="Servers",r.servers.collections.servers=a}},lib:{"getCurrentServer.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var r=void 0,a=void 0;n.watch(e("meteor/ohif:servers/both/collections"),{Servers:function(e){r=e},CurrentServer:function(e){a=e}},1),o.servers.getCurrentServer=function(){var e=a.findOne();if(e)return r.findOne({_id:e.serverId})}},"index.js":function(e,t,n){n.watch(e("./getCurrentServer.js"))}},schema:{"servers.js":function(e,t,n){n.export({DICOMWebRequestOptions:function(){return u},DICOMWebServer:function(){return c},DIMSEPeer:function(){return s},DIMSEServer:function(){return m},UISettings:function(){return f},PrefetchSchema:function(){return p},MouseButtonToolSchema:function(){return d},PublicServerConfig:function(){return v},Servers:function(){return h},ServerConfiguration:function(){return b}});var o=void 0;n.watch(e("meteor/aldeed:simple-schema"),{SimpleSchema:function(e){o=e}},0);var r={type:String,label:"Server Name",max:100},a={type:String,label:"Server Type",allowedValues:["dicomWeb","dimse"],valuesLabels:["DICOM Web","DIMSE"],optional:!0},l={type:String,label:"WADO URI root",max:1e3},i=["wwwc","zoom","pan","stackScroll"],u=new o({auth:{type:String,label:"Authentication",defaultValue:"orthanc:orthanc",optional:!0},logRequests:{type:Boolean,defaultValue:!0,label:"Requests"},logResponses:{type:Boolean,defaultValue:!1,label:"Responses"},logTiming:{type:Boolean,defaultValue:!0,label:"Timing"}}),c=new o({name:r,type:a,wadoUriRoot:l,wadoRoot:{type:String,label:"WADO root",max:1e3},imageRendering:{type:String,label:"Image rendering",allowedValues:["wadouri","orthanc"],valuesLabels:["WADO URI","ORTHANC"]},qidoRoot:{type:String,label:"QIDO root",max:1e3},qidoSupportsIncludeField:{type:Boolean,label:"QIDO supports including fields",defaultValue:!1},requestOptions:{type:u,label:"Request Options"}}),s=new o({aeTitle:{type:String,label:"AE Title"},hostAE:{type:String,label:"AE Host",optional:!0},host:{type:String,label:"Host Domain/IP",regEx:o.RegEx.WeakDomain},port:{type:Number,label:"Port",min:1,defaultValue:11112,max:65535},default:{type:Boolean,label:"Default",defaultValue:!1},server:{type:Boolean,label:"Server",defaultValue:!1},supportsInstanceRetrievalByStudyUid:{type:Boolean,label:"Supports instance retrieval by StudyUid",defaultValue:!0}}),m=new o({name:r,type:a,wadoUriRoot:l,requestOptions:{type:u,label:"Request Options"},peers:{type:[s],label:"Peer List",minCount:1}}),f=new o({studyListFunctionsEnabled:{type:Boolean,label:"Study List Functions Enabled?",defaultValue:!0},leftSidebarOpen:{type:Boolean,label:"Left sidebar open by default?",defaultValue:!1},leftSidebarDragAndDrop:{type:Boolean,label:"Left sidebar allows thumbnail drag and drop. If false, images will be loaded on single click.",defaultValue:!0},displaySetNavigationLoopOverSeries:{type:Boolean,label:"The UP/DOWN display set navigation buttons will start over when reach the last display set in viewport?",defaultValue:!0},displaySetNavigationMultipleViewports:{type:Boolean,label:"The UP/DOWN display set navigation buttons will iterate over all the viewports at once?",defaultValue:!1},displayEchoUltrasoundWorkflow:{type:Boolean,label:"Enable cine dialog enhancements for multiframe images.",defaultValue:!1},autoPositionMeasurementsTextCallOuts:{type:String,label:"Auto position text call-outs for measurements when creating them.",defaultValue:"TRBL"},studyListDateFilterNumDays:{type:Number,label:"Number of days to be used on Study List date filter",min:1},showStackLoadingProgressBar:{type:Boolean,label:"Show a progress bar closest to the thumbnail showing how much the stack has loaded",defaultValue:!0},cornerstoneRenderer:{type:String,label:"Cornerstone default image renderer",defaultValue:"webgl"},sortSeriesByIncomingOrder:{type:Boolean,label:"Define if the series' images shall be sorted by incoming order. Sort by Instance Number by default.",defaultValue:!1},useMiddleSeriesInstanceAsThumbnail:{type:Boolean,label:"Define if the middle instance of a series will be used as thumbnail. If not, the first instance will be used.",defaultValue:!0}}),p=new o({order:{type:String,label:"Prefetch Order",allowedValues:["topdown","downward","closest"],optional:!1},displaySetCount:{type:Number,label:"Display Set Count",min:1,defaultValue:1}}),d=new o({left:{type:String,label:"Left Mouse Button",allowedValues:i,optional:!0},right:{type:String,label:"Right Mouse Button",allowedValues:i,optional:!0},middle:{type:String,label:"Middle Mouse Button",allowedValues:i,optional:!0}}),v=new o({verifyEmail:{type:Boolean,label:"Verify Email",defaultValue:!1},demoUserEnabled:{type:Boolean,label:"Creates demo user on startup and show TestDrive button",defaultValue:!0},ui:{type:f,label:"UI Settings"},prefetch:{type:p,label:"Prefetch settings"},defaultMouseButtonTools:{type:d,label:"Default Mouse Button Tools"}}),h=new o({dicomWeb:{type:[c],label:"DICOMWeb Servers",optional:!0},dimse:{type:[m],label:"DIMSE Servers",optional:!0}}),b=new o({servers:{type:h,label:"Servers"},defaultServiceType:{type:String,label:"Default Service Type",defaultValue:"dicomWeb"},dropCollections:{type:Boolean,label:"Drop database collections",defaultValue:!1},public:{type:v,label:"Public Server Configuration"},origin:{type:String,label:"Origin",optional:!0}})}}},client:{"index.js":function(e,t,n){n.watch(e("./collections")),n.watch(e("./components"))},collections:{"index.js":function(e,t,n){n.watch(e("./subscriptions.js"))},"subscriptions.js":function(e,t,n){var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0),o.subscribe("servers"),o.subscribe("currentServer")}},components:{"index.js":function(e,t,n){n.watch(e("./serverInformation"))},serverInformation:{"index.js":function(e,t,n){n.watch(e("./serverInformationDicomWeb/serverInformationDicomWeb.html")),n.watch(e("./serverInformationDicomWeb/serverInformationDicomWeb.js")),n.watch(e("./serverInformationDimse/serverInformationDimse.html")),n.watch(e("./serverInformationDimse/serverInformationDimse.js")),n.watch(e("./serverInformationForm/serverInformationForm.html")),n.watch(e("./serverInformationForm/serverInformationForm.js")),n.watch(e("./serverInformationList/serverInformationList.html")),n.watch(e("./serverInformationList/serverInformationList.js")),n.watch(e("./serverInformationModal/serverInformationModal.html")),n.watch(e("./serverInformationModal/serverInformationModal.styl")),n.watch(e("./serverInformationModal/serverInformationModal.js"))},serverInformationDicomWeb:{"serverInformationDicomWeb.html":function(e,t,n){n.exports=e("./template.serverInformationDicomWeb.js")},"template.serverInformationDicomWeb.js":function(){o.__checkName("serverInformationDicomWeb"),o.serverInformationDicomWeb=new o("Template.serverInformationDicomWeb",function(){var e=this;return[k.DIV({class:"row"},"\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("wadoUriRoot")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n        "),"\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("wadoRoot")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n        "),"\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("imageRendering"),hideSearch:g.call(!0),options:g.call(g.dataMustache(e.lookup("clone"),g.kw({placeholder:"Select an option"})))}},function(){return g.include(e.lookupTemplate("inputSelect"))}),"\n        "),"\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("qidoRoot")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n        "),"\n        ",k.DIV({class:"col-lg-6"},"\n            ",k.Raw("<strong>QIDO options</strong>"),"\n            ",k.DIV({class:"form-group"},"\n                ",k.DIV({class:"form-control"},"\n                    ",k.DIV({class:"checkbox"},"\n                        ",v._TemplateWith(function(){return{key:g.call("qidoSupportsIncludeField")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    "),k.Raw("\n    <hr>\n    <h4>Request options</h4>\n    "),v._TemplateWith(function(){return{class:g.call("row"),key:g.call("requestOptions")}},function(){return g.include(e.lookupTemplate("group"),function(){return["\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("auth")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n        "),"\n        ",k.DIV({class:"col-lg-6"},"\n            ",k.STRONG("Logging options"),"\n            ",k.DIV({class:"form-group"},"\n                ",k.DIV({class:"form-control clearfix"},"\n                    ",k.DIV({class:"checkbox pull-left"},"\n                        ",v._TemplateWith(function(){return{key:g.call("logRequests")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                    "),"\n                    ",k.DIV({class:"checkbox pull-left"},"\n                        ",v._TemplateWith(function(){return{key:g.call("logResponses")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                    "),"\n                    ",k.DIV({class:"checkbox pull-left"},"\n                        ",v._TemplateWith(function(){return{key:g.call("logTiming")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                    "),"\n                "),"\n            "),"\n        "),"\n    "]})})]})},"serverInformationDicomWeb.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0),o.serverInformationDicomWeb.onRendered(function(){var e=o.instance();e.autorun(function(){if("edit"===e.data.mode.get()){var t=e.data.currentItem.get();e.data.form.value(t)}})})}},serverInformationDimse:{"serverInformationDimse.html":function(e,t,n){n.exports=e("./template.serverInformationDimse.js")},"template.serverInformationDimse.js":function(){o.__checkName("serverInformationDimse"),o.serverInformationDimse=new o("Template.serverInformationDimse",function(){var e=this;return[k.DIV({class:"row"},"\n        ",k.DIV({class:"col-lg-6"},"\n            ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("wadoUriRoot")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n        "),"\n    "),"\n    ",k.DIV({class:"panel panel-default panel-body"},"\n        ",k.DIV({class:"clearfix"},"\n            ",k.Raw('<h4 class="pull-left">Peer List</h4>'),"\n            ",v._TemplateWith(function(){return{class:g.call("btn btn-primary pull-right"),action:g.call("newPeer"),params:g.call(e.lookup("peer"))}},function(){return g.include(e.lookupTemplate("button"),function(){return"New peer"})}),"\n        "),"\n        ",k.Raw("<hr>"),"\n        ",v._TemplateWith(function(){return{class:g.call("row"),key:g.call("peers"),arrayValues:g.call(!0)}},function(){return g.include(e.lookupTemplate("group"),function(){return["\n            ",v.Each(function(){return{_sequence:g.call(g.dot(e.lookup("instance"),"peers","get")),_variable:"peer"}},function(){return["\n                ",v._TemplateWith(function(){return{class:g.call("col-lg-6")}},function(){return g.include(e.lookupTemplate("group"),function(){return["\n                    ",k.DIV({class:"panel panel-default panel-body"},"\n                        ",k.DIV({class:"row"},"\n                            ",k.DIV({class:"col-lg-6"},"\n                                ",v._TemplateWith(function(){return{class:g.call("form-control"),key:g.call("aeTitle")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n                            "),"\n                            ",k.DIV({class:"col-lg-6"},"\n                                ",v._TemplateWith(function(){return{class:g.call("form-control"),key:g.call("hostAE")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n                            "),"\n                            ",k.DIV({class:"col-lg-6"},"\n                                ",v._TemplateWith(function(){return{class:g.call("form-control"),key:g.call("host")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n                            "),"\n                            ",k.DIV({class:"col-lg-6"},"\n                                ",v._TemplateWith(function(){return{class:g.call("form-control"),key:g.call("port")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n                            "),"\n                            ",k.DIV({class:"col-lg-12"},"\n                                ",k.STRONG("Settings"),"\n                                ",k.DIV({class:"form-group"},"\n                                    ",k.DIV({class:"form-control height-auto clearfix"},"\n                                        ",k.DIV({class:"checkbox pull-left"},"\n                                            ",v._TemplateWith(function(){return{key:g.call("default")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                                        "),"\n                                        ",k.DIV({class:"checkbox pull-left"},"\n                                            ",v._TemplateWith(function(){return{key:g.call("server")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                                        "),"\n                                        ",k.DIV({class:"checkbox pull-left"},"\n                                            ",v._TemplateWith(function(){return{key:g.call("supportsInstanceRetrievalByStudyUid")}},function(){return g.include(e.lookupTemplate("inputCheckbox"))}),"\n                                        "),"\n                                    "),"\n                                "),"\n                            "),"\n                            ",k.DIV({class:"col-lg-12 text-right"},"\n                                ",v._TemplateWith(function(){return{class:g.call("btn btn-sm btn-danger"),action:g.call("removePeer"),params:g.call(e.lookup("@index"))}},function(){return g.include(e.lookupTemplate("button"),function(){return"Remove"})}),"\n                            "),"\n                        "),"\n                    "),"\n                "]})}),"\n            "]}),"\n        "]})}),"\n    "),k.Raw("\n    <hr>")]})},"serverInformationDimse.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){r=e}},1);var a=void 0;n.watch(e("meteor/tracker"),{Tracker:function(e){a=e}},2);var l=void 0;n.watch(e("meteor/underscore"),{_:function(e){l=e}},3),o.serverInformationDimse.onCreated(function(){var e=o.instance();e.peers=new r([]),e.autorun(function(){var t=e.data.currentItem.get();t&&e.peers.set(t.peers||[])});var t=e.data.api;l.extend(t,{newPeer:function(){var t=e.peers.get();t.push({}),e.peers.set(t)},removePeer:function(t){var n=e.peers.get();n.splice(t,1),e.peers.set(n);var o=e.data.currentItem.get();o.peers=n,a.afterFlush(function(){return e.data.form.value(o)})}})}),o.serverInformationDimse.onRendered(function(){var e=o.instance();e.autorun(function(){if("edit"===e.data.mode.get()){var t=e.data.currentItem.get();e.data.form.value(t)}})})}},serverInformationForm:{"serverInformationForm.html":function(e,t,n){n.exports=e("./template.serverInformationForm.js")},"template.serverInformationForm.js":function(){o.__checkName("serverInformationForm"),o.serverInformationForm=new o("Template.serverInformationForm",function(){var e=this;return v._TemplateWith(function(){return{class:g.call("server-information-form"),schema:g.call(g.dot(e.lookup("instance"),"currentSchema")),api:g.call(g.dot(e.lookup("."),"api"))}},function(){return g.include(e.lookupTemplate("form"),function(){return["\n        ",v._TemplateWith(function(){return{key:g.call("_id")}},function(){return g.include(e.lookupTemplate("inputHidden"))}),"\n        ",k.DIV({class:"row"},"\n            ",k.DIV({class:"col-lg-6"},"\n                ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("name")}},function(){return g.include(e.lookupTemplate("inputText"))}),"\n            "),"\n            ",k.DIV({class:"col-lg-6"},"\n                ",v._TemplateWith(function(){return{labelClass:g.call("form-group"),key:g.call("type"),hideSearch:g.call(!0),disabled:g.call(g.dataMustache(e.lookup("eq"),g.dot(e.lookup("."),"mode","get"),"edit")),options:g.call(g.dataMustache(e.lookup("clone"),g.kw({placeholder:"Choose a server type"})))}},function(){return g.include(e.lookupTemplate("inputSelect"))}),"\n            "),"\n        "),"\n        ",k.HR(),"\n        ",v.If(function(){return g.dataMustache(e.lookup("eq"),g.dot(e.lookup("."),"serverType","get"),"dicomWeb")},function(){return["\n          ",v._TemplateWith(function(){return g.call(e.lookup("."))},function(){return g.include(e.lookupTemplate("serverInformationDicomWeb"))}),"\n        "]}),"\n        ",v.If(function(){return g.dataMustache(e.lookup("eq"),g.dot(e.lookup("."),"serverType","get"),"dimse")},function(){return["\n          ",v._TemplateWith(function(){return g.call(e.lookup("."))},function(){return g.include(e.lookupTemplate("serverInformationDimse"))}),"\n        "]}),"\n        ",v.If(function(){return g.call(g.dot(e.lookup("."),"serverType","get"))},function(){return["\n            ",k.DIV("\n                ",v._TemplateWith(function(){return{class:g.call("btn btn-primary"),action:g.call("save")}},function(){return g.include(e.lookupTemplate("button"),function(){return"Save"})}),"\n            "),"\n        "]}),"\n    "]})})})},"serverInformationForm.js":function(e,t,n){var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/templating"),{Template:function(e){r=e}},1);var a=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){a=e}},2);var l=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){l=e}},3);var i=void 0;n.watch(e("meteor/ohif:servers/both/schema/servers.js"),{DICOMWebServer:function(e){i=e}},4);var u=void 0;n.watch(e("meteor/ohif:servers/both/schema/servers.js"),{DIMSEServer:function(e){u=e}},5),r.serverInformationForm.onCreated(function(){var e=r.instance();e.data.api={save:function(){if(e.data.form.validate()){var t=e.data.form.value();o.call("serverSave",t,function(t){t&&l.log.error(t),e.data.resetState()})}}},e.currentSchema=new a(i)}),r.serverInformationForm.onRendered(function(){var e=r.instance();e.data.$form=e.$("form").first(),e.data.form=e.data.$form.data("component"),e.autorun(function(){var t=e.$("[data-key=type] :input").data("component");t.depend();var n=t.value();e.data.serverType.set(n),"dimse"===n?e.currentSchema.set(u):e.currentSchema.set(i)}),e.autorun(function(){if("edit"===e.data.mode.get()){var t=e.data.currentItem.get();e.data.form.value(t)}})})}},serverInformationList:{"serverInformationList.html":function(e,t,n){n.exports=e("./template.serverInformationList.js")},"template.serverInformationList.js":function(){o.__checkName("serverInformationList"),o.serverInformationList=new o("Template.serverInformationList",function(){var e=this;return v._TemplateWith(function(){return{api:g.call(g.dot(e.lookup("instance"),"api"))}},function(){return g.include(e.lookupTemplate("form"),function(){return["\n        ",k.TABLE({id:"tblServer",class:"table"},"\n            ",k.THEAD("\n                ",k.TR("\n                    ",k.TH("Name"),"\n                    ",k.TH("Type"),"\n                    ",k.TH({class:"text-right"},"Actions"),"\n                "),"\n            "),"\n            ",k.TBODY("\n                ",v.Each(function(){return{_sequence:g.call(e.lookup("servers")),_variable:"server"}},function(){return["\n                    ",k.TR("\n                        ",k.TD(v.View("lookup:server.name",function(){return g.mustache(g.dot(e.lookup("server"),"name"))})),"\n                        ",k.TD(v.View("lookup:server.type",function(){return g.mustache(g.dot(e.lookup("server"),"type"))})),"\n                        ",k.TD({class:"text-right"},"\n                            ",k.DIV({class:"btn-group",role:"group","aria-label":"Actions"},"\n                                ",v._TemplateWith(function(){return{class:g.call("btn btn-sm btn-default"),action:g.call("use"),params:g.call(e.lookup("server")),title:g.call("Use this server"),disabled:g.call(g.dataMustache(e.lookup("isActive"),e.lookup("server")))}},function(){return g.include(e.lookupTemplate("button"),function(){return["\n                                    ",v.If(function(){return g.dataMustache(e.lookup("isActive"),e.lookup("server"))},function(){return["\n                                        ",k.I({class:"fa fa-check-square-o"}),"\n                                    "]},function(){return["\n                                        ",k.I({class:"fa fa-square-o"}),"\n                                    "]}),"\n                                "]})}),"\n                                ",v._TemplateWith(function(){return{class:g.call("btn btn-sm btn-default"),action:g.call("edit"),params:g.call(e.lookup("server")),title:g.call("Edit"),disabled:g.call(g.dataMustache(e.lookup("eq"),g.dot(e.lookup("server"),"origin"),"json"))}},function(){return g.include(e.lookupTemplate("button"),function(){return["\n                                    ",k.I({class:"fa fa-pencil"}),"\n                                "]})}),"\n                                ",v._TemplateWith(function(){return{class:g.call("btn btn-sm btn-danger"),action:g.call("delete"),params:g.call(e.lookup("server")),title:g.call("Remove"),disabled:g.call(g.dataMustache(e.lookup("eq"),g.dot(e.lookup("server"),"origin"),"json"))}},function(){return g.include(e.lookupTemplate("button"),function(){return["\n                                    ",k.I({class:"fa fa-trash"}),"\n                                "]})}),"\n                            "),"\n                        "),"\n                    "),"\n                "]},function(){return["\n                    ",k.TR("\n                        ",k.TD({class:"text-center",colspan:"3"},"No servers found"),"\n                    "),"\n                "]}),"\n            "),"\n        "),"\n        ",v._TemplateWith(function(){return{class:g.call("btn btn-sm btn-default"),action:g.call("add")}},function(){return g.include(e.lookupTemplate("button"),function(){return["\n            ",k.I({class:"fa fa-plus"})," Add a new server\n        "]})}),"\n    "]})})})},"serverInformationList.js":function(e,t,n){var o=void 0;n.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/templating"),{Template:function(e){r=e}},1);var a=void 0,l=void 0;n.watch(e("meteor/ohif:servers/both/collections"),{Servers:function(e){a=e},CurrentServer:function(e){l=e}},2),r.serverInformationList.onCreated(function(){var e=r.instance();e.api={add:function(){return e.data.mode.set("create")},edit:function(t){e.data.currentItem.set(t),e.data.mode.set("edit")},delete:function(e){window.confirm("Are you sure you want to remove this peer?")&&o.call("serverRemove",e._id,function(e){})},use:function(e){o.call("serverSetActive",e._id,function(e){})}}}),r.serverInformationList.helpers({isActive:function(e){var t=l.findOne();if(t)return e._id===t.serverId},servers:function(){var e={sort:{origin:-1,type:1,name:1}};return a.find({},e).fetch()}})}},serverInformationModal:{"serverInformationModal.html":function(e,t,n){n.exports=e("./template.serverInformationModal.js")},"template.serverInformationModal.js":function(){o.__checkName("serverInformationModal"),o.serverInformationModal=new o("Template.serverInformationModal",function(){var e=this;return v._TemplateWith(function(){return g.dataMustache(e.lookup("extend"),e.lookup("."),g.kw({dialogClass:"modal-lg",title:"Server Information"}))},function(){return g.include(e.lookupTemplate("dialogSimple"),function(){return["\n        ",v.If(function(){return g.dataMustache(e.lookup("eq"),g.dot(e.lookup("instance"),"container","mode","get"),"list")},function(){return["\n            ",v._TemplateWith(function(){return g.call(g.dot(e.lookup("instance"),"container"))},function(){return g.include(e.lookupTemplate("serverInformationList"))}),"\n        "]},function(){return["\n            ",v._TemplateWith(function(){return g.call(g.dot(e.lookup("instance"),"container"))},function(){return g.include(e.lookupTemplate("serverInformationForm"))}),"\n        "]}),"\n        ",v._TemplateWith(function(){return"dialogFooter"},function(){return g.include(e.lookupTemplate("section"),function(){return v.Unless(function(){return g.dataMustache(e.lookup("eq"),g.dot(e.lookup("instance"),"container","mode","get"),"list")},function(){return k.BUTTON({type:"button",class:"btn btn-default js-back"},"Back")})})}),"\n    "]})})})},"serverInformationModal.js":function(e,t,n){var o=void 0;n.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var r=void 0;n.watch(e("meteor/reactive-var"),{ReactiveVar:function(e){r=e}},1),o.serverInformationModal.onCreated(function(){var e=o.instance();e.container={mode:new r("list"),serverType:new r(null),currentItem:new r(null),$form:null,resetState:function(){e.container.mode.set("list"),e.container.serverType.set(null),e.container.currentItem.set(null)}}}),o.serverInformationModal.events({"click .js-back":function(e,t){t.container.resetState()}})},"serverInformationModal.styl":function(e,t,n){n.exports=e("./serverInformationModal.styl.css")},"serverInformationModal.styl.css":function(e,t,n){n.exports=e("meteor/modules").addStyles(".server-information-form label.wrapper {\n  display: block;\n}\n.server-information-form .checkbox {\n  margin: 0 8px 0 0;\n}\n")}}}}}}}}},{extensions:[".js",".json",".html",".styl"]});T("./node_modules/meteor/ohif:servers/both/index.js"),T("./node_modules/meteor/ohif:servers/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:servers"]={}}();

"undefined"==typeof Package&&(Package={}),Package["ohif:dicom-services"]={};

!function(){var a;"undefined"==typeof Package&&(Package={}),function(a,o){for(var n in o)n in a||(a[n]=o[n])}(Package["ohif:wadoproxy"]={},{WADOProxy:void 0})}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package["templating-runtime"].Template,i=Package.http.HTTP,a=Package["ohif:viewerbase"].dialogPolyfill,r=Package["ohif:wadoproxy"].WADOProxy,d=Package.modules.meteorInstall,s=Package["babel-runtime"].meteorBabelHelpers,u=Package.promise.Promise,c=Package["ecmascript-runtime-client"].Symbol,y=Package["ecmascript-runtime-client"].Map,l=Package["ecmascript-runtime-client"].Set,m=Package.blaze.Blaze,b=Package.blaze.UI,f=Package.blaze.Handlebars,h=Package.spacebars.Spacebars,p=Package.htmljs.HTML,x=d({node_modules:{meteor:{"ohif:studies":{both:{"main.js":function(t,e,n){var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},0),o.studies={},t("../imports/both")}},client:{"main.js":function(t){t("../imports/client")}},imports:{both:{"index.js":function(){}},client:{"index.js":function(t,e,n){n.watch(t("./components")),n.watch(t("./lib"))},components:{"index.js":function(t,e,n){n.watch(t("./browser"))},browser:{"index.js":function(t,e,n){n.watch(t("./item.html")),n.watch(t("./item.js")),n.watch(t("./list.html")),n.watch(t("./list.js")),n.watch(t("./list.styl")),n.watch(t("./quickSwitch.html")),n.watch(t("./quickSwitch.js")),n.watch(t("./series.html")),n.watch(t("./series.js")),n.watch(t("./sidebar.html")),n.watch(t("./sidebar.js"))},"item.html":function(t,e,n){n.exports=t("./template.item.js")},"template.item.js":function(){o.__checkName("studyBrowserItem"),o.studyBrowserItem=new o("Template.studyBrowserItem",function(){var t=this;return p.DIV({class:function(){return["study-browser-item ",h.mustache(h.dot(t.lookup("."),"studyItemClass"))," ",m.If(function(){return h.call(t.lookup("isActive"))},function(){return"active"})," ",m.If(function(){return h.call(t.lookup("isLoading"))},function(){return"loading"})]},"data-uid":function(){return h.mustache(h.dot(t.lookup("."),"studyInformation","studyInstanceUid"))}},"\n        ",p.DIV({class:"study-item"},"\n            ",m.If(function(){return h.call(t.lookup("isLoading"))},function(){return["\n                ",h.include(t.lookupTemplate("loadingText")),"\n            "]}),"\n            ",m.Let({studyData:function(){return h.call(h.dot(t.lookup("instance"),"studyData","get"))}},function(){return["\n                ",p.DIV({class:"study-item-box"},"\n                    ",p.DIV({class:"study-modality"},"\n                        ",p.DIV({class:"study-modality-text",style:function(){return h.mustache(t.lookup("modalityStyle"),h.dot(t.lookup("studyData"),"modalities"))}},m.View("lookup:studyData.modalities",function(){return h.mustache(h.dot(t.lookup("studyData"),"modalities"))})),"\n                    "),"\n                    ",p.DIV({class:"study-text"},"\n                        ",m.If(function(){return h.call(t.lookup("isLoaded"))},function(){return["\n                            ",p.DIV({class:"study-date"},m.View("lookup:formatDA",function(){return h.mustache(t.lookup("formatDA"),h.dot(t.lookup("studyData"),"studyDate"),"D-MMM-YYYY")})),"\n                            ",p.DIV({class:"study-description"},m.View("lookup:studyData.studyDescription",function(){return h.mustache(h.dot(t.lookup("studyData"),"studyDescription"))})),"\n                        "]},function(){return["\n                            ",p.DIV({class:"study-availability"},m.If(function(){return h.dataMustache(t.lookup("eq"),t.lookup("studyAvailable"),!1)},function(){return"N/A"},function(){return"Click to load"})),"\n                        "]}),"\n                    "),"\n                "),"\n            "]}),"\n        "),"\n        ",m.If(function(){return h.call(h.dot(t.lookup("."),"studyChildTemplate"))},function(){return["\n            ",m.If(function(){return h.dataMustache(t.lookup("and"),h.dataMustache(t.lookup("not"),t.lookup("isLoading")),h.dot(t.lookup("instance"),"studyData","get"),h.dot(t.lookup("instance"),"loaded"))},function(){return["\n                ",m._TemplateWith(function(){return{template:h.call(h.dot(t.lookup("."),"studyChildTemplate")),data:h.call(h.dataMustache(t.lookup("clone"),t.lookup(".")))}},function(){return h.include(function(){return h.call(o.__dynamic)})}),"\n            "]}),"\n        "]}),"\n    ")})},"item.js":function(t,e,n){var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){i=t}},1);var a=void 0;n.watch(t("meteor/tracker"),{Tracker:function(t){a=t}},2);var r=void 0;n.watch(t("meteor/jquery"),{$:function(t){r=t}},3);var d=void 0;n.watch(t("meteor/underscore"),{_:function(t){d=t}},4);var s=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){s=t}},5),o.studyBrowserItem.onCreated(function(){var t=o.instance(),e=t.data.studyInformation,n=e.studyInstanceUid;t.loaded=new i(!1),t.loading=new i(!1),t.studyData=new i(e),t.studyMetadata=null,t.getStudyMetadata=function(){if(t.loading.dep.depend(),!t.studyMetadata){var e=s.viewer.Studies.findBy({studyInstanceUid:n})||null;!e||e instanceof s.viewerbase.metadata.StudyMetadata||(e=new s.metadata.StudyMetadata(e,e.studyInstanceUid)),t.studyMetadata=e}return t.studyMetadata},t.autorun(function(){var t=o.instance();s.studies.loadingDict.get(n);var e=t.getStudyMetadata();if(e){var i=e.getFirstInstance();t.studyData.set({studyDate:i.getRawValue("x00080020")||"",studyDescription:i.getRawValue("x00081030")||"",modalities:i.getRawValue("x00080060")||""}),t.loaded.set(!0),t.loading.set(!1)}})}),o.studyBrowserItem.events({"click .study-item":function(t,e){if(!e.loading.get()){var n=e.data.studyInformation;if(!1!==n.available){var o=t.currentTarget.parentElement,i=r(o),u=function(){var e=d.clone(t);delete e.type,e.currentTarget=e.target=o;var a=r.Event("ohif.studies.study.click",e);i.trigger(a,n)};e.loaded.get()?u():(e.loading.set(!0),s.studies.loadStudy(n.studyInstanceUid).then(function(){e.loaded.set(!0),e.loading.set(!1),i.trigger("ohif.studies.study.load",n),a.afterFlush(u)}))}}}}),o.studyBrowserItem.helpers({isLoaded:function(){return o.instance().loaded.get()},isLoading:function(){return o.instance().loading.get()},modalitiesText:function(t){var e=t||"UN";return d.uniq(e.split(/[^A-Za-z]+/g)).join(" ")},modalityStyle:function(t){var e=t?t.split(/\s/g).length:1;return 1===e?"font-size:1em":2===e?"font-size:0.7em":"font-size:0.7em;line-height:1.4em;padding-top:0.5em"},studyAvailable:function(){var t=o.instance().data.studyInformation;if(t)return t.available}})},"list.html":function(t,e,n){n.exports=t("./template.list.js")},"template.list.js":function(){o.__checkName("studyBrowserList"),o.studyBrowserList=new o("Template.studyBrowserList",function(){var t=this;return p.DIV({class:function(){return["study-browser-list ",h.mustache(h.dot(t.lookup("."),"class"))]}},"\n        ",m.Each(function(){return{_sequence:h.call(t.lookup("getStudiesInformation")),_variable:"studyInformation"}},function(){return["\n            ",m._TemplateWith(function(){return h.dataMustache(t.lookup("clone"),t.lookup("."),h.kw({studyInformation:t.lookup("studyInformation")}))},function(){return h.include(t.lookupTemplate("studyBrowserItem"))}),"\n        "]}),"\n    ")})},"list.js":function(t,e,n){var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},0),o.studyBrowserList.onCreated(function(){var t=o.instance();t.data.studiesData&&(t.studiesData=t.data.studiesData)}),o.studyBrowserList.helpers({getStudiesInformation:function(){var t=o.instance(),e=void 0;e=t.studiesData?t.studiesData.get()||[]:t.data.studiesInformation||[];var n=new y;return e.forEach(function(t){return n.set(t.studyInstanceUid,t)}),Array.from(n.values())}})},"list.styl":function(t,e,n){n.exports=t("./list.styl.css")},"list.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles(".theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url(\"/packages/ohif_design/assets/theme-icons.png\") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.study-browser-item {\n  position: relative;\n  -webkit-transform: scale(1);\n  -moz-transform: scale(1);\n  -ms-transform: scale(1);\n  -o-transform: scale(1);\n  transform: scale(1);\n}\n.study-browser-item .loadingTextDiv {\n  background-color: #14191e;\n  -webkit-border-radius: 12px;\n  -moz-border-radius: 12px;\n  -ms-border-radius: 12px;\n  -o-border-radius: 12px;\n  border-radius: 12px;\n  font-size: 32px;\n  opacity: 0;\n  margin: 0;\n  padding: 25px;\n  position: absolute;\n  pointer-events: none;\n  z-index: 100;\n}\n.study-browser-item .loadingTextDiv {\n  color: #91b9cd;\n}\nbody.theme-tide .study-browser-item .loadingTextDiv {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .study-browser-item .loadingTextDiv {\n  color: #9ccdf8;\n}\nbody.theme-crickets .study-browser-item .loadingTextDiv {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .study-browser-item .loadingTextDiv {\n  color: #fab797;\n}\nbody.theme-mint .study-browser-item .loadingTextDiv {\n  color: #a7e9b3;\n}\nbody.theme-overcast .study-browser-item .loadingTextDiv {\n  color: #73f2fc;\n}\nbody.theme-quartz .study-browser-item .loadingTextDiv {\n  color: #d7e8fe;\n}\n.study-browser-item.loading .loadingTextDiv {\n  height: 100%;\n  left: 0;\n  opacity: 0.75;\n  top: 0;\n  width: 100%;\n}\n.study-browser-item.loading .study-item-box {\n  opacity: 0.2;\n}\n.study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-tide .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-tigerlily .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-crickets .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-honeycomb .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-mint .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-overcast .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\nbody.theme-quartz .study-browser-item.active .study-item-box .study-modality {\n  color: #000;\n}\n.study-browser-item.active .study-item-box .study-modality,\n.study-browser-item.active .study-item-box .study-modality:before,\n.study-browser-item.active .study-item-box .study-modality:after {\n  border-color: #131d29;\n}\n.study-browser-item.active .study-item-box .study-modality,\n.study-browser-item.active .study-item-box .study-modality:before,\n.study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #20a5d6;\n}\nbody.theme-tide .study-browser-item.active .study-item-box .study-modality {\n  background-color: #20a5d6;\n}\nbody.theme-tide .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #20a5d6;\n}\nbody.theme-tide .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #20a5d6;\n}\nbody.theme-tigerlily .study-browser-item.active .study-item-box .study-modality {\n  background-color: #fa8947;\n}\nbody.theme-tigerlily .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #fa8947;\n}\nbody.theme-tigerlily .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #fa8947;\n}\nbody.theme-crickets .study-browser-item.active .study-item-box .study-modality {\n  background-color: #d4c3c1;\n}\nbody.theme-crickets .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #d4c3c1;\n}\nbody.theme-crickets .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #d4c3c1;\n}\nbody.theme-honeycomb .study-browser-item.active .study-item-box .study-modality {\n  background-color: #cda56b;\n}\nbody.theme-honeycomb .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #cda56b;\n}\nbody.theme-honeycomb .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #cda56b;\n}\nbody.theme-mint .study-browser-item.active .study-item-box .study-modality {\n  background-color: #31b166;\n}\nbody.theme-mint .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #31b166;\n}\nbody.theme-mint .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #31b166;\n}\nbody.theme-overcast .study-browser-item.active .study-item-box .study-modality {\n  background-color: #507d80;\n}\nbody.theme-overcast .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #507d80;\n}\nbody.theme-overcast .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #507d80;\n}\nbody.theme-quartz .study-browser-item.active .study-item-box .study-modality {\n  background-color: #7858ce;\n}\nbody.theme-quartz .study-browser-item.active .study-item-box .study-modality:before {\n  background-color: #7858ce;\n}\nbody.theme-quartz .study-browser-item.active .study-item-box .study-modality:after {\n  background-color: #7858ce;\n}\n.study-browser-item:not(.active) .study-browser-series {\n  max-height: 0 !important;\n}\n.study-browser-item:not(.active) .study-browser-series .study-series-container {\n  opacity: 0;\n  -webkit-transform: translateY(-100%);\n  -moz-transform: translateY(-100%);\n  -ms-transform: translateY(-100%);\n  -o-transform: translateY(-100%);\n  transform: translateY(-100%);\n}\n.study-browser-item .study-browser-series {\n  overflow: hidden;\n  -webkit-transition: max-height 0.3s ease;\n  -moz-transition: max-height 0.3s ease;\n  -ms-transition: max-height 0.3s ease;\n  -o-transition: max-height 0.3s ease;\n  transition: max-height 0.3s ease;\n}\n.study-browser-item .study-browser-series .study-series-container {\n  opacity: 1;\n  -webkit-transition: opacity 0.3s ease , transform 0.3s ease;\n  -moz-transition: opacity 0.3s ease , transform 0.3s ease;\n  -ms-transition: opacity 0.3s ease , transform 0.3s ease;\n  -o-transition: opacity 0.3s ease , transform 0.3s ease;\n  transition: opacity 0.3s ease , transform 0.3s ease;\n  -webkit-transform: translateY(0);\n  -moz-transform: translateY(0);\n  -ms-transform: translateY(0);\n  -o-transform: translateY(0);\n  transform: translateY(0);\n  -webkit-transform-origin: 50% 0%;\n  -moz-transform-origin: 50% 0%;\n  -ms-transform-origin: 50% 0%;\n  -o-transform-origin: 50% 0%;\n  transform-origin: 50% 0%;\n}\n.study-item-box {\n  border: 1px solid transparent;\n  -webkit-border-radius: 12px;\n  -moz-border-radius: 12px;\n  -ms-border-radius: 12px;\n  -o-border-radius: 12px;\n  border-radius: 12px;\n  cursor: pointer;\n  padding: 12px 7px 11px;\n  position: relative;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n  transition: all 0.3s ease;\n  z-index: 0;\n}\n.study-item-box:hover {\n  background-color: #14191e;\n  border-color: #2d4660;\n}\n.study-item-box:hover.additional {\n  color: #91b9cd;\n}\nbody.theme-tide .study-item-box:hover.additional {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .study-item-box:hover.additional {\n  color: #9ccdf8;\n}\nbody.theme-crickets .study-item-box:hover.additional {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .study-item-box:hover.additional {\n  color: #fab797;\n}\nbody.theme-mint .study-item-box:hover.additional {\n  color: #a7e9b3;\n}\nbody.theme-overcast .study-item-box:hover.additional {\n  color: #73f2fc;\n}\nbody.theme-quartz .study-item-box:hover.additional {\n  color: #d7e8fe;\n}\n.study-item-box.additional {\n  font-size: 16px;\n  font-weight: normal;\n  height: 91px;\n  line-height: 91px;\n  padding: 0;\n  text-align: center;\n}\n.study-item-box.additional {\n  color: #fff;\n}\nbody.theme-tide .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-tigerlily .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-crickets .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-honeycomb .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-mint .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-overcast .study-item-box.additional {\n  color: #fff;\n}\nbody.theme-quartz .study-item-box.additional {\n  color: #fff;\n}\n.study-item-box .study-text {\n  font-size: 13px;\n  left: 89px;\n  line-height: 14px;\n  position: absolute;\n  right: 7px;\n  top: 12px;\n}\n.study-item-box .study-text .study-date {\n  margin-top: 8px;\n}\n.study-item-box .study-text .study-date {\n  color: #91b9cd;\n}\nbody.theme-tide .study-item-box .study-text .study-date {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .study-item-box .study-text .study-date {\n  color: #9ccdf8;\n}\nbody.theme-crickets .study-item-box .study-text .study-date {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .study-item-box .study-text .study-date {\n  color: #fab797;\n}\nbody.theme-mint .study-item-box .study-text .study-date {\n  color: #a7e9b3;\n}\nbody.theme-overcast .study-item-box .study-text .study-date {\n  color: #73f2fc;\n}\nbody.theme-quartz .study-item-box .study-text .study-date {\n  color: #d7e8fe;\n}\n.study-item-box .study-text .study-description {\n  margin-top: 8px;\n}\n.study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-tide .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-tigerlily .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-crickets .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-honeycomb .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-mint .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-overcast .study-item-box .study-text .study-description {\n  color: #fff;\n}\nbody.theme-quartz .study-item-box .study-text .study-description {\n  color: #fff;\n}\n.study-item-box .study-text .study-availability {\n  margin-top: 24px;\n}\n.study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-tide .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-tigerlily .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-crickets .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-honeycomb .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-mint .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-overcast .study-item-box .study-text .study-availability {\n  color: #fff;\n}\nbody.theme-quartz .study-item-box .study-text .study-availability {\n  color: #fff;\n}\n.study-item-box .study-modality {\n  font-size: 20px;\n  line-height: 50px;\n  margin-left: 12px;\n  margin-top: 12px;\n  position: relative;\n}\n.study-item-box .study-modality {\n  color: #91b9cd;\n}\nbody.theme-tide .study-item-box .study-modality {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .study-item-box .study-modality {\n  color: #9ccdf8;\n}\nbody.theme-crickets .study-item-box .study-modality {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .study-item-box .study-modality {\n  color: #fab797;\n}\nbody.theme-mint .study-item-box .study-modality {\n  color: #a7e9b3;\n}\nbody.theme-overcast .study-item-box .study-modality {\n  color: #73f2fc;\n}\nbody.theme-quartz .study-item-box .study-modality {\n  color: #d7e8fe;\n}\n.study-item-box .study-modality .study-modality-text {\n  height: 100%;\n  overflow: hidden;\n  text-align: center;\n  text-transform: uppercase;\n}\n.study-item-box .study-modality,\n.study-item-box .study-modality:before,\n.study-item-box .study-modality:after {\n  -webkit-border-radius: 8px;\n  -moz-border-radius: 8px;\n  -ms-border-radius: 8px;\n  -o-border-radius: 8px;\n  border-radius: 8px;\n  height: 54px;\n  -webkit-transition: all 0.3s ease;\n  -moz-transition: all 0.3s ease;\n  -ms-transition: all 0.3s ease;\n  -o-transition: all 0.3s ease;\n  transition: all 0.3s ease;\n  width: 54px;\n}\n.study-item-box .study-modality,\n.study-item-box .study-modality:before,\n.study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-tide .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-tide .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-tide .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-tigerlily .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-tigerlily .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-tigerlily .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-crickets .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-crickets .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-crickets .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-honeycomb .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-honeycomb .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-honeycomb .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-mint .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-mint .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-mint .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-overcast .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-overcast .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-overcast .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\nbody.theme-quartz .study-item-box .study-modality {\n  border: 2px solid #000;\n}\nbody.theme-quartz .study-item-box .study-modality:before {\n  border: 2px solid #000;\n}\nbody.theme-quartz .study-item-box .study-modality:after {\n  border: 2px solid #000;\n}\n.study-item-box .study-modality,\n.study-item-box .study-modality:before,\n.study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-tide .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-tide .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-tide .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-tigerlily .study-item-box .study-modality {\n  background-color: #5b3a59;\n}\nbody.theme-tigerlily .study-item-box .study-modality:before {\n  background-color: #5b3a59;\n}\nbody.theme-tigerlily .study-item-box .study-modality:after {\n  background-color: #5b3a59;\n}\nbody.theme-crickets .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-crickets .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-crickets .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-honeycomb .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-honeycomb .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-honeycomb .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-mint .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-mint .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-mint .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-overcast .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-overcast .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-overcast .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\nbody.theme-quartz .study-item-box .study-modality {\n  background-color: #344a61;\n}\nbody.theme-quartz .study-item-box .study-modality:before {\n  background-color: #344a61;\n}\nbody.theme-quartz .study-item-box .study-modality:after {\n  background-color: #344a61;\n}\n.study-item-box .study-modality:before,\n.study-item-box .study-modality:after {\n  display: block;\n  content: '';\n  position: absolute;\n}\n.study-item-box .study-modality:before {\n  top: -8px;\n  left: -8px;\n  z-index: -1;\n}\n.study-item-box .study-modality:after {\n  top: -14px;\n  left: -14px;\n  z-index: -2;\n}\n")},"quickSwitch.html":function(t,e,n){n.exports=t("./template.quickSwitch.js")},"template.quickSwitch.js":function(){o.__checkName("studyBrowserQuickSwitch"),o.studyBrowserQuickSwitch=new o("Template.studyBrowserQuickSwitch",function(){var t=this;return m._TemplateWith(function(){return h.call(t.lookup("studyBrowserData"))},function(){return h.include(t.lookupTemplate("studyBrowserList"))})})},"quickSwitch.js":function(t,e,n){var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){i=t}},1);var a=void 0;n.watch(t("meteor/tracker"),{Tracker:function(t){a=t}},2);var r=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){r=t}},3),o.studyBrowserQuickSwitch.onCreated(function(){var t=o.instance();t.studiesInformation=new i;var e={studyInstanceUid:r.viewer.data.studyInstanceUids};r.studies.searchStudies(e).then(function(e){return t.studiesInformation.set(e)})}),o.studyBrowserQuickSwitch.onRendered(function(){var t=o.instance();t.autorun(function(){t.studiesInformation.dep.depend();var e=t.data.currentStudy.get(),n=e&&e.studyInstanceUid||"";a.afterFlush(function(){var e=t.$(".study-browser-item");e.removeClass("active"),e.filter('[data-uid="'+n+'"]').addClass("active")})})}),o.studyBrowserQuickSwitch.events({"ohif.studies.study.click":function(t,e,n){var o=n.studyInstanceUid,i=r.viewer.Studies.findBy({studyInstanceUid:o});e.data.currentStudy.set(i),$(t.currentTarget).closest(".study-switch").siblings(".series-switch").trigger("rescale")}}),o.studyBrowserQuickSwitch.helpers({studyBrowserData:function(){return{studiesInformation:o.instance().studiesInformation.get()}}})},"series.html":function(t,e,n){n.exports=t("./template.series.js")},"template.series.js":function(){o.__checkName("studyBrowserSeries"),o.studyBrowserSeries=new o("Template.studyBrowserSeries",function(){var t=this;return p.DIV({class:"study-browser-series"},"\n        ",p.DIV({class:"study-series-container"},"\n            ",m.Each(function(){return{_sequence:h.call(h.dot(t.lookup("instance"),"thumbnails","get")),_variable:"thumbnail"}},function(){return["\n                ",m._TemplateWith(function(){return h.dataMustache(t.lookup("clone"),t.lookup("."),h.kw({thumbnail:t.lookup("thumbnail")}))},function(){return h.include(t.lookupTemplate("thumbnailEntry"))}),"\n            "]}),"\n        "),"\n    ")})},"series.js":function(t,e,n){var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){i=t}},1);var a=void 0;n.watch(t("meteor/tracker"),{Tracker:function(t){a=t}},2);var r=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){r=t}},3),o.studyBrowserSeries.onCreated(function(){var t=o.instance(),e=t.data,n=e.studyInformation,a=e.studyMetadata,d=a&&a.studyInstanceUid||n&&n.studyInstanceUid;t.thumbnails=new i([]),t.autorun(function(){var e=a;if(e instanceof i&&(e=e.get()),e||(e=r.viewer.Studies.findBy({studyInstanceUid:d})),e){var n=e.displaySets;n.length||(n=r.viewerbase.sortingManager.getDisplaySets(e),e.displaySets=n,e.setDisplaySets(n),e.forEachDisplaySet(function(t){r.viewerbase.stackManager.makeAndAddStack(e,t)}));var o=[];n.forEach(function(t,e){o.push({thumbnailIndex:e,stack:t})}),t.thumbnails.set(o)}})}),o.studyBrowserSeries.onRendered(function(){var t=o.instance();t.autorun(function(){t.thumbnails.get(),a.afterFlush(function(){t.$(".study-browser-series").adjustMax("height")})})})},"sidebar.html":function(t,e,n){n.exports=t("./template.sidebar.js")},"template.sidebar.js":function(){o.__checkName("studyBrowserSidebar"),o.studyBrowserSidebar=new o("Template.studyBrowserSidebar",function(){var t=this;return m._TemplateWith(function(){return{class:h.call("fit noselect"),scrollableClass:h.call("p-a-1"),scrollStep:h.call(191)}},function(){return h.include(t.lookupTemplate("scrollArea"),function(){return["\n        ",m._TemplateWith(function(){return h.dataMustache(t.lookup("clone"),t.lookup("."),h.kw({studyChildTemplate:"studyBrowserSeries"}))},function(){return h.include(t.lookupTemplate("studyBrowserList"))}),"\n    "]})})})},"sidebar.js":function(t,e,n){var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},0),o.studyBrowserSidebar.events({"ohif.studies.study.click":function(t,e){var n=$(t.currentTarget);n.siblings().removeClass("active"),n.toggleClass("active")}})}}},lib:{"index.js":function(t,e,n){n.watch(t("./classes")),n.watch(t("./loadStudy")),n.watch(t("./retrieveStudiesMetadata")),n.watch(t("./retrieveStudyMetadata")),n.watch(t("./searchStudies"))},"loadStudy.js":function(t,e,n){var o=void 0;n.watch(t("meteor/reactive-dict"),{ReactiveDict:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/tracker"),{Tracker:function(t){i=t}},1);var a=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){a=t}},2),a.studies.loadingDict=new o,a.studies.loadStudy=function(t){return new u(function(e,n){var o=void 0;return i.nonreactive(function(){o=a.studies.loadingDict.get(t)||""}),"loading"!==o&&a.studies.loadingDict.set(t,"loading"),a.studies.retrieveStudyMetadata(t).then(function(n){if(!n.displaySets){var o=a.viewerbase.sortingManager.getDisplaySets(n);n.displaySets=o,n.setDisplaySets(o),n.forEachDisplaySet(function(t){a.viewerbase.stackManager.makeAndAddStack(n,t)})}a.viewer.Studies.findBy({studyInstanceUid:n.studyInstanceUid})||(a.viewer.Studies.insert(n),a.viewer.StudyMetadataList.insert(n)),a.viewerbase.StudyLoadingListener.getInstance().addStudy(n),a.studies.loadingDict.set(t,"loaded"),e(n)}).catch(function(){for(var e=arguments.length,o=Array(e),i=0;i<e;i++)o[i]=arguments[i];a.studies.loadingDict.set(t,"failed"),n(o)})})}},"retrieveStudiesMetadata.js":function(t,e,n){var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},0),o.studies.retrieveStudiesMetadata=function(t,e){var n=[];t.forEach(function(t){var i=o.studies.retrieveStudyMetadata(t,e);n.push(i)});var i=u.all(n);return i.catch(function(t){return o.log.warn(t)}),i}},"retrieveStudyMetadata.js":function(t,e,n){var o=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},1),n.watch(t("meteor/ohif:viewerbase"));var a=new y;i.studies.retrieveStudyMetadata=function(t,e){if(a.has(t))return a.get(t);var n=Array.isArray(e)?"|"+e.join("|"):"",r="retrieveStudyMetadata["+t+n+"]";i.log.time(r);var d=new u(function(n,a){o.call("GetStudyMetadata",t,function(d,s){if(i.log.timeEnd(r),d){var u=d.error,c="";return c="server-connection-error"===u?"There was an error connecting to the DICOM server, please verify if it is up and running.":"server-internal-error"===u?"There was an internal error with the DICOM server getting metadeta for "+t:"For some reason we could not retrieve the study's metadata for "+t+".",i.log.error(c),i.log.error(d.stack),void a("GetStudyMetadata: "+c)}if(e&&e.length&&(s.seriesList=s.seriesList.filter(function(t){return e.indexOf(t.seriesInstanceUid)>-1})),s){window.HipaaLogger&&o.user&&o.user()&&window.HipaaLogger.logEvent({eventType:"viewed",userId:o.userId(),userName:o.user().profile.fullName,collectionName:"Study",recordId:t,patientId:s.patientId,patientName:s.patientName}),i.viewerbase.sortStudy(s),i.viewerbase.updateMetaDataManager(s);var y=new i.metadata.StudyMetadata(s);s.displaySets=i.viewerbase.sortingManager.getDisplaySets(y),s.displaySets.forEach(function(t){i.viewerbase.stackManager.makeAndAddStack(s,t),y.addDisplaySet(t)}),n(s)}else a("GetStudyMetadata: No study data returned from server: "+t)})});return a.set(t,d),d}},"searchStudies.js":function(t,e,n){var o=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){o=t}},0);var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},1);var a=new y;i.studies.searchStudies=function(t){var e=JSON.stringify(t);if(a.has(e))return a.get(e);var n=new u(function(e,n){o.call("StudyListSearch",t,function(t,o){t?n(t):e(o)})});return a.set(e,n),n}},classes:{"OHIFStudyMetadataSource.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),a=o(t("babel-runtime/helpers/possibleConstructorReturn")),r=o(t("babel-runtime/helpers/inherits"));n.export({OHIFStudyMetadataSource:function(){return b}});var d=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){d=t}},0),n.watch(t("meteor/ohif:viewerbase"));var s=d.viewerbase,c=s.OHIFError,y=s.metadata,l=y.StudySummary,m=y.StudyMetadata,b=function(t){function e(){return(0,i.default)(this,e),(0,a.default)(this,t.apply(this,arguments))}return(0,r.default)(e,t),e.prototype.getByInstanceUID=function(){function t(t){return d.studies.retrieveStudyMetadata(t)}return t}(),e.prototype.loadStudy=function(){function t(t){var n=this;if(!(t instanceof m||t instanceof l))throw new c("OHIFStudyMetadataSource::loadStudy study is not an instance of StudySummary or StudyMetadata");return new u(function(o,i){var a=t.getStudyInstanceUID();if(t instanceof m)return d.viewer.Studies.findBy({studyInstanceUid:a})||e._updateStudyCollections(t),void o(t);n.getByInstanceUID(a).then(function(t){var n=new d.metadata.StudyMetadata(t,t.studyInstanceUid),i=d.viewerbase.sortingManager.getDisplaySets(n);n.setDisplaySets(i),e._updateStudyCollections(n),o(n)}).catch(i)})}return t}(),e._updateStudyCollections=function(){function t(t){var e=t.getData();e.selected=!0,e.displaySets=t.getDisplaySets(),d.viewer.Studies.insert(e),d.viewer.StudyMetadataList.insert(t)}return t}(),e}(d.viewerbase.StudyMetadataSource)},"OHIFStudySummary.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/typeof")),a=o(t("babel-runtime/helpers/classCallCheck")),r=o(t("babel-runtime/helpers/possibleConstructorReturn")),d=o(t("babel-runtime/helpers/inherits"));n.export({OHIFStudySummary:function(){return l}});var u=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){u=t}},0),n.watch(t("meteor/ohif:viewerbase"));var c="string",y={modalities:"ModalitiesInStudy",patientBirthdate:"PatientBirthDate"},l=function(t){function e(){return(0,a.default)(this,e),(0,r.default)(this,t.apply(this,arguments))}return(0,d.default)(e,t),e.prototype.addTags=function(){function n(n){var o=Object.prototype.hasOwnProperty,i=Object.create(null);for(var a in s.sanitizeForInObject(n))if(o.call(n,a)){var r=e.getStandardPropertyName(a);r&&(i[r]=n[a])}t.prototype.addTags.call(this,i)}return n}(),e.getStandardPropertyName=function(){function t(t){var e=void 0;return(void 0===t?"undefined":(0,i.default)(t))===c&&"_"!==t.charAt(0)&&(e=t in y?y[y]:(e=t.replace(/^sop/,"SOP").replace(/Uid$/,"UID").replace(/Id$/,"ID")).charAt(0).toUpperCase()+e.substr(1)),e}return t}(),e}(u.viewerbase.metadata.StudySummary)},"index.js":function(t,e,n){var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},0);var i=void 0;n.watch(t("./OHIFStudyMetadataSource"),{OHIFStudyMetadataSource:function(t){i=t}},1);var a=void 0;n.watch(t("./OHIFStudySummary"),{OHIFStudySummary:function(t){a=t}},2),o.studies.classes={OHIFStudyMetadataSource:i,OHIFStudySummary:a}}}}}}}}}},{extensions:[".js",".json",".html",".styl"]});x("./node_modules/meteor/ohif:studies/both/main.js"),x("./node_modules/meteor/ohif:studies/client/main.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:studies"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package.jquery.$,o=Package.jquery.jQuery,s=Package.http.HTTP,r=Package.random.Random,a=Package["silentcicero:jszip"].JSZip,d=Package["aldeed:simple-schema"].SimpleSchema,l=Package["aldeed:simple-schema"].MongoObject,u=Package["accounts-base"].Accounts,c=Package["momentjs:moment"].moment,h=Package["ohif:viewerbase"].dialogPolyfill,p=Package["ohif:wadoproxy"].WADOProxy,y=Package.modules.meteorInstall,f=Package["babel-runtime"].meteorBabelHelpers,m=Package.promise.Promise,b=Package["aldeed:collection2-core"].Collection2,g=Package["ecmascript-runtime-client"].Symbol,v=Package["ecmascript-runtime-client"].Map,S=Package["ecmascript-runtime-client"].Set,w=Package.webapp.WebApp,x=Package.logging.Log,T=Package.deps.Tracker,k=Package.deps.Deps,L=Package.session.Session,C=Package["ddp-client"].DDP,D=Package.mongo.Mongo,I=Package.ui.Blaze,P=Package.ui.UI,N=Package.ui.Handlebars,E=Package.spacebars.Spacebars,j=Package["templating-runtime"].Template,O=Package.check.check,M=Package.check.Match,R=Package.underscore._,_=Package.ejson.EJSON,A=Package["launch-screen"].LaunchScreen,z=Package.htmljs.HTML,F,H,q,V=y({node_modules:{meteor:{"ohif:study-list":{both:{"index.js":function(t,e,n){n.watch(t("./base.js")),n.watch(t("./collections.js"))},"base.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),i.studylist={collections:{},actions:{}}},"collections.js":function(t,e,n){n.export({StudyImportStatus:function(){return s}});var i=void 0;n.watch(t("meteor/mongo"),{Mongo:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},1);var s=new i.Collection("studyImportStatus");s._debugName="StudyImportStatus",o.studylist.collections.StudyImportStatus=s}},client:{"index.js":function(t,e,n){n.watch(t("./base")),n.watch(t("./collections")),n.watch(t("./lib")),n.watch(t("./components")),n.watch(t("./dropdown"))},"base.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),Object.assign(i.studylist,{callbacks:{}})},"dropdown.js":function(t,e,n){var i=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},1),i.startup(function(){o.studylist.dropdown=new o.ui.Dropdown,o.studylist.dropdown.setItems([{action:o.studylist.viewSeriesDetails,text:"View Series Details"},{text:"Anonymize",disabled:!0},{text:"Send",disabled:!0,separatorAfter:!0},{text:"Delete",disabled:!0},{action:o.studylist.exportSelectedStudies,text:"Export",title:"Export Selected Studies"}])})},collections:{"index.js":function(t,e,n){n.watch(t("./studies.js"))},"studies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},1),i.startup(function(){var t=new i.Collection(null);t._debugName="Studies",o.studylist.collections.Studies=t})}},components:{"index.js":function(t,e,n){n.watch(t("./seriesDetailsModal")),n.watch(t("./studylist"))},seriesDetailsModal:{"index.js":function(t,e,n){n.watch(t("./seriesDetailsModal.html")),n.watch(t("./seriesDetailsTable/seriesDetailsTable.html")),n.watch(t("./seriesDetailsTable/seriesDetailsTable.styl")),n.watch(t("./seriesDetailsTable/seriesDetailsTable.js"))},"seriesDetailsModal.html":function(t,e,n){n.exports=t("./template.seriesDetailsModal.js")},"template.seriesDetailsModal.js":function(){j.__checkName("seriesDetailsModal"),j.seriesDetailsModal=new j("Template.seriesDetailsModal",function(){var t=this;return I._TemplateWith(function(){return E.dataMustache(t.lookup("extend"),t.lookup("."),E.kw({title:"Series Details"}))},function(){return E.include(t.lookupTemplate("dialogSimple"),function(){return["\n        ",I._TemplateWith(function(){return{selectedStudies:E.call(E.dot(t.lookup("."),"selectedStudies"))}},function(){return E.include(t.lookupTemplate("seriesDetailsTable"))}),"\n    "]})})})},seriesDetailsTable:{"seriesDetailsTable.html":function(t,e,n){n.exports=t("./template.seriesDetailsTable.js")},"template.seriesDetailsTable.js":function(){j.__checkName("seriesDetailsTable"),j.seriesDetailsTable=new j("Template.seriesDetailsTable",function(){var t=this;return[I.Unless(function(){return E.call(E.dot(t.lookup("selectedStudies"),"length"))},function(){return["\n        ",z.P({align:"center"},"Series details not found"),"\n    "]}),"\n    ",I.Each(function(){return E.call(t.lookup("selectedStudies"))},function(){return["\n        ",z.DIV({class:"selectedStudyContainer"},"\n            ",z.TABLE({class:"table table-responsive tblStudyDetails"},"\n                ",z.TBODY("\n                ",z.TR("\n                    ",z.TD({class:"center patientID"},"\n                        ",z.DIV("\n                            ",z.SPAN("Patient ID"),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control",id:"patientID",placeholder:"Patient ID",disabled:"disabled",value:function(){return E.mustache(t.lookup("patientId"))}}),"\n                    "),"\n                    ",z.TD({class:"patientName"},"\n                        ",z.DIV("\n                            ",z.SPAN("Patient Name"),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control",id:"patientName",placeholder:"Patient Name",disabled:"disabled",value:function(){return E.mustache(t.lookup("formatPN"),t.lookup("patientName"))}}),"\n                    "),"\n                    ",z.TD({class:"accessionNumber"},"\n                        ",z.DIV("\n                            ",z.SPAN("Accession Number"),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control",id:"accessionNumber",placeholder:"Accession Number",disabled:"disabled",value:function(){return E.mustache(t.lookup("accessionNumber"))}}),"\n                    "),"\n                "),"\n                ",z.TR("\n                    ",z.TD({class:"studyDescription"},"\n                        ",z.DIV("\n                            ",z.SPAN("Study Description"),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control",id:"studyDescription",placeholder:"Study Description",disabled:"disabled",value:function(){return E.mustache(t.lookup("studyDescription"))}}),"\n                    "),"\n                    ",z.TD({class:"studyDate"},"\n                        ",z.DIV("\n                            ",z.SPAN("Study Date"),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control",id:"studyDate",placeholder:"Study Date",disabled:"disabled",value:function(){return E.mustache(t.lookup("formatDA"),t.lookup("studyDate"))}}),"\n                    "),"\n\n                    ",z.TD(),"\n                "),"\n                "),"\n            "),"\n\n            ",z.TABLE({class:"table table-responsive tblSeriesDetails"},"\n                ",z.THEAD("\n                ",z.TR("\n                    ",z.TH({class:"header"},"Number"),"\n                    ",z.TH({class:"header"},"Modality"),"\n                    ",z.TH({class:"header"},"Description"),"\n                    ",z.TH({class:"header"},"Instances"),"\n                "),"\n                "),"\n\n                ",z.TBODY("\n                ",I.If(function(){return E.call(t.lookup("displaySeriesLoadingText"))},function(){return["\n                    ",z.TR("\n                        ",z.TD({colspan:"4",class:"center"},"\n                            ",E.include(t.lookupTemplate("loadingText")),"\n                        "),"\n                    "),"\n                "]}),"\n\n                ",I.Each(function(){return E.call(t.lookup("seriesList"))},function(){return["\n                    ",z.TR("\n                        ",z.TD({class:"center"},I.View("lookup:seriesNumber",function(){return E.mustache(t.lookup("seriesNumber"))})),"\n                        ",z.TD({class:"center"},I.View("lookup:modality",function(){return E.mustache(t.lookup("modality"))})),"\n                        ",z.TD({class:"center"},I.View("lookup:seriesDescription",function(){return E.mustache(t.lookup("seriesDescription"))})),"\n                        ",z.TD({class:"center"},I.View("lookup:instances.length",function(){return E.mustache(E.dot(t.lookup("instances"),"length"))})),"\n                    "),"\n                "]}),"\n                "),"\n            "),"\n        "),"\n    "]})]})},"seriesDetailsTable.js":function(t,e,n){var i=void 0;n.watch(t("meteor/templating"),{Template:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/reactive-dict"),{ReactiveDict:function(t){o=t}},1);var s=void 0;n.watch(t("meteor/underscore"),{_:function(t){s=t}},2);var r=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){r=t}},3),i.seriesDetailsTable.onCreated(function(){var t=i.instance();t.selectedStudies=new o;var e=t.data.selectedStudies;e&&(s.each(e,function(t){t.displaySeriesLoadingText=!0}),t.selectedStudies.set("studies",e))}),i.seriesDetailsTable.onRendered(function(){var t=i.instance(),e=t.selectedStudies.get("studies");e&&s.map(e,function(n,i){e[i].seriesList=[],r.studies.retrieveStudyMetadata(function(n){e[i].seriesList=n.seriesList,e[i].displaySeriesLoadingText=!1,t.selectedStudies.set("studies",e)})})}),i.seriesDetailsTable.helpers({selectedStudies:function(){return i.instance().selectedStudies.get("studies")}})},"seriesDetailsTable.styl":function(t,e,n){n.exports=t("./seriesDetailsTable.styl.css")},"seriesDetailsTable.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.selectedStudyContainer {\n  margin-bottom: 15px;\n}\n.selectedStudyContainer .tblStudyDetails tbody > tr > td > label {\n  color: $textPrimaryColor;\n}\n.selectedStudyContainer .tblStudyDetails tbody > tr > td > input[type="text"] {\n  height: 28px;\n  background-color: $primaryBackgroundColor;\n  color: $textPrimaryColor;\n  width: calc(100% - 10px);\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  -ms-border-radius: 4px;\n  -o-border-radius: 4px;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n.selectedStudyContainer .tblSeriesDetails thead > tr > th {\n  text-align: center;\n}\n.selectedStudyContainer .tblSeriesDetails tbody > tr td {\n  text-align: center;\n  color: $textPrimaryColor;\n}\n.selectedStudyContainer .tblSeriesDetails .loadingTextDiv {\n  font-size: 13px;\n  color: $textSecondaryColor;\n}\n')}}},studylist:{"index.js":function(t,e,n){n.watch(t("./studylist.html")),n.watch(t("./studylist.styl")),n.watch(t("./studylistStudy/studylistStudy.html")),n.watch(t("./studylistStudy/studylistStudy.js")),n.watch(t("./studylistStudy/studylistStudy.styl")),n.watch(t("./studylistResult/studylistResult.html")),n.watch(t("./studylistResult/studylistResult.js")),n.watch(t("./studylistResult/studylistResult.styl")),n.watch(t("./studylistToolbar/studylistToolbar.html")),n.watch(t("./studylistToolbar/studylistToolbar.js")),n.watch(t("./studylistToolbar/studylistToolbar.styl"))},"studylist.html":function(t,e,n){n.exports=t("./template.studylist.js")},"template.studylist.js":function(){j.__checkName("studylist"),j.studylist=new j("Template.studylist",function(){var t=this;return z.DIV({class:"study-list-wrapper"},"\n        ",I._TemplateWith(function(){return E.dataMustache(t.lookup("clone"),t.lookup("."))},function(){return E.include(t.lookupTemplate("studylistResult"))}),"\n    ")})},"studylist.styl":function(t,e,n){n.exports=t("./studylist.styl.css")},"studylist.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.study-list-wrapper {\n  color: #fff;\n  margin: 2px auto 0;\n  height: calc(100% - 91px);\n  position: relative;\n  width: 100%;\n}\n.study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-tide .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-tigerlily .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-crickets .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-honeycomb .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-mint .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-overcast .study-list-wrapper {\n  background-color: #000;\n}\nbody.theme-quartz .study-list-wrapper {\n  background-color: #000;\n}\n.study-list-wrapper .loadingTextDiv {\n  font-size: 30px;\n}\n.study-list-wrapper .loadingTextDiv {\n  color: #91b9cd;\n}\nbody.theme-tide .study-list-wrapper .loadingTextDiv {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .study-list-wrapper .loadingTextDiv {\n  color: #9ccdf8;\n}\nbody.theme-crickets .study-list-wrapper .loadingTextDiv {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .study-list-wrapper .loadingTextDiv {\n  color: #fab797;\n}\nbody.theme-mint .study-list-wrapper .loadingTextDiv {\n  color: #a7e9b3;\n}\nbody.theme-overcast .study-list-wrapper .loadingTextDiv {\n  color: #73f2fc;\n}\nbody.theme-quartz .study-list-wrapper .loadingTextDiv {\n  color: #d7e8fe;\n}\n')},studylistResult:{"studylistResult.html":function(t,e,n){n.exports=t("./template.studylistResult.js")},"template.studylistResult.js":function(){j.__checkName("studylistResult"),j.studylistResult=new j("Template.studylistResult",function(){var t=this;return[z.DIV({class:"studyListToolbar clearfix"},"\n        ",z.Raw('<div class="header pull-left">Study List</div>'),"\n        ",z.DIV({class:"studyCount pull-right"},I.View("lookup:numberOfStudies",function(){return E.mustache(t.lookup("numberOfStudies"))})),"\n        ",z.DIV({class:"pull-right"},E.include(t.lookupTemplate("studylistToolbar"))),"\n    "),z.Raw('\n    <div class="theadBackground">\n    </div>\n    '),z.DIV({id:"studyListContainer"},"\n        ",z.TABLE({id:"tblStudyList",class:"studylistResult table noselect"},"\n            ",z.THEAD("\n                ",z.TR("\n                    ",z.TH({class:"patientName"},"\n                        ",z.DIV({id:"_patientName",class:"sortingCell"},"\n                            ",z.SPAN("Patient Name"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"patientName"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",id:"patientName"}),"\n                    "),"\n                    ",z.TH({class:"patientId"},"\n                        ",z.DIV({id:"_patientId",class:"sortingCell"},"\n                            ",z.SPAN("MRN"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"patientId"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",id:"patientId"}),"\n                    "),"\n                    ",z.TH({class:"accessionNumber"},"\n                        ",z.DIV({id:"_accessionNumber",class:"sortingCell "},"\n                            ",z.SPAN("Accession #"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"accessionNumber"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",id:"accessionNumber"}),"\n                    "),"\n                    ",z.TH({class:"studyDate"},"\n                        ",z.DIV({id:"_studyDate",class:"sortingCell"},"\n                            ",z.SPAN("Study Date"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"studyDate"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",name:"daterange",id:"studyDate"}),"\n                    "),"\n                    ",z.TH({class:"modalities"},"\n                        ",z.DIV({id:"_modalities",class:"sortingCell"},"\n                            ",z.SPAN("Modality"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"modalities"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",id:"modality"}),"\n                    "),"\n                    ",z.TH({class:"studyDescription"},"\n                        ",z.DIV({id:"_studyDescription",class:"sortingCell"},"\n                            ",z.SPAN("Study Description"),"\n                            ",z.I({class:function(){return E.mustache(E.dot(t.lookup("sortingColumnsIcons"),"studyDescription"))}},z.CharRef({html:"&nbsp;",str:""})),"\n                        "),"\n                        ",z.INPUT({type:"text",class:"form-control studylist-search",id:"studyDescription"}),"\n                    "),"\n                "),"\n            "),"\n            ",z.TBODY({id:"studyListData"},"\n                ",I.Each(function(){return{_sequence:E.call(t.lookup("studies")),_variable:"study"}},function(){return["\n                    ",I._TemplateWith(function(){return E.dataMustache(t.lookup("clone"),t.lookup("study"),t.lookup("."))},function(){return E.include(t.lookupTemplate("studylistStudy"))}),"\n                "]}),"\n            "),"\n        "),"\n\n        ",z.Raw("\x3c!-- Pagination --\x3e"),"\n        ",I._TemplateWith(function(){return E.call(E.dot(t.lookup("instance"),"paginationData"))},function(){return E.include(t.lookupTemplate("paginationArea"))}),"\n\n        ",I.If(function(){return E.dataMustache(t.lookup("session"),"showLoadingText")},function(){return["\n            ",E.include(t.lookupTemplate("loadingText")),"\n        "]},function(){return["\n            ",I.If(function(){return E.dataMustache(t.lookup("session"),"serverError")},function(){return["\n                ",z.DIV({class:"notFound"},"There was an error fetching studies"),"\n            "]},function(){return["\n                ",I.Unless(function(){return E.call(t.lookup("numberOfStudies"))},function(){return["\n                    ",z.DIV({class:"notFound"},"No matching results"),"\n                "]}),"\n            "]}),"\n        "]}),"\n    ")]})},"studylistResult.js":function(t,e,n){function o(t){return t&&t.length&&"*"!==t.substr(t.length-1)&&(t+="*"),t}function s(t,e){return void 0===t||""===t||t.indexOf(e)>-1}function r(t){return void 0===t||"undefined"===t?"":t.toUpperCase()}function a(t){var e=t.substring(0,4),n=t.substring(4,6)+"/"+t.substring(6,8)+"/"+e;return new Date(n)}function d(){m.log.info("search()"),h.set("showLoadingText",!0),h.set("serverError",!1),v={patientName:o(i("input#patientName").val()),patientId:o(i("input#patientId").val()),accessionNumber:o(i("input#accessionNumber").val()),studyDescription:o(i("input#studyDescription").val()),studyDateFrom:b,studyDateTo:g,modalitiesInStudy:i("input#modality").val()?i("input#modality").val():""};var t=r(i("input#modality").val());m.studylist.collections.Studies.remove({}),u.call("StudyListSearch",v,function(e,n){if(m.log.info("StudyListSearch"),h.set("showLoadingText",!1),e){h.set("serverError",!0);var i=e.error;return"server-connection-error"===i?m.log.error("There was an error connecting to the DICOM server, please verify if it is up and running."):"server-internal-error"===i?m.log.error("There was an internal error with the DICOM server"):m.log.error("For some reason we could not list the studies."),void m.log.error(e.stack)}n?n.forEach(function(e){s(e.modalities,t)&&(new Date(b).setHours(0,0,0,0)<=a(e.studyDate)||!b||""===b)&&(a(e.studyDate)<=new Date(g).setHours(0,0,0,0)||!g||""===g)&&(e.numberOfStudyRelatedInstances=isNaN(e.numberOfStudyRelatedInstances)?void 0:parseInt(e.numberOfStudyRelatedInstances),m.studylist.collections.Studies.insert(e))}):m.log.warn("No studies found")})}function l(t,e){Object.keys(t.sortingColumns.keys).forEach(function(n){n!==e&&t.sortingColumns.set(n,null)})}var u=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){u=t}},0);var c=void 0;n.watch(t("meteor/templating"),{Template:function(t){c=t}},1);var h=void 0;n.watch(t("meteor/session"),{Session:function(t){h=t}},2);var p=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){p=t}},3);var y=void 0;n.watch(t("meteor/reactive-dict"),{ReactiveDict:function(t){y=t}},4);var f=void 0;n.watch(t("meteor/momentjs:moment"),{moment:function(t){f=t}},5);var m=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){m=t}},6),h.setDefault("showLoadingText",!0),h.setDefault("serverError",!1),c.studylistResult.helpers({studies:function(){var t=c.instance(),e=void 0,n={patientName:1,studyDate:1};h.get("sortOption")&&(n=h.get("sortOption"));var i=t.paginationData.rowsPerPage.get(),o=i*t.paginationData.currentPage.get(),s=o+i;if(e=m.studylist.collections.Studies.find({},{sort:n}).fetch())return t.paginationData.recordCount.set(e.length),e.slice(o,s)},numberOfStudies:function(){return m.studylist.collections.Studies.find().count()},sortingColumnsIcons:function(){var t=c.instance(),e={};return Object.keys(t.sortingColumns.keys).forEach(function(n){var i=t.sortingColumns.get(n);e[n]=1===i?"fa fa-fw fa-sort-up":-1===i?"fa fa-fw fa-sort-down":"fa fa-fw"}),e}});var b=void 0,g=void 0,v=void 0,S=function(){return sessionStorage.getItem("rowsPerPage")},w=function(t,e){return sessionStorage.setItem("rowsPerPage",e),"function"==typeof p._isEqual?p._isEqual(t,e):t===e};c.studylistResult.onCreated(function(){var t=c.instance();t.sortOption=new p,t.sortingColumns=new y,S()||w(0,25);var e=S();t.paginationData={class:"studylist-pagination",currentPage:new p(0),rowsPerPage:new p(parseInt(e,10),w),recordCount:new p(0)};var n=h.get("sortOption");n?t.sortingColumns.set(n):t.sortingColumns.set({patientName:1,studyDate:1,patientId:0,accessionNumber:0,studyDescription:0,modality:0})}),c.studylistResult.onRendered(function(){var t=c.instance(),e=f(),n=f().subtract(6,"days"),i=f().subtract(29,"days"),o=t.$("#studyDate"),s=m.uiSettings.studyListDateFilterNumDays,r=void 0,a=void 0;s&&(r=f().subtract(s-1,"days"),a=e),t.datePicker=o.daterangepicker({maxDate:e,autoUpdateInput:!0,startDate:r,endDate:a,ranges:{Today:[e,e],"Last 7 Days":[n,e],"Last 30 Days":[i,e]}}).data("daterangepicker"),r&&a?t.datePicker.updateInputText():d()}),c.studylistResult.onDestroyed(function(){c.instance().datePicker.remove()}),c.studylistResult.events({"keydown input":function(t){13===t.which&&d()},"onsearch input":function(){d()},"change #studyDate":function(t){var e=i(t.currentTarget).val(),n=(e=e.replace(/ /g,"")).split("-");b=n[0],g=n[1],""!==e&&d()},"click div.sortingCell":function(t,e){var n=t.currentTarget.id.replace("_",""),i={};l(e,n);var o=e.sortingColumns.get(n);o?(e.sortingColumns.set(n,-1*o),i[n]=-1*o):(e.sortingColumns.set(n,1),i[n]=1),e.sortOption.set(i),h.set("sortOption",i)}})},"studylistResult.styl":function(t,e,n){n.exports=t("./studylistResult.styl.css")},"studylistResult.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles(".theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url(\"/packages/ohif_design/assets/theme-icons.png\") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.studyListToolbar {\n  height: 75px;\n  margin-bottom: 2px;\n  padding: 0 8%;\n}\n.studyListToolbar {\n  background: #151a1f;\n}\nbody.theme-tide .studyListToolbar {\n  background: #151a1f;\n}\nbody.theme-tigerlily .studyListToolbar {\n  background: #151a1f;\n}\nbody.theme-crickets .studyListToolbar {\n  background: #231c1e;\n}\nbody.theme-honeycomb .studyListToolbar {\n  background: #18161a;\n}\nbody.theme-mint .studyListToolbar {\n  background: #15191e;\n}\nbody.theme-overcast .studyListToolbar {\n  background: #15191e;\n}\nbody.theme-quartz .studyListToolbar {\n  background: #151a1f;\n}\n.studyListToolbar>div {\n  display: inline-block;\n}\n.studyListToolbar .header {\n  font-size: 22px;\n  font-weight: 300;\n  color: #91b9cd;\n  line-height: 75px;\n}\n.studyListToolbar .studylistToolbar {\n  height: 75px;\n  line-height: 75px;\n}\n.studyListToolbar .studyCount {\n  font-size: 40px;\n  font-weight: 100;\n  line-height: 75px;\n}\n.studyListToolbar .studyCount {\n  color: #6fbde2;\n}\nbody.theme-tide .studyListToolbar .studyCount {\n  color: #6fbde2;\n}\nbody.theme-tigerlily .studyListToolbar .studyCount {\n  color: #d47c66;\n}\nbody.theme-crickets .studyListToolbar .studyCount {\n  color: #d47c66;\n}\nbody.theme-honeycomb .studyListToolbar .studyCount {\n  color: #d47c66;\n}\nbody.theme-mint .studyListToolbar .studyCount {\n  color: #76d27d;\n}\nbody.theme-overcast .studyListToolbar .studyCount {\n  color: #74f1fa;\n}\nbody.theme-quartz .studyListToolbar .studyCount {\n  color: #abcdf6;\n}\n.theadBackground {\n  height: 121px;\n  position: absolute;\n  width: 100%;\n}\n.theadBackground:before,\n.theadBackground:after {\n  content: '';\n  display: block;\n  left: 0;\n  position: absolute;\n  width: 100%;\n}\n.theadBackground:before {\n  height: 100%;\n  top: 0;\n  z-index: 1;\n}\n.theadBackground:before {\n  background-color: #151a1f;\n}\nbody.theme-tide .theadBackground:before {\n  background-color: #151a1f;\n}\nbody.theme-tigerlily .theadBackground:before {\n  background-color: #151a1f;\n}\nbody.theme-crickets .theadBackground:before {\n  background-color: #231c1e;\n}\nbody.theme-honeycomb .theadBackground:before {\n  background-color: #18161a;\n}\nbody.theme-mint .theadBackground:before {\n  background-color: #15191e;\n}\nbody.theme-overcast .theadBackground:before {\n  background-color: #15191e;\n}\nbody.theme-quartz .theadBackground:before {\n  background-color: #151a1f;\n}\n.theadBackground:after {\n  bottom: -1px;\n  height: 1px;\n  z-index: 3;\n}\n.theadBackground:after {\n  background-color: #6fbde2;\n}\nbody.theme-tide .theadBackground:after {\n  background-color: #6fbde2;\n}\nbody.theme-tigerlily .theadBackground:after {\n  background-color: #d47c66;\n}\nbody.theme-crickets .theadBackground:after {\n  background-color: #d47c66;\n}\nbody.theme-honeycomb .theadBackground:after {\n  background-color: #d47c66;\n}\nbody.theme-mint .theadBackground:after {\n  background-color: #76d27d;\n}\nbody.theme-overcast .theadBackground:after {\n  background-color: #74f1fa;\n}\nbody.theme-quartz .theadBackground:after {\n  background-color: #abcdf6;\n}\n#studyListContainer {\n  width: 100%;\n  padding: 0 8%;\n  position: absolute;\n  z-index: 2;\n}\n#studyListContainer .loadingTextDiv {\n  color: #91b9cd;\n  font-size: 30px;\n}\n#studyListContainer .notFound {\n  color: #91b9cd;\n  font-size: 30px;\n  font-weight: 200;\n  text-align: center;\n}\n#studyListContainer table#tblStudyList tr {\n  height: 20px;\n}\n#studyListContainer table#tblStudyList thead {\n  white-space: nowrap;\n}\n#studyListContainer table#tblStudyList thead tr th {\n  padding: 0;\n  border-bottom: solid 1px #6fbde2;\n  width: 100%;\n}\n#studyListContainer table#tblStudyList thead tr th:first-child {\n  padding-left: $tablePadding;\n}\n#studyListContainer table#tblStudyList thead tr th:last-child {\n  padding-right: $tablePadding;\n}\n#studyListContainer table#tblStudyList thead tr th div.sortingCell {\n  display: inline-block;\n  cursor: pointer;\n  width: 100%;\n  min-width: 95px;\n  margin: 0 auto;\n  color: #fff;\n  font-weight: 400;\n  padding: 20px;\n}\n#studyListContainer table#tblStudyList thead tr th div.sortingCell span {\n  font-size: 15px;\n  float: left;\n}\n#studyListContainer table#tblStudyList thead tr th div.sortingCell i {\n  margin: 0 5px;\n}\n#studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #20a5d6;\n}\nbody.theme-tide #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #20a5d6;\n}\nbody.theme-tigerlily #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #fa8947;\n}\nbody.theme-crickets #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #cda56b;\n}\nbody.theme-mint #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #31b166;\n}\nbody.theme-overcast #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #507d80;\n}\nbody.theme-quartz #studyListContainer table#tblStudyList thead tr th div.sortingCell:hover {\n  color: #7858ce;\n}\n#studyListContainer table#tblStudyList thead tr th div.sortingCell.active,\n#studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #20a5d6;\n}\nbody.theme-tide #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #20a5d6;\n}\nbody.theme-tide #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #20a5d6;\n}\nbody.theme-tigerlily #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #fa8947;\n}\nbody.theme-tigerlily #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #fa8947;\n}\nbody.theme-crickets #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #d4c3c1;\n}\nbody.theme-crickets #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #cda56b;\n}\nbody.theme-honeycomb #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #cda56b;\n}\nbody.theme-mint #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #31b166;\n}\nbody.theme-mint #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #31b166;\n}\nbody.theme-overcast #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #507d80;\n}\nbody.theme-overcast #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #507d80;\n}\nbody.theme-quartz #studyListContainer table#tblStudyList thead tr th div.sortingCell.active {\n  color: #7858ce;\n}\nbody.theme-quartz #studyListContainer table#tblStudyList thead tr th div.sortingCell:active {\n  color: #7858ce;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search {\n  height: 40px;\n  margin: 0 5px 20px 5px;\n  padding: 0 20px;\n  cursor: pointer;\n  border: none;\n  background-color: #2c363f;\n  color: #d3d3d3;\n  font-size: 10pt;\n  font-weight: normal;\n  width: calc(100% - 10px);\n  -webkit-border-radius: 4px;\n  -moz-border-radius: 4px;\n  -ms-border-radius: 4px;\n  -o-border-radius: 4px;\n  border-radius: 4px;\n  box-sizing: border-box;\n  -webkit-transition: all 0.15s ease;\n  -moz-transition: all 0.15s ease;\n  -ms-transition: all 0.15s ease;\n  -o-transition: all 0.15s ease;\n  transition: all 0.15s ease;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search::-webkit-input-placeholder {\n  color: #d3d3d3;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search:-moz-placeholder {\n  color: #d3d3d3;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search::-moz-placeholder {\n  color: #d3d3d3;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search:-ms-input-placeholder {\n  color: #d3d3d3;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search.invisible {\n  visibility: hidden;\n}\n#studyListContainer table#tblStudyList thead tr th input.studylist-search:active,\n#studyListContainer table#tblStudyList thead tr th input.studylist-search:hover {\n  background-color: #2c363f;\n}\n#studyListContainer table#tblStudyList thead ::-webkit-datetime-edit-year-field:not([aria-valuenow]),\n#studyListContainer table#tblStudyList thead ::-webkit-datetime-edit-month-field:not([aria-valuenow]),\n#studyListContainer table#tblStudyList thead ::-webkit-datetime-edit-day-field:not([aria-valuenow]) {\n  color: transparent;\n}\n#studyListContainer table#tblStudyList tbody tr {\n  padding: 5px;\n  background-color: #000;\n}\n#studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #151a1f;\n}\nbody.theme-tide #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #151a1f;\n}\nbody.theme-tigerlily #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #151a1f;\n}\nbody.theme-crickets #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #231c1e;\n}\nbody.theme-honeycomb #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #18161a;\n}\nbody.theme-mint #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #15191e;\n}\nbody.theme-overcast #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #15191e;\n}\nbody.theme-quartz #studyListContainer table#tblStudyList tbody tr:nth-child(even) {\n  background-color: #151a1f;\n}\n#studyListContainer table#tblStudyList tbody tr td {\n  height: 40px;\n  line-height: 40px;\n  color: #fff;\n  font-weight: 300;\n  border-top: 1px solid #436270;\n  border-bottom: 1px solid #436270;\n  white-space: nowrap;\n  -webkit-transition: all 0.1s ease;\n  -moz-transition: all 0.1s ease;\n  -ms-transition: all 0.1s ease;\n  -o-transition: all 0.1s ease;\n  transition: all 0.1s ease;\n}\n#studyListContainer table#tblStudyList tbody tr:hover,\n#studyListContainer table#tblStudyList tbody tr:active,\n#studyListContainer table#tblStudyList tbody tr.active {\n  background-color: #2c363f;\n  color: #fff;\n}\n#studyListContainer table#tblStudyList tbody tr:hover td,\n#studyListContainer table#tblStudyList tbody tr:active td,\n#studyListContainer table#tblStudyList tbody tr.active td {\n  border-top: 1px solid #436270;\n  border-bottom: 1px solid #436270;\n  background-color: #2c363f;\n}\n@media only screen and (max-width: 1362px) {\n  #studyListContainer {\n    padding: 0 5%;\n  }\n  #studyListContainer table#tblStudyList thead tr th:first-child,\n  #studyListContainer table#tblStudyList tbody tr th:first-child,\n  #studyListContainer table#tblStudyList thead tr td:first-child,\n  #studyListContainer table#tblStudyList tbody tr td:first-child {\n    padding-left: 5%;\n  }\n  #studyListContainer table#tblStudyList thead tr th:last-child,\n  #studyListContainer table#tblStudyList tbody tr th:last-child,\n  #studyListContainer table#tblStudyList thead tr td:last-child,\n  #studyListContainer table#tblStudyList tbody tr td:last-child {\n    padding-right: 5%;\n  }\n}\n@media only screen and (max-width: 1161px) {\n  #studyListContainer {\n    padding: 0 3%;\n  }\n  #studyListContainer table#tblStudyList thead tr th:first-child,\n  #studyListContainer table#tblStudyList tbody tr th:first-child,\n  #studyListContainer table#tblStudyList thead tr td:first-child,\n  #studyListContainer table#tblStudyList tbody tr td:first-child {\n    padding-left: 3%;\n  }\n  #studyListContainer table#tblStudyList thead tr th:last-child,\n  #studyListContainer table#tblStudyList tbody tr th:last-child,\n  #studyListContainer table#tblStudyList thead tr td:last-child,\n  #studyListContainer table#tblStudyList tbody tr td:last-child {\n    padding-right: 3%;\n  }\n}\n@media only screen and (max-width: 1069px) {\n  .theadBackground {\n    height: 101px;\n  }\n  .studyListToolbar {\n    padding: 0 5px;\n  }\n  #studyListContainer {\n    padding: 0;\n  }\n  #studyListContainer table#tblStudyList thead > tr > th:first-child {\n    padding-left: 5px;\n  }\n  #studyListContainer table#tblStudyList thead > tr > th:last-child {\n    padding-right: 5px;\n  }\n  #studyListContainer table#tblStudyList thead > tr > th input.worklist-search {\n    padding: 10px;\n  }\n  #studyListContainer table#tblStudyList thead > tr > th div.sortingCell {\n    padding: 10px 5px;\n  }\n  #studyListContainer table#tblStudyList thead > tr > th div.sortingCell i {\n    width: auto;\n  }\n  #studyListContainer table#tblStudyList tbody > tr > td:first-child {\n    padding-left: 5px;\n  }\n  #studyListContainer table#tblStudyList tbody > tr > td:last-child {\n    padding-right: 5px;\n  }\n  #studyListContainer .worklistPagination .row {\n    margin-left: 0;\n    margin-right: 0;\n  }\n}\n@media only screen and (max-width: 1069px) {\n  .studylist-pagination > .row {\n    margin-right: 0;\n  }\n}\n")}},studylistStudy:{"studylistStudy.html":function(t,e,n){n.exports=t("./template.studylistStudy.js")},"template.studylistStudy.js":function(){j.__checkName("studylistStudy"),j.studylistStudy=new j("Template.studylistStudy",function(){var t=this;return z.TR({class:function(){return["studylistStudy noselect ",I.If(function(){return E.call(E.dot(t.lookup("."),"selected"))},function(){return"active"})]}},"\n        ",z.TD({class:"patientName"},"\n            ",I.View("lookup:formatPN",function(){return E.mustache(t.lookup("formatPN"),t.lookup("patientName"))}),"\n        "),"\n        ",z.TD({class:"patientId"},"\n            ",I.View("lookup:patientId",function(){return E.mustache(t.lookup("patientId"))}),"\n        "),"\n        ",z.TD({class:"accessionNumber"},"\n            ",I.View("lookup:accessionNumber",function(){return E.mustache(t.lookup("accessionNumber"))}),"\n        "),"\n        ",z.TD({class:"studyDate"},"\n            ",I.View("lookup:formatDA",function(){return E.mustache(t.lookup("formatDA"),t.lookup("studyDate"))}),"\n        "),"\n        ",z.TD({class:"modalities"},"\n            ",I.View("lookup:modalities",function(){return E.mustache(t.lookup("modalities"))}),"\n        "),"\n        ",z.TD({class:"studyDescription"},"\n            ",I.View("lookup:studyDescription",function(){return E.mustache(t.lookup("studyDescription"))}),"\n        "),"\n    ")})},"studylistStudy.js":function(t,e,n){function o(){p.studylist.collections.Studies.update({},{$set:{selected:!1}},{multi:!0})}function s(t,e){if(!e.selected){var n={studyInstanceUid:e.studyInstanceUid},i={$set:{selected:!0}};p.studylist.collections.Studies.update(n,i)}p.studylist.$lastSelectedRow=t}function r(t,e){o(),s(t,e)}function a(t,e){var n={studyInstanceUid:e.studyInstanceUid},i={$set:{selected:!1}};p.studylist.collections.Studies.update(n,i)}function d(t,e){var n=void 0,o=p.studylist.$lastSelectedRow;if(o&&o.length>0&&((n=c.getData(o.get(0))).selected||(o=i(),p.studylist.$lastSelectedRow=o)),o.length){var a=void 0;if(o.index()<t.index())a=o.nextAll("tr");else{if(!(o.index()>t.index()))return;a=o.prevAll("tr")}a.each(function(e,n){var o=i(n),r=c.getData(n);if(!r.selected)return s(o,r),!o.is(t)})}else r(t,e)}function l(t,e){(e.selected?a:s)(t,e)}var u=void 0;n.watch(t("meteor/templating"),{Template:function(t){u=t}},0);var c=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){c=t}},1);var h=void 0;n.watch(t("hammerjs"),{default:function(t){h=t}},2);var p=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){p=t}},3),u.studylistStudy.onRendered(function(){var t=u.instance(),e=t.data,n=t.$("tr.studylistStudy").first(),i=new h.Manager(n.get(0)),o=new h.Tap({event:"doubletap",taps:2,interval:500,threshold:30,posThreshold:30});i.add(o),e.selected&&s(n,e)}),u.studylistStudy.events({"click tr.studylistStudy":function(t,e){var n=i(t.currentTarget),o=e.data;delete o._id,t.shiftKey?d(n,o):t.ctrlKey||t.metaKey?l(n,o):r(n,o)},"mousedown tr.studylistStudy":function(t,e){if(2===t.which){var n=p.studylist.callbacks.middleClickOnStudy;n&&"function"==typeof n&&n(e.data)}},"dblclick tr.studylistStudy, doubletap tr.studylistStudy":function(t,e){if(void 0===t.which||1===t.which){var n=p.studylist.callbacks.dblClickOnStudy;n&&"function"==typeof n&&n(e.data)}},"contextmenu tr.studylistStudy, press tr.studylistStudy":function(t,e){var n=i(t.currentTarget);return e.data.selected||r(n,e.data),t.preventDefault(),p.ui.showDropdown(p.studylist.dropdown.getItems(),{event:t,menuClasses:"dropdown-menu-left"}),!1}})},"studylistStudy.styl":function(t,e,n){n.exports=t("./studylistStudy.styl.css")},"studylistStudy.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles(".studylistStudy {\n  cursor: pointer;\n}\n")}},studylistToolbar:{"studylistToolbar.html":function(t,e,n){n.exports=t("./template.studylistToolbar.js")},"template.studylistToolbar.js":function(){j.__checkName("studylistToolbar"),j.studylistToolbar=new j("Template.studylistToolbar",function(){var t=this;return z.DIV({class:"studylistToolbar"},"\n        ",I.If(function(){return E.call(t.lookup("importSupported"))},function(){return["\n            ",z.DIV({class:"addNewStudy btn-file"},"\n                ",z.LABEL({for:"btnImport"},"\n                    ",z.I({class:"fa fa-plus"})," Import study\n                "),"\n                ",z.INPUT({id:"btnImport",class:"js-import-files",type:"file",webkitdirectory:"",directory:"",multiple:""}),"\n            "),"\n        "]}),"\n    ")})},"studylistToolbar.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/templating"),{Template:function(t){o=t}},1);var s=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){s=t}},2);var r=void 0;n.watch(t("meteor/session"),{Session:function(t){r=t}},3);var a=void 0;n.watch(t("meteor/jquery"),{$:function(t){a=t}},4),o.studylistToolbar.onCreated(function(){s.call("importSupported",function(t,e){t||!e?r.set("importSupported",!1):r.set("importSupported",!0)})}),o.studylistToolbar.events({"change .js-import-files":function(t){var e=a.map(t.currentTarget.files,function(t){return t});i.studylist.importStudies(e)},"click .js-import-files":function(t){a(t.currentTarget).val("")}}),o.studylistToolbar.helpers({importSupported:function(){return r.get("importSupported")&&i.uiSettings.studyListFunctionsEnabled}})},"studylistToolbar.styl":function(t,e,n){n.exports=t("./studylistToolbar.styl.css")},"studylistToolbar.styl.css":function(t,e,n){n.exports=t("meteor/modules").addStyles('.theme-icon-crickets,\n.theme-icon-tide,\n.theme-icon-tigerlily,\n.theme-icon-quartz,\n.theme-icon-overcast,\n.theme-icon-mint,\n.theme-icon-honeycomb {\n  display: inline-block;\n  background: url("/packages/ohif_design/assets/theme-icons.png") no-repeat;\n  overflow: hidden;\n  text-indent: -9999px;\n  text-align: left;\n}\n.theme-icon-crickets {\n  background-position: 0px 0px;\n  width: 64px;\n  height: 56px;\n}\n.theme-icon-tide {\n  background-position: 0px -56px;\n  width: 64px;\n  height: 54px;\n}\n.theme-icon-tigerlily {\n  background-position: 0px -110px;\n  width: 62px;\n  height: 61px;\n}\n.theme-icon-quartz {\n  background-position: 0px -171px;\n  width: 59px;\n  height: 64px;\n}\n.theme-icon-overcast {\n  background-position: 0px -235px;\n  width: 58px;\n  height: 37px;\n}\n.theme-icon-mint {\n  background-position: 0px -272px;\n  width: 57px;\n  height: 61px;\n}\n.theme-icon-honeycomb {\n  background-position: 0px -333px;\n  width: 50px;\n  height: 58px;\n}\n.studylistToolbar .addNewStudy {\n  margin: 0 10px;\n}\n.studylistToolbar .addNewStudy label {\n  font-weight: 400;\n  cursor: pointer;\n}\n.studylistToolbar .addNewStudy label {\n  color: #91b9cd;\n}\nbody.theme-tide .studylistToolbar .addNewStudy label {\n  color: #91b9cd;\n}\nbody.theme-tigerlily .studylistToolbar .addNewStudy label {\n  color: #9ccdf8;\n}\nbody.theme-crickets .studylistToolbar .addNewStudy label {\n  color: #8be7b5;\n}\nbody.theme-honeycomb .studylistToolbar .addNewStudy label {\n  color: #fab797;\n}\nbody.theme-mint .studylistToolbar .addNewStudy label {\n  color: #a7e9b3;\n}\nbody.theme-overcast .studylistToolbar .addNewStudy label {\n  color: #73f2fc;\n}\nbody.theme-quartz .studylistToolbar .addNewStudy label {\n  color: #d7e8fe;\n}\n.studylistToolbar .addNewStudy label * {\n  pointer-events: none;\n}\n.studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-tide .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-tigerlily .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-crickets .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-honeycomb .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-mint .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-overcast .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\nbody.theme-quartz .studylistToolbar .addNewStudy label:hover {\n  color: #fff;\n}\n.studylistToolbar .addNewStudy label:active {\n  color: #20a5d6;\n}\nbody.theme-tide .studylistToolbar .addNewStudy label:active {\n  color: #20a5d6;\n}\nbody.theme-tigerlily .studylistToolbar .addNewStudy label:active {\n  color: #fa8947;\n}\nbody.theme-crickets .studylistToolbar .addNewStudy label:active {\n  color: #d4c3c1;\n}\nbody.theme-honeycomb .studylistToolbar .addNewStudy label:active {\n  color: #cda56b;\n}\nbody.theme-mint .studylistToolbar .addNewStudy label:active {\n  color: #31b166;\n}\nbody.theme-overcast .studylistToolbar .addNewStudy label:active {\n  color: #507d80;\n}\nbody.theme-quartz .studylistToolbar .addNewStudy label:active {\n  color: #7858ce;\n}\n.studylistToolbar .addNewStudy input {\n  width: 0.1px;\n  height: 0.1px;\n  opacity: 0;\n  overflow: hidden;\n  position: absolute;\n  z-index: -1;\n}\n')}}}},lib:{"exportSelectedStudies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),i.studylist.exportSelectedStudies=function(t){var e=i.studylist.getSelectedStudies(),n=e.length,o=n>1?"Studies":"Study";i.ui.showDialog("dialogConfirm",{element:t.element,title:"Export "+o,message:"Would you like to export "+n+" "+o.toLowerCase()+"?"}).then(function(){i.studylist.exportStudies(e)}).catch(function(){})}},"exportStudies.js":function(t,e,n){var i=this,o=void 0;n.watch(t("meteor/silentcicero:jszip"),{JSZip:function(t){o=t}},0);var s=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){s=t}},1);var r=function(t){var e=0;return t.forEach(function(t){e+=q(t)}),e},a=function(t){for(var e=["B","KB","MB","GB"],n=t,i=0;n>1024;)n/=1024,i++;return n.toFixed(2)+" "+e[i]};s.studylist.exportStudies=function(t){t.length<1||H(t).then(d)};var d=function(t){var e=r(t),n=void 0;return s.ui.showDialog("dialogProgress",{title:"Exporting Studies...",message:"Exported files: 0 / "+e,total:r(t),task:{run:function(e){(n=l(t,{notify:function(t){var n=a(t.totalBytes);e.update(t.processed),e.setMessage("Exported files: "+t.processed+" / "+t.total+" ("+n+")")}})).promise.then(function(){e.done()},function(){e.setMessage("Failed to export studies")})}}}).then(null,function(t){n.cancel()})},l=function(t,e){var n=new o,i=[],a=[],d=r(t),l=(e||{}).notify||function(){},p=function(){for(;a.length;)a.pop().cancel()},y=0;return t.forEach(function(t){t.seriesList.forEach(function(e){e.instances.forEach(function(o){if(o.wadouri){var r=u(o);a.push(r);var f=r.promise.then(function(i){var s=a.indexOf(r);return y+=i&&i.size?i.size:0,s>-1&&a.splice(s,1),l({total:d,processed:d-a.length,totalBytes:y}),c(t,e,o,n,i)}).catch(function(t){throw t instanceof h||s.log.error("Failed to export studies",t),p(),t});i.push(f)}})})}),{cancel:p,promise:m.all(i).then(function(){var t=n.generate({type:"blob"});saveAs(t,"studies.zip")})}},u=function(t){var e=void 0,n=void 0;return{promise:new m(function(i,o){n=o,(e=new XMLHttpRequest).open("GET",t.wadouri,!0),e.responseType="blob",e.onload=function(){if(4===e.readyState&&200!==e.status)return o(new Error("File not downloaded: "+t.wadouri));i(e.response)},e.onerror=function(){o(new Error("File not downloaded: "+t.wadouri))},e.send()}),cancel:function(){e.abort(),n(new h("Download canceled"))}}},c=function(t,e,n,i,o){var s=new FileReader,r=new Blob([o],{type:"application/dicom"}),a=i.folder(t.studyInstanceUid).folder(e.seriesInstanceUid),d=new m(function(t,e){s.onload=function(){try{a.file(n.sopInstanceUid+".dcm",s.result,{binary:!0}),t()}catch(t){e(t)}}});return s.readAsArrayBuffer(r),d},h=function(t){i.name="ExportStudyDownloadCanceledError",i.message=t||"Download canceled",i.stack=(new Error).stack};h.prototype=Object.create(Error.prototype),h.prototype.constructor=h},"getSelectedStudies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),i.studylist.getSelectedStudies=function(){return i.studylist.collections.Studies.find({selected:!0},{sort:{studyDate:1}}).fetch()||[]}},"getStudyPriors.js":function(t,e,n){n.export({getStudyPriors:function(){return l}});var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),n.watch(t("meteor/ohif:viewerbase"));var o=i.viewerbase.metadata,s=o.StudyMetadata,r=o.StudySummary,a="x00100020",d="x00080020",l=function(t){if(!(t instanceof s||t instanceof r))throw new i.viewerbase.OHIFError("getStudyPriors study must be an instance of StudySummary or StudyMetadata");t instanceof s&&(t=t.getFirstInstance());var e=[],n=t.getTagValue(a),o=t.getTagValue(d);return i.studylist.collections.Studies.find({patientId:n,studyDate:{$lt:o}},{sort:{studyDate:"desc"}}).forEach(function(t){var n=new i.studies.classes.OHIFStudySummary(t,null,t.studyInstanceUid);e.push(n)}),e}},"getStudyPriorsMap.js":function(t,e,n){n.export({getStudyPriorsMap:function(){return d}});var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),n.watch(t("meteor/ohif:viewerbase"));var o=void 0;n.watch(t("./getStudyPriors"),{getStudyPriors:function(t){o=t}},1);var s=i.viewerbase.metadata,r=s.StudyMetadata,a=s.StudySummary,d=function(t){var e=new v;return t instanceof Array&&t.forEach(function(t){if(t instanceof r||t instanceof a){var n=t.getObjectID();if(n){var i=o(t);e.set(n,i)}}}),e}},"importStudies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},1),o.studylist.importStudies=function(t){var e=t&&t.length;if(!e)return new m(function(t,e){return e("No files to upload")});var n=function(t){return"Uploaded files: "+t.processed+" / "+t.total},i=function(e){var n=function(t){var n=t.join("; ");e.setMessage("Failed to upload files: "+n)},i=function(t){a(t,e).then(function(){e.done()}).catch(function(t){e.setMessage(t)})};s(t,e).then(i).catch(n)};return o.ui.showDialog("dialogProgress",{title:"Importing Studies...",message:n,total:e,task:{run:i}})};var s=function(t,e){var n=0;return new m(function(i,o){var s=[];t.forEach(function(t){var i=r(t,e);i.then(function(){return e.update(++n)}),s.push(i)}),m.all(s).then(i).catch(o)})},r=function(t){return new m(function(e,n){var i=new XMLHttpRequest;i.open("POST","/uploadFilesToImport",!0),i.setRequestHeader("filename",t.name),i.onload=function(){4===i.readyState&&200!==i.status?n(t.name):e(i.responseText)},i.onerror=function(){return n(t.name)},i.send(t)})},a=function(t,e){var n=t&&t.length;if(!n)return new m(function(t,e){return e("No studies to import")});var s=0;return e.update(0),e.setTotal(n),e.setMessage(function(t){return"Imported: "+t.processed+" / "+t.total}),new m(function(s,r){i.call("createStudyImportStatus",function(a,d){if(a)return r(a.message);o.studylist.collections.StudyImportStatus.find(d).observe({changed:function(t){var o=t.numberOfStudiesImported,a=t.numberOfStudiesFailed;e.update(o),o===n&&(i.call("removeStudyImportStatus",t._id),t.numberOfStudiesFailed>0?r("Failed to import "+a+" of "+n+" studies"):s())}}),i.call("importStudies",t,d)})})}},"index.js":function(t,e,n){n.watch(t("./exportSelectedStudies.js")),n.watch(t("./exportStudies.js")),n.watch(t("./getSelectedStudies.js")),n.watch(t("./importStudies.js")),n.watch(t("./queryStudies.js")),n.watch(t("./retrieveStudiesMetadata.js")),n.watch(t("./retrieveStudyMetadata.js")),n.watch(t("./studylist.js")),n.watch(t("./viewSeriesDetails.js")),n.watch(t("./viewStudies.js"))},"queryStudies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),F=function(t,e){var n=0,o=t.length,s=(e||{}).notify||function(){},r=[];return t.forEach(function(t){var e=i.studies.retrieveStudyMetadata(t.studyInstanceUid);e.then(function(t){s({total:o,processed:++n})}),r.push(e)}),m.all(r)},H=function(t){return i.ui.showDialog("dialogProgress",{title:"Querying Studies...",message:"Queried: 0 / "+t.length,total:t.length,task:{run:function(e){F(t,{notify:function(t){e.update(t.processed),e.setMessage("Queried: "+t.processed+" / "+t.total)}}).then(function(t){e.done(t)},function(){e.cancel()}).catch(function(t){i.log.error("There was an error retrieving all studies metadeta."),i.log.error(t.stack),i.log.trace()})}}})},q=function(t){var e=0;return t.seriesList.forEach(function(t){t.instances.forEach(function(t){t.wadouri&&e++})}),e}},"retrieveStudiesMetadata.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0);var o="OHIF.studylist.retrieveStudiesMetadata is deprecated.",s="Please use OHIF.studies.retrieveStudiesMetadata instead.";i.studylist.retrieveStudiesMetadata=function(){i.log.warn(o+"\n"+s),i.studies.retrieveStudiesMetadata.apply(this,arguments)}},"retrieveStudyMetadata.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0);var o="OHIF.studylist.retrieveStudyMetadata is deprecated.",s="Please use OHIF.studies.retrieveStudyMetadata instead.";i.studylist.retrieveStudyMetadata=function(){i.log.warn(o+"\n"+s),i.studies.retrieveStudyMetadata.apply(this,arguments)}},"studylist.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/iron:router"),{Router:function(t){o=t}},1);var s=void 0;n.watch(t("./getStudyPriors"),{getStudyPriors:function(t){s=t}},2);var r=void 0;n.watch(t("./getStudyPriorsMap"),{getStudyPriorsMap:function(t){r=t}},3),i.studylist.functions={getStudyPriors:s,getStudyPriorsMap:r};var a="OHIF.studylist.classes is deprecated.",d="Please use OHIF.studies.classes instead.";Object.defineProperty(i.studylist,"classes",{get:function(){return i.log.warn(a+"\n"+d),i.studies.classes}});var l=function(t){o.go("viewerStudies",{studyInstanceUids:t.studyInstanceUid})};i.studylist.callbacks.dblClickOnStudy=l,i.studylist.callbacks.middleClickOnStudy=l},"viewSeriesDetails.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0),i.studylist.viewSeriesDetails=function(){var t=i.studylist.getSelectedStudies();t&&i.ui.showDialog("seriesDetailsModal",{selectedStudies:t})}},"viewStudies.js":function(t,e,n){var i=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){i=t}},0);var o=void 0;n.watch(t("meteor/iron:router"),{Router:function(t){o=t}},1),i.studylist.viewStudies=function(){i.log.info("viewStudies");var t=i.studylist.getSelectedStudies();if(t&&t.length){var e=t.map(function(t){return t.studyInstanceUid}).join(";");o.go("viewerStudies",{studyInstanceUids:e})}}}}},node_modules:{hammerjs:{"package.json":function(t,e){e.name="hammerjs",e.version="2.0.8",e.main="hammer.js"},"hammer.js":function(t,e,n){!function(t,e,i,o){"use strict";function s(t,e,n){return setTimeout(u(t,n),e)}function r(t,e,n){return!!Array.isArray(t)&&(a(t,n[e],n),!0)}function a(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==o)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function d(e,n,i){var o="DEPRECATED METHOD: "+n+"\n"+i+" AT \n";return function(){var n=new Error("get-stack-trace"),i=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=t.console&&(t.console.warn||t.console.log);return s&&s.call(t.console,o,i),e.apply(this,arguments)}}function l(t,e,n){var i=e.prototype,o;(o=t.prototype=Object.create(i)).constructor=t,o._super=i,n&&gt(o,n)}function u(t,e){return function n(){return t.apply(e,arguments)}}function c(t,e){return typeof t==yt?t.apply(e?e[0]||o:o,e):t}function h(t,e){return t===o?e:t}function p(t,e,n){a(b(e),function(e){t.addEventListener(e,n,!1)})}function y(t,e,n){a(b(e),function(e){t.removeEventListener(e,n,!1)})}function f(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function m(t,e){return t.indexOf(e)>-1}function b(t){return t.trim().split(/\s+/g)}function g(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function v(t){return Array.prototype.slice.call(t,0)}function S(t,e,n){for(var i=[],o=[],s=0;s<t.length;){var r=e?t[s][e]:t[s];g(o,r)<0&&i.push(t[s]),o[s]=r,s++}return n&&(i=e?i.sort(function t(n,i){return n[e]>i[e]}):i.sort()),i}function w(t,e){for(var n,i,s=e[0].toUpperCase()+e.slice(1),r=0;r<ht.length;){if(n=ht[r],(i=n?n+s:e)in t)return i;r++}return o}function x(){return wt++}function T(e){var n=e.ownerDocument||e;return n.defaultView||n.parentWindow||t}function k(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){c(t.options.enable,[t])&&n.handler(e)},this.init()}function L(t){var e,n=t.options.inputClass;return new(e=n||(kt?F:Lt?V:Tt?U:z))(t,C)}function C(t,e,n){var i=n.pointers.length,o=n.changedPointers.length,s=e&Et&&i-o==0,r=e&(Ot|Mt)&&i-o==0;n.isFirst=!!s,n.isFinal=!!r,s&&(t.session={}),n.eventType=e,D(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function D(t,e){var n=t.session,i=e.pointers,o=i.length;n.firstInput||(n.firstInput=N(e)),o>1&&!n.firstMultiple?n.firstMultiple=N(e):1===o&&(n.firstMultiple=!1);var s=n.firstInput,r=n.firstMultiple,a=r?r.center:s.center,d=e.center=E(i);e.timeStamp=bt(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=R(a,d),e.distance=M(a,d),I(n,e),e.offsetDirection=O(e.deltaX,e.deltaY);var l=j(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=mt(l.x)>mt(l.y)?l.x:l.y,e.scale=r?A(r.pointers,i):1,e.rotation=r?_(r.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,P(n,e);var u=t.element;f(e.srcEvent.target,u)&&(u=e.srcEvent.target),e.target=u}function I(t,e){var n=e.center,i=t.offsetDelta||{},o=t.prevDelta||{},s=t.prevInput||{};e.eventType!==Et&&s.eventType!==Ot||(o=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=o.x+(n.x-i.x),e.deltaY=o.y+(n.y-i.y)}function P(t,e){var n=t.lastInterval||e,i=e.timeStamp-n.timeStamp,s,r,a,d;if(e.eventType!=Mt&&(i>Nt||n.velocity===o)){var l=e.deltaX-n.deltaX,u=e.deltaY-n.deltaY,c=j(i,l,u);r=c.x,a=c.y,s=mt(c.x)>mt(c.y)?c.x:c.y,d=O(l,u),t.lastInterval=e}else s=n.velocity,r=n.velocityX,a=n.velocityY,d=n.direction;e.velocity=s,e.velocityX=r,e.velocityY=a,e.direction=d}function N(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ft(t.pointers[n].clientX),clientY:ft(t.pointers[n].clientY)},n++;return{timeStamp:bt(),pointers:e,center:E(e),deltaX:t.deltaX,deltaY:t.deltaY}}function E(t){var e=t.length;if(1===e)return{x:ft(t[0].clientX),y:ft(t[0].clientY)};for(var n=0,i=0,o=0;o<e;)n+=t[o].clientX,i+=t[o].clientY,o++;return{x:ft(n/e),y:ft(i/e)}}function j(t,e,n){return{x:e/t||0,y:n/t||0}}function O(t,e){return t===e?Rt:mt(t)>=mt(e)?t<0?_t:At:e<0?zt:Ft}function M(t,e,n){n||(n=Bt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return Math.sqrt(i*i+o*o)}function R(t,e,n){n||(n=Bt);var i=e[n[0]]-t[n[0]],o=e[n[1]]-t[n[1]];return 180*Math.atan2(o,i)/Math.PI}function _(t,e){return R(e[1],e[0],Ut)+R(t[1],t[0],Ut)}function A(t,e){return M(e[0],e[1],Ut)/M(t[0],t[1],Ut)}function z(){this.evEl=Xt,this.evWin=Wt,this.pressed=!1,k.apply(this,arguments)}function F(){this.evEl=Zt,this.evWin=Kt,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=Jt,this.evWin=te,this.started=!1,k.apply(this,arguments)}function q(t,e){var n=v(t.touches),i=v(t.changedTouches);return e&(Ot|Mt)&&(n=S(n.concat(i),"identifier",!0)),[n,i]}function V(){this.evTarget=ne,this.targetIds={},k.apply(this,arguments)}function B(t,e){var n=v(t.touches),i=this.targetIds;if(e&(Et|jt)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var o,s,r=v(t.changedTouches),a=[],d=this.target;if(s=n.filter(function(t){return f(t.target,d)}),e===Et)for(o=0;o<s.length;)i[s[o].identifier]=!0,o++;for(o=0;o<r.length;)i[r[o].identifier]&&a.push(r[o]),e&(Ot|Mt)&&delete i[r[o].identifier],o++;return a.length?[S(s.concat(a),"identifier",!0),a]:void 0}function U(){k.apply(this,arguments);var t=u(this.handler,this);this.touch=new V(this.manager,t),this.mouse=new z(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Y(t,e){t&Et?(this.primaryTouch=e.changedPointers[0].identifier,X.call(this,e)):t&(Ot|Mt)&&X.call(this,e)}function X(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches,o=function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)};setTimeout(o,ie)}}function W(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var o=this.lastTouches[i],s=Math.abs(e-o.x),r=Math.abs(n-o.y);if(s<=oe&&r<=oe)return!0}return!1}function $(t,e){this.manager=t,this.set(e)}function G(t){if(m(t,ue))return ue;var e=m(t,ce),n=m(t,he);return e&&n?ue:e||n?e?ce:he:m(t,le)?le:de}function Z(){if(!re)return!1;var e={},n=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(i){e[i]=!n||t.CSS.supports("touch-action",i)}),e}function K(t){this.options=gt({},this.defaults,t||{}),this.id=x(),this.manager=null,this.options.enable=h(this.options.enable,!0),this.state=ye,this.simultaneous={},this.requireFail=[]}function Q(t){return t&ve?"cancel":t&be?"end":t&me?"move":t&fe?"start":""}function J(t){return t==Ft?"down":t==zt?"up":t==_t?"left":t==At?"right":""}function tt(t,e){var n=e.manager;return n?n.get(t):t}function et(){K.apply(this,arguments)}function nt(){et.apply(this,arguments),this.pX=null,this.pY=null}function it(){et.apply(this,arguments)}function ot(){K.apply(this,arguments),this._timer=null,this._input=null}function st(){et.apply(this,arguments)}function rt(){et.apply(this,arguments)}function at(){K.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function dt(t,e){return e=e||{},e.recognizers=h(e.recognizers,dt.defaults.preset),new lt(t,e)}function lt(t,e){this.options=gt({},dt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=L(this),this.touchAction=new $(this,this.options.touchAction),ut(this,!0),a(this.options.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function ut(t,e){var n=t.element;if(n.style){var i;a(t.options.cssProps,function(o,s){i=w(n.style,s),e?(t.oldCssProps[i]=n.style[i],n.style[i]=o):n.style[i]=t.oldCssProps[i]||""}),e||(t.oldCssProps={})}}function ct(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var ht=["","webkit","Moz","MS","ms","o"],pt=e.createElement("div"),yt="function",ft=Math.round,mt=Math.abs,bt=Date.now,gt;gt="function"!=typeof Object.assign?function t(e){if(e===o||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(e),i=1;i<arguments.length;i++){var s=arguments[i];if(s!==o&&null!==s)for(var r in s)s.hasOwnProperty(r)&&(n[r]=s[r])}return n}:Object.assign;var vt=d(function t(e,n,i){for(var s=Object.keys(n),r=0;r<s.length;)(!i||i&&e[s[r]]===o)&&(e[s[r]]=n[s[r]]),r++;return e},"extend","Use `assign`."),St=d(function t(e,n){return vt(e,n,!0)},"merge","Use `assign`."),wt=1,xt=/mobile|tablet|ip(ad|hone|od)|android/i,Tt="ontouchstart"in t,kt=w(t,"PointerEvent")!==o,Lt=Tt&&xt.test(navigator.userAgent),Ct="touch",Dt="pen",It="mouse",Pt="kinect",Nt=25,Et=1,jt=2,Ot=4,Mt=8,Rt=1,_t=2,At=4,zt=8,Ft=16,Ht=_t|At,qt=zt|Ft,Vt=Ht|qt,Bt=["x","y"],Ut=["clientX","clientY"];k.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(T(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&y(this.element,this.evEl,this.domHandler),this.evTarget&&y(this.target,this.evTarget,this.domHandler),this.evWin&&y(T(this.element),this.evWin,this.domHandler)}};var Yt={mousedown:Et,mousemove:jt,mouseup:Ot},Xt="mousedown",Wt="mousemove mouseup";l(z,k,{handler:function t(e){var n=Yt[e.type];n&Et&&0===e.button&&(this.pressed=!0),n&jt&&1!==e.which&&(n=Ot),this.pressed&&(n&Ot&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[e],changedPointers:[e],pointerType:"mouse",srcEvent:e}))}});var $t={pointerdown:Et,pointermove:jt,pointerup:Ot,pointercancel:Mt,pointerout:Mt},Gt={2:"touch",3:"pen",4:"mouse",5:"kinect"},Zt="pointerdown",Kt="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Zt="MSPointerDown",Kt="MSPointerMove MSPointerUp MSPointerCancel"),l(F,k,{handler:function t(e){var n=this.store,i=!1,o=e.type.toLowerCase().replace("ms",""),s=$t[o],r=Gt[e.pointerType]||e.pointerType,a="touch"==r,d=g(n,e.pointerId,"pointerId");s&Et&&(0===e.button||a)?d<0&&(n.push(e),d=n.length-1):s&(Ot|Mt)&&(i=!0),d<0||(n[d]=e,this.callback(this.manager,s,{pointers:n,changedPointers:[e],pointerType:r,srcEvent:e}),i&&n.splice(d,1))}});var Qt={touchstart:Et,touchmove:jt,touchend:Ot,touchcancel:Mt},Jt="touchstart",te="touchstart touchmove touchend touchcancel";l(H,k,{handler:function t(e){var n=Qt[e.type];if(n===Et&&(this.started=!0),this.started){var i=q.call(this,e,n);n&(Ot|Mt)&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}}});var ee={touchstart:Et,touchmove:jt,touchend:Ot,touchcancel:Mt},ne="touchstart touchmove touchend touchcancel";l(V,k,{handler:function t(e){var n=ee[e.type],i=B.call(this,e,n);i&&this.callback(this.manager,n,{pointers:i[0],changedPointers:i[1],pointerType:"touch",srcEvent:e})}});var ie=2500,oe=25;l(U,k,{handler:function t(e,n,i){var o="touch"==i.pointerType,s="mouse"==i.pointerType;if(!(s&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(o)Y.call(this,n,i);else if(s&&W.call(this,i))return;this.callback(e,n,i)}},destroy:function t(){this.touch.destroy(),this.mouse.destroy()}});var se=w(pt.style,"touchAction"),re=se!==o,ae="compute",de="auto",le="manipulation",ue="none",ce="pan-x",he="pan-y",pe=Z();$.prototype={set:function(t){"compute"==t&&(t=this.compute()),re&&this.manager.element.style&&pe[t]&&(this.manager.element.style[se]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){c(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),G(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,o=m(i,ue)&&!pe[ue],s=m(i,he)&&!pe[he],r=m(i,ce)&&!pe[ce];if(o){var a=1===t.pointers.length,d=t.distance<2,l=t.deltaTime<250;if(a&&d&&l)return}if(!r||!s)return o||s&&n&Ht||r&&n&qt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ye=1,fe=2,me=4,be=8,ge=be,ve=16,Se=32;K.prototype={defaults:{},set:function(t){return gt(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(r(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=tt(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return r(t,"dropRecognizeWith",this)?this:(t=tt(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(r(t,"requireFailure",this))return this;var e=this.requireFail;return t=tt(t,this),-1===g(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(r(t,"dropRequireFailure",this))return this;t=tt(t,this);var e=g(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(e,t)}var n=this,i=this.state;i<be&&e(n.options.event+Q(i)),e(n.options.event),t.additionalEvent&&e(t.additionalEvent),i>=be&&e(n.options.event+Q(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=32},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(32|ye)))return!1;t++}return!0},recognize:function(t){var e=gt({},t);if(!c(this.options.enable,[this,e]))return this.reset(),void(this.state=32);this.state&(ge|ve|32)&&(this.state=ye),this.state=this.process(e),this.state&(fe|me|be|ve)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},l(et,K,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(fe|me),o=this.attrTest(t);return i&&(n&Mt||!o)?e|ve:i||o?n&Ot?e|be:e&fe?e|me:fe:32}}),l(nt,et,{defaults:{event:"pan",threshold:10,pointers:1,direction:Vt},getTouchAction:function(){var t=this.options.direction,e=[];return t&Ht&&e.push(he),t&qt&&e.push(ce),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,o=t.direction,s=t.deltaX,r=t.deltaY;return o&e.direction||(e.direction&Ht?(o=0===s?Rt:s<0?_t:At,n=s!=this.pX,i=Math.abs(t.deltaX)):(o=0===r?Rt:r<0?zt:Ft,n=r!=this.pY,i=Math.abs(t.deltaY))),t.direction=o,n&&i>e.threshold&&o&e.direction},attrTest:function(t){return et.prototype.attrTest.call(this,t)&&(this.state&fe||!(this.state&fe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=J(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),l(it,et,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&fe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),l(ot,K,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[de]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Ot|Mt)&&!o)this.reset();else if(t.eventType&Et)this.reset(),this._timer=s(function(){this.state=ge,this.tryEmit()},e.time,this);else if(t.eventType&Ot)return ge;return 32},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===ge&&(t&&t.eventType&Ot?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=bt(),this.manager.emit(this.options.event,this._input)))}}),l(st,et,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ue]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&fe)}}),l(rt,et,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ht|qt,pointers:1},getTouchAction:function(){return nt.prototype.getTouchAction.call(this)},attrTest:function(t){var e=this.options.direction,n;return e&(Ht|qt)?n=t.overallVelocity:e&Ht?n=t.overallVelocityX:e&qt&&(n=t.overallVelocityY),this._super.attrTest.call(this,t)&&e&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&mt(n)>this.options.velocity&&t.eventType&Ot},emit:function(t){var e=J(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),l(at,K,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[le]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&Et&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=Ot)return this.failTimeout();var r=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||M(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&r?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=s(function(){this.state=ge,this.tryEmit()},e.interval,this),fe):ge}return 32},failTimeout:function(){return this._timer=s(function(){this.state=32},this.options.interval,this),32},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ge&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),dt.VERSION="2.0.7",dt.defaults={domEvents:!1,touchAction:"compute",enable:!0,inputTarget:null,inputClass:null,preset:[[st,{enable:!1}],[it,{enable:!1},["rotate"]],[rt,{direction:Ht}],[nt,{direction:Ht},["swipe"]],[at],[at,{event:"doubletap",taps:2},["tap"]],[ot]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var we=1,xe=2;lt.prototype={set:function(t){return gt(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,o=e.curRecognizer;(!o||o&&o.state&ge)&&(o=e.curRecognizer=null);for(var s=0;s<i.length;)n=i[s],2===e.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(t),!o&&n.state&(fe|me|be)&&(o=e.curRecognizer=n),s++}},get:function(t){if(t instanceof K)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(r(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(r(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=g(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==o&&e!==o){var n=this.handlers;return a(b(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this}},off:function(t,e){if(t!==o){var n=this.handlers;return a(b(t),function(t){e?n[t]&&n[t].splice(g(n[t],e),1):delete n[t]}),this}},emit:function(t,e){this.options.domEvents&&ct(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ut(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},gt(dt,{INPUT_START:Et,INPUT_MOVE:jt,INPUT_END:Ot,INPUT_CANCEL:Mt,STATE_POSSIBLE:ye,STATE_BEGAN:fe,STATE_CHANGED:me,STATE_ENDED:be,STATE_RECOGNIZED:ge,STATE_CANCELLED:ve,STATE_FAILED:32,DIRECTION_NONE:Rt,DIRECTION_LEFT:_t,DIRECTION_RIGHT:At,DIRECTION_UP:zt,DIRECTION_DOWN:Ft,DIRECTION_HORIZONTAL:Ht,DIRECTION_VERTICAL:qt,DIRECTION_ALL:Vt,Manager:lt,Input:k,TouchAction:$,TouchInput:V,MouseInput:z,PointerEventInput:F,TouchMouseInput:U,SingleTouchInput:H,Recognizer:K,AttrRecognizer:et,Tap:at,Pan:nt,Swipe:rt,Pinch:it,Rotate:st,Press:ot,on:p,off:y,each:a,merge:St,extend:vt,assign:gt,inherit:l,bindFn:u,prefixed:w}),(void 0!==t?t:"undefined"!=typeof self?self:{}).Hammer=dt,"function"==typeof define&&define.amd?define(function(){return dt}):void 0!==n&&n.exports?n.exports=dt:t.Hammer=dt}(window,document,"Hammer")}}}}}}},{extensions:[".js",".json",".html",".styl"]});V("./node_modules/meteor/ohif:study-list/both/index.js"),V("./node_modules/meteor/ohif:study-list/client/index.js"),"undefined"==typeof Package&&(Package={}),Package["ohif:study-list"]={}}();

!function(){var t=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package.jquery.$,i=Package.jquery.jQuery,r=Package.random.Random,a=Package["templating-runtime"].Template,s=Package["iron:router"].Router,u=Package["iron:router"].RouteController,c=Package["momentjs:moment"].moment,l=Package.validatejs.validate,d=Package["ohif:viewerbase"].dialogPolyfill,g=Package.modules.meteorInstall,p=Package["babel-runtime"].meteorBabelHelpers,h=Package.promise.Promise,f=Package["iron:core"].Iron,m=Package["ecmascript-runtime-client"].Symbol,v=Package["ecmascript-runtime-client"].Map,w=Package["ecmascript-runtime-client"].Set,b=Package.webapp.WebApp,y=Package.logging.Log,P=Package.deps.Tracker,S=Package.deps.Deps,T=Package.session.Session,M=Package["ddp-client"].DDP,R=Package.mongo.Mongo,k=Package.ui.Blaze,D=Package.ui.UI,x=Package.ui.Handlebars,E=Package.spacebars.Spacebars,I=Package.check.check,C=Package.check.Match,V=Package.underscore._,N=Package.ejson.EJSON,j=Package["launch-screen"].LaunchScreen,O=Package.htmljs.HTML,q,B,L,Z,A,z,_,U,H,F,W=g({node_modules:{meteor:{"ohif:hanging-protocols":{both:{"namespace.js":function(){q={}},"collections.js":function(){(B=new t.Collection("hangingprotocols"))._debugName="HangingProtocols",B.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0}}),t.isDevelopment&&t.isServer&&t.startup(function(){B.remove({})})},"schema.js":function(t,e,n){n.watch(t("./classes/Protocol")),n.watch(t("./classes/Stage")),n.watch(t("./classes/Viewport")),n.watch(t("./classes/ViewportStructure")),n.watch(t("./classes/rules/ProtocolMatchingRule")),n.watch(t("./classes/rules/StudyMatchingRule")),n.watch(t("./classes/rules/SeriesMatchingRule")),n.watch(t("./classes/rules/ImageMatchingRule"))},"hardcodedData.js":function(){q.attributeDefaults={abstractPriorValue:0},q.displaySettings={invert:{id:"invert",text:"Show Grayscale Inverted",defaultValue:"NO",options:["YES","NO"]}},q.studyAttributes=[{id:"x00100020",text:"(x00100020) Patient ID"},{id:"x0020000d",text:"(x0020000d) Study Instance UID"},{id:"x00080020",text:"(x00080020) Study Date"},{id:"x00080030",text:"(x00080030) Study Time"},{id:"x00081030",text:"(x00081030) Study Description"},{id:"abstractPriorValue",text:"Abstract Prior Value"}],q.protocolAttributes=[{id:"x00100020",text:"(x00100020) Patient ID"},{id:"x0020000d",text:"(x0020000d) Study Instance UID"},{id:"x00080020",text:"(x00080020) Study Date"},{id:"x00080030",text:"(x00080030) Study Time"},{id:"x00081030",text:"(x00081030) Study Description"},{id:"anatomicRegion",text:"Anatomic Region"}],q.seriesAttributes=[{id:"x0020000e",text:"(x0020000e) Series Instance UID"},{id:"x00080060",text:"(x00080060) Modality"},{id:"x00200011",text:"(x00200011) Series Number"},{id:"x0008103e",text:"(x0008103e) Series Description"},{id:"numImages",text:"Number of Images"}],q.instanceAttributes=[{id:"x00080016",text:"(x00080016) SOP Class UID"},{id:"x00080018",text:"(x00080018) SOP Instance UID"},{id:"x00185101",text:"(x00185101) View Position"},{id:"x00200013",text:"(x00200013) Instance Number"},{id:"x00080008",text:"(x00080008) Image Type"},{id:"x00181063",text:"(x00181063) Frame Time"},{id:"x00200060",text:"(x00200060) Laterality"},{id:"x00541330",text:"(x00541330) Image Index"},{id:"x00280004",text:"(x00280004) Photometric Interpretation"},{id:"x00180050",text:"(x00180050) Slice Thickness"}]},"testData.js":function(){function t(){var t=new q.Protocol("Default");t.id="defaultProtocol",t.locked=!0;var e=new q.ViewportStructure("grid",{rows:1,columns:1}),n=new q.Viewport,o=new q.Stage(e,"oneByOne");return o.viewports.push(n),t.stages.push(o),q.defaultProtocol=t,q.defaultProtocol}function e(){var t=new q.Protocol("MR_TwoByTwo");t.id="MR_TwoByTwo",t.locked=!0;var e=new q.ProtocolMatchingRule("studyInstanceUid",{equals:{value:"1.2.840.113619.2.5.1762583153.215519.978957063.78"}},!0);t.addProtocolMatchingRule(e);var n=new q.ViewportStructure("grid",{rows:1,columns:2}),o=new q.Viewport,i=new q.Viewport,r=new q.SeriesMatchingRule("seriesNumber",{equals:{value:1}}),a=new q.SeriesMatchingRule("seriesNumber",{equals:{value:2}}),s=new q.ImageMatchingRule("instanceNumber",{equals:{value:3}});o.seriesMatchingRules.push(r),o.imageMatchingRules.push(s),i.seriesMatchingRules.push(a),i.imageMatchingRules.push(s);var u=new q.Stage(n,"oneByTwo");u.viewports.push(o),u.viewports.push(i),t.stages.push(u);var c=new q.ViewportStructure("grid",{rows:2,columns:1}),l=new q.Viewport,d=new q.Viewport,g=new q.SeriesMatchingRule("seriesNumber",{equals:{value:4}}),p=new q.SeriesMatchingRule("seriesNumber",{equals:{value:5}});l.seriesMatchingRules.push(g),l.imageMatchingRules.push(s),d.seriesMatchingRules.push(p),d.imageMatchingRules.push(s);var h=new q.Stage(c,"twoByOne");return h.viewports.push(l),h.viewports.push(d),t.stages.push(h),q.testProtocol=t,q.testProtocol}function n(){q.demoProtocols=[],q.demoProtocols.push({id:"demoProtocol1",locked:!1,name:"DFCI-CT-CHEST-COMPARE",createdDate:"2017-02-14T16:07:09.033Z",modifiedDate:"2017-02-14T16:18:43.930Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"7tmuq7KzDMCWFeapc",weight:2,required:!1,attribute:"x00081030",constraint:{contains:{value:"DFCI CT CHEST"}}}],stages:[{id:"v5PfGt9F6mffZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"2.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"2.0"}}}],studyMatchingRules:[{id:"uDoEgLTvnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"XTzu8HB3feep3HYKs",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"3.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"3.0"}}}],studyMatchingRules:[{id:"uDoEgLTvnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:12.085Z"},{id:"3yPYNaeFtr76Qz3jq",viewportStructure:{type:"grid",properties:{rows:2,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}}],studyMatchingRules:[]},{viewportSettings:{wlPreset:"Lung"},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 3.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"6vdBRZYnqmmosipph",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}}],studyMatchingRules:[{id:"SxfTyhGcMhr56PtPM",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]},{viewportSettings:{wlPreset:"Lung"},imageMatchingRules:[],seriesMatchingRules:[{id:"FTAyChZCPW68yJjXD",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 3.0"}}}],studyMatchingRules:[{id:"gMJjfrbsqYNbErPx5",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:11:40.489Z"}],numberOfPriorsReferenced:4}),q.demoProtocols.push({id:"demoProtocol2",locked:!1,name:"DFCI-CT-CHEST-COMPARE-2",createdDate:"2017-02-14T16:07:09.033Z",modifiedDate:"2017-02-14T16:18:43.930Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"7tmuq7KzDMCWFeapc",weight:2,required:!1,attribute:"x00081030",constraint:{contains:{value:"DFCI CT CHEST"}}}],stages:[{id:"v5PfGt9F6mffZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mac",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"2.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYc",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"2.0"}}}],studyMatchingRules:[{id:"uDoEgLTvnXTByWnPt",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"XTzu8HB3feep3HYKs",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}},{id:"mYnsCcNwZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 5.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}},{id:"ygz4nb29iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 5.0"}}}],studyMatchingRules:[{id:"uDoEgLTvnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:12.085Z"},{id:"3yPYNaeFtr76Qz3jq",viewportStructure:{type:"grid",properties:{rows:2,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7mtr",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}},{id:"jXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 5.0"}}}],studyMatchingRules:[]},{viewportSettings:{wlPreset:"Lung"},imageMatchingRules:[],seriesMatchingRules:[{id:"ygz4nb28iJZcJhnYb",weight:2,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 3.0"}}},{id:"ycz4nb28iJZcJhnYa",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 5.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"6vdBRZYnqmmosipph",weight:2,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}},{id:"6vdBRFYnqmmosipph",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 5.0"}}}],studyMatchingRules:[{id:"SxfTyhGcMhr56PtPM",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]},{viewportSettings:{wlPreset:"Lung"},imageMatchingRules:[],seriesMatchingRules:[{id:"FTAyChZCPW68yJjXD",weight:2,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 3.0"}}},{id:"DTAyChZCPW68yJjXD",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 5.0"}}}],studyMatchingRules:[{id:"gMJjfrbsqYNbErPx5",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:11:40.489Z"}],numberOfPriorsReferenced:1}),q.demoProtocols.push({id:"screenCT",locked:!1,name:"DFCI-CT-CHEST-SCREEN",createdDate:"2017-02-14T16:07:09.033Z",modifiedDate:"2017-02-14T16:18:43.930Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"7tmuq7KzDMCWFeapc",weight:2,required:!1,attribute:"x00081030",constraint:{contains:{value:"DFCI CT CHEST"}}}],stages:[{id:"v5PfGt9F6mffZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:1},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL55z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"2.0"}}}],studyMatchingRules:[]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F4mffZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:2,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7nTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 5.0"}}},{id:"mXnsCcNzZL56z7rTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 3.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56r7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 5.0"}}},{id:"mXnsCcNzZL56a7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Lung 3.0"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcRzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 4.0"}}},{id:"mXnsCcNzTL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Coronal"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcMzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Body 4.0"}}},{id:"mXnsCcAzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Sagittal"}}}],studyMatchingRules:[]}],createdDate:"2017-02-14T16:07:09.033Z"}],numberOfPriorsReferenced:0}),q.demoProtocols.push({id:"PETCTSCREEN",locked:!1,name:"PETCT-SCREEN",createdDate:"2017-02-14T16:07:09.033Z",modifiedDate:"2017-02-14T16:18:43.930Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"7tmuqgKzDMCWFeapc",weight:5,required:!1,attribute:"x00081030",constraint:{contains:{value:"PETCT"}}}],stages:[{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcAzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZR56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}},{id:"mRnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x00200011",constraint:{numericality:{greaterThanOrEqualTo:2}}}],studyMatchingRules:[]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsGcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Corrected"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsHcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT WB"}}}],studyMatchingRules:[]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{invert:"YES"},imageMatchingRules:[],seriesMatchingRules:[{id:"mXneCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Uncorrected"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCuNzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT Nk"}}}],studyMatchingRules:[]}],createdDate:"2017-02-14T16:07:09.033Z"}],numberOfPriorsReferenced:0}),q.demoProtocols.push({id:"PETCTCOMPARE",locked:!1,name:"PETCT-COMPARE",createdDate:"2017-02-14T16:07:09.033Z",modifiedDate:"2017-02-14T16:18:43.930Z",availableTo:{},editableBy:{},protocolMatchingRules:[{id:"7tmuqgKzDMCWFeapc",weight:5,required:!1,attribute:"x00081030",constraint:{contains:{value:"PETCT"}}}],stages:[{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL59z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7lTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}}],studyMatchingRules:[{id:"uDoEgLTbnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:1,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNjZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}},{id:"mXnsCcNzZL56z7gTZ",weight:1,required:!1,attribute:"x00200011",constraint:{numericality:{greaterThanOrEqualTo:2}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcCzZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"Topogram"}}},{id:"mXnsCcNzZL56z7mTZ",weight:1,required:!1,attribute:"x00200011",constraint:{numericality:{greaterThanOrEqualTo:2}}}],studyMatchingRules:[{id:"uDoEgLTvn1TByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:2,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL26z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Corrected"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL46z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT WB"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL57z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Corrected"}}}],studyMatchingRules:[{id:"uDoEgLTvnYTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZQ56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT WB"}}}],studyMatchingRules:[{id:"uDoEgLTvnKTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"},{id:"v5PfGt9F6mFgZPif5",name:"oneByOne",viewportStructure:{type:"grid",properties:{rows:2,columns:2},layoutTemplateName:"gridLayout"},viewports:[{viewportSettings:{invert:"YES"},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZL56z7nTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Uncorrected"}}}],studyMatchingRules:[]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNxZL56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT Nk"}}}],studyMatchingRules:[]},{viewportSettings:{invert:"YES"},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZA56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"PET WB Uncorrected"}}}],studyMatchingRules:[{id:"uDoEgHTvnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]},{viewportSettings:{},imageMatchingRules:[],seriesMatchingRules:[{id:"mXnsCcNzZP56z7mTZ",weight:1,required:!1,attribute:"x0008103e",constraint:{contains:{value:"CT Nk"}}}],studyMatchingRules:[{id:"uDoEgITvnXTByWnPz",weight:1,required:!1,attribute:"abstractPriorValue",constraint:{equals:{value:1}}}]}],createdDate:"2017-02-14T16:07:09.033Z"}],numberOfPriorsReferenced:1})}t()},classes:{"Protocol.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){r=t}},0);var a=void 0;n.watch(t("meteor/random"),{Random:function(t){a=t}},1);var s=void 0;n.watch(t("../lib/removeFromArray"),{removeFromArray:function(t){s=t}},2),q.Protocol=function(){function t(e){(0,i.default)(this,t),this.id=a.id(),this.locked=!1,this.hasUpdatedPriorsInformation=!1,this.name=e,this.createdDate=new Date,this.modifiedDate=new Date,r.users&&r.userId&&(this.createdBy=r.userId,this.modifiedBy=r.userId),this.availableTo=new w,this.editableBy=new w,this.protocolMatchingRules=[],this.stages=[],this.numberOfPriorsReferenced=-1}return t.prototype.getNumberOfPriorsReferenced=function(){function t(){var t=!0!==(arguments.length>0&&void 0!==arguments[0]&&arguments[0])?this.numberOfPriorsReferenced:-1;return t>-1?t:(t=0,this.stages.forEach(function(e){e.viewports&&e.viewports.forEach(function(e){e.studyMatchingRules&&e.studyMatchingRules.forEach(function(e){var n=e.getNumberOfPriorsReferenced();n>t&&(t=n)})})}),this.numberOfPriorsReferenced=t,t)}return t}(),t.prototype.updateNumberOfPriorsReferenced=function(){function t(){this.getNumberOfPriorsReferenced(!0)}return t}(),t.prototype.protocolWasModified=function(){function t(){r.users&&r.userId&&(this.modifiedBy=r.userId),this.hasUpdatedPriorsInformation=!1,this.updateNumberOfPriorsReferenced(),this.modifiedDate=new Date}return t}(),t.prototype.fromObject=function(){function t(t){var e=this;this.id=t.id||a.id(),this.name=t.name,this.locked=!!t.locked,t.protocolMatchingRules&&t.protocolMatchingRules.forEach(function(t){var n=new q.ProtocolMatchingRule;n.fromObject(t),e.protocolMatchingRules.push(n)}),t.stages&&t.stages.forEach(function(t){var n=new q.Stage;n.fromObject(t),e.stages.push(n)})}return t}(),t.prototype.createClone=function(){function t(t){var e=Object.assign({},this),n=new q.Protocol;return e.id=n.id,n.fromObject(e),t&&(n.name=t),n.locked=!1,n}return t}(),t.prototype.addStage=function(){function t(t){this.stages.push(t),this.protocolWasModified()}return t}(),t.prototype.addProtocolMatchingRule=function(){function t(t){this.protocolMatchingRules.push(t),this.protocolWasModified()}return t}(),t.prototype.removeProtocolMatchingRule=function(){function t(t){s(this.protocolMatchingRules,t)&&this.protocolWasModified()}return t}(),t}()},"Rule.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck"));n.export({Rule:function(){return u}});var r=void 0;n.watch(t("meteor/random"),{Random:function(t){r=t}},0);var a=void 0;n.watch(t("../lib/comparators"),{comparators:function(t){a=t}},1);var s=/^equals$/,u=function(){function t(e,n,o,a){(0,i.default)(this,t),this.id=r.id(),this.weight=a||1,e&&(this.attribute=e),n&&(this.constraint=n),this.required=void 0!==o&&o,this._constraintInfo=void 0,this._validatorAndValue=void 0}return t.prototype.fromObject=function(){function t(t){this.id=t.id||r.id(),this.required=t.required,this.weight=t.weight,this.attribute=t.attribute,this.constraint=t.constraint}return t}(),t.prototype.getConstraintInfo=function(){function t(){var t=this._constraintInfo;if(void 0!==t)return t;var e=Object.keys(this.constraint)[0];return void 0!==e&&(t=a.find(function(t){return e===t.id})),this._constraintInfo=t,t}return t}(),t.prototype.isRuleForPrior=function(){function t(){return"abstractPriorValue"===this.attribute}return t}(),t.prototype.getNumberOfPriorsReferenced=function(){function t(){if(!this.isRuleForPrior())return-1;var t=this.getConstraintValidatorAndValue(),e=t.value,n=t.validator,o=parseInt(e,10)||0;return s.test(n)?o<0?1:o:0}return t}(),t.prototype.getConstraintValidatorAndValue=function(){function t(){var t=this._validatorAndValue;if(void 0!==t)return t;var e=this.getConstraintInfo();if(void 0!==e){var n=e.validator,o=this.constraint[n];o&&(t={value:o[e.validatorOption],validator:e.id},this._validatorAndValue=t)}return t}return t}(),t}()},"Stage.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=void 0;n.watch(t("meteor/random"),{Random:function(t){r=t}},0),q.Stage=function(){function t(e,n){(0,i.default)(this,t),this.id=r.id(),this.name=n,this.viewportStructure=e,this.viewports=[],this.createdDate=new Date}return t.prototype.createClone=function(){function t(t){var e=Object.assign({},this),n=new q.Stage;return e.id=n.id,n.fromObject(e),t&&(n.name=t),n}return t}(),t.prototype.fromObject=function(){function t(t){var e=this;this.id=t.id||r.id(),this.name=t.name,this.viewportStructure=new q.ViewportStructure,this.viewportStructure.fromObject(t.viewportStructure),t.viewports&&t.viewports.forEach(function(t){var n=new q.Viewport;n.fromObject(t),e.viewports.push(n)})}return t}(),t}()},"Viewport.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=void 0;n.watch(t("../lib/removeFromArray"),{removeFromArray:function(t){r=t}},0),q.Viewport=function(){function t(){(0,i.default)(this,t),this.viewportSettings={},this.imageMatchingRules=[],this.seriesMatchingRules=[],this.studyMatchingRules=[]}return t.prototype.fromObject=function(){function t(t){var e=this;t.imageMatchingRules&&t.imageMatchingRules.forEach(function(t){var n=new q.ImageMatchingRule;n.fromObject(t),e.imageMatchingRules.push(n)}),t.seriesMatchingRules&&t.seriesMatchingRules.forEach(function(t){var n=new q.SeriesMatchingRule;n.fromObject(t),e.seriesMatchingRules.push(n)}),t.studyMatchingRules&&t.studyMatchingRules.forEach(function(t){var n=new q.StudyMatchingRule;n.fromObject(t),e.studyMatchingRules.push(n)}),t.viewportSettings&&(this.viewportSettings=t.viewportSettings)}return t}(),t.prototype.removeRule=function(){function t(t){var e;t instanceof q.StudyMatchingRule?e=this.studyMatchingRules:t instanceof q.SeriesMatchingRule?e=this.seriesMatchingRules:t instanceof q.ImageMatchingRule&&(e=this.imageMatchingRules),r(e,t)}return t}(),t}()},"ViewportStructure.js":function(t){function e(t){return t&&t.__esModule?t:{default:t}}var n=e(t("babel-runtime/helpers/classCallCheck"));q.ViewportStructure=function(){function t(e,o){(0,n.default)(this,t),this.type=e,this.properties=o}return t.prototype.fromObject=function(){function t(t){this.type=t.type,this.properties=t.properties}return t}(),t.prototype.getLayoutTemplateName=function(){function t(){switch(this.type){case"grid":return"gridLayout"}}return t}(),t.prototype.getNumViewports=function(){function t(){switch(this.type){case"grid":return this.properties.rows*this.properties.columns}}return t}(),t}()},rules:{"ImageMatchingRule.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=o(t("babel-runtime/helpers/possibleConstructorReturn")),a=o(t("babel-runtime/helpers/inherits")),s=void 0;n.watch(t("../Rule"),{Rule:function(t){s=t}},0),q.ImageMatchingRule=function(t){function e(){return(0,i.default)(this,e),(0,r.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e}(s)},"ProtocolMatchingRule.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=o(t("babel-runtime/helpers/possibleConstructorReturn")),a=o(t("babel-runtime/helpers/inherits")),s=void 0;n.watch(t("../Rule"),{Rule:function(t){s=t}},0),q.ProtocolMatchingRule=function(t){function e(){return(0,i.default)(this,e),(0,r.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e}(s)},"SeriesMatchingRule.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=o(t("babel-runtime/helpers/possibleConstructorReturn")),a=o(t("babel-runtime/helpers/inherits")),s=void 0;n.watch(t("../Rule"),{Rule:function(t){s=t}},0),q.SeriesMatchingRule=function(t){function e(){return(0,i.default)(this,e),(0,r.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e}(s)},"StudyMatchingRule.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/classCallCheck")),r=o(t("babel-runtime/helpers/possibleConstructorReturn")),a=o(t("babel-runtime/helpers/inherits")),s=void 0;n.watch(t("../Rule"),{Rule:function(t){s=t}},0),q.StudyMatchingRule=function(t){function e(){return(0,i.default)(this,e),(0,r.default)(this,t.apply(this,arguments))}return(0,a.default)(e,t),e}(s)}}},lib:{"comparators.js":function(t,e,n){n.export({comparators:function(){return o}});var o=[{id:"equals",name:"= (Equals)",validator:"equals",validatorOption:"value",description:"The attribute must equal this value."},{id:"doesNotEqual",name:"!= (Does not equal)",validator:"doesNotEqual",validatorOption:"value",description:"The attribute must not equal this value."},{id:"contains",name:"Contains",validator:"contains",validatorOption:"value",description:"The attribute must contain this value."},{id:"doesNotContain",name:"Does not contain",validator:"doesNotContain",validatorOption:"value",description:"The attribute must not contain this value."},{id:"startsWith",name:"Starts with",validator:"startsWith",validatorOption:"value",description:"The attribute must start with this value."},{id:"endsWith",name:"Ends with",validator:"endsWith",validatorOption:"value",description:"The attribute must end with this value."},{id:"onlyInteger",name:"Only Integers",validator:"numericality",validatorOption:"onlyInteger",description:"Real numbers won't be allowed."},{id:"greaterThan",name:"> (Greater than)",validator:"numericality",validatorOption:"greaterThan",description:"The attribute has to be greater than this value."},{id:"greaterThanOrEqualTo",name:">= (Greater than or equal to)",validator:"numericality",validatorOption:"greaterThanOrEqualTo",description:"The attribute has to be at least this value."},{id:"lessThanOrEqualTo",name:"<= (Less than or equal to)",validator:"numericality",validatorOption:"lessThanOrEqualTo",description:"The attribute can be this value at the most."},{id:"lessThan",name:"< (Less than)",validator:"numericality",validatorOption:"lessThan",description:"The attribute has to be less than this value."},{id:"odd",name:"Odd",validator:"numericality",validatorOption:"odd",description:"The attribute has to be odd."},{id:"even",name:"Even",validator:"numericality",validatorOption:"even",description:"The attribute has to be even."}];Object.freeze(o)},"removeFromArray.js":function(t,e,n){n.export({removeFromArray:function(){return i}});var o=void 0;n.watch(t("meteor/underscore"),{_:function(t){o=t}},0);var i=function(t,e){return!(!t||!t.length)&&(t.forEach(function(t,n){if(o.isEqual(t,e))return F=n,!1}),void 0!==F&&(t.splice(F,1),!0))}}}},client:{"collections.js":function(t,e,n){var o=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){o=t}},0);var i=void 0;n.watch(t("../both/lib/comparators"),{comparators:function(t){i=t}},1),(L=new o.Collection(null))._debugName="MatchedProtocols",(Z=new o.Collection(null))._debugName="Comparators",i.forEach(function(t){Z.insert(t)})},"protocolEngine.js":function(t,e,n){function o(t){return t&&t.__esModule?t:{default:t}}var i=o(t("babel-runtime/helpers/extends")),r=o(t("babel-runtime/helpers/classCallCheck")),a=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){a=t}},0);var s=void 0;n.watch(t("meteor/underscore"),{_:function(t){s=t}},1);var u=void 0;n.watch(t("meteor/session"),{Session:function(t){u=t}},2);var c=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){c=t}},3),n.watch(t("meteor/ohif:viewerbase"));var l=void 0;n.watch(t("./matcher/HPMatcher"),{HPMatcher:function(t){l=t}},4);var d=void 0;n.watch(t("./lib/sortByScore"),{sortByScore:function(t){d=t}},5),n.watch(t("./customViewportSettings"));var g=c.viewerbase,p=g.OHIFError,h=g.metadata,f=h.StudyMetadata,m=h.SeriesMetadata,w=h.InstanceMetadata,b=h.StudySummary,y="abstractPriorValue";A=void 0,q.setEngine=function(t){A=t},q.getEngine=function(){return A},a.startup(function(){q.addCustomViewportSetting("wlPreset","Window/Level Preset",Object.create(null),function(t,e){s.findWhere(c.viewer.wlPresets,{id:e})&&c.viewerbase.wlPresets.applyWLPreset(e,t)})}),q.ProtocolEngine=function(){function t(e,n,o,i){(0,r.default)(this,t);var a=c.viewerbase,s=a.LayoutManager,u=a.StudyMetadataSource;if(!(e instanceof s))throw new p("ProtocolEngine::constructor layoutManager is not an instance of LayoutManager");if(!(i instanceof u))throw new p("ProtocolEngine::constructor studyMetadataSource is not an instance of StudyMetadataSource");if(!(n instanceof Array||n.every(function(t){return t instanceof f})))throw new p("ProtocolEngine::constructor studies is not an array or it's items are not instances of StudyMetadata");this.LayoutManager=e,this.studies=n,this.priorStudies=o instanceof v?o:new v,this.studyMetadataSource=i,this.reset(),this.newStageIds=[]}return t.prototype.reset=function(){function t(){var t=this.getBestProtocolMatch();this.setHangingProtocol(t)}return t}(),t.prototype.getCurrentStageModel=function(){function t(){return this.protocol.stages[this.stage]}return t}(),t.prototype.findMatchByStudy=function(){function t(t){c.log.info("ProtocolEngine::findMatchByStudy");var e=[],n=t.getFirstInstance(),o=this.getNumberOfAvailablePriors(t.getObjectID());return q.ProtocolStore.getProtocol().forEach(function(t){var i=t.protocolMatchingRules.slice();if(i&&!(t.getNumberOfPriorsReferenced()>o)){var r=l.match(n,i).score;r>0&&e.push({score:r,protocol:t})}}),e.length?(d(e),c.log.info("ProtocolEngine::findMatchByStudy matched",e),e):[{score:1,protocol:q.ProtocolStore.getProtocol("defaultProtocol")}]}return t}(),t.prototype.updateProtocolMatches=function(){function t(){var t=this;c.log.info("ProtocolEngine::updateProtocolMatches"),L.remove({}),this.studies.forEach(function(e){t.findMatchByStudy(e).forEach(function(t){var e=t.protocol;e&&(L.findOne({id:e.id})||(c.log.info("ProtocolEngine::updateProtocolMatches inserting protocol match",t),L.insert(t)))})})}return t}(),t.prototype.getBestProtocolMatch=function(){function t(){this.updateProtocolMatches();var t=L.find({},{sort:{score:-1},limit:1}).fetch()[0].protocol;return c.log.info("ProtocolEngine::getBestProtocolMatch bestMatch",t),t}return t}(),t.prototype.getNumberOfAvailablePriors=function(){function t(t){return this.getAvailableStudyPriors(t).length}return t}(),t.prototype.getAvailableStudyPriors=function(){function t(t){var e=this.priorStudies.get(t);return e instanceof Array?e:[]}return t}(),t.prototype.matchImages=function(){function t(t,e){var n=this;c.log.info("ProtocolEngine::matchImages");var o=t.studyMatchingRules,i=t.seriesMatchingRules,r=t.imageMatchingRules,a=[],s=this.studies[0],u=s.getFirstInstance(),d=0,g=0,h=0,m=void 0;s.setCustomAttribute(y,0),u instanceof w&&u.setCustomAttribute(y,0);var v=void 0;o.forEach(function(t){if(t.attribute===y){var o=Object.keys(t.constraint)[0],i=Object.keys(t.constraint[o])[0],r=t.constraint[o][i];r=parseInt(r,10),v||(v=n.getAvailableStudyPriors(s.getObjectID()));var a=void 0;if(-1===r)a=v[v.length-1];else{var u=Math.max(r-1,0);a=v[u]}if(!(a instanceof f||a instanceof b))return;var l=a.getObjectID();if(n.studies.find(function(t){return t.getObjectID()===l}))return;n.studyMetadataSource.loadStudy(a).then(function(t){t.setCustomAttribute(y,r);var o=t.getFirstInstance();o instanceof w&&o.setCustomAttribute(y,r),n.studies.push(t),n.updateViewports(e)},function(t){throw c.log.warn(t),new p("ProtocolEngine::matchImages could not get study metadata for the Study with the following ObjectID: "+l)})}}),this.studies.forEach(function(t){var e=l.match(t.getFirstInstance(),o);o.length&&!e.score||e.score<d||(d=e.score,t.forEachSeries(function(n){var o=l.match(n.getFirstInstance(),i);i.length&&!o.score||o.score<g||(g=o.score,n.forEachInstance(function(i,s){if(c.viewerbase.isImage(i.getTagValue("x00080016"))||i.getTagValue("x00280010")){var u=l.match(i,r),d={passed:[],failed:[]};d.passed=d.passed.concat(u.details.passed),d.passed=d.passed.concat(o.details.passed),d.passed=d.passed.concat(e.details.passed),d.failed=d.failed.concat(u.details.failed),d.failed=d.failed.concat(o.details.failed),d.failed=d.failed.concat(e.details.failed);var g=u.score+o.score+e.score,p=i.getSOPInstanceUID(),f={studyInstanceUid:t.getStudyInstanceUID(),seriesInstanceUid:n.getSeriesInstanceUID(),sopInstanceUid:p,currentImageIdIndex:s,matchingScore:g,matchDetails:d,sortingInfo:{score:g,study:i.getTagValue("x00080020")+i.getTagValue("x00080030"),series:parseInt(i.getTagValue("x00200011")),instance:parseInt(i.getTagValue("x00200013"))}},v=t.findDisplaySet(function(t){return t.images.find(function(t){return t.getSOPInstanceUID()===p})});v&&(f.displaySetInstanceUid=v.getUID(),f.imageId=i.getImageId()),(g>h||!m)&&(h=g,m=f),a.push(f)}}))}))});var P=c.utils.sortBy({name:"score",reverse:!0},{name:"study",reverse:!0},{name:"instance"},{name:"series"});return a.sort(function(t,e){return P(t.sortingInfo,e.sortingInfo)}),c.log.info("ProtocolEngine::matchImages bestMatch",m),{bestMatch:m,matchingScores:a}}return t}(),t.prototype.updateViewports=function(){function t(t){var e=this;if(c.log.info("ProtocolEngine::updateViewports viewportIndex: "+t),this.getNumProtocolStages()){var n=this.getCurrentStageModel();if(n&&n.viewportStructure&&n.viewports&&n.viewports.length){var o=n.viewportStructure.getLayoutTemplateName();if(o){var r=n.viewportStructure.properties;if(r){var a=[];this.matchDetails=[],n.viewports.forEach(function(t,n){var o=e.matchImages(t,n);e.matchDetails[n]=o;var u={},l=Object.keys(t.viewportSettings);l.forEach(function(e){var n=t.viewportSettings[e];"YES"===n?n=!0:"NO"===n&&(n=!1),u[e]=n});var d=(0,i.default)({viewportIndex:n,viewport:u},r),g=[];l.forEach(function(e){q.CustomViewportSettings[e]&&g.push({id:e,value:t.viewportSettings[e]})}),d.renderedCallback=function(t){g.forEach(function(e){c.log.info("ProtocolEngine::currentViewportData.renderedCallback Applying custom setting: "+e.id),c.log.info("ProtocolEngine::currentViewportData.renderedCallback with value: "+e.value),q.CustomViewportSettings[e.id].callback(t,e.value)})};for(var p=o.bestMatch,h=1,f=o.matchingScores.length;h<f&&s.findWhere(a,{imageId:p.imageId});)p=o.matchingScores[h],h++;p&&p.imageId&&(d.studyInstanceUid=p.studyInstanceUid,d.seriesInstanceUid=p.seriesInstanceUid,d.sopInstanceUid=p.sopInstanceUid,d.currentImageIdIndex=p.currentImageIdIndex,d.displaySetInstanceUid=p.displaySetInstanceUid,d.imageId=p.imageId),a.push(d)}),this.LayoutManager.layoutTemplateName=o,this.LayoutManager.layoutProps=r,this.LayoutManager.viewportData=a,void 0!==t&&a[t]?this.LayoutManager.rerenderViewportWithNewDisplaySet(t,a[t]):this.LayoutManager.updateViewports()}}}}}return t}(),t.prototype.setHangingProtocol=function(){function t(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];c.log.info("ProtocolEngine::setHangingProtocol newProtocol",t),c.log.info("ProtocolEngine::setHangingProtocol updateViewports = "+e),this.newStageIds=[],q.Protocol.prototype.isPrototypeOf(t)?this.protocol=t:(this.protocol=new q.Protocol,this.protocol.fromObject(t)),this.stage=0,e&&this.updateViewports(),L.update({},{$set:{selected:!1}},{multi:!0}),L.update({id:this.protocol.id},{$set:{selected:!0}}),u.set("HangingProtocolName",this.protocol.name),u.set("HangingProtocolStage",this.stage)}return t}(),t.prototype.isNextStageAvailable=function(){function t(){var t=this.getNumProtocolStages();return this.stage+1<t}return t}(),t.prototype.isPreviousStageAvailable=function(){function t(){return this.stage-1>=0}return t}(),t.prototype.setCurrentProtocolStage=function(){function t(t){return!(-1===t&&!this.isPreviousStageAvailable())&&(!(1===t&&!this.isNextStageAvailable())&&(this.stage+=t,c.log.info("ProtocolEngine::setCurrentProtocolStage stage = "+this.stage),u.set("HangingProtocolStage",this.stage),this.updateViewports(),!0))}return t}(),t.prototype.getNumProtocolStages=function(){function t(){if(this.protocol&&this.protocol.stages&&this.protocol.stages.length)return this.protocol.stages.length}return t}(),t.prototype.nextProtocolStage=function(){function t(){c.log.info("ProtocolEngine::nextProtocolStage"),this.setCurrentProtocolStage(1)||c.log.info("ProtocolEngine::nextProtocolStage failed")}return t}(),t.prototype.previousProtocolStage=function(){function t(){c.log.info("ProtocolEngine::previousProtocolStage"),this.setCurrentProtocolStage(-1)||c.log.info("ProtocolEngine::previousProtocolStage failed")}return t}(),t}()},helpers:{"displayConstraint.js":function(t,e,n){var o=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){o=t}},0);var i=Object.create(null),r=/^\([x0-9a-f]+\)/,a=function(t){var e=t.replace(/([A-Z])/g," $1");return e=e.replace(/^./,function(t){return t.toUpperCase()})},s=function(t,e){if(t in i)return i[t];var n=e.find(function(e){return e.id===t}),o=void 0;return n&&(o=n.text.replace(r,""),i[t]=o),o||""};o.registerHelper("displayConstraint",function(t,e,n){if(e&&t){var o=Object.keys(e)[0];if(o){var i=Object.keys(e[o])[0];if(i){var r=e[o][i];if(void 0!==r){var u=i;return"value"===i&&(u=o),s(t,n)+" "+a(u).toLowerCase()+" "+r}}}}})},"attributes.js":function(t,e,n){var o=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){o=t}},0),o.registerHelper("viewportSettingsTypes",function(){return q.viewportSettingsTypes}),o.registerHelper("toolSettingsTypes",function(){return q.toolSettingsTypes}),o.registerHelper("studyAttributes",function(){return q.studyAttributes}),o.registerHelper("seriesAttributes",function(){return q.seriesAttributes}),o.registerHelper("instanceAttributes",function(){return q.instanceAttributes})}},protocolStore:{"protocolStore.js":function(t,e,n){q.ProtocolStore=function(){function t(t){s=t}function e(t){s.onReady(t)}function n(t){var e=new q.Protocol;return e.fromObject(t),e}function o(t){var e=s.getProtocol(t);return e instanceof Array?e.forEach(function(t,o){t instanceof q.Protocol||(e[o]=n(t))}):void 0===e||e instanceof q.Protocol||(e=n(e)),e}function i(t){s.addProtocol(t)}function r(t,e){s.updateProtocol(t,e)}function a(t){s.removeProtocol(t)}var s;return{setStrategy:t,onReady:e,getProtocol:o,addProtocol:i,updateProtocol:r,removeProtocol:a}}()},"defaultStrategy.js":function(){var e=function(){function e(){console.log("Inserting default protocols"),r(q.defaultProtocol)}function n(t){var e=B.findOne({id:t},{fields:{_id:!0}});if(e)return e._id}function o(n){u&&u.ready()?n():(u=t.subscribe("hangingprotocols"),P.autorun(function(t){u.ready()&&(t.stop(),e(),n())}))}function i(t){return t?B.findOne({id:t}):B.find().fetch()}function r(t){var e=n(t.id);delete t._id,e?B.update(e,{$set:t}):B.insert(t)}function a(t,e){var o=n(t);o&&(delete e._id,B.update(o,{$set:e}))}function s(t){var e=n(t);e&&B.remove(e)}var u;return{onReady:o,getProtocol:i,addProtocol:r,updateProtocol:a,removeProtocol:s}}();q.ProtocolStore.setStrategy(e)}},components:{previousPresentationGroupButton:{"template.previousPresentationGroupButton.js":function(){a.__checkName("previousPresentationGroupButton"),a.previousPresentationGroupButton=new a("Template.previousPresentationGroupButton",function(){var t=this;return O.DIV({id:function(){return E.mustache(E.dot(t.lookup("."),"id"))},class:function(){return["toolbarSectionButton rp-x-1 ",E.mustache(E.dot(t.lookup("."),"classes"))," ",E.mustache(t.lookup("activeClass"))," ",k.If(function(){return E.call(t.lookup("previousNotAvailable"))},function(){return"disabled"})]},title:function(){return E.mustache(E.dot(t.lookup("."),"title"))},disabled:function(){return k.If(function(){return E.call(t.lookup("previousNotAvailable"))},function(){return"true"})}},"\n        ",O.DIV({class:"svgContainer"},"\n        ",k.If(function(){return E.call(E.dot(t.lookup("."),"svgLink"))},function(){return["\n        ",O.SVG("\n            ",O.USE({"xlink:href":function(){return E.mustache(t.lookup("absoluteUrl"),E.dot(t.lookup("."),"svgLink"))}}),"\n        "),"\n        "]},function(){return["\n            ",O.I({class:function(){return E.mustache(t.lookup("iconClasses"))}}),"\n        "]}),"\n        "),"\n        ",O.DIV({class:"buttonLabel"},"\n            ",k.View("lookup:..title",function(){return E.mustache(E.dot(t.lookup("."),"title"))}),"\n        "),"\n    ")})},"previousPresentationGroupButton.js":function(){a.previousPresentationGroupButton.helpers({previousNotAvailable:function(){if(T.get("LayoutManagerUpdated"),A)return 0===A.stage}}),a.previousPresentationGroupButton.events({"click #previousPresentationGroup":function(t){A&&(o(t.currentTarget).hasClass("disabled")||(o(t.currentTarget).tooltip("hide"),A.previousProtocolStage()))}})}},nextPresentationGroupButton:{"template.nextPresentationGroupButton.js":function(){a.__checkName("nextPresentationGroupButton"),a.nextPresentationGroupButton=new a("Template.nextPresentationGroupButton",function(){var t=this;return O.DIV({id:function(){return E.mustache(E.dot(t.lookup("."),"id"))},class:function(){return["toolbarSectionButton rp-x-1 ",E.mustache(E.dot(t.lookup("."),"classes"))," ",E.mustache(t.lookup("activeClass"))," ",k.If(function(){return E.call(t.lookup("nextNotAvailable"))},function(){return"disabled"})]},title:function(){return E.mustache(E.dot(t.lookup("."),"title"))},disabled:function(){return k.If(function(){return E.call(t.lookup("nextNotAvailable"))},function(){return"true"})}},"\n    ",O.DIV({class:"svgContainer"},"\n        ",k.If(function(){return E.call(E.dot(t.lookup("."),"svgLink"))},function(){return["\n        ",O.SVG("\n            ",O.USE({"xlink:href":function(){return E.mustache(t.lookup("absoluteUrl"),E.dot(t.lookup("."),"svgLink"))}}),"\n        "),"\n        "]},function(){return["\n        ",O.I({class:function(){return E.mustache(t.lookup("iconClasses"))}}),"\n        "]}),"\n    "),"\n        ",O.DIV({class:"buttonLabel"},"\n            ",k.View("lookup:..title",function(){return E.mustache(E.dot(t.lookup("."),"title"))}),"\n        "),"\n    ")})},"nextPresentationGroupButton.js":function(){a.nextPresentationGroupButton.helpers({nextNotAvailable:function(){if(T.get("LayoutManagerUpdated"),A)return A.stage===A.getNumProtocolStages()-1}}),a.nextPresentationGroupButton.events({"click #nextPresentationGroup":function(t){A&&(o(t.currentTarget).hasClass("disabled")||(o(t.currentTarget).tooltip("hide"),A.nextProtocolStage()))}})}},matchedProtocols:{"template.matchedProtocols.js":function(){a.__checkName("matchedProtocols"),a.matchedProtocols=new a("Template.matchedProtocols",function(){var t=this;return O.DIV({id:"matchedProtocols",class:"btn-group"},"\n        ",k.If(function(){return E.call(t.lookup("matchedProtocols"))},function(){return["\n        ",O.BUTTON({type:"button",class:"btn btn-sm dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",title:"Select Hanging Protocol"},"\n            ",O.I({class:"fa fa-list-ol"}),"\n            ",O.SPAN({class:"caret"}),"\n        "),"\n        ",O.UL({class:"dropdown-menu"},"\n            ",O.LI("\n                ",O.H5("Select a Hanging Protocol"),"\n            "),"\n            ",k.Each(function(){return E.call(t.lookup("matchedProtocols"))},function(){return["\n            ",O.LI("\n                ",O.A({class:function(){return["matchedProtocol ",k.If(function(){return E.call(t.lookup("active"))},function(){return"active"})]}},"\n                    ",k.View("lookup:name",function(){return E.mustache(t.lookup("name"))}),"\n                "),"\n            "),"\n            "]}),"\n        "),"\n        "]}),"\n    ")})},"matchedProtocols.js":function(t,e,n){var o=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){o=t}},0),a.matchedProtocols.helpers({matchedProtocols:function(){return L.find()}}),a.matchedProtocols.events({"click .matchedProtocol":function(){var t=this;A.setHangingProtocol(t)}})}},protocolEditor:{"template.protocolEditor.js":function(){a.__checkName("protocolEditor"),a.protocolEditor=new a("Template.protocolEditor",function(){var t=this;return O.DIV({id:"protocolEditor"},O.Raw('\n        <div class="row navigationButtonsContainer">\n            <div class="navigationButtons col-xs-12">\n                <ul class="nav nav-pills">\n                    <li class="active">\n                        <a data-toggle="tab" href="#protocolRulePane">\n                            Protocol\n                        </a>\n                    </li>\n                    <li>\n                        <a data-toggle="tab" href="#activeViewportEditor">\n                            Active Viewport\n                        </a>\n                    </li>\n                </ul>\n            </div>\n        </div>\n        '),O.DIV({class:"tab-content"},"\n            ",O.DIV({id:"protocolRulePane",class:"tab-pane active"},"\n                ",E.With(function(){return E.call(t.lookup("activeProtocol"))},function(){return["\n                ",O.DIV({id:"selectProtocol",class:"protocolEditorSection"},"\n                    ",O.SELECT({id:"protocolSelect",style:"width: 50%"},"\n                    "),"\n                    ",O.DIV({class:"dropdown protocolDropdown"},"\n                        ",O.BUTTON({type:"button",class:"btn btn-sm dropdown-toggle",id:"protocolDropdown","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},"\n                            ",O.I({class:"fa fa-cog"})," ",O.SPAN({class:"caret"}),"\n                        "),"\n                        ",O.UL({class:"dropdown-menu dropdown-menu-right","aria-labelledby":"protocolDropdown"},"\n                            ",O.LI("\n                                ",O.A({id:"newProtocol"},"\n                                    New ",O.I({class:"fa fa-file-text"}),"\n                                "),"\n                            "),"\n                            ",O.LI("\n                                ",O.A({id:"importProtocol",class:"btn-file"},"\n                                    Import ",O.INPUT({type:"file"})," ",O.I({class:"fa fa-upload"}),"\n                                "),"\n                            "),"\n                            ",k.Unless(function(){return E.call(t.lookup("locked"))},function(){return["\n                            ",O.LI("\n                                ",O.A({id:"renameProtocol"},"\n                                    Rename ",O.I({class:"fa fa-pencil"}),"\n                                "),"\n                            "),"\n                            "]}),"\n                            ",O.LI("\n                                ",O.A({id:"saveAsProtocol"},"\n                                    Save As ",O.I({class:"fa fa-files-o"}),"\n                                "),"\n                            "),"\n                            ",O.LI("\n                                ",O.A({id:"exportJSON"},"\n                                    Export ",O.I({class:"fa fa-download"}),"\n                                "),"\n                            "),"\n                            ",k.Unless(function(){return E.call(t.lookup("locked"))},function(){return["\n                            ",O.LI("\n                                ",O.A({id:"deleteProtocol"},"\n                                    Delete ",O.I({class:"fa fa-trash-o"}),"\n                                "),"\n                            "),"\n                            "]}),"\n                        "),"\n                    "),"\n                "),"\n                ",O.DIV({id:"editProtocol",class:"protocolEditorSection"},"\n                    ",O.DIV({class:"row"},"\n                        ",O.DIV({class:"col-xs-12"},"\n                            ",O.P("Created: ",k.View("lookup:formatJSDate",function(){return E.mustache(t.lookup("formatJSDate"),t.lookup("createdDate"))}),k.If(function(){return E.call(t.lookup("createdBy"))},function(){return[" by ",k.View("lookup:getUsername",function(){return E.mustache(t.lookup("getUsername"),t.lookup("createdBy"))})]})),"\n                            ",O.P("Last modified: ",k.View("lookup:formatJSDate",function(){return E.mustache(t.lookup("formatJSDate"),t.lookup("modifiedDate"))}),k.If(function(){return E.call(t.lookup("createdBy"))},function(){return[" by ",k.View("lookup:getUsername",function(){return E.mustache(t.lookup("getUsername"),t.lookup("modifiedBy"))})]})),"\n                            ",O.P("Number of Priors Referenced: ",k.View("lookup:numberOfPriorsReferenced",function(){return E.mustache(t.lookup("numberOfPriorsReferenced"))})),"\n                        "),"\n                    "),"\n                    ",O.DIV({class:"row"},"\n                        ",O.H3("Protocol Applicability"),"\n                        ",O.HR(),"\n                        ",k._TemplateWith(function(){return{level:E.call("protocol"),rules:E.call(t.lookup("protocolMatchingRules")),attributes:E.call(t.lookup("studyAttributes"))}},function(){return E.include(t.lookupTemplate("ruleTable"))}),"\n                    "),"\n                    ",O.DIV({class:"row"},"\n                        ",O.H3("Stages"),"\n                        ",O.HR(),"\n                        ",k._TemplateWith(function(){return{stages:E.call(t.lookup("stages"))}},function(){return E.include(t.lookupTemplate("stageSortable"))}),"\n                    "),"\n                "),"\n                "]}),"\n            "),"\n\n            ",O.DIV({id:"activeViewportEditor",class:"tab-pane"},"\n                ",k.If(function(){return E.call(t.lookup("activeViewportUndefined"))},function(){return["\n                    ",O.DIV({class:"noActiveViewport"},"\n                        ",O.H2("Select a Viewport"),"\n                        ",O.HR(),"\n                        ",O.P("\n                            Upon selecting a Viewport, this section will show a list of rules that can be used\n                            to determine which images will populate the specified Viewport. You can specify these\n                            rules to be evaluated at the study, series, or image level.\n                        "),"\n                    "),"\n                "]}),"\n                ",E.With(function(){return E.call(t.lookup("activeStage"))},function(){return["\n                ",E.include(t.lookupTemplate("stageDetails")),"\n                "]}),"\n            "),"\n        "),"\n\n        ",E.With(function(){return E.call(t.lookup("activeProtocol"))},function(){return["\n        ",O.DIV({id:"protocolOptions",class:"protocolEditorSection"},"\n            ",k.If(function(){return E.call(t.lookup("locked"))},function(){return["\n            ",O.BUTTON({id:"saveProtocol",type:"button",class:"btn btn-sm",disabled:""},"\n                Locked ",O.I({class:"fa fa-lock","aria-hidden":"true"}),"\n            "),"\n            "]},function(){return["\n            ",O.BUTTON({id:"saveProtocol",type:"button",class:"btn btn-sm"},"\n                Save Changes ",O.I({class:"fa fa-floppy-o","aria-hidden":"true"}),"\n            "),"\n            "]}),"\n\n            ",k.If(function(){return E.call(t.lookup("modifiedDate"))},function(){return["\n            ",O.P({class:"lastSavedText"},"Last saved ",k.View("lookup:jsDateFromNow",function(){return E.mustache(t.lookup("jsDateFromNow"),t.lookup("modifiedDate"))})),"\n            "]}),"\n        "),"\n        ",O.A({id:"downloadElement",style:"display:none;"}),"\n        "]}),"\n    ")})},"protocolEditor.js":function(t,e,n){function o(){if(A){var t=q.ProtocolStore.getProtocol().map(function(t){return{id:t.id,text:t.name}}),e=u("#protocolSelect");e.select2().empty(),e.select2({data:t}),e.select2().val(A.protocol.id).trigger("change")}}var i=void 0;n.watch(t("meteor/meteor"),{Meteor:function(t){i=t}},0);var r=void 0;n.watch(t("meteor/templating"),{Template:function(t){r=t}},1);var a=void 0;n.watch(t("meteor/session"),{Session:function(t){a=t}},2);var s=void 0;n.watch(t("meteor/random"),{Random:function(t){s=t}},3);var u=void 0;n.watch(t("meteor/jquery"),{$:function(t){u=t}},4);var l=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){l=t}},5),n.watch(t("meteor/ohif:viewerbase")),r.protocolEditor.onRendered(function(){r.instance().timeAgoInterval=i.setInterval(function(){a.set("timeAgoVariable",new Date)},6e4),q.ProtocolStore.onReady(function(){o()})}),r.protocolEditor.onDestroyed(function(){var t=r.instance();i.clearInterval(t.timeAgoInterval)}),r.protocolEditor.helpers({activeProtocol:function(){if(a.get("LayoutManagerUpdated"),A&&A.protocol&&A.LayoutManager&&void 0!==A.stage)return o(),A.protocol.updateNumberOfPriorsReferenced(),A.protocol},activeStage:function(){if(a.get("LayoutManagerUpdated"),A&&A.protocol&&A.LayoutManager&&void 0!==A.stage){var t=A.getCurrentStageModel();if(t){t.viewportStructure.layoutTemplateName=A.LayoutManager.layoutTemplateName,t.viewportStructure.properties=A.LayoutManager.layoutProps;var e=t.viewportStructure.getNumViewports()-t.viewports.length;if(e<0){var n=Math.abs(e),o=t.viewports.length-n;t.viewports.splice(o,n)}else if(e>0)for(var i=0;i<e;i++){var r=new q.Viewport;t.viewports.push(r)}return A.getCurrentStageModel()}}},activeViewportUndefined:function(){return void 0===a.get("activeViewport")}}),r.protocolEditor.events({"click #newProtocol":function(){var t=q.defaultProtocol.createClone();t.name="New (created "+c().format("h:mm:ss a")+")",t.id=s.id(),q.ProtocolStore.addProtocol(t),A.setHangingProtocol(t),o()},"click #renameProtocol":function(){var t=this;if(!t.locked){var e="Rename Protocol",n="Enter a new name",i=t.name;U(e,n,i,function(e){t.name=e,q.ProtocolStore.updateProtocol(t.id,t),o()})}},"click #importProtocol":function(){u("#protocolDropdown").dropdown("toggle")},"change .btn-file :file":function(t){var e=u(t.currentTarget),n=e.get(0).files?e.get(0).files.length:1,o=e.val().replace(/\\/g,"/").replace(/.*\//,"");e.trigger("fileselect",[n,o])},"fileselect .btn-file :file":function(t){var e=t.target.files,n=new FileReader;n.onload=function(){var t=JSON.parse(n.result);q.ProtocolStore.addProtocol(t),o()},n.readAsText(e[0],"utf-8")},"select2:select #protocolSelect":function(t){var e=t.params.data.id,n=q.ProtocolStore.getProtocol(e);n&&A.setHangingProtocol(n)},"click .navigationButtons a":function(){u(this).addClass("active").siblings().removeClass("active")},"click #saveProtocol":function(){var t=this;t.locked||(t.protocolWasModified(),q.ProtocolStore.updateProtocol(t.id,t))},"click #saveAsProtocol":function(){var t=this.createClone(),e="Save Protocol As",n="Enter a new name",i=t.name;U(e,n,i,function(e){t.id=s.id(),t.name=e,t.locked=!1,t.protocolWasModified(),q.ProtocolStore.addProtocol(t),A.setHangingProtocol(t),o()})},"click #exportJSON":function(){var t=this,e=JSON.stringify(t,null,2),n=new Date,o=t.name+"-"+n.getTime().toString()+".json",i=new Blob([e],{type:"application/json"}),r=document.getElementById("downloadElement");r.href=URL.createObjectURL(i),r.download=o,r.click()},"click #deleteProtocol":function(){var t=this;if(!t.locked){var e={title:"Delete Protocol",text:"Are you sure you would like to remove this Protocol? This cannot be reversed."};l.viewerbase.dialogUtils.showConfirmDialog(function(){q.ProtocolStore.removeProtocol(t.id),A.reset(),o()},e)}}})}},ruleTable:{"template.ruleTable.js":function(){a.__checkName("ruleTable"),a.ruleTable=new a("Template.ruleTable",function(){var t=this;return[O.TABLE({class:"ruleTable table"},"\n        ",O.THEAD("\n        ",O.TR("\n            ",O.TH("Constraint"),"\n            ",O.TH("Wt."),"\n            ",O.TH("Req."),"\n        "),"\n        "),"\n        ",O.TBODY("\n        ",k.Each(function(){return E.call(t.lookup("rules"))},function(){return["\n        ",k.If(function(){return E.call(t.lookup("constraint"))},function(){return["\n        ",O.TR("\n            ",O.TD("\n                ",O.I({class:"fa fa-pencil editRule"}),"\n                ",O.I({class:"fa fa-trash deleteRule"}),"\n                ",k.View("lookup:displayConstraint",function(){return E.mustache(t.lookup("displayConstraint"),t.lookup("attribute"),t.lookup("constraint"),E.dot(t.lookup(".."),"attributes"))}),"\n                ",k.Unless(function(){return E.call(t.lookup("rulePassed"))},function(){return O.SMALL({class:"failWarning"},"Fail")}),"\n            "),"\n            ",O.TD(O.INPUT({class:"ruleWeight",type:"number",value:function(){return E.mustache(t.lookup("weight"))},min:"1",step:"1",max:"1000"})),"\n            ",O.TD(O.INPUT(O.Attrs({class:"ruleRequired",type:"checkbox"},function(){return E.attrMustache(t.lookup("valueIf"),t.lookup("required"),"checked","")}))),"\n        "),"\n        "]}),"\n        "]}),"\n        "),"\n    "),O.Raw('\n    <div class="addRuleContainer">\n        <span class="addRule">\n            Add New Constraint <i class="fa fa-plus-circle"></i>\n        </span>\n    </div>')]})},"ruleTable.js":function(){a.ruleTable.helpers({rulePassed:function(){var t=T.get("activeViewport"),e=A.matchDetails[t];if(e&&e.bestMatch){var n=this,o=!0;return e.bestMatch.matchDetails.failed.forEach(function(t){if(t.rule.id===n.id)return o=!1,!1}),o}}}),a.ruleTable.events({"click .addRule":function(){var t=a.currentData(),e=t.attributes,n=t.level;z(e,n)},"click .editRule":function(){var t=a.currentData(),e=t.attributes,n=t.level;z(e,n,this)},"click .deleteRule":function(){var t=this;t instanceof q.ProtocolMatchingRule?A.protocol.removeProtocolMatchingRule(t):H().removeRule(t);var e=T.get("activeViewport");A.updateViewports(e)},"change .ruleWeight":function(t){this.weight=o(t.currentTarget).val();var e=T.get("activeViewport");A.updateViewports(e)},"change .ruleRequired":function(t){this.required=o(t.currentTarget).prop("checked");var e=T.get("activeViewport");A.updateViewports(e)}})}},ruleEntryDialog:{"template.ruleEntryDialog.js":function(){a.__checkName("ruleEntryDialog"),a.ruleEntryDialog=new a("Template.ruleEntryDialog",function(){var t=this;return O.DIV({class:"ruleEntryDialog dialog-animated"},O.Raw('\n        <div class="dialogHeader">\n            <h5>Rule Editor</h5>\n        </div>\n        '),O.DIV({class:"dialogContent"},"\n            ",O.Raw('<div class="row">\n                <div class="col-xs-12">\n                    <select class="attributes" style="width: 95%;">\n                    </select>\n                </div>\n            </div>'),"\n            ",O.DIV({class:"row"},"\n                ",O.DIV({class:"col-xs-12"},"\n                    ",O.SELECT({class:"comparators",style:"width: 95%;"},"\n                        ",k.Each(function(){return E.call(t.lookup("comparators"))},function(){return["\n                        ",O.OPTION({value:function(){return E.mustache(t.lookup("id"))}},k.View("lookup:name",function(){return E.mustache(t.lookup("name"))})),"\n                        "]}),"\n                    "),"\n                "),"\n            "),"\n            ",O.DIV({class:"row"},"\n                ",O.DIV({class:"col-xs-12"},"\n                    ",k.If(function(){return E.dataMustache(t.lookup("ifTypeIs"),t.lookup("currentValue"),"string")},function(){return["\n                    ",O.INPUT({class:"currentValue",type:"text",value:function(){return E.mustache(t.lookup("currentValue"))}}),"\n                    "]}),"\n\n                    ",k.If(function(){return E.dataMustache(t.lookup("ifTypeIs"),t.lookup("currentValue"),"undefined")},function(){return["\n                    ",O.INPUT({class:"currentValue",type:"text",value:function(){return E.mustache(t.lookup("currentValue"))}}),"\n                    "]}),"\n\n                    ",k.If(function(){return E.dataMustache(t.lookup("ifTypeIs"),t.lookup("currentValue"),"number")},function(){return["\n                    ",O.INPUT({class:"currentValue",type:"number",value:function(){return E.mustache(t.lookup("currentValue"))}}),"\n                    "]}),"\n\n                    ",k.If(function(){return E.dataMustache(t.lookup("ifTypeIs"),t.lookup("currentValue"),"boolean")},function(){return["\n                    ",O.INPUT(O.Attrs({class:"currentValue",type:"checkbox"},function(){return E.attrMustache(t.lookup("valueIf"),t.lookup("currentValue"),"selected","")})),"\n                    "]}),"\n                "),"\n            "),"\n        "),O.Raw('\n        <div class="dialogFooter">\n            <button id="cancel" class="btn btn-link" tabindex="1">Cancel</button>\n            <button id="save" class="btn btn-primary" tabindex="0">OK</button>\n        </div>\n    '))})},"ruleEntryDialog.js":function(t,e,n){function o(t){a(t).css("display","none"),a(".removableBackdrop").remove(),g.setFocusToActiveViewport()}function i(){var t=g.viewportUtils.getEnabledElementForActiveElement();if(t)return t.image.imageId}function r(t){var e=d.viewer.Studies.findBy(null,{sort:[["studyDate","desc"]]});if(e){var n=cornerstone.metaData.get("study",t);if(n){var o=0;return d.studylist.collections.Studies.find({patientId:e.patientId,studyDate:{$lt:e.studyDate}},{sort:{studyDate:-1}}).forEach(function(t,e){if(t.studyInstanceUid===n.studyInstanceUid)return o=e+1,!1}),o}}}var a=void 0;n.watch(t("meteor/jquery"),{$:function(t){a=t}},0);var s=void 0;n.watch(t("meteor/session"),{Session:function(t){s=t}},1);var u=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){u=t}},2);var c=void 0;n.watch(t("meteor/templating"),{Template:function(t){c=t}},3);var l=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){l=t}},4);var d=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){d=t}},5);var g=void 0;n.watch(t("meteor/ohif:viewerbase"),{Viewerbase:function(t){g=t}},6);var p={ESC:27};z=function(t,e,n){var i=a(".ruleEntryDialog"),r=i.find("input.currentValue");r.val(""),c.ruleEntryDialog.dialog=i,c.ruleEntryDialog.level=e,c.ruleEntryDialog.rule=n;var s=i.find(".attributes");s.html("").select2({data:t,placeholder:"Select an attribute",allowClear:!0}),n&&n.attribute&&s.val(n.attribute);var u=void 0;if(n&&n.constraint){var d=Object.keys(n.constraint)[0],g=Object.keys(n.constraint[d])[0],p=Z.findOne({validator:d,validatorOption:g}),h=n.constraint[d][g];r.val(h),u=h,p&&i.find(".comparators").val(p.id).trigger("change")}s.trigger("change",u),i.css("display","block"),l.render(c.removableBackdrop,document.body),a(".removableBackdrop").one("mousedown touchstart",function(){o(i)})};var h=function(t){var e=i();if(e){if("abstractPriorValue"===t)return r(e);var n=void 0;if(d.viewer.StudyMetadataList.find(function(t){return!!(n=t.findInstance(function(t){return t.getImageId()===e}))}),n){var o=n.getTagValue(t);return void 0===o?q.attributeDefaults[t]:o}}};c.ruleEntryDialog.onCreated(function(){var t=this;t.currentValue=new u(""),t.attribute=new u,t.comparatorId=new u}),c.ruleEntryDialog.onRendered(function(){var t=c.instance();t.$(".comparators").select2();var e=t.$(".comparators").val();t.comparatorId.set(e),t.$(".ruleEntryDialog").draggable()}),c.ruleEntryDialog.helpers({comparators:function(){return Z.find()},currentValue:function(){return c.instance().currentValue.get()}}),c.ruleEntryDialog.events({"click #save":function(t,e){var n=c.ruleEntryDialog.dialog,i=c.ruleEntryDialog.level,r=e.attribute.get(),a=e.comparatorId.get(),u=e.currentValue.get();if(void 0!==u){var l;if(c.ruleEntryDialog.rule)l=c.ruleEntryDialog.rule;else{var d=H();switch(i){case"protocol":l=new q.ProtocolMatchingRule,A.protocol.addProtocolMatchingRule(l);break;case"study":l=new q.StudyMatchingRule,d.studyMatchingRules.push(l);break;case"series":l=new q.SeriesMatchingRule,d.seriesMatchingRules.push(l);break;case"instance":l=new q.ImageMatchingRule,d.imageMatchingRules.push(l);break}}var g=Z.findOne({id:a}),p={};p[g.validator]={},p[g.validator][g.validatorOption]=u,l.attribute=r,l.constraint=p;var h=s.get("activeViewport");A.updateViewports(h),o(n)}},"click #cancel":function(){o(c.ruleEntryDialog.dialog)},"keydown .ruleEntryDialog":function(t){var e=c.ruleEntryDialog.dialog;if(t.which===p.ESC)return o(e),!1},"change select.attributes":function(t,e,n){var o=a(t.currentTarget).val();e.attribute.set(o),c.ruleEntryDialog.selectedAttribute=o;var i=void 0;i=n||h(o),e.currentValue.set(i),a(".ruleEntryDialog").find("input.currentValue").val(i)},"change input.currentValue":function(t,e){var n=a(t.currentTarget),o=n.val();"number"===n.attr("type")&&(o=parseFloat(o)),e.currentValue.set(o)},"change select.comparators":function(t,e){var n=a(t.currentTarget).val();e.comparatorId.set(n)}})}},settingEntryDialog:{"template.settingEntryDialog.js":function(){a.__checkName("settingEntryDialog"),a.settingEntryDialog=new a("Template.settingEntryDialog",function(){var t=this;return O.Raw('<div class="settingEntryDialog dialog-animated">\n        <div class="dialogHeader">\n            <h5>Viewport Setting Editor</h5>\n        </div>\n        <div class="dialogContent">\n            <div class="row">\n                <div class="col-xs-12">\n                    <select class="settings" style="width: 95%;">\n                    </select>\n                </div>\n            </div>\n            <div class="row">\n                <div class="col-xs-12">\n                    <select class="currentValue" style="width: 95%;">\n                    </select>\n                </div>\n            </div>\n        </div>\n        <div class="dialogFooter">\n            <button id="cancel" class="btn btn-link" tabindex="1">Cancel</button>\n            <button id="save" class="btn btn-primary" tabindex="0">OK</button>\n        </div>\n    </div>')})},"settingEntryDialog.js":function(t,e,n){function o(t){u(t).css("display","none"),u(".removableBackdrop").remove(),c.setFocusToActiveViewport()}var i=void 0;n.watch(t("meteor/templating"),{Template:function(t){i=t}},0);var r=void 0;n.watch(t("meteor/session"),{Session:function(t){r=t}},1);var a=void 0;n.watch(t("meteor/reactive-var"),{ReactiveVar:function(t){a=t}},2);var s=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){s=t}},3);var u=void 0;n.watch(t("meteor/jquery"),{$:function(t){u=t}},4);var c=void 0;n.watch(t("meteor/ohif:viewerbase"),{Viewerbase:function(t){c=t}},5);var l={ESC:27};_=function(t){var e=u(".settingEntryDialog");i.settingEntryDialog.dialog=e,i.settingEntryDialog.settingObject=t,Object.keys(q.displaySettings).concat(Object.keys(q.CustomViewportSettings));var n=Object.keys(q.displaySettings).map(function(t){return{id:t,text:q.displaySettings[t].text}}),r=Object.keys(q.CustomViewportSettings).map(function(t){return{id:t,text:q.CustomViewportSettings[t].text}}),a=n.concat(r),c=e.find(".settings");c.html("").select2({data:a,placeholder:"Select a setting",allowClear:!0});var l={options:[]};t&&q.displaySettings[t.id]?l=q.displaySettings[t.id]:t&&q.CustomViewportSettings[t.id]&&(l=q.CustomViewportSettings[t.id]);var d=e.find(".currentValue");d.html("").select2({data:l.options,placeholder:"Select a value",allowClear:!0}),t&&t.id&&c.val(t.id),c.trigger("change"),t&&void 0!==t.value&&d.val(t.value).trigger("change"),e.css("display","block"),s.render(i.removableBackdrop,document.body),u(".removableBackdrop").one("mousedown touchstart",function(){o(e)})},i.settingEntryDialog.onCreated(function(){var t=this;t.currentValue=new a(""),t.setting=new a}),i.settingEntryDialog.onRendered(function(){this.$(".settingEntryDialog").draggable()}),i.settingEntryDialog.events({"click #save":function(t,e){var n=i.settingEntryDialog.dialog,a=e.setting.get(),s=e.currentValue.get();if(void 0!==s){var u={id:a,value:s},c=H(),l=i.settingEntryDialog.settingObject;l&&l.id&&delete c.viewportSettings[l.id],c.viewportSettings[u.id]=u.value;var d=r.get("activeViewport");A.updateViewports(d),o(n)}},"click #cancel":function(){o(i.settingEntryDialog.dialog)},"keydown .settingEntryDialog":function(t){var e=i.settingEntryDialog.dialog;if(t.which===l.ESC)return o(e),!1},"change select.settings":function(t,e){var n=u(t.currentTarget).val();e.setting.set(n);var o={options:[]};n&&q.displaySettings[n]?o=q.displaySettings[n]:n&&q.CustomViewportSettings[n]&&(o=q.CustomViewportSettings[n]);var r=i.settingEntryDialog.dialog.find(".currentValue");r.html("").select2({data:o.options,placeholder:"Select a value",allowClear:!0}),o&&o.defaultValue&&(e.currentValue.set(o.defaultValue),r.val(o.defaultValue).trigger("change"))},"change select.currentValue":function(t,e){var n=u(t.currentTarget).val();e.currentValue.set(n)}})}},textEntryDialog:{"template.textEntryDialog.js":function(){a.__checkName("textEntryDialog"),a.textEntryDialog=new a("Template.textEntryDialog",function(){var t=this;return O.DIV({class:"textEntryDialog dialog-animated"},"\n        ",O.DIV({class:"dialogHeader"},"\n            ",O.H4({class:"title"},k.View("lookup:title",function(){return E.mustache(t.lookup("title"))})),"\n        "),"\n        ",O.DIV({class:"dialogContent"},"\n            ",O.DIV({class:"row"},"\n                ",O.DIV({class:"col-xs-12"},"\n                    ",O.H5({class:"instructions"},k.View("lookup:instructions",function(){return E.mustache(t.lookup("instructions"))})),"\n                "),"\n            "),"\n            ",O.DIV({class:"row"},"\n                ",O.DIV({class:"col-xs-12"},"\n                    ",O.INPUT({class:"currentValue",type:"text",value:function(){return E.mustache(t.lookup("currentValue"))}}),"\n                "),"\n            "),"\n        "),O.Raw('\n        <div class="dialogFooter">\n            <button class="cancel btn btn-link" tabindex="1">Cancel</button>\n            <button class="save btn btn-primary" tabindex="0">OK</button>\n        </div>\n    '))})},"textEntryDialog.js":function(t,e,n){function o(t){r(t).css("display","none"),r(".removableBackdrop").remove(),s.setFocusToActiveViewport()}var i=void 0;n.watch(t("meteor/blaze"),{Blaze:function(t){i=t}},0);var r=void 0;n.watch(t("meteor/jquery"),{$:function(t){r=t}},1);var a=void 0;n.watch(t("meteor/templating"),{Template:function(t){a=t}},2);var s=void 0;n.watch(t("meteor/ohif:viewerbase"),{Viewerbase:function(t){s=t}},3);var u={ESC:27,ENTER:13};U=function(t,e,n,i){var s=r(".textEntryDialog");s.find("input.currentValue").val(n),a.textEntryDialog.dialog=s,a.textEntryDialog.title=t,a.textEntryDialog.instructions=e,a.textEntryDialog.doneCallback=i,s.find(".title").html(t),s.find(".instructions").html(e),s.css("display","block"),D.render(a.removableBackdrop,document.body),r(".removableBackdrop").one("mousedown touchstart",function(){o(s)})},a.textEntryDialog.onRendered(function(){a.instance().$(".settingEntryDialog").draggable()}),a.textEntryDialog.events({"click .save":function(){var t=a.textEntryDialog.dialog.find("input.currentValue").val();if(void 0!==t){var e=a.textEntryDialog.doneCallback;e&&e(t),o(a.textEntryDialog.dialog)}},"click .cancel":function(){o(a.textEntryDialog.dialog)},"keydown .textEntryDialog":function(t){var e=a.textEntryDialog.dialog;if(t.which===u.ESC)return o(e),!1;if(t.which===u.ENTER){var n=e.find("input.currentValue").val();if(void 0===n)return;var i=a.textEntryDialog.doneCallback;return i&&i(n),o(e),!1}},"change input.currentValue":function(t,e){var n=r(t.currentTarget);a.textEntryDialog.currentValue=n.val()}})}},settingsTable:{"template.settingsTable.js":function(){a.__checkName("settingsTable"),a.settingsTable=new a("Template.settingsTable",function(){var t=this;return[O.TABLE({class:"settingsTable table"},"\n        ",O.THEAD("\n            ",O.TR("\n                ",O.TH("Setting"),"\n                ",O.TH("Value"),"\n            "),"\n        "),"\n        ",O.TBODY("\n            ",k.Each(function(){return E.dataMustache(t.lookup("objectToPairs"),t.lookup("settings"))},function(){return["\n            ",k.If(function(){return E.call(t.lookup("value"))},function(){return["\n                ",O.TR("\n                    ",O.TD("\n                        ",O.I({class:"fa fa-pencil editSetting"}),"\n                        ",O.I({class:"fa fa-trash deleteSetting"}),"\n                        ",k.View("lookup:getSettingText",function(){return E.mustache(t.lookup("getSettingText"))}),"\n                    "),"\n                    ",O.TD("\n                        ",k.View("lookup:prettyPrintStringify",function(){return E.mustache(t.lookup("prettyPrintStringify"),t.lookup("value"))}),"\n                    "),"\n                "),"\n            "]}),"\n            "]}),"\n        "),"\n    "),O.Raw('\n    <div class="addSettingContainer">\n        <span class="addSetting">\n            Add Display Setting <i class="fa fa-plus-circle"></i>\n        </span>\n    </div>')]})},"settingsTable.js":function(){a.settingsTable.events({"click .addSetting":function(){_()},"click .editSetting":function(){_(this)},"click .deleteSetting":function(){var t=this;delete H().viewportSettings[t.key];var e=T.get("activeViewport");A.updateViewports(e)}}),a.settingsTable.helpers({getSettingText:function(){var t=this;return q.CustomViewportSettings[t.key]?q.CustomViewportSettings[t.key].text:q.displaySettings[t.key]?q.displaySettings[t.key].text:k._globalHelpers.prettyPrintStringify(t.key)}})}},stageDetails:{"template.stageDetails.js":function(){a.__checkName("stageDetails"),a.stageDetails=new a("Template.stageDetails",function(){var t=this;return O.DIV({id:"stageDetails",class:"protocolEditorSection"},"\n        ",O.DIV({class:"row"},"\n            ",O.DIV({class:"col-xs-12"},"\n                ",E.With(function(){return E.call(t.lookup("activeViewport"))},function(){return["\n                ",O.DIV({class:"stageEditorSection"},"\n                    ",O.H3("Viewport Settings"),"\n                    ",O.HR(),"\n                    ",k._TemplateWith(function(){return{settings:E.call(t.lookup("viewportSettings"))}},function(){return E.include(t.lookupTemplate("settingsTable"))}),"\n                "),"\n\n                ",O.DIV({class:"stageEditorSection"},"\n                    ",O.H3("Study Matching Rules"),"\n                    ",O.HR(),"\n                    ",k._TemplateWith(function(){return{level:E.call("study"),rules:E.call(t.lookup("studyMatchingRules")),attributes:E.call(t.lookup("studyAttributes"))}},function(){return E.include(t.lookupTemplate("ruleTable"))}),"\n                "),"\n\n                ",O.DIV({class:"stageEditorSection"},"\n                    ",O.H3("Series Matching Rules"),"\n                    ",O.HR(),"\n                    ",k._TemplateWith(function(){return{level:E.call("series"),rules:E.call(t.lookup("seriesMatchingRules")),attributes:E.call(t.lookup("seriesAttributes"))}},function(){return E.include(t.lookupTemplate("ruleTable"))}),"\n                "),"\n\n                ",O.DIV({class:"stageEditorSection"},"\n                    ",O.H3("Image Matching Rules"),"\n                    ",O.HR(),"\n                    ",k._TemplateWith(function(){return{level:E.call("instance"),rules:E.call(t.lookup("imageMatchingRules")),attributes:E.call(t.lookup("instanceAttributes"))}},function(){return E.include(t.lookupTemplate("ruleTable"))}),"\n                "),"\n                "]}),"\n            "),"\n        "),"\n    ")})},"stageDetails.js":function(){H=function(){if(A&&A.protocol&&void 0!==A.stage){var t=A.getCurrentStageModel(),e=T.get("activeViewport");if(!(e>=t.viewports.length))return t.viewports[e]}},a.stageDetails.helpers({activeViewport:function(){return T.get("LayoutManagerUpdated"),H()}})}},stageSortable:{"template.stageSortable.js":function(){a.__checkName("stageSortable"),a.stageSortable=new a("Template.stageSortable",function(){var t=this;return O.DIV({id:"stageSortingContainer"},"\n        ",O.DIV({class:"moveStageButtons"},"\n            ",O.A({class:"moveStageUp noselect",disabled:function(){return k.Unless(function(){return E.call(t.lookup("isPreviousAvailable"))},function(){return"true"})}},"\n                Move Stage Up ",O.Raw('<i class="fa fa-chevron-up"></i>'),"\n            "),"\n            ",O.A({class:"moveStageDown noselect",disabled:function(){return k.Unless(function(){return E.call(t.lookup("isNextAvailable"))},function(){return"true"})}},"\n                Move Stage Down ",O.Raw('<i class="fa fa-chevron-down"></i>'),"\n            "),"\n        "),"\n        ",O.DIV({id:"stageSortable",class:"sortable"},"\n            ",k.Each(function(){return E.call(t.lookup("stages"))},function(){return["\n                ",O.DIV({class:"sortable-item","data-id":function(){return E.mustache(t.lookup("id"))}},"\n                    ",O.SPAN("\n                        ",O.DIV({class:"sortable-handle pull-left"}),"\n                        ",O.I({class:"deleteStage fa fa-trash fa-lg pull-right"}),"\n                        ",O.SPAN({class:function(){return k.If(function(){return E.call(t.lookup("isActiveStage"))},function(){return"active"})}},"\n                            ",k.View("lookup:stageLabel",function(){return E.mustache(t.lookup("stageLabel"))}),"\n                        "),"\n                    "),"\n                "),"\n            "]}),"\n        "),O.Raw('\n        <div class="addStage">\n            <span id="addStage">\n                Create New Stage <i class="fa fa-plus-circle"></i>\n            </span>\n        </div>\n    '))})},"stageSortable.js":function(t,e,n){function o(t,e){var n;if(t&&t.stages)return t.stages.forEach(function(t,o){if(t.id===e)return n=o,!1}),n}var i=void 0;n.watch(t("meteor/templating"),{Template:function(t){i=t}},0);var r=void 0;n.watch(t("meteor/session"),{Session:function(t){r=t}},1);var a=void 0;n.watch(t("meteor/random"),{Random:function(t){a=t}},2);var s=void 0;n.watch(t("meteor/ohif:core"),{OHIF:function(t){s=t}},3),n.watch(t("meteor/ohif:viewerbase")),Array.prototype.move=function(t,e){var n=this[t];return e=Math.max(0,e),e=Math.min(this.length,e),this.splice(t,1),this.splice(e,0,n),this},i.stageSortable.helpers({isActiveStage:function(){if(r.get("LayoutManagerUpdated"),A){var t=A.getCurrentStageModel();return!!t&&this.id===t.id}},stageLabel:function(){var t=this;if(A){var e=o(q.ProtocolStore.getProtocol(A.protocol.id),t.id);return void 0===e?(r.get("timeAgoVariable"),"New Stage "+(A.newStageIds.indexOf(t.id)+1)+" (created "+c(t.createdDate).fromNow()+")"):"Stage "+ ++e}},isNextAvailable:function(){if(r.get("LayoutManagerUpdated"),A)return A.stage<A.getNumProtocolStages()-1},isPreviousAvailable:function(){if(r.get("LayoutManagerUpdated"),A)return A.stage>0}}),i.stageSortable.events({"click .sortable-item span":function(){var t=o(A.protocol,this.id);A.setCurrentProtocolStage(t-A.stage)},"click #addStage":function(){var t=A.getCurrentStageModel().createClone();delete t.name,A.protocol.stages.push(t),A.newStageIds.push(t.id),A.setCurrentProtocolStage(1)},"click .deleteStage":function(){if(1!==A.protocol.stages.length){var t=this.id,e={title:"Remove Protocol Stage",text:"Are you sure you would like to remove this Protocol Stage? This cannot be reversed."};s.viewerbase.dialogUtils.showConfirmDialog(function(){var e=o(A.protocol,t);A.protocol.stages.splice(e,1),A.stage===e&&A.setCurrentProtocolStage(-1),r.set("LayoutManagerUpdated",Math.random())},e)}},"click .moveStageUp":function(){var t=A.stage,e=Math.max(A.stage-1,0);t!==e&&(A.protocol.stages=A.protocol.stages.move(t,e),A.stage=e,r.set("LayoutManagerUpdated",Math.random()))},"click .moveStageDown":function(){var t=A.stage,e=Math.min(A.stage+1,A.protocol.stages.length-1);t!==e&&(A.protocol.stages=A.protocol.stages.move(t,e),A.stage=e,r.set("LayoutManagerUpdated",Math.random()))}})}}},customAttributes:{"index.js":function(){q.CustomAttributeRetrievalCallbacks={},q.addCustomAttribute=function(t,e,n){q.CustomAttributeRetrievalCallbacks[t]={name:e,callback:n}}}},customViewportSettings:{"index.js":function(){q.CustomViewportSettings={},q.addCustomViewportSetting=function(t,e,n,o){q.CustomViewportSettings[t]={id:t,text:e,options:n,callback:o}}}},lib:{"sortByScore.js":function(t,e,n){n.export({sortByScore:function(){return o}});var o=function(t){t.sort(function(t,e){return e.score-t.score})}}},matcher:{"HPMatcher.js":function(t,e,n){n.export({HPMatcher:function(){return c}});var o=void 0;n.watch(t("meteor/ohif:viewerbase"),{Viewerbase:function(t){o=t}},0),n.watch(t("../customAttributes"));var i=o,r=i.OHIFError,a=i.metadata,s=a.StudySummary,u=a.InstanceMetadata,c={match:function(t,e){if(!(t instanceof s||t instanceof u))throw new r("HPMatcher::match metadataInstance must be an instance of StudySummary or InstanceMetadata");var n={format:"grouped"},o={passed:[],failed:[]},i=!1,a=0;return e.forEach(function(e){var r,s,u=e.attribute,c=t.customAttributeExists(u);if(!c&&q.CustomAttributeRetrievalCallbacks.hasOwnProperty(u)){var d=q.CustomAttributeRetrievalCallbacks[u];t.setCustomAttribute(u,d.callback(t)),c=!0}var g=(r={},r[u]=e.constraint,r),p=c?t.getCustomAttribute(u):t.getTagValue(u),h=(s={},s[u]=p,s),f=void 0;try{f=l(h,g,[n])}catch(t){f=["Something went wrong during validation.",t]}f?(e.required&&(i=!0),o.failed.push({rule:e,errorMessages:f})):(a+=parseInt(e.weight,10),o.passed.push({rule:e}))}),i&&(a=0),{score:a,details:o}}}}}}}}}},{extensions:[".js",".json",".html",".styl"]});W("./node_modules/meteor/ohif:hanging-protocols/both/namespace.js"),W("./node_modules/meteor/ohif:hanging-protocols/both/collections.js"),W("./node_modules/meteor/ohif:hanging-protocols/both/schema.js"),W("./node_modules/meteor/ohif:hanging-protocols/both/hardcodedData.js"),W("./node_modules/meteor/ohif:hanging-protocols/both/testData.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/collections.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/protocolEngine.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/helpers/displayConstraint.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/helpers/attributes.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/protocolStore/protocolStore.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/protocolStore/defaultStrategy.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/previousPresentationGroupButton/template.previousPresentationGroupButton.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/previousPresentationGroupButton/previousPresentationGroupButton.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/nextPresentationGroupButton/template.nextPresentationGroupButton.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/nextPresentationGroupButton/nextPresentationGroupButton.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/matchedProtocols/template.matchedProtocols.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/matchedProtocols/matchedProtocols.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/protocolEditor/template.protocolEditor.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/protocolEditor/protocolEditor.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/ruleTable/template.ruleTable.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/ruleTable/ruleTable.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/ruleEntryDialog/template.ruleEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/ruleEntryDialog/ruleEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/settingEntryDialog/template.settingEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/settingEntryDialog/settingEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/textEntryDialog/template.textEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/textEntryDialog/textEntryDialog.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/settingsTable/template.settingsTable.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/settingsTable/settingsTable.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/stageDetails/template.stageDetails.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/stageDetails/stageDetails.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/stageSortable/template.stageSortable.js"),W("./node_modules/meteor/ohif:hanging-protocols/client/components/stageSortable/stageSortable.js"),"undefined"==typeof Package&&(Package={}),function(t,e){for(var n in e)n in t||(t[n]=e[n])}(Package["ohif:hanging-protocols"]={},{HP:q})}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,r=Package["templating-runtime"].Template,a=Package.blaze.Blaze,o=Package.blaze.UI,i=Package.blaze.Handlebars,s=Package.tracker.Tracker,l=Package.tracker.Deps,c=Package.modules.meteorInstall,d=Package["babel-runtime"].meteorBabelHelpers,p=Package.promise.Promise,u=Package.htmljs.HTML,f=Package["ecmascript-runtime-client"].Symbol,m=Package["ecmascript-runtime-client"].Map,h=Package["ecmascript-runtime-client"].Set,y=Package.spacebars.Spacebars,v,b=c({node_modules:{meteor:{"aldeed:template-extension":{lib:{"hooks.js":function(){(v={global:{created:[],rendered:[],destroyed:[]},master:{created:function(){v.runGlobal("created",this,arguments)},rendered:function(){v.runGlobal("rendered",this,arguments)},destroyed:function(){v.runGlobal("destroyed",this,arguments)}}}).addGlobal=function(e){e._hasTemplateExtensionMasterHooks||(e.onCreated(v.master.created),e.onRendered(v.master.rendered),e.onDestroyed(v.master.destroyed),e._hasTemplateExtensionMasterHooks=!0)},v.runGlobal=function(e,t,n){for(var r=v.global[e],a=Array.isArray(r),o=0,r=a?r:r[f.iterator]();;){var i;if(a){if(o>=r.length)break;i=r[o++]}else{if((o=r.next()).done)break;i=o.value}i.apply(t,n)}}},"template-for-each.js":function(){r.forEach=function(e){var t=!1;for(var n in d.sanitizeForInObject(r))if(r.hasOwnProperty(n)){var o=r[n];if(a.isTemplate(o)){var i=o.viewName;"body"===i?t||(t=!0,e(o)):"Template.__dynamic"!==i&&"Template.__dynamicWithDataContext"!==i&&e(o)}}}},"template-hooks.js":function(e){function t(e){return e&&e.__esModule?e:{default:e}}var n=t(e("babel-runtime/helpers/typeof"));r.prototype.hooks=function(e){if(!e||"object"!==(void 0===e?"undefined":(0,n.default)(e)))throw new Error("hooks argument must be an object with created, rendered, and/or destroyed properties, each set to a function");"function"==typeof e.created&&this.onCreated(e.created),"function"==typeof e.rendered&&this.onRendered(e.rendered),"function"==typeof e.destroyed&&this.onDestroyed(e.destroyed)}},"template-global-hooks.js":function(){e.startup(function(){r.forEach(function(e){v.addGlobal(e)})}),r.onCreated=function(e){v.global.created.push(e)},r.onRendered=function(e){v.global.rendered.push(e)},r.onDestroyed=function(e){v.global.destroyed.push(e)}},"template-for-each-instance.js":function(){r._renderedInstances=[],r.onRendered(function(){function e(){r._renderedInstances.push(this)}return e}()),r.onDestroyed(function(){function e(){var e=r._renderedInstances.indexOf(this);e>-1&&r._renderedInstances.splice(e,1)}return e}()),r.forEachCurrentlyRenderedInstance=function(e){r._renderedInstances.forEach(e)}},"template-inherits-events-from.js":function(){r.prototype.inheritsEventsFrom=function(){function e(e){function t(e){"string"==typeof e&&(e=r[e]),e&&(n.__eventMaps=n.__eventMaps.concat(e.__eventMaps))}var n=this;n.__eventMaps=n.__eventMaps||[],Array.isArray(e)?e.forEach(t):t(e)}return e}()},"template-inherits-helpers-from.js":function(){r.prototype.inheritsHelpersFrom=function(){function e(e){var t=this,n=function(e){if("string"==typeof e&&(e=r[e]),e){var n={};for(var a in d.sanitizeForInObject(e.__helpers))e.__helpers.hasOwnProperty(a)&&" "===a.charAt(0)&&(n[a.slice(1)]=e.__helpers[a]);t.helpers(n)}};Array.isArray(e)?e.forEach(n):n(e)}return e}()},"template-inherits-hooks-from.js":function(){r.prototype.inheritsHooksFrom=function(){function e(e){function t(e){if("string"==typeof e&&(e=r[e]),e){v.addGlobal(e);for(var t=e._callbacks.created,a=Array.isArray(t),o=0,t=a?t:t[f.iterator]();;){var i;if(a){if(o>=t.length)break;i=t[o++]}else{if((o=t.next()).done)break;i=o.value}var s=i;s!==v.master.created&&n.onCreated(s)}for(var l=e._callbacks.rendered,c=Array.isArray(l),d=0,l=c?l:l[f.iterator]();;){var p;if(c){if(d>=l.length)break;p=l[d++]}else{if((d=l.next()).done)break;p=d.value}var u=p;u!==v.master.rendered&&n.onRendered(u)}for(var m=e._callbacks.destroyed,h=Array.isArray(m),y=0,m=h?m:m[f.iterator]();;){var b;if(h){if(y>=m.length)break;b=m[y++]}else{if((y=m.next()).done)break;b=y.value}var _=b;_!==v.master.destroyed&&n.onDestroyed(_)}}}var n=this;Array.isArray(e)?e.forEach(t):t(e)}return e}()},"template-register-helpers.js":function(){r.registerHelpers=function(e){if(e)for(var t in d.sanitizeForInObject(e))e.hasOwnProperty(t)&&r.registerHelper(t,e[t])}},"template-replaces.js":function(){r.prototype.replaces=function(){function e(e){function t(e){"string"==typeof e&&(e=r[e]),e&&(e.renderFunction=n.renderFunction)}var n=this;Array.isArray(e)?e.forEach(t):t(e)}return e}()},"template-clear-event-maps.js":function(){r.prototype.clearEventMaps=function(){function e(){this.__eventMaps=[]}return e}()},"template-copy-as.js":function(){r.prototype.copyAs=function(){function e(e){function t(e){var t=r[e]=new r("Template."+e,n.renderFunction);return t.inheritsHelpersFrom(n),t.inheritsEventsFrom(n),t.inheritsHooksFrom(n),t}var n=this;if(Array.isArray(e)){for(var a=[],o=e,i=Array.isArray(o),s=0,o=i?o:o[f.iterator]();;){var l;if(i){if(s>=o.length)break;l=o[s++]}else{if((s=o.next()).done)break;l=s.value}var c=l;a.push(t(c))}return a}return t(e)}return e}()},"template-instance-parent.js":function(){function e(e,n,r){for(var a=0,o=this;a<e&&o;){for(var i=t(o.view,n);i&&(!i.template||"(contentBlock)"===i.name||"(elseBlock)"===i.name);)i=t(i,n);if(!i)return null;if(o="function"==typeof i.templateInstance?i.templateInstance():null,r&&r(o))return o;a++}return o}function t(e,t){return t?e.originalParentView||e.parentView:e.parentView}a.TemplateInstance.prototype.parent=function(){function t(t,n){var r=null;if(isFinite(t)||!t){var a=t||1;r=e.call(this,a,n)}else{if("function"!=typeof t)throw"template:children Template.parent() is given an invalid selector type.";r=e.call(this,Number.MAX_VALUE,n,t)}return r}return t}()},"template-instance-get.js":function(){a.TemplateInstance.prototype.get=function(){function e(e){for(var t=this;t;){if(e in t)return t[e];t=t.parent(1,!0)}}return e}()},"template-instance-set.js":function(){a.TemplateInstance.prototype.set=function(){function e(e,t){for(var n=this;n;){if(e in n){var r=n[e];return Package["reactive-var"]&&r instanceof Package["reactive-var"].ReactiveVar?n[e].set(t):n[e]=t,r}n=n.parent(1,!0)}}return e}()},"template-parent-data-function.js":function(){var e=a._parentData;a._parentData=function(t,n){if("function"!=typeof t)return e(t,n);for(var r=a.getView("with"),o=function(){return t(r.dataVar.get())};r&&!s.nonreactive(o);)r=a.getView(r,"with");return r?r.dataVar.get():null},r.parentData=a._parentData}}}}}},{extensions:[".js",".json",".html"]});b("./node_modules/meteor/aldeed:template-extension/lib/hooks.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-for-each.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-hooks.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-global-hooks.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-for-each-instance.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-inherits-events-from.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-inherits-helpers-from.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-inherits-hooks-from.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-register-helpers.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-replaces.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-clear-event-maps.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-copy-as.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-instance-parent.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-instance-get.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-instance-set.js"),b("./node_modules/meteor/aldeed:template-extension/lib/template-parent-data-function.js"),"undefined"==typeof Package&&(Package={}),Package["aldeed:template-extension"]={}}();

"undefined"==typeof Package&&(Package={}),Package["fortawesome:fontawesome"]={};

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,a;(function(){(function(){(function(e){function n(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function s(e){!1===De.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function r(e,t){var n=!0;return h(function(){return n&&(s(e),n=!1),t.apply(this,arguments)},t)}function i(e,t){mt[e]||(s(t),mt[e]=!0)}function o(e,t){return function(n){return m(e.call(this,n),t)}}function u(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function c(){}function l(e,t){!1!==t&&F(e),f(this,e),this._d=new Date(+e._d)}function d(e){var t=k(e),n=t.year||0,a=t.quarter||0,s=t.month||0,r=t.week||0,i=t.day||0,o=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._milliseconds=+l+1e3*c+6e4*u+36e5*o,this._days=+i+7*r,this._months=+s+3*a+12*n,this._data={},this._locale=De.localeData(),this._bubble()}function h(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return t.hasOwnProperty("toString")&&(e.toString=t.toString),t.hasOwnProperty("valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t){var n,a,s;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),Pe.length>0)for(n in Pe)void 0!==(s=t[a=Pe[n]])&&(e[a]=s);return e}function _(e){return e<0?Math.ceil(e):Math.floor(e)}function m(e,t,n){for(var a=""+Math.abs(e),s=e>=0;a.length<t;)a="0"+a;return(s?n?"+":"":"-")+a}function y(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function p(e,t){var n;return t=L(t,e),e.isBefore(t)?n=y(e,t):((n=y(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n}function D(e,t){return function(n,a){var s,r;return null===a||isNaN(+a)||(i(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),r=n,n=a,a=r),n="string"==typeof n?+n:n,s=De.duration(n,a),g(this,s,e),this}}function g(e,t,n,a){var s=t._milliseconds,r=t._days,i=t._months;a=null==a||a,s&&e._d.setTime(+e._d+s*n),r&&he(e,"Date",de(e,"Date")+r*n),i&&le(e,de(e,"Month")+i*n),a&&De.updateOffset(e,r||i)}function M(e){return"[object Array]"===Object.prototype.toString.call(e)}function w(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function Y(e,t,n){var a=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0,i;for(i=0;i<a;i++)(n&&e[i]!==t[i]||!n&&S(e[i])!==S(t[i]))&&r++;return r+s}function v(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=ut[e]||ct[t]||t}return e}function k(e){var t={},n,a;for(a in e)e.hasOwnProperty(a)&&(n=v(a))&&(t[n]=e[a]);return t}function b(t){var n,a;if(0===t.indexOf("week"))n=7,a="day";else{if(0!==t.indexOf("month"))return;n=12,a="month"}De[t]=function(s,r){var i,o,u=De._locale[t],c=[];if("number"==typeof s&&(r=s,s=e),o=function(e){var t=De().utc().set(a,e);return u.call(De._locale,t,s||"")},null!=r)return o(r);for(i=0;i<n;i++)c.push(o(i));return c}}function S(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function T(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function O(e,t,n){return ie(De([e,11,31+t-n]),t,n).week}function W(e){return G(e)?366:365}function G(e){return e%4==0&&e%100!=0||e%400==0}function F(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[be]<0||e._a[be]>11?be:e._a[Se]<1||e._a[Se]>T(e._a[ke],e._a[be])?Se:e._a[Te]<0||e._a[Te]>23?Te:e._a[Oe]<0||e._a[Oe]>59?Oe:e._a[We]<0||e._a[We]>59?We:e._a[Ge]<0||e._a[Ge]>999?Ge:-1,e._pf._overflowDayOfYear&&(t<ke||t>Se)&&(t=Se),e._pf.overflow=t)}function P(e){return null==e._isValid&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&0===e._pf.charsLeftOver&&0===e._pf.unusedTokens.length)),e._isValid}function U(e){return e?e.toLowerCase().replace("_","-"):e}function C(e){for(var t=0,n,a,s,r;t<e.length;){for(n=(r=U(e[t]).split("-")).length,a=(a=U(e[t+1]))?a.split("-"):null;n>0;){if(s=z(r.slice(0,n).join("-")))return s;if(a&&a.length>=n&&Y(r,a,!0)>=n-1)break;n--}t++}return null}function z(e){var t=null;if(!Fe[e]&&Ue)try{t=De.locale(),require("./locale/"+e),De.locale(t)}catch(e){}return Fe[e]}function L(e,t){return t._isUTC?De(e).zone(t._offset||0):De(e).local()}function I(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function H(e){var t=e.match(Ie),n,a;for(n=0,a=t.length;n<a;n++)_t[t[n]]?t[n]=_t[t[n]]:t[n]=I(t[n]);return function(s){var r="";for(n=0;n<a;n++)r+=t[n]instanceof Function?t[n].call(s,e):t[n];return r}}function A(e,t){return e.isValid()?(t=x(t,e.localeData()),lt[t]||(lt[t]=H(t)),lt[t](e)):e.localeData().invalidDate()}function x(e,t){function n(e){return t.longDateFormat(e)||e}var a=5;for(He.lastIndex=0;a>=0&&He.test(e);)e=e.replace(He,n),He.lastIndex=0,a-=1;return e}function Z(e,t){var n,a=t._strict;switch(e){case"Q":return Qe;case"DDDD":return Be;case"YYYY":case"GGGG":case"gggg":return a?Re:Ze;case"Y":case"G":case"g":return et;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return a?Ke:Ee;case"S":if(a)return Qe;case"SS":if(a)return Xe;case"SSS":if(a)return Be;case"DDD":return xe;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return je;case"a":case"A":return t._locale._meridiemParse;case"X":return $e;case"Z":case"ZZ":return Ve;case"T":return qe;case"SSSS":return Ne;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return a?Xe:Ae;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Ae;case"Do":return Je;default:return n=new RegExp(X(Q(e.replace("\\","")),"i"))}}function E(e){var t=(e=e||"").match(Ve)||[],n=((t[t.length-1]||[])+"").match(rt)||["-",0,0],a=60*n[1]+S(n[2]);return"+"===n[0]?-a:a}function N(e,t,n){var a,s=n._a;switch(e){case"Q":null!=t&&(s[be]=3*(S(t)-1));break;case"M":case"MM":null!=t&&(s[be]=S(t)-1);break;case"MMM":case"MMMM":null!=(a=n._locale.monthsParse(t))?s[be]=a:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(s[Se]=S(t));break;case"Do":null!=t&&(s[Se]=S(parseInt(t,10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=S(t));break;case"YY":s[ke]=De.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":s[ke]=S(t);break;case"a":case"A":n._isPm=n._locale.isPM(t);break;case"H":case"HH":case"h":case"hh":s[Te]=S(t);break;case"m":case"mm":s[Oe]=S(t);break;case"s":case"ss":s[We]=S(t);break;case"S":case"SS":case"SSS":case"SSSS":s[Ge]=S(1e3*("0."+t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=E(t);break;case"dd":case"ddd":case"dddd":null!=(a=n._locale.weekdaysParse(t))?(n._w=n._w||{},n._w.d=a):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=S(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=De.parseTwoDigitYear(t)}}function j(e){var t,a,s,r,i,o,u;null!=(t=e._w).GG||null!=t.W||null!=t.E?(i=1,o=4,a=n(t.GG,e._a[ke],ie(De(),1,4).year),s=n(t.W,1),r=n(t.E,1)):(i=e._locale._week.dow,o=e._locale._week.doy,a=n(t.gg,e._a[ke],ie(De(),i,o).year),s=n(t.w,1),null!=t.d?(r=t.d)<i&&++s:r=null!=t.e?t.e+i:i),u=oe(a,s,r,o,i),e._a[ke]=u.year,e._dayOfYear=u.dayOfYear}function V(e){var t,a,s=[],r,i;if(!e._d){for(r=$(e),e._w&&null==e._a[Se]&&null==e._a[be]&&j(e),e._dayOfYear&&(i=n(e._a[ke],r[ke]),e._dayOfYear>W(i)&&(e._pf._overflowDayOfYear=!0),a=ne(i,0,e._dayOfYear),e._a[be]=a.getUTCMonth(),e._a[Se]=a.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];e._d=(e._useUTC?ne:te).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()+e._tzm)}}function q(e){var t;e._d||(t=k(e._i),e._a=[t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond],V(e))}function $(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function J(e){if(e._f!==De.ISO_8601){e._a=[],e._pf.empty=!0;var t=""+e._i,n,a,s,r,i,o=t.length,u=0;for(s=x(e._f,e._locale).match(Ie)||[],n=0;n<s.length;n++)r=s[n],(a=(t.match(Z(r,e))||[])[0])&&((i=t.substr(0,t.indexOf(a))).length>0&&e._pf.unusedInput.push(i),t=t.slice(t.indexOf(a)+a.length),u+=a.length),_t[r]?(a?e._pf.empty=!1:e._pf.unusedTokens.push(r),N(r,a,e)):e._strict&&!a&&e._pf.unusedTokens.push(r);e._pf.charsLeftOver=o-u,t.length>0&&e._pf.unusedInput.push(t),e._isPm&&e._a[Te]<12&&(e._a[Te]+=12),!1===e._isPm&&12===e._a[Te]&&(e._a[Te]=0),V(e),F(e)}else R(e)}function Q(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,a,s){return t||n||a||s})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function B(e){var t,n,s,r,i;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(r=0;r<e._f.length;r++)i=0,(t=f({},e))._pf=a(),t._f=e._f[r],J(t),P(t)&&(i+=t._pf.charsLeftOver,i+=10*t._pf.unusedTokens.length,t._pf.score=i,(null==s||i<s)&&(s=i,n=t));h(e,n||t)}function R(e){var t,n,a=e._i,s=tt.exec(a);if(s){for(e._pf.iso=!0,t=0,n=at.length;t<n;t++)if(at[t][1].exec(a)){e._f=at[t][0]+(s[6]||" ");break}for(t=0,n=st.length;t<n;t++)if(st[t][1].exec(a)){e._f+=st[t][0];break}a.match(Ve)&&(e._f+="Z"),J(e)}else e._isValid=!1}function K(e){R(e),!1===e._isValid&&(delete e._isValid,De.createFromInputFallback(e))}function ee(t){var n=t._i,a;n===e?t._d=new Date:w(n)?t._d=new Date(+n):null!==(a=Ce.exec(n))?t._d=new Date(+a[1]):"string"==typeof n?K(t):M(n)?(t._a=n.slice(0),V(t)):"object"==typeof n?q(t):"number"==typeof n?t._d=new Date(n):De.createFromInputFallback(t)}function te(e,t,n,a,s,r,i){var o=new Date(e,t,n,a,s,r,i);return e<1970&&o.setFullYear(e),o}function ne(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ae(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function se(e,t,n,a,s){return s.relativeTime(t||1,!!n,e,a)}function re(e,t,n){var a=De.duration(e).abs(),s=Ye(a.as("s")),r=Ye(a.as("m")),i=Ye(a.as("h")),o=Ye(a.as("d")),u=Ye(a.as("M")),c=Ye(a.as("y")),l=s<dt.s&&["s",s]||1===r&&["m"]||r<dt.m&&["mm",r]||1===i&&["h"]||i<dt.h&&["hh",i]||1===o&&["d"]||o<dt.d&&["dd",o]||1===u&&["M"]||u<dt.M&&["MM",u]||1===c&&["y"]||["yy",c];return l[2]=t,l[3]=+e>0,l[4]=n,se.apply({},l)}function ie(e,t,n){var a=n-t,s=n-e.day(),r;return s>a&&(s-=7),s<a-7&&(s+=7),r=De(e).add(s,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function oe(e,t,n,a,s){var r=ne(e,0,1).getUTCDay(),i,o;return r=0===r?7:r,n=null!=n?n:s,i=s-r+(r>a?7:0)-(r<s?7:0),o=7*(t-1)+(n-s)+i+1,{year:o>0?e:e-1,dayOfYear:o>0?o:W(e-1)+o}}function ue(t){var n=t._i,a=t._f;return t._locale=t._locale||De.localeData(t._l),null===n||a===e&&""===n?De.invalid({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),De.isMoment(n)?new l(n,!0):(a?M(a)?B(t):J(t):ee(t),new l(t)))}function ce(e,t){var n,a;if(1===t.length&&M(t[0])&&(t=t[0]),!t.length)return De();for(n=t[0],a=1;a<t.length;++a)t[a][e](n)&&(n=t[a]);return n}function le(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),T(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function de(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function he(e,t,n){return"Month"===t?le(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function fe(e,t){return function(n){return null!=n?(he(this,e,n),De.updateOffset(this,t),this):de(this,e)}}function _e(e){return 400*e/146097}function me(e){return 146097*e/400}function ye(e){De.duration.fn[e]=function(){return this._data[e]}}function pe(e){"undefined"==typeof ender&&(we=Me.moment,Me.moment=e?r("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",De):De)}for(var De,ge="2.8.1",Me=void 0!==t?t:this,we,Ye=Math.round,ve,ke=0,be=1,Se=2,Te=3,Oe=4,We=5,Ge=6,Fe={},Pe=[],Ue="undefined"!=typeof module&&module.exports,Ce=/^\/?Date\((\-?\d+)/i,ze=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Le=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ie=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,He=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Ae=/\d\d?/,xe=/\d{1,3}/,Ze=/\d{1,4}/,Ee=/[+\-]?\d{1,6}/,Ne=/\d+/,je=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ve=/Z|[\+\-]\d\d:?\d\d/gi,qe=/T/i,$e=/[\+\-]?\d+(\.\d{1,3})?/,Je=/\d{1,2}/,Qe=/\d/,Xe=/\d\d/,Be=/\d{3}/,Re=/\d{4}/,Ke=/[+-]?\d{6}/,et=/[+-]?\d+/,tt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nt="YYYY-MM-DDTHH:mm:ssZ",at=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],st=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],rt=/([\+\-]|\d\d)/gi,it="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),ot={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ut={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ct={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},dt={s:45,m:45,h:22,d:26,M:11},ht="DDD w W M D d".split(" "),ft="M D H h m s w W".split(" "),_t={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year();return(e>=0?"+":"-")+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return S(this.milliseconds()/100)},SS:function(){return m(S(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+m(S(e/60),2)+":"+m(S(e)%60,2)},ZZ:function(){var e=-this.zone(),t="+";return e<0&&(e=-e,t="-"),t+m(S(e/60),2)+m(S(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},mt={},yt=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ht.length;)ve=ht.pop(),_t[ve+"o"]=u(_t[ve],ve);for(;ft.length;)ve=ft.pop(),_t[ve+ve]=o(_t[ve],2);for(_t.DDDD=o(_t.DDD,3),h(c.prototype,{set:function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e){var t,n,a;for(this._monthsParse||(this._monthsParse=[]),t=0;t<12;t++)if(this._monthsParse[t]||(n=De.utc([2e3,t]),a="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[t]=new RegExp(a.replace(".",""),"i")),this._monthsParse[t].test(e))return t},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,a;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=De([2e3,1]).day(t),a="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(a.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t){var n=this._calendar[e];return"function"==typeof n?n.apply(t):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,a){var s=this._relativeTime[n];return"function"==typeof s?s(e,t,n,a):s.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",preparse:function(e){return e},postformat:function(e){return e},week:function(e){return ie(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(De=function(t,n,s,r){var i;return"boolean"==typeof s&&(r=s,s=e),i={},i._isAMomentObject=!0,i._i=t,i._f=n,i._l=s,i._strict=r,i._isUTC=!1,i._pf=a(),ue(i)}).suppressDeprecationWarnings=!1,De.createFromInputFallback=r("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i)}),De.min=function(){return ce("isBefore",[].slice.call(arguments,0))},De.max=function(){return ce("isAfter",[].slice.call(arguments,0))},De.utc=function(t,n,s,r){var i;return"boolean"==typeof s&&(r=s,s=e),i={},i._isAMomentObject=!0,i._useUTC=!0,i._isUTC=!0,i._l=s,i._i=t,i._f=n,i._strict=r,i._pf=a(),ue(i).utc()},De.unix=function(e){return De(1e3*e)},De.duration=function(e,t){var n=e,a=null,s,r,i,o;return De.isDuration(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(n={},t?n[t]=e:n.milliseconds=e):(a=ze.exec(e))?(s="-"===a[1]?-1:1,n={y:0,d:S(a[Se])*s,h:S(a[Te])*s,m:S(a[Oe])*s,s:S(a[We])*s,ms:S(a[Ge])*s}):(a=Le.exec(e))?(s="-"===a[1]?-1:1,n={y:(i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*s})(a[2]),M:i(a[3]),d:i(a[4]),h:i(a[5]),m:i(a[6]),s:i(a[7]),w:i(a[8])}):"object"==typeof n&&("from"in n||"to"in n)&&(o=p(De(n.from),De(n.to)),(n={}).ms=o.milliseconds,n.M=o.months),r=new d(n),De.isDuration(e)&&e.hasOwnProperty("_locale")&&(r._locale=e._locale),r},De.version="2.8.1",De.defaultFormat=nt,De.ISO_8601=function(){},De.momentProperties=Pe,De.updateOffset=function(){},De.relativeTimeThreshold=function(t,n){return dt[t]!==e&&(n===e?dt[t]:(dt[t]=n,!0))},De.lang=r("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return De.locale(e,t)}),De.locale=function(e,t){var n;return e&&(n=void 0!==t?De.defineLocale(e,t):De.localeData(e))&&(De.duration._locale=De._locale=n),De._locale._abbr},De.defineLocale=function(e,t){return null!==t?(t.abbr=e,Fe[e]||(Fe[e]=new c),Fe[e].set(t),De.locale(e),Fe[e]):(delete Fe[e],null)},De.langData=r("moment.langData is deprecated. Use moment.localeData instead.",function(e){return De.localeData(e)}),De.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return De._locale;if(!M(e)){if(t=z(e))return t;e=[e]}return C(e)},De.isMoment=function(e){return e instanceof l||null!=e&&e.hasOwnProperty("_isAMomentObject")},De.isDuration=function(e){return e instanceof d},ve=yt.length-1;ve>=0;--ve)b(yt[ve]);De.normalizeUnits=function(e){return v(e)},De.invalid=function(e){var t=De.utc(NaN);return null!=e?h(t._pf,e):t._pf.userInvalidated=!0,t},De.parseZone=function(){return De.apply(null,arguments).parseZone()},De.parseTwoDigitYear=function(e){return S(e)+(S(e)>68?1900:2e3)},h(De.fn=l.prototype,{clone:function(){return De(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=De(this).utc();return 0<e.year()&&e.year()<=9999?A(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):A(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return P(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&Y(this._a,(this._isUTC?De.utc(this._a):De(this._a)).toArray())>0)},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.zone(0,e)},local:function(e){return this._isUTC&&(this.zone(0,e),this._isUTC=!1,e&&this.add(this._d.getTimezoneOffset(),"m")),this},format:function(e){var t=A(this,e||De.defaultFormat);return this.localeData().postformat(t)},add:D(1,"add"),subtract:D(-1,"subtract"),diff:function(e,t,n){var a=L(e,this),s=6e4*(this.zone()-a.zone()),r,i;return"year"===(t=v(t))||"month"===t?(r=432e5*(this.daysInMonth()+a.daysInMonth()),i=12*(this.year()-a.year())+(this.month()-a.month()),i+=(this-De(this).startOf("month")-(a-De(a).startOf("month")))/r,i-=6e4*(this.zone()-De(this).startOf("month").zone()-(a.zone()-De(a).startOf("month").zone()))/r,"year"===t&&(i/=12)):(r=this-a,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-s)/864e5:"week"===t?(r-s)/6048e5:r),n?i:_(i)},from:function(e,t){return De.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(De(),e)},calendar:function(e){var t=L(e||De(),this).startOf("day"),n=this.diff(t,"days",!0),a=n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this))},isLeapYear:function(){return G(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ae(e,this.localeData()),this.add(e-t,"d")):t},month:fe("Month",!0),startOf:function(e){switch(e=v(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(e){return e=v(e),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms")},isAfter:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)>+De(e).startOf(t)},isBefore:function(e,t){return t=void 0!==t?t:"millisecond",+this.clone().startOf(t)<+De(e).startOf(t)},isSame:function(e,t){return t=t||"ms",+this.clone().startOf(t)==+L(e,this).startOf(t)},min:r("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return(e=De.apply(null,arguments))<this?this:e}),max:r("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return(e=De.apply(null,arguments))>this?this:e}),zone:function(e,t){var n=this._offset||0,a;return null==e?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof e&&(e=E(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(a=this._d.getTimezoneOffset()),this._offset=e,this._isUTC=!0,null!=a&&this.subtract(a,"m"),n!==e&&(!t||this._changeInProgress?g(this,De.duration(n-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,De.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(e){return e=e?De(e).zone():0,(this.zone()-e)%60==0},daysInMonth:function(){return T(this.year(),this.month())},dayOfYear:function(e){var t=Ye((De(this).startOf("day")-De(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=ie(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=ie(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=ie(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return O(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return O(this.year(),e.dow,e.doy)},get:function(e){return e=v(e),this[e]()},set:function(e,t){return e=v(e),"function"==typeof this[e]&&this[e](t),this},locale:function(t){return t===e?this._locale._abbr:(this._locale=De.localeData(t),this)},lang:r("moment().lang() is deprecated. Use moment().localeData() instead.",function(t){return t===e?this.localeData():(this._locale=De.localeData(t),this)}),localeData:function(){return this._locale}}),De.fn.millisecond=De.fn.milliseconds=fe("Milliseconds",!1),De.fn.second=De.fn.seconds=fe("Seconds",!1),De.fn.minute=De.fn.minutes=fe("Minutes",!1),De.fn.hour=De.fn.hours=fe("Hours",!0),De.fn.date=fe("Date",!0),De.fn.dates=r("dates accessor is deprecated. Use date instead.",fe("Date",!0)),De.fn.year=fe("FullYear",!0),De.fn.years=r("years accessor is deprecated. Use year instead.",fe("FullYear",!0)),De.fn.days=De.fn.day,De.fn.months=De.fn.month,De.fn.weeks=De.fn.week,De.fn.isoWeeks=De.fn.isoWeek,De.fn.quarters=De.fn.quarter,De.fn.toJSON=De.fn.toISOString,h(De.duration.fn=d.prototype,{_bubble:function(){var e=this._milliseconds,t=this._days,n=this._months,a=this._data,s,r,i,o=0;a.milliseconds=e%1e3,s=_(e/1e3),a.seconds=s%60,r=_(s/60),a.minutes=r%60,i=_(r/60),a.hours=i%24,t+=_(i/24),n+=_((t-=_(me(o=_(_e(t)))))/30),t%=30,o+=_(n/12),n%=12,a.days=t,a.months=n,a.years=o},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return _(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12)},humanize:function(e){var t=re(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=De.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=De.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=v(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=v(e),t=this._days+this._milliseconds/864e5,"month"===e||"year"===e)return n=this._months+12*_e(t),"month"===e?n:n/12;switch(t+=me(this._months/12),e){case"week":return t/7;case"day":return t;case"hour":return 24*t;case"minute":return 24*t*60;case"second":return 24*t*60*60;case"millisecond":return 24*t*60*60*1e3;default:throw new Error("Unknown unit "+e)}},lang:De.fn.lang,locale:De.fn.locale,toIsoString:r("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),a=Math.abs(this.hours()),s=Math.abs(this.minutes()),r=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(a||s||r?"T":"")+(a?a+"H":"")+(s?s+"M":"")+(r?r+"S":""):"P0D"},localeData:function(){return this._locale}});for(ve in ot)ot.hasOwnProperty(ve)&&ye(ve.toLowerCase());De.duration.fn.asMilliseconds=function(){return this.as("ms")},De.duration.fn.asSeconds=function(){return this.as("s")},De.duration.fn.asMinutes=function(){return this.as("m")},De.duration.fn.asHours=function(){return this.as("h")},De.duration.fn.asDays=function(){return this.as("d")},De.duration.fn.asWeeks=function(){return this.as("weeks")},De.duration.fn.asMonths=function(){return this.as("M")},De.duration.fn.asYears=function(){return this.as("y")},De.locale("en",{ordinal:function(e){var t=e%10;return e+(1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),Ue?module.exports=De:"function"==typeof define&&define.amd?(define("moment",function(e,t,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(Me.moment=we),De}),pe(!0)):pe()}).call(this)}).call(this),function(){"undefined"!=typeof Package&&(a=this.moment)}.call(this)}).call(this),"undefined"==typeof Package&&(Package={}),function(e,t){for(var n in t)n in e||(e[n]=t[n])}(Package["mrt:moment"]={},{moment:a})}();

!function(){var e=Package.meteor.Meteor,a=Package.meteor.global,n=Package.meteor.meteorEnv,c=Package.http.HTTP,o=Package.jquery.$,t=Package.jquery.jQuery,r=Package["momentjs:moment"].moment,s=Package.validatejs.validate,i=Package["u2622:persistent-session"].PersistentSession,g=Package["ohif:cornerstone"].cornerstone,m=Package["ohif:cornerstone"].cornerstoneMath,u=Package["ohif:cornerstone"].cornerstoneTools,P=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,k=Package["ohif:cornerstone"].dicomParser,l=Package.modules.meteorInstall,p=Package["babel-runtime"].meteorBabelHelpers,d=Package.promise.Promise,f=Package["ecmascript-runtime-client"].Symbol,h=Package["ecmascript-runtime-client"].Map,j=Package["ecmascript-runtime-client"].Set,b=Package.webapp.WebApp,S=Package.logging.Log,v=Package.deps.Tracker,R=Package.deps.Deps,x=Package.session.Session,T=Package["ddp-client"].DDP,X=Package.mongo.Mongo,_=Package.ui.Blaze,D=Package.ui.UI,M=Package.ui.Handlebars,y=Package.spacebars.Spacebars,I=Package["templating-runtime"].Template,N=Package.check.check,q=Package.check.Match,H=Package.underscore._,L=Package.random.Random,w=Package.ejson.EJSON,A=Package["launch-screen"].LaunchScreen,O=Package.htmljs.HTML,B=l({node_modules:{meteor:{"icr:xnat-roi-namespace":{client:{lib:{"icrXnatRoiSessionNamespace.js":function(e,a,n){n.export({icrXnatRoiSession:function(){return t}});var c=void 0;n.watch(e("meteor/underscore"),{_:function(e){c=e}},0);var o=function(){function e(a){var n=a+".";return{get:function(e){return x.get(n+e)},set:function(e,a){return x.set(n+e,a)},setDefault:function(e,a){return x.setDefault(n+e,a)},equals:function(e,a){return x.equals(n+e,a)},namespace:function(a){return e(n+a)}}}return e}();c.extend(x,{namespace:o});var t=x.namespace("ICR_XNAT_ROI")}}},"main.js":function(e,a,n){n.export({icrXnatRoiSession:function(){return c}});var c=void 0;n.watch(e("./client/lib/icrXnatRoiSessionNamespace.js"),{icrXnatRoiSession:function(e){c=e}},0)}}}}},{extensions:[".js",".json"]});B("./node_modules/meteor/icr:xnat-roi-namespace/client/lib/icrXnatRoiSessionNamespace.js");var E=B("./node_modules/meteor/icr:xnat-roi-namespace/main.js");"undefined"==typeof Package&&(Package={}),Package["icr:xnat-roi-namespace"]=E}();

!function(){var e=Package.meteor.Meteor,t=Package.meteor.global,n=Package.meteor.meteorEnv,o=Package.http.HTTP,i=Package.jquery.$,r=Package.jquery.jQuery,a=Package["momentjs:moment"].moment,s=Package.validatejs.validate,l=Package["u2622:persistent-session"].PersistentSession,c=Package["ohif:cornerstone"].cornerstone,u=Package["ohif:cornerstone"].cornerstoneMath,d=Package["ohif:cornerstone"].cornerstoneTools,f=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,m=Package["ohif:cornerstone"].dicomParser,p=Package["ohif:viewerbase"].dialogPolyfill,h=Package.modules.meteorInstall,g=Package["babel-runtime"].meteorBabelHelpers,v=Package.promise.Promise,I=Package["ecmascript-runtime-client"].Symbol,_=Package["ecmascript-runtime-client"].Map,w=Package["ecmascript-runtime-client"].Set,y=Package.webapp.WebApp,x=Package.logging.Log,b=Package.deps.Tracker,k=Package.deps.Deps,T=Package.session.Session,C=Package["ddp-client"].DDP,D=Package.mongo.Mongo,S=Package.ui.Blaze,R=Package.ui.UI,M=Package.ui.Handlebars,H=Package.spacebars.Spacebars,P=Package["templating-runtime"].Template,U=Package.check.check,A=Package.check.Match,j=Package.underscore._,L=Package.random.Random,E=Package.ejson.EJSON,N=Package["launch-screen"].LaunchScreen,O=Package.htmljs.HTML,B,V,F,q,X,G=h({node_modules:{meteor:{"icr:xnat-roi":{client:{"viewportFunctions.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var i=void 0;n.watch(e("./lib/IO/export.js"),{exportROIs:function(e){i=e}},1);var r=void 0;n.watch(e("./lib/IO/import.js"),{importROIs:function(e){r=e}},2);var a=void 0;n.watch(e("./lib/configuration/toggleFreehandStats.js"),{toggleFreehandStats:function(e){a=e}},3);var s=void 0;n.watch(e("./lib/volumeManagement.js"),{volumeManagement:function(e){s=e}},4);var l=void 0;n.watch(e("meteor/jquery"),{$:function(e){l=e}},5),o.viewerbase.viewportUtils.exportROIs=function(){i()},o.viewerbase.viewportUtils.importROIs=function(){r()},o.viewerbase.viewportUtils.toggleFreehandStats=function(){a()},o.viewerbase.viewportUtils.showHelp=function(){l("#showHelpDialog").get(0).showModal()},o.viewerbase.viewportUtils.volumeManagement=function(){s()}},"test.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/regenerator")),r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var a=void 0;n.watch(e("./lib/IO/closeIODialog.js"),{default:function(e){a=e}},1),r.viewerbase.viewportUtils.testButton=function(){function e(){return i.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}return e}(),null,this)}return e}()},components:{viewer:{ioDialogs:{"template.ioDialogs.js":function(){P.__checkName("ioDialogs"),P.ioDialogs=new P("Template.ioDialogs",function(){var e=this;return[O.getTag("dialog")({id:"exportVolumes",class:"ioDialog noselect",oncontextmenu:"return false"},"\n      ",O.H5("Exporting ROI Collection to archive..."),"\n      ",O.H1(O.I({class:"fa fa-spin fa-circle-o-notch fa-fw"})),"\n  "),"\n\n  ",O.getTag("dialog")({id:"importVolumes",class:"ioDialog noselect",oncontextmenu:"return false"},"\n      ",O.H5({id:"ioNotificationText"},"Importing ROI Collections from archive..."),"\n      ",O.H1({id:"ioProgressText"},O.I({class:"fa fa-spin fa-circle-o-notch fa-fw"})),"\n  "),"\n\n  ",O.getTag("dialog")({id:"ioSetName",class:"ioTextInputDialog noselect",oncontextmenu:"return false"},"\n      ",O.DIV("\n        ",O.H5({class:"ioDescription"},"Enter New ROI Name"),"\n        ",O.A({class:"ioDialogCancel btn btn-sm btn-secondary"},"\n          ",O.I({class:"fa fa-times-circle fa-2x"}),"\n        "),"\n      "),"\n      ",O.DIV({class:"ioTextInputOptions"},"\n          ",O.LABEL({for:"ioTextInput"},"Name"),"\n          ",O.INPUT({name:"ioTextInput",class:"ioTextInput",type:"text",tabindex:"-1",autocomplete:"off",onfocus:"this.select()"}),"\n      "),"\n      ",O.DIV("\n          ",O.A({class:"ioDialogConfirm btn btn-sm btn-primary"},"\n            ",O.I({class:"fa fa fa-check-circle fa-2x"}),"\n          "),"\n      "),"\n  "),"\n\n  ",O.getTag("dialog")({id:"ioMessage",class:"ioMessageDialog noselect",oncontextmenu:"return false"},"\n    ",O.DIV("\n      ",O.H5({class:"ioDescription"},"Title"),"\n      ",O.A({class:"ioDialogCancel btn btn-sm btn-secondary"},"\n        ",O.I({class:"fa fa-times-circle fa-2x"}),"\n      "),"\n    "),"\n\n    ",O.DIV("\n      ",O.P({class:"ioBody"},"Text"),"\n    "),"\n  ")]})},"ioDialogs.js":function(e,t,n){var o=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){o=e}},0),P.ioDialogs.onRendered(function(){var e=P.instance(),t=["exportVolumes","importVolumes","ioSetName","ioMessage"];console.log("ioDialogs onRendered"),t.forEach(function(t){var n=e.$("#"+t);p.registerDialog(n.get(0))})}),P.ioDialogs.helpers({exportROIsText:function(){return console.log("in exportROIsText"),o.get("writePermissions")?"This command will export all new (unlocked) ROIs in this series as an ROI Collection. You will be prompted to give the ROI Collection a name before you may export":"This command is disabled as you do not have the required permissions to write to "+o.get("projectId")+"/"+o.get("experimentLabel")+". If you believe that you should, please contact the project owner."}})}},volumeManagementDialogs:{"template.volumeManagementDialogs.js":function(){P.__checkName("volumeManagementDialogs"),P.volumeManagementDialogs=new P("Template.volumeManagementDialogs",function(){var e=this;return O.getTag("dialog")({id:"volumeManagementDialog",class:"volumeManagementDialog noselect",oncontextmenu:"return false"},"\n      ",O.DIV({class:"volumeManagementHeader"},"\n        ",O.H3("Regions of Interest"),"\n        ",O.A({class:"volumeManagementCancel js-volume-management-cancel btn btn-sm btn-secondary"},"\n          ",O.I({class:"fa fa-times-circle fa-2x"}),"\n        "),"\n      "),"\n\n      ",S._TemplateWith(function(){return{roiCollections:H.call(e.lookup("roiCollections"))}},function(){return H.include(e.lookupTemplate("roiCollectionList"))}),"\n\n      ",O.DIV({class:"volumeManagementFooter"},"\n        ",O.HR(),"\n        ",O.A({class:"volumeManagementNewButton js-volume-management-new btn btn-sm btn-primary"},"\n          ",O.I({class:"fa fa-plus-circle"})," ROI\n        "),"\n        ",O.BR(),"\n      "),"\n\n  ")})},"volumeManagementDialogs.js":function(e,t,n){function o(){i("#volumeManagementDialog").get(0).close(),OHIF.viewerbase.viewportUtils.getActiveViewportElement().focus()}function r(e){var t=l.freehand.getRoiCollectionData()[e];t||(l.freehand.newWorkingRoiCollection(e),t=l.freehand.getRoiCollectionData()[e]);var n=[];return Object.keys(t).forEach(function(e){for(var o=[],i=t[e],r=0;r<i.length;r++)i[r]&&o.push({volumeIndex:r,volumeDataReference:i,roiCollectionName:e});n.push({roiCollectionName:e,roisArray:o,roiCollectionReference:i,showList:new ReactiveVar("default"===e),display:new ReactiveVar(!!i.visible)})}),n}var a=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){a=e}},0);var s=void 0;n.watch(e("../../../lib/IO/freehandNameIO.js"),{createNewVolume:function(e){s=e}},1);var l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){l=e}},2),P.volumeManagementDialogs.onRendered(function(){var e=P.instance().$("#volumeManagementDialog");p.registerDialog(e.get(0))}),P.volumeManagementDialogs.onCreated(function(){P.instance().data.showLocked=new ReactiveVar(!1)}),P.volumeManagementDialogs.helpers({showHideLabel:function(){return P.instance().data.showLocked.get()?"hide":"show"},roiCollections:function(){var e=P.instance();return r(a.get("volumeManagementActiveSeries"))}}),P.volumeManagementDialogs.events({"click .js-volume-management-cancel":function(e){console.log(".js-volume-management-cancel"),o()},"click .js-volume-management-new":function(e){o(),s()}})},roiCollectionList:{"template.roiCollectionList.js":function(){P.__checkName("roiCollectionList"),P.roiCollectionList=new P("Template.roiCollectionList",function(){var e=this;return O.DIV({class:"roiCollectionListBody"},"\n    ",O.TABLE("\n      ",S.Each(function(){return{_sequence:H.call(e.lookup("roiCollections")),_variable:"roiCollection"}},function(){return["\n          ",S._TemplateWith(function(){return H.call(e.lookup("roiCollection"))},function(){return H.include(e.lookupTemplate("volumeList"))}),"\n      "]}),"\n    "),"\n  ")})}},volumeList:{"template.volumeList.js":function(){P.__checkName("volumeList"),P.volumeList=new P("Template.volumeList",function(){var e=this;return S.If(function(){return H.call(e.lookup("notEmpty"))},function(){return["\n\n    ",O.Comment(" volumeList Header "),"\n    ",O.TR({class:"volumeListHeader"},"\n\n      ",S.If(function(){return H.call(e.lookup("isDefault"))},function(){return["\n        ",O.TH(),"\n        ",O.TH({colspan:"3"}," Working ROI Collection"),"\n      "]},function(){return["\n        ",O.TH("\n          ",O.I({class:function(){return[H.mustache(e.lookup("showHideButton"))," btn btn-sm btn-secondary js-show-hide"]}}),"\n        "),"\n        ",O.TH({colspan:"2"},S.View("lookup:..roiCollectionName",function(){return H.mustache(H.dot(e.lookup("."),"roiCollectionName"))})),"\n        ",O.TH("\n          ",O.I({class:function(){return[H.mustache(e.lookup("displayRoiCollectionButton"))," btn btn-sm btn-secondary js-display-roiCollection"]}}),"\n        "),"\n      "]}),"\n    "),"\n\n    ",O.Comment(" volumeList Body "),"\n    ",S.If(function(){return H.call(e.lookup("showBody"))},function(){return["\n      ",S.If(function(){return H.call(e.lookup("isDefault"))},function(){return["\n        ",O.TR("\n          ",O.TH(O.Comment("Blank Cell to allow indent with strong alignment")),"\n          ",O.TH("Name"),"\n          ",O.TH({class:"centeredCell"},"Contours"),"\n          ",O.TH({class:"centeredCell"},"Edit"),"\n        "),"\n        ",S.Each(function(){return{_sequence:H.call(H.dot(e.lookup("."),"roisArray")),_variable:"region"}},function(){return["\n            ",S._TemplateWith(function(){return H.call(e.lookup("region"))},function(){return H.include(e.lookupTemplate("volumeListItem"))}),"\n        "]}),"\n      "]},function(){return["\n        ",O.TR("\n          ",O.TH(O.Comment("Blank Cell to allow indent with strong alignment")),"\n          ",O.TH("Name"),"\n          ",O.TH({class:"centeredCell"},"Contours"),"\n        "),"\n        ",S.Each(function(){return{_sequence:H.call(H.dot(e.lookup("."),"roisArray")),_variable:"region"}},function(){return["\n            ",S._TemplateWith(function(){return H.call(e.lookup("region"))},function(){return H.include(e.lookupTemplate("volumeListItem"))}),"\n        "]}),"\n      "]}),"\n    "]}),"\n\n  "]})})},"volumeList.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var i=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){i=e}},1),P.volumeList.helpers({isDefault:function(){return"default"===P.instance().data.roiCollectionName},notEmpty:function(){return P.instance().data.roisArray.length>0},showHideButton:function(){return P.instance().data.showList.get()?"fa fa-minus-square":"fa fa-plus-square"},displayRoiCollectionButton:function(){return P.instance().data.display.get()?"fa fa-eye":"fa fa-eye-slash"},showBody:function(){return P.instance().data.showList.get()}}),P.volumeList.events({"click .js-show-hide":function(e){console.log(".js-show-hide");var t=P.instance().data.showList;t.set(!t.get())},"click .js-display-roiCollection":function(e){console.log(".js-display-roiCollection");var t=P.instance(),n=t.data.display.get();t.data.roiCollectionReference.visible=!n,t.data.display.set(!n);var r=o.viewerbase.viewportUtils.getActiveViewportElement();i.updateImage(r)}})}},volumeListItem:{"template.volumeListItem.js":function(){P.__checkName("volumeListItem"),P.volumeListItem=new P("Template.volumeListItem",function(){var e=this;return O.TR(O.Raw("\n    <th>\x3c!--Blank Cell to allow indent with strong alignment--\x3e</th>\n    "),O.TH(O.I({class:"fa fa-square",style:function(){return["color:",H.mustache(e.lookup("color"))]}})," ",S.View("lookup:volumeName",function(){return H.mustache(e.lookup("volumeName"))})),"\n    ",O.TH({class:"centeredCell"},S.View("lookup:numPolygons",function(){return H.mustache(e.lookup("numPolygons"))})),"\n    ",S.If(function(){return H.call(e.lookup("isDefault"))},function(){return["\n      ",O.TH({class:"centeredCell "},"\n        ",O.INPUT(O.Attrs({type:"radio",class:"volumeListItemCheck js-switch-button",name:"sync",value:""},function(){return H.attrMustache(e.lookup("checked"))})),"\n      "),"\n    "]}),"\n  ")})},"volumeListItem.js":function(){P.volumeListItem.onRendered(function(){var e=P.instance()}),P.volumeListItem.onCreated(function(){var e=P.instance()}),P.volumeListItem.helpers({isDefault:function(){return"default"===P.instance().data.roiCollectionName},checked:function(){var e=P.instance().data,t=e.volumeDataReference[e.volumeIndex];if(e.volumeDataReference.activeVolumeIndex===e.volumeIndex)return"checked"},color:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].color},volumeName:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].name},numPolygons:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].numPolygons}}),P.volumeListItem.events({"click .js-switch-button":function(e){console.log(".js-switch-button");var t=P.instance().data,n=t.volumeDataReference[t.volumeIndex];t.volumeDataReference.activeVolumeIndex=t.volumeIndex,i("#volumeManagementDialog").get(0).close(),OHIF.viewerbase.viewportUtils.getActiveViewportElement().focus()}})}}},roiImportListDialogs:{"template.roiImportListDialogs.js":function(){P.__checkName("roiImportListDialogs"),P.roiImportListDialogs=new P("Template.roiImportListDialogs",function(){var e=this;return O.getTag("dialog")({id:"roiImportListDialog",class:"roiImportListDialog noselect",oncontextmenu:"return false"},"\n      ",O.DIV({class:"roiImportListHeader"},"\n        ",O.H3("Import ROI Collections"),"\n        ",O.A({class:"roiImportListCancel js-volume-management-cancel btn btn-sm btn-secondary"},"\n          ",O.I({class:"fa fa-times-circle fa-2x"}),"\n        "),"\n      "),"\n\n      ",O.HR(),"\n      ",O.DIV({class:"roiImportListBody"},"\n        ",S.If(function(){return H.call(e.lookup("importListReady"))},function(){return["\n          ",S.If(function(){return H.call(e.lookup("listHasData"))},function(){return["\n            ",O.TABLE("\n              ",O.TR("\n                ",O.TH("Name"),"\n                ",O.TH("Import ",O.INPUT(O.Attrs({class:"js-select-all-check",type:"checkbox",name:"sync",value:""},function(){return H.attrMustache(e.lookup("selectAllChecked"))}))),"\n                ",O.TH("Type"),"\n              "),"\n              ",S.Each(function(){return{_sequence:H.call(e.lookup("roiCollections")),_variable:"roiCollection"}},function(){return["\n                  ",S._TemplateWith(function(){return H.call(e.lookup("roiCollection"))},function(){return H.include(e.lookupTemplate("roiImportListItem"))}),"\n              "]}),"\n            "),"\n          "]},function(){return["\n            ",O.P("No data to import."),"\n          "]}),"\n        "]},function(){return["\n          ",O.H1(O.I({class:"fa fa-spin fa-circle-o-notch fa-fw"})),"\n        "]}),"\n      "),"\n\n      ",O.HR(),"\n\n      ",O.DIV({class:"roiImportListFooter"},"\n        ",O.A({class:"roiImportListConfirm btn btn-sm btn-primary"},"\n          ",O.SVG({stroke:"#fff"},"\n            ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-import")}}),"\n          "),"\n        "),"\n      "),"\n  ")})},"roiImportListDialogs.js":function(e,t,n){var o=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){o=e}},0),P.roiImportListDialogs.onRendered(function(){var e=P.instance(),t="roiImportListDialog",n=e.$("#"+t);e.data.dialog=n,p.registerDialog(n.get(0))}),P.roiImportListDialogs.onCreated(function(){var e=P.instance();e.data.selectAll=new ReactiveVar(!0),e.data.importMask=[]}),P.roiImportListDialogs.helpers({importListReady:function(){return o.get("importListReady")},listHasData:function(){var e=P.instance();return o.get("importList").length>0||(e.data.importMask=[],!1)},selectAllChecked:function(){if(P.instance().data.selectAll.get())return"checked"},roiCollections:function(){var e=P.instance(),t=o.get("importList"),n=[],i=e.data.selectAll.get();if(console.log("importList: "+t),!t)return[];e.data.importMask=[];for(var r=0;r<t.length;r++)n.push({collectionInfo:t[r],importMask:e.data.importMask,index:r,checked:new ReactiveVar(i)}),e.data.importMask[r]=!!i;return console.log("inside roiCollections helper"),console.log(n),n}}),P.roiImportListDialogs.events({"click .js-select-all-check":function(e){var t=P.instance();t.data.selectAll.set(!t.data.selectAll.get())}})},roiImportListItem:{"template.roiImportListItem.js":function(){P.__checkName("roiImportListItem"),P.roiImportListItem=new P("Template.roiImportListItem",function(){var e=this;return O.TR("\n    ",O.TD({class:"leftAlignedCell"},S.View("lookup:name",function(){return H.mustache(e.lookup("name"))})),"\n    ",O.TD(O.INPUT(O.Attrs({class:"roiImportListItemCheck js-roi-check",type:"checkbox",name:"sync",value:""},function(){return H.attrMustache(e.lookup("checked"))}))),"\n    ",O.TD({class:"leftAlignedCell"},S.View("lookup:collectionType",function(){return H.mustache(e.lookup("collectionType"))})),"\n  ")})},"roiImportListItem.js":function(){P.roiImportListItem.onCreated(function(){var e=P.instance()}),P.roiImportListItem.helpers({name:function(){return P.instance().data.collectionInfo.name},label:function(){return P.instance().data.collectionInfo.label},label:function(){return P.instance().data.collectionInfo.label},collectionType:function(){return P.instance().data.collectionInfo.collectionType},checked:function(){if(P.instance().data.checked.get())return"checked"}}),P.roiImportListItem.events({"click .js-roi-check":function(e){console.log(".js-roi-check");var t=P.instance().data,n=t.checked,o=t.index,i=t.importMask;n.set(!n.get()),n.get()?i[o]=!0:i[o]=!1}})}}},roiCollectionBuilderDialogs:{"template.roiCollectionBuilderDialogs.js":function(){P.__checkName("roiCollectionBuilderDialogs"),P.roiCollectionBuilderDialogs=new P("Template.roiCollectionBuilderDialogs",function(){var e=this;return O.getTag("dialog")({id:"roiCollectionBuilderDialog",class:"roiCollectionBuilderDialog noselect",oncontextmenu:"return false"},"\n      ",O.DIV({class:"roiCollectionBuilderHeader"},"\n        ",O.H3("Export ROI Collection"),"\n        ",O.A({class:"roiCollectionBuilderCancel js-volume-management-cancel btn btn-sm btn-secondary"},"\n          ",O.I({class:"fa fa-times-circle fa-2x"}),"\n        "),"\n      "),"\n\n      ",O.HR(),"\n\n      ",O.DIV({class:"roiCollectionBuilderListBody"},"\n        ",O.TABLE("\n        ",O.TR("\n          ",O.TH({nowrap:""},"Name"),"\n          ",O.TH({class:"centeredCell"},"Export ",O.INPUT(O.Attrs({class:"js-select-all-check",type:"checkbox",name:"sync",value:""},function(){return H.attrMustache(e.lookup("selectAllChecked"))}))),"\n          ",O.TH({class:"centeredCell"},"Contours"),"\n        "),"\n        ",S.Each(function(){return{_sequence:H.call(e.lookup("regions")),_variable:"region"}},function(){return["\n            ",S._TemplateWith(function(){return H.call(e.lookup("region"))},function(){return H.include(e.lookupTemplate("roiCollectionBuilderListItem"))}),"\n        "]}),"\n        "),"\n      "),"\n\n      ",O.HR(),"\n\n      ",O.DIV({class:"roiCollectionBuilderFooter"},"\n        ",O.DIV({class:"roiCollectionBuilderTextInputOptions"},"\n            Name ",O.INPUT({name:"roiCollectionBuilderTextInput",class:"roiCollectionBuilderTextInput",type:"text",value:function(){return H.mustache(e.lookup("roiCollectionName"))},tabindex:"-1",autocomplete:"off",onfocus:"this.select()"}),"\n        "),"\n\n        ",O.DIV({class:"roiCollectionBuilderExport"},"\n          ",O.A({class:"roiCollectionBuilderExportButton btn btn-sm btn-primary"},"\n              ",O.SVG({stroke:"#fff"},"\n                ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-export")}}),"\n              "),"\n              ",O.H5({class:"exportButtonText"}),"\n          "),"\n      "),"\n    "),"\n\n  ")})},"roiCollectionBuilderDialogs.js":function(e,t,n){var o=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){o=e}},0);var i=void 0;n.watch(e("../../../lib/IO/freehandNameIO.js"),{createNewVolume:function(e){i=e}},1),P.roiCollectionBuilderDialogs.onRendered(function(){var e=P.instance(),t="roiCollectionBuilderDialog",n=e.$("#"+t);e.data.dialog=n,p.registerDialog(n.get(0))}),P.roiCollectionBuilderDialogs.onCreated(function(){var e=P.instance();e.data.selectAll=new ReactiveVar(!0),e.data.exportMask=[],e.data.getOrCreateRoiCollectionData=function(t){var n=d.freehand.getRoiCollectionData()[t];n||(d.freehand.getRoiCollectionData()[t]={},d.freehand.getRoiCollectionData()[t].default=[],n=d.freehand.getRoiCollectionData()[t]);for(var o=e.data.selectAll.get(),i=n.default,r=[],a=0;a<i.length;a++)i[a]&&0!==i[a].numPolygons&&(r.push({volumeIndex:a,volumeDataReference:i,exportMask:e.data.exportMask,checked:new ReactiveVar(o)}),e.data.exportMask[a]=!!o);return r}}),P.roiCollectionBuilderDialogs.helpers({roiCollectionName:function(){return o.get("defaultRoiCollectionName")},selectAllChecked:function(){if(P.instance().data.selectAll.get())return"checked"},regions:function(){var e=P.instance(),t=o.get("roiCollectionBuilderActiveSeries");return e.data.exportMask=[],e.data.getOrCreateRoiCollectionData(t)}}),P.roiCollectionBuilderDialogs.events({"click .js-select-all-check":function(e){var t=P.instance();t.data.selectAll.set(!t.data.selectAll.get())}})},roiCollectionBuilderListItem:{"template.roiCollectionBuilderListItem.js":function(){P.__checkName("roiCollectionBuilderListItem"),P.roiCollectionBuilderListItem=new P("Template.roiCollectionBuilderListItem",function(){var e=this;return O.TR("\n    ",O.TH("\n      ",O.I({class:"fa fa-square",style:function(){return["color:",H.mustache(e.lookup("color"))]}})," ",S.View("lookup:volumeName",function(){return H.mustache(e.lookup("volumeName"))}),"\n    "),"\n    ",O.TH({class:"centeredCell"},O.INPUT(O.Attrs({class:"roiCollectionBuilderListItemCheck js-roi-check",type:"checkbox",name:"sync",value:""},function(){return H.attrMustache(e.lookup("checked"))}))),"\n    ",O.TH({class:"centeredCell"},S.View("lookup:numPolygons",function(){return H.mustache(e.lookup("numPolygons"))})),"\n  ")})},"roiCollectionBuilderListItem.js":function(){P.roiCollectionBuilderListItem.onCreated(function(){var e=P.instance()}),P.roiCollectionBuilderListItem.helpers({color:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].color},volumeName:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].name},numPolygons:function(){var e=P.instance().data;return e.volumeDataReference[e.volumeIndex].numPolygons},checked:function(){if(P.instance().data.checked.get())return"checked"}}),P.roiCollectionBuilderListItem.events({"click .js-roi-check":function(e){console.log(".js-roi-check");var t=P.instance().data,n=t.checked,o=t.volumeIndex,i=t.exportMask;n.set(!n.get()),n.get()?i[o]=!0:i[o]=!1}})}}},helpDialogs:{"template.helpDialogs.js":function(){P.__checkName("helpDialogs"),P.helpDialogs=new P("Template.helpDialogs",function(){var e=this;return O.getTag("dialog")({id:"showHelpDialog",class:"helpDialog noselect",oncontextmenu:"return false"},"\n\n      ",O.DIV({class:"helpHeader"},"\n        ",O.DIV({class:"helpNavBar"},"\n          ",O.A({class:"helpButton js-help-roi btn btn-sm btn-primary"},"\n              ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"ROI")}},"\n                ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-menu")}}),"\n              "),"\n          "),"\n          ",O.A({class:"helpButton js-help-file btn btn-sm btn-primary"},"\n              ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"File")}},"\n                ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-logo")}}),"\n              "),"\n          "),"\n        "),"\n\n        ",O.DIV({class:"helpTitle"},"\n          ",O.H3(S.View("lookup:title",function(){return H.mustache(e.lookup("title"))})),"\n        "),"\n\n        ",O.A({class:"helpDialogCancel js-help-cancel btn btn-sm btn-secondary"},"\n          ",O.I({class:"fa fa-times-circle fa-2x"}),"\n        "),"\n      "),"\n\n      ",O.BR(),"\n\n      ",O.DIV({class:"helpBody"},"\n        ",S.If(function(){return H.dataMustache(e.lookup("showHelp"),"ROI")},function(){return["\n          ",H.include(e.lookupTemplate("freehandHelpMenu")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showHelp"),"File")},function(){return["\n          ",H.include(e.lookupTemplate("ioHelpMenu")),"\n        "]})}),"\n      "),"\n\n  ")})},"helpDialogs.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var i=void 0;n.watch(e("meteor/jquery"),{$:function(e){i=e}},1),P.helpDialogs.onRendered(function(){var e=P.instance().$("#showHelpDialog");p.registerDialog(e.get(0))}),P.helpDialogs.onCreated(function(){P.instance().data.showHelp=new ReactiveVar("ROI")}),P.helpDialogs.helpers({absoluteUrl:function(e){return o.utils.absoluteUrl(e)},showHelp:function(e){var t=P.instance().data.showHelp.get();return!!t&&e===t},pressed:function(e){return P.instance().data.showHelp.get()===e?"pressed":"depressed"},title:function(){var e=P.instance().data.showHelp.get();return e||"title"}}),P.helpDialogs.events({"click .js-help-roi":function(e){console.log(".js-help-roi"),this.showHelp.set("ROI")},"click .js-help-file":function(e){console.log(".js-help-file"),this.showHelp.set("File")},"click .js-help-cancel":function(e){console.log("click .js-help-cancel"),i("#showHelpDialog").get(0).close()}})},freehandHelpMenu:{"template.freehandHelpMenu.js":function(){P.__checkName("freehandHelpMenu"),P.freehandHelpMenu=new P("Template.freehandHelpMenu",function(){var e=this;return O.DIV({id:"freehandHelp"},"\n      ",O.DIV({class:"subHelpHeader"},"\n        ",O.DIV({class:"subHelpNavBar"},"\n          ",O.A({class:"subHelpButton js-help-draw btn btn-sm btn-primary"},"\n              ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"Draw")}},"\n                ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-draw")}}),"\n              "),"\n          "),"\n          ",O.A({class:"subHelpButton js-help-sculpt btn btn-sm btn-primary"},"\n            ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"Sculpt")}},"\n              ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-sculpt")}}),"\n            "),"\n          "),"\n          ",O.A({class:"subHelpButton js-help-volumes btn btn-sm btn-primary"},"\n            ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"Volumes")}},"\n              ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-switch-volume")}}),"\n            "),"\n          "),"\n          ",O.A({class:"subHelpButton js-help-toggle-stats btn btn-sm btn-primary"},"\n            ",O.I({id:"fontAwesomeIcon",class:function(){return[H.mustache(e.lookup("pressed"),"Toggle Stats")," fa fa-commenting fa-2x"]}}),"\n          "),"\n        "),"\n\n        ",O.DIV({class:"subHelpTitle"},"\n          ",O.H3(S.View("lookup:freehandTitle",function(){return H.mustache(e.lookup("freehandTitle"))})),"\n        "),"\n      "),"\n\n      ",O.DIV({class:"subHelpBody"},"\n        ",S.If(function(){return H.dataMustache(e.lookup("showFreehandHelp"),"Draw")},function(){return["\n          ",H.include(e.lookupTemplate("freehandHelpDraw")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showFreehandHelp"),"Sculpt")},function(){return["\n          ",H.include(e.lookupTemplate("freehandHelpSculpt")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showFreehandHelp"),"Volumes")},function(){return["\n          ",H.include(e.lookupTemplate("freehandHelpVolumes")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showFreehandHelp"),"Toggle Stats")},function(){return["\n          ",H.include(e.lookupTemplate("freehandHelpToggleStats")),"\n        "]})})})}),"\n      "),"\n\n  ")})},"freehandHelpMenu.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),P.freehandHelpMenu.onCreated(function(){P.instance().data.showFreehandHelp=new ReactiveVar("Draw")}),P.freehandHelpMenu.helpers({absoluteUrl:function(e){return o.utils.absoluteUrl(e)},showFreehandHelp:function(e){var t=P.instance().data.showFreehandHelp.get();return!!t&&e===t},pressed:function(e){return P.instance().data.showFreehandHelp.get()===e?"pressed":"depressed"},freehandTitle:function(){var e=P.instance().data.showFreehandHelp.get();return e||"title"}}),P.freehandHelpMenu.events({"click .js-help-draw":function(e){this.showFreehandHelp.set("Draw")},"click .js-help-sculpt":function(e){this.showFreehandHelp.set("Sculpt")},"click .js-help-volumes":function(e){this.showFreehandHelp.set("Volumes")},"click .js-help-toggle-stats":function(e){this.showFreehandHelp.set("Toggle Stats")}})},divs:{"template.freehandHelpDraw.js":function(){P.__checkName("freehandHelpDraw"),P.freehandHelpDraw=new P("Template.freehandHelpDraw",function(){var e=this;return O.Raw("<div>\n    <p>The ROI Draw tool is used to create and edit contours of an ROI.</p>\n    <h5>Polygon mode</h5>\n    <ul>\n      <li>Click to draw a node.</li>\n      <li>Keep clicking to draw the contour point by point.</li>\n      <li>Complete the contour by clicking on the origin node without crossing any lines.</li>\n    </ul>\n    <h5>Pencil Mode</h5>\n    <ul>\n      <li>Shift-click to start drawing.</li>\n      <li>Move the mouse to draw the contour.</li>\n      <li>Complete the contour by clicking on the origin node without crossing any lines.</li>\n    </ul>\n    <h5>Edit</h5>\n    <ul>\n      <li>Ctrl-click on a handle to delete it.</li>\n      <li>Ctrl-click on a line to insert a new handle.</li>\n      <li>Drag a handle to move it.</li>\n    </ul>\n  </div>")})},"template.freehandHelpSculpt.js":function(){P.__checkName("freehandHelpSculpt"),P.freehandHelpSculpt=new P("Template.freehandHelpSculpt",function(){var e=this;return O.Raw("<div>\n    <p>This tool is used to sculpt contours drawn with the freehand tool.</p>\n    <h5>Select ROI</h5>\n    <ul>\n      <li>Ctrl-click near a contour to select it for editing.</li>\n      <li>The region will become highlighted to show that it has been selected.</li>\n    </ul>\n    <h5>Edit ROI</h5>\n    <ul>\n      <li>$Hold down left click near the selected tool to begin editing.</li>\n      <ul>\n        <li>$The closer to the contour the mouse is, the smaller the tool will be.</li>\n        <li>$The tool can push from both inside and outside the contour.</li>\n      </ul>\n      <li>With the mouse held down, drag the tool to push the ROI.</li>\n      <ul>\n        <li>New points will be created and deleted as needed.</li>\n      </ul>\n      <li>Release the mouse to complete the edit.</li>\n      <li>You may find you wish to make rough edits with a large tool, before making fine adjustments with a finer tool.</li>\n    </ul>\n  </div>")})},"template.freehandHelpToggleStats.js":function(){P.__checkName("freehandHelpToggleStats"),P.freehandHelpToggleStats=new P("Template.freehandHelpToggleStats",function(){var e=this;return O.Raw("<div>\n    <p>\n      This button toggles the display of roi statistics on the screen,\n      disabled by default.\n    </p>\n    <p>Enabled</p>\n    <ul>\n      <li>The stats for each ROI will be displayed on the screen.</li>\n      <li>The stats windows can be moved by dragging them with the mouse.</li>\n      <li>The stats windows will be present in exported snapshots.</li>\n    </ul>\n    <p>Disabled</p>\n    <ul>\n      <li>The stats can still be viewed by hovering over an ROI.</li>\n      <li>\n        If the stats window has been moved, the stats window will\n        display at that location.\n      </li>\n    </ul>\n  </div>")})},"template.freehandHelpVolumes.js":function(){P.__checkName("freehandHelpVolumes"),P.freehandHelpVolumes=new P("Template.freehandHelpVolumes",function(){var e=this;return O.Raw('<div>\n    <p>\n      A "Region of Interest" (ROI) is defined as a collection of contours\n      that make up a continuous volume. The ROI Management interface accessed\n      through the ROI menu contains a list of the currently active ROIs, and\n      allows for the creation of new ROIs. Clicking on an ROI in the list will\n      allow activate that ROI for drawing.\n    </p>\n    <p>\n      To avoid potential duplication, imported and exported ROIs are locked for\n      editing. These can still be viewed in the ROI manager by toggling\n      "view locked ROIs".\n    </p>\n    <br>\n    <p>\n      Whilst using the Draw tool, the following shortcuts are also available:\n    </p>\n    <ul>\n      <li>Clicking N will create a new volume and activate it.</li>\n      <li>\n        Alt-click (option-click or cmd-click on mac) a contour to select it as\n        the active ROI for drawing.\n      </li>\n      <li>Double-click a contour to change the name of an ROI.</li>\n    </ul>\n  </div>')})}}},ioHelpMenu:{"template.ioHelpMenu.js":function(){P.__checkName("ioHelpMenu"),P.ioHelpMenu=new P("Template.ioHelpMenu",function(){var e=this;return O.DIV({id:"ioHelp"},"\n      ",O.DIV({class:"subHelpHeader"},"\n        ",O.DIV({class:"subHelpNavBar"},"\n          ",O.A({class:"ioHelpButton js-help-export btn btn-sm btn-primary"},"\n              ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"Export ROIs")}},"\n                ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-export")}}),"\n              "),"\n          "),"\n          ",O.A({class:"subHelpButton js-help-import btn btn-sm btn-primary"},"\n            ",O.SVG({class:function(){return H.mustache(e.lookup("pressed"),"Import ROIs")}},"\n              ",O.USE({"xlink:href":function(){return H.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-import")}}),"\n            "),"\n          "),"\n          ",O.A({class:"subHelpButton js-help-snapshot btn btn-sm btn-primary"},"\n            ",O.I({id:"fontAwesomeIcon",class:function(){return[H.mustache(e.lookup("pressed"),"Export Snapshot")," fa fa fa-camera fa-2x"]}}),"\n          "),"\n        "),"\n\n        ",O.DIV({class:"subHelpTitle"},"\n          ",O.H3(S.View("lookup:ioTitle",function(){return H.mustache(e.lookup("ioTitle"))})),"\n        "),"\n      "),"\n\n      ",O.DIV({class:"subHelpBody"},"\n        ",S.If(function(){return H.dataMustache(e.lookup("showIoHelp"),"Export ROIs")},function(){return["\n          ",H.include(e.lookupTemplate("ioHelpExport")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showIoHelp"),"Import ROIs")},function(){return["\n          ",H.include(e.lookupTemplate("ioHelpImport")),"\n        "]},function(){return S.If(function(){return H.dataMustache(e.lookup("showIoHelp"),"Export Snapshot")},function(){return["\n          ",H.include(e.lookupTemplate("ioHelpSnapshot")),"\n        "]})})}),"\n      "),"\n  ")})},"ioHelpMenu.js":function(e,t,n){var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0),P.ioHelpMenu.onCreated(function(){P.instance().data.showIoHelp=new ReactiveVar("Import ROIs")}),P.ioHelpMenu.helpers({absoluteUrl:function(e){return o.utils.absoluteUrl(e)},showIoHelp:function(e){var t=P.instance().data.showIoHelp.get();return!!t&&e===t},pressed:function(e){return P.instance().data.showIoHelp.get()===e?"pressed":"depressed"},ioTitle:function(){var e=P.instance().data.showIoHelp.get();return console.log(e),e||"title"}}),P.ioHelpMenu.events({"click .js-help-export":function(e){this.showIoHelp.set("Export ROIs")},"click .js-help-import":function(e){this.showIoHelp.set("Import ROIs")},"click .js-help-snapshot":function(e){this.showIoHelp.set("Export Snapshot")}})},divs:{"template.ioHelpExport.js":function(){P.__checkName("ioHelpExport"),P.ioHelpExport=new P("Template.ioHelpExport",function(){var e=this;return O.DIV("\n    ",S.If(function(){return H.call(e.lookup("canWrite"))},function(){return["\n      ",O.P("\n        This command will allow you to select a set of new ROIs drawn on this\n        scan to export to XNAT as a new ROI Collection.\n      "),"\n      ",O.UL("\n        ",O.LI("Tick which ROIs you wish to export as a collection."),"\n        ",O.LI("Give the ROI Collection an appropriate descriptive name."),"\n        ",O.LI("Click the large XNAT button to export the collection to XNAT"),"\n      "),"\n    "]},function(){return["\n      ",O.P("\n        This command is disabled as you do not have the required permissions to\n        write to ",S.View("lookup:projectId",function(){return H.mustache(e.lookup("projectId"))}),"/",S.View("lookup:experimentLabel",function(){return H.mustache(e.lookup("experimentLabel"))}),". If you believe that you\n        should, please contact the project owner.\n      "),"\n    "]}),"\n    ",O.P(S.View("lookup:exportROIsText",function(){return H.mustache(e.lookup("exportROIsText"))})),"\n  ")})},"ioHelpExport.js":function(e,t,n){var o=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){o=e}},0),P.ioHelpExport.helpers({canWrite:function(){return!!o.get("writePermissions")},projectId:function(){return o.get("projectId")},experimentLabel:function(){return o.get("experimentLabel")}})},"template.ioHelpImport.js":function(){P.__checkName("ioHelpImport"),P.ioHelpImport=new P("Template.ioHelpImport",function(){var e=this;return O.Raw("<div>\n    <p>\n      This command will fetch all ROIs from the XNAT session that reference\n      the active scan and import them for viewing.\n    </p>\n  </div>")})},"template.ioHelpSnapshot.js":function(){P.__checkName("ioHelpSnapshot"),P.ioHelpSnapshot=new P("Template.ioHelpSnapshot",function(){var e=this;return O.Raw("<div>\n    <p>\n      This command will allow you download a snapshot of the current slice\n      along with all annotations.\n    </p>\n  </div>")})}}}}}},"index.js":function(e,t,n){var o=void 0;n.watch(e("../namespace"),{RoiStateManagement:function(e){o=e}},0);var i=void 0,r=void 0;n.watch(e("./lib/IO/freehandNameIO.js"),{createNewVolume:function(e){i=e},setVolumeName:function(e){r=e}},1);var a=void 0;n.watch(e("./lib/classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){a=e}},2);var s=void 0;n.watch(e("./lib/IO/checkAndSetPermissions.js"),{checkAndSetPermissions:function(e){s=e}},3),o.createNewVolume=i,o.setVolumeName=r,o.SeriesInfoProvider=a,o.checkAndSetPermissions=s},lib:{"volumeManagement.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t,n,o,r,s,d;return a.default.async(function(){function a(a){for(;;)switch(a.prev=a.next){case 0:d=function(){function e(){r(),c()}return e}(),s=function(){function e(e){r(),volumeData.activeVolumeIndex=e}return e}(),r=function(){function e(){n.get(0).close(),OHIF.viewerbase.viewportUtils.getActiveViewportElement().focus()}return e}(),e=l.getActiveSeriesInstanceUid(),u.set("volumeManagementActiveSeries",""),u.set("volumeManagementActiveSeries",e),t=!1,n=i("#volumeManagementDialog"),o=n.find(".volumeManagementCancel"),n.off("keydown"),n.on("keydown",function(e){13===e.which?d():27===e.which&&r()}),n.get(0).showModal();case 12:case"end":return a.stop()}}return a}(),null,this)}var a=o(e("babel-runtime/regenerator"));n.export({volumeManagement:function(){return r}});var s=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){s=e}},0);var l=void 0;n.watch(e("./classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){l=e}},1);var c=void 0;n.watch(e("./IO/freehandNameIO.js"),{createNewVolume:function(e){c=e}},2);var u=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){u=e}},3)},IO:{"checkAndSetPermissions.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function i(){var e,t;return a.default.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return e=T.get("rootUrl")+"/xapi/roi/projects/"+s.get("projectId")+"/permissions/RoiCollection",n.next=3,a.default.awrap(r(e).catch(function(e){return console.log(e)}));case 3:(t=n.sent).create?(console.log("ROI Collection write permissions for this project? True."),s.set("writePermissions",!0)):(console.log("ROI Collection write permissions for this project? False."),s.set("writePermissions",!1));case 5:case"end":return n.stop()}}return n}(),null,this)}function r(e){return new v(function(t,n){var o=new XMLHttpRequest;o.onload=function(){200===o.status?t(o.response):n(o.response)},o.onerror=function(){n(o.responseText)},o.open("GET",e),o.responseType="json",o.send()})}var a=o(e("babel-runtime/regenerator"));n.export({checkAndSetPermissions:function(){return i}});var s=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){s=e}},0)},"closeIODialog.js":function(e,t,n){n.exportDefault(function(e){e.get(0).close(),OHIF.viewerbase.viewportUtils.getActiveViewportElement().focus()})},"export.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function r(){return p.default.async(function(){function e(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==T.get("writePermissions")){e.next=3;break}return a(),e.abrupt("return");case 3:d();case 4:case"end":return e.stop()}}return e}(),null,this)}function a(){var e,t,n,o,r,a,l,c,d,m,h,g;return p.default.async(function(){function I(I){for(;;)switch(I.prev=I.next){case 0:if(e=b.getActiveSeriesInfo(),t=new w(e.seriesInstanceUid),n=v.generateDateTime(),o=v.generateLabel(n),!1!==t.hasVolumesToExtract()){I.next=7;break}return f(),I.abrupt("return");case 7:return T.set("defaultRoiCollectionName",o),r=i("#roiCollectionBuilderDialog"),a=void 0,l=void 0,I.prev=11,I.next=14,p.default.awrap(x(r));case 14:c=I.sent,a=c.roiCollectionName,l=c.exportMask,k(r),I.next=24;break;case 20:return I.prev=20,I.t0=I.catch(11),k(r),I.abrupt("return");case 24:return(d=i("#exportVolumes")).get(0).showModal(),m=t.extractVolumes(l),(h=new v(a,o,n)).writeImageAnnotationCollection(m,e),g=new y(h),I.next=32,p.default.awrap(g.exportToXNAT().then(function(t){console.log("PUT successful."),s(l,e.seriesInstanceUid,a),k(d)}).catch(function(e){k(d),u()}));case 32:case"end":return I.stop()}}return I}(),null,this,[[11,20]])}function s(e,t,n){var o=g.freehand,i=o.getRoiCollectionData()[t],r=i.default;e[r.activeVolumeIndex]&&(r.activeVolumeIndex=null);for(var a=[],s=0;s<e.length;s++)if(e[s]){var u=i.default[s],d=o.createNewVolumeAndGetIndex(t,u.name,!1,u.uuid,n);a[s]=d,i[n][d].color=u.color,i[n][d].numPolygons=u.numPolygons}var f=i[n],m=C.saveToolState();Object.keys(m).forEach(function(o){l(o)===t&&c({tool:m[o].freehand.data,elementId:o,exportMask:e,newIndicies:a,newRoiCollection:f,roiCollectionName:n,seriesInstanceUid:t})});for(var p=0;p<e.length;p++)e[p]&&(r[p]=void 0)}function l(e){return h.viewer.metadataProvider.getMetadata(e).series.seriesInstanceUid}function c(e){for(var t=e.tool,n=e.elementId,o=e.exportMask,i=e.newIndicies,r=e.newRoiCollection,a=e.roiCollectionName,s=e.seriesInstanceUid,l=0;l<t.length;l++){var c=t[l],u=c.volumeIndex;if("default"===c.referencedRoiCollection&&o[u]){console.log(c),console.log(r);var d=i[u];c.imageAnnotationData=r[d],c.volumeIndex=d,c.referencedRoiCollection=a}}}function u(){m("Export Failed","Export of ROIs to "+T.get("projectId")+"/"+T.get("experimentLabel")+"failed. This may be due a bad internet connection. The ROIs have not been locked, if you wantto try again. If you have a good connection to XNAT and this problem persists, please contactyour XNAT administrator.")}function d(){m("Insufficient Permissions","You do not have the required permissions to write to "+T.get("projectId")+"/"+T.get("experimentLabel")+". If you believe that you should, please contact the project owner.")}function f(){m("Nothing to Export","There are no unlocked ROIs to export. Please refer to the ROI/Help menu for more information.")}function m(e,t){var n=i("#ioMessage"),o=n.find(".ioDialogCancel"),r=n.find(".ioDescription"),a=n.find(".ioBody");o.off("click"),o.on("click",function(){k(n)}),n.off("keydown"),n.on("keydown",function(e){(e.which=27)&&k(n)}),r.text(e),a.text(t),n.get(0).showModal()}var p=o(e("babel-runtime/regenerator"));n.export({exportROIs:function(){return r}});var h=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){h=e}},0);var g=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){g=e}},1);var v=void 0;n.watch(e("../classes/AIMWriter.js"),{AIMWriter:function(e){v=e}},2);var I=void 0;n.watch(e("../classes/AsyncRoiFetcher.js"),{AsyncRoiFetcher:function(e){I=e}},3);var _=void 0;n.watch(e("../classes/Polygon.js"),{Polygon:function(e){_=e}},4);var w=void 0;n.watch(e("../classes/RoiExtractor.js"),{RoiExtractor:function(e){w=e}},5);var y=void 0;n.watch(e("../classes/AIMExporter.js"),{AIMExporter:function(e){y=e}},6);var x=void 0;n.watch(e("./roiCollectionBuilder.js"),{roiCollectionBuilder:function(e){x=e}},7);var b=void 0;n.watch(e("../classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){b=e}},8);var k=void 0;n.watch(e("./closeIODialog.js"),{default:function(e){k=e}},9);var T=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){T=e}},10);var C=g.globalImageIdSpecificToolStateManager},"freehandNameIO.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}function r(){var e,t,n,o;return l.default.async(function(){function i(i){for(;;)switch(i.prev=i.next){case 0:return e="Unnamed Lesion",i.next=3,l.default.awrap(s(e));case 3:(t=i.sent)&&(n=u.getActiveSeriesInstanceUid(),o=c.freehand.createNewVolumeAndGetIndex(n,t,!0),console.log("making new volume -- name: "+t+", seriesInstanceUid: "+n),console.log("newActiveIndex: "+o));case 5:case"end":return i.stop()}}return i}(),null,this)}function a(e,t){var n,o,i;return l.default.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return n=c.freehand.getRoiCollectionData()[e].default[t],o=void 0,o=n.name?n.name:"Unnamed Lesion",r.next=5,l.default.awrap(s(o));case 5:return(i=r.sent)&&(n.name=i),r.abrupt("return",i);case 8:case"end":return r.stop()}}return r}(),null,this)}function s(e){return new v(function(t){function n(){r.get(0).close();var e=a.val();t(e)}function o(){r.get(0).close(),t(null)}var r=i("#ioSetName"),a=r.find(".ioTextInput"),s=r.find(".ioDialogConfirm"),l=r.find(".ioDialogCancel");a.val(e),a.focus(),r.off("keydown"),r.on("keydown",function(e){13===e.which?n():27===e.which&&o()}),s.off("click"),s.on("click",function(){n()}),l.off("click"),l.on("click",function(){o()}),r.get(0).showModal()})}var l=o(e("babel-runtime/regenerator"));n.export({createNewVolume:function(){return r},setVolumeName:function(){return a}});var c=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){c=e}},0);var u=void 0;n.watch(e("../classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){u=e}},1)},"import.js":function(e,t,n){function o(){var e=r.getActiveSeriesInstanceUid();new i(e).fetchRois()}n.export({importROIs:function(){return o}});var i=void 0;n.watch(e("../classes/AsyncRoiFetcher.js"),{AsyncRoiFetcher:function(e){i=e}},0);var r=void 0;n.watch(e("../classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){r=e}},1)},"roiCollectionBuilder.js":function(e,t,n){function o(e){var t=r.getActiveSeriesInstanceUid();return i.set("roiCollectionBuilderActiveSeries",""),i.set("roiCollectionBuilderActiveSeries",t),new v(function(t,n){function o(){var e=S.getData(document.querySelector("#roiCollectionBuilderDialog")).exportMask,n=s.val();n?e.some(function(e){if(e)return!0})?t({roiCollectionName:n,exportMask:e}):console.log("no ROIs to export"):console.log("no roiCollectionName")}function i(){n()}var r=e.find(".roiCollectionBuilderExportButton"),a=e.find(".roiCollectionBuilderCancel"),s=e.find(".roiCollectionBuilderTextInput");e.off("keydown"),e.on("keydown",function(e){13===e.which?o():27===e.which&&i()}),r.off("click"),r.on("click",function(){o()}),a.off("click"),a.on("click",function(){i()}),e.get(0).showModal()})}n.export({roiCollectionBuilder:function(){return o}});var i=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){i=e}},0);var r=void 0;n.watch(e("../classes/SeriesInfoProvider.js"),{SeriesInfoProvider:function(e){r=e}},1)}},classes:{"AIMExporter.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/helpers/classCallCheck"));n.export({AIMExporter:function(){return l}});var a=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){a=e}},0);var s=e("xml-writer"),l=function(){function e(t){(0,r.default)(this,e),this._aimString=t.toString(),this._projectID=a.get("projectId"),this._subjectID=a.get("subjectId"),this._experimentID=a.get("experimentId"),this._seriesInstanceUID=t.seriesInfo.seriesInstanceUid,this._label=t.label,this._UID=t.imageAnnotationUUID,this._ID=this._generateCollectionId(),this._date=t.date,this._time=t.time,this._name=t.name,this._assessorUrl=T.get("rootUrl")+"/data/archive/projects/"+this._projectID+"/subjects/"+this._subjectID+"/experiments/"+this._experimentID+"/assessors/"+this._ID}return e.prototype.exportToXNAT=function(){function e(){var e,t,n,o,r,a,s,l;return i.default.async(function(){function c(c){for(;;)switch(c.prev=c.next){case 0:return e=this._generateResourceMetadata(),t=window.top.csrfToken,n="XNAT_CSRF="+t,o=!1,r=this._assessorUrl+"?inbody=true&"+n,c.next=7,i.default.awrap(this._PUT_metadata(r,e).catch(function(e){o=!0,console.log(e)}));case 7:if(!o){c.next=9;break}throw Error("PUT failed, check logs above.");case 9:return a=this._assessorUrl+"/resources/AIM?content=EXTERNAL&format=XML&description=AIM+instance+file&name=AIM&"+n,c.next=12,i.default.awrap(this._PUT_createResource(a).catch(function(e){o=!0,console.log(e)}));case 12:if(!o){c.next=14;break}throw Error("PUT failed, check logs above.");case 14:return s=this._assessorUrl+"/resources/AIM/files/"+this._name+".xml?inbody=true&content=EXTERNAL&format=XML&"+n,c.next=17,i.default.awrap(this._PUT_uploadAim(s,this._aimString).catch(function(e){o=!0,console.log(e)}));case 17:if(!o){c.next=19;break}throw Error("PUT failed, check logs above.");case 19:return console.log("wrote AIM"),l=T.get("rootUrl")+"/xapi/roi/projects/"+this._projectID+"/collections/"+this._label+"?type=RTSTRUCT&"+n,console.log("GET URL for RTSTRUCT conversion:"),console.log(l),c.next=25,i.default.awrap(this._GET(l).catch(function(e){o=!0,console.log(e)}));case 25:if(!o){c.next=27;break}throw Error("POST failed for AIM to RTSTUCT conversion, check logs above.");case 27:return console.log("PUT succesful, resolving"),c.abrupt("return");case 29:case"end":return c.stop()}}return c}(),null,this)}return e}(),e.prototype._PUT_metadata=function(){function e(e,t){return this._PUT(e,t)}return e}(),e.prototype._PUT_createResource=function(){function e(e){return this._PUT(e,null)}return e}(),e.prototype._PUT_uploadAim=function(){function e(e,t){return this._PUT(e,t)}return e}(),e.prototype._PUT=function(){function e(e,t){return new v(function(n,o){var i=new XMLHttpRequest;i.onload=function(){console.log("Request returned, status: "+i.status),200===i.status||201===i.status?n():o(i.responseText)},i.onerror=function(){console.log("Request returned, status: "+i.status),o(i.responseText)},i.open("PUT",e),t?(i.setRequestHeader("Content-Type","text/xml"),i.send(t)):i.send()})}return e}(),e.prototype._GET=function(){function e(e){return new v(function(t,n){var o=new XMLHttpRequest;o.onload=function(){console.log("Request returned, status: "+o.status),200===o.status||201===o.status?t():n(o.responseText)},o.onerror=function(){console.log("Request returned, status: "+o.status),n(o.responseText)},o.open("GET",e),o.send()})}return e}(),e.prototype._generateResourceMetadata=function(){function e(){var e=new s(!0);return e.startDocument("1.0","UTF-8",!1),e.startElement("RoiCollection").writeAttribute("xmlns:icr","http://www.icr.ac.uk/icr").writeAttribute("xmlns:prov","http://www.nbirn.net/prov").writeAttribute("xmlns:xnat","http://nrg.wustl.edu/xnat").writeAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance").writeAttribute("id",this._ID).writeAttribute("label",this._label).writeAttribute("project",this._projectID).writeAttribute("version","1"),e.writeElement("date",this._date),e.writeElement("time",this._time),e.writeElement("imageSession_ID",this._experimentID),e.writeElement("UID",this._UID),e.writeElement("collectionType","AIM"),e.writeElement("subjectID",this._subjectID),e.startElement("references"),e.writeElement("seriesUID",this._seriesInstanceUID),e.endElement(),e.writeElement("name",this._name),e.endElement(),e.endDocument(),console.log(e.toString()),e.toString()}return e}(),e.prototype._generateCollectionId=function(){function e(){var e=[Math.random().toString(36).slice(2,10),Math.random().toString(36).slice(2)];return"RoiCollection_"+e[0]+"_"+e[1]}return e}(),e}()},"AIMReader.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck")),r=o(e("babel-runtime/helpers/createClass"));n.export({AIMReader:function(){return c}});var a=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){a=e}},0);var s=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},1);var l=void 0;n.watch(e("./Polygon.js"),{Polygon:function(e){l=e}},2);var c=function(){function e(t,n,o,r){(0,i.default)(this,e),this._doc=t;try{this._checkXML()}catch(e){console.log(e.message)}this._seriesInstanceUidToImport=n,this._polygons=[],this._sopInstancesInSeries=this._getSopInstancesInSeries(),this._roiCollectionName=o,this._roiCollectionLabel=r,this._extractAnnotations(),console.log(this._polygons)}return e.prototype._checkXML=function(){function e(){if(!(this._doc instanceof Document))throw"Input is not of type Document!";if(!this._checkIfAIMv4_0())throw"Input is not an AIMv4_0 ImageAnnotationCollection file!"}return e}(),e.prototype._checkIfAIMv4_0=function(){function e(){var e=this._doc.getElementsByTagName("ImageAnnotationCollection");return 0!==e.length&&"AIMv4_0"===e[0].getAttribute("aimVersion")}return e}(),e.prototype._getSopInstancesInSeries=function(){function e(){var e=[],t=this._doc.getElementsByTagName("imageSeries");if(0===t.length)throw"No image series information in AIM file!";for(var n=0;n<t.length;n++){var o=this._getSeriesInstanceUid(t[n]);console.log("imageSeries: "+n+", seriesInstanceUid: "+o),o===this._seriesInstanceUidToImport&&this._appendSopInstances(e,t[n])}return e}return e}(),e.prototype._getSeriesInstanceUid=function(){function e(e){return e.getElementsByTagName("instanceUid")[0].getAttribute("root")}return e}(),e.prototype._appendSopInstances=function(){function e(e,t){B=t.getElementsByTagName("sopInstanceUid");for(var n=0;n<B.length;n++){var o=B[n].getAttribute("root");e.includes(o)||e.push(o)}}return e}(),e.prototype._extractAnnotations=function(){function e(){for(var e=this._doc.getElementsByTagName("ImageAnnotation"),t=0;t<e.length;t++)this._extractPolygons(e[t])}return e}(),e.prototype._extractPolygons=function(){function e(e){var t=e.children,n=this._createNewVolumeAndGetIndex(t),o=e.getElementsByTagName("MarkupEntity");console.log("Number of Polygons in annotation: "+o.length);for(var i=0;i<o.length;i++)this._addMarkupEntityIfPolygon(o[i],n)}return e}(),e.prototype._addMarkupEntityIfPolygon=function(){function e(e,t){"TwoDimensionPolyline"===e.getAttribute("xsi:type")&&this._addPolygon(e,t)}return e}(),e.prototype._addPolygon=function(){function e(e,t){var n=e.getElementsByTagName("imageReferenceUid")[0].getAttribute("root");if(this._sopInstancesInSeries.includes(n)){for(var o=e.getElementsByTagName("uniqueIdentifier")[0].getAttribute("root"),i=e.getElementsByTagName("referencedFrameNumber")[0].getAttribute("value"),r=e.getElementsByTagName("twoDimensionSpatialCoordinateCollection")[0].children,a=[],s=0;s<r.length-1;s++)a.push({x:Number(r[s].getElementsByTagName("x")[0].getAttribute("value")),y:Number(r[s].getElementsByTagName("y")[0].getAttribute("value"))});V=new l(a,n,this._seriesInstanceUidToImport,i,o,t,this._roiCollectionName),this._polygons.push(V)}else console.log("referencedSopInstance not in active series")}return e}(),e.prototype._createNewVolumeAndGetIndex=function(){function e(e){for(var t=void 0,n=void 0,o=void 0,i=0;i<e.length;i++)"uniqueIdentifier"===e[i].tagName?n=e[i].getAttribute("root"):"name"===e[i].tagName?t=e[i].getAttribute("value"):"comment"===e[i].tagName&&(o=e[i].getAttribute("value"));if(!n)throw Error("Invalid AIM, no imageAnnotation uniqueIdentifier found!");return t||(o?t=o:(console.log('No name or comment for imageAnnotation, using default name "Untitled Lession"'),t="Untitled Lession")),a.freehand.createNewVolumeAndGetIndex(this._seriesInstanceUidToImport,t,!1,n,this._roiCollectionName,this._roiCollectionLabel)}return e}(),e.prototype._isIncluded=function(){function e(e){if("true"===e.getAttribute("root"))return!0;throw"Holes (i.e. includeFlag === false) are currently unsupported!";return!1}return e}(),(0,r.default)(e,[{key:"polygons",get:function(){return this._polygons}}]),e}()},"AIMWriter.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck")),r=o(e("babel-runtime/helpers/createClass")),a=o(e("babel-runtime/helpers/possibleConstructorReturn")),s=o(e("babel-runtime/helpers/inherits"));n.export({AIMWriter:function(){return d}});var l=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){l=e}},0);var c=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){c=e}},1);var u=l.globalImageIdSpecificToolStateManager,d=function(e){function t(n,o,r){(0,i.default)(this,t);var s=(0,a.default)(this,e.call(this,!0));return s._name=n,s._label=o,s._shapeIdentifier=0,s._imageAnnotationNumber=0,s._imageAnnotationUUID="",s._dateTime=r,s}return(0,s.default)(t,e),t.prototype.writeImageAnnotationCollection=function(){function e(e,t){console.log("volumes"),console.log(e),this._seriesInfo=t,this._referencedSopInstanceUids=[],this._startImageAnnotationCollection(),this._addImageAnnotations(e),this._endImageannotationCollection()}return e}(),t.prototype._startImageAnnotationCollection=function(){function e(){this.startDocument("1.0","UTF-8",!1),this.startElement("ImageAnnotationCollection").writeAttribute("xmlns","gme://caCORE.caCORE/4.4/edu.northwestern.radiology.AIM").writeAttribute("xmlns:rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#").writeAttribute("xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance").writeAttribute("aimVersion","AIMv4_0").writeAttribute("xsi:schemaLocation","gme://caCORE.caCORE/4.4/edu.northwestern.radiology.AIM AIM_v4_rv44_XML.xsd"),this._addProperty("uniqueIdentifier","root",this._generateUUID()),this._addDateTime(),this._addProperty("description","value",this._name),this._addUser(),this._addEquipment(),this._addPerson(),this.startElement("imageAnnotations")}return e}(),t.prototype._endImageannotationCollection=function(){function e(){this.endElement("imageAnnotations"),this.endElement("ImageAnnotationCollection")}return e}(),t.prototype._addUser=function(){function e(){var e=window.top.username;this.startElement("user"),this._addProperty("name","value",e),this._addProperty("loginName","value",e),this._addProperty("roleInTrial"),this.endElement()}return e}(),t.prototype._addEquipment=function(){function e(){this.startElement("equipment"),this._addProperty("manufacturerName","value",this._seriesInfo.equipment.manufacturerName),this._addProperty("manufacturerModelName","value",this._seriesInfo.equipment.manufacturerModelName),this._addProperty("softwareVersion","value",this._seriesInfo.equipment.softwareVersion),this.endElement()}return e}(),t.prototype._addPerson=function(){function e(){this.startElement("person"),this._addProperty("name","value",this._seriesInfo.person.name),this._addProperty("id","value",this._seriesInfo.person.id),this._addProperty("birthDate","value",this._seriesInfo.person.birthDate),this._addProperty("sex","value",this._seriesInfo.person.sex),this._addProperty("ethnicGroup","value",this._seriesInfo.person.ethnicGroup),this.endElement()}return e}(),t.prototype._addImageAnnotations=function(){function e(e){for(var t=0;t<e.length;t++)e[t]&&e[t].length>0&&this._addImageAnnotation(e[t],t)}return e}(),t.prototype._addImageAnnotation=function(){function e(e,t){console.log("imageAnnotation: "+t),this._referencedSopInstanceUids=[],this._startImageAnnotation(e,t),this._addMarkupEntityCollection(e,t),this._addImageReferenceEntityCollection(),this._endImageAnnotation()}return e}(),t.prototype._startImageAnnotation=function(){function e(e,t){this.startElement("ImageAnnotation"),this._imageAnnotationUniqueIdentifier(t),this._addMultiProperty("typeCode",[{name:"code",value:"AnyClosedShape"},{name:"codeSystem",value:" "},{name:"codeSystemName",value:" "},{name:"codeSystemVersion",value:" "}]),this._addDateTime();var n=this._imageAnnotationName(t);this._addProperty("name","value",n)}return e}(),t.prototype._endImageAnnotation=function(){function e(){this.endElement("ImageAnnotation")}return e}(),t.prototype._addMarkupEntityCollection=function(){function e(e){this.startElement("markupEntityCollection");for(var t=0;t<e.length;t++)this._addMarkupEntity(e[t]);this.endElement()}return e}(),t.prototype._addMarkupEntity=function(){function e(e){this.startElement("MarkupEntity").writeAttribute("xsi:type","TwoDimensionPolyline"),this._addProperty("uniqueIdentifier","root",""+e.uuid),this._addProperty("shapeIdentifier","value",""+this._shapeIdentifier),this._addProperty("includeFlag","value","true"),this._addProperty("imageReferenceUid","root",e.sopInstanceUid),this._addProperty("referencedFrameNumber","value",e.frameNumber),this._twoDimensionSpatialCoordinateCollection(e.polyHandles,e.sopInstanceUid),this.endElement(),this._shapeIdentifier++,this._addReferencedImage(e.sopInstanceUid)}return e}(),t.prototype._addReferencedImage=function(){function e(e){this._referencedSopInstanceUids.includes(e)||this._referencedSopInstanceUids.push(e)}return e}(),t.prototype._addImageReferenceEntityCollection=function(){function e(){this.startElement("imageReferenceEntityCollection"),this.startElement("ImageReferenceEntity").writeAttribute("xsi:type","DicomImageReferenceEntity"),this._addProperty("uniqueIdentifier","root",""+this._generateUUID()),this._addImageStudy(),this.endElement("ImageReferenceEntity"),this.endElement("imageReferenceEntityCollection")}return e}(),t.prototype._addImageStudy=function(){function e(){this.startElement("imageStudy"),this._addProperty("instanceUid","root",this._seriesInfo.studyInstanceUid),this._addProperty("startDate","value",this._seriesInfo.startDate),this._addProperty("startTime","value",this._seriesInfo.startTime),this._addImageSeries(),this.endElement()}return e}(),t.prototype._addImageSeries=function(){function e(){this.startElement("imageSeries"),this._addProperty("instanceUid","root",this._seriesInfo.seriesInstanceUid),this._addMultiProperty("modality",[{name:"code",value:this._seriesInfo.modality},{name:"codeSystem",value:"1.2.840.10008.2.16.4"},{name:"codeSystemName",value:"DCM"},{name:"codeSystemVersion",value:"01"}]),this._addImageCollection(),this.endElement("imageSeries")}return e}(),t.prototype._addImageCollection=function(){function e(){this.startElement("imageCollection");for(var e=0;e<this._referencedSopInstanceUids.length;e++)this._addImage(this._seriesInfo.sopClassUid,this._referencedSopInstanceUids[e]);this.endElement("")}return e}(),t.prototype._addImage=function(){function e(e,t){this.startElement("Image"),this._addProperty("sopClassUid","root",e),this._addProperty("sopInstanceUid","root",t),this.endElement()}return e}(),t.prototype._addDateTime=function(){function e(){this._addProperty("dateTime","value",this._dateTime)}return e}(),t.prototype._imageAnnotationUniqueIdentifier=function(){function e(e){console.log("volumeIndex: "+e);var t=this._seriesInfo.seriesInstanceUid,n=l.freehand.getRoiCollectionData()[t].default[e].uuid;console.log("uuidString: "+n),this._imageAnnotationUUID=n,this._addProperty("uniqueIdentifier","root",this._imageAnnotationUUID)}return e}(),t.prototype._imageAnnotationName=function(){function e(e){var t=this._seriesInfo.seriesInstanceUid,n=l.freehand.getRoiCollectionData()[t].default[e].name;return console.log("name: "+n),n}return e}(),t.prototype._twoDimensionSpatialCoordinateCollection=function(){function e(e,t){this.startElement("twoDimensionSpatialCoordinateCollection");for(var n=0;n<e.length;n++)this._twoDimensionSpatialCoordinate(e[n],n);this._twoDimensionSpatialCoordinate(e[0],0),this.endElement()}return e}(),t.prototype._twoDimensionSpatialCoordinate=function(){function e(e,t){this.startElement("TwoDimensionSpatialCoordinate"),this._addProperty("coordinateIndex","value",""+t),this._addProperty("x","value",""+e.x),this._addProperty("y","value",""+e.y),this.endElement()}return e}(),t.prototype._addProperty=function(){function e(e,t,n){this.startElement(e).writeAttribute(t,n).endElement()}return e}(),t.prototype._addMultiProperty=function(){function e(e,t){this.startElement(e);for(var n=0;n<t.length;n++)this.writeAttribute(t[n].name,t[n].value);this.endElement()}return e}(),t.prototype._generateUUID=function(){function e(){var e=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"x.x.x.x.x.x.xxxx.xxx.x.x.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}return e}(),t.generateDateTime=function(){function e(){var e=new Date,t={year:e.getFullYear().toString(),month:(e.getMonth()+1).toString(),date:e.getDate().toString(),hours:e.getHours().toString(),minutes:e.getMinutes().toString(),seconds:e.getSeconds().toString()};return Object.keys(t).forEach(function(e){t[""+e].length<2&&(t[""+e]="0"+t[""+e])}),F=t.year+t.month+t.date+t.hours+t.minutes+t.seconds}return e}(),t.generateLabel=function(){function e(e){return"AIM_"+e.slice(0,8)+"_"+e.slice(8,14)}return e}(),(0,r.default)(t,[{key:"imageAnnotationUUID",get:function(){return this._imageAnnotationUUID}},{key:"seriesInfo",get:function(){return this._seriesInfo}},{key:"date",get:function(){var e=this._dateTime;return e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8)}},{key:"time",get:function(){var e=this._dateTime;return e.slice(8,10)+":"+e.slice(10,12)+":"+e.slice(12,14)}},{key:"label",get:function(){return this._label}},{key:"name",get:function(){return this._name}}]),t}(e("xml-writer"))},"AsyncRoiFetcher.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/regenerator")),r=o(e("babel-runtime/helpers/classCallCheck"));n.export({AsyncRoiFetcher:function(){return d}});var a=void 0;n.watch(e("./RoiImporter.js"),{RoiImporter:function(e){a=e}},0);var s=void 0;n.watch(e("../IO/closeIODialog.js"),{default:function(e){s=e}},1);var l=void 0;n.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){l=e}},2);var c=void 0;n.watch(e("meteor/jquery"),{$:function(e){c=e}},3);var u=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){u=e}},4);var d=function(){function e(t){(0,r.default)(this,e),this._seriesInstanceUid=t,this._roiImporter=new a(t),this._numCollectionsParsed=0,this._roiCollectionLabel="",this._dialog=c("#importVolumes"),this._volumeManagementLabels=this._getVolumeManagemenetLabels()}return e.prototype._getVolumeManagemenetLabels=function(){function e(){var e=[],t=u.freehand.getRoiCollectionData()[this._seriesInstanceUid];return t&&Object.keys(t).forEach(function(n){var o=t[n].label;"DEFAULT"!==o&&e.push(o)}),e}return e}(),e.prototype.fetchRois=function(){function e(){var e,t,n,o,r,a,s;return i.default.async(function(){function u(u){for(;;)switch(u.prev=u.next){case 0:return l.set("importListReady",!1),this._roiImportListDialog=c("#roiImportListDialog"),this._roiImportListDialog.get(0).showModal(),e=T.get("rootUrl")+"/data/archive/experiments/"+l.get("experimentId")+"/assessors?format=json",u.next=6,i.default.awrap(this._getJson(e).catch(function(e){return console.log(e)}));case 6:for(t=u.sent,n=t.ResultSet.Result,o=this._filterRoiCollections(n),this._collectionInfoArray=[],this._roiCollectionsToCheck=o.length,0===this._roiCollectionsToCheck&&this._selectAndImportRois(),r=0;r<o.length;r++)a=o[r].ID,s=T.get("rootUrl")+"/data/archive/experiments/"+l.get("experimentId")+"/assessors/"+a+"?format=json",this._addCollectionToListIfCanImport(s,a);case 13:case"end":return u.stop()}}return u}(),null,this)}return e}(),e.prototype._addCollectionToListIfCanImport=function(){function e(e,t){var n,o;return i.default.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i.default.awrap(this._getJson(e).catch(function(e){return console.log(e)}));case 2:n=r.sent,this._collectionEligibleForImport(n)&&(o=this._getCollectionInfo(t,n),this._collectionInfoArray.push(o)),0===--this._roiCollectionsToCheck&&this._selectAndImportRois();case 6:case"end":return r.stop()}}return r}(),null,this)}return e}(),e.prototype._selectAndImportRois=function(){function e(){var e,t,n;return i.default.async(function(){function o(o){for(;;)switch(o.prev=o.next){case 0:return e=void 0,o.prev=1,o.next=4,i.default.awrap(this._awaitInputFromListUI(this._collectionInfoArray));case 4:e=o.sent,s(this._roiImportListDialog),o.next=12;break;case 8:return o.prev=8,o.t0=o.catch(1),s(this._roiImportListDialog),o.abrupt("return");case 12:for(this._numCollectionsToParse=0,t=0;t<e.length;t++)e[t]&&this._numCollectionsToParse++;if(0!==this._numCollectionsToParse){o.next=17;break}return console.log("numCollectionToParse = 0"),o.abrupt("return");case 17:for(this._openProgressDialog(),n=0;n<this._collectionInfoArray.length;n++)e[n]&&this._getFilesFromList(this._collectionInfoArray[n]);case 19:case"end":return o.stop()}}return o}(),null,this,[[1,8]])}return e}(),e.prototype._openProgressDialog=function(){function e(){this._updateProgressDialog(),this._dialog.get(0).showModal()}return e}(),e.prototype._awaitInputFromListUI=function(){function e(e){var t;return i.default.async(function(){function n(n){for(;;)switch(n.prev=n.next){case 0:return l.set("importList",e),l.set("importListReady",!0),t=this._roiImportListDialog,n.abrupt("return",new v(function(e,n){function o(){var t=S.getData(document.querySelector("#roiImportListDialog"));e(t.importMask)}function i(){n()}var r=t.find(".roiImportListConfirm"),a=t.find(".roiImportListCancel");t.off("keydown"),t.on("keydown",function(e){13===e.which?o():27===e.which&&i()}),r.off("click"),r.on("click",function(){o()}),a.off("click"),a.on("click",function(){i()})}));case 4:case"end":return n.stop()}}return n}(),null,this)}return e}(),e.prototype._collectionEligibleForImport=function(){function e(e){var t=e.items[0],n=t.children,o=t.data_fields.label;if(this._volumeManagementLabels.some(function(e){return e===o}))return!1;for(var i=0;i<n.length;i++)if("references/seriesUID"===n[i].field)for(var r=n[i].items,a=0;a<r.length;a++)if(r[a].data_fields.seriesUID===this._seriesInstanceUid)return!0;return!1}return e}(),e.prototype._getCollectionInfo=function(){function e(e,t){var n=t.items[0].data_fields;return{collectionType:n.collectionType,label:n.label,name:n.name,getFilesUrl:T.get("rootUrl")+"/data/archive/experiments/"+l.get("experimentId")+"/assessors/"+e+"/files?format=json"}}return e}(),e.prototype._getFilesFromList=function(){function e(e){var t,n,o,r,a,s;return i.default.async(function(){function l(l){for(;;)switch(l.prev=l.next){case 0:return t=e.getFilesUrl,l.next=3,i.default.awrap(this._getJson(t).catch(function(e){return console.log(e)}));case 3:for(n=l.sent,0===(o=n.ResultSet.Result).length&&this._incrementNumCollectionsParsed(),r=0;r<o.length;r++)(a=o[r].collection)===e.collectionType&&(s=""+T.get("rootUrl")+o[r].URI,this._getAndImportFile(s,e));case 7:case"end":return l.stop()}}return l}(),null,this)}return e}(),e.prototype._getAndImportFile=function(){function e(e,t){var n,o;return i.default.async(function(){function r(r){for(;;)switch(r.prev=r.next){case 0:r.t0=t.collectionType,r.next="AIM"===r.t0?3:"RTSTRUCT"===r.t0?10:15;break;case 3:return this._roiCollectionLabel=t.label,this._updateProgressDialog(),r.next=7,i.default.awrap(this._getXml(e).catch(function(e){return console.log(e)}));case 7:return n=r.sent,this._roiImporter.importAIMfile(n,t.name,t.label),r.abrupt("break",16);case 10:return r.next=12,i.default.awrap(this._getArraybuffer(e).catch(function(e){return console.log(e)}));case 12:return o=r.sent,this._roiImporter.importRTStruct(o,t.name,t.label),r.abrupt("break",16);case 15:console.error("asyncRoiFetcher._getAndImportFile not configured for filetype: "+fileType+".");case 16:this._incrementNumCollectionsParsed();case 17:case"end":return r.stop()}}return r}(),null,this)}return e}(),e.prototype._incrementNumCollectionsParsed=function(){function e(){this._numCollectionsParsed++,this._updateProgressDialog(),this._numCollectionsParsed===this._numCollectionsToParse&&s(this._dialog)}return e}(),e.prototype._filterRoiCollections=function(){function e(e){for(var t=[],n=0;n<e.length;n++)"icr:roiCollectionData"===e[n].xsiType&&t.push(e[n]);return this._numCollectionsToParse=t.length,t}return e}(),e.prototype._getJson=function(){function e(e){return this._GET_file(e,"json")}return e}(),e.prototype._getXml=function(){function e(e){return this._GET_file(e,"xml")}return e}(),e.prototype._getArraybuffer=function(){function e(e){return this._GET_file(e,"arraybuffer")}return e}(),e.prototype._GET_file=function(){function e(e,t){var n=this;return new v(function(o,i){var r=new XMLHttpRequest;r.onload=function(){console.log("Request returned, status: "+r.status),200===r.status?o(r.response):i(r.response)},r.onerror=function(){console.log("Request returned, status: "+r.status),i(r.responseText)},r.open("GET",e),n._setXhrHeaders(r,t),r.send()})}return e}(),e.prototype._setXhrHeaders=function(){function e(e,t){switch(t){case"json":e.responseType="json";break;case"xml":e.responseType="document";break;case"arraybuffer":e.responseType="arraybuffer";break;case null:break;default:console.log("XNATRESTInterface.GET_file not configured for filetype: "+t+".")}}return e}(),e.prototype._updateProgressDialog=function(){function e(){var e="Importing ROI Collection: "+this._roiCollectionLabel+"...",t=this._numCollectionsParsed+"/"+this._numCollectionsToParse+' <i class="fa fa-spin fa-circle-o-notch fa-fw">';document.getElementById("ioNotificationText").innerHTML=e,document.getElementById("ioProgressText").innerHTML=t}return e}(),e}()},"Polygon.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck")),r=o(e("babel-runtime/helpers/createClass"));n.export({Polygon:function(){return l}});var a=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){a=e}},0);var s=a.freehand,l=function(){function e(t,n,o,r,a,s,l){(0,i.default)(this,e),this._volumeIndex=s,this._polyHandles=this._deepCopyHandles(t),this._sopInstanceUid=n,this._seriesInstanceUid=o,this._frameNumber=r,this._contourUUID=a,this._referencedRoiCollection=l}return e.prototype._deepCopyHandles=function(){function e(e){for(var t=[],n=void 0!==e[0].z,o=0;o<e.length;o++)t.push({x:e[o].x,y:e[o].y}),n&&(t[o].z=e[o].z);return t}return e}(),e.prototype.getFreehandToolData=function(){function e(e){var t=this._volumeIndex,n=this._seriesInstanceUid,o=this._referencedRoiCollection,i={uuid:this._contourUUID,seriesInstanceUid:n,volumeIndex:t,imageAnnotationData:s.getRoiCollectionData()[n][o][t],referencedRoiCollection:o,sopInstanceUID:this._sopInstanceUid,visible:!0,active:!1,invalidated:!0,handles:[]};return this._generateHandles(i.handles),i.textBox={active:!1,hasMoved:!1,movesIndependently:!1,drawnIndependently:!0,allowedOutsideImage:!0,hasBoundingBox:!0},i.polyBoundingBox={},i.toBeScaled=e,i}return e}(),e.prototype._generateHandles=function(){function e(e){for(var t=0;t<this._polyHandles.length;t++)q=this._deepCopyOneHandle(t),e.push(q);for(var n=0;n<e.length;n++)n===e.length-1?e[n].lines.push(e[0]):e[n].lines.push(e[n+1])}return e}(),e.prototype._deepCopyOneHandle=function(){function e(e){var t={x:this._polyHandles[e].x,y:this._polyHandles[e].y,lines:[]};return void 0!==this._polyHandles[e].z&&(t.z=this._polyHandles[e].z),t}return e}(),(0,r.default)(e,[{key:"polyHandles",get:function(){return this._polyHandles}},{key:"sopInstanceUid",get:function(){return this._sopInstanceUid}},{key:"uuid",get:function(){return this._contourUUID}},{key:"volumeIndex",get:function(){return this._volumeIndex}},{key:"frameNumber",get:function(){return this._frameNumber}}]),e}()},"RTStructReader.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck")),r=o(e("babel-runtime/helpers/createClass"));n.export({RTStructReader:function(){return u}});var a=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){a=e}},0);var s=void 0;n.watch(e("../classes/Polygon.js"),{Polygon:function(e){s=e}},1);var l=void 0;n.watch(e("meteor/ohif:cornerstone"),{dicomParser:function(e){l=e}},2);var c=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstoneTools:function(e){c=e}},3);var u=function(){function e(t,n,o,r){(0,i.default)(this,e),this._dataSet=this._getdataSet(t),this._isRTStruct(),this._polygons=[],this._seriesInstanceUidToImport=n,this._roiCollectionName=o,this._roiCollectionLabel=r,this._sopInstanceUid=this._dataSet.string(f.SOPInstanceUID),this._structureSetName=this._dataSet.string(f.StructureSetName),this._structureSetLabel=this._dataSet.string(f.StructureSetLabel),this._sopInstancesInSeries=this._getSopInstancesInSeries(),this._sopInstancesInSeries.length>0&&this._extractVolumes()}return e.prototype._getdataSet=function(){function e(e){var t=new Uint8Array(e),n=null;try{n=l.parseDicom(t)}catch(e){console.log(e.message),console.log("File is not a valid DICOM file!")}return n}return e}(),e.prototype._isRTStruct=function(){function e(){var e=this._dataSet.string(f.SOPClassUID);if(e!==d)throw"DICOM file is not an RT-Struct. It has SOPClassUID: "+e}return e}(),e.prototype._getSopInstancesInSeries=function(){function e(){var e=[],t=this._getRTReferenceSeries();if(null!==t)for(var n=t.dataSet.elements[f.ContourImageSequence].items,o=0;o<n.length;o++){var i=n[o].dataSet.string(f.ReferencedSOPInstanceUID);e.push(i)}return e}return e}(),e.prototype._getRTReferenceSeries=function(){function e(){for(var e=this._dataSet.elements[f.ReferencedFrameofReferenceSequence].items,t=0;t<e.length;t++)for(var n=e[t].dataSet.elements[f.RTReferencedStudySequence].items,o=0;o<n.length;o++)for(var i=n[o].dataSet.elements[f.RTReferencedSeriesSequence].items,r=0;r<i.length;r++){var a=i[r];if(a.dataSet.string(f.SeriesInstanceUID)===this._seriesInstanceUidToImport)return a}return null}return e}(),e.prototype._extractVolumes=function(){function e(){for(var e=this._dataSet.elements[f.ROIContourSequence].items,t=0;t<e.length;t++)this._extractOneVolume(e[t].dataSet)}return e}(),e.prototype._extractOneVolume=function(){function e(e){for(var t=e.string(f.ReferencedROINumber),n=this._createNewVolumeAndGetIndex(t),o=e.elements[f.ContourSequence].items,i=0;i<o.length;i++)this._extractOneContour(o[i].dataSet,n,t)}return e}(),e.prototype._createNewVolumeAndGetIndex=function(){function e(e){var t=void 0,n=void 0;return n=this._sopInstanceUid+"."+e,t=this._structureSetName?this._structureSetName+" Lesion "+e:" "+this._structureSetLabel+" Lesion "+e,c.freehand.createNewVolumeAndGetIndex(this._seriesInstanceUidToImport,t,!1,n,this._roiCollectionName,this._roiCollectionLabel)}return e}(),e.prototype._extractOneContour=function(){function e(e,t,n){if("CLOSED_PLANAR"===e.string(f.ContourGeometricType)){var o=e.elements[f.ContourImageSequence].items[0].dataSet,i=o.string(f.ReferencedSOPInstanceUID);if(this._sopInstancesInSeries.includes(i)){var r=o.string(f.ReferencedFrameNumber),a=e.string(f.ContourNumber),l=this._sopInstanceUid+"."+n+"."+a,c=this._extractPoints(e,i),u=new s(c,i,this._seriesInstanceUidToImport,r,l,t,this._roiCollectionName);this._polygons.push(u)}else console.log("referencedSopInstanceUid: "+i+" not in reference list")}}return e}(),e.prototype._extractPoints=function(){function e(e,t){for(var n=[],o=3*e.intString(f.NumberofContourPoints),i=0;i<o;i+=3)n.push({x:e.floatString(f.ContourData,i),y:e.floatString(f.ContourData,i+1),z:e.floatString(f.ContourData,i+2)});return n}return e}(),(0,r.default)(e,[{key:"polygons",get:function(){return this._polygons}}]),e}(),d="1.2.840.10008.5.1.4.1.1.481.3",f={SOPClassUID:"x00080016",SOPInstanceUID:"x00080018",ROIContourSequence:"x30060039",ROINumber:"x30060022",ReferencedROINumber:"x30060084",ContourSequence:"x30060040",ContourImageSequence:"x30060016",ReferencedSOPInstanceUID:"x00081155",ReferencedFrameNumber:"x00081160",ContourNumber:"x30060048",ContourGeometricType:"x30060042",NumberofContourPoints:"x30060046",ContourData:"x30060050",StructureSetROISequence:"x30060020",ReferencedFrameofReferenceUID:"x30060024",ReferencedFrameofReferenceSequence:"x30060010",FrameofReferenceUID:"x00200052",RTReferencedStudySequence:"x30060012",RTReferencedSeriesSequence:"x30060014",SeriesInstanceUID:"x0020000e",ReferencedSOPInstanceUID:"x00081155",StructureSetName:"x30060004",StructureSetLabel:"x30060002"}},"RoiExtractor.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck"));n.export({RoiExtractor:function(){return u}});var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var a=void 0,s=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){a=e},cornerstoneTools:function(e){s=e}},1);var l=void 0;n.watch(e("../classes/Polygon.js"),{Polygon:function(e){l=e}},2);var c=s.globalImageIdSpecificToolStateManager,u=function(){function e(t){(0,i.default)(this,e),this._seriesInstanceUid=t,this._volumes=[]}return e.prototype.hasVolumesToExtract=function(){function e(){var e=s.freehand.getRoiCollectionData()[this._seriesInstanceUid];if(void 0===e||void 0===e.default||0===e.default.length)return!1;for(var t=e.default,n=!1,o=0;o<t.length;o++)t[o]&&t[o].numPolygons>0&&(this._volumes[o]=[],n=!0);return n}return e}(),e.prototype.extractVolumes=function(){function e(e){var t=this,n=c.saveToolState();return Object.keys(n).forEach(function(o){if(t._getSeriesInstanceUidFromImageId(o)===t._seriesInstanceUid){var i=n[o];if(i&&i.freehand&&i.freehand.data){var r=i.freehand.data;t._getNewPolygonsInInstance(r,o,e)}}}),this._volumes}return e}(),e.prototype._getNewPolygonsInInstance=function(){function e(e,t,n){for(var o=0;o<e.length;o++){var i=e[o],r=i.volumeIndex;"default"===i.referencedRoiCollection&&n[r]&&this._appendPolygon(i,t)}}return e}(),e.prototype._appendPolygon=function(){function e(e,t){var n=e.imageAnnotationData.name,o=e.volumeIndex,i=this._getSOPInstanceUidFromImageId(t),r=this._getFrameNumber(t),a=new l(e.handles,i,this._seriesInstanceUid,r,e.uuid,o,"default");this._volumes[o].push(a),console.log("appended ROI")}return e}(),e.prototype._getSOPInstanceUidFromImageId=function(){function e(e){return r.viewer.metadataProvider.getMetadata(e).instance.sopInstanceUid}return e}(),e.prototype._getSeriesInstanceUidFromImageId=function(){function e(e){return r.viewer.metadataProvider.getMetadata(e).series.seriesInstanceUid}return e}(),e.prototype._getFrameNumber=function(){function e(e){if(console.log("RoiExtractor._getFrameNumber"),console.log("imageId:"),console.log(e),e.includes("frame=")){var t=e.split("frame=");return console.log("multi, returning "+String(Number(t[1])+1)),String(Number(t[1])+1)}return console.log("single, returning 1"),"1"}return e}(),e}()},"RoiImporter.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck"));n.export({RoiImporter:function(){return f}});var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var a=void 0,s=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){a=e},cornerstoneTools:function(e){s=e}},1);var l=void 0;n.watch(e("../classes/Polygon.js"),{Polygon:function(e){l=e}},2);var c=void 0;n.watch(e("../classes/AIMReader.js"),{AIMReader:function(e){c=e}},3);var u=void 0;n.watch(e("../classes/RTStructReader.js"),{RTStructReader:function(e){u=e}},4);var d=s.globalImageIdSpecificToolStateManager,f=function(){function e(t){(0,i.default)(this,e),this._seriesInstanceUid=t,this._sopInstanceUidToImageIdMap=this._setSopInstanceUidToImageIdMap()}return e.prototype.importAIMfile=function(){function e(e,t,n){var o=new c(e,this._seriesInstanceUid,t,n);this._addPolygonsToToolStateManager(o.polygons,"AIM")}return e}(),e.prototype.importRTStruct=function(){function e(e,t,n){var o=new u(e,this._seriesInstanceUid,t,n);this._addPolygonsToToolStateManager(o.polygons,"RTSTRUCT")}return e}(),e.prototype._addPolygonsToToolStateManager=function(){function e(e,t){for(var n=d.saveToolState(),o=0;o<e.length;o++){var i=e[o],r=i.sopInstanceUid,a=this._sopInstanceUidToImageIdMap[r];this._addOnePolygonToToolStateManager(i,n,a,t)}this._refreshToolStateManager(n)}return e}(),e.prototype._polygonNotAlreadyPresent=function(){function e(e,t){for(var n=0;n<e.length;n++)if(e[n].uuid===t)return!1;return!0}return e}(),e.prototype._addOnePolygonToToolStateManager=function(){function e(e,t,n,o){if(n){n=this._modifyImageIdIfMultiframe(n,e),this._addImageToolIfNotPresent(t,n);var i=t[n].freehand.data;if(this._polygonNotAlreadyPresent(i,e.uuid)){var r=e.getFreehandToolData(o);s.freehand.incrementVolumePolygonCount(r.seriesInstanceUid,r.referencedRoiCollection,r.volumeIndex),i.push(r)}}}return e}(),e.prototype._addImageToolIfNotPresent=function(){function e(e,t){e[t]?e[t].freehand||(e[t].freehand={},e[t].freehand.data=[]):(e[t]={},e[t].freehand={},e[t].freehand.data=[])}return e}(),e.prototype._refreshToolStateManager=function(){function e(e){d.restoreToolState(e);var t=r.viewerbase.viewportUtils.getActiveViewportElement();r.viewer.metadataProvider.updateMetadata(a.getImage(t)),a.updateImage(t)}return e}(),e.prototype._setSopInstanceUidToImageIdMap=function(){function e(){for(var e={},t=r.viewer.StudyMetadataList.all(),n=0;n<t.length;n++){var o=t[n].getSeriesByUID(this._seriesInstanceUid);if(void 0!==o)for(var i=o.getInstanceCount(),a=0;a<i;a++){var s=o.getInstanceByIndex(a),l=s.getImageId();e[s.sopInstanceUID]=l}}return e}return e}(),e.prototype._modifyImageIdIfMultiframe=function(){function e(e,t){if(!e.includes("frame="))return e;var n=e.split("frame="),o=Number(t.frameNumber)-1;return n[0]+"frame="+o}return e}(),e}()},"SeriesInfoProvider.js":function(e,t,n){function o(e){return e&&e.__esModule?e:{default:e}}var i=o(e("babel-runtime/helpers/classCallCheck"));n.export({SeriesInfoProvider:function(){return a}});var r=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){r=e}},0);var a=function(){function e(){(0,i.default)(this,e)}return e.getActiveSeriesInstanceUid=function(){function e(){var e=r.viewerbase.viewportUtils.getEnabledElementForActiveElement();if(e){var t=e.image.imageId;return r.viewer.metadataProvider.getMetadata(t).series.seriesInstanceUid}}return e}(),e.getActiveSeriesInfo=function(){function e(){var e=r.viewerbase.viewportUtils.getEnabledElementForActiveElement();if(e){var t=e.image,n=t.imageId,o=r.viewer.metadataProvider,i=o.getMetadata(n);X={studyInstanceUid:i.study.studyInstanceUid,seriesInstanceUid:i.series.seriesInstanceUid,modality:i.series.modality||o.getFromDataSet(t.data,"string","x00080060"),startDate:i.series.seriesDate||o.getFromDataSet(t.data,"string","x00080021"),startTime:i.series.seriesTime||o.getFromDataSet(t.data,"string","x00080031"),sopClassUid:i.instance.sopClassUid,sopInstanceUids:[],person:{name:i.patient.name,id:i.patient.id||o.getFromDataSet(t.data,"string","x00100020"),birthDate:i.patient.birthDate||o.getFromDataSet(t.data,"string","x00100030"),sex:i.patient.sex||o.getFromDataSet(t.data,"string","x00100040"),ethnicGroup:o.getFromDataSet(t.data,"string","x00102160")},equipment:{manufacturerName:o.getFromDataSet(t.data,"string","x00080070"),manufacturerModelName:o.getFromDataSet(t.data,"string","x00081090"),softwareVersion:o.getFromDataSet(t.data,"string","x00181020")}};for(var a=r.viewer.StudyMetadataList.all(),s=0;s<a.length;s++){var l=a[s].getSeriesByUID(X.seriesInstanceUid);if(void 0!==l)for(var c=0;c<l.getInstanceCount();c++){var u=l.getInstanceByIndex(c).getSOPInstanceUID();X.sopInstanceUids.push(u)}}return X}}return e}(),e}()}},configuration:{"toggleFreehandStats.js":function(e,t,n){function o(){var e=i.viewerbase.viewportUtils.getEnabledElementForActiveElement();e&&(s.alwaysShowTextBox=!s.alwaysShowTextBox,r.updateImage(e.element))}n.export({toggleFreehandStats:function(){return o}});var i=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},0);var r=void 0,a=void 0;n.watch(e("meteor/ohif:cornerstone"),{cornerstone:function(e){r=e},cornerstoneTools:function(e){a=e}},1);var s=a.freehand.getConfiguration()}}}},"main.js":function(e,t,n){n.export({OHIF:function(){return o},RoiStateManagement:function(){return i}});var o=void 0,i=void 0;n.watch(e("./namespace.js"),{OHIF:function(e){o=e},RoiStateManagement:function(e){i=e}},0),n.watch(e("./client/"))},"namespace.js":function(e,t,n){n.export({OHIF:function(){return o},RoiStateManagement:function(){return i}});var o=void 0;n.watch(e("meteor/ohif:core"),{OHIF:function(e){o=e}},0);var i={};o.RoiStateManagement=i}}}}},{extensions:[".js",".json",".html",".styl"]});G("./node_modules/meteor/icr:xnat-roi/client/viewportFunctions.js"),G("./node_modules/meteor/icr:xnat-roi/client/test.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/ioDialogs/template.ioDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/ioDialogs/ioDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/template.volumeManagementDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/volumeManagementDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/roiCollectionList/template.roiCollectionList.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/volumeList/template.volumeList.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/volumeList/volumeList.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/volumeListItem/template.volumeListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/volumeManagementDialogs/volumeListItem/volumeListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiImportListDialogs/template.roiImportListDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiImportListDialogs/roiImportListDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiImportListDialogs/roiImportListItem/template.roiImportListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiImportListDialogs/roiImportListItem/roiImportListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiCollectionBuilderDialogs/template.roiCollectionBuilderDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiCollectionBuilderDialogs/roiCollectionBuilderDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiCollectionBuilderDialogs/roiCollectionBuilderListItem/template.roiCollectionBuilderListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/roiCollectionBuilderDialogs/roiCollectionBuilderListItem/roiCollectionBuilderListItem.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/template.helpDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/helpDialogs.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/template.freehandHelpMenu.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/freehandHelpMenu.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/divs/template.freehandHelpDraw.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/divs/template.freehandHelpSculpt.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/divs/template.freehandHelpToggleStats.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/freehandHelpMenu/divs/template.freehandHelpVolumes.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/template.ioHelpMenu.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/ioHelpMenu.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/divs/template.ioHelpExport.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/divs/ioHelpExport.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/divs/template.ioHelpImport.js"),G("./node_modules/meteor/icr:xnat-roi/client/components/viewer/helpDialogs/ioHelpMenu/divs/template.ioHelpSnapshot.js");var W=G("./node_modules/meteor/icr:xnat-roi/main.js");"undefined"==typeof Package&&(Package={}),Package["icr:xnat-roi"]=W}();

!function(){var e=Package.meteor.Meteor,n=Package.meteor.global,t=Package.meteor.meteorEnv,r=Package.modules.meteorInstall,o=Package.promise.Promise,c=Package["ddp-client"].DDP,i=Package.check.check,u=Package.check.Match,a=r({node_modules:{meteor:{"dynamic-import":{"client.js":function(n,t,c){function i(e){function n(e){e&&"object"==typeof e?Object.keys(e).forEach(function(r){t.push(r),n(e[r]),t.pop()}):"string"==typeof e&&(r[t.join("/")]=e)}var t=[""],r=Object.create(null);return n(e),r}function u(e,n,t){return function(){return(t&&t.eval||eval)("("+n+")\n//# sourceURL="+e).apply(this,arguments)}}function a(n){return new o(function(t,r){e.call("__dynamicImport",n,function(e,n){e?r(e):t(n)})})}function s(e,n,t){var r=n.split("/"),o=r.length-1;r.forEach(function(n,r){n&&(e=e[n]=e[n]||(r<o?Object.create(null):t))})}function f(e,n){var t;return e.watch(e.require(n),{"*":function(e){t=e}}),Object.defineProperty(t,"__esModule",{value:!0,enumerable:!1}),t}var l=c.constructor,d=n("./cache.js");l.prototype.dynamicImport=function(e){var n=this;return n.prefetch(e).then(function(){return f(n,e)})},r.fetch=function(e){var t=Object.create(null),r=Object.create(null),o=n("./dynamic-versions.js"),c;return Object.keys(e).forEach(function(e){var n=o.get(e);n?r[e]=n:s(c=c||Object.create(null),e,1)}),d.checkMany(r).then(function(n){return Object.keys(n).forEach(function(r){var o=n[r];if(o){var i=e[r];s(t,r,u(r,o,i.options))}else s(c=c||Object.create(null),r,1)}),c&&a(c).then(function(n){var r=Object.create(null),c=i(n);Object.keys(c).forEach(function(n){var i=c[n],a=e[n];s(t,n,u(n,i,a.options));var f=o.get(n);f&&(r[n]={version:f,source:i})}),d.setMany(r)})}).then(function(){return t})}},"cache.js":function(n,t,r){function c(){return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}function i(e){return(f=f||new o(function(e,n){var t=c();if(!t)throw new Error("IndexedDB not available");var r=t.open("MeteorDynamicImportCache",2);r.onupgradeneeded=function(e){var n=e.target.result;Array.from(n.objectStoreNames).forEach(n.deleteObjectStore,n),Object.keys(d).forEach(function(e){n.createObjectStore(e,d[e])})},r.onerror=u(n,"indexedDB.open"),r.onsuccess=function(n){e(n.target.result)}})).then(e,function(n){return e(null)})}function u(e,n){return function(t){return e(new Error("IndexedDB failure in "+n+" "+JSON.stringify(t.target))),!0}}function a(){if(v>0)return a.timer=setTimeout(a,100);a.timer=null;var e=y;return y=Object.create(null),i(function(n){if(n){var t=n.transaction(["sourcesByVersion"],"readwrite").objectStore("sourcesByVersion");return o.all(Object.keys(e).map(function(n){var r=e[n];return new o(function(e,n){var o=t.put({version:r.version,source:r.source});o.onerror=u(n,"sourcesByVersion.put"),o.onsuccess=e})}))}})}var s=Object.prototype.hasOwnProperty,f,l=e.isClient&&!e.isCordova&&e.isProduction,d={sourcesByVersion:{keyPath:"version"}},v=0;t.checkMany=function(e){var n=Object.keys(e),t=Object.create(null);return n.forEach(function(e){t[e]=null}),l?i(function(r){function c(){return--v,t}if(!r)return t;var i=r.transaction(["sourcesByVersion"],"readonly").objectStore("sourcesByVersion");return++v,o.all(n.map(function(n){return new o(function(r,o){var c=e[n];if(c){var a=i.get(c);a.onerror=u(o,"sourcesByVersion.get"),a.onsuccess=function(e){var o=e.target.result;o&&(t[n]=o.source),r()}}else r()})})).then(c,c)}):o.resolve(t)};var y=Object.create(null);t.setMany=function(e){l&&(Object.assign(y,e),a.timer||(a.timer=setTimeout(a,100)))}},"dynamic-versions.js":function(e,n){var t={};n.get=function(e){var n=t,r=null;return e.split("/").some(function(e){return e&&(n=n[e]||n[e.replace(":","_")]),!n||("string"==typeof n?(r=n,!0):void 0)}),r}}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/dynamic-import/client.js");"undefined"==typeof Package&&(Package={}),Package["dynamic-import"]=a}();

"undefined"==typeof Package&&(Package={}),Package["hot-code-push"]={};

Mongo=Package.mongo.Mongo,ReactiveVar=Package["reactive-var"].ReactiveVar,$=Package.jquery.$,jQuery=Package.jquery.jQuery,Tracker=Package.tracker.Tracker,Deps=Package.tracker.Deps,cornerstone=Package["ohif:cornerstone"].cornerstone,cornerstoneMath=Package["ohif:cornerstone"].cornerstoneMath,cornerstoneTools=Package["ohif:cornerstone"].cornerstoneTools,cornerstoneWADOImageLoader=Package["ohif:cornerstone"].cornerstoneWADOImageLoader,dicomParser=Package["ohif:cornerstone"].dicomParser,dialogPolyfill=Package["ohif:viewerbase"].dialogPolyfill,HP=Package["ohif:hanging-protocols"].HP,SimpleSchema=Package["aldeed:simple-schema"].SimpleSchema,MongoObject=Package["aldeed:simple-schema"].MongoObject,Router=Package["iron:router"].Router,RouteController=Package["iron:router"].RouteController,Session=Package.session.Session,PersistentSession=Package["u2622:persistent-session"].PersistentSession,ReactiveDict=Package["reactive-dict"].ReactiveDict,moment=Package["mrt:moment"].moment,Random=Package.random.Random,Meteor=Package.meteor.Meteor,global=Package.meteor.global,meteorEnv=Package.meteor.meteorEnv,WebApp=Package.webapp.WebApp,_=Package.underscore._,DDP=Package["ddp-client"].DDP,LaunchScreen=Package["launch-screen"].LaunchScreen,Blaze=Package.ui.Blaze,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Spacebars=Package.spacebars.Spacebars,Template=Package["templating-runtime"].Template,meteorInstall=Package.modules.meteorInstall,meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers,Promise=Package.promise.Promise,Iron=Package["iron:core"].Iron,Autoupdate=Package.autoupdate.Autoupdate,Reload=Package.reload.Reload,HTML=Package.htmljs.HTML,Symbol=Package["ecmascript-runtime-client"].Symbol,Map=Package["ecmascript-runtime-client"].Map,Set=Package["ecmascript-runtime-client"].Set;

var require=meteorInstall({client:{components:{flexboxLayout:{"template.flexboxLayout.js":function(){Template.__checkName("flexboxLayout"),Template.flexboxLayout=new Template("Template.flexboxLayout",function(){var e=this;return HTML.DIV({class:"viewerSection"},"\n        ",HTML.DIV({class:function(){return["sidebarMenu sidebar-left ",Blaze.If(function(){return Spacebars.call(e.lookup("leftSidebarOpen"))},function(){return"sidebar-open"})]}},"\n            ",Blaze._TemplateWith(function(){return Spacebars.dataMustache(e.lookup("clone"),e.lookup("."))},function(){return Spacebars.include(e.lookupTemplate("studyBrowser"))}),"\n        "),"\n        ",HTML.DIV({class:function(){return["mainContent ",Blaze.If(function(){return Spacebars.call(e.lookup("leftSidebarOpen"))},function(){return"sidebar-left-open"})]}},"\n            ",Blaze._TemplateWith(function(){return Spacebars.dataMustache(e.lookup("clone"),e.lookup("."))},function(){return Spacebars.include(e.lookupTemplate("standaloneViewerMain"))}),"\n        "),"\n    ")})},"flexboxLayout.js":function(e,t,a){var o=void 0;a.watch(e("meteor/templating"),{Template:function(e){o=e}},0),o.flexboxLayout.events({"transitionend .sidebarMenu":function(e,t){e.target.classList.contains("sidebarMenu")&&window.ResizeViewportManager.handleResize()}}),o.flexboxLayout.helpers({leftSidebarOpen:function(){return o.instance().data.state.get("leftSidebar")}})}},standaloneViewer:{"template.standaloneViewer.js":function(){Template.__checkName("standaloneViewer"),Template.standaloneViewer=new Template("Template.standaloneViewer",function(){var e=this;return[Spacebars.include(e.lookupTemplate("header"),function(){return["\n        ",Blaze._TemplateWith(function(){return"brand"},function(){return Spacebars.include(e.lookupTemplate("section"),function(){return["\n            ",HTML.SVG({class:"logo-image"},"\n                ",HTML.USE({"xlink:href":function(){return Spacebars.mustache(e.lookup("absoluteUrl"),"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-ohif-logo")}}),"\n            "),"\n            ",HTML.DIV({class:"logo-text"},"OHIF Viewer XNAT RoI plugin - v1.5.4 RC1"),"\n        "]})}),"\n    "]}),"\n    ",Spacebars.include(e.lookupTemplate("viewer"))]})}},standaloneViewerMain:{"template.standaloneViewerMain.js":function(){Template.__checkName("standaloneViewerMain"),Template.standaloneViewerMain=new Template("Template.standaloneViewerMain",function(){var e=this;return HTML.Raw('<div class="viewerMain">\n        <div id="layoutManagerTarget"></div>\n    </div>')})},"standaloneViewerMain.js":function(e,t,a){var o=void 0;a.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var n=void 0;a.watch(e("meteor/templating"),{Template:function(e){n=e}},1);var i=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},2),a.watch(e("meteor/ohif:viewerbase")),o.startup(function(){window.ResizeViewportManager=window.ResizeViewportManager||new i.viewerbase.ResizeViewportManager}),n.standaloneViewerMain.onCreated(function(){window.addEventListener("resize",window.ResizeViewportManager.getResizeHandler()),i.viewer.updateImageSynchronizer=new cornerstoneTools.Synchronizer("cornerstonenewimage",cornerstoneTools.updateImageSynchronizer),i.viewer.metadataProvider=new i.cornerstone.MetadataProvider;var e=i.viewer.metadataProvider;cornerstone.metaData.addProvider(e.provider.bind(e))}),n.standaloneViewerMain.onRendered(function(){var e=n.instance(),t=e.data.studies,a=e.$("#layoutManagerTarget").get(0),o=i.viewerbase.StudyPrefetcher.getInstance();e.studyPrefetcher=o,e.studyLoadingListener=i.viewerbase.StudyLoadingListener.getInstance(),e.studyLoadingListener.clear(),e.studyLoadingListener.addStudies(t),i.viewerbase.layoutManager=new i.viewerbase.LayoutManager(a,t),i.viewerbase.layoutManager.updateViewports(),o.setStudies(t),i.viewerbase.hotkeyUtils.enableHotkeys()}),n.standaloneViewerMain.onDestroyed(function(){window.removeEventListener("resize",window.ResizeViewportManager.getResizeHandler()),i.viewer.updateImageSynchronizer.destroy(),delete i.viewerbase.layoutManager,instance.studyPrefetcher.destroy(),instance.studyLoadingListener.clear(),i.viewerbase.stackManager.clearStacks()})}},toolbarSection:{"template.toolbarSection.js":function(){Template.__checkName("toolbarSection"),Template.toolbarSection=new Template("Template.toolbarSection",function(){var e=this;return HTML.DIV({class:"toolbarSection noselect p-x-2"},"\n        ",HTML.DIV({class:"clearfix"},"\n            ",HTML.DIV({class:"pull-left m-t-1"},"\n                ",Blaze._TemplateWith(function(){return Spacebars.call(e.lookup("leftSidebarToggleButtonData"))},function(){return Spacebars.include(e.lookupTemplate("roundedButtonGroup"))}),"\n            "),"\n            ",Blaze._TemplateWith(function(){return{toolbarButtons:Spacebars.call(e.lookup("toolbarButtons"))}},function(){return Spacebars.include(e.lookupTemplate("toolbarSectionTools"))}),"\n        "),"\n    ")})},"toolbarSection.js":function(e,t,a){var o=void 0;a.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var n=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){n=e}},1),a.watch(e("meteor/ohif:viewerbase")),o.toolbarSection.onCreated(function(){var e=o.instance();n.uiSettings.leftSidebarOpen&&e.data.state.set("leftSidebar","studies")}),o.toolbarSection.helpers({leftSidebarToggleButtonData:function(){return{toggleable:!0,key:"leftSidebar",value:o.instance().data.state,options:[{value:"studies",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-studies",svgWidth:15,svgHeight:13,bottomLabel:"Series"}]}},toolbarButtons:function(){var e=[];e.push({id:"crosshairs",title:"Crosshairs",classes:"imageViewerTool",iconClasses:"fa fa-crosshairs"}),e.push({id:"stackScroll",title:"Stack Scroll",classes:"imageViewerTool",iconClasses:"fa fa-bars"}),e.push({id:"magnify",title:"Magnify",classes:"imageViewerTool toolbarSectionButton",iconClasses:"fa fa-circle"}),e.push({id:"wwwcRegion",title:"ROI Window",classes:"imageViewerTool",iconClasses:"fa fa-square"}),e.push({id:"dragProbe",title:"Probe",classes:"imageViewerTool",iconClasses:"fa fa-dot-circle-o"}),e.push({id:"ellipticalRoi",title:"Ellipse",classes:"imageViewerTool",iconClasses:"fa fa-circle-o"}),e.push({id:"rectangleRoi",title:"Rectangle",classes:"imageViewerTool",iconClasses:"fa fa-square-o"}),e.push({id:"invert",title:"Invert",classes:"imageViewerCommand",iconClasses:"fa fa-adjust"}),e.push({id:"rotateR",title:"Rotate Right",classes:"imageViewerCommand",svgLink:"/packages/ohif_viewerbase/assets/icons.svg#icon-tools-rotate-right"}),e.push({id:"flipH",title:"Flip H",classes:"imageViewerCommand",svgLink:"/packages/ohif_viewerbase/assets/icons.svg#icon-tools-flip-horizontal"}),e.push({id:"flipV",title:"Flip V",classes:"imageViewerCommand",svgLink:"/packages/ohif_viewerbase/assets/icons.svg#icon-tools-flip-vertical"});var t=[{id:"freehand",title:"Draw",classes:"imageViewerTool",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-draw"},{id:"freehandSculpter",title:"Sculpt",classes:"imageViewerTool",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-sculpt"},{id:"volumeManagement",title:"ROI Management",classes:"imageViewerCommand",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-switch-volume"},{id:"toggleFreehandStats",title:"Toggle Stats",classes:"imageViewerCommand",iconClasses:"fa fa-commenting"}],a=[{id:"brush",title:"Manual",classes:"imageViewerTool",iconClasses:"fa fa-paint-brush"},{id:"adaptiveBrush",title:"Adaptive",classes:"imageViewerTool",iconClasses:"fa fa-paint-brush"}],o=[{id:"eraser",title:"Eraser",classes:"imageViewerTool",iconClasses:"fa fa-eraser"},{id:"clearTools",title:"Clear",classes:"imageViewerCommand",iconClasses:"fa fa-trash"}],i=[{id:"exportROIs",title:"Export ROIs",classes:"imageViewerCommand",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-export"},{id:"importROIs",title:"Import ROIs",classes:"imageViewerCommand",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-import"},{id:"toggleDownloadDialog",title:"Snapshot",classes:"imageViewerCommand",iconClasses:"fa fa-camera"}],r=[];if(r.push({id:"zoom",title:"Zoom",classes:"imageViewerTool",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-zoom"}),r.push({id:"wwwc",title:"Levels",classes:"imageViewerTool",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-levels"}),r.push({id:"pan",title:"Pan",classes:"imageViewerTool",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-pan"}),r.push({id:"length",title:"Length",classes:"imageViewerTool toolbarSectionButton",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-measure-temp"}),r.push({id:"annotate",title:"Annotate",classes:"imageViewerTool",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-measure-non-target"}),r.push({id:"angle",title:"Angle",classes:"imageViewerTool",iconClasses:"fa fa-angle-left"}),r.push({id:"resetViewport",title:"Reset",classes:"imageViewerCommand",iconClasses:"fa fa-undo"}),!n.uiSettings.displayEchoUltrasoundWorkflow){r.push({id:"previousDisplaySet",title:"Previous",classes:"imageViewerCommand",iconClasses:"fa fa-toggle-up fa-fw"}),r.push({id:"nextDisplaySet",title:"Next",classes:"imageViewerCommand",iconClasses:"fa fa-toggle-down fa-fw"});var s=n.viewerbase.viewportUtils.isPlaying;r.push({id:"toggleCinePlay",title:function(){return s()?"Stop":"Play"},classes:"imageViewerCommand",iconClasses:function(){return"fa fa-fw "+(s()?"fa-stop":"fa-play")},active:s}),r.push({id:"toggleCineDialog",title:"CINE",classes:"imageViewerCommand",iconClasses:"fa fa-youtube-play",active:function(){return $("#cineDialog").is(":visible")}})}return r.push({id:"layout",title:"Layout",iconClasses:"fa fa-th-large",buttonTemplateName:"layoutButton"}),r.push({id:"freehandTools",title:"ROI",classes:"rp-x-1 rm-l-3",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-freehand-menu",subTools:t}),r.push({id:"freehandIO",title:"XNAT",classes:"rp-x-1 rm-l-3",svgLink:"packages/icr_xnat-roi/assets/icons.svg#icon-xnat-logo",subTools:i}),r.push({id:"delete",title:"Delete",classes:"rp-x-1 rm-l-3",iconClasses:"fa fa-times",subTools:o}),r.push({id:"showSyncSettings",title:"Sync Settings",classes:"imageViewerCommand",iconClasses:"fa fa-link"}),r.push({id:"toggleMore",title:"More",classes:"rp-x-1 rm-l-3",svgLink:"packages/ohif_viewerbase/assets/icons.svg#icon-tools-more",subTools:e}),r.push({id:"showHelp",title:"Help",classes:"imageViewerCommand",iconClasses:"fa fa-question"}),r},hangingProtocolButtons:function(){var e=[];return e.push({id:"previousPresentationGroup",title:"Prev. Stage",iconClasses:"fa fa-step-backward",buttonTemplateName:"previousPresentationGroupButton"}),e.push({id:"nextPresentationGroup",title:"Next Stage",iconClasses:"fa fa-step-forward",buttonTemplateName:"nextPresentationGroupButton"}),e}}),o.toolbarSection.onRendered(function(){o.instance().$("#layout").dropdown();var e=n.viewerbase.toolManager.getToolDefaultStates().disabledToolButtons,t=$("#toolbar").find("button");if(e&&e.length>0)for(var a=0;a<t.length;a++){var i=t[a];$(i).prop("disabled",!1),-1!==e.indexOf($(i).attr("id"))&&$(i).prop("disabled",!0)}})}},viewer:{"template.viewer.js":function(){Template.__checkName("viewer"),Template.viewer=new Template("Template.viewer",function(){var e=this;return Blaze.If(function(){return Spacebars.call(e.templateInstance().subscriptionsReady())},function(){return["\n        ",HTML.DIV({class:"viewerDialogs"},"\n            ",Spacebars.include(e.lookupTemplate("cineDialog")),"\n            ",Spacebars.include(e.lookupTemplate("layoutChooser")),"\n            ",Spacebars.include(e.lookupTemplate("annotationDialogs")),"\n            ",Spacebars.include(e.lookupTemplate("stackSyncDialog")),"\n            ",Spacebars.include(e.lookupTemplate("helpDialogs")),"\n            ",Spacebars.include(e.lookupTemplate("volumeManagementDialogs")),"\n            ",Spacebars.include(e.lookupTemplate("roiCollectionBuilderDialogs")),"\n            ",Spacebars.include(e.lookupTemplate("roiImportListDialogs")),"\n            ",Spacebars.include(e.lookupTemplate("ioDialogs")),"\n        "),"\n        ",HTML.DIV({id:"viewer"},"\n            ",Blaze._TemplateWith(function(){return Spacebars.dataMustache(e.lookup("clone"),e.lookup("."),Spacebars.kw({state:e.lookup("state")}))},function(){return Spacebars.include(e.lookupTemplate("toolbarSection"))}),"\n            ",Blaze._TemplateWith(function(){return Spacebars.dataMustache(e.lookup("clone"),e.lookup("."),Spacebars.kw({state:e.lookup("state")}))},function(){return Spacebars.include(e.lookupTemplate("flexboxLayout"))}),"\n        "),"\n    "]},function(){return["\n        ",Spacebars.include(e.lookupTemplate("loadingText")),"\n    "]})})},"viewer.js":function(e,t,a){var o=void 0;a.watch(e("meteor/templating"),{Template:function(e){o=e}},0);var n=void 0;a.watch(e("meteor/session"),{Session:function(e){n=e}},1);var i=void 0;a.watch(e("meteor/tracker"),{Tracker:function(e){i=e}},2);var r=void 0;a.watch(e("meteor/reactive-dict"),{ReactiveDict:function(e){r=e}},3);var s=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){s=e}},4),a.watch(e("meteor/ohif:viewerbase")),a.watch(e("meteor/ohif:metadata"));var l=s.viewerbase.viewportUtils;s.viewer.functionList={toggleCineDialog:l.toggleCineDialog,toggleCinePlay:l.toggleCinePlay,clearTools:l.clearTools,resetViewport:l.resetViewport,invert:l.invert},n.setDefault("activeViewport",!1),n.setDefault("leftSidebar",!1),n.setDefault("rightSidebar",!1);var c=function(){HP.ProtocolStore.onReady(function(){var e=s.viewer.StudyMetadataList.all(),t=s.viewerbase.layoutManager,a=new s.studies.classes.OHIFStudyMetadataSource,o=new HP.ProtocolEngine(t,e,[],a);HP.setEngine(o)})};o.viewer.onCreated(function(){var e=o.instance();e.state=new r,e.state.set("leftSidebar",n.get("leftSidebar")),e.state.set("rightSidebar",n.get("rightSidebar")),s.viewer.data&&s.viewer.data.loadedSeriesData?(s.log.info("Reloading previous loadedSeriesData"),s.viewer.loadedSeriesData=s.viewer.data.loadedSeriesData):(s.log.info("Setting default viewer data"),s.viewer.loadedSeriesData={},s.viewer.data={},s.viewer.data.loadedSeriesData=s.viewer.loadedSeriesData,s.viewer.data.viewportColumns=1,s.viewer.data.viewportRows=1,s.viewer.data.activeViewport=0),n.setPersistent("ViewerData",s.viewer.data),n.set("activeViewport",s.viewer.data.activeViewport||0),s.viewer.Studies.removeAll(),s.viewer.StudyMetadataList.removeAll(),s.viewer.data.studyInstanceUids=[],e.data.studies.forEach(function(e){var t=new s.metadata.StudyMetadata(e,e.studyInstanceUid),a=e.displaySets;e.displaySets||(a=s.viewerbase.sortingManager.getDisplaySets(t),e.displaySets=a),e.selected=!0,s.viewer.Studies.insert(e),s.viewer.StudyMetadataList.insert(t),s.viewer.data.studyInstanceUids.push(e.studyInstanceUid)})}),o.viewer.onRendered(function(){this.autorun(function(){n.get("OHIFViewerMainRendered")&&i.nonreactive(c)})}),o.viewer.events({"click .js-toggle-studies":function(){var e=o.instance(),t=e.state.get("leftSidebar");e.state.set("leftSidebar",!t)}}),o.viewer.helpers({state:function(){return o.instance().state}})}}},"config.js":function(e,t,a){var o=void 0;a.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var n=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){n=e}},1);var i=void 0;a.watch(e("meteor/ohif:cornerstone"),{cornerstoneWADOImageLoader:function(e){i=e}},2),o.startup(function(){var e={maxWebWorkers:Math.max(navigator.hardwareConcurrency-1,1),startWebWorkersOnDemand:!0,webWorkerPath:n.utils.absoluteUrl("packages/ohif_cornerstone/public/js/cornerstoneWADOImageLoaderWebWorker.es5.js"),taskConfiguration:{decodeTask:{loadCodecsOnStartup:!0,initializeCodecsOnStartup:!1,codecsPath:n.utils.absoluteUrl("packages/ohif_cornerstone/public/js/cornerstoneWADOImageLoaderCodecs.es5.js"),usePDFJS:!1}}};i.webWorkerManager.initialize(e)})}},"routes.js":function(e,t,a){var o=void 0;a.watch(e("meteor/meteor"),{Meteor:function(e){o=e}},0);var n=void 0;a.watch(e("meteor/iron:router"),{Router:function(e){n=e}},1);var i=void 0;a.watch(e("meteor/ohif:core"),{OHIF:function(e){i=e}},2);var r=void 0;a.watch(e("meteor/icr:xnat-roi-namespace"),{icrXnatRoiSession:function(e){r=e}},3);var s="XNAT";if(0)console.error("routingMode set to an invalid value.");else if(o.isClient){i.log.info("Disconnecting from the Meteor server"),o.disconnect();var l=window.top.XNAT.url.getProtocol()+"//"+window.top.XNAT.url.getDomain()+":"+window.top.XNAT.url.getPort()+window.top.XNAT.url.rootUrl("").replace(/\/+$/,"");Session.set("rootUrl",l);var c=window.top.XNAT.data.context;r.set("experimentId",c.ID),r.set("experimentLabel",c.label),r.set("subjectId",c.subjectID),r.set("projectId",c.projectID),i.RoiStateManagement.checkAndSetPermissions();for(var u=l.split("//")[1].split("/"),d="/",p=1;p<u.length;p++)d+=u[p]+"/";var f=d+"VIEWER";Session.set("viewerRoot",f),console.log("extention: "+d),console.log("viewer route: "+f);var g=window.top.jsonRequestUrl;console.log("jsonRequestUrl in viewer: "+g),n.configure({loadingTemplate:"loading"}),n.onBeforeAction("loading"),n.route(""+f,{onRun:function(){var e=this;console.log("onRun");var t=this.next,a=g,o=new XMLHttpRequest;o.addEventListener("error",function(){i.log.warn("An error occurred while retrieving the JSON data"),t()}),o.addEventListener("load",function(){o.responseText?(i.log.info(JSON.stringify(o.responseText,null,2)),e.data=JSON.parse(o.responseText),console.log(e.data),t()):i.log.warn("Response was undefined")}),i.log.info("Sending Request to: "+a),o.open("GET",a),o.setRequestHeader("Accept","application/json"),o.send()},action:function(){var e=this;console.log("Loading up viewer with json!"),this.render("standaloneViewer",{data:function(){return e.data}})}})}}},{extensions:[".js",".json",".html",".styl"]});!function e(t,a){"object"==typeof exports&&"object"==typeof module?module.exports=a(require("cornerstone-core")):"function"==typeof define&&define.amd?define("cornerstoneWebImageLoader",["cornerstone-core"],a):"object"==typeof exports?exports.cornerstoneWebImageLoader=a(require("cornerstone-core")):t.cornerstoneWebImageLoader=a(t.cornerstone)}(this,function(e){return function(e){function t(o){if(a[o])return a[o].exports;var n=a[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var a={};return t.m=e,t.c=a,t.i=function(e){return e},t.d=function(e,a,o){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var a=e&&e.__esModule?function t(){return e.default}:function t(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(t,a){t.exports=e},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=$.Deferred(),a=new Image,o=new Uint8Array(e),n=new Blob([o]),i=window.URL||window.webkitURL,r=i.createObjectURL(n);return a.src=r,a.onload=function(){t.resolve(a),i.revokeObjectURL(r)},a.onerror=function(e){i.revokeObjectURL(r),t.reject(e)},t.promise()}},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){function a(){for(var t=o().data,a=e.naturalHeight*e.naturalWidth,n=new Uint8Array(4*a),i=0,r=0,s=0;s<a;s++)n[r++]=t[i++],n[r++]=t[i++],n[r++]=t[i++],n[r++]=255,i++;return n}function o(){var a=void 0;return r===t?a=i.getContext("2d"):(i.height=e.naturalHeight,i.width=e.naturalWidth,(a=i.getContext("2d")).drawImage(e,0,0),r=t),a.getImageData(0,0,e.naturalWidth,e.naturalHeight)}function s(){return r===t?i:(i.height=e.naturalHeight,i.width=e.naturalWidth,i.getContext("2d").drawImage(e,0,0),r=t,i)}function l(){return e}var c=e.naturalHeight,u=e.naturalWidth;return{imageId:t,minPixelValue:0,maxPixelValue:255,slope:1,intercept:0,windowCenter:128,windowWidth:255,render:n.renderWebImage,getPixelData:a,getImageData:o,getCanvas:s,getImage:l,rows:c,columns:u,height:c,width:u,color:!0,columnPixelSpacing:void 0,rowPixelSpacing:void 0,invert:!1,sizeInBytes:c*u*4}};var n=o(a(0)),i=document.createElement("canvas"),r=""},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function i(e){var t=$.Deferred(),a=new XMLHttpRequest;return a.open("GET",e,!0),a.responseType="arraybuffer",u.beforeSend(a),a.onload=function(){(0,l.default)(this.response).then(function(a){var o=(0,c.default)(a,e);t.resolve(o)},function(e){t.reject(e)})},a.onprogress=function(t){if(t.lengthComputable){var a=t.loaded,o=t.total,n=Math.round(a/o*100);$(s.events).trigger("CornerstoneImageLoadProgress",{imageId:e,loaded:a,total:o,percentComplete:n})}},a.send(),t.promise()}function r(e){u=e}Object.defineProperty(t,"__esModule",{value:!0}),t.loadImage=i,t.configure=r;var s=n(a(0)),l=o(a(1)),c=o(a(2)),u={beforeSend:function e(){}}},function(e,t,a){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=t.loadImage=t.createImage=t.arrayBufferToImage=void 0;var i=n(a(1)),r=n(a(2)),s=a(3),l=o(a(0));t.arrayBufferToImage=i.default,t.createImage=r.default,t.loadImage=s.loadImage,t.configure=s.configure,l.registerImageLoader("http",s.loadImage),l.registerImageLoader("https",s.loadImage)}])}),require("./client/components/flexboxLayout/template.flexboxLayout.js"),require("./client/components/standaloneViewer/template.standaloneViewer.js"),require("./client/components/standaloneViewerMain/template.standaloneViewerMain.js"),require("./client/components/toolbarSection/template.toolbarSection.js"),require("./client/components/viewer/template.viewer.js"),require("./client/components/flexboxLayout/flexboxLayout.js"),require("./client/components/standaloneViewerMain/standaloneViewerMain.js"),require("./client/components/toolbarSection/toolbarSection.js"),require("./client/components/viewer/viewer.js"),require("./client/config.js"),require("./routes.js");

!function(){var e=Package.meteor.Meteor,r=Package.meteor.global,a=Package.meteor.meteorEnv,t=Package.check.check,n=Package.check.Match,i=Package.modules.meteorInstall,o=Package["babel-runtime"].meteorBabelHelpers,c=Package.promise.Promise,l=Package["ecmascript-runtime-client"].Symbol,u=Package["ecmascript-runtime-client"].Map,s=Package["ecmascript-runtime-client"].Set,m;i({node_modules:{meteor:{"mdg:validation-error":{"validation-error.js":function(r){function a(e){return e&&e.__esModule?e:{default:e}}var i=a(r("babel-runtime/helpers/classCallCheck")),o=a(r("babel-runtime/helpers/possibleConstructorReturn")),c=a(r("babel-runtime/helpers/inherits")),l=[n.ObjectIncluding({name:String,type:String})];(m=function(r){function a(e){var n,c,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.DEFAULT_MESSAGE;return(0,i.default)(this,a),t(e,l),t(u,String),c=n=(0,o.default)(this,r.call(this,m.ERROR_CODE,u,e)),(0,o.default)(n,c)}return(0,c.default)(a,r),a.is=function(){function r(r){return r instanceof e.Error&&r.error===m.ERROR_CODE}return r}(),a}(e.Error)).ERROR_CODE="validation-error",m.DEFAULT_MESSAGE="Validation failed"}}}}},{extensions:[".js",".json"]})("./node_modules/meteor/mdg:validation-error/validation-error.js"),"undefined"==typeof Package&&(Package={}),function(e,r){for(var a in r)a in e||(e[a]=r[a])}(Package["mdg:validation-error"]={},{ValidationError:m})}();

!function(){var o=Package.meteor.Meteor,e=Package.meteor.global,n=Package.meteor.meteorEnv,i=Package["accounts-base"].Accounts,r=Package.mongo.Mongo,c;(function(){void 0===c&&(c={}),c.configurations=new r.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:!0,connection:o.isClient?i.connection:o.connection}),c.ConfigError=function(e){o.isClient&&!i.loginServicesConfigured()?this.message="Login service configuration not yet loaded":this.message=e?"Service "+e+" not configured":"Service not configured"},c.ConfigError.prototype=new Error,c.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this),"undefined"==typeof Package&&(Package={}),function(o,e){for(var n in e)n in o||(o[n]=e[n])}(Package["service-configuration"]={},{ServiceConfiguration:c})}();

